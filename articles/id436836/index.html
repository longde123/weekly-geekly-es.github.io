<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧜 👨🏿‍🤝‍👨🏼 🕟 Manfaat menganalisis aplikasi level 7 di firewall. Bagian 2. Keamanan 🐞 🕎 🃏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Generasi baru firewall lebih nyaman dan aman berkat arsitektur engine baru dan ideologi baru untuk mengelola aliran jaringan. 

 Mengapa artikel ini m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manfaat menganalisis aplikasi level 7 di firewall. Bagian 2. Keamanan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436836/"><img src="https://habrastorage.org/getpro/habr/post_images/786/9e4/d4e/7869e4d4eac6b07b8bfa763cb3985347.png"><br><br>  Generasi baru firewall lebih nyaman dan aman berkat arsitektur engine baru dan ideologi baru untuk mengelola aliran jaringan. <br><br><h3>  Mengapa artikel ini muncul? </h3><br><blockquote>  Berulang kali datang ke sesama pekerja keamanan yang menggunakan generasi baru firewall dan melihat bahwa mereka terus menulis aturan tentang nomor port.  Atas saran saya untuk terus menulis dengan nama aplikasi, saya mendengar "Bagaimana jika itu tidak berfungsi seperti itu?"  Jika Anda juga "takut" atau tidak jelas mengapa harus menulis aturan untuk aplikasi, artikel ini untuk Anda. </blockquote><a name="habracut"></a>  Awal artikel dengan referensi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bagian 1. Dasar-dasar firewall</a> <br><br><a name="Start"></a><h1>  Bagian 2. Dampak Keselamatan dari L7 FIREWALL </h1><br><h3>  Isi </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L7 firewall memeriksa isi bidang data, L4 firewall no</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi telah berubah - ubah firewall Anda</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cara kerja deteksi lalu lintas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L7 Firewall lebih nyaman</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">L7 Firewall lebih aman</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Masalah baru apa yang menciptakan pendekatan baru dalam penulisan aturan untuk L7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Keterbatasan Teknologi Analisis Level 7</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kesimpulan</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Voting</a> <br><br><a name="Data"></a><h2>  L7 firewall memeriksa isi bidang data, L4 firewall no </h2><br><blockquote>  <b>Masalah utama yang kami perjuangkan adalah sekarang program-program tersebut ditulis segera sehingga mereka mem-bypass perlindungan firewall L4.</b> </blockquote>  Jika seseorang meletakkan Skype, maka dia tidak ingin memanggil administrator sistem dan memohon untuk membuka port yang dia butuhkan di firewall - dia ingin Skype segera menyalakan "hijau."  Pemrogram tahu bahwa sering ada proxy HTTP di jaringan atau port 80 terbuka untuk HTTP, port 53 untuk DNS, port 123 untuk NTP, dan kadang-kadang untuk karyawan dari dalam ke luar ke Internet, semuanya terbuka dan Anda dapat menggunakan koneksi yang diizinkan ini sesuai. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6de/735/726/6de735726e071aab7f3a122cb9e7fd34.png"><br><br>  Pengembang memiliki istilah Pengalaman Pengguna - setelah instalasi, klien terbakar dalam warna hijau Skype = klien senang.  Dan fakta bahwa Skype melewati perimeter perusahaan secara ilegal melalui koneksi yang terbuka untuk browser hanya pada port TCP / 80 dan 443 - firewall L4 mengabaikan, karena bukan tugasnya untuk melihat isi paket - hanya header yang penting baginya. <br><br><h3>  Masalah firewall L4: port-hopping (tunneling) </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/e3e/aa8/502/e3eaa85023c8a83afe2fd9410e866965.png" align="left">  Tunneling aplikasi yang tidak sah dalam koneksi yang diizinkan adalah gambaran standar dalam jaringan modern.  Secara alami, peretas menggunakan trik yang sama: mereka membuat terowongan di koneksi yang diizinkan.  Dan penjaga keamanan bahkan tidak tahu. <br><br><h3>  Contoh Terowongan TCP-Lebih-DNS </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/30d/c7e/f30/30dc7ef30cfc1ca8c880c9d54ac9f3b7.png"><br><br>  Dari paket lalu lintas yang dikumpulkan dalam gambar, jelas bahwa ada koneksi pada port TCP ke-53, yang biasanya dianggap sebagai operasi protokol DNS.  Namun, jika Anda melihat lebih dekat, Anda dapat melihat bahwa di bidang Teks dari protokol DNS ada beberapa jenis teks terenkripsi.  Ini adalah implementasi dari terowongan TCP-Over-DNS, yang sering saya lihat di jaringan perusahaan.  Di sebelah kiri adalah daftar terowongan lain yang dapat digunakan oleh pengguna atau peretas.  Apakah L4 firewall memberikan informasi seperti itu?  Tidak.  Karena itu, jika Anda perlu melindungi perusahaan dari terowongan yang tidak sah, maka Anda perlu menganalisis konten data yang dikirim dan menggunakannya untuk menganalisis aplikasi mana yang saat ini menggunakan koneksi TCP ini. <br><br><a name="App"></a><h2>  Aplikasi telah berubah - ubah firewall Anda </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/f4d/ee2/573/f4dee257312a6c98e9607812d9976731.png"><br><br>  Dunia telah berubah dan hari ini menentukan aplikasi berdasarkan nomor port tidak cukup.  Ya, 20 tahun yang lalu kami sepakat bahwa jika 80 ditulis di bidang Port, maka ini adalah HTTP, jika 53, maka ini adalah DNS, tetapi sekarang tidak demikian! <br><br>  Penting untuk menganalisis isi dari data yang dikirimkan dan bagi mereka untuk menganalisis aplikasi mana yang saat ini menggunakan koneksi TCP ini. <br><br>  Pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">database</a> aplikasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">applipedia.paloaltonetworks.com</a> .  Lihat berapa banyak aplikasi yang menggunakan port 80 dan 443. <br><blockquote>  <b>Sebuah contoh</b> <br><br>  Aplikasi menggunakan port 80 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/522/b2d/510/522b2d51051df42c0ead70785e0c7e71.png"><br></blockquote><blockquote><h3>  Masalah dengan banyak fitur keamanan adalah mengabaikan aplikasi pada port non-standar. </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/8a9/ece/07d/8a9ece07d27298757b7a0819107f88c8.png" align="left"><br>  Memindahkan aplikasi standar ke port non-standar juga memungkinkan penyerang keluar dari kendali.  Kontrol ini hanya mengembalikan perangkat yang menganalisis konten semua lalu lintas, dan bukan hanya header. </blockquote><br><a name="Visual"></a><h2>  Cara kerja deteksi lalu lintas </h2><br>  Salah satu tugas analisis aplikasi adalah untuk mendeteksi lalu lintas aplikasi yang dibuat khusus sehingga koneksi mereka tidak terlihat.  Ambil contoh Skype.  Orang yang telah belajar membedakan paket UDP terenkripsi Skype dari paket UDP terenkripsi lainnya adalah orang yang sangat baik. <br><br>  Ada juga kelas perangkat yang dapat melakukan ini: Deep Packet Inspection (selanjutnya disebut DPI).  Perangkat seperti ini sekarang dengan penyedia besar dan memungkinkan Anda untuk memanipulasi lalu lintas aplikasi: menerapkan QoS atau mengarahkan ke arah yang benar.  Terkadang NGFW dan DPI dibandingkan.  Perbedaan: DPI dirancang untuk mengontrol kualitas lalu lintas, dan keamanan NGFW, meskipun NGFW juga memiliki fitur QoS. <br><br>  Metode untuk mendeteksi aplikasi dalam lalu lintas berbeda. <br><br><ul><li>  Jika Anda perlu menemukan <b>aplikasi</b> yang <b>tidak menyembunyikan</b> dirinya dalam lalu lintas, seperti HTTP, maka cukup menggunakan pencarian biasa untuk pola atau tanda tangan yang sesuai.  Dan ini aktif digunakan oleh produsen.  Ini yang paling mudah. <br></li><li>  Jika Anda perlu menemukan <b>aplikasi</b> yang <b>sengaja menyembunyikan dirinya</b> , misalnya, TOR, maka Anda memerlukan serangkaian metode untuk menganalisis statistik paket dan perilaku paket.  Ini sulit, memerlukan laboratorium penelitian, yang juga perlu melacak perubahan protokol dalam waktu dan menerapkan algoritma pencarian baru.  Upaya saya untuk mendapatkan setidaknya satu pengembang untuk mengetahui bagaimana algoritma ini bekerja, menemukan jawaban bahwa ini semua adalah kekayaan intelektual. <br></li></ul><br>  Kebetulan aplikasi telah mengubah algoritma operasi, dan mesin DPI atau NGFW belum berhasil berubah.  Misalnya, Telegram terkadang berubah karena sedang diburu.  Positif palsu terjadi.  Ini penting untuk diverifikasi.  Dengan demikian, perangkat dan NGFW dan DPI berbeda terutama dalam jumlah dan kualitas deteksi aplikasi.  Inilah satu-satunya metode: menempatkan NGFW di lalu lintas Anda dan lihat.  Jika kita berbicara tentang perimeter, lalu lintas paling kompleks yang saya lihat berisi 715 aplikasi berbeda per bulan.  Rata-rata, 200-300 aplikasi dari berbagai jenis melewati perimeter.  Dalam visualisasi lalu lintas aplikasi ini, Anda dapat melihat ini: arahkan mouse ke setiap lingkaran: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://researchcenter.paloaltonetworks.com/app-usage-risk-report-visualization/</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><br><img src="https://habrastorage.org/getpro/habr/post_images/945/099/048/94509904864c2cfeba02858aabf7127e.png"></a> <br><br>  Ada ribuan aplikasi dalam database aplikasi, jadi pada dasarnya menganalisis format dan algoritma dari setiap aplikasi adalah pekerjaan yang panjang dan melelahkan bagi para analis.  Setelah kami memahami cara kerja aplikasi, programmer mulai bekerja, yang mengimplementasikan penemuan aplikasi oleh traffic.  Dan beberapa ribu aplikasi ini terus berubah.  Oleh karena itu, produk harus terus didukung, mempelajari aplikasi baru dan memantau perubahan yang lama dan menambahkan detektor yang dimodifikasi ke database.  Basis data semua aplikasi yang memungkinkan menghasilkan lalu lintas dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ditemukan di sini</a> . <br><br>  Terkadang vendor firewall L7 mencoba untuk mengukur jumlah aplikasi yang mereka miliki dalam database, tetapi ini lebih seperti kata-kata kotor.  Dengan menghidupkan pemikiran kritis, Anda memahami bahwa pada kenyataannya Anda hanya perlu mendeteksi aplikasi pada batas (rata-rata, di wilayah 300 aplikasi yang berbeda), di pusat data (10-15 buah), di jaringan ICS / SCADA (2-3 aplikasi), antara internal segmen (mungkin hanya beberapa lusin).  Dan jika Anda ditawari untuk mendeteksi ribuan aplikasi - ini hanya pemasaran dan pendeteksian beberapa aplikasi tidak dikenal yang tidak ada yang menggunakan. <br><br>  <b>Contoh aplikasi di jaringan perusahaan:</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/240/186/ad2/240186ad2ca0654136be608ba2238460.png" alt="gambar"><br><br>  Segmentasi internal dalam perusahaan adalah persyaratan standar keamanan informasi yang konstan yang hampir tidak ada yang memenuhi.  Antara segmen di mana programmer, pemodal, SDM dan akuntansi duduk, aplikasi juga berjalan.  Minimal, Anda perlu mengontrol jaringan Windows (protokol SMB), ini menjadi sangat jelas setelah epidemi cryptoclocker WannaCry, yang didistribusikan melalui SMB.  Artinya, jaringan internal juga perlu analisis aplikasi level 7 dan metode terkait untuk mencari kode berbahaya di kotak pasir dan IPS, dan setidaknya mengendalikan jenis file yang ditransfer. <br><blockquote>  Masalah paling umum yang terlihat dalam jaringan: firewall seharusnya level 7, tetapi pada kenyataannya mendeteksi aplikasi dengan port.  Bagaimana cara memeriksanya? <br><br><ol><li>  Untuk pengujian, gantung server FTP pada port 25.  Jika perangkat salah dan mengatakan bahwa itu adalah protokol SMTP, maka ini jelas bukan firewall L7. </li><li>  Atau coba tulis aturan untuk dua aplikasi berbeda yang menggunakan port yang sama.  Buat aturan yang berbeda untuk mereka: di satu blok file exe, di yang lain, izinkan.  Jika ternyata dilakukan, itu berarti kebenaran adalah analisis aplikasi (bukan nomor port) terlebih dahulu, dan kemudian bekerja dengan kontennya: memblokir file, memeriksa tanda tangan virus, memeriksa tanda tangan IPS dan sebagainya. </li><li>  Tes lain yang menarik untuk NGFW adalah ketika Anda perlu membuat dua aplikasi L7 khusus dengan properti berbeda pada alamat IP yang sama.  Ini tidak bisa L4 firewall, tetapi bisa L7 firewall.  Deskripsi lengkap dan uji sendiri di sini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://basic.ngfw-test.com/</a> </li></ol></blockquote>  Di Rusia, masih penting bahwa firewall mengetahui lalu lintas aplikasi Rusia: 1C, Odnoklassniki, Yandex.Disk, mail.ru, bagaimana pembaruan Anti-Virus Kaspersky terlihat, dan sebagainya.  Ini juga merupakan komponen penemuan aplikasi penting yang harus Anda izinkan dengan aman untuk aplikasi ini bagi karyawan Anda. <br><br><a name="Comfort"></a><h2>  L7 Firewall lebih nyaman </h2><br>  Jika Anda melihat proses pelatihan insinyur jaringan, maka paling sering orang mengambil kursus dari produsen peralatan jaringan yang terkenal dan ini memberikan pengetahuan yang baik tentang teknologi jaringan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e73/5bc/284/e735bc2844f2258e4d11fe3e702d2fd2.jpg"><br><br>  Penulis dari baris-baris ini menyelesaikan sejumlah kursus Cisco pada tahun 2003 dan karenanya menyajikan secara spesifik para insinyur jaringan pelatihan khususnya: sebagai aturan, setelah mempelajari model OSI ISO tujuh tingkat, hanya 4 level pertama yang dipelajari secara terperinci.  Artinya, semua seluk-beluk insinyur jaringan keamanan informasi hanya tahu hingga tingkat TCP / UDP / ICMP.  Hanya beberapa yang dasar yang dipertimbangkan dari level aplikasi: HTTP, DNS, SSH, Telnet, NTP, FTP.  Apa hasilnya?  Dan administrator jaringan merasa bahwa mengelola lapisan aplikasi mudah dari lapisan transportasi! <br><br>  Tampaknya bagi spesialis jaringan yang baru dipanggang bahwa semuanya dapat dilakukan dengan aturan di tingkat transportasi, di mana Anda hanya perlu mengizinkan protokol dan port yang diperlukan.  Perlu mengizinkan peramban di Internet?  Kami membuka TCP / 80.  Perlu membuka DNS?  Buka TCP / 53 atau UDP / 53.  Perlu membuka RDP?  Buka TCP / 3389.  Dan aturan penulisan pada L4 firewall menjadi standar di perusahaan. <br><br>  Saya harus mengatakan bahwa banyak spesialis TI menyadari konsep inspeksi negara.  Tetapi pada saat yang sama, bagi banyak orang, ini merupakan wahyu bahwa firewall yang berbeda mendukung inspeksi penuh untuk serangkaian aplikasi yang berbeda.  Saya memiliki statistik tertentu karena saya bekerja sebagai guru kursus Firewall di pusat pelatihan perusahaan Informzashita.  Apa yang saya lihat?  Seseorang berpikir bahwa inspeksi statefull hanya tentang izin untuk menerima tanggapan protokol TCP / UDP / ICMP kembali.  Tetapi bagaimana dengan aplikasi yang lebih kompleks?  Misalnya, bagaimana melacak dua koneksi TCP yang dibuat oleh protokol FTP pada port 21 dan 20 - apakah keduanya saling bergantung?  Di sana Anda tidak hanya perlu menerima jawaban, tetapi juga mengizinkan koneksi kedua, tergantung pada perintah PORT, di dalam koneksi kontrol pada port 21.  Dan berapa banyak lagi aplikasi untuk membuka koneksi baru di dalam diri mereka yang memberikan aplikasi?  Singkatnya, jaringan sekarang menggunakan daftar akses biasa, yang tidak mengerti perintah PORT di dalam protokol FTP, dan ada firewall L4, yang membongkar perintah PORT dan secara otomatis membuka port yang diinginkan, ada seseorang yang telah melangkah lebih jauh dan melihat pada MS RPC atau ICS protokol perintah yang lebih kompleks / Protokol SCADA.  Tetapi semua kemungkinan aplikasi firewall L4 tidak terlihat, dan firewall ini juga umumnya berbeda dalam jumlah aplikasi yang diimplementasikan dalam Application Layer Gateway (ALG). <br><br>  Apa yang saya maksudkan?  Keyakinan bahwa hanya mengingat port TCP / UDP utama tidak bekerja. <br>  Sudah ada beberapa ribu aplikasi di dunia dan semuanya menggunakan jaringan komputer.  Dan tidak ada insinyur jaringan yang dapat mengingat semua port ini. <br><br>  Pengungkapan untuk insinyur jaringan adalah tugas membuka port untuk aplikasi yang lebih kompleks, misalnya, VNC.  Tidak ada yang ingat port mana di sana dan harus menggunakan google. <br><blockquote>  Ketika menerbitkan bagian pertama, saya melakukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">survei</a> dan saya melihat bahwa orang-orang masih siap untuk mengingat nomor port - pendapat dibagi 50 hingga 50: seseorang menjawab bahwa dia siap untuk mengingat semua 4 port aplikasi VNC. <br><br>  Mungkin juara dalam jumlah port adalah Lync (alias Skype for Business).  Sekitar 40 port.  Apakah realistis mengingatnya? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/795/133/dad/795133dad8b8ad8e24d78cfba7d8056c.png"></blockquote>  Jika Anda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">melihat</a> Microsoft TechNet, yang menjelaskan port mana yang perlu Anda buka, maka saya ingin menulis izin apa pun untuk aturan apa pun, karena ada sekitar 40 port dan beberapa di antaranya harus terbuka secara dinamis.  Dan sangat tidak nyaman untuk mendaftar di firewall L4. <br><br>  Ternyata lebih mudah bagi seorang insinyur jaringan untuk menulis dalam aturan aplikasi L7 dan perlu bahwa firewall itu sendiri secara otomatis membuka port yang diperlukan. <br><br>  Perlu membuka VNC?  Anda menulis kata VNC dalam aturan dan firewall sudah memahami protokol yang mendasarinya yang perlu Anda buka.  Ini nyaman. <br><br>  <b>Sebuah contoh</b>  <b>Laporan NGFW tentang kategori lalu lintas yang dipilih.</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d38/cf1/44f/d38cf144fe1b72801cb6665551f246f7.png"><br><br>  Rata-rata, 200-300 aplikasi menggunakan akses Internet dari jaringan perusahaan.  Firewall tingkat aplikasi menunjukkan aplikasi apa itu dan dapat memfilter aplikasi ini untuk semua atau untuk pengguna tertentu dan memfilter file berdasarkan jenis atau konten yang masuk ke aplikasi yang diizinkan untuk semua pengguna di jaringan perusahaan.  Juga jangan lupa bahwa di NGFW, fungsi keamanan bekerja secara paralel: IPS, antivirus, anti-spyware, filter URL, filter DNS, Intelijen Ancaman dan sebagainya.  Artinya, kita tidak hanya mengizinkan aplikasi, tetapi melakukannya dengan aman. <br><br><a name="Security"></a><h2>  L7 Firewall lebih aman </h2><br>  Saya memiliki Palo Alto Networks NGFW di tangan.  Saya menulis tiga aturan berbeda tentang itu.  Mari kita lihat perbedaannya. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/934/f87/9d9/934f879d9fc26ca130016ebcf12d3986.png"><br><br>  Jika Anda pernah mengkonfigurasi firewall, maka Anda melihat itu untuk grup pengguna yang berbeda: vip, pemasaran dan programmer, saya mengaktifkan SSL dengan tiga cara berbeda. <br><br><ol><li>  pengguna <b>vip</b> dapat <b>menggunakan port 443 dan dapat menggunakan SSL di dalamnya</b> , karena ini adalah port default untuk SSL.  Jika mereka mencoba masuk ke port 443, misalnya, telnet biasa, maka mereka tidak akan berhasil - firewall akan memverifikasi bahwa itu bukan SSL dan akan memblokirnya.  Dan inilah yang Anda butuhkan! </li><li>  <b>pemasaran</b> dapat pergi <b>ke port apa saja menggunakan SSL</b> , karena di bidang Layanan, di mana port ditunjukkan, port apa pun diizinkan.  Pertanyaannya adalah, apakah saya ingin pemasaran menggunakan SSL pada port non-standar?  Tidak.  Ini adalah kesalahan konfigurasi yang umum.  Menentukan port sebagai apa pun adalah logis jika aturannya mahal - yaitu, jika kami ingin melarang SSL pada port apa pun. </li><li>  <b>programmer</b> dapat berjalan <b>di port 443 dengan aplikasi apa pun</b> , yang sebenarnya merupakan lubang, karena saya awalnya hanya ingin membuka SSL.  Dan itulah cara kerja L4 firewall - membuka port dan kemudian tidak masalah baginya apa yang ada dan aplikasi apa yang menggunakan port ini.  Setiap programmer dalam kelompok programmer dapat menggunakan terowongan apa pun. </li></ol><br>  Pengaturan <b>aplikasi-standar</b> sangat penting dan memungkinkan Anda mengurangi jumlah aturan: Anda dapat menentukan aplikasi yang diperlukan di kolom Aplikasi dalam satu aturan dan firewall itu sendiri akan membuka port yang diperlukan untuk aplikasi yang diperlukan dan hanya aplikasi yang seharusnya masuk yang akan melewati port ini.  Karenanya, Anda memerlukan satu aturan untuk membuka banyak aplikasi. <br><br>  Misalnya, untuk aturan di bawah ini, di mana semua karyawan diizinkan untuk mengakses Internet hanya secara default, NGFW akan terus-menerus memeriksa bahwa mereka hanya menginginkan klien DNS pada port ke-53 dan bukan TCP-over-DNS.  Dan tentu saja, ini meningkatkan keamanan, karena Anda tidak hanya mengizinkan aplikasi, tetapi mengontrol hanya aplikasi yang Anda izinkan melalui saluran terbuka. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/a16/3c8/268a163c8dc1bb195b9c34e02e18da65.png"><br><br><a name="Issues"></a><h2>  Masalah baru apa yang menciptakan pendekatan baru dalam penulisan aturan untuk L7 </h2><br>  Anda perlu memahami bahwa menentukan aplikasi dengan konten paket sangat menegangkan untuk prosesor firewall L7.  Jika firewall L4 biasa memeriksa hanya beberapa byte header paket TCP dan kemudian meneruskan megabita klip flash yang tersisa tanpa memeriksa, maka firewall L7 harus membaca semua yang disimpan dalam bidang data TCP / IP dan terus-menerus memeriksa konten apa yang ada di dalam koneksi TCP / IP, tiba-tiba mengubah atau menimbulkan ancaman bagi perusahaan.  Karena itu, ketika fungsional seperti analisis konten muncul, semua perangkat mulai melambat.  Oleh karena itu, analisis konten memerlukan perangkat yang lebih kuat. <br><br><a name="Limitations"></a><h2>  Keterbatasan Teknologi Analisis Level 7 </h2><br>  Firewall L7 membutuhkan lebih banyak memori untuk menyimpan status satu koneksi, oleh karena itu parameter "jumlah koneksi simultan" dari firewall L7 selalu lebih rendah daripada L4 Firewall dengan jumlah RAM yang sama di kedua perangkat, dan secara signifikan, setiap 10 kali. Hal ini telah dijelaskan di atas di bagian Statefull Inspeksi  Dan ini adalah harga untuk keamanan aplikasi Anda.  Oleh karena itu, jika Anda membandingkan inspeksi L4 dan L7, maka tanyakan produsen bagaimana ia mengukur parameter "jumlah sesi simultan": dengan keamanan diaktifkan di level 7 atau dengan dinonaktifkan. <br><br>  Hal yang sama dengan kinerja: prosesor firewall L4 hanya memeriksa beberapa byte dari header paket dan kemudian mentransfer data itu sendiri pada kecepatan routing tanpa memeriksa, dan firewall L7 memeriksa header dan semua megabita data yang terkandung dalam paket koneksi berikutnya.  Dan ini adalah pekerjaan yang sangat berbeda.  Oleh karena itu, pekerjaan tersebut perlu dilakukan pada platform perangkat keras khusus, di mana analisis aplikasi dipercepat, streaming antivirus dipercepat, IPS dan fungsi keamanan lainnya dipercepat.  Yang terbaik dari semuanya, Cavium telah berhasil menciptakan chip untuk mempercepat keamanan, yang chipnya, misalnya, digunakan oleh Palo Alto Networks.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selain itu, penggunaan chip FPGA khusus (FPGA) memungkinkan Anda untuk mem-flash antivirus dan tanda tangan IPS ke dalam chip itu sendiri dan verifikasi tanda tangan dilakukan pada kecepatan perangkat keras dari chip FPGA. Sekarang bahkan komputer pribadi memiliki akselerasi fungsi grafis pada GPU khusus, sehingga penggunaan chip untuk mempercepat keamanan adalah pengembangan logis dari teknologi.</font></font><br><br><a name="end"></a><h2>  Kesimpulan </h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mengelola keamanan pada firewall L7 lebih mudah. Sebelumnya, Anda membaca dokumentasi produsen aplikasi untuk waktu yang lama dan membuka port yang terdaftar di sana. Sekarang sederhana: tentukan nama aplikasi dalam aturan NGFW dan port yang diperlukan akan diselesaikan secara otomatis tergantung pada kondisi koneksi aplikasi ini. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kedua</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Anda dapat mendeteksi dan memblokir tunneling, karena firewall L7 dengan aman hanya memungkinkan aplikasi yang ditentukan secara eksplisit, dan jika seseorang mencoba untuk tunnel aplikasi lain melalui port terbuka, itu akan segera terdeteksi dan diblokir. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketiga</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Anda dapat mengizinkan aplikasi yang diinginkan pada port apa saja yang diinginkan dan hanya aplikasi yang diinginkan akan masuk pada port ini, dan tidak semuanya sekaligus. </font><font style="vertical-align: inherit;">Misalnya, hanya browser web yang akan menggunakan port 80. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 3. Dekripsi SSL dalam NGFW. </font><font style="vertical-align: inherit;">(Bersambung) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua yang terbaik! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denis Batrankov </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">denis@batrankov.ru</font></font><a name="vote"></a></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id436836/">https://habr.com/ru/post/id436836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id436798/index.html">Deformasi admin profesional</a></li>
<li><a href="../id436800/index.html">Teknik proyek DIY. Bagian dua</a></li>
<li><a href="../id436822/index.html">Android Robotics hingga 2019: Kisah nyata; dalam 5 bagian; bagian 3</a></li>
<li><a href="../id436828/index.html">Transisi ke Boost-1.65.1 dan bug yang muncul</a></li>
<li><a href="../id436830/index.html">Android Robotics hingga 2019: Kisah nyata; dalam 5 bagian; bagian 5</a></li>
<li><a href="../id436838/index.html">Memahami jaringan saraf convolutional melalui visualisasi di PyTorch</a></li>
<li><a href="../id436840/index.html">Jalan dari Gloss ke Neuroscience: Podcast Tematik tentang Karier di Media dan Pemasaran Konten</a></li>
<li><a href="../id436842/index.html">Solusi Veeam untuk pencadangan dan pemulihan mesin virtual pada platform Nutanix AHV. Bagian 2</a></li>
<li><a href="../id436846/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 348 (14-20 Januari 2019)</a></li>
<li><a href="../id436848/index.html">NSA mengumumkan rilis alat internal untuk rekayasa balik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>