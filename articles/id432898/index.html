<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤶🏾 🙇 💣 Panorama di StereoPi 🧘🏿 🏁 🙋🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami terus bereksperimen dengan Raspberry Pi, dilengkapi dengan dua kamera secara bersamaan. Biarkan saya mengingatkan Anda bahwa semua permainan berl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Panorama di StereoPi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432898/"><img src="https://habrastorage.org/webt/kc/wg/lv/kcwglvzlvc5sfcbzdm5yfm6lnfu.jpeg" alt="gambar"><br><br>  Kami terus bereksperimen dengan Raspberry Pi, dilengkapi dengan dua kamera secara bersamaan.  Biarkan saya mengingatkan Anda bahwa semua permainan berlangsung di sekitar Raspberry Pi Compute Module 3 Lite, dimasukkan ke dalam buaian StereoPi. <br><br>  Dalam ulasan sebelumnya, kami memasang kamera secara paralel dan bekerja dengan efek stereo.  Di sini pendekatannya justru sebaliknya: kamera melihat ke arah yang berbeda, tetapi dilengkapi dengan lensa sudut lebar (200 derajat).  Dan kami akan merekatkan panorama bola 360 derajat! <br><a name="habracut"></a><br><h2>  Pendahuluan </h2><br>  Gangguan: karena tidak ada co-penulis artikel di Habré, saya akan menyebutkan teks utama.  Percobaan ini dilakukan bersama, dengan saya - besi dan percobaan di lapangan, dan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@Gol</a> - bagian perangkat lunak. <br><br>  Mari kita mulai dari akhir: inilah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hasilnya, sebenarnya panorama</a> . <br><br>  Jadi, kali ini, cobalah untuk membuat panorama bola.  Sia-sia, atau semacamnya, kami memiliki dua kamera.  Tentu saja, dimungkinkan untuk menghubungkan dua kamera ke raspberry biasa, dalam mode multiplexing (salah satu kamera berfungsi, lalu yang lain, memilih yang tepat melalui GPIO).  Tapi kemudian frame akan ditembak secara berurutan, dan jika ada gerakan, ini tidak terlalu nyali.  Benar, ketika ada penembakan "simultan" dua kamera stereo dari dua kamera, tidak ada sinkronisasi juga, bodohnya dua raspistill diluncurkan secara bersamaan.  Tetapi ada lebih banyak kemungkinan bahwa objek di perbatasan tidak akan tersebar sangat banyak.  Anda juga dapat merekam video dengan dua kamera secara bersamaan, dan kemudian menjahitnya menjadi panorama video bulat.  Tetapi kemudian saya akan mencoba entah bagaimana, pertama-tama Anda harus berurusan dengan panorama foto. <br><br><h2>  Besi </h2><br>  Kami punya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">StereoPi</a> , ada dua kamera dengan lensa mata ikan (200 derajat).  Berikut adalah kamera-kamera: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RPi Camera (M) WaveShare</a> <br><br>  Kami memiliki dua kamera pop-to-pop: <br><br><img src="https://habrastorage.org/webt/wm/zn/c6/wmznc6yll8-u0hxzfu9pfs4lpss.jpeg" alt="gambar"><br><br>  Kami mengambil foto dari kedua kamera.  Idealnya - pada saat yang sama, tetapi itu mungkin dan pada gilirannya.  raspistill untuk membantu kami.  Kami mendapatkan dua gambar ini: <br><br><img src="https://habrastorage.org/webt/gj/ly/bh/gjlybhfu5wrpt3vxt0jsi-oinj4.jpeg" alt="gambar"><br>  <a href="">Ukuran penuh</a> <br><br><img src="https://habrastorage.org/webt/yg/9f/-x/yg9f-xbtdlvqu6n69slo2yv_wgk.jpeg" alt="gambar"><br>  <a href="">Ukuran penuh</a> <br><br><h2>  Panorama Pokok </h2><br>  Kemudian muncul masalah - bagaimana membuat gambar secara otomatis dengan proyeksi yang sama dari kedua gambar fiskal ini, yang dimakan hampir semua pemirsa panorama.  Saya ingin melakukan konversi langsung di papan stereo, tanpa menggunakan perangkat lunak panorama khusus. <br><br>  Setelah banyak penelitian, proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">360-kamera</a> ditemukan, dari mana skrip diambil sebagai dasar. <br><br>  Tapi pertama-tama, kita masih harus menggunakan program panorama terpisah untuk menyiapkan templat konversi.  Program ini disebut Hugin, Anda dapat mengunduhnya di sini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://hugin.sourceforge.net/download/</a> <br><br>  1. Jadi, unduh, instal, luncurkan. <br>  2. Pilih opsi "Sederhana" di menu "Antarmuka". <br><br><img src="https://habrastorage.org/webt/no/jt/aw/nojtaweqaqdd2uhtwxiz6teypma.jpeg" alt="gambar"><br><br>  3. Klik tombol "Unduh gambar ..." dan tambahkan dua file kami (21.jpg dan 21-2.jpg). <br><br><img src="https://habrastorage.org/webt/zu/12/c7/zu12c7gypxdmexopttcdf1oxulg.jpeg" alt="gambar"><br><br>  4. Atur "Jenis lensa" - "Circular VyrvyGlaz".  Panjang fokus adalah 1.2mm dan pengali panjang fokus adalah 7.6x.  Dan di tab "Proyeksi", pastikan bahwa ada bidang pandang 360x180 dan "Sama".  Secara default, seharusnya begitu. <br><br><img src="https://habrastorage.org/webt/_g/wc/gn/_gwcgnb4_s89l_tvxsvnnfndinq.jpeg" alt="gambar"><br><br>  5. Klik tombol “2.  Luruskan ... ".  Pencarian titik kontrol akan dimulai, harus ada sekitar 10-13 poin.  Panorama sudah mulai terlihat seperti panorama. <br><br><img src="https://habrastorage.org/webt/eb/hf/8m/ebhf8mtccgv4klnjvmbuuchfiko.jpeg" alt="gambar"><br><br>  6. Sekarang hal yang paling penting adalah menyelamatkan proyek, karena kita akan membutuhkannya untuk perekatan otomatis selanjutnya dari semua panorama yang diambil dengan kedua kamera mata ikan ini.  File -&gt; Save As -&gt; nama file stereopi-template.pto <br><br>  7. Kembali ke tab "Asisten" (jika kita tiba-tiba pergi ke sana) dan klik "Buat panorama ..." Jendela tambahan akan terbuka, pilih ketinggian 1944 di sana, lebar itu sendiri akan dihitung.  Format LDR (format gambar keluaran) diatur ke JPEG.  Kualitas - apa pun yang Anda inginkan, secara default - 90. Kami belum menyentuh koreksi.  Klik OK.  Tetapkan nama file dengan hasilnya.  Dan klik "Simpan." <br><br><img src="https://habrastorage.org/webt/dq/nu/ug/dqnuugzu3rnmuyrev21cnpzcp7q.jpeg" alt="gambar"><br><br>  8. Beberapa jendela lagi akan terbuka, di mana salah satu log proses akan ditampilkan. <br><br><img src="https://habrastorage.org/webt/sb/hb/bg/sbhbbgmef-068ukos3jaknlmy-w.jpeg" alt="gambar"><br><br>  9. Akibatnya, kita mendapatkan sesuatu seperti ini: <br><br><img src="https://habrastorage.org/webt/sb/hb/bg/sbhbbgmef-068ukos3jaknlmy-w.jpeg" alt="gambar"><br><br>  <a href="">Ukuran penuh</a> <br><br>  Ini adalah proyeksi yang sama-sama diperlukan dari panorama bola kita! <br><br><h2>  Kami membawa jahitan di papan tulis </h2><br>  Tapi itu semua liriknya! <br><br>  Kami ingin tidak mandi uap di setiap foto, kami perlu mengotomatiskan proses ini.  Untuk ini, kita akan memerlukan file proyek, yang kita simpan pada poin 6. Kami mengambil file proyek kami (saya memilikinya <a href="">stereopi-template.pto</a> ) dan menyalinnya ke stereo. <br><br>  Kami menyalin skrip perekatan <a href="">stereopi-stich.sh</a> di <a href="">sana.Skrip tersebut</a> membutuhkan dua parameter input - nama file foto ikan yang perlu direkatkan ke dalam proyeksi yang sama. <br><br>  Tetapi pertama-tama Anda harus menginstal semua perangkat lunak yang diperlukan pada stereo.  Unduh saja skrip ini dan jalankan di steropix.  <a href="">installer.sh</a> <br><br>  Sekarang jalankan skrip pengeleman: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ./stereopi-stich.sh 21.jpg 21-2.jpg Stiching files 21.jpg and 21-2.jpg Generating pto file... Reading /opt/Pano/test1/21-2.jpg... Reading /opt/Pano/test1/21.jpg... Assigned 1 lenses. Written output to /opt/Pano/test1/tmp/project.pto Written output to ./tmp/project.pto number of cmdline args: 1 ================================== Stitching panorama ================================== nona -z LZW -r ldr -m TIFF_m -o 21_21-2-pano -i 0 ./tmp/project.pto nona -z LZW -r ldr -m TIFF_m -o 21_21-2-pano -i 1 ./tmp/project.pto checkpto --generate-argfile= project.pto_21_21-2-pano.arg ./tmp/project.pto enblend --compression=90 -w -f2688x1344 -o 21_21-2-pano.jpg -- 21_21-2-pano0000.tif 21_21-2-pano0001.tif enblend: info: loading next image: 21_21-2-pano0000.tif 1/1 enblend: info: loading next image: 21_21-2-pano0001.tif 1/1 enblend: info: writing final output Bogus input colorspace exiftool -overwrite_original_in_place -TagsFromFile /opt/Pano/test1/21-2.jpg -WhitePoint -ColorSpace -@ /usr/share/hugin/data/hugin_exiftool_copy.arg -@ project.pto_21_21-2-pano.arg 21_21-2-pano.jpg 1 image files updated ================================== Remove temporary files ================================== rm project.pto_21_21-2-pano.arg 21_21-2-pano0000.tif 21_21-2-pano0001.tif</span></span></code> </pre> <br>  Prosesnya memakan waktu sekitar 50 detik.  Penting untuk mencari peluang pengoptimalan, tetapi sejauh ini tidak buruk. <br><br>  Hasilnya adalah file <br><br><img src="https://habrastorage.org/webt/hs/pr/7i/hspr7itivnfhaasliblr1zuhuiw.jpeg" alt="gambar"><br><br>  <a href="">Ukuran penuh</a> <br><br>  Itu saja!  Kami secara otomatis menjebak dua perikanan ke jarak yang sama!  Dan dengan skrip yang sama Anda dapat merekatkan semua gambar berikutnya, hal utama adalah bahwa penempatan bersama kamera kami tidak banyak berubah, jika tidak maka lem akan hilang. <br><br>  Sekarang Anda perlu memainkannya di suatu tempat di situs.  Untuk melihat panorama kami di situs ini, Anda memerlukan pemain panorama. <br><br>  IMHO, pemain built-in terbaik untuk panorama - KRPano.  Itu dapat mengambil foto dan video.  Ya, dibayar.  Saya sudah membeli lisensi untuk itu lima tahun yang lalu, tetapi kemudian pemain dibuat dengan cepat dan HTML5 tidak bisa.  Dan sekarang dia tahu caranya, tetapi Anda harus membeli lisensi lagi. <br><br>  Anda dapat mengunduh <a href="">arsip saya</a> , di mana di dalamnya Anda memiliki semua yang Anda butuhkan untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">melihat ini</a> .  Yang paling nishtyak - planet kecil (pilihan mode tampilan - klik kanan). <br><br><img src="https://habrastorage.org/webt/al/uc/8u/aluc8urvbvd9__ro_6syw1jfzxs.jpeg" alt="gambar"><br><br>  Kami berharap eksperimen kami tidak hanya menarik bagi Anda, tetapi juga bermanfaat sebagai resep.  Terima kasih atas perhatian anda! <br><br><h2>  Tautan yang bermanfaat: </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Proyeksi Equirectangular</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Banyak teori tentang perikanan dan proyeksi yang sama</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Perangkat lunak untuk melihat panorama</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Manual besar untuk perekatan otomatis</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BrianBock / 360-kamera</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id432898/">https://habr.com/ru/post/id432898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id432888/index.html">Bagaimana kabar Heisenbug</a></li>
<li><a href="../id432890/index.html">Linux, Microsoft dan Marxisme</a></li>
<li><a href="../id432892/index.html">Pencarian Anda kembali: implementasi pencarian fuzzy</a></li>
<li><a href="../id432894/index.html">19 Desember, Moskow - OpsFormations</a></li>
<li><a href="../id432896/index.html">AXIS P1425-LE Mk II vs IDIS DC-T3233HRXL: Bandingkan Kamera CCTV</a></li>
<li><a href="../id432900/index.html">Fitur kerja dalam tim internasional. Jepang</a></li>
<li><a href="../id432902/index.html">Gagal terbang ke bulan: apa yang diketahui tentang salah satu misi</a></li>
<li><a href="../id432904/index.html">Pengusaha Terbaik dalam TI 2018: Peringkat Tahunan Lingkaran Saya</a></li>
<li><a href="../id432906/index.html">Mengedit file CSV agar tidak merusak data</a></li>
<li><a href="../id432908/index.html">Di Rusia, mereka berencana untuk memperkenalkan kontrol tambahan atas pembayaran di Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>