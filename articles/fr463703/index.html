<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵 👊🏻 👂 7 indicateurs clés de risque Active Directory dans le tableau de bord Varonis 🚉 👩🏿‍🤝‍👨🏻 🗄️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tout ce dont un attaquant a besoin, c'est de temps et de motivation pour pénétrer votre réseau. Mais notre travail avec vous est de l'empêcher de fair...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>7 indicateurs clés de risque Active Directory dans le tableau de bord Varonis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/varonis/blog/463703/"><img src="https://habrastorage.org/webt/9w/zd/ut/9wzdutk6dodooxj8jf-d972yx78.png"><br><br>  Tout ce dont un attaquant a besoin, c'est de temps et de motivation pour pénétrer votre réseau.  Mais notre travail avec vous est de l'empêcher de faire cela, ou du moins de compliquer cette tâche autant que possible.  Vous devez commencer par identifier les faiblesses d'Active Directory (ci-après dénommées AD) qu'un attaquant peut utiliser pour accéder et se déplacer sur le réseau, sans être détecté.  Aujourd'hui, dans cet article, nous allons examiner les indicateurs de risque qui reflètent les vulnérabilités existantes dans la cyberdéfense de votre organisation, en utilisant le tableau de bord AD Varonis comme exemple. <br><a name="habracut"></a><br><h2>  Les attaquants utilisent des configurations spécifiques dans le domaine </h2><br>  Les attaquants utilisent de nombreuses astuces et vulnérabilités pour pénétrer le réseau d'entreprise et augmenter les privilèges.  Certaines de ces vulnérabilités sont des paramètres de configuration de domaine qui peuvent être facilement modifiés après avoir été identifiés. <br><br>  Le tableau de bord AD vous avertira immédiatement si vous (ou vos administrateurs système) n'avez pas changé le mot de passe KRBTGT le mois dernier, ou si quelqu'un s'est authentifié avec le compte Administrateur par défaut intégré (Administrateur).  Ces deux comptes offrent un accès illimité à votre réseau: les attaquants tenteront d'y accéder pour contourner librement toute distinction de privilèges et d'autorisations d'accès.  Et, par conséquent, pour accéder à toutes les données qui les intéressent. <br><br>  Bien sûr, vous pouvez détecter ces vulnérabilités vous-même: par exemple, définissez un rappel de calendrier pour vérification ou exécutez un script PowerShell pour collecter ces informations. <br><br>  Le tableau de bord Varonis est <strong>automatiquement</strong> mis à jour pour fournir un affichage et une analyse rapides des mesures clés qui mettent en évidence les vulnérabilités potentielles afin que vous puissiez prendre des mesures immédiates. <br><br><h3>  3 indicateurs clés de risque au niveau du domaine </h3><br>  Vous trouverez ci-dessous un certain nombre de widgets disponibles sur le tableau de bord Varonis, dont l'utilisation renforcera considérablement la protection du réseau d'entreprise et de l'infrastructure informatique dans son ensemble. <br><br>  <strong>1. Le nombre de domaines pour lesquels le mot de passe du compte Kerberos n'a pas changé de manière significative</strong> <br><br>  Le compte KRBTGT est un compte spécial dans AD qui signe tous les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tickets Kerberos</a> .  Les attaquants qui ont accès à un contrôleur de domaine (DC) peuvent utiliser ce compte pour créer un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ticket Golden</a> , qui leur donnera un accès illimité à presque tous les systèmes du réseau d'entreprise.  Nous avons été confrontés à une situation où, après avoir reçu avec succès le Golden Ticket, l'attaquant a eu accès au réseau de l'organisation pendant deux ans.  Si le mot de passe du compte KRBTGT dans votre entreprise n'a pas changé au cours des quarante derniers jours, le widget vous en informera. <br><br>  Quarante jours, c'est plus que suffisant pour qu'un attaquant puisse accéder au réseau.  Cependant, si vous fournissez et standardisez régulièrement le processus de modification de ce mot de passe, cela compliquera considérablement la tâche d'un attaquant pour pénétrer le réseau de l'entreprise. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kl/c7/lj/klc7ljtzudkxz1yjbnchn8tvdhk.jpeg"></div><br>  N'oubliez pas que conformément à la mise en œuvre du protocole Kerberos par Microsoft, vous devez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modifier le mot de passe</a> KRBTGT deux fois. <br><br>  À l'avenir, ce widget AD vous rappellera quand il sera temps de changer à nouveau le mot de passe KRBTGT pour tous les domaines de votre réseau. <br><br>  <strong>2. Nombre de domaines utilisant récemment le compte administrateur intégré</strong> <br><br>  Selon le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">principe des moindres privilèges</a> , deux comptes sont fournis aux administrateurs système: le premier est un compte pour une utilisation quotidienne et le second pour les travaux administratifs planifiés.  Cela signifie que personne ne devrait utiliser le compte administrateur par défaut. <br><br>  Un compte administrateur intégré est souvent utilisé pour simplifier le processus d'administration système.  Cela peut être une mauvaise habitude, entraînant un piratage.  Si cela se produit dans votre organisation, il vous sera difficile de distinguer la bonne utilisation de ce compte de l'accès potentiellement malveillant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_p/ru/tn/_prutnq-pofmz5eccutuxgkz9p4.jpeg"></div><br>  Si le widget affiche autre chose que zéro, cela signifie que quelqu'un ne fonctionne pas correctement avec les comptes administratifs.  Dans ce cas, vous devez prendre des mesures pour corriger et restreindre l'accès au compte administrateur intégré. <br>  Une fois que vous avez atteint une valeur nulle pour le widget et que les administrateurs système n'utilisent plus ce compte pour leur travail, à l'avenir, tout changement dans celui-ci indiquera une cyberattaque potentielle. <br><br>  <strong>3. Le nombre de domaines dans lesquels il n'y a pas de groupe d'utilisateurs protégés (utilisateurs protégés)</strong> <br><br>  Les anciennes versions d'AD prenaient en charge un type de cryptage faible - RC4.  Les pirates ont piraté RC4 il y a de nombreuses années, et maintenant pour un attaquant de pirater un compte qui utilise toujours RC4 est une tâche triviale.  La version d'Active Directory introduite dans Windows Server 2012 a introduit un groupe d'utilisateurs d'un nouveau type appelé le groupe d'utilisateurs protégés.  Il fournit des outils de sécurité supplémentaires et empêche l'authentification des utilisateurs à l'aide du cryptage RC4. <br><br>  Ce widget montrera s'il n'y a pas un tel groupe dans aucun domaine de l'organisation afin que vous puissiez le corriger, c'est-à-dire  activer un groupe d'utilisateurs protégés et l'utiliser pour protéger l'infrastructure. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tz/ym/a1/tzyma13-jsxx5fpr59tqs_hbxcs.jpeg"></div><br><h2>  Cibles légères pour les attaquants </h2><br>  Les comptes d'utilisateurs sont la cible numéro un des attaquants - depuis les premières tentatives de pénétration jusqu'à l'escalade continue des privilèges et la dissimulation de leurs actions.  Les attaquants recherchent des cibles simples sur votre réseau à l'aide des commandes PowerShell de base, souvent difficiles à détecter.  Retirez autant de ces cibles lumineuses de AD que possible. <br><br>  Les attaquants recherchent des utilisateurs avec des mots de passe illimités (ou qui n'ont pas besoin de mots de passe), des comptes technologiques qui sont des administrateurs et des comptes qui utilisent l'ancien cryptage RC4. <br><br>  L'accès à l'un de ces comptes est insignifiant ou, en règle générale, n'est pas surveillé.  Les attaquants peuvent pirater ces comptes et se déplacer librement dans votre infrastructure. <br><br>  Une fois que les attaquants ont pénétré le périmètre de sécurité, ils sont susceptibles d'accéder à au moins un compte.  Pouvez-vous les empêcher d'accéder à des données sensibles avant de détecter et de mettre fin à l'attaque? <br><br>  Le tableau de bord Varonis AD pointera vers les comptes d'utilisateurs vulnérables afin que vous puissiez résoudre les problèmes à l'avance.  Plus il est difficile de pénétrer à l'intérieur de votre réseau, plus vous avez de chances de neutraliser un attaquant avant qu'il ne fasse de gros dégâts. <br><br><h3>  4 indicateurs de risque clés pour les comptes utilisateurs </h3><br>  Voici des exemples de widgets dans le tableau de bord Varonis AD qui indiquent les comptes d'utilisateurs les plus vulnérables. <br><br>  <strong>1. Le nombre d'utilisateurs actifs avec des mots de passe qui n'expirent jamais</strong> <br><br>  Pour tout attaquant, accéder à un tel compte est toujours un grand succès.  Étant donné que le mot de passe n'expire jamais, l'attaquant obtient un point d'ancrage permanent au sein du réseau, qui peut ensuite être utilisé pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">augmenter les privilèges</a> ou se déplacer dans l'infrastructure. <br>  Les attaquants ont des listes avec des millions de combinaisons utilisateur-mot de passe qu'ils utilisent dans les attaques de substitution d'informations d'identification, et la probabilité <br>  que la combinaison pour l'utilisateur avec le mot de passe "éternel" figure dans l'une de ces listes, bien plus que zéro. <br><br>  Les comptes dont les mots de passe n'expirent pas sont faciles à gérer, mais ils ne sont pas sécurisés.  Utilisez ce widget pour trouver tous les comptes qui ont ces mots de passe.  Modifiez ce paramètre et mettez à jour le mot de passe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2n/9z/li/2n9zlijdxnpv_d-oejd64qbaj-8.jpeg"></div><br>  Dès que la valeur de ce widget devient nulle, tout nouveau compte créé avec ce mot de passe apparaîtra sur le tableau de bord. <br><br>  <strong>2. Le nombre de comptes administratifs avec SPN</strong> <br><br>  SPN (Service Principal Name) est un identifiant unique pour une instance d'un service.  Ce widget montre combien de comptes de service ont des droits d'administrateur complets.  La valeur sur le widget doit être nulle.  Un SPN avec des droits d'administrateur se produit parce que l'octroi de ces droits est pratique pour les fournisseurs de logiciels et les administrateurs d'applications, mais cela pose un risque pour la sécurité. <br><br>  L'octroi de privilèges d'administrateur de compte de service permet à un attaquant d'obtenir un accès complet à un compte non utilisé.  Cela signifie que les attaquants ayant accès aux comptes SPN peuvent agir librement à l'intérieur de l'infrastructure et en même temps éviter de surveiller leurs actions. <br><br>  Vous pouvez résoudre ce problème en modifiant les autorisations pour les comptes de service.  Ces comptes doivent obéir au principe du moindre privilège et ne disposer que de l'accès réellement nécessaire à leur travail. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ro/nz/vz/ronzvz9-hue_1o6qamdrpk4tm4g.jpeg"></div><br>  En utilisant ce widget, vous pouvez trouver tous les SPN qui ont des droits d'administrateur, éliminer ces privilèges et contrôler davantage le SPN, guidé par le même principe d'accès avec le moins de privilèges. <br><br>  Le SPN nouvellement apparu sera affiché sur le tableau de bord, et vous pouvez contrôler ce processus. <br><br>  <strong>3. Nombre d'utilisateurs qui ne nécessitent pas de pré-authentification Kerberos</strong> <br><br>  Idéalement, Kerberos crypte un ticket d'authentification à l'aide du cryptage AES-256, qui reste intact à ce jour. <br><br>  Cependant, les anciennes versions de Kerberos utilisaient le cryptage RC4, qui peut désormais être craqué en quelques minutes.  Ce widget montre quels comptes d'utilisateurs utilisent encore RC4.  Microsoft prend toujours en charge RC4 pour la compatibilité descendante, mais cela ne signifie pas que vous devez l'utiliser dans votre AD. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/b3/iz/iab3izxlvovxr29lko7ctpkkz3e.jpeg"></div><br>  Une fois que vous avez trouvé de tels comptes, vous devez décocher la case «Ne nécessite pas de pré-autorisation Kerberos» dans AD afin que les comptes utilisent un cryptage plus complexe. <br><br>  La découverte de ces comptes sans le tableau de bord Varonis AD prend beaucoup de temps.  En réalité, être informé en temps opportun de tous les comptes modifiés pour utiliser le cryptage RC4 est une tâche encore plus difficile. <br><br>  Si la valeur du widget change, cela peut indiquer des actions illégales. <br><br>  <strong>4. Le nombre d'utilisateurs sans mot de passe</strong> <br><br>  Les attaquants utilisent les commandes PowerShell de base pour lire l'indicateur "PASSWD_NOTREQD" dans les propriétés AD des propriétés du compte.  L'utilisation de cet indicateur signifie qu'il n'y a aucune exigence pour la présence ou la complexité d'un mot de passe. <br>  Est-il facile de voler un compte avec un mot de passe simple ou vierge?  Imaginez maintenant que l'un de ces comptes soit un administrateur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9q/2d/sk/9q2dskiiz2lxugt8ackzhatunym.jpeg"></div><br>  Et si l'un des milliers de fichiers confidentiels ouverts à tous est un prochain rapport financier? <br><br>  Ignorer l'exigence de saisie obligatoire du mot de passe est un autre raccourci vers l'administration système qui a souvent été utilisé dans le passé, mais aujourd'hui, il est inacceptable et dangereux. <br><br>  Résolvez ce problème en mettant à jour les mots de passe de ces comptes. <br><br>  La surveillance de ce widget à l'avenir vous aidera à éviter les comptes d'utilisateurs sans mot de passe. <br><br><h2>  Varonis égalise les chances </h2><br>  Dans le passé, le travail de collecte et d'analyse des métriques dans l'article prenait de nombreuses heures et nécessitait une connaissance approfondie de PowerShell: les spécialistes de la sécurité devaient allouer des ressources pour ces tâches chaque semaine ou chaque mois.  Mais la collecte et le traitement manuels de ces informations donnent aux attaquants une longueur d'avance pour la pénétration et le vol de données. <br><br>  Avec <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Varonis,</a> vous passerez une journée à déployer le tableau de bord AD et des composants supplémentaires, pour collecter toutes les vulnérabilités considérées et bien d'autres.  À l'avenir, pendant le fonctionnement, le tableau de bord sera automatiquement mis à jour à mesure que l'état de l'infrastructure change. <br><br>  La conduite de cyberattaques est toujours une course entre les attaquants et les défenseurs, le désir d'un attaquant de voler des données avant que les experts en sécurité puissent en bloquer l'accès.  La détection précoce des cybercriminels et de leurs actions illégales, combinée à une forte cyberdéfense, est la clé pour garantir la sécurité de vos données. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr463703/">https://habr.com/ru/post/fr463703/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr463689/index.html">EDC d'un spécialiste informatique en bonne santé: je porte tout avec moi</a></li>
<li><a href="../fr463691/index.html">Comment connecter et démarrer facilement l'impression via une imprimante Bluetooth EPS / POS portable dans l'application Xamarin Android</a></li>
<li><a href="../fr463693/index.html">Projecteur sonore avec «lentilles acoustiques» - nous comprenons comment fonctionne la technologie</a></li>
<li><a href="../fr463697/index.html">Etude du système de lévitation magnétique à contrôle modal</a></li>
<li><a href="../fr463701/index.html">Antiquités: Nokia N900 - un téléphone différent</a></li>
<li><a href="../fr463707/index.html">Où la technologie immersive nous plonge</a></li>
<li><a href="../fr463709/index.html">12 meilleures innovations DJI Osmo Mobile 3</a></li>
<li><a href="../fr463711/index.html">Comment faire apprendre aux employés à travailler eux-mêmes dans de nouveaux systèmes</a></li>
<li><a href="../fr463717/index.html">Création d'une application Bare-Metal sur Intel Cyclone V pour les débutants absolus</a></li>
<li><a href="../fr463719/index.html">Outils de méthode de gestion de projet (partie 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>