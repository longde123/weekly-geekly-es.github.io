<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêüèº ‚è≥ üíø Desduplica√ß√£o de an√∫ncios no Yandex.Real Estate ü•ì üî† üé™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No semestre passado, os alunos do Centro de Ci√™ncia da Computa√ß√£o Sergey Gorbatyuk e Peter Karol trabalharam na desduplica√ß√£o de an√∫ncios no Yandex.Re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desduplica√ß√£o de an√∫ncios no Yandex.Real Estate</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/JetBrains-education/blog/457464/">  No semestre passado, os alunos do Centro de Ci√™ncia da Computa√ß√£o Sergey Gorbatyuk e Peter Karol trabalharam na desduplica√ß√£o de an√∫ncios no Yandex.Real Estate, sob a lideran√ßa de Vladimir Gorovoy, gerente de projetos.  Os caras nos disseram como o projeto funciona e quais resultados eles alcan√ßaram. <br><br><img src="https://habrastorage.org/webt/6i/ob/eg/6iobeg98aldknaq_zcwmidkfhfa.jpeg" alt="imagem"><br><br><a name="habracut"></a><br><h3>  Tarefa de design </h3><br>  Yandex.Real Estate √© um servi√ßo de an√∫ncios para a venda e aluguel de apartamentos, quartos, casas, terrenos.  Os an√∫ncios s√£o colocados por indiv√≠duos, incorporadoras ou ag√™ncias imobili√°rias; portanto, a mesma propriedade √© frequentemente representada por v√°rias ofertas.  Na maioria das vezes, v√°rias ag√™ncias tentam vender um apartamento de uma s√≥ vez e, √†s vezes, tamb√©m o propriet√°rio. <br><br>  Duplicatas de an√∫ncios visualizados, na melhor das hip√≥teses, incomodam os usu√°rios, na pior das hip√≥teses, s√£o enganosas.  Isso tamb√©m impede que a equipe do Yandex colete an√°lises por apartamento e conte exatamente quanto √© para venda ou aluguel.  Portanto, quero aprender a pesquisar e colar duplicados em uma oferta. <br><br>  Um fluxo de an√∫ncios n√£o pode ser moderado manualmente porque √© enorme.  Portanto, precisamos de um algoritmo capaz de encontrar o maior n√∫mero poss√≠vel de duplicatas com alta precis√£o.  A precis√£o √© importante porque o pre√ßo do erro √© alto: vincular an√∫ncios diferentes far√° com que os usu√°rios se queixem. <br><br>  Tarefas com requisitos t√£o altos e uma estrutura de dados complexa s√£o tradicionalmente resolvidas usando algoritmos de aprendizado de m√°quina; portanto, na realidade, a tarefa foi formulada como "Treinamento de um dos classificadores de ponta". <br><br><h3>  Os problemas </h3><br><ul><li>  A √°rea de assunto √© nova para n√≥s, possui suas pr√≥prias dificuldades e caracter√≠sticas. </li><li>  N√£o h√° dados marcados. </li><li>  N√£o h√° tarefa expl√≠cita de aprendizado de m√°quina - quais ser√£o os fatores e as vari√°veis-alvo aqui? </li></ul><br>  Com o √∫ltimo par√°grafo, tudo √© relativamente simples: os fatores ser√£o informa√ß√µes sobre um par de objetos de an√∫ncios diferentes, e a vari√°vel de destino √© se um objeto √© na realidade ou dois diferentes.  Mas descobrir as caracter√≠sticas do mercado imobili√°rio e marcar os dados levou a maior parte do tempo do projeto. <br><br><h3>  Marca√ß√£o de dados </h3><br>  Recebemos parte do banco de dados com ofertas para a venda de apartamentos em Moscou.  Os principais dados que os descrevem s√£o: <br><br><ul><li>  Dados estruturados gerais - filmagem, pre√ßo, piso, n√∫mero de quartos, banheiros, altura do teto, meta-informa√ß√µes sobre o vendedor e outros. </li><li>  Descri√ß√£o de texto do objeto. </li><li>  Fotos do objeto. </li></ul><br>  Antes do Yandex, t√≠nhamos um classificador duplicado treinado em fatores de 1 ponto sem dados de controle.  Esse √© um algoritmo de cluster de ofertas chamado ofertas duplicadas que se enquadram em um cluster.  Tinha uma precis√£o bastante alta, mas uma completude relativamente baixa.  Isso significa que a propor√ß√£o de duplicatas que ele descobriu era baixa, embora ele raramente se enganasse. <br><br>  Usamos a ideia de comparar ofertas entre si com base nas diferen√ßas e nas rela√ß√µes entre os principais indicadores: por exemplo, pre√ßo ou piso, para obter uma m√©trica emp√≠rica de dissimilaridade de an√∫ncios.  E eles criaram uma fun√ß√£o que correlacionava os dois n√∫meros com um √∫nico n√∫mero - uma medida da diferen√ßa entre os dois an√∫ncios nos dados prim√°rios.  Esse indicador nos ajudou a criar uma amostra equilibrada enquanto marcava os dados e pelo menos aproximadamente a regular a distribui√ß√£o de exemplos: queremos exemplos mais id√™nticos, ou muito diferentes ou complexos em algum lugar no meio. <br><br>  A marca√ß√£o acabou sendo muito mais complicada do que esper√°vamos.  E aqui est√° o porqu√™: <br><br><ul><li>  Descri√ß√µes id√™nticas e n√£o informativas de objetos semelhantes.  Especialmente do novo fundo: as empresas de constru√ß√£o as transportam em lotes, e apenas em casos raros elas podem ser distinguidas pelo n√∫mero do lote. </li><li>  Corrup√ß√£o intencional de dados.  Os especialistas imobili√°rios nos explicaram que √†s vezes as pessoas querem esconder o piso ou a apar√™ncia real do apartamento. </li><li>  Fotografias n√£o exteriores informativas ou similares de objetos. </li><li>  Fotos diferentes do mesmo objeto.  Abaixo est√° um dos exemplos simples, no entanto, algumas fotos precisam ser vistas por um longo tempo como um detetive, usando todo o poder do m√©todo dedutivo com o √∫nico objetivo de decidir se √© um apartamento ou dois diferentes. </li></ul><br><br><img src="https://habrastorage.org/webt/rr/07/fx/rr07fxqy7t922rfshj2uokdnmjs.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/_x/s3/v7/_xs3v77imlm8w3zwanevhx54nnm.png" alt="imagem"><br><br><h3>  Linha de base supervisionada </h3><br>  Marcamos os dados e tentamos treinar a Floresta Aleat√≥ria apenas nos fatores do primeiro par√°grafo - indicadores categ√≥ricos e cont√≠nuos de pre√ßo, filmagem etc.  Diferen√ßas e rela√ß√µes desses fatores, bem como fatores adicionais constru√≠dos com base no tempo de coloca√ß√£o e atualiza√ß√£o, informa√ß√µes sobre o vendedor etc., foram utilizados como preditores.  Nos dados de teste, esse classificador foi mais preciso do que o algoritmo conservador de agrupamento em 5 a 8%, e sua completude excedeu o resultado anterior em 30 a 35%. <br><br>  Encorajados por esse resultado, passamos a dois outros fatores - a descri√ß√£o do texto e as figuras.  Quase n√£o conseguimos trabalhar com o √∫ltimo: os descarregamos bastante tarde.  Eles tentaram usar hashes para filtrar fotografias externas comuns, hashes perceptivos para lidar com marcas d'√°gua e sa√≠das de altas camadas de redes convolucionais (ResNet-18) como fatores adicionais, no entanto, para nossa surpresa, eles n√£o obtiveram um forte aumento de precis√£o. <br><br>  Em nossa opini√£o, √© necess√°rio abordar ainda mais a an√°lise de imagens nessa √°rea, prestar muita aten√ß√£o ao pr√©-processamento de imagens, tentar outras arquiteturas e fun√ß√µes especiais de perda.  Para dados de texto lematizados e vetorizados, foi aplicado o algoritmo de vetoriza√ß√£o Tf-Idf e a representa√ß√£o vetorizada foi utilizada como caracter√≠sticas principais.  M√©tricas diferentes sobre esses vetores deram um aumento mais impressionante na qualidade das previs√µes.  O melhor resultado como fator foi a probabilidade prevista pela regress√£o log√≠stica treinada separadamente sobre esses vetores. <br><br><h3>  Modelo final </h3><br>  O modelo final, que agregou todos os sinais e resultados de outros, foi o CatBoost.  Este √© um produto Yandex treinado com uma fun√ß√£o de perda especial - uma medida F modificada.  A tecnologia CatBoost se estabeleceu como uma das melhores na tarefa de classifica√ß√£o e √© facilmente integrada √† infraestrutura.  A qualidade do algoritmo na amostra de teste √© de 98% de precis√£o e 93% de completude. <br><br>  Consideramos esse um bom resultado, e se √© o mesmo do ponto de vista comercial - os especialistas do departamento de marketing decidir√£o :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt457464/">https://habr.com/ru/post/pt457464/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt457446/index.html">Construindo e operando uma rede anycast tolerante a falhas</a></li>
<li><a href="../pt457450/index.html">As 10 principais tend√™ncias tecnol√≥gicas em processamento e an√°lise de dados em 2019, de acordo com o Gartner</a></li>
<li><a href="../pt457458/index.html">Suporte m√≥vel para m√°quinas-ferramentas chinesas. Ou como coloc√°-los em um apartamento</a></li>
<li><a href="../pt457460/index.html">Placa de Seguran√ßa do Kernel Linux</a></li>
<li><a href="../pt457462/index.html">Uber: vis√£o geral dos principais algoritmos de gerenciamento de plataforma</a></li>
<li><a href="../pt457466/index.html">Como desenvolvemos a TI na Leroy Merlin: reconstruindo um mecanismo em movimento</a></li>
<li><a href="../pt457468/index.html">Mem√≥ria universal: SRAM, DRAM e mem√≥ria flash em um frasco</a></li>
<li><a href="../pt457470/index.html">Matem√°tica das folhas: como um arbusto incomum mudou a equa√ß√£o de um modelo de crescimento vegetal</a></li>
<li><a href="../pt457476/index.html">Reduzindo o tamanho de uma imagem do Docker com um aplicativo de inicializa√ß√£o por mola</a></li>
<li><a href="../pt457480/index.html">Criando um aplicativo de escuta para visualizar o tr√°fego m√≥vel do MMORPG</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>