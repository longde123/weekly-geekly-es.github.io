<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¼â€âš•ï¸ ğŸ‘€ ğŸšµğŸ¾ HinzufÃ¼gen der Razor Pages-FunktionalitÃ¤t zum Standard-.NET ğŸ‘¨ğŸ¾â€ğŸ« ğŸ‘‰ğŸ» ğŸ¤±ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Razor Pages ist eine neue Funktion, die in Core.Net 2.0 eingefÃ¼hrt wurde. Razor Page ist eine Seite, die aus einem Standardlayout (Ansicht) und einer ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HinzufÃ¼gen der Razor Pages-FunktionalitÃ¤t zum Standard-.NET</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464831/"> Razor Pages ist eine neue Funktion, die in Core.Net 2.0 eingefÃ¼hrt wurde.  Razor Page ist eine Seite, die aus einem Standardlayout (Ansicht) und einer Backend-Klasse besteht.  In gewissem Sinne Ã¤hnelt es Web Forms nur ohne staatliche UnterstÃ¼tzung.  Der Vorteil einer solchen LÃ¶sung liegt auf der Hand - wir beseitigen eine unnÃ¶tige Ebene - das Seitenmodell (ein Datenmodell in Form von beispielsweise EntitÃ¤t ist fÃ¼r sich).  Das Seiten-Backend ist sowohl ein Controller als auch ein Modell - OOP classic -, das Daten und Methoden fÃ¼r die Arbeit mit ihnen in einem Objekt zusammenfasst.  Am Ende ist das Seitenmodell nur eine Klasse. Es gibt keinen Grund, warum der Controller nicht diese Klasse sein kann. <br><br>  Mit anderen Worten, Razor Pages ist eine vernÃ¼nftigere WeblÃ¶sung als MVC. Jetzt beschÃ¤ftigen wir uns mit dem traditionellen und logischen Konzept der â€Seiteâ€œ und nicht mit Controllern und Modellen, die Ã¼ber das gesamte Projekt verteilt sind.  Da sich .NET jedoch in Richtung Core.Net entwickeln wird, ist es unwahrscheinlich, dass Razor Page im Standardframework angezeigt wird, obwohl die meisten Projekte in den kommenden Jahren auf Standard .NET verbleiben.  Trotzdem ist es mÃ¶glich, die FunktionalitÃ¤t von Razor Pages in einem Standard-Framework darzustellen. <br><a name="habracut"></a><br>  Die LÃ¶sung sieht eigentlich ziemlich trivial aus - Sie mÃ¼ssen dem Controller das folgende Design hinzufÃ¼gen: <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnActionExecuting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ActionExecutingContext Context</span></span></span><span class="hljs-function">)</span></span> { UpdateModel(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre> <br>  Die OnActionExecuting-Methode ist ein Ereignis des Lebenszyklus, das aufgerufen wird, bevor die Controller-Methode ausgefÃ¼hrt wird (dh der Anforderungshandler - Aktion). <br><br>  UpdateModel bindet die Anforderungsparameter direkt an die Eigenschaften des Modells - in diesem Fall an die Eigenschaften der Controller-Klasse. <br><br>  Ein zusÃ¤tzlicher Komfort - jetzt mÃ¼ssen Parameter vom Typ Modell oder andere nicht mehr explizit akzeptiert werden.  Obwohl dies nichts verhindert, sind Bindungsparameter als Eigenschaften des Controllers erforderlich, wenn der Parameter eine einfache ID ist, die lediglich als lokale Variable verwendet wird, beispielsweise wenn Sie die Persistenz der Seite sicherstellen mÃ¼ssen, was spÃ¤ter erlÃ¤utert wird. <br><br>  Ein einfaches Beispiel: <br><br>  Wir haben das Ã¼bliche Anmeldeformular mit zwei Feldern. <br><br>  Es macht keinen Sinn, sich zu markieren, ich werde nur den Controller-Code geben <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">AccountController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> username{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> userpass{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [HttpPost] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnLogin</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     checklogin(username,userpass); return View("Index",this); } protected override void OnActionExecuting(ActionExecutingContext Context) { UpdateModel(this); } }</span></span></code> </pre><br>  Wie Sie sehen, sind die Eingabedaten zum Zeitpunkt der AuslÃ¶sung des Ereignisses bereits gebunden und einsatzbereit. <br><br>  NatÃ¼rlich mÃ¼ssen wir bedenken, dass wir jetzt auch den Controller als ActionResult zurÃ¼ckgeben und in der Vorlage den Klassennamen des Controllers registrieren mÃ¼ssen - wie z. B. @Model AccountController. <br><br>  Infolge dieser LÃ¶sung wird auch die Aufgabe, den Status der Seite zwischen Anforderungen beizubehalten, vereinfacht.  Angenommen, Sie haben eine Seite mit einer bestimmten Tabelle, einem Filter, der nach Spalten und Paginierung sortiert ist. <br><br>  Wenn Sie auf den Filter klicken, kehrt das Modell zur Ansicht zurÃ¼ck und alles ist in Ordnung. Wenn Sie jedoch auf Sortieren klicken, wird der Filter natÃ¼rlich zurÃ¼ckgesetzt.  Der Paginator setzt sowohl die Sortierung als auch den Filter zurÃ¼ck.  In WebForms wurde der Status der Seite automatisch gespeichert. In MVC mÃ¼ssen Sie verschiedene umstÃ¤ndliche Entscheidungen treffen. Kleben Sie beispielsweise alle Parameter und steuern Sie sie fÃ¼r jede Anforderung. Das heiÃŸt, Sie mÃ¼ssen alle zuvor eingegebenen Parameter vom Filter an den Sortierlink hÃ¤ngen. <br><br>  Solche Schwierigkeiten sind einer der GrÃ¼nde fÃ¼r SPA und anderen Javascript-Wahnsinn, Logik und Daten mit den daraus resultierenden Browserbremsen (insbesondere mobilen GerÃ¤ten) in den Browser zu ziehen, Seiten fÃ¼r jede Mausbewegung zu springen und zu ruckeln und die KomplexitÃ¤t und die Kosten der Arbeit zu erhÃ¶hen - denn das Backend ist alle gleich Schreiben Sie in der einen oder anderen Form, packen Sie die Ã¼ber Ajax gesendeten Daten aus, plus Callbac Hell, Komplikationen beim Debuggen usw. und dies alles ohne praktischen Nutzen fÃ¼r Website-Besucher, denen es egal ist, wie  Isana Seite. <br><br>  Die logischste LÃ¶sung besteht darin, den Seitenstatus in der Sitzung zu speichern.  Da wir alle erforderlichen Parameter in Form von Controller-Eigenschaften zur Hand haben, mÃ¼ssen Sie lediglich die OnActionExecuted-Methode neu definieren, die nach der Verarbeitung der Anforderung aufgerufen wird, und die erforderlichen Eigenschaften in die Sitzung packen (der SitzungsschlÃ¼ssel sollte offensichtlich auf den Namen des Controllers verweisen). <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnActionExecuted</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ActionExecutedContext Context</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  }</span></span></code> </pre><br>  Die Parameter werden aus der Sitzung im Controller-Konstruktor oder vor dem Aufruf von UpdateModel (this) wiederhergestellt.  Wenn eine Anforderung eintrifft, z. B. Sortierungen, Ã¤ndern sich die neuen Parameter und der Rest bleibt unberÃ¼hrt, und die Ansicht wird in derselben Form angezeigt, in der sie gesendet wurde. <br><br>  Eine solche LÃ¶sung bietet noch einen weiteren Vorteil: Der Benutzer hat beispielsweise die Tabelle sortiert und beschlossen, ein Element zu bearbeiten, indem er eine andere Seite dafÃ¼r Ã¶ffnet.  NatÃ¼rlich mÃ¶chte er zum Status der Liste zurÃ¼ckkehren, die er verlassen hat, und da sich der Status der Seite in unserer Sitzung befindet, wird die Seite automatisch wiederhergestellt.  Wie so oft ist es nicht erforderlich, den gesamten "KnÃ¶del" der Parameter auf die Bearbeitungsseite zu Ã¼bertragen und umgekehrt.  Wenn der Status zwischen den Seiten nicht gespeichert werden muss, kann der Status der Seite nicht in einer Sitzung, sondern in TempData gespeichert werden. <br><br>  Ich hoffe, dass diese â€Life Hacksâ€œ, obwohl sie trivial aussehen, fÃ¼r AnfÃ¤nger nÃ¼tzlich sind, bis sie im Internet nach unbequemeren und umstÃ¤ndlicheren LÃ¶sungen suchen und feststellen, dass es keine anderen gibt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de464831/">https://habr.com/ru/post/de464831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de464805/index.html">Eine Schlange auf das iPad schreiben (Pythonista)</a></li>
<li><a href="../de464811/index.html">Apple Music fÃ¼r den Entwickler</a></li>
<li><a href="../de464819/index.html">Mein sechster Tag mit Haiku: unter der Haube von Ressourcen, Symbolen und Paketen</a></li>
<li><a href="../de464823/index.html">Wir betrachten das Durchschnittsgehalt eines â€Datenwissenschaftlersâ€œ. Parsim hh.ru mit pandas / python</a></li>
<li><a href="../de464825/index.html">Vorbereiten der Anwendung fÃ¼r Android Q. Teil 2</a></li>
<li><a href="../de464833/index.html">Count Scoring de la Fer oder eine Studie zum Kredit-Scoring als Teil der Erweiterung des eigenen Horizonts. Teil 2</a></li>
<li><a href="../de464837/index.html">Vom Ganges bis zur Wolga: Wie kann man FlÃ¼sse vor Verschmutzung bewahren?</a></li>
<li><a href="../de464839/index.html">Ãœber ein Patent von Tesla Motors</a></li>
<li><a href="../de464841/index.html">Habr Weekly # 15 / Ãœber die Kraft einer guten Geschichte (und ein bisschen Ã¼ber BrathÃ¤hnchen)</a></li>
<li><a href="../de464843/index.html">Angenehm mit nÃ¼tzlich oder Entwicklung fÃ¼r ASIO in C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>