<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙆 ♒️ 🙆 Waves Smart Assets: Schwarzweißlisten, Intervallhandel 🚶🏿 🤟🏽 🤳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In zwei vorherigen Artikeln haben wir über intelligente Konten gesprochen und darüber, wie sie zur Durchführung von Auktionen und zur Erstellung von T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Waves Smart Assets: Schwarzweißlisten, Intervallhandel</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/waves/blog/444686/"><img src="https://habrastorage.org/webt/qc/bn/or/qcbnormwrs0x3w_ushrehqcxjci.png" alt="Bild"><br><br>  <i>In zwei vorherigen Artikeln haben wir über intelligente Konten gesprochen und darüber, wie sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zur Durchführung von Auktionen und zur Erstellung von Treueprogrammen verwendet werden</a> können und auch dazu beitragen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, die Transparenz von Finanzinstrumenten zu gewährleisten</a> .</i> <i><br><br></i>  <i>Jetzt werden wir uns mit intelligenten Assets und mehreren Fällen ihrer Anwendung befassen, einschließlich des Einfrierens von Assets und der Schaffung von Einschränkungen für Transaktionen an bestimmten Adressen.</i> <br><a name="habracut"></a><br>  Mit Waves Smart Assets können Benutzer Skripts auf Assets überlagern, und zwar auf dieselbe Weise wie bei Smart Accounts.  Jede neue Transaktion, die mit dem Smart Asset erstellt wurde, wird zuerst vom Skript und erst dann von der Blockchain bestätigt. <br><br>  Beachten Sie die folgenden Unterschiede zwischen Smart Assets und Smart Accounts: <br><br><ol><li>  Es ist unmöglich, Beweise im Smart Asset Code zu überprüfen (wir haben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">im ersten Artikel darüber gesprochen</a> ). </li><li>  Im Code des Smart-Kontos können Sie ExchangeTransaction nur überprüfen, wenn Ihr Konto ein Übereinstimmungskonto ist.  Andernfalls wird nur die Bestellung geprüft.  Sie können die Bestellung nicht direkt im Smart Asset-Code überprüfen, Sie können die ExchangeTransaction überprüfen und bei Bedarf die Bestellung daraus extrahieren. </li><li>  Ein Smart Asset hat im Gegensatz zu einem Smart Account keinen Status, aber wir haben weiterhin Zugriff auf die Kontostatus über das Skript. </li></ol><br>  Intelligente Assets vereinfachen das Verfassen von Verträgen erheblich und machen die Implementierung vieler Fälle präzise und elegant. <br><br>  <b>Einfrieren von Assets</b> <br><br>  Um Assets auf eine bestimmte <i>targetHeight-</i> Blockhöhe einzufrieren, können Sie diesen Wert einfach im Skript des folgenden Smart Assets festlegen: <br><br><pre><code class="scala hljs">let targetHeight = <span class="hljs-number"><span class="hljs-number">1500000</span></span> height &gt;= targetHeight height -  ,   .</code> </pre> <br>  <b>Spezifische Matcher-Bedingung</b> <br><br>  Um ein bestimmtes Matchr wie gewünscht festzulegen, können Sie seine Adresse als Absender im Smart Asset-Skript des folgenden Formulars angeben: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; t.sender == addressFromString(<span class="hljs-string"><span class="hljs-string">"3PJaDyprvekvPXPuAtxrapacuDJopgJRaU3"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  <b>Weiße Liste der Empfänger</b> <br><br>  Damit Token nur an bestimmte Konten gesendet werden können - um eine „weiße Liste“ von Empfängern zu erstellen - können Sie ein Smart Asset mit dem folgenden Schema verwenden, mit dem überprüft wird, ob es in der Liste enthalten ist: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let trustedRecipient1 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3P6ms9EotRX8JwSrebeTXYVnzpsGCrKWLv4"</span></span>) let trustedRecipient2 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PLZcCJyYQnfWfzhKXRA4rteCQC9J1ewf5K"</span></span>) let trustedRecipient3 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PHrS6VNPRtUD8MHkfkmELavL8JnGtSq5sx"</span></span>) t.recipient == trustedRecipient1 || t.recipient == trustedRecipient2 || t.recipient == trustedRecipient3 <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  Aus Gründen der Sicherheit und der nachweisbaren Sprachkonsistenz enthält die Liste keine Iterator-Implementierung.  Daher wird es als eine Reihe spezifischer Elemente definiert. <br><br>  <b>Blacklist-Empfänger</b> <br><br>  Um das Senden von Token an bestimmte Konten zu verhindern, können Sie auf die gleiche Weise eine „schwarze Liste“ erstellen.  In diesem Fall wird genau dasselbe Smart Asset verwendet, wobei jedoch die Adresse auf Abwesenheit auf der schwarzen Liste überprüft wird: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let bannedRecipient1 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3P6ms9EotRX8JwSrebeTXYVnzpsGCrKWLv4"</span></span>) let bannedRecipient2 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PLZcCJyYQnfWfzhKXRA4rteCQC9J1ewf5K"</span></span>) let bannedRecipient3 = addressFromString(<span class="hljs-string"><span class="hljs-string">"3PHrS6VNPRtUD8MHkfkmELavL8JnGtSq5sx"</span></span>) t.recipient != bannedRecipient1 &amp;&amp; t.recipient != bannedRecipient2 &amp;&amp; t.recipient != bannedRecipient3 <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Senden mit Genehmigung des Emittenten</b> <br><br>  Mit einem Smart Asset können Sie auch festlegen, dass ein Smart Asset nur mit Genehmigung des Emittenten gesendet werden soll <i>(Commitment / Debt Label</i> ).  Der Emittent erklärt sich damit einverstanden, indem er die Transaktions-ID in den Stil seines Kontos einfügt: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> =&gt; let issuer = extract(addressFromString(<span class="hljs-string"><span class="hljs-string">"3P6ms9EotRX8JwSrebeTXYVnzpsGCrKWLv4"</span></span>)) #,      <span class="hljs-type"><span class="hljs-type">ID</span></span>   isDefined(getInteger(issuer, toBase58String(t.id))) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  <b>Tauschen Sie nur gegen bestimmte Münzen</b> <br><br>  Ein Smart Asset erlaubt die Erlaubnis, es nur gegen bestimmte Münzen umzutauschen.  Um beispielsweise den Umtausch nur gegen Bitcoins zuzulassen, können Sie den folgenden Code verwenden: <br><br><pre> <code class="scala hljs">let <span class="hljs-type"><span class="hljs-type">BTCId</span></span> = base58<span class="hljs-symbol"><span class="hljs-symbol">'8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJ</span></span>S' <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t : <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; t.sellOrder.assetPair.priceAsset == <span class="hljs-type"><span class="hljs-type">BTCId</span></span> || t.sellOrder.assetPair.amountAsset == <span class="hljs-type"><span class="hljs-type">BTCId</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  <b>Handel zum Orakelpreis</b> <br><br>  Im Smart Asset-Skript können Sie die Berechtigung zum Handeln nur zu dem Preis festlegen, der in der Geschichte des zuverlässigen Orakels festgelegt ist.  Hier ist ein Beispiel für ein solches Skript: <br><br><pre> <code class="scala hljs">let oracle = <span class="hljs-type"><span class="hljs-type">Address</span></span>(base58<span class="hljs-symbol"><span class="hljs-symbol">'3PLNmokt22NrSiNvCLvwMUP84LCMJqbXwA</span></span>D') let assetId = toBase58String(base58<span class="hljs-symbol"><span class="hljs-symbol">'oWgJN6YGZFtZrV8BWQ1PGktZikgg7jzGmtm16Ktyvj</span></span>d') <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { #   <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">MassTransferTransaction</span></span> =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> e: <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; #,     ,        let correctPrice = e.price == extract(getInteger(oracle, assetId)) #,       <span class="hljs-type"><span class="hljs-type">WAVES</span></span> let correctPriceAsset = !isDefined(e.sellOrder.assetPair.priceAsset) correctPrice &amp;&amp; correctPriceAsset <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  Hier sehen wir uns einem nicht offensichtlichen Moment gegenüber, wenn wir die ID des Vermögenswerts überprüfen, mit dem der Handel ausgeführt wird.  Tatsache ist, dass wir über WAVES sprechen, wenn die Asset-ID nicht definiert ist.  Im Skript stellen wir auf diese Weise sicher, dass der Handel mit WAVES gepaart ist. <br><br>  <b>Festpreiserhöhung</b> <br><br>  Sie können einen festen Preis für ein intelligentes Asset festlegen, der sich in einem bestimmten Anteil schrittweise erhöht.  Hier ist ein Beispiel für ein Asset-Skript, dessen Preis alle 1000 Blöcke um 5% steigt: <br><br><pre> <code class="scala hljs">let startPrice = <span class="hljs-number"><span class="hljs-number">10</span></span> let startHeight = <span class="hljs-number"><span class="hljs-number">1000</span></span> let interval = <span class="hljs-number"><span class="hljs-number">1000</span></span> #        let raise = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">MassTransferTransaction</span></span> =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> e: <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; e.price == startPrice + ((height - startHeight) / interval) * (<span class="hljs-number"><span class="hljs-number">100</span></span> + raise) / <span class="hljs-number"><span class="hljs-number">100</span></span> &amp;&amp; !isDefined(e.sellOrder.assetPair.priceAsset) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  <b>Intervallhandel</b> <br><br>  Dank des Skripts kann der Handel mit intelligenten Assets auch auf vorgegebene Intervalle beschränkt werden.  Hier ist ein Beispiel für ein solches Skript: <br><br><pre> <code class="scala hljs">let startHeight = <span class="hljs-number"><span class="hljs-number">10000</span></span> let interval = <span class="hljs-number"><span class="hljs-number">44000</span></span> let limit = <span class="hljs-number"><span class="hljs-number">1500</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> tx { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> t: <span class="hljs-type"><span class="hljs-type">TransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">MassTransferTransaction</span></span> | <span class="hljs-type"><span class="hljs-type">ExchangeTransaction</span></span> =&gt; (height - startHeight) % interval &lt; limit <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> _ =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  Im Skript stellen wir sicher, dass seit Beginn des Handels <i>startHeight</i> nicht mehr als <i>Grenzintervalle verstrichen sind</i> .  Die Intervalllänge entspricht der Anzahl der im <i>Intervallfeld</i> angegebenen Blöcke. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de444686/">https://habr.com/ru/post/de444686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de444674/index.html">Sony Xperia 10 und Xperia 10 Plus - Breitbild-Smartphones</a></li>
<li><a href="../de444676/index.html">CRM-Bewertung, Tops, Bewertungen - lügen sie alle?</a></li>
<li><a href="../de444678/index.html">Verfügbarkeitstag: 12. April, normaler Flug</a></li>
<li><a href="../de444682/index.html">Sony- und Nintendo-Aktien stürzen ab, nachdem Video-Streaming für Gamer von Google gestartet wurde</a></li>
<li><a href="../de444684/index.html">Wir arbeiten mit neuronalen Netzen: eine Checkliste zum Debuggen</a></li>
<li><a href="../de444688/index.html">Bitte hören Sie auf, mit Eloquent über die Repository-Vorlage zu sprechen</a></li>
<li><a href="../de444690/index.html">Wie Uber-Forscher menschliches Verhaltenswissen anwenden und skalieren</a></li>
<li><a href="../de444692/index.html">MOSDROID # 16 Schwefel bei Redmadrobot</a></li>
<li><a href="../de444694/index.html">Wie wir den Abfluss vorhergesagt haben, nähern wir uns ihm als Naturkatastrophe</a></li>
<li><a href="../de444696/index.html">Erhöhen Sie die Containerdichte auf einem Knoten mithilfe der PFCACHE-Technologie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>