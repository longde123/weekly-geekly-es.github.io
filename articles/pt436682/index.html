<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÆ ü§• üë®üèΩ‚Äçüè´ N√£o crie sua pr√≥pria JL (DSL) para expandir a funcionalidade do aplicativo üßôüèΩ üçê üë¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando voc√™ deseja dar ao usu√°rio a capacidade de escrever plug-ins para seu aplicativo, voc√™ tem a op√ß√£o de fornecer a API. Abaixo, mostrarei por que...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>N√£o crie sua pr√≥pria JL (DSL) para expandir a funcionalidade do aplicativo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436682/"><p>  Quando voc√™ deseja dar ao usu√°rio a capacidade de escrever plug-ins para seu aplicativo, voc√™ tem a op√ß√£o de fornecer a API.  Abaixo, mostrarei por que a pior solu√ß√£o para isso seria inventar sua pr√≥pria linguagem de programa√ß√£o e analisar os c√≥digos-fonte, bem como os m√≥veis aqui. </p><br><p><img src="https://habrastorage.org/webt/mm/z3/fl/mmz3flzbwecfpjejtazzand6dfs.png" alt="CPAP"></p><a name="habracut"></a><br><h2 id="yap--eto-ne-osnovnaya-funkciya-prilozheniya">  PL n√£o √© a principal fun√ß√£o do aplicativo </h2><br><p> Imagine que abrimos a produ√ß√£o de m√≥veis modulares.  Existem alguns elementos b√°sicos: bancadas, bases para copos, mesas de cabeceira, etc.  Existe uma linha de produ√ß√£o associada ao processamento de madeira: m√°quinas-ferramentas, serras, vernizes, todos com a mais recente tecnologia.  Mas tudo isso deve ser realizado de alguma maneira.  Sabemos que existem 100.500 empresas especializadas na fabrica√ß√£o de ferragens e parafusos, existem alguns padr√µes para fixadores de m√≥veis que foram inventados por uma comunidade de profissionais para facilitar a vida de seus clientes.  Qual ser√° a decis√£o m√≠ope de implantar uma linha adicional para a produ√ß√£o de parafusos, porcas e √¢ngulos pr√≥prios? </p><br><p>  O que podemos ganhar? </p><br><ul><li>  Dessa forma, podemos <abbr title="Se o seu piano Steinway tem pelo menos uma parte que n√£o √© da Steinway, n√£o √© o Steinway">marcar nosso produto</abbr> para que o hamster sinta sua "originalidade" e carregue mais dinheiro. </li><li>  Talvez isso nos permita n√£o pagar direitos autorais por nenhum dos parafusos ou resolver o problema de log√≠stica. </li><li>  Podemos entrar em um novo mercado de parafusos e porcas, estabelecendo nosso pr√≥prio padr√£o, que √© <abbr title="Bem, onde est√° o TRS de 2,5 mm (Jack) agora?">mais r√°pido, melhor e mais alto.</abbr> </li></ul><br><p>  Mas vamos ficar limpos. </p><br><ul><li>  Ilitismo √© o trabalho dos vendedores.  O vendedor tornar√° a marca ou n√£o uma Elite com ou sem uma nova linha de produ√ß√£o. </li><li>  Os direitos autorais, em regra (nem sempre, √© claro), s√£o mais baratos que o desenvolvimento do zero.  E resolvendo o problema de fornecer um elemento implantando uma nova linha de produ√ß√£o, voc√™ apenas o exacerba. </li><li>  Se queremos experimentar um novo campo de atividade, n√£o precisamos conect√°-lo ao que j√° somos profissionais.  Pode parecer que √© mais f√°cil empurrar os parafusos com os m√≥veis, mas se eles n√£o voarem, eles arrastar√£o os m√≥veis junto com eles.  Pelo menos o que j√° custa para os clientes. </li></ul><br><p>  Voltando √†s nossas ovelhas: se voc√™ estiver criando um ecossistema para as extens√µes de seu aplicativo, voc√™ ter√° um <strong>aplicativo</strong> .  Faz algo de bom, algo em que voc√™ √© bom. </p><br><h2 id="ksp--kontakt-script-processor-ili-liniya-proizvodstva-boltov-v-mire-digital-audio">  KSP - Kontakt Script Processor, ou linha de produ√ß√£o de parafusos no mundo do √°udio digital </h2><br><p><img src="https://habrastorage.org/webt/e1/ky/8h/e1ky8heowpw6mhn41blmegpt6os.png" alt="Kontakt"></p><br><p>  Vou contar uma hist√≥ria sobre esse idioma: </p><br><p>  <strong>Kontakt</strong> √© um romper (sampler) da empresa austr√≠aca <strong>Native Instruments</strong> .  Atualmente, √© muito dif√≠cil encontrar um projeto usando ferramentas virtuais nas quais ele n√£o √© usado.  Nos √∫ltimos 10 anos, a Kontakt ocupou a maior parte do mercado de instrumentos amostrados.  O segredo √© simples: ao mesmo tempo, Kontakt prop√¥s duas inova√ß√µes que mudaram o caminho do desenvolvimento de instrumentos virtuais de amostra. </p><br><p>  A primeira inova√ß√£o estava diretamente relacionada √† sua principal fun√ß√£o: tratava a mem√≥ria com muito cuidado (e as amostras em wav s√£o as mesmas, tanto HDD quanto RAM).  <strong>A NI</strong> criou um formato de compacta√ß√£o <em>sem</em> perdas com decodifica√ß√£o r√°pida e criou um revolucion√°rio sistema de buffer de √°udio para a √©poca. </p><br><h3 id="vtoroy-innovaciey-stal-ksp">  A segunda inova√ß√£o foi KSP </h3><br><p>  Antes do contato, havia duas maneiras de organizar funcionalmente as amostras gravadas em um instrumento controlado por MIDI: </p><br><ul><li>  Escreva seu pr√≥prio mecanismo do zero em C ++ ou em outro idioma que possa usar o VST SDK da Steinberg (e existem outros formatos de plug-in, por exemplo, AAX). </li><li>  Use um amostrador pronto feito para m√∫sicos que n√£o est√£o familiarizados com a programa√ß√£o, mas que possuem sons que precisam ser organizados em algum tipo de sistema.  Digamos <strong>Giga Studio</strong> .  Mas, como regra geral, esses romperms eram fechados ou, para finalizar seu trabalho, eram necess√°rios menos funcion√°rios do que o desenvolvimento vazio no SDK do VST. </li></ul><br><p>  O contato agradou tanto a isto como a isso: para prototipagem r√°pida, existe uma GUI conveniente que √© compreens√≠vel para qualquer m√∫sico que leu o manual, e para aperfei√ßoamento adicional, n√£o h√° menos <strong>uma linguagem de programa√ß√£o</strong> , com condi√ß√µes, fun√ß√µes (da vers√£o 4) e uma biblioteca padr√£o representando a API √† maioria das funcionalidades implementadas por meio da GUI, bem como aos par√¢metros para reproduzir amostras diretamente.  Entre outras coisas, a partir da vers√£o 2, tornou-se poss√≠vel personalizar a interface com todos os tipos de assobios e falsifica√ß√µes, o que permitiu mostrar sua singularidade em uma escala quase ilimitada.  E o c√≥digo do desenvolvedor est√° oculto duas vezes: ofusca√ß√£o e prote√ß√£o contra a troca de <abbr title="sim, n√£o funciona na vers√£o warez">ferramentas</abbr> . </p><br><p>  Dada a crescente popularidade do motor, bem como um impressionante per√≠odo de desenvolvimento ativo do macac√£o, hoje o Kontakt √© uma esp√©cie de rifle de assalto Kalashnikov no mundo do √°udio digital.  √â f√°cil de aprender, confi√°vel como um tanque, tem a capacidade de dopilka dentro de limites razo√°veis ‚Äã‚Äãpara si mesmo amado e possui um mercado enorme para usu√°rios satisfeitos. </p><br><h3 id="ne-vse-tak-raduzhno">  Nem tudo √© t√£o r√≥seo </h3><br><p>  O inevit√°vel aconteceu: a inova√ß√£o na forma de KSP se tornou um flagelo.  Tentando tornar a sintaxe acess√≠vel aos manequins, que s√£o m√∫sicos, em vez de resolver a implementa√ß√£o da API na linguagem humana, os Nativs escreveram seu pr√≥prio int√©rprete de sua pr√≥pria linguagem, cuja arquitetura n√£o pressupunha inicialmente um v√¥o de imagina√ß√£o t√£o tempestuoso dos desenvolvedores de ferramentas, que estamos testemunhando agora.  J√° na vers√£o 3, os nativos perderam a esperan√ßa de acompanhar o apetite dos usu√°rios e simplesmente come√ßaram a rebitar as novas fun√ß√µes da biblioteca padr√£o, permitindo que eles descobrissem o ambiente de desenvolvimento de c√≥digo por conta pr√≥pria. </p><br><p> Al√©m disso, mesmo ent√£o, o <strong>Nils Lieberg KScriptEditor apareceu</strong> , bifurcado com o <strong>Scintilla</strong> , que h√° muito tempo atua como o principal IDE do KSP.  √â rid√≠culo dizer, mas quando os nativos perceberam que o contato n√£o podia lidar com o tamanho da fonte alimentada, eles introduziram fun√ß√µes na linguagem sem precisar se preocupar em passar argumentos para eles.  E um m√™s depois, um taskfunc apareceu no <code>taskfunc</code> , passando argumentos para fun√ß√µes que n√£o levam argumentos. </p><br><p>  Depois de um tempo, Niels percebeu que estava pisando no caminho dos nativos: n√£o fazia sentido desenvolver um pr√≥prio IDE.  Ele portou o compilador e implementou a funcionalidade IDE para SublimeText2, e acenou.  No momento, as r√©deas do SublimeKSP s√£o suportadas pelo desenvolvedor, ao que parece, da <abbr title="Empresa de desenvolvimento de ferramentas de contato">Fluffy Audio</abbr> . </p><br><p><img src="https://habrastorage.org/webt/6j/fg/yx/6jfgyxlkmajwlnkdxnibbd-f8zg.png" alt="A terceira vez no mesmo rake"></p><br><h3 id="nu-vy-ponyali">  Bem, voc√™ entende) </h3><br><p>  E, novamente, j√° um gerador de c√≥digo, que n√£o √© menos que uma linguagem, com um sistema de importa√ß√µes, um analisador, um compilador, sintaxe diferente do KSP, mas ainda suportando compatibilidade com ele, por raz√µes desconhecidas pela ci√™ncia, acaba sendo uma montanha terr√≠vel de muletas que n√£o podem ser jogadas fora devido √† compatibilidade com vers√µes anteriores de projetos de desenvolvedores de bibliotecas que desenvolvem seus mecanismos KSP h√° anos. </p><br><p>  Suponha que o sistema de importa√ß√£o funcione globalmente com rela√ß√£o ao arquivo a partir do qual a compila√ß√£o √© iniciada; portanto, para compilar um m√≥dulo localizado em uma subpasta, √© necess√°rio alterar completamente seus caminhos nas importa√ß√µes, de acordo com sua posi√ß√£o na estrutura do projeto.  E o cara que o apoia ficaria feliz em mudar isso, mas depois ele interromper√° os projetos do mesmo <abbr title="outra empresa que desenvolve ferramentas para a Kontakt">Spitfire Audio</abbr> por um longo tempo.  E esse fato por si s√≥ complica o teste modular (n√£o vamos dizer nada sobre a unidade) para o inferno. </p><br><p>  Parece que a solu√ß√£o para o problema √© usar links simb√≥licos, mas em algum lugar em algum lugar n√£o funciona conforme o esperado e os links simb√≥licos funcionam apenas parcialmente.  Esse tipo de problema n√£o √© uma coisa.  Entre outras coisas, depois de Niels, o desenvolvimento n√£o foi realizado modificando o pr√≥prio compilador, que recebe o c√≥digo j√° analisado.  E, novamente, por raz√µes de compatibilidade com vers√µes anteriores, adicionando plug-ins de sintaxe estendida, cada um dos quais recebe as fontes originalmente cortadas em linhas, as analisa por conta pr√≥pria e faz modifica√ß√µes. </p><br><p>  Dado que a maior parte da l√≥gica do pr√©-processador se baseia em macros e fun√ß√µes inline, que implantam o c√≥digo em uma tela enorme que armazena 80% das condi√ß√µes sempre verdadeiras ou sempre falsas (substituindo as constantes pela entrada da condi√ß√£o), que s√£o minimizadas no est√°gio Ao analisar o AST, o tempo de compila√ß√£o da fonte "correta" √© compar√°vel ao dos projetos With, em linguagem interpretada para manequins. </p><br><p>  Dizer que o KSP se tornou uma dor para os desenvolvedores √© n√£o dizer nada. </p><br><h3 id="ne-kontaktom-edinym">  Nem um √∫nico contato. </h3><br><p>  N√£o posso dar exemplos de outras √°reas, mas aqui do escopo do DigitalAudio: </p><br><ul><li>  <strong>O Lemur</strong> √© um aplicativo de escavadeira com um editor de √°rea de trabalho que permite criar rapidamente interfaces bonitas para comunicar p√°s usando o protocolo <abbr title="O Open Sound Control √© um protocolo para controlar dispositivos e programas que substituiu o MIDI no campo da automa√ß√£o de par√¢metros de √°udio: por exemplo, bot√µes de volume e panoramas.">OSC</abbr> .  Ele possui seu pr√≥prio PL, que pode ser usado em objetos de <em>script</em> especiais espalhados pela √°rvore do projeto.  N√£o h√° como criar um compilador como o que foi feito para o KSP. </li><li>  <strong>Reaper</strong> - <abbr title="Esta√ß√£o de trabalho digital. A principal ferramenta para engenheiros e arranjadores de som">DAW</abbr> com um ecossistema desenvolvido para o desenvolvimento de extens√µes.  Como resultado, sempre que poss√≠vel, dupliquei meu <abbr title="vers√£o truncada do JavaScript (aparentemente, para analisar a velocidade)"><em>c√≥digo de linguagem JSFX (ReaScript)</em></abbr> como uma API para C ++, lua e Python. </li><li>  <strong>O HISE</strong> √© um jovem escritor e <strong>construtor de</strong> <abbr title="Formato de plugin DAW universal desenvolvido por Steinberg">VST \ VSTi</abbr> que matar√° o Kontakt do desenvolvedor sueco <em>Christoph Haart</em> mais cedo ou mais tarde.  Dentro do pr√≥prio editor, ele permite escrever em JavaScript modificado, que √© analisado e compilado no bin√°rio por objetos C ++.  A id√©ia com seu pr√≥prio analisador para introduzir entidades adicionais (por exemplo, registrar vari√°veis, se traduzi corretamente) funcionou at√© que os usu√°rios transferissem seu c√≥digo do editor HISE para seus IDEs favoritos com destaque de sintaxe, an√°lise est√°tica e <em>ferramentas de</em> formata√ß√£o <em>JsPrettier</em> .  Agora, Christophe esbo√ßou alguns arquivos de cabe√ßalho para compilar bibliotecas est√°ticas em C ++, que podem ser usadas como m√≥dulos no editor.  Paralelamente, ele continua a complementar o HISEScript (porque o JavaScript n√£o pode mais ser chamado de) com novas fun√ß√µes, mas sabemos que ... </li></ul><br><h1 id="vyvod">  Conclus√£o </h1><br><p>  Escreva seu pr√≥prio aplicativo, dedicando-se √† sua principal funcionalidade, n√£o perca tempo com analisador, sem√¢ntica e sintaxe.  Isso √© interessante enquanto voc√™ inicia, mas com uma alta probabilidade levar√° a um beco sem sa√≠da.  A linguagem de programa√ß√£o n√£o pode fazer parte do aplicativo: √© um tipo de linha de produ√ß√£o separada que requer muito tempo para manter, modificar e dar suporte √† comunidade.  Por sua vez, se voc√™ deseja diminuir o limiar para manequins, largue-o.  Um bule de ch√° real, por via de regra, tem medo de imprimir qualquer coisa e n√£o se incomoda com sua sintaxe simples. </p><br><p>  Ao mesmo tempo, para desenvolvedores iniciantes de plug-ins para o seu programa, voc√™ pode simplesmente criar um pequeno <em>Guia R√°pido</em> , apresentando-os aos conceitos b√°sicos do seu PL escolhido para expandir a funcionalidade e alimentar lentamente sua API, que faz parte do ecossistema desse idioma. </p><br><p>  <em>PS N√£o, escrever seu pr√≥prio analisador para um PL pronto tamb√©m √© uma m√° id√©ia.</em> </p><br><p>  Ficarei feliz com qualquer cr√≠tica ao artigo, √† primeira panqueca e a todas as coisas. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436682/">https://habr.com/ru/post/pt436682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436664/index.html">Apresentando o .NET Community Standup Series</a></li>
<li><a href="../pt436668/index.html">As estat√≠sticas podem ser lidas com uma pequena quantidade de dados?</a></li>
<li><a href="../pt436670/index.html">Como rolar atualiza√ß√µes na produ√ß√£o automaticamente</a></li>
<li><a href="../pt436674/index.html">Engenharia reversa Fantastic Dizzy</a></li>
<li><a href="../pt436676/index.html">Como fazer DDoS em todo o pa√≠s</a></li>
<li><a href="../pt436684/index.html">Anivers√°rio Android 10 (Q). O que se sabe agora?</a></li>
<li><a href="../pt436686/index.html">JPEG do mundo 3D. O que √© glTF?</a></li>
<li><a href="../pt436688/index.html">A gigante de TI sai do mercado de chips para data centers - conte-nos o que isso significa para a ind√∫stria</a></li>
<li><a href="../pt436690/index.html">[Pergunte - responda] sobre propriedade intelectual e prote√ß√£o de dados</a></li>
<li><a href="../pt436692/index.html">(in) Guerra Finita</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>