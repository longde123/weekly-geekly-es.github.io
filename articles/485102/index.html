<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÆ üé≥ üö∫ Topleaked: una herramienta para detectar p√©rdidas de memoria üõ§Ô∏è üë®üèΩ‚Äçüîß üç¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La historia, como suele suceder, comenz√≥ con el hecho de que uno de los servicios en el servidor cay√≥. M√°s precisamente, el proceso fue eliminado al m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Topleaked: una herramienta para detectar p√©rdidas de memoria</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485102/"><img src="https://habrastorage.org/webt/yu/9q/eq/yu9qeqrqqdhmtimkzewkfleph-0.png" alt="imagen" align="right"><br><p>  La historia, como suele suceder, comenz√≥ con el hecho de que uno de los servicios en el servidor cay√≥.  M√°s precisamente, el proceso fue eliminado al monitorear el uso excesivo de memoria.  El stock deber√≠a haber sido m√∫ltiple, lo que significa que tenemos una p√©rdida de memoria. <br>  Hay un volcado de memoria completo con informaci√≥n de depuraci√≥n, hay registros, pero no se pueden reproducir.  O la fuga es incre√≠blemente lenta, o el escenario depende del clima en Marte.  En una palabra, otro error que no se reproduce mediante pruebas, pero se encuentra en estado salvaje.  Queda la √∫nica pista real: un volcado de memoria. </p><a name="habracut"></a><br><h2 id="ideya">  Idea </h2><br><p>  El servicio original fue escrito en C ++ y Perl, aunque esto no juega un papel especial.  Todo lo que se describe a continuaci√≥n se aplica a casi cualquier idioma. </p><br><p> Nuestro proceso desde el enunciado del problema fue encajar en un par de cientos de megabytes de RAM, y se complet√≥ por m√°s de 6 gigabytes.  Por lo tanto, la mayor parte de la memoria del proceso son objetos filtrados y sus datos.  Solo es necesario averiguar qu√© tipos de objetos estaban m√°s en la memoria.  Por supuesto, no hay una lista de objetos con informaci√≥n de tipo en el volcado.  El seguimiento de las relaciones y la creaci√≥n de un gr√°fico como lo hacen los recolectores de basura es pr√°cticamente imposible.  Pero no necesitamos entender este hash binario, sino calcular qu√© objetos son m√°s.  Los objetos de clases no triviales tienen un puntero a una tabla de m√©todos virtuales, y todos los objetos de la misma clase tienen el mismo puntero.  Cu√°ntas veces se encuentra un puntero a una clase vtbl en la memoria, se han creado tantos objetos de esta clase. </p><br><p>  Adem√°s de vtbl, existen otras secuencias frecuentes: constantes que inicializan campos, encabezados HTTP en fragmentos de cadena, punteros a funciones. <br>  Si tiene la suerte de encontrar un puntero, entonces podemos usar gdb para comprender a qu√© apunta (a menos, por supuesto, que haya caracteres de depuraci√≥n).  En el caso de los datos, puede intentar verlos y comprender d√≥nde se utiliza.  Mirando hacia el futuro, noto que sucede tanto eso como otro y, a partir de un fragmento de una l√≠nea, es muy posible comprender qu√© es esta parte del protocolo y d√≥nde es necesario profundizar m√°s. </p><br><p>  La idea fue espiada, y la primera implementaci√≥n fue copiada de manera insoportable de stackoverflow.  <a href="https://stackoverflow.com/questions/7439170/is-there-a-way-to-find-leaked-memory-using-a-core-file" rel="nofollow">https://stackoverflow.com/questions/7439170/is-there-a-way-to-find-leaked-memory-using-a-core-file</a> </p><br><pre><code class="bash hljs">hexdump core.10639 | awk <span class="hljs-string"><span class="hljs-string">'{printf "%s%s%s%s\n%s%s%s%s\n", $5,$4,$3,$2,$9,$8,$7,$6}'</span></span> | sort | uniq -c | sort -nr | head</code> </pre> <br><p>  El gui√≥n funcion√≥ durante unos 15 minutos en nuestro basurero, devolvi√≥ un mont√≥n de l√≠neas y ... nada.  Ni un solo puntero, nada √∫til. </p><br><h2 id="razbiraemsya">  Resuelto </h2><br><p>  El desarrollo impulsado por Stackoverflow tiene sus inconvenientes.  No puedes simplemente copiar el gui√≥n y esperar que todo funcione.  En este script en particular, alg√∫n tipo de reordenamiento de bytes llama inmediatamente la atenci√≥n.  Tambi√©n surge la pregunta de por qu√© las permutaciones en 4. No es necesario ser un s√∫per especialista para comprender que tales permutaciones dependen de la plataforma: bitness y orden de bytes. </p><br><p>  Para comprender exactamente c√≥mo mirar, debe comprender el formato de archivo del volcado de memoria, LITTLE- y BIG-endian, o simplemente puede reorganizar los bytes en las piezas encontradas de diferentes maneras y dar gdb.  ¬°Oh milagro!  En orden directo, el byte gdb ve el car√°cter y dice que es un puntero a una funci√≥n. </p><br><p>  En nuestro caso, fue un puntero a una de las funciones de lectura y escritura en b√∫feres openssl.  Para personalizar la entrada y la salida, se utiliza el enfoque del sistema OOP: una estructura con un conjunto de punteros a las funciones, que es una especie de interfaz o m√°s bien vtbl.  Estas estructuras con punteros resultaron ser incre√≠blemente numerosas.  Una mirada cercana al c√≥digo responsable de establecer estas estructuras y crear buffers nos permiti√≥ encontrar r√°pidamente el error.  Al final result√≥ que, en la uni√≥n de C ++ y C no hab√≠a objetos RAII y, en caso de error, el retorno temprano no dejaba la oportunidad de liberar recursos.  Nadie adivin√≥ cargar el servicio con apretones de manos SSL incorrectos de manera oportuna, por lo que se lo perdieron.  C√≥mo marcar 6 gigabytes de apretones de manos SSL incorrectos tambi√©n es interesante, pero como dicen, esta es una historia completamente diferente.  El problema est√° resuelto. </p><br><h2 id="topleaked">  topleaked </h2><br><p>  El script result√≥ ser √∫til, pero a√∫n tiene serios inconvenientes para el uso frecuente: es muy lento, depende de la plataforma, luego resulta que los archivos de volcado tambi√©n tienen diferentes compensaciones, es dif√≠cil interpretar los resultados.  La tarea de excavar en un volcado binario no encaja bien con bash, por lo que cambi√© el lenguaje de programaci√≥n a D. La elecci√≥n del idioma se debe realmente al deseo ego√≠sta de escribir en su idioma favorito.  Bueno, la racionalizaci√≥n de la elecci√≥n es la siguiente: la velocidad y el consumo de memoria son cr√≠ticos, por lo que necesita un lenguaje compilado nativo, y es banal escribir D m√°s r√°pido que C o C ++.  M√°s adelante en el c√≥digo ser√° claramente visible.  As√≠ <a href="https://github.com/SmorkalovG/topleaked" rel="nofollow">naci√≥ el</a> proyecto <a href="https://github.com/SmorkalovG/topleaked" rel="nofollow">topleaked</a> . </p><br><h2 id="ustanovka">  Instalaci√≥n </h2><br><p>  No hay ensamblados binarios, por lo que de una forma u otra necesitar√° ensamblar el proyecto desde el origen.  Para hacer esto, necesita el compilador D. Hay tres opciones: dmd es el compilador de referencia, ldc se basa en llvm y gdc, incluidos en gcc, a partir de la versi√≥n 9.  Por lo tanto, es posible que no tenga que instalar nada si tiene la √∫ltima versi√≥n de gcc.  Si lo instala, le recomiendo ldc, ya que se optimiza mejor.  Los tres se pueden encontrar en el <a href="https://dlang.org/download.html" rel="nofollow">sitio web oficial</a> . <br>  El gestor de paquetes dub se suministra con el compilador.  Al usarlo, topleaked se instala con un comando: </p><br><pre> <code class="bash hljs">dub fetch topleaked</code> </pre> <br><p>  En el futuro, usaremos el comando para comenzar: </p><br><pre> <code class="bash hljs">dub run topleaked -brelease-nobounds -- &lt;filename&gt; [&lt;options&gt;...]</code> </pre> <br><p>  Para no repetir la ejecuci√≥n de dub y el argumento del compilador brelease-nobounds, puede descargar las fuentes del <a href="https://github.com/SmorkalovG/topleaked" rel="nofollow">github</a> y recopilar el archivo ejecutable: </p><br><pre> <code class="bash hljs">dub build -brelease-nobounds</code> </pre> <br><p>  En la ra√≠z de la carpeta del proyecto aparecer√° topleaked. </p><br><h2 id="ispolzovanie">  Uso </h2><br><p>  Tomemos un programa simple de C ++ con una p√©rdida de memoria. </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;assert.h&gt; #include &lt;unistd.h&gt; class A { size_t val = 12345678910; virtual ~A(){} }; int main() { for (size_t i =0; i &lt; 1000000; i++) { new A(); } std::cout &lt;&lt; getpid() &lt;&lt; std::endl; sleep(200); }</span></span></span></span></code> </pre> <br><p>  Lo completamos a trav√©s de kill -6, luego obtenemos un volcado de memoria.  Ahora puede ejecutar topleaked y ver los resultados <br></p><pre> <code class="bash hljs">./toleaked -n10 leak.core</code> </pre> <br><p>  La opci√≥n -n es el tama√±o de la parte superior que necesitamos.  Por lo general, los valores entre 10 y 200 tienen sentido, dependiendo de la cantidad de "basura" que haya.  El formato de salida predeterminado es una l√≠nea por l√≠nea en forma legible por humanos. </p><br><pre> <code class="plaintext hljs">0x0000000000000000 : 1050347 0x0000000000000021 : 1000003 0x00000002dfdc1c3e : 1000000 0x0000558087922d90 : 1000000 0x0000000000000002 : 198 0x0000000000000001 : 180 0x00007f4247c6a000 : 164 0x0000000000000008 : 160 0x00007f4247c5c438 : 153 0xffffffffffffffff : 141</code> </pre> <br><p>  Es de poca utilidad, excepto que podemos ver el n√∫mero 0x2dfdc1c3e, que tambi√©n es 12345678910, que ocurre un mill√≥n de veces.  Esto ya podr√≠a ser suficiente, pero quiero m√°s.  Para ver los nombres de clase de los objetos filtrados, puede enviar el resultado a gdb simplemente redirigiendo la secuencia de salida est√°ndar a la entrada de gdb con un archivo de volcado abierto.  -ogdb: opci√≥n para cambiar el formato a gdb comprensible. </p><br><pre> <code class="plaintext hljs">$ ./topleaked -n10 -ogdb /home/core/leak.1002.core | gdb leak /home/core/leak.1002.core ...&lt;   gdb  &gt; #0 0x00007f424784e6f4 in __GI___nanosleep (requested_time=requested_time@entry=0x7ffcfffedb50, remaining=remaining@entry=0x7ffcfffedb50) at ../sysdeps/unix/sysv/linux/nanosleep.c:28 28 ../sysdeps/unix/sysv/linux/nanosleep.c: No such file or directory. (gdb) $1 = 1050347 (gdb) 0x0: Cannot access memory at address 0x0 (gdb) No symbol matches 0x0000000000000000. (gdb) $2 = 1000003 (gdb) 0x21: Cannot access memory at address 0x21 (gdb) No symbol matches 0x0000000000000021. (gdb) $3 = 1000000 (gdb) 0x2dfdc1c3e: Cannot access memory at address 0x2dfdc1c3e (gdb) No symbol matches 0x00000002dfdc1c3e. (gdb) $4 = 1000000 (gdb) 0x558087922d90 &lt;_ZTV1A+16&gt;: 0x87721bfa (gdb) vtable for A + 16 in section .data.rel.ro of /home/g.smorkalov/dlang/topleaked/leak (gdb) $5 = 198 (gdb) 0x2: Cannot access memory at address 0x2 (gdb) No symbol matches 0x0000000000000002. (gdb) $6 = 180 (gdb) 0x1: Cannot access memory at address 0x1 (gdb) No symbol matches 0x0000000000000001. (gdb) $7 = 164 (gdb) 0x7f4247c6a000: 0x47ae6000 (gdb) No symbol matches 0x00007f4247c6a000. (gdb) $8 = 160 (gdb) 0x8: Cannot access memory at address 0x8 (gdb) No symbol matches 0x0000000000000008. (gdb) $9 = 153 (gdb) 0x7f4247c5c438 &lt;_ZTVN10__cxxabiv120__si_class_type_infoE+16&gt;: 0x47b79660 (gdb) vtable for __cxxabiv1::__si_class_type_info + 16 in section .data.rel.ro of /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (gdb) $10 = 141 (gdb) 0xffffffffffffffff: Cannot access memory at address 0xffffffffffffffff (gdb) No symbol matches 0xffffffffffffffff. (gdb) quit</code> </pre> <br><p>  Leer no es muy simple, pero es posible.  Las l√≠neas de la forma $ 4 = 1,000,000 reflejan la posici√≥n en la parte superior y el n√∫mero de ocurrencias encontradas.  A continuaci√≥n se muestran los resultados de ejecutar x e s√≠mbolo de informaci√≥n para el valor.  Aqu√≠ podemos ver que vtable para A ocurre un mill√≥n de veces, lo que corresponde a un mill√≥n de objetos filtrados de la clase A. <br></p><p>  Para analizar parte del archivo (si es demasiado grande), se agregan las opciones de desplazamiento y l√≠mite, comenzando desde d√≥nde y cu√°ntos bytes leer. </p><br><h2 id="rezultat">  Resultado </h2><br><p>  La utilidad resultante es notablemente m√°s r√°pida que el script.  Todav√≠a tiene que esperar, pero no en la escala de una caminata para el t√©, sino unos segundos antes de que aparezca la parte superior en la pantalla.  Estoy absolutamente seguro de que el algoritmo se puede mejorar significativamente, y las operaciones pesadas de entrada y salida se pueden optimizar significativamente.  Pero esto es una cuesti√≥n de desarrollo futuro, ahora todo est√° funcionando bien. </p><br><p>  Gracias a la opci√≥n -ogdb y la redirecci√≥n en gdb, obtenemos inmediatamente nombres y valores, a veces incluso n√∫meros de l√≠nea, si tenemos la suerte de llegar a la funci√≥n. </p><br><p>  La consecuencia obvia, pero muy inesperada, de la soluci√≥n frontal fue multiplataforma.  S√≠, topleaked no conoce el orden de los bytes, pero dado que no analiza el formato del archivo, sino que simplemente lee el archivo byte por byte, puede usarse en Windows o en cualquier sistema con cualquier formato de volcado de memoria.  Solo se requiere que los datos est√©n alineados dentro del archivo. </p><br><h2 id="yazyk-d">  Lenguaje D </h2><br><p>  Me gustar√≠a se√±alar por separado la experiencia de desarrollar un programa de este tipo en D. La primera versi√≥n de trabajo se escribi√≥ en cuesti√≥n de minutos.  Debo decir que hasta ahora el algoritmo principal solo toma tres l√≠neas: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> all = input.sort; ValCount[] res = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ValCount[min(all.length, maxSize)]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> all.group.<span class="hljs-built_in"><span class="hljs-built_in">map</span></span>!((p) =&gt; ValCount(p[<span class="hljs-number"><span class="hljs-number">0</span></span>],p[<span class="hljs-number"><span class="hljs-number">1</span></span>])) .topNCopy!<span class="hljs-string"><span class="hljs-string">"a.count&gt;b.count"</span></span>(res, Yes.sortOutput);</code> </pre><br><p>  Todo gracias a los rangos diferidos y la presencia de algoritmos listos para usar sobre ellos en la biblioteca est√°ndar, como group y topN. </p><br><p>  M√°s tarde, el an√°lisis de los argumentos de la l√≠nea de comandos, el formato de la salida y todo lo que es detallado, pero tambi√©n escrito r√°pidamente, creci√≥ en la parte superior.  A menos que la lectura del archivo resultara de alguna manera extra√±a, fuera del estilo general. </p><br><p>  En la √∫ltima versi√≥n en este momento, el indicador --find apareci√≥ para la b√∫squeda habitual de una subcadena, que no est√° relacionada en absoluto con la frecuencia.  Debido a este problema, el c√≥digo ha aumentado notablemente de tama√±o, pero con altas posibilidades, la funci√≥n se eliminar√° y el c√≥digo volver√° a su estado simple original. </p><br><p>  En total, los costos de mano de obra son comparables a los lenguajes de scripting y mucho mejores en rendimiento.  Potencialmente, puede llevarlo al m√°ximo posible, ya que el mismo c√≥digo en C y D funcionar√° igual a la misma velocidad. </p><br><h2 id="pokazaniya-i-protivopokazaniya-k-primeneniyu">  Indicaciones y contraindicaciones de uso. </h2><br><ul><li>  Se necesita Topleaked para buscar fugas cuando solo hay un volcado de la memoria del proceso actual, pero no hay forma de reproducirlo bajo el desinfectante. </li><li>  Este no es otro valgrind y no pretende ser un an√°lisis din√°mico. </li><li>  Una excepci√≥n interesante al comentario anterior puede ser fugas temporales.  Es decir, la memoria se libera, pero demasiado tarde (cuando el servidor se detiene, por ejemplo).  Luego puede eliminar el volcado en el momento adecuado y analizar.  Valgrind o asan, trabajando en el momento en que finaliza el proceso, pueden empeorar esto. </li><li>  Solo modo de 64 bits.  El soporte para otros bits y el orden de bytes se pospone para el futuro. </li></ul><br><h2 id="izvestnye-problemy">  Problemas conocidos </h2><br><p>  Durante las pruebas, se utilizaron archivos de volcado que se recibieron enviando una se√±al al proceso.  Con tales archivos, todo funciona bien.  Cuando se elimina un volcado, el comando gcore escribe algunos otros encabezados ELF y se produce un desplazamiento por un n√∫mero indefinido de bytes.  Es decir, los valores de los punteros no est√°n alineados a 8 en el archivo, por lo que se obtienen resultados sin sentido.  Para la soluci√≥n, se introdujo la opci√≥n de desplazamiento: leer el archivo no primero, sino desplazado por bytes de desplazamiento (generalmente 4). <br>  Para resolver esto, planeo agregar la lectura del resultado de objdump -s de stdin.  Bueno, conecte libelf y anal√≠celo usted mismo, pero matar√° "multiplataforma", y stdout es m√°s flexible y m√°s cercano a la forma de Unix. </p><br><h4 id="ssylki">  Referencias </h4><br><p>  <a href="https://github.com/SmorkalovG/topleaked" rel="nofollow">Proyecto Github</a> <br>  <a href="https://dlang.org/download.html" rel="nofollow">Compiladores D</a> <br>  <a href="https://stackoverflow.com/questions/7439170/is-there-a-way-to-find-leaked-memory-using-a-core-file" rel="nofollow">Pregunta original sobre stackoverflow</a> </p></div></div><p>Source: <a href="https://habr.com/ru/post/485102/">https://habr.com/ru/post/485102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../485092/index.html">Validaci√≥n de datos en aplicaciones iOS</a></li>
<li><a href="../485094/index.html">Microservicios con Spring Boot. Parte 3. Crear un microservicio de conversi√≥n de moneda</a></li>
<li><a href="../485096/index.html">Cinco m√©todos para la ofuscaci√≥n de la base de datos</a></li>
<li><a href="../485098/index.html">¬øPuede el dise√±o afectar la velocidad de entrega?</a></li>
<li><a href="../485100/index.html">D√≥nde ir: los pr√≥ximos eventos gratuitos para desarrolladores en Mosc√∫ (30 de enero - 15 de febrero)</a></li>
<li><a href="../485104/index.html">Hacer una llave RFID universal para intercomunicadores</a></li>
<li><a href="../485108/index.html">Estad√≠sticas de especialistas certificados de PMI en Rusia el 10/01/2020</a></li>
<li><a href="../485110/index.html">Mi experiencia de trabajo remoto efectivo</a></li>
<li><a href="../485118/index.html">C√≥digo limpio de Robert Martin. Resumen ¬øC√≥mo escribir un c√≥digo claro y hermoso?</a></li>
<li><a href="../485120/index.html">Agregue una API JSON muy r√°pida a nuestra aplicaci√≥n.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>