<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐶 🕺🏾 🐲 Enregistreur de frappe sur Arduino 👋🏻 🚵🏼 🔣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Préface
 Il vaut la peine de dire que la portée de cet appareil n'est pas si grande. Pour le travail, c'est la surveillance, la surveillance du temps ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Enregistreur de frappe sur Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388335/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Préface</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il vaut la peine de dire que la portée de cet appareil n'est pas si grande. </font><font style="vertical-align: inherit;">Pour le travail, c'est la surveillance, la surveillance du temps de travail, la protection contre les fuites d'informations et, probablement, c'est tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la vie de tous les jours, cette chose peut faciliter la vie. </font><font style="vertical-align: inherit;">Par exemple, ils ont appuyé sur une certaine combinaison de touches - Arduino les a reconnus et ... a envoyé un signal pour allumer la bouilloire. </font><font style="vertical-align: inherit;">Si ce n'est pas une bouilloire, alors autre chose.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais encore, c'est un suivi banal (peut-être même caché) pour un employé, ce qui d'un point de vue moral n'est pas bon. </font><font style="vertical-align: inherit;">Mais néanmoins, le certificat légal donne le feu vert s'il est prévu dans le contrat de travail, si ce contrôle a lieu pendant les heures de travail et sur le lieu de travail, et si, bien sûr, le salarié est informé et coché. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, dans votre vie personnelle, vous êtes libre de faire ce que vous voulez, tant que cela concerne votre propriété. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout, nous sommes protégés légalement, maintenant je vais dire et montrer ce dont nous avons besoin et comment le rassembler pour obtenir un simple intercepteur de frappes du clavier.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commençons</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc besoin d'une douzaine de fils et de deux cartes: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Leonardo</font></font></a><br>
<br>
<img src="https://habrastorage.org/files/432/6e7/a66/4326e7a669b146bfb9c60b038712e663.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB Host Shield</font></font></a><br>
<br>
<img src="https://habrastorage.org/files/a8b/074/ec6/a8b074ec6b5a4003ad17e6905d199b5b.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pourquoi Arduino Leonardo? Parce qu'il est relativement bon marché et, contrairement à ses prédécesseurs, l'ATmega32u4 a un support intégré pour les connexions USB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le protocole USB définit deux types de périphériques: l'hôte (maître, serveur) et les périphériques (esclave, client). USB Host Shield gère et alimente les périphériques. Par exemple, lorsque vous connectez le clavier à un PC, le PC est l'hôte qui contrôle le client et le client, dans ce cas, est le clavier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et il y a pas mal de périphériques pris en charge. Les plus intéressants sont: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) les appareils HID: clavier, souris, joystick, etc. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) les contrôleurs de jeu</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) Téléphones et tablettes Android compatibles ADK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pour plus d'informations, rendez-vous sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site officiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, c'est le clavier. Il appartient à la classe des appareils HID. Le code HID du clavier est codé en 8 octets: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) 1 octet - chaque bit correspond à son propre modificateur (L Ctrl, R Ctrl, L Shift, R Shift, etc.). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) 2 octets - réservés et nous n'avons pas besoin, généralement il est nul. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) 3-8 octets - contiennent des codes de 6 clés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez en savoir plus à ce sujet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout, avec la théorie terminée, vous pouvez maintenant assembler le circuit. </font></font><br>
<br>
<img src="https://habrastorage.org/files/2fa/308/43a/2fa30843a2b74dc3b2a894cc64991ac4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À propos, un programme très pratique pour dessiner des diagrammes, dans lequel ce diagramme a été dessiné, est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, cela vaut la peine d'expliquer ce qui est quoi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Arduino Leonardo a une petite fonctionnalité en raison de laquelle nous ne pouvons pas simplement le connecter en haut: les connecteurs SPI sont situés sur l'ICSP (ces 6 connecteurs sont au milieu à droite) et pour cette raison, ils doivent être connectés aux connecteurs numériques USB Host Shield. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) Fil jaune: broche 4 MOSI (connectée à la broche 11 sur le blindage de l'hôte USB). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) Fil gris: broche 1 MISO (connectée à 12 broches sur le blindage de l'hôte USB). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) Fil vert: broche 3 SCK (connectée à la broche 13 sur le blindage de l'hôte USB). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous fournissons de l'énergie avec les cinq fils inférieurs et un violet: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) Réinitialiser pour réinitialiser </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) 3,3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V </font><font style="vertical-align: inherit;">à 3,3 </font><font style="vertical-align: inherit;">V 3) 5 V à 5 V </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4) GND à GND </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5) VIN à VIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6) Réinitialiser à D7 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous devons connecter les broches de contrôle:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) D7 à D7 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) D10 à D10 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est un minimum nécessaire pour le faire fonctionner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, il y a un circuit, maintenant nous devons le programmer d'une manière ou d'une autre et cela se fait en utilisant l'IDE Arduino. Il est entièrement gratuit et appartient au domaine public. Des exemples de programmes et de l'IDE lui-même peuvent être trouvés sur le site officiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour fonctionner avec USB Host Shield, nous avons besoin d'une bibliothèque supplémentaire ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code lui-même est aussi simple que possible:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;hidboot.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SD.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     .</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyboardOut</span></span></span><span class="hljs-class">
{</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>:<font></font>
    KeyReport _keyReport; <span class="hljs-comment"><span class="hljs-comment">//   8   .</span></span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_report</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;<font></font>
    <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>:
    <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> press(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> mod, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> key);
    <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> release(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> mod, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> key);<font></font>
};<font></font>
<font></font>
KeyboardOut keyboard_out;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     .</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> KeyboardOut::press(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> mod, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> key) {
  <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> i;<font></font>
  <font></font>
  _keyReport.modifiers |= mod;<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_keyReport.keys[<span class="hljs-number"><span class="hljs-number">0</span></span>] != key &amp;&amp; _keyReport.keys[<span class="hljs-number"><span class="hljs-number">1</span></span>] != key &amp;&amp; <font></font>
    _keyReport.keys[<span class="hljs-number"><span class="hljs-number">2</span></span>] != key &amp;&amp; _keyReport.keys[<span class="hljs-number"><span class="hljs-number">3</span></span>] != key &amp;&amp;<font></font>
    _keyReport.keys[<span class="hljs-number"><span class="hljs-number">4</span></span>] != key &amp;&amp; _keyReport.keys[<span class="hljs-number"><span class="hljs-number">5</span></span>] != key) {<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">6</span></span>; i++) {
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_keyReport.keys[i] == <span class="hljs-number"><span class="hljs-number">0x00</span></span>) {<font></font>
        _keyReport.keys[i] = key;<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == <span class="hljs-number"><span class="hljs-number">6</span></span>) {
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    }	<font></font>
  }<font></font>
  send_report();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     .</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> KeyboardOut::release(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> mod, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> key) {
  <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> i;<font></font>
  <font></font>
  _keyReport.modifiers &amp;= mod;<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">6</span></span>; i++) {
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> != key &amp;&amp; _keyReport.keys[i] == key) {<font></font>
      _keyReport.keys[i] = <span class="hljs-number"><span class="hljs-number">0x00</span></span>;<font></font>
    }<font></font>
  }<font></font>
  send_report();<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> KeyboardOut::send_report()<font></font>
{<font></font>
  HID_SendReport(<span class="hljs-number"><span class="hljs-number">2</span></span>, &amp;_keyReport, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(KeyReport));	<span class="hljs-comment"><span class="hljs-comment">//     .</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     USB Host Shield.</span></span>
<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KeyboardIn</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KeyboardReportParser<font></font>
{<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>:
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnKeyDown</span></span></span><span class="hljs-function">  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mod, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key)</span></span></span></span>;
    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnKeyUp</span></span></span><span class="hljs-function">  </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mod, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key)</span></span></span></span>;<font></font>
};<font></font>
<font></font>
KeyboardIn keyboard_in;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     USB Host Shield.</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> KeyboardIn::OnKeyDown(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> mod, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> key)<font></font>
{<font></font>
  keyboard_out.press(mod, key);<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> c = OemToAscii(mod, key);    <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  PrintHex&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>&gt;(key, <span class="hljs-number"><span class="hljs-number">0x80</span></span>);            <span class="hljs-comment"><span class="hljs-comment">//     </span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     USB Host Shield.</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> KeyboardIn::OnKeyUp(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> mod, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> key)<font></font>
{<font></font>
  keyboard_out.release(mod, key);<font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> c = OemToAscii(mod, key);<font></font>
  PrintHex&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>&gt;(key, <span class="hljs-number"><span class="hljs-number">0x80</span></span>);<font></font>
}<font></font>
<font></font>
USB     UsbHost;<font></font>
<font></font>
HIDBoot&lt;HID_PROTOCOL_KEYBOARD&gt;    HidKeyboard(&amp;UsbHost);<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{<font></font>
  UsbHost.Init();<font></font>
  <font></font>
  delay( <span class="hljs-number"><span class="hljs-number">200</span></span> );<font></font>
<font></font>
  HidKeyboard.SetReportParser(<span class="hljs-number"><span class="hljs-number">0</span></span>, (HIDReportParser*)&amp;keyboard_in);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">
</span></span>{<font></font>
  UsbHost.Task();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'à se connecter via USB Arduino à un PC, et le clavier à USB Host Shield, téléchargez le programme sur Arduino en utilisant l'IDE et c'est tout! </font><font style="vertical-align: inherit;">Key Catcher est prêt! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Résultats: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) Arduino offre de nombreuses fonctionnalités à son bas prix et une grande variété de modules et de capteurs. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) Cet appareil peut vous permettre de transformer votre clavier en panneau de commande, par exemple, un téléviseur, une bouilloire électrique, une lampe, vous n'avez qu'à acheter quelques modules.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr388335/">https://habr.com/ru/post/fr388335/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr388317/index.html">La bourse échange une ressource, des actions et des promesses boueuses: programme éducatif sur les produits dérivés</a></li>
<li><a href="../fr388319/index.html">Neonode AirBar transforme un écran d'ordinateur portable ou de moniteur PC ordinaire en écran tactile</a></li>
<li><a href="../fr388321/index.html">Comment Apple, Samsung, IBM et Intel utilisent la technologie verte</a></li>
<li><a href="../fr388325/index.html">Selon des rumeurs, Google s'associera à Ford pour créer des robots</a></li>
<li><a href="../fr388329/index.html">Ce que vous devez savoir sur l'Aftershokz Bluez2 mis à jour</a></li>
<li><a href="../fr388337/index.html">L'avenir est là: l'impression 3D dans l'architecture et la construction</a></li>
<li><a href="../fr388341/index.html">Une rencontre inattendue. Chapitre 1</a></li>
<li><a href="../fr388343/index.html">Ouvrez le projet client MQTT sur Delphi. Continuation</a></li>
<li><a href="../fr388345/index.html">L'évolution animale comme une série de percées technologiques</a></li>
<li><a href="../fr388347/index.html">Les Coréens ont découvert un remède simple contre la maladie d'Alzheimer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>