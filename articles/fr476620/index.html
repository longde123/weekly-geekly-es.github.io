<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕴🏿 🕰️ 👦 SP701 + PCAM-5C + 15 minutes + VITIS = Easy MIPI sur FPGA 💅🏽 🥡 🎻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Annotation 
 L'interface MIPI devient aujourd'hui une interface de plus en plus populaire pour connecter des caméras et des écrans. Pour cette raison,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SP701 + PCAM-5C + 15 minutes + VITIS = Easy MIPI sur FPGA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476620/"><h2>  Annotation </h2><br>  L'interface MIPI devient aujourd'hui une interface de plus en plus populaire pour connecter des caméras et des écrans.  Pour cette raison, de plus en plus de kits de débogage basés sur FPGA contiennent des connecteurs d'interface MIPI à bord - à la fois pour connecter des caméras et des écrans.  Afin de commencer à travailler avec de nouvelles technologies ou simplement pour voir à quoi cela ressemble, les développeurs essaient de trouver un guide approprié sur Internet, qui décrirait les nuances pertinentes du travail.  D'une part, le cas de test devrait simplement remonter dans le kit de débogage, et d'autre part, il devrait donner une compréhension assez simple et large de ce qui se passe dans ce cas de test. <br><br>  <b>Le but de l'article</b> est de montrer comment commencer à travailler avec l'interface MIPI en utilisant l'un des derniers débogages de Xilinx - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SP701</a> , une caméra avec une interface MIPI de Digilent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PCAM-5C</a> et l'environnement de développement (SDK) Vivado + VITIS de Xilinx <br><br><img src="https://habrastorage.org/webt/jy/-y/sa/jy-ysacn2v1otw1rtw8_029srlg.jpeg"><br><a name="habracut"></a><br><h2>  Liste des équipements </h2><br>  À partir de la première version de VITIS et Vivado 2019.2, Xilinx offre aux développeurs la possibilité de générer un scénario de test pour travailler avec l'interface MIPI sur la carte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SP701</a> .  Auparavant, le projet était disponible pour la carte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ZCU102</a> , cependant, étant donné que l'exemple nécessitait une caméra plutôt spécifique, nous n'avons pas eu la possibilité d'exécuter un projet de test.  Avec la sortie du budget <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SP701</a> , qui connecte également la caméra budget PCAM-5C, une telle opportunité est apparue. <br><br>  <i>PS0: le guide ne vous dira pas ce qu'est le MIPI, en quoi il consiste ou toute autre théorie qui peut être trouvée sur Internet.</i>  <i>Ici, nous allons nous concentrer sur la façon de générer un projet de test.</i>  <i>De plus, en utilisant ce projet, vous pouvez vous-même fixer les modules supplémentaires et le traitement vidéo spécifiés dans les termes de référence de votre projet.</i> <i><br></i>  <i>PS1: Nous ne déclamons pas, mais nous nous concentrons sur l'action.</i>  <i>Seulement des photos, seulement du hardcore.</i> <br><br>  Commençons. <br><br><h2>  Logiciels requis </h2><br>  Pour ce guide, nous aurons besoin de Vivado 2019.2 et VITIS, qui sont téléchargés à partir du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> .  VITIS contient Vivado, il n'est donc pas nécessaire de télécharger VITIS et Vivado, il suffit de télécharger et d'installer VITIS.  Vivado sera installé automatiquement. <br><br><img src="https://habrastorage.org/webt/ys/e0/yg/yse0ygvqxqpstb11di-cxb6zwck.png"><br><br><h3>  Étape 1: créer un projet Vivado </h3><br>  1. Lancez Vivado 2019.2 <br><br><img src="https://habrastorage.org/webt/yb/j2/62/ybj2620jr6viuslq5r6yktqj_10.png"><br><br>  2. Cliquez sur «Créer un projet» (1) :: Cliquez sur «Suivant» (2) <br><br><img src="https://habrastorage.org/webt/un/wa/xo/unwaxorjnotttje2h9jmd2qu4m4.jpeg"><br><br>  3. Spécifiez «Nom du projet» (1) :: Spécifiez le répertoire du projet (2) :: Cochez la case (3) :: Cliquez sur «Suivant» (4) <br><br><img src="https://habrastorage.org/webt/zr/qs/ve/zrqsvep1887deaweze6h1hhdwdi.png"><br><br>  4. Sélectionnez le type de projet (1) :: Cochez la case (2) :: Cliquez sur «Suivant» (3) <br><br><img src="https://habrastorage.org/webt/bd/hk/jp/bdhkjp0__31bxlpnqe9twrztraw.png"><br><br>  5. Allez dans l'onglet «Boards» (1) :: Recherchez et sélectionnez SP701 (2) :: Cliquez sur «Next» (3) <br><br><img src="https://habrastorage.org/webt/3c/qo/mj/3cqomjrq9depcimcrq6a11bsk2a.png"><br><br>  6. Cliquez sur «Terminer» (1) <br><br><img src="https://habrastorage.org/webt/pa/ng/sq/pangsqtcar54zr6sqdrfux1h1za.png"><br><br><h3>  Étape 2: installer les licences </h3><br>  Étant donné que nous utiliserons IP Core, qui nécessite des licences, nous devons les générer et les installer.  Le projet de test utilise IP pour connecter à la fois la caméra (MIPI CSI-Rx) et l'écran (MIPI DSI-Tx), pour lesquels Xilinx propose une licence d'essai pour une période de 120 jours. <br><br>  PS: Dans le projet de test, la sortie d'image est dupliquée sur l'interface HDMI, la présence d'un écran avec l'interface MIPI n'est pas nécessaire, mais une licence DSI-Tx est requise. <br><br>  7. Obtenez une licence pour CSI-Rx (connexion de caméra) en cliquant sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> et cliquez sur «Evaluate IP».  Suivez ensuite les instructions. <br><br><img src="https://habrastorage.org/webt/mg/ad/rv/mgadrvdqpju8xe8fq3u_edeh6s0.png"><br><br><img src="https://habrastorage.org/webt/fb/4c/ks/fb4cksdjtyujwg8pyynwk3q8j5s.png"><br><br>  8. Obtenez une licence pour DSI-Tx (connexion d'affichage) en cliquant sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> et cliquez sur «Evaluate IP».  Suivez ensuite les instructions. <br><br><img src="https://habrastorage.org/webt/sw/ws/fv/swwsfveazvgnrz3avl0dbmi3uf4.png"><br><br><img src="https://habrastorage.org/webt/bm/tz/tx/bmtztxtpr3_m1jjebv-6d8wti0s.png"><br><br>  9. Téléchargez les fichiers de licence. <br><br>  10. Dans la fenêtre Vivado, cliquez sur «Aide» (1) :: Sélectionnez «Gérer la licence» (2) <br><br><img src="https://habrastorage.org/webt/zb/cb/q4/zbcbq4ofrjedau9gknfsr_zfn34.jpeg"><br><br>  11. Dans le gestionnaire de licences, sélectionnez «Charger la licence» (1) :: Puis «Copier la licence» (2).  Sélectionnez les licences .lic téléchargées pour les cœurs IP CSI et DSI <br><br><img src="https://habrastorage.org/webt/z0/ar/od/z0aroddbnyffaxcia62cxot2jbq.png"><br><br>  12. Dans le gestionnaire de licence, sélectionnez «Afficher l'état de la licence» (1) :: Assurez-vous que les licences sont récupérées correctement (2) <br><br><img src="https://habrastorage.org/webt/fo/bk/m7/fobkm7suhdl9ywtea27c1cqrxda.jpeg"><br><br><h3>  Étape 3: créer un projet de test </h3><br>  13. Dans Vivado, cliquez sur «Créer une conception de bloc» (1) :: Cliquez sur «OK» (2) <br><br><img src="https://habrastorage.org/webt/4y/ho/nu/4yhonue7dwol1jcjhwfaisfvo-u.png"><br><br>  14. Dans le champ IP Integrator, cliquez sur "+" ou "ctrl + i" (1) :: Tapez "mipi" dans le champ "Search" (2) :: Double-cliquez sur "MIPI CSI-2 Rx Subsystem" (3) <br><br><img src="https://habrastorage.org/webt/v2/5l/zv/v25lzvkk07amh5fvgw2ssymhn6g.png"><br><br>  15. Faites un clic droit sur l'IP créée (1) :: Sélectionnez "Personnaliser le bloc" (2) <br><br><img src="https://habrastorage.org/webt/gd/l6/z7/gdl6z7ylzjvbowbwbcudqidsnqo.png"><br><br>  16. Allez dans l'onglet «Application Example Design» (1) :: Sélectionnez «SP701» (2) :: Cliquez sur «OK» (3) <br><br><img src="https://habrastorage.org/webt/sf/ja/yk/sfjaykzdosm3qj7rjhpbt9tc1de.jpeg"><br><br>  17. Faites un clic droit sur IP (1) :: Sélectionnez «Ouvrir l'exemple de conception» (2) <br><br><img src="https://habrastorage.org/webt/ur/4f/4s/ur4f4squw_y_qxy7fyduehwg_-i.png"><br><br>  18. Cliquez sur "OK" pour enregistrer les modifications du projet. <br><br><img src="https://habrastorage.org/webt/ac/fi/y5/acfiy5ssfelrkthxnrsqffkjweq.png"><br><br>  19. Spécifiez le répertoire dans lequel le projet de test sera situé (veuillez noter que pour les utilisateurs Windows, le chemin d'accès au dossier doit être aussi court que possible, sinon le chemin d'accès aux noyaux IP internes du projet peut dépasser 260 caractères, ce qui entraînera une erreur lors de la création du projet) (1) :: Installez la case à cocher (2) :: Cliquez sur "OK" (3) :: Cliquez sur "OK" (4) <br><br><img src="https://habrastorage.org/webt/ux/5i/gi/ux5igihyreb11hxjzwjxeuixsim.png"><br><br>  20. Le projet de test s'ouvrira dans une nouvelle fenêtre Vivado.  Attendez la création du projet.  Cela prendra quelques minutes. <br><br><img src="https://habrastorage.org/webt/fe/pf/kp/fepfkpgsalurmccfvw4xqogfpyy.png"><br><br>  21. Dans la fenêtre du projet de test, cliquez sur «Générer le flux binaire» (1) :: Cliquez sur «Oui» (2) <br><br><img src="https://habrastorage.org/webt/ra/oi/f_/raoif__toyxls8yjc-sug-wse1c.png"><br><br>  22. Sélectionnez le nombre préféré d'adresses IP synthétisées simultanément (1) :: Cliquez sur "OK" <br><br><img src="https://habrastorage.org/webt/rm/9k/t2/rm9kt26ndchqivorcjeyqhzkouy.png"><br><br>  23. Attendez que le fichier du firmware FPGA soit créé (bitstream) <br><br><h3>  Étape 4: configuration et connexion </h3><br>  24. Connectez la caméra PCAM-5C au connecteur MIPI CSI sur la carte SP701 <br><br>  25. Connectez le moniteur HDMI et / ou l'écran MIPI au SP701 <br><br>  26. Connectez le câble uUSB à la carte SP701 <br><br>  27. Mettez le SP701 sous tension <br><br>  28. Ouvrez une application de terminal pour le port série (par exemple, Tera Term).  Étant donné que trois ports COM différents sont reconnus dans Tera Term, nous avons ouvert trois sessions Tera Term différentes.  La vitesse UART à laquelle les messages seront diffusés a une vitesse de 9600 (vérifiez les paramètres IP uartlite dans le projet de test) <br><br><h3>  Lancement et débogage </h3><br>  29. Lancez VITIS depuis Vivado.  Cliquez sur "Outils" (1) :: Cliquez sur "Lancer VITIS" (2) <br><br><img src="https://habrastorage.org/webt/jp/8r/da/jp8rdadr1meqbmckmdwufzzcmpe.png"><br><br>  30. Spécifiez le répertoire de travail.  Il est situé dans le répertoire du projet de test «mipi_ex :: mipi_csi2_rx_subsystem_0_ex :: SW :: xmipi_app» (1) dans notre cas :: Cliquez sur «Launch» (2) <br><br><img src="https://habrastorage.org/webt/dc/gd/kr/dcgdkrxo_c9czkbrphibvukvd0a.png"><br><br>  31. Fermez l'onglet «Bienvenue» dans VITIS <br><br><img src="https://habrastorage.org/webt/pp/7x/b7/pp7xb7onwcp0kl84zxv4sco0zxg.png"><br><br>  32. Nous avons maintenant accès à la composante logicielle de notre projet, à savoir  programme pour le processeur logiciel MicroBlaze.  Examinez le code si vous le souhaitez. <br><br><img src="https://habrastorage.org/webt/sr/p-/3o/srp-3od0jpy-xaydz01jfb9_lsg.png"><br><br>  33. Cliquez sur la flèche à côté de l'icône de bogue (1) :: Cliquez sur «Configurations de débogage» (2) <br><br><img src="https://habrastorage.org/webt/uk/tz/ez/uktzez5nntynsxxhdsqoyruvcs8.png"><br><br>  34. Double-cliquez sur «Single Application Debug (GDB)» (1) :: Sélectionnez «Debugger Executable» (2) :: Spécifiez le fichier du firmware FPGA (.bit) créé par Vivado (3) :: Installez la case à cocher (4): : Cliquez sur «Déboguer» (5) <br><br><img src="https://habrastorage.org/webt/zk/8r/lb/zk8rlb7dz2ruyntrk605h4smc7e.jpeg"><br><br>  35. Appuyez sur le bouton de démarrage et suivez les instructions qui s'affichent sur le terminal Tera Term <br><br><img src="https://habrastorage.org/webt/kw/kw/1p/kwkw1pbm5bc2gha5xfquiohwyku.jpeg"><br><br>  36. C'est tout (n'oubliez pas de retirer le capuchon de protection de l'appareil photo;) <br><br><img src="https://habrastorage.org/webt/us/2j/j4/us2jj4158gwypwatvtwkixk8wr8.jpeg"><br><br><h2>  Conclusion </h2><br>  Comme nous l'avons vu, la création d'un projet de test avec une interface MIPI est assez simple.  Il n'a fallu que VITIS / Vivado et la disponibilité du matériel approprié (carte et caméra).  Presque tous les cœurs IP de Xilinx ont la capacité de générer un projet de test et dans cet article, nous avons montré comment procéder. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr476620/">https://habr.com/ru/post/fr476620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr476592/index.html">CLRium # 6: 9 jours restants</a></li>
<li><a href="../fr476594/index.html">Clients étrangers et légalisation des revenus d'un programmeur en Fédération de Russie. Que faut-il faire et combien cela coûtera-t-il?</a></li>
<li><a href="../fr476596/index.html">Siemens construit une usine d'électrolyse pour la production d'acier, propulsée par des éoliennes</a></li>
<li><a href="../fr476610/index.html">Un peu de théorie des processus d'affaires</a></li>
<li><a href="../fr476618/index.html">Comment j'ai conçu le kit Focus</a></li>
<li><a href="../fr476624/index.html">Pipelines de qualité dans le développement mobile, partie 1: Android</a></li>
<li><a href="../fr476626/index.html">PVS-Studio dans les nuages: GitLab CI / CD</a></li>
<li><a href="../fr476628/index.html">PVS-Studio passe aux nuages: GitLab CI / CD</a></li>
<li><a href="../fr476636/index.html">Optimisation de Firebird et Linux pour une base de données de 691 Go avec plus de 1000 utilisateurs</a></li>
<li><a href="../fr476640/index.html">Protection de Zimbra OSE contre la force brute et les attaques DoS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>