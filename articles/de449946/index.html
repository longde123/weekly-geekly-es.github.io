<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚û∞ üòó üëåüèΩ 1C Developer Tales: admin üìâ üë∞üèΩ üëàüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alle 1C-Entwickler interagieren auf die eine oder andere Weise eng mit IT-Services und direkt mit Systemadministratoren. Aber nicht immer verl√§uft die...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>1C Developer Tales: admin</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449946/">  Alle 1C-Entwickler interagieren auf die eine oder andere Weise eng mit IT-Services und direkt mit Systemadministratoren.  Aber nicht immer verl√§uft diese Interaktion reibungslos.  Ich m√∂chte Ihnen einige lustige Geschichten dar√ºber erz√§hlen. <br><a name="habracut"></a><br><h2>  Hochgeschwindigkeitskommunikationskanal </h2><br>  Die meisten unserer Kunden sind gro√üe Unternehmen mit ihren gro√üen IT-Abteilungen.  F√ºr Sicherungskopien von Infobasen sind in der Regel die Spezialisten des Kunden verantwortlich.  Es gibt jedoch relativ kleine Organisationen.  Speziell f√ºr sie haben wir einen Service, nach dem wir uns um alle Probleme im Zusammenhang mit der Sicherung aller 1C k√ºmmern.  √úber ein solches Unternehmen wird in dieser Geschichte diskutiert. <br><br>  Ein neuer Client unterst√ºtzte 1C, und der Vertrag enthielt unter anderem eine Klausel, dass wir f√ºr die Sicherungen verantwortlich waren, obwohl sie einen eigenen Systemadministrator hatten.  Die Client-Server-Datenbank als DBMS - MS SQL.  Eine ziemlich normale Situation, aber dennoch gab es eine Einschr√§nkung: Die Hauptbasis war ziemlich gro√ü, aber gleichzeitig war der monatliche Anstieg sehr gering.  Das hei√üt, die Datenbank enthielt viele historische Daten.  Angesichts dieser Besonderheit habe ich Backup-Wartungspl√§ne wie folgt erstellt: Am ersten Samstag eines jeden Monats wurde ein vollst√§ndiges Backup erstellt, es war ziemlich gewichtig, dann wurde jede Nacht eine Differenzkopie erstellt - eine relativ kleine Menge und jede Stunde eine Kopie des Transaktionsprotokolls.  Dar√ºber hinaus wurden vollst√§ndige und differenzielle Kopien, nicht nur, dass sie in eine Netzwerkressource kopiert wurden, zus√§tzlich auf unseren FTP-Server hochgeladen.  Dies ist eine zwingende Voraussetzung f√ºr die Bereitstellung dieses Dienstes. <br><br>  All dies wurde erfolgreich konfiguriert, in Betrieb genommen und funktionierte im Allgemeinen einwandfrei. <br><br>  Einige Monate sp√§ter wechselte der Systemadministrator in dieser Organisation.  Der neue Systemadministrator begann schrittweise mit dem Wiederaufbau der IT-Infrastruktur des Unternehmens gem√§√ü den modernen Trends.  Insbesondere erschien Virtualisierung, Festplattenregale, Zugriff wurde √ºberall geschlossen und alles usw., was sich im allgemeinen Fall nat√ºrlich nur freuen kann.  Aber es lief nicht immer reibungslos mit ihm, oft gab es Probleme mit der Leistung von 1C, was zu Meinungsverschiedenheiten und Missverst√§ndnissen mit unserer Unterst√ºtzung f√ºhrte.  Es sollte auch beachtet werden, dass sich unsere Beziehungen zu ihm im Allgemeinen ziemlich kalt und etwas angespannt entwickelten, was den Spannungsgrad nur im Falle von Problemen erh√∂hte. <br><br>  Aber eines Morgens stellte sich heraus, dass der Server dieses Clients nicht verf√ºgbar war.  Ich habe den Systemadministrator angerufen, um herauszufinden, was passiert ist, und habe Folgendes erhalten: "Unser Server ist abgest√ºrzt, wir arbeiten daran, es liegt nicht an Ihnen."  Nun, das funktioniert.  Die Situation ist also unter Kontrolle.  Nach dem Mittagessen rufe ich mit der Stimme des Administrators wieder zur√ºck, anstatt mich zu √§rgern, f√ºhle ich mich bereits m√ºde und apathisch.  Versuchen Sie zu kl√§ren, was passiert ist, und k√∂nnen wir irgendwie helfen?  Das Gespr√§ch ergab Folgendes: <br><br>  Er verlegte den Server mit einem gerade zusammengestellten √úberfall auf ein neues Speichersystem.  Aber etwas ging schief und nach ein paar Tagen brach dieser √úberfall sicher zusammen.  Entweder ist der Controller durchgebrannt oder es ist etwas mit den Festplatten passiert, ich erinnere mich nicht genau, aber alle Informationen gingen unwiederbringlich verloren.  Die Hauptsache war, dass sich die Netzwerkressource mit Backups, die sich auch w√§hrend einer Migration befanden, auf demselben Festplattenarray befand.  Das hei√üt, sowohl die produktive Basis selbst als auch alle ihre Backups gingen verloren.  Und was jetzt zu tun ist, ist nicht klar. <br><br>  Ruhig, sage ich.  Wir haben Ihre Nachtsicherung.  Die Antwort ist Stille, unter der ich verstehe, dass ich gerade das Leben eines Menschen gerettet habe.  Wir beginnen zu diskutieren, wie diese Kopie auf einen neuen, gerade bereitgestellten Server √ºbertragen werden kann.  Aber hier trat ein Problem auf. <br><br>  Erinnern Sie sich, ich sagte, dass das vollst√§ndige Backup ziemlich gro√ü war?  Ich habe es aus einem Grund einmal im Monat samstags gemacht.  Tatsache ist, dass das Unternehmen ein kleines Werk war, das sich weit au√üerhalb der Stadt befand und das Internet, das sie hatten, sehr mittelm√§√üig war.  Am Montagmorgen, dh √ºber das Wochenende, hatte diese Kopie mit halbem Kummer Zeit, sie auf unseren FTP-Server hochzuladen.  Aber es gab keine M√∂glichkeit, ein oder zwei Tage zu warten, bis es in die entgegengesetzte Richtung geladen wurde.  Nach mehreren erfolglosen Versuchen, die Datei zu ziehen, holte der Administrator die direkte Festplatte vom neuen Server heraus, fand irgendwo ein Auto mit einem Fahrer und eilte schnell zu unserem B√ºro, da wir uns immer noch in derselben Stadt befinden. <br><br>  W√§hrend wir im Serverraum standen und darauf warteten, dass die Dateien kopiert wurden, trafen wir uns sozusagen ‚Äûlive‚Äú, tranken eine Tasse Kaffee und unterhielten uns in einer informellen Umgebung.  Ich sympathisierte mit seiner Trauer und schickte sie mit einer ganzen Reihe von Backups zur√ºck, um die gestoppte Arbeit des Unternehmens wiederherzustellen. <br><br>  Anschlie√üend wurden alle unsere Antr√§ge an die IT-Abteilung sehr schnell gel√∂st und es gab keine Meinungsverschiedenheiten mehr. <br><br><h2>  Wenden Sie sich an Ihren Systemadministrator </h2><br>  Einmal konnte ich mit einem einzelnen Client 1C f√ºr eine sehr lange Zeit nicht f√ºr den Webzugriff √ºber IIS ver√∂ffentlichen.  Es scheint eine gew√∂hnliche Aufgabe zu sein, aber hier ist es nicht aus dem Weg gegangen.  Lokale Systemadministratoren haben eine Verbindung hergestellt und verschiedene Einstellungen und Konfigurationsdateien ausprobiert.  1C im Web wollte normalerweise in keinem arbeiten.  Irgendetwas stimmte nicht mit den Sicherheitsrichtlinien f√ºr Dom√§nen oder mit einer hoch entwickelten lokalen Firewall oder was zum Teufel.  Bei der N-ten Iteration l√∂scht der Administrator einen Link zu mir mit den Worten: <br><br>  - Versuchen Sie es erneut mit dieser Anweisung.  Dort ist alles ziemlich detailliert.  Wenn es nicht funktioniert, schreiben Sie an den Autor dieser Website. Vielleicht hilft er Ihnen dabei. <br>  "Nein", sage ich, "es wird nicht helfen." <br>  - Warum? <br>  - Ich bin der Autor dieser Seite ... ( <br><br>  Infolgedessen starteten sie Apache ohne Probleme.  IIS konnte nicht gewinnen. <br><br><h2>  Tiefer </h2><br>  Wir hatten einen Kunden - ein kleines Produktionsunternehmen.  Sie hatten einen Server, einen so eigenartigen ‚ÄûKlassiker‚Äú 3 in 1: Terminalserver + Anwendungsserver + Datenbankserver.  Sie arbeiteten in einigen Branchenkonfigurationen, die auf Softstartern basierten, es gab ungef√§hr 15 bis 20 Benutzer im System, und die Systemleistung war im Prinzip f√ºr jeden geeignet. <br><br>  Die Zeit verging, alles funktionierte mehr oder weniger stabil.  Aber Europa verh√§ngte Sanktionen gegen Russland, wodurch die Russen anfingen, haupts√§chlich einheimische Produkte zu kaufen, und die Dinge bei dieser Firma gingen bergauf.  Die Anzahl der Benutzer ist auf 50-60 Personen angewachsen, eine neue Niederlassung wurde er√∂ffnet, ebenso wie der Workflow.  Und jetzt hat der aktuelle Server aufgeh√∂rt, mit der stark erh√∂hten Last fertig zu werden, und 1C begann, wie sie sagen, "langsamer zu werden".  Zu Sto√üzeiten wurden Dokumente mehrere Minuten lang aufbewahrt, Blockierungsfehler wurden niedergeschlagen, Formulare wurden lange ge√∂ffnet, und die ganze Reihe anderer damit verbundener Dienste.  Der lokale Systemadministrator wies alle Probleme zur√ºck und sagte: "Dies ist Ihr 1C, Sie m√ºssen es herausfinden."  Wir haben wiederholt vorgeschlagen, eine Leistungspr√ºfung des Systems durchzuf√ºhren, die jedoch die Pr√ºfung selbst nicht erreicht hat.  Der Client bat lediglich um Empfehlungen zur Fehlerbehebung. <br><br>  Nun, ich habe mich hingesetzt und einen ziemlich umfangreichen Brief geschrieben, in dem es hei√üt, dass es notwendig ist, die Rollen des Terminalservers und des Anwendungsservers vom DBMS zu trennen (was wir im Prinzip bereits wiederholt gesagt haben).  Ich schrieb √ºber DFSS auf Terminalservern, √ºber Shared Memory, warf Links zu autorisierenden Quellen und bot sogar einige Hardwareoptionen an.  Dieser Brief erreichte die Befugnisse des Unternehmens, ging mit den ‚ÄûExecute‚Äú -Resolutionen an die IT-Abteilung zur√ºck und das Eis brach im Allgemeinen. <br><br>  Nach einiger Zeit sendet mir der Administrator die IP-Adresse des neuen Servers und die Anmeldeinformationen.  Er sagt, dass MS SQL und die Komponenten des 1C-Servers dort bereitgestellt werden und Sie die Datenbanken √ºbertragen m√ºssen, aber bisher nur auf den DBMS-Server, da es einige Probleme mit den 1C-Schl√ºsseln gab. <br><br>  In der Tat, alle Dienste kamen herein, der Server ist nicht sehr leistungsf√§hig, okay, ich denke, es ist besser als nichts.  Ich werde die Datenbanken bisher √ºbertragen, um den aktuellen Server zumindest irgendwie zu entlasten.  In der ausgehandelten Zeit f√ºhrte er alle √úbertragungen durch, aber die Situation √§nderte sich nicht - trotz der gleichen Leistungsprobleme.  Seltsam nat√ºrlich, nun, lassen Sie uns die Basen im 1C-Cluster registrieren, wir werden sehen. <br><br>  Es dauert mehrere Tage, die Schl√ºssel wurden nicht √ºbertragen.  Ich interessiere mich f√ºr das Problem, dort scheint alles einfach zu sein - ich habe es von einem Server entfernt, in einen anderen gesteckt, den Treiber installiert und es ist fertig.  Der Administrator antwortet und sagt etwas √ºber die Portweiterleitung, einen virtuellen Server und vieles mehr. <br><br>  Hmm ... ein virtueller Server?  Es scheint, dass es nie eine Virtualisierung gegeben hat, und sie waren es nicht ... Ich erinnere mich an ein ziemlich bekanntes Problem mit der Unf√§higkeit, den 1C-Serverschl√ºssel an die virtuelle Maschine unter Hyper-V in Windows Server 2008 weiterzuleiten. Und hier beginnen sich einige Verd√§chtigungen aufzubauen ... <br><br>  Ich √∂ffne den Server-Manager - Rollen - eine neue Rolle ist erschienen - Hyper-V.  Ich gehe zum Hyper-V-Manager, sehe eine virtuelle Maschine, verbinde mich ... und wirklich ... unseren neuen Datenbankserver ... <br><br>  Nun, was?  Die Anweisungen der Beh√∂rden und meine Empfehlungen werden erf√ºllt, die Rollen werden getrennt.  Die Aufgabe kann geschlossen werden. <br><br>  Nach einiger Zeit passierte nun die Krise, der neue Zweig musste geschlossen werden, die Last nahm ab, die Systemleistung wurde mehr oder weniger ertr√§glich. <br><br>  Nat√ºrlich konnten sie den Serverschl√ºssel nicht an die virtuelle Maschine weiterleiten.  Infolgedessen war alles so wie es war und blieb √ºbrig: der Terminalserver + 1C-Cluster auf der physischen Maschine, der Datenbankserver an derselben Stelle in der virtuellen. <br><br>  Und okay, w√§re es eine Art Sharashkin-B√ºro?  Also nein.  Ein bekanntes Unternehmen, dessen Produkte Sie wahrscheinlich kennen und in den entsprechenden Abteilungen aller Arten von B√§ndern und Auchanov gesehen haben. <br><br><h2>  Festplatten-Urlaubsplan </h2><br>  Eine gro√üe Holdinggesellschaft mit ehrgeizigen Pl√§nen <s>, die Welt zu √ºbernehmen,</s> kaufte erneut eine kleine Gesellschaft mit dem Ziel, sie in ihre Megakonzern einzubeziehen.  In allen Abteilungen dieser Holding arbeiten Benutzer in ihren Datenbanken, jedoch mit einer identischen Konfiguration.  Und so haben wir ein kleines Projekt gestartet, um eine neue Einheit in dieses System aufzunehmen. <br><br>  Zun√§chst m√ºssen Kampf- und Testbasen eingesetzt werden.  Der Entwickler hat die Daten f√ºr die Verbindung erhalten, meldet sich am Server an, sieht das installierte MS SQL, Server 1C, sieht 2 logische Laufwerke: ein 250-Gigabyte-C-Laufwerk und ein 1-Terabyte-D-Laufwerk.  Nun, "C" ist ein System, "D" f√ºr Daten, der Entwickler entscheidet logisch und stellt alle Datenbanken dort bereit.  Ich habe sogar Wartungspl√§ne erstellt, einschlie√ülich Backups, nur f√ºr den Fall (obwohl wir nicht daf√ºr verantwortlich sind).  Echte Backups haben hier auf dem "D" Gestalt angenommen.  In Zukunft war geplant, die Konfiguration bereits auf einer separaten Netzwerkressource vorzunehmen. <br><br>  Das Projekt wurde gestartet, Berater f√ºhrten Schulungen zur Arbeit mit dem neuen System durch, Reste wurden √ºbertragen, einige kleine Punktverbesserungen wurden vorgenommen und Benutzer begannen bereits mit der Arbeit in der neuen Informationsbasis. <br><br>  Alles lief gut, bis eines Morgens am Montag festgestellt wurde, dass das Datenbanklaufwerk verschwunden war.  Es gibt einfach kein "D" auf dem Server und das wars. <br><br>  Weitere Untersuchungen ergaben Folgendes: Tats√§chlich war dieser ‚ÄûServer‚Äú der funktionierende Computer des lokalen Systemadministrators.  Richtig, das Server-Betriebssystem war noch darauf.  Ein pers√∂nliches USB-Laufwerk dieses Administrators wurde in den Server eingelegt.  Und der Administrator fuhr in den Urlaub und nahm seine eigene Schraube mit, um unterwegs Filme darauf zu pumpen. <br><br>  Gott sei Dank gelang es ihm nicht, die Datenbankdateien zu l√∂schen und die funktionierende Datenbank wiederherzustellen. <br><br>  Es ist bemerkenswert, dass im Allgemeinen alle mit der Leistung des auf dem USB-Laufwerk befindlichen Systems zufrieden waren.  Niemand beschwerte sich √ºber eine unbefriedigende Arbeit von 1C.  Es war bereits sp√§ter, als das Megaprojekt in der Holding begann, alle Informationsdatenbanken auf eine einzige zentralisierte Plattform mit Superservern, Speicherplatz f√ºr mehr als eine Million Rubel, hoch entwickelten Hypervisoren und unertr√§glichen 1C-Bremsen in allen Branchen zu √ºbertragen. <br><br>  Aber das ist eine ganz andere Geschichte ... <br><br><h2>  PS Siehe auch: </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">1C Developer Tales: Epicafe</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de449946/">https://habr.com/ru/post/de449946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de449936/index.html">Warum ist es schwierig, in einem multinationalen Team zu arbeiten?</a></li>
<li><a href="../de449938/index.html">Entwickler vs. Business</a></li>
<li><a href="../de449940/index.html">So dr√ºcken Sie 16 GB Speicher auf ein Motherboard, das diese Menge nicht unterst√ºtzt</a></li>
<li><a href="../de449942/index.html">Wie testen wir ein Feature von TK bis zur Postproduktion und pflegen freundschaftliche Beziehungen innerhalb des Teams?</a></li>
<li><a href="../de449944/index.html">Docker: Schlechte Tipps</a></li>
<li><a href="../de449948/index.html">JavaScript: 7 n√ºtzliche Kleinigkeiten</a></li>
<li><a href="../de449952/index.html">Konfigurieren der kontinuierlichen Lieferung auf gitlab.com</a></li>
<li><a href="../de449954/index.html">Installieren Sie Zimbra Open-Source Edition unter CentOS 7</a></li>
<li><a href="../de449956/index.html">AI @ MIPT: Big Data f√ºr mathematische Modelle des menschlichen Genoms</a></li>
<li><a href="../de449960/index.html">Inspirationsquellen bei der Entwicklung f√ºr UDB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>