<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ†Ô∏è üíü üêç JMeter - Schweizer Pr√ºfmesser (Teil 2) üë∫ üëß ü§≤üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute werde ich Ihnen erz√§hlen, wie wir mit Hilfe von JMeter den Prozess des Zwischenspeicherns von Produktseiten eingerichtet, den Betrieb einer mobi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JMeter - Schweizer Pr√ºfmesser (Teil 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463443/">  Heute werde ich Ihnen erz√§hlen, wie wir mit Hilfe von JMeter den Prozess des Zwischenspeicherns von Produktseiten eingerichtet, den Betrieb einer mobilen Anwendung ohne die Anwendung selbst getestet und 2.000 Benutzer im System ohne Zugriff auf die Datenbank erstellt haben. <br><br>  Wer nicht wei√ü, was hier vor sich geht, liest den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Teil des Artikels.</a> Darin erz√§hlte ich, wie JMeter uns geholfen hat, das Problem mit dem Fall der Website bei einigen Benutzern zu ‚Äûfangen‚Äú. <br><a name="habracut"></a><br><h2>  So k√∂nnen Sie schnell ein paar tausend Produktseiten zwischenspeichern </h2><br>  Unser anderer Kunde ist ein italienisches Unternehmen, das Ger√§te f√ºr Innen-, Au√üen- und dekorative Beleuchtung herstellt. <br><br><img src="https://habrastorage.org/webt/xx/q1/q9/xxq1q96rdlara9p8zag2ig_h2lu.png" alt="Screenshot der IPad-App"><br>  <font color="#999999"><i>Die Ausstattung unserer Kunden beleuchtet die Meisterwerke der Weltmalerei, Architekturdenkm√§ler, Denkm√§ler, Geb√§ude von Gesch√§ftszentren und Flugh√§fen</i></font> <br><br>  Wir haben die Seite f√ºr dieses Unternehmen auf Kentico entwickelt.  Es pr√§sentiert alle Materialien und Modelle von Beleuchtungsger√§ten - 20.000 Exemplare.  Und jeder hat eine eigene Seite. <br><br>  Nach der Ver√∂ffentlichung der Website haben wir eine unangenehme Funktion von Kentico entdeckt: Es gibt kein Tool zum automatischen Laden von Mediendateien in den Cache.  Nach dem Aktualisieren und Neustarten der Site (was regelm√§√üig geschieht) wird der Cache zur√ºckgesetzt und die meisten Seiten werden 10 Sekunden lang ge√∂ffnet.  Nicht jeder Benutzer ist bereit, so lange zu warten. <br><br>  Wir haben zwei Optionen zum Laden von Mediendateien in den Cache gesehen.  Erstens: Es ist eine lange Zeit, die Website manuell √ºber einen Browser zu durchsuchen.  Zweitens: ein Skript zu schreiben, das dies f√ºr uns erledigt - es passt! <br><br>  Wir haben uns f√ºr JMeter entschieden: Wir haben ihm nur die vollst√§ndige Sitemap zugef√ºhrt, er ist darauf gelaufen und hat die Mediendateien an den Cache gesendet. <br><br>  Es war eine einfache L√∂sung, aber nicht sehr optimal.  Das Skript dauerte sechs (!!!) Stunden.  Ein schnellerer Weg wurde ben√∂tigt. <br><br>  Nachdem wir uns ein wenig mit dem Thema befasst hatten, entschieden wir uns f√ºr Regexps.  JMeter kann vom Server integrierte Ressourcen f√ºr bestimmte Masken vom Server anfordern.  Das haben wir ausgenutzt.  Nachdem wir beseitigt haben, was sich nicht auf unserem Server befindet und nicht in den Cache geladen werden muss (Bilder, Schriftarten, Stile usw. von Drittanbietern), haben wir die Zeit, die das Skript ben√∂tigt, um die Seiten zu durchlaufen, auf zwei Stunden reduziert. <br><img src="https://habrastorage.org/webt/df/25/0e/df250egkgmk3uozctdqxm77q6xm.png"><br>  <font color="#999999"><i>Dies sollte wie eine HTTP-Anforderung in JMeter aussehen, um nur einen bestimmten Asset-Typ zu laden</i></font> <br><br>  Das ist aber zu lang: Die F√ºllung beginnt um 9:00 Uhr in Tscheljabinsk und dauert eine Stunde, dann werden weitere zwei Stunden f√ºr das Skript aufgewendet, sodass wir um 12:00 Uhr fertig sind.  In Italien ist es 08:00 Uhr, und einige Anwohner beginnen bereits um 6-7 Uhr morgens mit der Arbeit.  Die Seite ist langsam, Beschwerden str√∂men ... Wir m√ºssen weiter optimieren! <br><br>  Die Entscheidung fiel, als wir feststellten, dass auf allen 20.000 Produktseiten fast dieselben Bilder verwendet wurden.  Wir haben eine Analyse durchgef√ºhrt und festgestellt, dass es ausreicht, nur 30% der zuf√§lligen Seiten (mit allen integrierten Ressourcen) vollst√§ndig herunterzuladen. Der Rest kann ohne Laden von Mediendateien ausgef√ºhrt werden.  Daher f√§llt die √ºberwiegende Mehrheit der Materialien - Bilder, Schriftarten, Skripte und Stile f√ºr Produktseiten - in den Cache.  Wenn ein Benutzer einen von ihnen kontaktiert, erfordert das Herunterladen vom Server nur einen kleinen Teil des Inhalts und dauert nicht l√§nger als 1-2 Sekunden. <br><br><img src="https://habrastorage.org/webt/zm/ug/_o/zmug_ovryd349t3177cyuueac0m.png" alt="Wir randomisieren das JMeter-Skript mithilfe von Parametern"><br>  <font color="#999999"><i>Durch Anfordern einer zuf√§lligen Seitenzahl aus der Tabelle "Benutzerdefinierte Variablen" erhalten wir jedes Mal eine zuf√§llige Seite aus der Liste</i></font> <br><br>  Mit der beschriebenen Methode haben wir eine Site erhalten, die in 90% der F√§lle schnell funktioniert.  Ja, in einem von zehn F√§llen dauerte es bis zu 30 Sekunden, bis die Seite geladen war, in den anderen neun flog alles.  Und das in nur 15 bis 30 Minuten. <br><br>  Jetzt werden solche Tricks nicht mehr ben√∂tigt - die Entwickler haben das Caching-System selbst optimiert.  Aber zu dieser Zeit war diese Entscheidung eine echte Rettung, und JMeter erwies sich auch nach dem Loslassen und Gie√üen als sehr n√ºtzliches Werkzeug. <br><br><h2>  So erstellen Sie 2000 Benutzer der Anwendung, wenn Sie nur ihre E-Mail-Adresse haben und zwei Stunden arbeiten m√ºssen </h2><br>  Der dritte Kunde, √ºber den ich sprechen werde, ist ein Unternehmen, das medizinische Ger√§te entwickelt, herstellt und verkauft: von einfachen Skalpellen √ºber Laserschneider bis hin zu komplexen Bohrern mit eingebauten Kameras.  Ihre Manager gehen in Kliniken, kommunizieren mit Chirurgen und erz√§hlen ihnen von ihren Produkten.  Zu diesem Zweck haben sie eine spezielle Anwendung f√ºr das iPad: Die Daten des Arztes und eine Liste der Tools, die ihn interessieren, werden in das iPad eingegeben.  Sp√§ter wird ein Link zu einer pers√∂nlichen Seite mit einer Liste all dieser Tools, detaillierten Beschreibungen und Merkmalen an die E-Mail des Arztes gesendet.  Diese Seiten f√ºr Chirurgen haben wir entwickelt.  Die Bewerbung und der E-Mail-Newsletter wurden von einem anderen Unternehmen erstellt. <br><br>  Eine der Aufgaben von JMeter in diesem Projekt besteht darin, das System zum Erstellen verschiedener Versionen solcher Seiten zu testen, obwohl wir nur ein Backend hatten.  Wir haben ein Skript geschrieben, mit dem mithilfe eines Zufallszahlengenerators Seiten verschiedener Typen erstellt und zur √úberpr√ºfung an unsere Arbeits-E-Mails gesendet werden.  Alles ist einfach.  Und ich w√ºrde diesen Kunden im Artikel nicht einmal erw√§hnen, wenn nicht f√ºr einen Fall. <br><br>  Einige Tage vor dem Start rief mich mein Manager an und bat mich, 2000 Benutzer f√ºr die Anwendung zu erstellen.  Die Schwierigkeit bestand darin, dass wir weder auf den Live-Server noch auf die Datenbank zugreifen konnten.  Wir mussten 2.000 Benutzer nur √ºber das CMS erstellen (in diesem Fall √ºber Umbraco).  Gleichzeitig sollte jeder Benutzer nach der Registrierung einen Brief vom ungef√§hr folgenden Typ erhalten: <br><br><img src="https://habrastorage.org/webt/ae/gw/xx/aegwxxnxnhu_w0q34wz8nerttb0.png" alt="Brief nach der Registrierung"><br>  <font color="#999999"><i>Nach Erhalt einer solchen E-Mail installiert der Benutzer die Anwendung und √§ndert das Standardkennwort in sein eigenes</i></font> <br><br>  Um einen Benutzer zu registrieren, sind f√ºnf Felder erforderlich: <br><br><ul><li>  E-Mail </li><li>  Name </li><li>  Nachname; </li><li>  Login; </li><li>  Passwort </li></ul><br>  Ich hatte nur zwei Stunden Zeit, um die Aufgabe zu erledigen.  Noch einmal: 2000 Benutzer, jeweils f√ºnf Felder, zwei Stunden ... Daten vom Manager kamen in folgender Form: <br><br><img src="https://habrastorage.org/webt/bx/8s/_n/bx8s_nesrxxftxe1uty-wnsduty.png" alt="Nicht das am besten lesbare Datenformat, nur eine Liste von E-Mails in Textform"><br><br>  Wenn ich ein Entwickler und kein QS-Spezialist w√§re, w√ºrde ich ein Skript schreiben, zum Beispiel in Perl: Er w√ºrde diese Daten analysieren und schnell alles zerstreuen.  Aber ich habe einen anderen Weg gew√§hlt und vielleicht das ideale Werkzeug f√ºr eine schnelle Datenorganisation verwendet - MS Excel.  Tabellenkalkulationen retten die Welt! <br><br>  Mit Hilfe einfacher Manipulationen beim Ersetzen von Daten, Abschneiden von √ºbersch√ºssigen und anderen Tricks habe ich eine Datei mit ~ 10.000 Zeilen in der folgenden Form erstellt: <br><br>  login1 |  john.smith <br>  login2 |  Doktor <br>  ... <br>  name1 |  John <br>  ... <br><br>  Ich habe mich nicht viel mit Passw√∂rtern besch√§ftigt - ich habe gerade PasswordNumber1 geschrieben und diese Spalte in Excel auf alle 2000 Benutzer "erweitert".  Dies spielt keine Rolle, da es nur f√ºr den ersten Eintrag verwendet wurde.  Ja, und ich habe die allgemeine Liste der E-Mails nicht alphabetisch sortiert, was bedeutet, dass die Wahrscheinlichkeit einer zuf√§lligen Kennwortsch√§tzung minimiert wurde. <br><br>  Ich f√ºtterte JMeter mit dieser Datei (√ºber die Zwischenablage), lehnte mich in meinem Stuhl zur√ºck und beobachtete mit Vergn√ºgen, wie Benutzer erstellt wurden.  Der gesamte Prozess der Datenverarbeitung und Erstellung neuer Benutzer dauerte 1 Stunde 45 Minuten - sogar noch Zeit f√ºr Kaffee! <br><br>  <b>Fazit:</b> JMeter erwies sich als praktisches Tool zum automatisierten Testen des Backends mobiler Anwendungen und pl√∂tzlich auch zur Automatisierung nicht standardisierter Aufgaben - wie dieser mit einer Reihe von Benutzern und einem Minimum an Informationen √ºber diese. <br><br>  Im Allgemeinen kann JMeter f√ºr eine Vielzahl von Aufgaben verwendet werden (und wurde von mir pers√∂nlich verwendet).  Zum Beispiel f√ºr: <br><br><ul><li>  Optimierungsanalyse: Lasttests durchf√ºhren, Korrekturen f√ºr die Rollenoptimierung durchf√ºhren, Tests erneut durchf√ºhren, Ergebnisse vergleichen; </li><li>  Abfragesicherheitstest: Schreiben Sie ein Skript mit einem Proxy, senden Sie die Anforderung ohne Front-End-√úberpr√ºfungen direkt an den Server, entfernen Sie die verschiedenen Schl√ºssel aus der Anforderung und √ºberpr√ºfen Sie, ob der Server angemessen reagiert. </li><li>  √úberpr√ºfen der Antwort auf Header: Wir schreiben ein Skript, das Anforderungen mit unterschiedlichen Headern in einer Schleife an dieselbe Seite sendet. Wir √ºberpr√ºfen die Reaktion des Servers und pr√ºfen, was entfernt werden soll. </li><li>  Auflisten von Berechtigungskombinationen: F√ºgen Sie einen Zyklus mit Kennw√∂rtern in einen Zyklus mit Anmeldungen ein, testen Sie das Berechtigungsformular. </li><li>  √úberpr√ºfung auf Schutz vor Angriffen: Wir senden Anfragen zum Senden von Formularen in mehreren Streams und pr√ºfen, ob Ihr Schutz funktioniert. </li><li>  Automatisierung von API-Systemen: Alle Ergebnisse von API-Anforderungen k√∂nnen von einem Skript verarbeitet und im n√§chsten Schritt des Testzyklus verwendet werden. Auf diese Weise k√∂nnen Sie das Testen eines solchen Systems automatisieren. </li></ul><br>  Aus dem Vorstehenden k√∂nnen wir eine allgemeine Schlussfolgerung ziehen: JMeter ist ein universelles Werkzeug, ein echtes Schweizer Messer f√ºr einen Tester (und f√ºr einen Entwickler, um ehrlich zu sein). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463443/">https://habr.com/ru/post/de463443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463433/index.html">E-Mail-Blog: Google Mail-Funktionen</a></li>
<li><a href="../de463435/index.html">√úbersicht √ºber Cloud-Services zur Entwicklung eines Backends f√ºr mobile Anwendungen</a></li>
<li><a href="../de463437/index.html">Verbinden Sie ein mobiles Ger√§t mit der Datenbank, ohne Servercode zu schreiben</a></li>
<li><a href="../de463439/index.html">Apollo-Bordsteuerungscomputer: Messstab und technische Analyse des Speichers auf mehreren zusammengef√ºgten Kernen</a></li>
<li><a href="../de463441/index.html">Sampler. Konsolen-Dienstprogramm zur Visualisierung des Ergebnisses von Shell-Befehlen</a></li>
<li><a href="../de463445/index.html">9 Arten von Collaboration-Softwarel√∂sungen zur Verwaltung agiler Teams</a></li>
<li><a href="../de463447/index.html">Astra Linux 1.6 (Smolensk). Ist das System bereit, mit normalen Benutzern zu arbeiten? Kr√ºckenbeispiele</a></li>
<li><a href="../de463455/index.html">Tausende Dinge, die in Java ab Version 1 behoben werden m√ºssen: ein gro√üartiges Interview mit Sergey Kuksenko von Oracle</a></li>
<li><a href="../de463459/index.html">Versteckte Fehler bei Shared Element Transitions</a></li>
<li><a href="../de463461/index.html">Was ist und was nicht in Go. Teil 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>