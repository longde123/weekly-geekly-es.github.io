<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐛 🤜🏻 🎅🏽 Intelligentes LCD-Schild für Arduino 🏦 🌈 ☹️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich kenne die Meinung vieler technischer Experten zu Arduino und teile teilweise ihre Ansicht. Für eine schnelle Automatisierung ist diese Plattform j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Intelligentes LCD-Schild für Arduino</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384363/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich kenne die Meinung vieler technischer Experten zu Arduino und teile teilweise ihre Ansicht. </font><font style="vertical-align: inherit;">Für eine schnelle Automatisierung ist diese Plattform jedoch sehr nützlich: Wie ein Designer eines Kindes können Sie ein Gerät in wenigen Stunden zusammenbauen und programmieren, ohne Zeit mit verschiedenen „undefinierten Verweisen auf __bss_start__“ und „Gerät nicht erkannt“ zu verschwenden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einmal brauchte ich eine Anzeige, um eine andere Routine zu automatisieren. </font><font style="vertical-align: inherit;">Ich blätterte durch Aliexpress und konnte immer noch keinen geeigneten Schild für Arduno finden.</font></font><br>
<img src="https://habrastorage.org/files/d26/794/34a/d2679434ac0b4fccb0a515c371f8050a.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Katze, um Aufmerksamkeit zu erregen</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Down and Out Probleme begannen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich brauchte also eine Dialogbenutzeroberfläche und darüber hinaus schnell. </font><font style="vertical-align: inherit;">(Die Katze sollte Aufmerksamkeit erregen, es wurde bemerkt - es funktioniert.) Wie absichtlich schlugen alle Hersteller vor, Eingabefelder und Fortschrittsbalken manuell zu zeichnen, Schaltflächenhandler zu programmieren und mit einem Wort alles zu tun, was ich einfach nicht wollte. </font><font style="vertical-align: inherit;">Erstaunlicherweise sollten Sie eine Bibliothek auf hoher Ebene bereitstellen, die sich um diese Probleme kümmert. </font><font style="vertical-align: inherit;">Wahrscheinlich laufen in 80% der Fälle alle Aufgaben auf eine einfache Reihenfolge hinaus:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigen Sie ein Formular mit Eingabefeldern an.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warten Sie, bis der Benutzer das Foo-Feld bearbeitet hat.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Holen Sie sich den neuen Wert des Foo-Feldes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mach etwas zurück.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Fehlen einer Bibliothek war jedoch nicht das einzige Hindernis. </font><font style="vertical-align: inherit;">Die knappen ROM-Reserven meines Arduino Uno (und die gleiche Situation mit Leonardo, Ethernet, Pro) reichten bestenfalls aus, um ein Bild mit einer Auflösung von 128 x 128 Pixel zu speichern. </font><font style="vertical-align: inherit;">Und es war kein Platz mehr für den Code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich eine breite Front durch Aliexpress, DX und ähnliche Geschäfte gegangen war, fand ich schließlich in der Sprache der Netzwerkentwickler entweder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"dünne dumme"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"zu dicke"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schilde. </font><font style="vertical-align: inherit;">Ersteres löst das Problem nicht, ist aber billig. </font><font style="vertical-align: inherit;">Das zweite ist wie ein Flugabwehr-Raketensystem, und für diese Redundanz muss ein angemessener Betrag gezahlt werden. </font><font style="vertical-align: inherit;">Wenn ich Nikanor Ivanovichs Lippen an Ivan Kuzmichs Nase legen könnte ... Nach einigem Zögern beschloss ich, diese nervige Marketinglücke zu füllen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was sollen wir einen Schild bauen?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich breitete das Brett aus, bestellte die ersten Proben für Experimente und probierte es aus. </font></font><br>
<img src="https://habrastorage.org/files/0ff/634/66d/0ff63466d12c41fd8f7e53d2c9aa3dd5.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Idee nahm allmählich Gestalt an. </font><font style="vertical-align: inherit;">Die Lösung sollte also einfach zu bedienen und immer billig sein (siehe unten):</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An Bord der Abschirmung sollte sich ein Mikrocontroller mit einem Speicherbereich für mindestens ein paar Bildschirme befinden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um sicherzustellen, dass keine Probleme mit dem Speicher auftreten, können Sie einen microSD-Steckplatz hinzufügen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Außerdem müssen Sie direkt auf dem Schild einige Knöpfe platzieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Mikrocontroller muss die „schwarze Arbeit“ erledigen, die Formularfelder rendern und die Tastendrücke so verarbeiten, dass nur durch die Stromversorgung des genähten Schilds durch die Formulare geblättert, die Eingabefelder bearbeitet, ein Vogel in das Kontrollkästchen gesetzt werden kann usw.</font></font></li>
<li>      Arduino      : I2C, SPI  UART.       Arduino; (,      ).</li>
<li>   Arduino           GPIO,      .</li>
<li>     , ,    « Vim,  !»,   ,      ,       GTK Glade             .</li>
</ul><br>
<img src="https://habrastorage.org/files/03a/da3/2c1/03ada32c13a94c31a08f3db52816529f.png"><br>
<br>
<h4>   </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die grundlegendste Komponente der Abschirmung ist das Anzeigemodul. Sowohl der Preis als auch die technischen Eigenschaften des Produkts hängen in hohem Maße davon ab. Bei der Suche nach einem geeigneten Modul wollte ich Fisch essen und reiten: Einerseits ging ich vom Verfügbarkeitskriterium aus, andererseits sollten die Kosten des Moduls minimal sein. Grundsätzlich widersprechen sich diese Kriterien: Geschäfte wie Terraelectronics mit Niederlassungen im ganzen Land boten eine Reihe von Farbdisplays für gängige Modelle an, deren Preise jedoch ab 2000 Rubel und darüber lagen; Auf der anderen Seite gab es viele gute Optionen für denselben Aliexpress, aber alle hatten den gleichen Nachteil: Es gab einen Abgrund zwischen ihnen und unseren unglücklichen Benutzern, in dem mehr als tausend Pappkartons starben und deren Verhalten ebenso leicht vorhersehbar war.wie das Verhalten von Ölzitaten oder Wetter.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jeder verstand natürlich, worum es ging.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Meine Idee war also immer noch nur eine Idee.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie so oft erweist sich das nächtliche Geschwätz in der Küche bei einer Tasse Tee als tödlich. </font><font style="vertical-align: inherit;">Ein Freund teilte im Vorbeigehen mit, wie er ein defektes Display auf seinem HTC verändert hat. </font><font style="vertical-align: inherit;">Es stellte sich heraus, dass Smartphone-Displays, die zweifellos bessere Eigenschaften als Produkte in Terraelectronics-Katalogen aufweisen, zwei- bis dreimal billiger sind! </font><font style="vertical-align: inherit;">Das war eine Offenbarung. </font><font style="vertical-align: inherit;">Danach wurde schnell genug ein Display gefunden, das in Russland bei fast jedem Schritt für einen Cent gekauft werden kann; </font><font style="vertical-align: inherit;">Es wurde auf Nokia 2600/2650/3100/3200/5100/5140/6100/6220/6610/7210/7250 Handys installiert. </font><font style="vertical-align: inherit;">(Wie sich später herausstellte, habe ich Amerika wiederentdeckt, da dieses Display in vielen Schildern für Arduino verwendet wird.) Seine Auflösung - 128 × 128 Pixel - reicht aus, um ein Formular mit drei oder vier Eingabefeldern anzuzeigen.</font></font><br>
<img src="https://habrastorage.org/files/3fd/cf9/4da/3fdcf94da39b4634b906d22190e4bc25.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glasiert ist besser als gepriesen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele verstehen wahrscheinlich immer noch nicht ganz, wie man das beschriebene Gadget benutzt. </font><font style="vertical-align: inherit;">Der vielleicht einfachste Weg, dies zu veranschaulichen, sind zwei Standardsituationen:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben ein digitales Thermometer, es ist notwendig, seine Messwerte auf dem Display anzuzeigen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt einen Servoantrieb, Sie müssen die Parameter seines Betriebs einstellen. </font><font style="vertical-align: inherit;">Zum Beispiel seine Position.</font></font></li>
</ul><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thermometer</font></font></h5><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;intelcd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;OneWire.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;DallasTemperature.h&gt;</span></span><font></font>
 <font></font>
<span class="hljs-comment">//     2 Arduino   1-Wire</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ONE_WIRE_BUS 2</span><font></font>
 <font></font>
<span class="hljs-comment">/*************************************************************
*     ,                      * 
*      :                      *
*************************************************************/</span>
<span class="hljs-comment">//  ,   . </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FORM_TERMO 0</span>
<span class="hljs-comment">//  ,    </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FIELD_TERMO 0</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-comment">//   oneWire     oneWire</span>
<span class="hljs-function">OneWire <span class="hljs-title">oneWire</span><span class="hljs-params">(ONE_WIRE_BUS)</span></span>; 
<span class="hljs-comment">//   sensor    </span>
<span class="hljs-function">DallasTemperature <span class="hljs-title">sensor</span><span class="hljs-params">(&amp;oneWire)</span></span>;
<span class="hljs-comment">//   lcd   LCD </span><font></font>
InteLCD lcd;<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
    lcd.init(); <font></font>
    sensor.begin(); <font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-comment">//   </span><font></font>
    sensor.requestTemperatures();<font></font>
 <font></font>
    <span class="hljs-comment">//     </span>
    lcd.update(FORM_TERMO, FIELD_TERMO, sensor.getTempCByIndex(<span class="hljs-number">0</span>));<font></font>
    delay(<span class="hljs-number">1000</span>);<font></font>
}<font></font>
</code></pre><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servo</font></font></h5><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;InteLCD.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Servo.h&gt;</span></span><font></font>
 <font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FORM_SERVO 0</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FIELD_SERVO 0</span><font></font>
 <font></font>
InteLCD lcd; <span class="hljs-comment">//   lcd   LCD </span>
Servo myservo; <span class="hljs-comment">//   servo   </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lcdEvent</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>; <span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
    myservo.attach(<span class="hljs-number">9</span>); <span class="hljs-comment">// ,    9 </span>
    lcd.init(); <span class="hljs-comment">//  lcd</span><font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">lcdEvent</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
    <span class="hljs-keyword">switch</span> (lcd.event.code) {
        <span class="hljs-keyword">case</span> InteLCD::FIELD_UPDATED:
		<span class="hljs-comment">//    0  1</span>
		<span class="hljs-keyword">if</span> (lcd.event.formid == FORM_SERVO &amp;&amp; lcd.event.fieldid == FIELD_SERVO) <font></font>
               {<font></font>
    	            <span class="hljs-comment">//      </span>
        	    <span class="hljs-comment">//      </span>
            	    myservo.write(lcd.event.arg[<span class="hljs-number">0</span>]); <font></font>
 <font></font>
    	            <span class="hljs-comment">//       </span>
        	    delay(<span class="hljs-number">15</span>); <font></font>
	    	}<font></font>
 <font></font>
            <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlussendlich</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meiner Meinung nach sollte sich die Heimwerkerelektronik zu einer größtmöglichen Modularität entwickeln, bei der jedes Modul äußerst einfach und vollständig ist. </font><font style="vertical-align: inherit;">Während das Kind sein Spielzeugschloss aus den verschiedenen Lego-Teilen errichtet, muss der Benutzer sein Gerät in Ziegeln zusammenbauen, jedoch ohne Hammer und Feile. </font><font style="vertical-align: inherit;">Mein Schild ist ein kleiner Schritt in diese Richtung. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde mich freuen, wertvolle Ratschläge zu hören und zu verstehen, wem außer mir so etwas Nützliches fehlt.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de384363/">https://habr.com/ru/post/de384363/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de384351/index.html">Der Programmierer hat in Tinder ein neuronales Netzwerk für den automatischen Paarabgleich eingerichtet</a></li>
<li><a href="../de384353/index.html">Eindringen in den Geist eines Gegners: der legendäre Bletchley Park</a></li>
<li><a href="../de384355/index.html">Antibakterielle Seife verträgt bakterielle Kontaminationen nicht besser als gewöhnlich</a></li>
<li><a href="../de384359/index.html">Liebe und Roboter (18+)</a></li>
<li><a href="../de384361/index.html">Neue kanadische doppelseitige Sonnenkollektoren</a></li>
<li><a href="../de384365/index.html">70-jähriger Programmierer, der versucht, eine alte Programmiersprache auf GitHub beizubehalten</a></li>
<li><a href="../de384367/index.html">Hyperloop - Zeitschleife</a></li>
<li><a href="../de384369/index.html">Проект «Око» ч.13</a></li>
<li><a href="../de384371/index.html">Windows 10 Build 10547 steht Insidern auf dem PC zur Verfügung</a></li>
<li><a href="../de384377/index.html">Die Große Kampagne 6 startete Mikrosatelliten von Orbit-Studenten in China</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>