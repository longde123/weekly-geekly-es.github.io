<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òëÔ∏è üàµ üíπ Netflix: ¬øque sucede cuando haces clic en reproducir? ‚§¥Ô∏è üë° ‚úçüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo es un cap√≠tulo de mi nuevo libro Explain the Cloud to a Ten-Year- Old. La primera opci√≥n fue escrita espec√≠ficamente para aquellos que n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Netflix: ¬øque sucede cuando haces clic en reproducir?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/409583/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a86/b6d/d36/a86b6dd362d675c80d696decff2ce0e8.jpg"></div><br>  Este art√≠culo es un cap√≠tulo de mi nuevo libro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Explain the Cloud to a Ten-Year-</a> Old.  La primera opci√≥n fue escrita espec√≠ficamente para aquellos que necesitan una introducci√≥n a las nubes.  Luego realic√© algunas actualizaciones y agregu√© un par de cap√≠tulos: "Netflix: ¬øqu√© sucede cuando presionas inicio?"  y "¬øQu√© es la computaci√≥n en la nube?"  - que ya est√°n un poco m√°s all√° del conocimiento de un principiante.  Creo que podr√°n interesar incluso a personas bastante experimentadas. <br><br>  Entonces, si necesita una buena introducci√≥n a las nubes o conoce a alguien que la necesita, eche un vistazo.  Creo que te gustar√°.  Estoy orgulloso de lo que hice. <br><br>  Escrib√≠ este cap√≠tulo sobre la base de una docena de fuentes, que a veces se contradicen entre s√≠.  Los hechos clave cambian con el tiempo y dependen de qui√©n cuenta la historia y qu√© audiencia.  Trat√© de hacer una historia coherente siempre que sea posible.  Tenga en cuenta que esta no es una gu√≠a t√©cnica, es un art√≠culo con im√°genes grandes.  Por ejemplo, nunca he mencionado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">microservicios</a> . <br><br>  Netflix parece tan simple.  Haga clic en "reproducir" y el video aparecer√° m√°gicamente.  Simple, ¬øverdad?  Si, no realmente. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/53b/fd6/267/53bfd626796d89f697249e21c064381f.jpg"><br><br>  Despu√©s de nuestras discusiones en el cap√≠tulo "¬øQu√© es la computaci√≥n en la nube?"  puede esperar que Netflix trabaje con video usando AWS.  Haga clic en "reproducir" en la aplicaci√≥n Netflix, y el video almacenado en S3 se transmitir√° directamente a su dispositivo a trav√©s de Internet a trav√©s de Internet. <br><br>  Un enfoque perfectamente razonable: para un servicio que es mucho m√°s peque√±o. <br><br>  Pero Netflix est√° completamente equivocado.  Todo es mucho m√°s complicado e interesante de lo que puedas imaginar. <br><br>  Para entender por qu√©, echemos un vistazo a las estad√≠sticas de Netflix para 2017: <br><br><ul><li>  M√°s de 110 millones de suscriptores. </li><li>  Trabaja en m√°s de 200 pa√≠ses. </li><li>  Ingresos de $ 3 mil millones por trimestre. </li><li>  Agrega 5 millones de suscriptores por trimestre. </li><li>  Reproduce m√°s de mil millones de horas de video semanalmente.  En comparaci√≥n, YouTube reproduce mil millones de horas de video todos los d√≠as, mientras que Facebook reproduce 110 millones de horas de video todos los d√≠as. </li><li>  En un d√≠a de 2017, se reprodujeron 250 millones de horas de video. </li><li>  Responsable del 37% del pico del tr√°fico de Internet en los EE. UU. </li><li>  Planea gastar $ 7 mil millones en contenido nuevo en 2018. </li></ul><br><h2>  Que aprendimos </h2><br>  Netflix es enorme.  Es global, tiene muchos suscriptores, reproduce una gran cantidad de videos y tiene mucho dinero. <br><br>  Otro hecho pertinente es que Netflix funciona por suscripci√≥n.  Los suscriptores pagan Netflix mensualmente y pueden darse de baja en cualquier momento.  Cuando presiona "reproducir" para relajarse en Netflix, ser√≠a mejor si este servicio funciona normalmente.  Los suscriptores insatisfechos se dan de baja. <br><br><h2>  Echa un vistazo m√°s profundo </h2><br>  Netflix es un gran ejemplo de las ideas que discutimos, por lo que este cap√≠tulo tendr√° mucho m√°s detalles que la descripci√≥n de otros servicios en la nube.  Una raz√≥n para explorar Netflix en profundidad es que proporcionan mucha m√°s informaci√≥n que otras compa√±√≠as.  Las comunicaciones de Netflix se consideran un activo cultural importante, y la compa√±√≠a mantiene con √©xito sus est√°ndares. <br><br>  Incluso me gustar√≠a agradecer a Netflix por su apertura sobre su arquitectura.  Con los a√±os, la compa√±√≠a dio cientos de conferencias y escribi√≥ cientos de art√≠culos sobre los detalles de sus patrones internos de trabajo.  Esto ayuda a mejorar toda la industria. <br><br>  Otra raz√≥n para estos detalles detallados es que el servicio de Netflix es simplemente incre√≠ble.  La mayor√≠a de nosotros lo hemos usado, ¬øy qui√©n no estar√≠a interesado en mirar detr√°s de escena y descubrir c√≥mo funciona? <br><br><h2>  Netflix se ejecuta en dos nubes: AWS y Open Connect </h2><br>  ¬øC√≥mo satisface la empresa a los clientes?  Con la ayuda de las nubes.  De hecho, dos nubes diferentes: AWS y Open Connect.  Ambos deber√≠an trabajar juntos sin problemas para producir muchas horas de contenido de video que satisfaga a los usuarios. <br><br><h2>  Tres partes de Netflix: cliente, backend, red de entrega de contenido </h2><br>  Puede dividir mentalmente Netflix en tres partes: cliente, backend, red de entrega de contenido (CDN). <br><br>  Cliente: una interfaz de usuario que se ejecuta en cualquier dispositivo utilizado para ver listas de videos y reproducirlos.  Puede ser una aplicaci√≥n m√≥vil en un tel√©fono inteligente, un sitio web en una computadora de escritorio o incluso una aplicaci√≥n en un televisor inteligente.  Netflix controla cada cliente en cada dispositivo. <br><br>  Todo lo que sucede antes de hacer clic en el bot√≥n de reproducci√≥n ocurre en el back-end que se ejecuta en AWS.  Esto incluye cosas como preparar todos los nuevos videos entrantes y procesar solicitudes de todas las aplicaciones, sitios web, televisores y otros dispositivos. <br><br>  Todo lo que sucede despu√©s de hacer clic en "reproducir" se procesa en Open Connect.  Esta es la propia red de entrega de contenido de Netflix.  Almacena videos en varios lugares del mundo.  Cuando hace clic en "reproducir", la transmisi√≥n de video proviene de Open Connect a su dispositivo, y el cliente la muestra.  No se preocupe, hablaremos de CDN m√°s tarde.  Curiosamente, el proceso de lanzamiento de video de la compa√±√≠a no se llama "haga clic en" reproducir ", sino" haga clic en "iniciar" en el nombre ". Cada industria tiene su propia jerga. <br><br>  Controlando las tres √°reas: cliente, backend, CDN, Netflix logr√≥ una integraci√≥n vertical completa.  La compa√±√≠a controla su experiencia de ver videos de principio a fin.  Por lo tanto, simplemente funciona cuando haces clic en "reproducir" en cualquier parte del mundo.  Le garantizamos que obtendr√° el contenido que necesita, el que desea ver y cuando lo desee. <br><br>  Veamos exactamente c√≥mo resulta esto. <br><br><h2>  En 2008, Netflix comenz√≥ a mudarse a AWS </h2><br>  Netflix ha estado operando desde 1998. Al principio, se ocup√≥ del alquiler de DVD por correo.  Pero la compa√±√≠a vio el futuro en la transmisi√≥n de video a pedido.  En 2007, Netflix present√≥ su servicio de video a pedido, que permit√≠a a los suscriptores transmitir programas de TV y pel√≠culas a trav√©s del sitio web de la compa√±√≠a en computadoras personales o mediante el software especial de la compa√±√≠a en varias plataformas que admite, incluidos tel√©fonos inteligentes y tabletas, reproductores digitales y juegos. decodificadores y televisores inteligentes. <br><br>  El futuro para la transmisi√≥n de video a pedido puede parecer obvio.  En principio, lo fue.  Personalmente, trabaj√© en un par de startups tratando de emitir videos a pedido.  Ellos fallaron  Y Netflix estaba esperando el √©xito.  La compa√±√≠a definitivamente funcion√≥ bien, pero lleg√≥ tarde al mercado, lo que la ayud√≥.  Para 2007, Internet era lo suficientemente r√°pido y econ√≥mico como para admitir servicios de transmisi√≥n de video.  Esto no ha sucedido antes.  La llegada del tr√°fico m√≥vil r√°pido y no muy costoso y la introducci√≥n de dispositivos m√≥viles potentes, como tel√©fonos inteligentes y tabletas, hicieron que fuera m√°s f√°cil y econ√≥mico ver videos en tiempo real en cualquier lugar y en cualquier lugar.  El momento adecuado es la clave del √©xito. <br><br><h2>  Netflix comenz√≥ con sus propios centros de datos </h2><br>  EC2 reci√©n comenzaba en 2007, casi al mismo tiempo que Netflix estaba comenzando.  Por lo tanto, Netflix no pudo comenzar a usar EC2.  La compa√±√≠a ha construido dos centros de datos ubicados cerca.  Y experimentaron todos los problemas que discutimos en cap√≠tulos anteriores. <br><br>  La construcci√≥n de centros de datos es muy costosa.  Toma tiempo ordenar el equipo, su instalaci√≥n y lanzamiento.  Inmediatamente despu√©s del lanzamiento, se quedaron sin energ√≠a y todo tuvo que comenzar de nuevo.  El tiempo dedicado al equipo oblig√≥ a la empresa a adoptar una estrategia de escala vertical. <br><br>  Netflix escribi√≥ grandes programas que se ejecutan en grandes computadoras.  Este enfoque se llama la construcci√≥n de un monolito.  Un programa hizo todo.  El problema es que si creces tan r√°pido como Netflix, es muy dif√≠cil hacer un monolito confiable.  No era confiable. <br><br><h2>  La denegaci√≥n de servicio oblig√≥ a Netflix a mudarse a AWS </h2><br>  En agosto de 2008, Netflix no pudo enviar DVD durante tres d√≠as consecutivos debido a una falla en su base de datos.  Eso fue inaceptable.  Era necesario resolver algo.  La experiencia de construir centros de datos le ense√±√≥ a la empresa algo importante: no funcion√≥ bien construir centros de datos.  Ella era buena en entregar videos a sus clientes.  Necesitaba centrarse en las mejoras en la entrega de video, en lugar de las mejoras en la construcci√≥n de centros de datos.  La construcci√≥n de centros de datos no fue una ventaja competitiva de la empresa, sino la entrega de video. <br><br>  En ese momento, Netflix decidi√≥ mudarse a AWS.  AWS apenas comenzaba, por lo que fue una decisi√≥n audaz.  La compa√±√≠a se mud√≥ a AWS porque necesitaba una infraestructura m√°s confiable.  Netflix quer√≠a eliminar todas las debilidades del sistema.  AWS ofreci√≥ bases de datos altamente confiables, almacenamiento y centros de datos redundantes.  Netflix necesitaba servicios en la nube para dejar de construir monolitos poco confiables.  Netflix quer√≠a convertirse en un servicio global sin construir sus centros de datos.  Tales oportunidades en sus antiguos centros de datos no eran ni pod√≠an ser. <br><br>  Netflix eligi√≥ AWS porque no quer√≠a involucrarse en un trabajo duro indiferenciado.  El trabajo duro no diferenciado es lo que hay que hacer, pero eso no le da ninguna ventaja al negocio principal, que consiste en proporcionar una visualizaci√≥n de video de calidad.  AWS hace todo este trabajo duro para Netflix.  Y esto les da a los netflixers la oportunidad de concentrarse en proporcionar valiosos servicios comerciales. <br><br>  Trasladar una empresa de sus centros de datos a AWS le llev√≥ m√°s de ocho a√±os.  Netflix aument√≥ el n√∫mero de clientes ocho veces durante este tiempo.  Netflix ahora se ejecuta en varios cientos de miles de copias de EC2. <br><br><h2>  AWS Netflix m√°s confiable </h2><br>  No es que Netflix nunca haya experimentado problemas con AWS, pero en general, su servicio se ha vuelto mucho m√°s confiable que antes.  Ya no ver√° tales quejas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af4/f3a/f92/af4f3af926d818952f1562667f6e8662.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/23d/91d/5b2/23d91d5b2ccf5da53507d412ef5ff293.jpg"><br><br>  La compa√±√≠a se volvi√≥ tan confiable ya que tom√≥ medidas extraordinarias para esto.  Opera en tres regiones de AWS: el norte de Virginia, Portland, Oreg√≥n y Dubl√≠n, Irlanda.  En cada uno de ellos, Netflix opera en tres zonas de acceso diferentes. <br><br>  La compa√±√≠a no tiene planes de aumentar el n√∫mero de regiones de trabajo.  Agregar nuevas regiones es muy dif√≠cil y costoso.  La mayor√≠a de las empresas operan en una sola regi√≥n, sin mencionar dos o tres. <br><br>  La ventaja de trabajar en tres regiones es que una de ellas puede caerse, y las otras dos caer√°n en su lugar y atender√°n a los clientes de la regi√≥n afectada.  Netflix llama la evacuaci√≥n de la ca√≠da de la regi√≥n. <br><br>  Considere un ejemplo.  Supongamos que est√°s viendo un nuevo episodio de "House of Cards" en Londres, Inglaterra.  Lo m√°s probable es que su dispositivo est√© conectado a la regi√≥n de Dubl√≠n, ya que est√° m√°s cerca.  ¬øQu√© sucede cuando cae la regi√≥n de Dubl√≠n?  ¬øNetflix dejar√° de trabajar para ti?  No  Una vez que se detecta un problema, Netflix lo redirigir√° a Virginia.  Su dispositivo se comunicar√° con la regi√≥n de Virgin en lugar de Dubl√≠n.  Puede que ni siquiera note fallas. <br><br>  ¬øCon qu√© frecuencia falla la regi√≥n de AWS?  Una vez al mes  Bueno, en realidad la regi√≥n no falla todos los meses.  Netflix realiza pruebas mensuales.  Cada mes, Netflix elimina espec√≠ficamente toda la regi√≥n, solo para asegurarse de que su sistema maneje fallas regionales.  Puede evacuar la regi√≥n en seis minutos. <br><br>  Netflix llama a esto un modelo de servicio global.  Cada cliente puede ser atendido desde cualquier regi√≥n.  Esto es asombroso.  Y esto no sucede autom√°ticamente.  AWS no tiene una salsa m√°gica para manejar el fracaso de las regiones o atender a clientes de diferentes regiones.  Netflix hizo el trabajo.  La compa√±√≠a es pionera en la creaci√≥n de sistemas confiables en varias regiones.  No s√© de otras compa√±√≠as que tomar√≠an tales medidas para garantizar la confiabilidad del servicio. <br><br>  Otra ventaja de trabajar desde estas tres regiones es que Netflix puede cubrir todo el mundo.  Netflix realiz√≥ controles y descubri√≥ que al iniciar la aplicaci√≥n en cualquier parte del mundo, en cualquier caso, recibir√° un servicio r√°pido de una de estas regiones. <br><br><h2>  Netflix ahorra usando AWS </h2><br>  Esto puede sorprender a muchos, pero AWS para Netflix es m√°s barato.  El costo de la nube en t√©rminos de visualizaci√≥n del video es varias veces menor que cuando se usan centros de datos antiguos.  Por qu√©  Debido a la elasticidad de la nube. <br><br>  Netflix puede agregar servidores seg√∫n sea necesario y devolverlos cuando no sean necesarios.  En lugar de un mont√≥n de computadoras adicionales que no hacen nada, solo esperan la carga m√°xima, la compa√±√≠a usa exactamente la cantidad de computadoras que necesita y cuando es necesario. <br><br><h2>  ¬øQu√© sucede en AWS antes de hacer clic en reproducir? </h2><br>  Todo lo que no est√° relacionado con la presentaci√≥n del video se procesa en AWS.  Esto incluye potencia inform√°tica escalable, almacenamiento escalable, l√≥gica de negocios, bases de datos distribuidas escalables, procesamiento y an√°lisis de grandes datos, recomendaciones, transcodificaci√≥n y cientos de otras funciones.  No es necesario que los entienda a todos, pero como esto puede parecerle interesante, los explicar√© brevemente. <br><br><h2>  Computaci√≥n escalable Potencia y almacenamiento </h2><br>  La potencia inform√°tica escalable es EC2 y el almacenamiento es S3.  No hay nada nuevo para nosotros aqu√≠.  Su dispositivo es un iPhone, TV, Xbox, tel√©fono inteligente Android, tableta, etc.  - se comunica con un servicio que se ejecuta en EC2.  Su dispositivo recibe una lista de posibles pel√≠culas para ver al comunicarse con una computadora que ejecuta EC2.  Informaci√≥n detallada sobre el video que su dispositivo recibe all√≠.  Todo funciona igual que en otros servicios en la nube. <br><br><h2>  Bases de datos distribuidas escalables </h2><br>  Netflix usa DynamoDB y Cassandra como bases de datos distribuidas.  Estos nombres no deber√≠an significar nada para usted, solo son bases de datos de alta calidad.  Los datos se almacenan en la base de datos.  Informaci√≥n sobre su perfil, sobre cuentas, sobre todas las pel√≠culas vistas: todo esto se almacena en la base de datos.  Las bases de datos distribuidas no funcionan en una computadora grande, sino en muchas computadoras.  Sus datos se copian en muchas computadoras para que incluso si una o dos computadoras que almacenan sus datos fallan, sus datos estar√°n seguros.  En realidad, todos los datos se copian en las tres regiones.  Debido a esto, en el caso de una falla en la regi√≥n, sus datos estar√°n disponibles en otra regi√≥n a la que ser√° cambiado.  Y el escalado significa que la base de datos podr√° almacenar tantos datos como usted le agregue.  Esta es una de las principales ventajas de las bases de datos distribuidas.  Si llegan m√°s datos, se pueden agregar m√°s computadoras. <br><br><h2>  Gran procesamiento de datos y an√°lisis </h2><br>  Big data es solo una gran cantidad de datos.  Netflix recopila mucha informaci√≥n.  La compa√±√≠a sabe qui√©n lo vio, cu√°ndo y d√≥nde lo vieron.  La compa√±√≠a sabe qu√© videos vieron sus clientes, pero no ordenaron.  Ella sabe cu√°ntas veces se ha visto cada video, y mucho m√°s. <br><br>  La recopilaci√≥n y conversi√≥n de todos los datos a un formato est√°ndar se denomina procesamiento.  Y extrayendo significado de ellos: an√°lisis.  Los datos se analizan para obtener respuestas a preguntas espec√≠ficas. <br><br><h2>  Netflix personaliza im√°genes especialmente para ti </h2><br>  Aqu√≠ hay un gran ejemplo de c√≥mo Netflix lo atrae a ver m√°s pel√≠culas utilizando las capacidades de an√°lisis de datos.  Cuando navega por las listas y elige qu√© ver, ¬øprest√≥ atenci√≥n al hecho de que para cada pel√≠cula se emite una imagen?  Esta es la imagen del t√≠tulo. <br><br>  La imagen del t√≠tulo deber√≠a intrigarte, atraer tu atenci√≥n y hacerte elegir este video.  La idea es que cuanto m√°s intrigante sea la imagen, es m√°s probable que vea el video.  Y cuantos m√°s videos vea, menos probabilidades tendr√° de darse de baja de Netflix. <br><br>  Aqu√≠ hay un ejemplo de las diversas im√°genes de t√≠tulos de la serie Stranger Things: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/368/3d5/31f/3683d531fe4f0fdff525eb466260ed86.jpg"><br><br>  Te sorprender√° que cada imagen para cada video est√© seleccionada espec√≠ficamente para ti.  No todos ven las mismas im√°genes. <br><br>  Anteriormente, todos ve√≠an las mismas im√°genes de t√≠tulo.  As√≠ es como funcion√≥.  A los clientes se les mostr√≥ una imagen seleccionada al azar de un conjunto, como la que se muestra en la ilustraci√≥n anterior.  Netflix cont√≥ todas las vistas de video y grab√≥ qu√© imagen se mostr√≥ al usuario cuando se seleccion√≥ un video.  Supongamos, para nuestro ejemplo con la serie, que al mostrar la imagen central del collage, el video se vio 1000 veces.  Y al mostrar el resto de las im√°genes, solo una vez. <br><br>  Como la imagen del grupo era mejor que otras para atraer a los usuarios a ver, Netflix tuvo que convertirla en la imagen del t√≠tulo de la serie para siempre.  Esto se llama selecci√≥n basada en datos.  Netflix funciona en base al an√°lisis de datos.  Los datos se recopilan, en este caso, el n√∫mero de vistas asociadas con cada imagen, y se utilizan para tomar las mejores decisiones, en este caso, para seleccionar una imagen de t√≠tulo. <br><br>  Con astucia, pero ¬øse puede hacer esto a√∫n mejor?  S√≠, usando a√∫n m√°s datos.  Para este tema, el futuro est√° en resolver problemas a trav√©s del aprendizaje de los datos.  Somos personas diferentes  ¬øCrees que las mismas im√°genes nos pueden motivar?  Probablemente no.  Tenemos diferentes gustos, diferentes preferencias.  Y Netflix lo sabe, as√≠ que ahora personaliza todas las im√°genes que te muestra.  Ella est√° tratando de elegir una imagen que resalte el aspecto m√°s importante del video para usted.  ¬øC√≥mo hace ella esto? <br><br>  Recuerde que Netflix registra y cuenta todo lo que hace en su sitio web.  Ella sabe qu√© pel√≠culas te gustan, qu√© actores te gustan, etc.  Supongamos que entre sus recomendaciones estaba la pel√≠cula "Good Will Hunting".  Netflix deber√≠a elegir una imagen de encabezado adecuada.  El objetivo es mostrar una imagen que le diga que esta pel√≠cula podr√≠a ser de su inter√©s.  ¬øQu√© imagen necesitas mostrar? <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si te gustan las comedias, Netflix te mostrar√° una imagen con Robin Williams. Si prefieres melodramas, Netflix te mostrar√° una imagen de Matt Damon y Minnie Driver a punto de besarse. </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c9b/002/6f5/c9b0026f553c8d004e33ae7dfdb58a7c.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con Robin Williams, el servicio te dice que es probable que la pel√≠cula tenga humor, y dado que Netflix sabe que te gustan las comedias, este video es adecuado para ti. Imagen Matt Damon y Minnie Driver env√≠an un mensaje completamente diferente. Si te gustan las comedias y ves esta imagen, lo m√°s probable es que te la pierdas. Por lo tanto, elegir la imagen correcta es muy importante. Env√≠a un fuerte mensaje personalizado sobre el tema de la pel√≠cula. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ hay otro ejemplo: Pulp Fiction:</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1df/d6d/a0c/1dfd6da0c5c128b97f7d4893c4d2f32d.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si viste muchas pel√≠culas con Uma Thurman, es probable que veas la imagen del t√≠tulo con Uma. Si ha visto muchas pel√≠culas con Travolta, es probable que vea la imagen del t√≠tulo con John. ¬øVes c√≥mo elegir la mejor imagen personalizada posible puede aumentar la probabilidad de ver un video en particular?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netflix apela a su inter√©s al elegir im√°genes, pero el servicio no quiere mentirle. No quiere mostrarte una imagen atractiva para hacerte ver un video que no te gusta. No hay incentivo. El servicio no cobra por el n√∫mero de visitas. El servicio intenta minimizar el arrepentimiento y quiere que te guste lo que est√°s viendo, por lo que selecciona para ti la mejor imagen de t√≠tulo posible. Y este es solo un peque√±o ejemplo de an√°lisis de datos. Netflix usa tales estrategias en todas partes.</font></font><br><br><h2>  Recomendaciones </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netflix generalmente muestra 40-50 opciones de video, pero el servicio tiene ofertas de miles de videos. </font><font style="vertical-align: inherit;">¬øC√≥mo decide Netflix qu√© mostrar? </font><font style="vertical-align: inherit;">Por aprendizaje autom√°tico. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto es parte del an√°lisis y procesamiento de big data del que acabamos de hablar. </font><font style="vertical-align: inherit;">El servicio examina los datos y predice lo que le gustar√≠a. </font><font style="vertical-align: inherit;">En general, todo lo que ve en la pantalla de Netflix se ha seleccionado espec√≠ficamente para usted mediante el aprendizaje autom√°tico.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodificaci√≥n del archivo fuente al formato que necesita </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y as√≠ llegamos a la forma en que Netflix maneja el video. </font><font style="vertical-align: inherit;">Antes de que pueda comenzar a mirar en su dispositivo favorito, Netflix debe convertir el video al formato que mejor se adapte a su dispositivo. </font><font style="vertical-align: inherit;">Este proceso se llama transcodificaci√≥n. </font><font style="vertical-align: inherit;">Convierte un archivo de video de un formato a otro, para que el video se pueda ver en diferentes plataformas y dispositivos. </font><font style="vertical-align: inherit;">Netflix codifica todos sus videos en AWS en 300,000 procesadores simult√°neamente. </font><font style="vertical-align: inherit;">¬°Esto es m√°s que casi cualquier supercomputadora!</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fuente Fuente de datos </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQui√©n sube videos a Netflix? </font><font style="vertical-align: inherit;">Estudios y asociaciones de producci√≥n. </font><font style="vertical-align: inherit;">Netflix llama a esto los datos en bruto. </font><font style="vertical-align: inherit;">El nuevo video se env√≠a al equipo de contenido para su procesamiento. </font><font style="vertical-align: inherit;">Viene en alta resoluci√≥n, muchos terabytes de tama√±o. </font><font style="vertical-align: inherit;">Para imaginar un terabyte de informaci√≥n, imagine 60 pilares de papel, cada uno de los cuales tiene la misma altura que la Torre Eiffel. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de que pueda ver el video, Netflix lo expone a un duro proceso de varios pasos.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/994/abf/8c5/994abf8c5dfe146ba1d6844a747c37b3.jpg"><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Control de calidad </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primero, Netflix pasa mucho tiempo revisando la calidad del video. </font><font style="vertical-align: inherit;">Est√° buscando artefactos digitales, cambios de color, cuadros descartados que podr√≠an aparecer debido a intentos de transcodificaci√≥n anteriores o problemas de transferencia de datos. </font><font style="vertical-align: inherit;">Si se detecta alg√∫n problema, el video es rechazado.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transportador de procesamiento </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de confirmar la calidad del video se env√≠a a la tuber√≠a de procesamiento. Esta es una secuencia de pasos por los que pasan los datos antes de que puedan usarse, algo as√≠ como una cinta transportadora en una f√°brica. Se utilizan m√°s de 70 programas de procesamiento diferentes para crear cada video. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El procesamiento de un solo archivo de varios terabytes no es pr√°ctico, por lo que el primer paso en la tuber√≠a ser√° dividir el video en muchas piezas peque√±as. Las piezas pasan a lo largo del transportador para que puedan codificarse en paralelo, es decir, se procesan simult√°neamente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostramos paralelizaci√≥n usando un ejemplo.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/29f/0ee/c83/29f0eec83a51c561ef380328cf9122fb.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supongamos que tiene cien perros sucios que necesitan ser lavados. </font><font style="vertical-align: inherit;">¬øC√≥mo ser√° m√°s r√°pido hacer esto, si una persona lava un perro tras otro, o si contrata a un centenar de lavadores de perros y los lava todos a la vez? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, el proceso ser√° m√°s r√°pido si cien lavadoras trabajan al mismo tiempo. </font><font style="vertical-align: inherit;">Esto es paralelismo. </font><font style="vertical-align: inherit;">Es por eso que Netflix usa tantos servidores EC2. </font><font style="vertical-align: inherit;">Necesitan muchos servidores para procesar estos archivos de video gigantes en paralelo. </font><font style="vertical-align: inherit;">Y funciona: la compa√±√≠a afirma que el archivo fuente puede codificarse y enviarse a la CDN en solo 30 minutos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando las piezas est√°n codificadas, se verifican para asegurarse de que no tengan nuevos problemas. </font><font style="vertical-align: inherit;">Luego se vuelven a recopilar en un archivo y se vuelven a verificar.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El resultado es un mont√≥n de archivos. </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El proceso de codificaci√≥n crea muchos archivos. </font></font> Por qu√©<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El objetivo final de Netflix es admitir todos los dispositivos conectados a Internet. La compa√±√≠a comenz√≥ a operar en 2007 en la plataforma Microsoft Windows. Con el tiempo, se agregaron muchos otros dispositivos: Roku, LG, Samsung Blu-ray, Apple Mac, Xbox 360, LG DTV, Sony PS3, Nintendo Wii, Apple iPad, Apple iPhone, Apple TV, Android, Kindle Fire y Comcast X1.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En total, Netflix admite 2.200 dispositivos diferentes. Para cada uno de ellos hay un formato de video que se ve mejor en √©l. Si ves Netflix en un iPhone, ver√°s el video que se ve mejor en un iPhone. La compa√±√≠a llama a todos los diversos formatos de video un perfil de codificaci√≥n. Netflix tambi√©n crea archivos optimizados para diferentes velocidades de red. Si mira un archivo en una red de alta velocidad, ver√° un video de mejor calidad que si lo viera en una red m√°s lenta.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambi√©n hay archivos para varios formatos de audio. </font><font style="vertical-align: inherit;">El audio est√° codificado en diferentes niveles de calidad y diferentes idiomas. </font><font style="vertical-align: inherit;">Adem√°s, hay archivos con subt√≠tulos. </font><font style="vertical-align: inherit;">Un video puede tener m√∫ltiples subt√≠tulos en diferentes idiomas. </font><font style="vertical-align: inherit;">Hay varias opciones de visualizaci√≥n diferentes para cada video. </font><font style="vertical-align: inherit;">Lo que ve depende de su dispositivo, la calidad de la conexi√≥n, la tarifa de servicio y la elecci√≥n del idioma.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entonces, ¬øcu√°ntos archivos hay? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para la serie, The Crown Netflix almacena alrededor de 1200 archivos. </font><font style="vertical-align: inherit;">La segunda temporada de Stranger Things tiene a√∫n m√°s archivos. </font><font style="vertical-align: inherit;">Fue filmado en resoluci√≥n 8K y tiene nueve episodios. </font><font style="vertical-align: inherit;">Los archivos de origen ocupan muchos terabytes de datos. </font><font style="vertical-align: inherit;">Se necesitaron 190,000 horas de procesador para codificar solo una temporada. </font><font style="vertical-align: inherit;">El resultado son 9.570 archivos diferentes de video, audio y texto. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ahora veamos c√≥mo Netflix reproduce todos estos archivos.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tres estrategias diferentes para transmitir video </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netflix tiene tres estrategias diferentes para reproducir video en streaming: su propia CDN peque√±a, CDN de terceros y Open Connect. </font><font style="vertical-align: inherit;">Comencemos con la definici√≥n de CDN. </font><font style="vertical-align: inherit;">CDN es una red de distribuci√≥n de contenido. </font><font style="vertical-align: inherit;">Para Netflix, el contenido es, por supuesto, los archivos de video que discutimos en la secci√≥n anterior. </font><font style="vertical-align: inherit;">Compartir significa que los archivos se copian desde una ubicaci√≥n central a trav√©s de la red y se almacenan en computadoras distribuidas por todo el mundo. </font><font style="vertical-align: inherit;">En Netflix, la ubicaci√≥n central de almacenamiento de archivos es S3.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬øPor qu√© crear un CDN? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La idea es simple: debe colocar el video lo m√°s cerca posible de los usuarios, distribuyendo computadoras en todo el mundo. Cuando un usuario quiera ver un video, busque la computadora m√°s cercana a √©l y organice una transmisi√≥n desde all√≠ a su dispositivo. Los mayores beneficios de CDN son la velocidad y la fiabilidad. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagina que est√°s viendo un video en Londres y te lo transmiten desde Portland, Oregon. La transmisi√≥n de video debe pasar por muchas redes, incluido el cable submarino, por lo que la conexi√≥n puede ser lenta y poco confiable. Al acercar el video a las personas que lo miran, puede hacer que la emoci√≥n de ver un video sea m√°s r√°pida y confiable.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada ubicaci√≥n de la computadora que almacena el video se denomina punto de presencia (PoP). </font><font style="vertical-align: inherit;">Cada PoP es una ubicaci√≥n f√≠sica con acceso a internet. </font><font style="vertical-align: inherit;">Hay servidores, enrutadores y otros equipos de telecomunicaciones. </font><font style="vertical-align: inherit;">Hablaremos de PoP m√°s tarde.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El primer CDN era demasiado peque√±o. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En 2007, cuando Netflix introdujo por primera vez su servicio de transmisi√≥n, ten√≠a 36 millones de suscriptores en 50 pa√≠ses, que ve√≠an m√°s de mil millones de horas de video cada mes y que recib√≠an varios terabits de datos por segundo. </font><font style="vertical-align: inherit;">Para respaldar el servicio, Netflix ha creado su propia CDN simple en cinco ubicaciones diferentes en los Estados Unidos. </font><font style="vertical-align: inherit;">El cat√°logo de videos de la compa√±√≠a era lo suficientemente peque√±o y todos los archivos estaban almacenados en todos los lugares.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El segundo CDN era demasiado grande. </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En 2009, Netflix decidi√≥ usar un CDN de terceros. En ese momento, el costo de CDN comenz√≥ a caer. El uso de redes de terceros fue un movimiento inteligente para Netflix. ¬øPor qu√© perder tiempo y esfuerzo construyendo sus redes si puede llegar de inmediato a cualquier lugar del planeta con CDN existentes? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netflix ha trabajado para proporcionar servicios CDN con compa√±√≠as como Akamai, Limelight y Level 3. No hay nada de malo en usar CDN de terceros. De hecho, casi todas las empresas hacen esto. Por ejemplo, la NFL utiliz√≥ los servicios de Akamai para presentar competiciones de f√∫tbol americano en vivo. Sin crear sus propios CDN, Netflix liber√≥ tiempo para trabajar en otros proyectos prioritarios.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La compa√±√≠a dedic√≥ mucho tiempo y esfuerzo a desarrollar clientes m√°s inteligentes. Netflix cre√≥ algoritmos que se adaptan a las condiciones cambiantes de la red. Incluso en caso de errores, sobrecargas de la red o del servidor, la compa√±√≠a quiere que los usuarios tengan la mejor imagen posible. Una de las tecnolog√≠as desarrolladas por la compa√±√≠a, cambiar a otra fuente de video, por ejemplo, a otro CDN u otro servidor, para lograr el mejor resultado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al mismo tiempo, Netflix dedica un gran esfuerzo a apoyar todos los servicios de AWS que mencionamos anteriormente. Netflix llama a los servicios de AWS un plano de referencia. El plano de control es un t√©rmino de red para la parte del sistema que controla todo lo dem√°s. En su cuerpo, su cerebro es el plano de control: controla todo lo dem√°s.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Y luego Netflix decidi√≥ que pod√≠an mejorar el servicio desarrollando su propia CDN. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Open Connect fue perfecto </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En 2011, Netflix se dio cuenta de que, en su escala, necesitaban una soluci√≥n CDN dedicada para maximizar la eficiencia de la red. </font><font style="vertical-align: inherit;">La distribuci√≥n de video es una competencia central de la empresa y puede ser una gran ventaja competitiva. </font><font style="vertical-align: inherit;">Por lo tanto, Netflix comenz√≥ a desarrollar Open Connect, su propio CDN especial. </font><font style="vertical-align: inherit;">Comenz√≥ en 2012. </font><font style="vertical-align: inherit;">Open Connect tiene muchas ventajas:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ella no es tan cara. </font><font style="vertical-align: inherit;">Los CDN de terceros son m√°s caros. </font><font style="vertical-align: inherit;">Hacerlo usted mismo significa ahorrar mucho dinero.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejor calidad </font><font style="vertical-align: inherit;">Netflix razon√≥ que al controlar toda la ruta del video (transcodificaci√≥n, CDN, clientes, dispositivos) podr√≠a proporcionar una excelente calidad de servicio.</font></font></li><li>  .         .          ,     . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los CDN de terceros deben ser compatibles con los usuarios que necesitan acceder a cualquier contenido desde cualquier parte del mundo. </font><font style="vertical-align: inherit;">La tarea de Netflix fue mucho m√°s simple. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netflix conoce a sus usuarios con seguridad cuando se registran. </font><font style="vertical-align: inherit;">Ella sabe qu√© videos transferir. </font><font style="vertical-align: inherit;">Solo porque solo necesita transferir grandes transmisiones de video, puede tomar muchas medidas para optimizar de manera inteligente las redes que otras CDN no pueden hacer. </font><font style="vertical-align: inherit;">Netflix tambi√©n sabe mucho sobre sus clientes. </font><font style="vertical-align: inherit;">La compa√±√≠a sabe qu√© videos les gustan y cu√°ndo les gusta verlos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con ese conocimiento, Netflix ha construido un CDN de alta velocidad. </font><font style="vertical-align: inherit;">Echemos un vistazo m√°s de cerca a c√≥mo funciona Open Connect.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abrir dispositivos de conexi√≥n </font></font></h2><br>  ¬øRecuerdas c√≥mo discutimos que las computadoras CDN se distribuyen por todo el mundo?  Netflix ha desarrollado su propio sistema inform√°tico de almacenamiento de video.  Netflix lo llama dispositivos Open Connect (dispositivos Open Connect, OCA).  As√≠ es como se ve√≠a una de las primeras instalaciones de OCA: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b34/0f8/629/b340f86291912cda64508cf51cb6a14f.jpg"><br><br>  En la foto, varios OCA a la vez.  Los OCA se agrupan en grupos de varios servidores.  Cada OCA es un servidor r√°pido optimizado para la salida de archivos grandes, con muchos discos duros o unidades flash que almacenan video.  As√≠ es como se ve uno de los servidores OCA: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dcc/2ec/fd7/dcc2ecfd70116f59a8282e5ed2610496.jpg"><br><br>  Para diferentes prop√≥sitos, hay varios tipos diferentes de OCA.  Hay grandes OCA capaces de almacenar todo el directorio de videos de la empresa.  Hay peque√±os OSA que solo pueden almacenar parte del directorio de video.  Las OCA peque√±as se rellenan con archivos de video diariamente durante las horas pico durante el almacenamiento en cach√© proactivo. <br><br>  En t√©rminos de equipamiento, la OSA no tiene nada sobresaliente.  Se basan en componentes de PC convencionales, y varios proveedores los ensamblan en varios paquetes.  Puedes comprar las mismas computadoras si quieres.  Tenga en cuenta que todas las computadoras de Netflix son rojas.  La compa√±√≠a los ordena espec√≠ficamente para que coincidan con el color del logotipo. <br><br>  En t√©rminos de software, los OSA usan el sistema operativo FreeBSD y nginx como servidor web.  S√≠, cada OSA es un servidor web.  Las transmisiones de video usan nginx.  Si estos nombres no le dicen nada, no se desanime, los incluyo solo para completar la imagen. <br><br>  La cantidad de OSA locales depende de la confiabilidad que Netflix quiere lograr en un lugar en particular, la cantidad de tr√°fico que atiende y el porcentaje de tr√°fico que este centro puede enviar como transmisi√≥n.  Cuando hace clic en "reproducir", ve una transmisi√≥n de video proveniente de un OSA espec√≠fico, como el anterior, ubicado cerca de usted. <br><br>  Para la mejor experiencia de visualizaci√≥n, a Netflix le gustar√≠a almacenar el video en cach√© directamente en su hogar.  Pero por ahora, esto no es pr√°ctico.  La siguiente opci√≥n m√°s conveniente es colocar un mini-Netflix cerca de su hogar.  ¬øC√≥mo se puede hacer esto? <br><br><h2>  ¬øD√≥nde aloja Netflix el OCA? </h2><br>  Netflix distribuye grandes cantidades de video desde miles de servidores ubicados en m√°s de 1000 centros de datos en todo el mundo.  Eche un vistazo a este mapa de ubicaci√≥n del servidor de video: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/989/432/e6e/989432e6e76da6fbc748bf7526e1b0a5.jpg"><br><br>  Otros servicios de video, como YouTube y Amazon, entregan video a trav√©s de sus propias redes.  Estas compa√±√≠as literalmente han construido sus propias redes globales para entregar videos a los usuarios.  Es muy complicado y costoso.  Netflix adopta un enfoque completamente diferente para construir una CDN. <br><br>  Netflix no funciona en su red, no funciona desde sus propios centros de datos.  En cambio, los proveedores de servicios de Internet (ISP) acuerdan hospedar la OCA.  Netflix ofrece a los proveedores de forma gratuita integrar sus servidores en su red, adem√°s, coloca el OSA cerca de los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">puntos de intercambio de tr√°fico</a> (ubicaci√≥n de intercambio de Internet, IXP). <br><br>  Esta estrategia le permite a Netflix no construir sus propios centros de datos, pero la compa√±√≠a obtiene todas las ventajas de estar en ese centro, simplemente pertenece a otra persona.  Ingenioso!  Dividamos los √∫ltimos p√°rrafos en pasos m√°s simples. <br><br><h2>  Usando ISP para crear un CDN </h2><br>  ISP es su proveedor de servicios de internet.  Este es el que le proporciona Internet como servicio.  Puede ser Verizon, Comcast, Beeline o uno de los miles de otros.  Lo principal es que los ISP se encuentran en todo el mundo y est√°n cerca de los clientes.  Al alojar OCA en centros de datos de ISP, Netflix tambi√©n se distribuye en todo el mundo y cerca de sus clientes. <br><br><h2>  Usando IXP para crear un CDN </h2><br>  Un punto de intercambio de tr√°fico es un centro de datos donde ISP y CDN intercambian tr√°fico entre redes.  Es como ir a una fiesta para intercambiar regalos de Navidad con amigos.  Compartir es m√°s f√°cil si todos se han reunido en un solo lugar. <br><br>  IXP diseminado por todo el mundo: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/711/42c/f34/71142cf34f7a2e0377a0e678e09f1cf6.jpg"><br><br>  As√≠ es como se ve el IXP en Londres: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ac/d18/980/0acd1898087a4b6bb0c6d191b2429f2b.jpg"><br><br>  Si se acerca a estos cables de fibra √≥ptica de color amarillo, esto es lo que ver√° (basado en el punto de intercambio AMS-IX en Amsterdam): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/90d/656/136/90d656136a66b2ccfb7d519b3729819b.jpg"><br><br>  Cada cable conecta una red a otra.  As√≠ es como las diferentes redes intercambian tr√°fico entre s√≠.  IXP es como un intercambio de carreteras, solo con cables: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c85/311/e9f/c85311e9f4c874c23e089313b7cd43f4.jpg"><br><br>  Para Netflix, esta es otra ventaja.  Los IXP se encuentran en todo el mundo.  Al colocar el OSA en IXP, la compa√±√≠a ya no puede tener sus propios centros de datos. <br><br><h2>  Video en cach√© proactivo en OSA </h2><br>  Netflix tiene un mont√≥n de videos ubicados en S3.  Las computadoras de transmisi√≥n de video se encuentran en todo el mundo.  Solo falta una cosa: ¬°el video en s√≠!  Netflix usa un proceso llamado almacenamiento en cach√© proactivo para copiar eficientemente el video a OCA. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c1b/c17/728/c1bc17728e459f6fb135da8e8cb59cd1.jpg"><br><br>  ¬øQu√© es el cach√©?  cach√© - cach√©]?  Este es un lugar a menudo ubicado en la tierra donde se almacenan secretamente cartuchos secretos, alimentos y tesoros.  ¬øSabes c√≥mo las ardillas esconden nueces para el invierno?  Cada lugar donde una ardilla escond√≠a una nuez es un escondite.  En invierno, cualquier ardilla puede encontrar un alijo de nueces y masticarlas.  Los exploradores del √Årtico env√≠an peque√±os equipos por delante que almacenan alimentos, combustible y otros suministros a lo largo del camino que siguen.  Un equipo m√°s grande corriendo detr√°s se detiene en cada cach√© y restaura.  Tanto las prote√≠nas como los investigadores del √Årtico trabajan de manera proactiva;  est√°n haciendo algo por adelantado para prepararse para el futuro. <br><br>  Cada OCA es un cach√© de video de lo que probablemente quieras ver.  Netflix almacena en cach√© el video, prediciendo lo que quieres ver.  En todo el mundo, Netflix sabe con gran certeza que a sus clientes les encanta mirar.  ¬øRecuerdas que dijimos que Netflix es una empresa basada en datos?  Ella usa datos de popularidad para predecir qu√© videos es probable que sus clientes quieran ver ma√±ana en cualquier lugar.  Por lugar aqu√≠ se entiende un cl√∫ster OSA ubicado en el ISP o IXP.  La compa√±√≠a copia los videos predichos a uno o m√°s OCA en cada uno de los lugares.  Esto se llama un dise√±o preliminar.  El video est√° alojado en la OSA antes de que alguien lo solicite.  Como resultado, los clientes reciben un excelente servicio.  El video que quieren ver ya est√° cerca de ellos, en una forma lista para ver. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/413/f48/a7b/413f48a7b2b1a431181206df70fabca7.jpg"><br><br>  Netflix funciona con los llamados  cach√© vinculado.  Los OCA peque√±os son alojados por ISP o IXP.  Son demasiado peque√±os para caber en todo el cat√°logo de videos.  En otros lugares, hay OSA que tienen casi todo el directorio de videos de Netflix.  Y en otro lugar hay lugares donde el OSA en el que contienen todo el cat√°logo de Netflix.  Reciben video de S3. <br><br>  Todas las noches, el OSA se despierta y sondea el servicio de AWS para saber qu√© tipo de videos necesita.  El servicio le env√≠a una lista de videos que deber√≠a tener, basados ‚Äã‚Äãen predicciones.  Cada OCA es responsable de tener todos los videos en esta lista.  Si uno de los OCA en un lugar tiene uno de los videos necesarios, entonces el OCA en cach√© copiar√° este video de √©l.  De lo contrario, el video se encontrar√° y se tomar√° de alg√∫n OSA, ubicado no muy lejos. <br><br>  Como Netflix predice que ser√° popular ma√±ana, siempre hay una desventaja un d√≠a antes de que se necesite el video en la OSA.  Esto significa que el video se puede copiar en un momento silencioso, fuera de la carga m√°xima, lo que reduce en gran medida el uso del ancho de banda del ISP. <br><br>  Open Connect nunca tiene errores de cach√©.  Una falla es cuando se solicita un video espec√≠fico de la OSA, y √©l responde que no lo tiene.  Las fallas ocurren en otros CDN porque no pueden permitirse copiar todo el contenido en todas partes.  Como Netflix conoce todos los videos que deben almacenarse en cach√©, sabe exactamente d√≥nde y qu√© videos est√°n en qu√© momento.  Si un OSA peque√±o no tiene el video deseado, estar√° garantizado por uno de los principales OSA. <br><br>  ¬øY por qu√© Netflix no copia todos sus videos a todos los OCA del mundo?  Su directorio de videos es demasiado grande para eso.  En 2013, el volumen del cat√°logo super√≥ los 3 petabytes;  lo que √©l es hoy, no lo s√©, solo puedo asumir eso mucho m√°s.  Es por eso que la compa√±√≠a ha desarrollado un m√©todo para seleccionar archivos de video que deben almacenarse en cada OSA, utilizando datos que predicen que los suscriptores querr√°n verlos. <br><br>  Toma un ejemplo.  "House of Cards" es un espect√°culo muy popular.  ¬øA qu√© OSA se debe copiar?  Lo m√°s probable, en todas partes, ya que los suscriptores de todo el mundo quieren verlo.  Pero, ¬øqu√© pasa si el video no es tan popular como el House of Cards?  Netflix decide en qu√© lugares se deben almacenar las copias para satisfacer mejor las necesidades de todos los clientes inmediatos. <br><br>  En un lugar, los videos m√°s populares se copian a muchos OSA.  Cuanto m√°s popular sea el video, m√°s servidores almacenar√°n una copia del mismo.  Por qu√©  Si un video muy popular tuviera solo una copia, la transmisi√≥n de video a todos los clientes sobrecargar√≠a el servidor. <br><br>  Un video no se considera preparado para su distribuci√≥n si se copia a un solo OSA.  Netflix quiere poder reproducir el mismo contenido al mismo tiempo en todo el mundo.  Solo cuando hay una cantidad suficiente de OSA con una cantidad suficiente de copias del video para proporcionar la calidad adecuada, el video se considera preparado para su visualizaci√≥n. <br><br>  Por ejemplo, la segunda temporada del show de Daredevil en 2016 fue la primera vez que Netflix lanz√≥ todos los episodios de la serie en todos los dispositivos en todos los pa√≠ses al mismo tiempo. <br><br><h2>  Colocaci√≥n de OSA: ¬øpor qu√© los proveedores necesitan esto? </h2><br>  ¬øPor qu√© los proveedores aceptan hospedar cl√∫steres de OSA?  A primera vista, esto es demasiado generoso, pero ser√° interesante para usted descubrir que el beneficio personal est√° realmente involucrado aqu√≠.  Para entender esto, necesitamos hablar sobre c√≥mo funcionan las redes.  En este libro, discutimos que el acceso a los servicios en la nube es a trav√©s de Internet.  En el caso de Netflix, esto no es as√≠: al ver videos a trav√©s de la aplicaci√≥n Netflix, se comunica con AWS a trav√©s de Internet.  [no est√° muy claro qu√© diferencia ten√≠a en mente el autor // aprox.  perev.] <br><br>  Internet es la interconexi√≥n de redes.  Tiene un proveedor que brinda acceso a Internet.  Recibo mi servicio de internet de Comcast.  Esto significa que mi casa est√° conectada a la red Comcast a trav√©s de fibra √≥ptica.  La red de Comcast les pertenece: esto no es Internet, Internet es otra cosa. <br><br>  Supongamos que quiero hacer una b√∫squeda en Google y escribo una solicitud en el navegador y presiono Enter.  Mi solicitud primero pasa por la red de Comcast.  Google no se encuentra en la red de Comcast.  En alg√∫n momento, mi solicitud debe ir a la red de Google.  Para esto, est√° Internet.  Internet conecta la red de Comcast a la red de Google.  Existen protocolos de enrutamiento que funcionan a la manera de un controlador de tr√°fico en la calle y tr√°fico directo de red.  Cuando mi solicitud se env√≠a a Internet, se encuentra fuera de la red de Comcast y fuera de la red de Google.  Se encuentra en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">columna vertebral de Internet</a> .  Internet est√° conectado desde muchas redes privadas que deciden interactuar entre s√≠.  IXP es una de las formas en que las redes se comunican entre s√≠. <br><br>  En los Estados Unidos hay un mapa de redes de fibra distantes: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/204/83b/69a/20483b69a61535edd9aaa59f32f504f4.jpg"><br><br>  Netflix hizo lo siguiente con su Open Connect: aloj√≥ cl√∫steres OSA dentro de las redes ISP.  Esto significa que si veo un video de Netflix, estoy hablando con un OSA ubicado en la red de Comcast.  Todo mi tr√°fico de video va en su red y no se conecta. <br><br>  La clave para escalar la entrega de video es estar lo m√°s cerca posible del usuario.  Cuando hace esto, no est√° utilizando redes troncales de Internet.  Las solicitudes se satisfacen en la parte local de la red.  ¬øPor qu√© es eso bueno?  Recuerde, dijimos que Netflix ya consume m√°s del 37% del tr√°fico de Internet en los EE. UU.  Si el ISP no cooperara con la compa√±√≠a, usar√≠a a√∫n m√°s Internet.  Internet no pudo manejar todo el tr√°fico.  Los proveedores tendr√≠an que agregar m√°s capacidad, lo cual es muy costoso. <br><br>  Ahora, casi el 100% del contenido de Netflix se transmite dentro de las redes de proveedores.  Esto reduce el costo del mantenimiento de la red, ya que no obstruye Internet.  Al mismo tiempo, los suscriptores de Netflix reciben videos de alta calidad y el rendimiento de la red mejora para todos.  Todos ganan. <br><br><h2>  Open Connect confiable y resistente </h2><br>  Ya hemos discutido c√≥mo Netflix aumenta la confiabilidad del sistema al trabajar en tres regiones de AWS.  La arquitectura Open Connect logra los mismos objetivos.  Esto puede no ser obvio, pero los OCA son independientes entre s√≠.  Los OCA funcionan como archipi√©lagos de entrega de video aut√≥nomos.  Los suscriptores que reciben video de un OSA no sufren fallas de otro OSA. <br><br>  ¬øQu√© sucede cuando falla el OSA?  El programa cliente que est√° utilizando cambia instant√°neamente a otro OSA y reanuda la visualizaci√≥n.  ¬øQu√© sucede si demasiadas personas usan OCA en un solo lugar?  El programa cliente encuentra un OSA menos cargado.  ¬øQu√© sucede si la red utilizada para transmitir video est√° sobrecargada?  Lo mismo: el programa encuentra otro OSA en la red que funciona mejor.  Open Connect es un sistema muy confiable y tolerante a fallas. <br><br><h2>  Netflix controla al cliente </h2><br>  Netflix maneja inteligentemente las fallas porque controla al cliente en todos los dispositivos.  La propia empresa desarrolla aplicaciones para Android e iOS, por lo que podemos esperar que las controle.  Pero incluso en plataformas como Smart TV, donde Netflix no cre√≥ clientes, todav√≠a lo controla porque controla el paquete de desarrollo de aplicaciones (SDK). <br><br>  Los SDK son un conjunto de programas de desarrollo que le permiten crear aplicaciones.  Cada aplicaci√≥n de Netflix realiza solicitudes de AWS y reproduce videos usando el SDK.  Al controlar el SDK, Netflix puede adaptarse constantemente y en tiempo real a redes lentas, OSA fallidos y otros posibles problemas. <br><br>  Y finalmente: esto es lo que sucede cuando haces clic en "reproducir" <br><br>  Recorrimos un largo camino hacia esto, y aprendimos mucho.  Esto es lo que sabemos en este momento: <br><br><ul><li>  Netflix se puede dividir en tres partes: backend, cliente y CDN. </li><li>  AWS gestiona todas las solicitudes de los clientes. </li><li>  Todos los videos se transfieren desde el dispositivo Open Connect (OCA) m√°s cercano al CDN. </li><li>  Netflix funciona con tres regiones de AWS y generalmente puede hacer frente a fallas en cualquier regi√≥n para que nadie se d√© cuenta. </li><li>  El nuevo contenido se convierte en la compa√±√≠a en muchos formatos diferentes, para que pueda elegir la opci√≥n m√°s adecuada en funci√≥n del tipo de dispositivo, la calidad de la red, la ubicaci√≥n geogr√°fica y la tasa de suscriptores. </li><li>  Todos los d√≠as, en Open Connect, la compa√±√≠a distribuye videos en todo el mundo sin predecir lo que los suscriptores querr√°n ver en diferentes partes del mundo. </li></ul><br>  Aqu√≠ est√° la imagen que Netflix describe usando el proceso de reproducci√≥n: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/077/f3a/59e/077f3a59eba98e189f19abfcf4c91a9a.jpg"><br><br>  Terminemos: <br><br><ul><li>  Selecciona un video para mirar usando un cliente que se ejecuta en alg√∫n dispositivo.  El cliente env√≠a una solicitud de reproducci√≥n, indicando qu√© video necesita, al servicio Playback Apps de AWS. </li><li>  No hemos discutido esto antes, pero la mayor√≠a de lo que sucede cuando hace clic en "reproducir" est√° relacionado con la licencia.  No todas las partes del mundo tienen una licencia para ver cada video.  Netflix debe determinar si tiene una licencia para ver un video espec√≠fico.  No discutiremos este tema aburrido, pero tenga en cuenta que esto sucede todo el tiempo.  Una de las razones por las que Netflix comenz√≥ a crear su propio contenido fue un intento de evitar problemas de licencia [y todav√≠a hay <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">situaciones absurdas</a> en las que la compa√±√≠a no puede mostrar la serie de producci√≥n de Netflix porque le vendi√≥ los derechos a un proveedor de contenido local, sin mencionar todos los territorios prohibidos para el trabajo de empresas estadounidenses // aprox.  transl.].  Netflix quiere lanzar programas para todas las personas en todo el mundo al mismo tiempo.  Crear su propio contenido es la forma m√°s f√°cil de evitar problemas de licencia. </li><li>  Dada toda la informaci√≥n relevante, el servicio Playback Apps devuelve la URL a varios, hasta diez, servidores OSA.  Estas son las mismas URL que puede ver en su navegador.  Netflix utiliza su direcci√≥n IP e informaci√≥n de su proveedor para determinar qu√© cl√∫steres de OSA son los mejores para usted. </li><li>  El cliente analiza la situaci√≥n y selecciona el OCA.  Comprueba la calidad de la conexi√≥n con cada uno de ellos.  Se conectar√° al OSA m√°s r√°pido y confiable.  El cliente realiza constantemente estas comprobaciones durante la reproducci√≥n de video. </li><li>  El cliente est√° tratando de elegir la mejor manera de recibir contenido del OSA. </li><li>  El cliente se conecta al OSA y comienza a emitir la transmisi√≥n de video en su dispositivo. </li><li>  Al mirar un video, ¬øha notado que la calidad de la imagen est√° cambiando?  A veces habr√° p√≠xeles, y despu√©s de un tiempo la imagen vuelve a ser de alta calidad.  Esto se debe a que el cliente se adapta a la calidad de la red.  Si la calidad disminuye, el cliente en consecuencia reduce la calidad del video.  Si la calidad cae demasiado, el cliente cambiar√° a otro OSA. </li></ul><br>  Esto es lo que sucede cuando haces clic en "reproducir" en Netflix.  ¬øQui√©n hubiera pensado que algo tan simple, como mirar un video, podr√≠a ser tan complicado? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es409583/">https://habr.com/ru/post/es409583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es409565/index.html">¬øQu√© sucede si el compilador no es compatible con las interfaces de desplazamiento cero de VMT?</a></li>
<li><a href="../es409569/index.html">Desprendimiento de retina: lo que es importante saber al respecto</a></li>
<li><a href="../es409571/index.html">C√≥mo crear un alien√≠gena - pensamientos sobre el dise√±o de especies alien√≠genas</a></li>
<li><a href="../es409575/index.html">Divisi√≥n por cero, ¬øes la respuesta infinita para nuestro universo?</a></li>
<li><a href="../es409579/index.html">Intel NUC Hades Canyon: un nuevo cr√°neo con cerebro. Y ojos</a></li>
<li><a href="../es409585/index.html">Telegram planea crear su propia plataforma blockchain</a></li>
<li><a href="../es409593/index.html">¬øHa perdido el pop su atractivo?</a></li>
<li><a href="../es409595/index.html">Descripci√≥n general de los pl√°sticos FDM de alta temperatura para la impresi√≥n 3D industrial</a></li>
<li><a href="../es409601/index.html">Revisi√≥n 3Dtool de la impresora 3D Zenit</a></li>
<li><a href="../es409603/index.html">Los artilugios m√°s extra√±os del CES 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>