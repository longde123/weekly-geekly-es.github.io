<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵 🈸 🐙 Curso MIT "Segurança de sistemas de computadores". Aula 11: Linguagem de Programação Ur / Web, Parte 2 🤶🏼 👻 🧖🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula nº 6.858. "Segurança de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Segurança de sistemas de computadores". Aula 11: Linguagem de Programação Ur / Web, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/425999/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula nº 6.858.  "Segurança de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security é um curso sobre o desenvolvimento e implementação de sistemas de computador seguros.  As palestras abrangem modelos de ameaças, ataques que comprometem a segurança e técnicas de segurança baseadas em trabalhos científicos recentes.  Os tópicos incluem segurança do sistema operacional (SO), recursos, gerenciamento de fluxo de informações, segurança de idiomas, protocolos de rede, segurança de hardware e segurança de aplicativos da web. <br><br>  Palestra 1: “Introdução: modelos de ameaças” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: “Controle de ataques de hackers” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: “Estouros de Buffer: Explorações e Proteção” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: “Separação de Privilégios” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: “De onde vêm os sistemas de segurança?” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: “Oportunidades” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: “Sandbox do Cliente Nativo” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: “Modelo de Segurança de Rede” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: “Segurança de aplicativos da Web” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: “Execução Simbólica” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: “Linguagem de Programação Ur / Web” <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Um pouco mais tarde, falarei sobre solicitações falsas entre sites.  Acho que as notas da aula explicam por que o script crossite não funciona no nosso caso.  O motivo é que, sempre que você cria uma "peça" de sintaxe, esse objeto, árvore e diferentes partes dessa árvore não são apenas cadeias de caracteres. <br><br><img src="https://habrastorage.org/webt/ve/hh/rb/vehhrbj_e2ce4yi9op7j_slgja0.jpeg"><br><br>  Você não pode acidentalmente transformar uma string de usuário em uma árvore de estrutura, isso não acontece automaticamente, porque é difícil escrever um tradutor desse tipo.  Mas você pode tentar escrever um tradutor para Ur / Web.  Em breve, darei um exemplo que ajudará a reduzir sua preocupação com isso.  Quero mostrar o que essa sintaxe realmente se transforma no compilador. <br><br>  Pode parecer que podemos apenas adicionar aspas duplas ao HTML para que possamos retornar ao mundo normal.  Alguém pode se perguntar por que é tão importante pular aspas duplas, colocando XML em vez disso? <br><br>  Você pode acreditar que este é o código equivalente para o que faz.  Aqui está uma tag de função embutida que cria o nó da árvore de um documento HTML.  Em seguida, coloco os argumentos que expressam o estilo CSS neste nó.  Na verdade, nada acontece aqui; portanto, existem muitas maneiras diferentes de dizer "Nenhum"; ele não requer atributos. <br><br>  Em seguida, coloquei a tag body, isso é outra coisa da biblioteca padrão.  Todas as tags padrão são funções de primeira classe na biblioteca. <br><br><img src="https://habrastorage.org/webt/yg/w6/e3/ygw6e3j_wcffkpt-lnrp0pjzvsg.jpeg"><br><br>  Em seguida, precisamos colocar o texto "Hello World" no corpo, por isso chamamos a função cdata, em que cdata é a palavra XML para dados de caracteres ou apenas uma constante de string, e podemos colocar o texto aqui.  Isso deve nos dar o mesmo resultado de antes.  Vamos ver se isso funciona. <br><br>  Agora voltarei à página.  Vemos a mesma coisa que antes, então é a mesma que a função fazia no começo. <br><br><img src="https://habrastorage.org/webt/d8/kj/5c/d8kj5caq5wynvitakfgozvx9zbg.jpeg"><br><br>  Isto não é apenas construção de linhas.  Isso causa uma série de operações projetadas para que somente elas permitam a criação de HTML válido e nunca serão capazes de interpretar implicitamente a linha como código, em vez de apenas colocar o conteúdo na página que deveria estar lá. <br><br><img src="https://habrastorage.org/webt/t4/lz/ky/t4lzkym3pllpxtd46p3ydq9hxiw.jpeg"><br><br>  Agora vou tentar fazer algo menos complicado, o que pode ser uma preocupação.  Vamos decidir que estamos realmente felizes em ver o mundo, para destacar a palavra "olá" em negrito e compilá-la novamente. <br><br><img src="https://habrastorage.org/webt/i4/9w/wr/i49wwrvxwmjbvsdmabaux8vbpze.jpeg"><br><br>  Você vê o que aconteceu na página - a palavra não ficou em negrito porque o compilador mostra como o texto é interpretado em vez da marcação.  Esta é uma representação da sintaxe HTML como uma função que constrói a sintaxe sem as convenções de codificação usuais incorporadas a ela.  Essa função interpreta tudo da maneira que você deseja escrever, sem pensar em nada de si mesmo. <br><br>  Assim, a implementação do cdata faz o que é comumente chamado de escape ou "escape".  Mas o programador não precisa saber que existe algo como escapar.  Você pode pensar nisso como um conjunto de funções convenientes para criar uma árvore de objetos que descreve a página. <br><br>  Ouvi dizer que você deseja ver o HTML que é gerado aqui.  Ok, isso não será a coisa mais emocionante.  Vou tentar aumentá-lo na tela, mas não cabe em uma linha. <br><br><img src="https://habrastorage.org/webt/u1/6d/lm/u16dlmtcovtixg6zbgscm6t3eym.jpeg"><br><br>  <b>Aluno:</b> Como você está usando XHTML, poderia usar o caminho para dados de caracteres de cdata em vez de fazê-lo manualmente? <br><br>  <b>Professor:</b> Eu acho, mas isso exigiria mais XML de mim do que os que tenho.  Havia outra boa pergunta sobre URLs JavaScript.  Se permitirmos URLs JavaScript, criaremos um backdoor para interpretar automaticamente as strings como programas em tempo de execução.  E isso causa todos os tipos de problemas. <br><br>  Vamos tentar evitá-lo.  Voltarei, primeiro, à versão abreviada e farei algumas linhas dentro do corpo.  E vamos colocar um link que tentará fazer algo apropriado.  Aqui deixamos espaço para mensagens de erro. <br><br><img src="https://habrastorage.org/webt/ce/qh/fh/ceqhfhp7dj49uaakv-uyc6pgdug.jpeg"><br><br>  Em seguida, execute o compilador e veja como ele funciona. <br><br><img src="https://habrastorage.org/webt/le/yj/bd/leyjbd0ft_iuzl0sp09sul5mlfw.jpeg"><br><br>  URL inválido, entrada de JavaScript e a frase "passado para abençoar" ou "passado para abençoar".  O Bless é incorporado à função, que é o gatekeeper que resolve o URL.  Por padrão, URLs não são permitidos; portanto, é claro que essa opção não é permitida.  Em geral, é uma péssima idéia escrever sua própria política de URL para poder criar valores que representam URLs JavaScript.  Porque, então, todos os tipos de garantias serão necessários, devido ao fato de que esses endereços podem ser inválidos. <br><br>  Para deixar um pouco mais claro como isso funciona, deixe-me decompor esse código em uma função separada que chama o vinculador que aceita o URL.  Assim, uma URL é um tipo, não uma string.  Esse é o tipo que indica a URL, que é explicitamente permitida pela política do seu aplicativo. <br><br>  Eu uso chaves, como em algumas estruturas de modelo HTML populares, para indicar a inserção de algum código da linguagem host dentro do HTML que criamos.  E tudo isso é feito de forma que o tipo seja verificado estaticamente.  Portanto, o sistema verificará: "Sim, este é o local ao qual o URL pertence e ele diz que é realmente um URL, então está tudo bem." <br><br><img src="https://habrastorage.org/webt/dk/k_/c1/dkk_c19amvl0mtc-cavdq5gyy3k.jpeg"><br><br>  E então eu posso organizar explicitamente a chamada de bênção dizendo: "vamos chamar a função vinculador aqui com base nos resultados da" bênção "deste URL".  Depois disso, devemos receber a mesma mensagem de erro de antes. <br><br><img src="https://habrastorage.org/webt/1w/vx/2v/1wvx2vipa9mnkzydjl-oxjheurk.jpeg"><br><br>  Infelizmente, não posso executar isso para você e esperar até que ele falhe, mas posso dizer que definitivamente falhará, porque intencionalmente cometi um erro do compilador.  Este URL não será aceito pela política de URL. <br><br>  Se eu perdesse essa chamada de benção, seria um erro mais sério no momento da compilação, porque você tem a string e o URL certo, e eles são de tipos diferentes. <br><br><img src="https://habrastorage.org/webt/ew/8u/yd/ew8uydi-n7vvxhaofm09tuhuvqq.jpeg"><br><br>  Vamos torná-lo mais interessante.  Vou abrir um arquivo de configuração para esta demonstração.  É bem curto, pelo menos se você olhar para qualquer estrutura de aplicativo da web Java.  Eles têm esses arquivos XML gigantes para configuração, então tudo está muito melhor conosco. <br><br><img src="https://habrastorage.org/webt/f2/0x/zn/f20xznx-xrcpolzz93wukdfq3o8.jpeg"><br><br>  Podemos adicionar uma regra que declara que tudo é permitido na Wikipedia e depois colocar o URL da Wikipedia no corpo. <br><br><img src="https://habrastorage.org/webt/e4/wq/ia/e4wqiapjhdtiq4s354nmod5cwus.jpeg"><br><br>  Agora vá para a página e clique em Please Click. <br><br><img src="https://habrastorage.org/webt/f1/mb/3t/f1mb3tsp09v-h6vrjm0rtjxgcku.jpeg"><br><br>  Aqui está o que temos: Endereço da Wikipedia não encontrado. <br><br><img src="https://habrastorage.org/webt/wl/qx/il/wlqxilbfs69vmxd77wtvj_m5e94.jpeg"><br><br>  Portanto, a idéia principal é ter um tipo abstrato de URL, como se você pudesse ter um tipo abstrato de tabela hash que codifique variações da aparência da tabela hash e evite que o código entre na matriz da tabela hash.  Nós podemos fazer o mesmo pela URL.  Usando essa função de abençoar, o sistema garante que todo valor desse tipo seja aprovado em algum momento. <br><br>  Por exemplo, com essa política, sabemos que nunca teremos um URL JavaScript, para que você possa pegar com segurança o valor do URL e usá-lo como um link.  Isso não interromperá as abstrações básicas do idioma. <br><br>  <b>Aluno: é</b> possível usar JavaScript "puro" inserindo-o na string do corpo? <br><br>  <b>Professor:</b> sim e não.  Em vez de JavaScript, você incorpora o código de Ur / Web que executa algum tipo de tarefa.  Agora vou digitar o comando: <br><br><pre><code class="hljs xml">return <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xml</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{alert</span></span></span><span class="hljs-tag"> “</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LOADED</span></span></span><span class="hljs-tag">”}&gt;</span></span></code> </pre> <br>  E você verá o que aconteceu - o intérprete colocou uma janela na tela com a inscrição “Loaded” - “Loaded”. <br><br><img src="https://habrastorage.org/webt/hs/co/jm/hscojmoxytzkmr4qxk8touo4e34.jpeg"><br><br>  Tentar interpretar o código JavaScript na forma de string como um programa seria um desastre.  Veja bem, podemos colocar o código na mesma linguagem de programação com a qual você está trabalhando, já limitado por essas chaves.  E então é compilado automaticamente em JavaScript para ser executado no lado do cliente. <br><br>  Observo que as versões mais recentes dos navegadores são capazes de evitar erros de interpretação de caracteres, mas alguns navegadores mais antigos são capazes de confundir alguma coisa.  De qualquer forma, todos os elementos de caractere serão interpretados como UTF-8 se eles entrarem no documento.  Se houver algum problema com uma codificação diferente, essa codificação não deve ser aplicada aqui. <br><br>  <b>Aluno: O</b> compilador verifica se a sequência contém um URL válido.  Mas, se você calcular uma string no tempo de execução, o bless verificará no tempo de execução se uma determinada string é válida ou não? <br><br>  <b>Professor:</b> vamos criar um formulário para testar esta afirmação e colocá-la aqui.  Nós inserimos nosso URL na caixa de texto e depois inserimos o botão enviar envio. <br><br><img src="https://habrastorage.org/webt/d_/aq/fp/d_aqfpi89gk6azs49odajmhmnz0.jpeg"><br><br>  Quando você clica nela, a função vinculador será chamada com a gravação de um valor para cada campo no formulário.  Nesse caso, existe apenas um campo chamado "URL", portanto o vinculador processará a entrada que contém o URL como um tipo de string.  E então tentamos aplicar a função abençoar e ver se funciona. <br><br><img src="https://habrastorage.org/webt/ru/na/8z/runa8zxo9obi7hayqrvi_gzhecs.jpeg"><br><br>  Você vê um exemplo de mensagens de erro ao digitar o tipo errado de URL, uma daquelas coisas que não fará sentido se você não estiver familiarizado com Haskell.  Esqueci de inserir a função de retorno aqui.  Pelo menos agora é mais como um programa Java.  E também esqueci de dizer que agora é uma página inteira.  Portanto, não podemos usar a tag a até estarmos dentro da tag body. <br><br><img src="https://habrastorage.org/webt/-q/vp/oh/-qvpohawzytpmotyrlwk4y1oo7q.jpeg"><br><br>  Agora execute o compilador, vá para a nossa página, clique no botão Please Click, digite um endereço inexistente abstruso. <br><br><img src="https://habrastorage.org/webt/f8/lc/of/f8lcofwmgurypdi_tekg0jifwgu.jpeg"><br><br>  Em seguida, clicamos em Enviar consulta - "Enviar uma solicitação" e recebemos uma mensagem de erro - o endereço desse tipo não é resolvido. <br><br><img src="https://habrastorage.org/webt/ry/mu/u5/rymuu5ruqj2f01-1y4saidwc2bm.jpeg"><br><br>  Se inserirmos o URL correto, como mostrado na próxima tela, e clicar em Enviar consulta, nenhuma mensagem de erro será exibida. <br><br><img src="https://habrastorage.org/webt/5a/fx/hy/5afxhy3lpksvux1vl88noj1uh7c.jpeg"><br><br>  Acho que a resposta para sua pergunta foi longa e não muito emocionante. <br><br>  <b>Aluno:</b> existem condições mais rigorosas para os URLs além da proibição de usar JavaScript? <br>  <b>Professor:</b> Atualmente, restrições mais rigorosas são simplesmente constantes e prefixos.  Mas você também pode criar suas próprias regras de proibição, e elas funcionarão na ordem em que você as escrever. <br><br>  <b>Aluno:</b> acontece que, se você seguir a proibição de JavaScript, mas colocar uma quebra de linha no meio da palavra "JavaScript", o compilador poderá interpretar isso ... <br><br>  <b>Professor:</b> sim, isso seria muito ruim.  É por isso que é bom seguir a abordagem da lista de permissões, em vez de usar a abordagem da lista negra.  Você provavelmente deseja que todas as regras iniciem com um protocolo específico, como HTTP, e permita apenas o que se encaixa no seu conjunto de protocolos aprovado.  Eu recomendo fazer exatamente isso. <br><br>  <b>Aluno:</b> em muitos sites, você pode permitir que os usuários troquem links. Nesse caso, é necessário permitir links em qualquer lugar. <br><br>  <b>Professor:</b> você pode permitir links se quiser que seus usuários compartilhem links JavaScript ou, não sei, links em flash ou o que for permitido lá.  Veja bem, você pode criar uma "lista branca" de todos os HTTP, HTTPS, URLs e, assim, garantir a operação segura da maioria dos sites.  Essa abordagem é apenas um pouco mais fraca do que permitir apenas URLs específicos.  Mas pelo menos você pode eliminar completamente a possibilidade de execução automática de uma string como um programa. <br><br>  Deixe-me dar um exemplo de resumo, que é um exemplo de um sistema simples de sala de bate-papo apresentado no banco de dados.  O usuário pode clicar no link para ir para a sala e enviar uma mensagem.  Esta é a primeira de várias opções para o esquema. <br><br><img src="https://habrastorage.org/webt/3y/vx/n-/3yvxn-vrddqytldmzo5qgms8pta.jpeg"><br><br>  Em primeiro lugar, observarei que vou recompilar isso.  E, magicamente, todas as tabelas declaradas do banco de dados serão adicionadas ao banco de dados, e podemos começar a usar o aplicativo.  Mas primeiro precisamos adicionar algumas salas de bate-papo.  Então, vamos abrir nossa interface para o banco de dados demo e inserir os valores "um" e "dois" na sala de tabelas. <br><br><img src="https://habrastorage.org/webt/rg/yg/yh/rgygyhyminzap26oeymfrpzodis.jpeg"><br><br>  Agora eles apareceram aqui. <br><br><img src="https://habrastorage.org/webt/73/o_/cs/73o_csz48d0mscpszk2xxbc_ozu.jpeg"><br><br>  Agora entramos na primeira sala de bate-papo e podemos nos divertir o dia inteiro enviando linhas de texto, por exemplo, uma primeira linha.  Será mais interessante tentar enviar HTML, e ele é imediatamente processado.  Este é um exemplo da principal funcionalidade do programa. <br><br><img src="https://habrastorage.org/webt/yg/z7/jv/ygz7jvrke7r5regxjxv0awozt-s.jpeg"><br><br>  Mais uma vez, veremos rapidamente como isso funciona, por isso temos essas duas tabelas SQL - sala de tabela e mensagem de tabela, que são simplesmente declaradas nesta primeira classe dentro da linguagem de programação.  E nós damos um diagrama de cada tabela.  E então, quando tentamos acessar essas tabelas, o compilador garante que elas sejam acessadas de acordo com um esquema de digitação promissor. <br><br><img src="https://habrastorage.org/webt/pn/kd/tq/pnkdtqy4u_xtusdwrpvxwv58tle.jpeg"><br><br>  Portanto, temos uma tabela de salas, em que cada sala é um registro que consiste em um ID de identificador, que é um número inteiro, e um Título, que é uma string.  Este é o tipo de visão em que simplesmente criamos registros.  Acabei de criar algumas salas no console do SQL.  Também temos uma notificação de que cada mensagem pertence a uma sala específica, a hora em que foi criada e o texto que é o conteúdo da mensagem. <br>  Agora deixe-me pular rapidamente para a função principal. <br><br><img src="https://habrastorage.org/webt/w9/p2/7m/w9p27msu5myieys9_dknkicarms.jpeg"><br><br>  Executamos uma consulta SQL - você vê um exemplo de sintaxe SQL incorporada ao Ur / Web.  Eu não quero entrar em chamadas de função através desta extensão da biblioteca padrão.  Será bastante detalhado, basta recordar minhas palavras sobre o fato de que a biblioteca padrão possui métodos para chamar funções que são formas válidas de criar uma consulta SQL. <br><br>  E essas funções têm tipos que os fazem imprimir solicitações para você, e não apenas garantem que a sintaxe é válida.  Esse código simplesmente itera sobre todas as linhas que saíram dessa consulta e gera partes do código HTML para cada uma delas. <br><br>  Em particular, colocaremos o resultado da consulta no campo Título e o converteremos em HTML com uma notação que inclui chaves.  Os colchetes indicam adicionalmente que ainda não é um pedaço real de HTML, mas converta-o para mim de maneira padrão.  Assim, podemos fazer com strings e inteiros e todos os dados de outros tipos. <br><br>  <b>Aluno:</b> se contivesse HTML malicioso ou algo mais, seria filtrado? <br><br>  <b>Professor:</b> sim, seria.  Em Ur / Web, você pode pensar nisso como construir uma árvore.  Este é um nó que representa algum texto.  Obviamente, o texto não pode fazer nada. <br><br>  <b>Aluno:</b> se este cabeçalho estivesse sob o controle do usuário e alguém tivesse conversado com o cabeçalho Alerta, não seria JavaScript? <br><br>  <b>Professor:</b> não será automaticamente interpretado como JavaScript, HTML ou qualquer outra coisa.  Será percebido pelo programa como texto simples. <br><br>  Então, voltando à nossa imagem na tela.  Temos este título Título, vamos enquadrá-lo com tags.  E, em vez de href, a maneira usual de vincular em HTML, usamos o atributo link, que é um tipo de pseudo-atributo ur / web que usa como argumento não a URL, mas principalmente expressões Ur / Web.  O ponto é que, quando você clica nesse link, essa expressão é iniciada para criar uma nova página que deve ser exibida. <br>  Nesse caso, fazemos uma chamada para a função de bate-papo, que é definida aqui na próxima tela, é isso que é. <br><br><img src="https://habrastorage.org/webt/-y/ig/jy/-yigjypz4hshhd_vij2eqzdp7po.jpeg"><br><br>  Não vou entrar em detalhes.  Mas temos mais algumas consultas SQL usando várias funções de biblioteca padrão para várias maneiras de usar os resultados solicitados. <br><br>  Geramos essa página HTML e dizemos que você está em um bate-papo com esse título, temos um formulário no qual o usuário pode inserir texto.  Este é o formulário que eu usei para demonstrar como o programa funcionou alguns minutos atrás.  O botão enviar formulário possui este atributo Adicionar contendo say, que é o nome da função Ur / Web.  Portanto, quando enviamos o formulário, chamamos essa função. <br><br>  A execução de mais algumas SQL insere novas linhas na tabela.  Saltamos automaticamente do ID da sala de bate-papo para os campos de texto que vieram aqui do formulário e eles são ocultados automaticamente conforme necessário.  Mas, novamente, em Ur / Web, você não precisa pensar em "escapar" da função dessa maneira.  Porque é apenas a sintaxe para construir uma árvore, não para uma string.  Portanto, não há como estranhar a análise de coisas estranhas que você não espera da maneira escolhida de interpretar a sintaxe. <br><br>  Portanto, como temos um widget neste formulário na forma de uma GUI gráfica e este é um campo de texto, o compilador conclui que o registro resultante do preenchimento do formulário da caixa de texto deve ter um elemento chamado "texto" do tipo string .  Essa codificação do formulário e as regras para digitação não são incorporadas ao idioma, mas são obtidas da biblioteca do Ur express, que na verdade controla esses formulários, determinando os tipos de funções válidas. <br>  Se você não tiver mais perguntas sobre essa parte do programa, passarei à próxima etapa.  Vou usar uma maneira de forçar o encapsulamento de várias partes de um aplicativo que suporta Ur / Web e que raramente suporta outros idiomas.  Eu vou pegar este quarto.  Vou pegar algumas definições e colocá-las em um módulo que encapsula algumas delas como privadas.  Em particular, as tabelas do banco de dados serão privadas, portanto ninguém poderá acessá-las diretamente. <br><br>  Você pode acessá-los apenas usando o conjunto de métodos que fornecemos.  Um método é executado dentro de uma transação e cria uma lista de registros com os campos ID e título das salas de bate-papo disponíveis. <br><br>  Em seguida, apenas expandimos essa operação de bate-papo.  E a única coisa que fiz aqui foi inserir um nome para o conceito ID - tipo ID.  Portanto, não estou dizendo apenas que o ID é um número inteiro, estou dizendo que esse é um novo tipo. <br><br><img src="https://habrastorage.org/webt/fr/sy/__/frsy__bkeyw4mwc6yf_d1wp2hss.jpeg"><br><br>  A única maneira pela qual o mundo externo pode entrar em contato com o bate-papo é obter uma lista de todas as salas, e a única maneira que o mundo externo pode usá-lo é chamar a função de bate-papo.  Digamos que este seja algum tipo abstrato de tabela de hash dentro da classe de tabelas de hash, onde são armazenados detalhes que explicam quais IDs são e como são produzidos internamente, sendo privados para este módulo, e o código do cliente que chama esse módulo não deve usá-los. <br><br>  Agora vou transferir toda essa sintaxe para baixo e colocá-la dentro do módulo, para que, por padrão, não seja exposta ao restante do código.  Em seguida, implemento esse método de salas.  Já temos a oportunidade de organizar um bate-papo.  Mas podemos implementar as salas de uma maneira mais simples, usando outra função de biblioteca padrão para interpretar a solicitação no formulário atual. <br>  Vamos apenas selecionar tudo da lista de quartos, classificados por nome.  Como sempre, essa consulta é um tipo de dados validado para nós.  E o sistema determina: “OK, essa expressão irá gerar uma lista de registros que correspondem ao tipo declarado na assinatura deste módulo.”  Portanto, agora, fora deste módulo, nenhum outro código pode mencionar uma tabela de sala ou tabela de mensagens. <br><br><img src="https://habrastorage.org/webt/r2/8e/72/r28e72dlrnyazx-qxx6r8cc9kdk.jpeg"><br><br>  Assim, pelo menos do ponto de vista desta aplicação, podemos aplicar a invariância necessária a partir dela.  Podemos até ocultar segredos dentro do módulo para que não haja problemas de segurança se qualquer outra parte do código puder obtê-los. <br><br>  <b>Aluno:</b> algum outro código também poderia implementar esse método de sala? <br><br>  <b>Professor:</b> Essa seria uma tabela completamente diferente.  Na verdade, podemos fazer isso inserindo um fragmento de 4 linhas em outro módulo. <br><br><img src="https://habrastorage.org/webt/uq/ud/lz/uqudlzms1a3nar8hpko4sngaguw.jpeg"><br><br>  Então podemos fazer o que quisermos com esta tabela.  Vou compilar, talvez em 30 segundos, e vamos ver o que acontece.  Mas, na verdade, esta é uma tabela diferente, como se você tivesse o mesmo nome privado, mas para duas classes Java diferentes. <br><br>  Portanto, você assume que dentro deste módulo existe um tipo abstrato chamado room, que contém o identificador de identificação e o título.  Isto não está correto.  O bate-papo aceita os parâmetros da sala como entrada.  Quando chamamos a função de bate-papo, ela será chamada via URL.  O ID e o Título são passados ​​para fora da representação da URL que chama a função.  Nós precisamos apenas do ID para implementar esta função.  Então, quando chamamos a função, na verdade chamamos o URL. <br>  Seria um desperdício em termos de uso de espaço e pareceria rude com o usuário se o cabeçalho fosse passado como um argumento adicional ao invocar o bate-papo por meio da URL.  Isso faz sentido?  Vamos olhar para a barra de URL neste slide. <br><br><img src="https://habrastorage.org/webt/_x/3r/ij/_x3rijim6yew7wwnimxvd98w7cy.jpeg"><br><br>  O identificador do canal que estamos seguindo é serializado automaticamente para o URL no final da linha.  E se transmitíssemos um registro que contenha o ID e o título Title, esse título também seria serializado, o que é pelo menos um pouco ilógico. <br><br>  54:10 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Segurança de sistemas de computadores".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aula 11: Linguagem de Programação Ur / Web, Parte 3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/XMEFdofERLI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  A versão completa do curso está disponível <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Obrigado por ficar conosco.  Você gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usuários da Habr em um análogo exclusivo de servidores básicos que inventamos para você:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as opções estão disponíveis com RAID1 e RAID10, até 24 núcleos e até 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 núcleos) 10GB DDR4 240GB SSD de 1Gbps até dezembro de graça</b> quando pagar por um período de seis meses, você pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente nós temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um prédio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425999/">https://habr.com/ru/post/pt425999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425989/index.html">Sob o capô do Graveyard Keeper: como os efeitos gráficos são implementados</a></li>
<li><a href="../pt425991/index.html">Como criamos hospedagem</a></li>
<li><a href="../pt425993/index.html">Como preencher a lacuna de gênero em tecnologia</a></li>
<li><a href="../pt425995/index.html">Visualize FHIR - o padrão de TI para medicina</a></li>
<li><a href="../pt425997/index.html">Curso MIT "Segurança de sistemas de computadores". Aula 11: Linguagem de Programação Ur / Web, Parte 1</a></li>
<li><a href="../pt426001/index.html">Curso MIT "Segurança de sistemas de computadores". Aula 11: Linguagem de Programação Ur / Web, Parte 3</a></li>
<li><a href="../pt426009/index.html">A resistência épica à falha 1 ou a Fox estava passando despercebida. Testando o anonimato e a segurança + VPN para o usuário</a></li>
<li><a href="../pt426013/index.html">Esteróides da carreira</a></li>
<li><a href="../pt426015/index.html">O uso de drones civis serrados para fotografia aérea geodésica profissional da área</a></li>
<li><a href="../pt426017/index.html">Como reduzir o número de experiências em animais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>