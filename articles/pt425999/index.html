<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµ üà∏ üêô Curso MIT "Seguran√ßa de sistemas de computadores". Aula 11: Linguagem de Programa√ß√£o Ur / Web, Parte 2 ü§∂üèº üëª üßñüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula n¬∫ 6.858. "Seguran√ßa de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguran√ßa de sistemas de computadores". Aula 11: Linguagem de Programa√ß√£o Ur / Web, Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/425999/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula n¬∫ 6.858.  "Seguran√ßa de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security √© um curso sobre o desenvolvimento e implementa√ß√£o de sistemas de computador seguros.  As palestras abrangem modelos de amea√ßas, ataques que comprometem a seguran√ßa e t√©cnicas de seguran√ßa baseadas em trabalhos cient√≠ficos recentes.  Os t√≥picos incluem seguran√ßa do sistema operacional (SO), recursos, gerenciamento de fluxo de informa√ß√µes, seguran√ßa de idiomas, protocolos de rede, seguran√ßa de hardware e seguran√ßa de aplicativos da web. <br><br>  Palestra 1: ‚ÄúIntrodu√ß√£o: modelos de amea√ßas‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: ‚ÄúControle de ataques de hackers‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: ‚ÄúEstouros de Buffer: Explora√ß√µes e Prote√ß√£o‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: ‚ÄúSepara√ß√£o de Privil√©gios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: ‚ÄúDe onde v√™m os sistemas de seguran√ßa?‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: ‚ÄúOportunidades‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: ‚ÄúSandbox do Cliente Nativo‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: ‚ÄúModelo de Seguran√ßa de Rede‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: ‚ÄúSeguran√ßa de aplicativos da Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: ‚ÄúExecu√ß√£o Simb√≥lica‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: ‚ÄúLinguagem de Programa√ß√£o Ur / Web‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Um pouco mais tarde, falarei sobre solicita√ß√µes falsas entre sites.  Acho que as notas da aula explicam por que o script crossite n√£o funciona no nosso caso.  O motivo √© que, sempre que voc√™ cria uma "pe√ßa" de sintaxe, esse objeto, √°rvore e diferentes partes dessa √°rvore n√£o s√£o apenas cadeias de caracteres. <br><br><img src="https://habrastorage.org/webt/ve/hh/rb/vehhrbj_e2ce4yi9op7j_slgja0.jpeg"><br><br>  Voc√™ n√£o pode acidentalmente transformar uma string de usu√°rio em uma √°rvore de estrutura, isso n√£o acontece automaticamente, porque √© dif√≠cil escrever um tradutor desse tipo.  Mas voc√™ pode tentar escrever um tradutor para Ur / Web.  Em breve, darei um exemplo que ajudar√° a reduzir sua preocupa√ß√£o com isso.  Quero mostrar o que essa sintaxe realmente se transforma no compilador. <br><br>  Pode parecer que podemos apenas adicionar aspas duplas ao HTML para que possamos retornar ao mundo normal.  Algu√©m pode se perguntar por que √© t√£o importante pular aspas duplas, colocando XML em vez disso? <br><br>  Voc√™ pode acreditar que este √© o c√≥digo equivalente para o que faz.  Aqui est√° uma tag de fun√ß√£o embutida que cria o n√≥ da √°rvore de um documento HTML.  Em seguida, coloco os argumentos que expressam o estilo CSS neste n√≥.  Na verdade, nada acontece aqui; portanto, existem muitas maneiras diferentes de dizer "Nenhum"; ele n√£o requer atributos. <br><br>  Em seguida, coloquei a tag body, isso √© outra coisa da biblioteca padr√£o.  Todas as tags padr√£o s√£o fun√ß√µes de primeira classe na biblioteca. <br><br><img src="https://habrastorage.org/webt/yg/w6/e3/ygw6e3j_wcffkpt-lnrp0pjzvsg.jpeg"><br><br>  Em seguida, precisamos colocar o texto "Hello World" no corpo, por isso chamamos a fun√ß√£o cdata, em que cdata √© a palavra XML para dados de caracteres ou apenas uma constante de string, e podemos colocar o texto aqui.  Isso deve nos dar o mesmo resultado de antes.  Vamos ver se isso funciona. <br><br>  Agora voltarei √† p√°gina.  Vemos a mesma coisa que antes, ent√£o √© a mesma que a fun√ß√£o fazia no come√ßo. <br><br><img src="https://habrastorage.org/webt/d8/kj/5c/d8kj5caq5wynvitakfgozvx9zbg.jpeg"><br><br>  Isto n√£o √© apenas constru√ß√£o de linhas.  Isso causa uma s√©rie de opera√ß√µes projetadas para que somente elas permitam a cria√ß√£o de HTML v√°lido e nunca ser√£o capazes de interpretar implicitamente a linha como c√≥digo, em vez de apenas colocar o conte√∫do na p√°gina que deveria estar l√°. <br><br><img src="https://habrastorage.org/webt/t4/lz/ky/t4lzkym3pllpxtd46p3ydq9hxiw.jpeg"><br><br>  Agora vou tentar fazer algo menos complicado, o que pode ser uma preocupa√ß√£o.  Vamos decidir que estamos realmente felizes em ver o mundo, para destacar a palavra "ol√°" em negrito e compil√°-la novamente. <br><br><img src="https://habrastorage.org/webt/i4/9w/wr/i49wwrvxwmjbvsdmabaux8vbpze.jpeg"><br><br>  Voc√™ v√™ o que aconteceu na p√°gina - a palavra n√£o ficou em negrito porque o compilador mostra como o texto √© interpretado em vez da marca√ß√£o.  Esta √© uma representa√ß√£o da sintaxe HTML como uma fun√ß√£o que constr√≥i a sintaxe sem as conven√ß√µes de codifica√ß√£o usuais incorporadas a ela.  Essa fun√ß√£o interpreta tudo da maneira que voc√™ deseja escrever, sem pensar em nada de si mesmo. <br><br>  Assim, a implementa√ß√£o do cdata faz o que √© comumente chamado de escape ou "escape".  Mas o programador n√£o precisa saber que existe algo como escapar.  Voc√™ pode pensar nisso como um conjunto de fun√ß√µes convenientes para criar uma √°rvore de objetos que descreve a p√°gina. <br><br>  Ouvi dizer que voc√™ deseja ver o HTML que √© gerado aqui.  Ok, isso n√£o ser√° a coisa mais emocionante.  Vou tentar aument√°-lo na tela, mas n√£o cabe em uma linha. <br><br><img src="https://habrastorage.org/webt/u1/6d/lm/u16dlmtcovtixg6zbgscm6t3eym.jpeg"><br><br>  <b>Aluno:</b> Como voc√™ est√° usando XHTML, poderia usar o caminho para dados de caracteres de cdata em vez de faz√™-lo manualmente? <br><br>  <b>Professor:</b> Eu acho, mas isso exigiria mais XML de mim do que os que tenho.  Havia outra boa pergunta sobre URLs JavaScript.  Se permitirmos URLs JavaScript, criaremos um backdoor para interpretar automaticamente as strings como programas em tempo de execu√ß√£o.  E isso causa todos os tipos de problemas. <br><br>  Vamos tentar evit√°-lo.  Voltarei, primeiro, √† vers√£o abreviada e farei algumas linhas dentro do corpo.  E vamos colocar um link que tentar√° fazer algo apropriado.  Aqui deixamos espa√ßo para mensagens de erro. <br><br><img src="https://habrastorage.org/webt/ce/qh/fh/ceqhfhp7dj49uaakv-uyc6pgdug.jpeg"><br><br>  Em seguida, execute o compilador e veja como ele funciona. <br><br><img src="https://habrastorage.org/webt/le/yj/bd/leyjbd0ft_iuzl0sp09sul5mlfw.jpeg"><br><br>  URL inv√°lido, entrada de JavaScript e a frase "passado para aben√ßoar" ou "passado para aben√ßoar".  O Bless √© incorporado √† fun√ß√£o, que √© o gatekeeper que resolve o URL.  Por padr√£o, URLs n√£o s√£o permitidos; portanto, √© claro que essa op√ß√£o n√£o √© permitida.  Em geral, √© uma p√©ssima id√©ia escrever sua pr√≥pria pol√≠tica de URL para poder criar valores que representam URLs JavaScript.  Porque, ent√£o, todos os tipos de garantias ser√£o necess√°rios, devido ao fato de que esses endere√ßos podem ser inv√°lidos. <br><br>  Para deixar um pouco mais claro como isso funciona, deixe-me decompor esse c√≥digo em uma fun√ß√£o separada que chama o vinculador que aceita o URL.  Assim, uma URL √© um tipo, n√£o uma string.  Esse √© o tipo que indica a URL, que √© explicitamente permitida pela pol√≠tica do seu aplicativo. <br><br>  Eu uso chaves, como em algumas estruturas de modelo HTML populares, para indicar a inser√ß√£o de algum c√≥digo da linguagem host dentro do HTML que criamos.  E tudo isso √© feito de forma que o tipo seja verificado estaticamente.  Portanto, o sistema verificar√°: "Sim, este √© o local ao qual o URL pertence e ele diz que √© realmente um URL, ent√£o est√° tudo bem." <br><br><img src="https://habrastorage.org/webt/dk/k_/c1/dkk_c19amvl0mtc-cavdq5gyy3k.jpeg"><br><br>  E ent√£o eu posso organizar explicitamente a chamada de b√™n√ß√£o dizendo: "vamos chamar a fun√ß√£o vinculador aqui com base nos resultados da" b√™n√ß√£o "deste URL".  Depois disso, devemos receber a mesma mensagem de erro de antes. <br><br><img src="https://habrastorage.org/webt/1w/vx/2v/1wvx2vipa9mnkzydjl-oxjheurk.jpeg"><br><br>  Infelizmente, n√£o posso executar isso para voc√™ e esperar at√© que ele falhe, mas posso dizer que definitivamente falhar√°, porque intencionalmente cometi um erro do compilador.  Este URL n√£o ser√° aceito pela pol√≠tica de URL. <br><br>  Se eu perdesse essa chamada de ben√ß√£o, seria um erro mais s√©rio no momento da compila√ß√£o, porque voc√™ tem a string e o URL certo, e eles s√£o de tipos diferentes. <br><br><img src="https://habrastorage.org/webt/ew/8u/yd/ew8uydi-n7vvxhaofm09tuhuvqq.jpeg"><br><br>  Vamos torn√°-lo mais interessante.  Vou abrir um arquivo de configura√ß√£o para esta demonstra√ß√£o.  √â bem curto, pelo menos se voc√™ olhar para qualquer estrutura de aplicativo da web Java.  Eles t√™m esses arquivos XML gigantes para configura√ß√£o, ent√£o tudo est√° muito melhor conosco. <br><br><img src="https://habrastorage.org/webt/f2/0x/zn/f20xznx-xrcpolzz93wukdfq3o8.jpeg"><br><br>  Podemos adicionar uma regra que declara que tudo √© permitido na Wikipedia e depois colocar o URL da Wikipedia no corpo. <br><br><img src="https://habrastorage.org/webt/e4/wq/ia/e4wqiapjhdtiq4s354nmod5cwus.jpeg"><br><br>  Agora v√° para a p√°gina e clique em Please Click. <br><br><img src="https://habrastorage.org/webt/f1/mb/3t/f1mb3tsp09v-h6vrjm0rtjxgcku.jpeg"><br><br>  Aqui est√° o que temos: Endere√ßo da Wikipedia n√£o encontrado. <br><br><img src="https://habrastorage.org/webt/wl/qx/il/wlqxilbfs69vmxd77wtvj_m5e94.jpeg"><br><br>  Portanto, a id√©ia principal √© ter um tipo abstrato de URL, como se voc√™ pudesse ter um tipo abstrato de tabela hash que codifique varia√ß√µes da apar√™ncia da tabela hash e evite que o c√≥digo entre na matriz da tabela hash.  N√≥s podemos fazer o mesmo pela URL.  Usando essa fun√ß√£o de aben√ßoar, o sistema garante que todo valor desse tipo seja aprovado em algum momento. <br><br>  Por exemplo, com essa pol√≠tica, sabemos que nunca teremos um URL JavaScript, para que voc√™ possa pegar com seguran√ßa o valor do URL e us√°-lo como um link.  Isso n√£o interromper√° as abstra√ß√µes b√°sicas do idioma. <br><br>  <b>Aluno: √©</b> poss√≠vel usar JavaScript "puro" inserindo-o na string do corpo? <br><br>  <b>Professor:</b> sim e n√£o.  Em vez de JavaScript, voc√™ incorpora o c√≥digo de Ur / Web que executa algum tipo de tarefa.  Agora vou digitar o comando: <br><br><pre><code class="hljs xml">return <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xml</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{alert</span></span></span><span class="hljs-tag"> ‚Äú</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">LOADED</span></span></span><span class="hljs-tag">‚Äù}&gt;</span></span></code> </pre> <br>  E voc√™ ver√° o que aconteceu - o int√©rprete colocou uma janela na tela com a inscri√ß√£o ‚ÄúLoaded‚Äù - ‚ÄúLoaded‚Äù. <br><br><img src="https://habrastorage.org/webt/hs/co/jm/hscojmoxytzkmr4qxk8touo4e34.jpeg"><br><br>  Tentar interpretar o c√≥digo JavaScript na forma de string como um programa seria um desastre.  Veja bem, podemos colocar o c√≥digo na mesma linguagem de programa√ß√£o com a qual voc√™ est√° trabalhando, j√° limitado por essas chaves.  E ent√£o √© compilado automaticamente em JavaScript para ser executado no lado do cliente. <br><br>  Observo que as vers√µes mais recentes dos navegadores s√£o capazes de evitar erros de interpreta√ß√£o de caracteres, mas alguns navegadores mais antigos s√£o capazes de confundir alguma coisa.  De qualquer forma, todos os elementos de caractere ser√£o interpretados como UTF-8 se eles entrarem no documento.  Se houver algum problema com uma codifica√ß√£o diferente, essa codifica√ß√£o n√£o deve ser aplicada aqui. <br><br>  <b>Aluno: O</b> compilador verifica se a sequ√™ncia cont√©m um URL v√°lido.  Mas, se voc√™ calcular uma string no tempo de execu√ß√£o, o bless verificar√° no tempo de execu√ß√£o se uma determinada string √© v√°lida ou n√£o? <br><br>  <b>Professor:</b> vamos criar um formul√°rio para testar esta afirma√ß√£o e coloc√°-la aqui.  N√≥s inserimos nosso URL na caixa de texto e depois inserimos o bot√£o enviar envio. <br><br><img src="https://habrastorage.org/webt/d_/aq/fp/d_aqfpi89gk6azs49odajmhmnz0.jpeg"><br><br>  Quando voc√™ clica nela, a fun√ß√£o vinculador ser√° chamada com a grava√ß√£o de um valor para cada campo no formul√°rio.  Nesse caso, existe apenas um campo chamado "URL", portanto o vinculador processar√° a entrada que cont√©m o URL como um tipo de string.  E ent√£o tentamos aplicar a fun√ß√£o aben√ßoar e ver se funciona. <br><br><img src="https://habrastorage.org/webt/ru/na/8z/runa8zxo9obi7hayqrvi_gzhecs.jpeg"><br><br>  Voc√™ v√™ um exemplo de mensagens de erro ao digitar o tipo errado de URL, uma daquelas coisas que n√£o far√° sentido se voc√™ n√£o estiver familiarizado com Haskell.  Esqueci de inserir a fun√ß√£o de retorno aqui.  Pelo menos agora √© mais como um programa Java.  E tamb√©m esqueci de dizer que agora √© uma p√°gina inteira.  Portanto, n√£o podemos usar a tag a at√© estarmos dentro da tag body. <br><br><img src="https://habrastorage.org/webt/-q/vp/oh/-qvpohawzytpmotyrlwk4y1oo7q.jpeg"><br><br>  Agora execute o compilador, v√° para a nossa p√°gina, clique no bot√£o Please Click, digite um endere√ßo inexistente abstruso. <br><br><img src="https://habrastorage.org/webt/f8/lc/of/f8lcofwmgurypdi_tekg0jifwgu.jpeg"><br><br>  Em seguida, clicamos em Enviar consulta - "Enviar uma solicita√ß√£o" e recebemos uma mensagem de erro - o endere√ßo desse tipo n√£o √© resolvido. <br><br><img src="https://habrastorage.org/webt/ry/mu/u5/rymuu5ruqj2f01-1y4saidwc2bm.jpeg"><br><br>  Se inserirmos o URL correto, como mostrado na pr√≥xima tela, e clicar em Enviar consulta, nenhuma mensagem de erro ser√° exibida. <br><br><img src="https://habrastorage.org/webt/5a/fx/hy/5afxhy3lpksvux1vl88noj1uh7c.jpeg"><br><br>  Acho que a resposta para sua pergunta foi longa e n√£o muito emocionante. <br><br>  <b>Aluno:</b> existem condi√ß√µes mais rigorosas para os URLs al√©m da proibi√ß√£o de usar JavaScript? <br>  <b>Professor:</b> Atualmente, restri√ß√µes mais rigorosas s√£o simplesmente constantes e prefixos.  Mas voc√™ tamb√©m pode criar suas pr√≥prias regras de proibi√ß√£o, e elas funcionar√£o na ordem em que voc√™ as escrever. <br><br>  <b>Aluno:</b> acontece que, se voc√™ seguir a proibi√ß√£o de JavaScript, mas colocar uma quebra de linha no meio da palavra "JavaScript", o compilador poder√° interpretar isso ... <br><br>  <b>Professor:</b> sim, isso seria muito ruim.  √â por isso que √© bom seguir a abordagem da lista de permiss√µes, em vez de usar a abordagem da lista negra.  Voc√™ provavelmente deseja que todas as regras iniciem com um protocolo espec√≠fico, como HTTP, e permita apenas o que se encaixa no seu conjunto de protocolos aprovado.  Eu recomendo fazer exatamente isso. <br><br>  <b>Aluno:</b> em muitos sites, voc√™ pode permitir que os usu√°rios troquem links. Nesse caso, √© necess√°rio permitir links em qualquer lugar. <br><br>  <b>Professor:</b> voc√™ pode permitir links se quiser que seus usu√°rios compartilhem links JavaScript ou, n√£o sei, links em flash ou o que for permitido l√°.  Veja bem, voc√™ pode criar uma "lista branca" de todos os HTTP, HTTPS, URLs e, assim, garantir a opera√ß√£o segura da maioria dos sites.  Essa abordagem √© apenas um pouco mais fraca do que permitir apenas URLs espec√≠ficos.  Mas pelo menos voc√™ pode eliminar completamente a possibilidade de execu√ß√£o autom√°tica de uma string como um programa. <br><br>  Deixe-me dar um exemplo de resumo, que √© um exemplo de um sistema simples de sala de bate-papo apresentado no banco de dados.  O usu√°rio pode clicar no link para ir para a sala e enviar uma mensagem.  Esta √© a primeira de v√°rias op√ß√µes para o esquema. <br><br><img src="https://habrastorage.org/webt/3y/vx/n-/3yvxn-vrddqytldmzo5qgms8pta.jpeg"><br><br>  Em primeiro lugar, observarei que vou recompilar isso.  E, magicamente, todas as tabelas declaradas do banco de dados ser√£o adicionadas ao banco de dados, e podemos come√ßar a usar o aplicativo.  Mas primeiro precisamos adicionar algumas salas de bate-papo.  Ent√£o, vamos abrir nossa interface para o banco de dados demo e inserir os valores "um" e "dois" na sala de tabelas. <br><br><img src="https://habrastorage.org/webt/rg/yg/yh/rgygyhyminzap26oeymfrpzodis.jpeg"><br><br>  Agora eles apareceram aqui. <br><br><img src="https://habrastorage.org/webt/73/o_/cs/73o_csz48d0mscpszk2xxbc_ozu.jpeg"><br><br>  Agora entramos na primeira sala de bate-papo e podemos nos divertir o dia inteiro enviando linhas de texto, por exemplo, uma primeira linha.  Ser√° mais interessante tentar enviar HTML, e ele √© imediatamente processado.  Este √© um exemplo da principal funcionalidade do programa. <br><br><img src="https://habrastorage.org/webt/yg/z7/jv/ygz7jvrke7r5regxjxv0awozt-s.jpeg"><br><br>  Mais uma vez, veremos rapidamente como isso funciona, por isso temos essas duas tabelas SQL - sala de tabela e mensagem de tabela, que s√£o simplesmente declaradas nesta primeira classe dentro da linguagem de programa√ß√£o.  E n√≥s damos um diagrama de cada tabela.  E ent√£o, quando tentamos acessar essas tabelas, o compilador garante que elas sejam acessadas de acordo com um esquema de digita√ß√£o promissor. <br><br><img src="https://habrastorage.org/webt/pn/kd/tq/pnkdtqy4u_xtusdwrpvxwv58tle.jpeg"><br><br>  Portanto, temos uma tabela de salas, em que cada sala √© um registro que consiste em um ID de identificador, que √© um n√∫mero inteiro, e um T√≠tulo, que √© uma string.  Este √© o tipo de vis√£o em que simplesmente criamos registros.  Acabei de criar algumas salas no console do SQL.  Tamb√©m temos uma notifica√ß√£o de que cada mensagem pertence a uma sala espec√≠fica, a hora em que foi criada e o texto que √© o conte√∫do da mensagem. <br>  Agora deixe-me pular rapidamente para a fun√ß√£o principal. <br><br><img src="https://habrastorage.org/webt/w9/p2/7m/w9p27msu5myieys9_dknkicarms.jpeg"><br><br>  Executamos uma consulta SQL - voc√™ v√™ um exemplo de sintaxe SQL incorporada ao Ur / Web.  Eu n√£o quero entrar em chamadas de fun√ß√£o atrav√©s desta extens√£o da biblioteca padr√£o.  Ser√° bastante detalhado, basta recordar minhas palavras sobre o fato de que a biblioteca padr√£o possui m√©todos para chamar fun√ß√µes que s√£o formas v√°lidas de criar uma consulta SQL. <br><br>  E essas fun√ß√µes t√™m tipos que os fazem imprimir solicita√ß√µes para voc√™, e n√£o apenas garantem que a sintaxe √© v√°lida.  Esse c√≥digo simplesmente itera sobre todas as linhas que sa√≠ram dessa consulta e gera partes do c√≥digo HTML para cada uma delas. <br><br>  Em particular, colocaremos o resultado da consulta no campo T√≠tulo e o converteremos em HTML com uma nota√ß√£o que inclui chaves.  Os colchetes indicam adicionalmente que ainda n√£o √© um peda√ßo real de HTML, mas converta-o para mim de maneira padr√£o.  Assim, podemos fazer com strings e inteiros e todos os dados de outros tipos. <br><br>  <b>Aluno:</b> se contivesse HTML malicioso ou algo mais, seria filtrado? <br><br>  <b>Professor:</b> sim, seria.  Em Ur / Web, voc√™ pode pensar nisso como construir uma √°rvore.  Este √© um n√≥ que representa algum texto.  Obviamente, o texto n√£o pode fazer nada. <br><br>  <b>Aluno:</b> se este cabe√ßalho estivesse sob o controle do usu√°rio e algu√©m tivesse conversado com o cabe√ßalho Alerta, n√£o seria JavaScript? <br><br>  <b>Professor:</b> n√£o ser√° automaticamente interpretado como JavaScript, HTML ou qualquer outra coisa.  Ser√° percebido pelo programa como texto simples. <br><br>  Ent√£o, voltando √† nossa imagem na tela.  Temos este t√≠tulo T√≠tulo, vamos enquadr√°-lo com tags.  E, em vez de href, a maneira usual de vincular em HTML, usamos o atributo link, que √© um tipo de pseudo-atributo ur / web que usa como argumento n√£o a URL, mas principalmente express√µes Ur / Web.  O ponto √© que, quando voc√™ clica nesse link, essa express√£o √© iniciada para criar uma nova p√°gina que deve ser exibida. <br>  Nesse caso, fazemos uma chamada para a fun√ß√£o de bate-papo, que √© definida aqui na pr√≥xima tela, √© isso que √©. <br><br><img src="https://habrastorage.org/webt/-y/ig/jy/-yigjypz4hshhd_vij2eqzdp7po.jpeg"><br><br>  N√£o vou entrar em detalhes.  Mas temos mais algumas consultas SQL usando v√°rias fun√ß√µes de biblioteca padr√£o para v√°rias maneiras de usar os resultados solicitados. <br><br>  Geramos essa p√°gina HTML e dizemos que voc√™ est√° em um bate-papo com esse t√≠tulo, temos um formul√°rio no qual o usu√°rio pode inserir texto.  Este √© o formul√°rio que eu usei para demonstrar como o programa funcionou alguns minutos atr√°s.  O bot√£o enviar formul√°rio possui este atributo Adicionar contendo say, que √© o nome da fun√ß√£o Ur / Web.  Portanto, quando enviamos o formul√°rio, chamamos essa fun√ß√£o. <br><br>  A execu√ß√£o de mais algumas SQL insere novas linhas na tabela.  Saltamos automaticamente do ID da sala de bate-papo para os campos de texto que vieram aqui do formul√°rio e eles s√£o ocultados automaticamente conforme necess√°rio.  Mas, novamente, em Ur / Web, voc√™ n√£o precisa pensar em "escapar" da fun√ß√£o dessa maneira.  Porque √© apenas a sintaxe para construir uma √°rvore, n√£o para uma string.  Portanto, n√£o h√° como estranhar a an√°lise de coisas estranhas que voc√™ n√£o espera da maneira escolhida de interpretar a sintaxe. <br><br>  Portanto, como temos um widget neste formul√°rio na forma de uma GUI gr√°fica e este √© um campo de texto, o compilador conclui que o registro resultante do preenchimento do formul√°rio da caixa de texto deve ter um elemento chamado "texto" do tipo string .  Essa codifica√ß√£o do formul√°rio e as regras para digita√ß√£o n√£o s√£o incorporadas ao idioma, mas s√£o obtidas da biblioteca do Ur express, que na verdade controla esses formul√°rios, determinando os tipos de fun√ß√µes v√°lidas. <br>  Se voc√™ n√£o tiver mais perguntas sobre essa parte do programa, passarei √† pr√≥xima etapa.  Vou usar uma maneira de for√ßar o encapsulamento de v√°rias partes de um aplicativo que suporta Ur / Web e que raramente suporta outros idiomas.  Eu vou pegar este quarto.  Vou pegar algumas defini√ß√µes e coloc√°-las em um m√≥dulo que encapsula algumas delas como privadas.  Em particular, as tabelas do banco de dados ser√£o privadas, portanto ningu√©m poder√° acess√°-las diretamente. <br><br>  Voc√™ pode acess√°-los apenas usando o conjunto de m√©todos que fornecemos.  Um m√©todo √© executado dentro de uma transa√ß√£o e cria uma lista de registros com os campos ID e t√≠tulo das salas de bate-papo dispon√≠veis. <br><br>  Em seguida, apenas expandimos essa opera√ß√£o de bate-papo.  E a √∫nica coisa que fiz aqui foi inserir um nome para o conceito ID - tipo ID.  Portanto, n√£o estou dizendo apenas que o ID √© um n√∫mero inteiro, estou dizendo que esse √© um novo tipo. <br><br><img src="https://habrastorage.org/webt/fr/sy/__/frsy__bkeyw4mwc6yf_d1wp2hss.jpeg"><br><br>  A √∫nica maneira pela qual o mundo externo pode entrar em contato com o bate-papo √© obter uma lista de todas as salas, e a √∫nica maneira que o mundo externo pode us√°-lo √© chamar a fun√ß√£o de bate-papo.  Digamos que este seja algum tipo abstrato de tabela de hash dentro da classe de tabelas de hash, onde s√£o armazenados detalhes que explicam quais IDs s√£o e como s√£o produzidos internamente, sendo privados para este m√≥dulo, e o c√≥digo do cliente que chama esse m√≥dulo n√£o deve us√°-los. <br><br>  Agora vou transferir toda essa sintaxe para baixo e coloc√°-la dentro do m√≥dulo, para que, por padr√£o, n√£o seja exposta ao restante do c√≥digo.  Em seguida, implemento esse m√©todo de salas.  J√° temos a oportunidade de organizar um bate-papo.  Mas podemos implementar as salas de uma maneira mais simples, usando outra fun√ß√£o de biblioteca padr√£o para interpretar a solicita√ß√£o no formul√°rio atual. <br>  Vamos apenas selecionar tudo da lista de quartos, classificados por nome.  Como sempre, essa consulta √© um tipo de dados validado para n√≥s.  E o sistema determina: ‚ÄúOK, essa express√£o ir√° gerar uma lista de registros que correspondem ao tipo declarado na assinatura deste m√≥dulo.‚Äù  Portanto, agora, fora deste m√≥dulo, nenhum outro c√≥digo pode mencionar uma tabela de sala ou tabela de mensagens. <br><br><img src="https://habrastorage.org/webt/r2/8e/72/r28e72dlrnyazx-qxx6r8cc9kdk.jpeg"><br><br>  Assim, pelo menos do ponto de vista desta aplica√ß√£o, podemos aplicar a invari√¢ncia necess√°ria a partir dela.  Podemos at√© ocultar segredos dentro do m√≥dulo para que n√£o haja problemas de seguran√ßa se qualquer outra parte do c√≥digo puder obt√™-los. <br><br>  <b>Aluno:</b> algum outro c√≥digo tamb√©m poderia implementar esse m√©todo de sala? <br><br>  <b>Professor:</b> Essa seria uma tabela completamente diferente.  Na verdade, podemos fazer isso inserindo um fragmento de 4 linhas em outro m√≥dulo. <br><br><img src="https://habrastorage.org/webt/uq/ud/lz/uqudlzms1a3nar8hpko4sngaguw.jpeg"><br><br>  Ent√£o podemos fazer o que quisermos com esta tabela.  Vou compilar, talvez em 30 segundos, e vamos ver o que acontece.  Mas, na verdade, esta √© uma tabela diferente, como se voc√™ tivesse o mesmo nome privado, mas para duas classes Java diferentes. <br><br>  Portanto, voc√™ assume que dentro deste m√≥dulo existe um tipo abstrato chamado room, que cont√©m o identificador de identifica√ß√£o e o t√≠tulo.  Isto n√£o est√° correto.  O bate-papo aceita os par√¢metros da sala como entrada.  Quando chamamos a fun√ß√£o de bate-papo, ela ser√° chamada via URL.  O ID e o T√≠tulo s√£o passados ‚Äã‚Äãpara fora da representa√ß√£o da URL que chama a fun√ß√£o.  N√≥s precisamos apenas do ID para implementar esta fun√ß√£o.  Ent√£o, quando chamamos a fun√ß√£o, na verdade chamamos o URL. <br>  Seria um desperd√≠cio em termos de uso de espa√ßo e pareceria rude com o usu√°rio se o cabe√ßalho fosse passado como um argumento adicional ao invocar o bate-papo por meio da URL.  Isso faz sentido?  Vamos olhar para a barra de URL neste slide. <br><br><img src="https://habrastorage.org/webt/_x/3r/ij/_x3rijim6yew7wwnimxvd98w7cy.jpeg"><br><br>  O identificador do canal que estamos seguindo √© serializado automaticamente para o URL no final da linha.  E se transmit√≠ssemos um registro que contenha o ID e o t√≠tulo Title, esse t√≠tulo tamb√©m seria serializado, o que √© pelo menos um pouco il√≥gico. <br><br>  54:10 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Curso MIT "Seguran√ßa de sistemas de computadores".</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aula 11: Linguagem de Programa√ß√£o Ur / Web, Parte 3</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/XMEFdofERLI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  A vers√£o completa do curso est√° dispon√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD de 1Gbps at√© dezembro de gra√ßa</b> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425999/">https://habr.com/ru/post/pt425999/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425989/index.html">Sob o cap√¥ do Graveyard Keeper: como os efeitos gr√°ficos s√£o implementados</a></li>
<li><a href="../pt425991/index.html">Como criamos hospedagem</a></li>
<li><a href="../pt425993/index.html">Como preencher a lacuna de g√™nero em tecnologia</a></li>
<li><a href="../pt425995/index.html">Visualize FHIR - o padr√£o de TI para medicina</a></li>
<li><a href="../pt425997/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 11: Linguagem de Programa√ß√£o Ur / Web, Parte 1</a></li>
<li><a href="../pt426001/index.html">Curso MIT "Seguran√ßa de sistemas de computadores". Aula 11: Linguagem de Programa√ß√£o Ur / Web, Parte 3</a></li>
<li><a href="../pt426009/index.html">A resist√™ncia √©pica √† falha 1 ou a Fox estava passando despercebida. Testando o anonimato e a seguran√ßa + VPN para o usu√°rio</a></li>
<li><a href="../pt426013/index.html">Ester√≥ides da carreira</a></li>
<li><a href="../pt426015/index.html">O uso de drones civis serrados para fotografia a√©rea geod√©sica profissional da √°rea</a></li>
<li><a href="../pt426017/index.html">Como reduzir o n√∫mero de experi√™ncias em animais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>