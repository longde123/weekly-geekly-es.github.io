<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóΩ üõÄüèø üßëüèº‚Äçü§ù‚Äçüßëüèª Blazor: c√≥mo evitar que un componente se enferme o dos enfoques para separar el c√≥digo del marcado üêÜ üßúüèΩ üï≥Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Creo que cada desarrollador, cuando lleg√≥ a un nuevo proyecto, pens√≥ que ser√≠a bueno retroceder en el tiempo y decirles a los padres de su proyecto qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blazor: c√≥mo evitar que un componente se enferme o dos enfoques para separar el c√≥digo del marcado</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484822/"><p>  Creo que cada desarrollador, cuando lleg√≥ a un nuevo proyecto, pens√≥ que ser√≠a bueno retroceder en el tiempo y decirles a los padres de su proyecto que los patrones no solo deber√≠an preguntarse en la entrevista, sino que tambi√©n deber√≠an aplicarse al proyecto real, pero lo digo en serio. </p><br><p>  En particular, este es probablemente un patr√≥n, pero una regla muy buena es que el marcado debe estar separado del c√≥digo.  Esto se aplica a los buenos formularios web antiguos, Asp.Net MVC: ¬øalguien m√°s escribe marcado en Razor?), Y Angular es popular en una empresa dura. </p><br><p>  Si hace tiempo que pas√≥ de la desesperanza sobre el frente de los enders y se mud√≥ al nuevo Angular and React, entonces ... </p><a name="habracut"></a><br><p>  S√≠, caballeros, los desarrolladores de back-end, nuevamente tuvimos la esperanza de que el conocimiento adquirido a lo largo de los a√±os no se perdiera en la cabeza.  Y esa esperanza es la tecnolog√≠a Blazor de Microsoft. <br>  Despu√©s de abrir el proyecto predeterminado que crea el estudio al crear el proyecto Blazor, y luego de mirar varios art√≠culos, cre√≠ que todo era realmente tan malo y que realmente el c√≥digo y el marcado siempre estaban en el mismo archivo, como por ejemplo aqu√≠ (en adelante, todos los ejemplos se mostrar√°n sobre la base de Proyecto de plantilla de la aplicaci√≥n Blazor Server de Visual Studio 2019 con .Net Core 3.1 instalado): </p><br><p><img src="https://habrastorage.org/webt/fz/uk/bn/fzukbn53judeqzxrqg7vim1t8xu.png" alt="imagen"></p><br><p>  ¬øNada confunde aqu√≠? </p><br><p>  En mi opini√≥n, todo lo que est√° lleno de rojo tiene poco que ver con el contenido que representa este componente y debes deshacerte de √©l.  Por qu√© </p><br><ol><li>  Bueno, en primer lugar, el desarrollador front-end que trabajar√° con usted al mismo tiempo en este control estar√° un poco confundido por los s√≠mbolos que son incomprensibles para √©l y cada vez ser√° cauteloso y le har√° preguntas cuando necesite cambiar algo en el c√≥digo enmarcado por el marcado de Razor . </li><li>  Por supuesto, los l√≠deres ser√°n cuidadosos, pero seguramente se encontrar√° peri√≥dicamente con el hecho de que despu√©s de algunas manipulaciones, su p√°gina no funcionar√° como esperaba o simplemente no funcionar√°. </li><li>  Si cree que no se necesitar√°n desarrolladores front-end, ya que ahora todo se puede escribir en C #, entonces est√° equivocado.  En cualquier caso, debe estilizar el control y lo realizar√° el desarrollador front-end o el tipografista que a menudo no sabe qu√© es C #. </li><li>  Al principio, parecer√° que el c√≥digo es peque√±o y no abarrota mucho el dise√±o, es enga√±oso, en un proyecto en crecimiento ir√° r√°pidamente desde el escenario, la demostraci√≥n t√©cnica a "maldita sea lo que sucede aqu√≠".  M√°s de una vez me encontr√© con el hecho de que desde SQL Web Controls o directamente en la p√°gina .cshtml, se public√≥ una consulta SQL a la base de datos, s√≠, no estoy bromeando.  Muy a menudo, los desarrolladores experimentados que ayer lo torturaron en una entrevista de seguridad social, que ya conocen los principios de SOLID, est√°n escribiendo la l√≥gica de negocios ma√±ana, justo en el margen de beneficio. </li></ol><br><p>  Creo que ya te he asustado lo suficiente, ahora te dir√© c√≥mo evitar los problemas anteriores, m√°s a√∫n esto se hace de manera muy simple.  Y ser√° genial si tomas los siguientes enfoques como regla al crear cualquier nuevo componente Razor.  Entonces, el primer enfoque. </p><br><h3 id="bazovyy-klass">  Clase base </h3><br><p>  El primero y, hasta hace poco, el √∫nico enfoque. </p><br><p>  Se crea una clase base en la que se ubicar√° toda la l√≥gica de visualizaci√≥n, para el control del ejemplo anterior.  Crea un nuevo archivo usando la plantilla <br>  [Nombre del control] .razor.cs </p><br><p>  Aqu√≠ el estudio vendr√° en nuestra ayuda y construir√° a partir de dos archivos algo as√≠ como en la imagen a continuaci√≥n: </p><br><p><img src="https://habrastorage.org/webt/oc/96/u9/oc96u90oqb2zzpuomier1gks3dq.png" alt="imagen"></p><br><p>  Como puede ver, el estudio es bastante inteligente y entiende lo que quiere de √©l.  El control fue agrupado con el archivo en el que queremos colocar nuestro c√≥digo. </p><br><p>  Si abre un nuevo archivo en este momento, el <strong>nombre de la</strong> clase <strong>FetchData</strong> estar√° subrayado con una l√≠nea roja ondulada, todo es cierto, porque a pesar del hecho de que en <strong>FetchData.razor</strong> no ver√° las declaraciones de clase con el nombre <strong>FetchData en ning√∫n lado</strong> , m√°s tarde despu√©s de compilar el proyecto aparecer√°, lo mostrar√© es menor y, por lo tanto, el nombre de clase <strong>FetchData</strong> ya <strong>est√°</strong> reservado.  No tenemos m√°s remedio que usar la convenci√≥n de que colocaremos la l√≥gica de visualizaci√≥n (¬°y solo eso!) En la clase FetchDataBase, es decir, el nombre de la clase estar√° formado por la plantilla: <br>  <strong>[ControlName] Base</strong> </p><br><p>  Por supuesto, puede confundirse y escribir su propio analizador est√°tico, que verificar√° dichos archivos para cada componente, ¬øpor qu√© no? <br>  A continuaci√≥n, debemos heredar esta clase de <strong>ComponentBase</strong> .  No olvides agregar <br>  <strong>usando Microsoft.AspNetCore.Components</strong> ; </p><br><p>  Y aqu√≠ est√° lo que tenemos: </p><br><p><img src="https://habrastorage.org/webt/4z/8y/7d/4z8y7dupxs8f1z32uscjrblitky.png" alt="imagen"></p><br><p>  Wow, la clase est√° lista para transferir la l√≥gica de visualizaci√≥n aqu√≠, que ahora tenemos la oportunidad de escribir completamente en C #, ¬øno es felicidad?  :) </p><br><p>  Pero aunque el componente Razor en s√≠ mismo no sabe nada sobre nuestro archivo, solo Visual Studio sabe que tienen algo en com√∫n. </p><br><p>  Entonces, haz el siguiente truco: </p><br><p><img src="https://habrastorage.org/webt/q8/i3/p2/q8i3p2nhk-ecwlhusbd46fz7p58.png" alt="imagen"></p><br><p>  <strong>Heredamos</strong> el componente Razor de la clase <strong>FetchDataBase</strong> . </p><br><p>  Deje que el c√≥digo C # que a√∫n existe en <strong>FetchData.razor</strong> no le moleste. </p><br><p>  En este momento, transferiremos toda la l√≥gica de visualizaci√≥n a nuestro llamado c√≥digo detr√°s del archivo: </p><br><p><img src="https://habrastorage.org/webt/an/au/kn/anauknb0nxw3tzqxinb15_4j1fy.png" alt="imagen"></p><br><p>  Lo que sucedi√≥, bueno, en primer lugar agregamos usando-y.  En los controles Razor, pr√°cticamente no los ver√°, porque es costumbre agregarlos a <strong>_Imports.razor</strong> .  Ya se han agregado algunos de los m√°s utilizados. </p><br><p>  Luego, inyectamos a trav√©s de la propiedad, como puede ver, nuestra DI favorita funciona bien. <br>  Solo necesita marcar la propiedad implementada con el atributo <strong>[Inject]</strong> .  En el componente Razor, fue etiquetado <strong><a href="https://habr.com/ru/users/inject/" class="user_link">Inject</a></strong> .  Es decir, los cambios son m√≠nimos. </p><br><p>  Bueno, luego sigue la propiedad, en la que cargamos la informaci√≥n mostrada, debe estar al menos <strong>protegida</strong> (porque el control Razor hereda de la clase actual).  O <strong>p√∫blico</strong> si decide posibilitar su inicializaci√≥n desde el exterior, en este caso a√∫n deber√° marcarlo con el atributo <strong>[Par√°metro]</strong> .  En versiones anteriores de Blazor, estaba bastante <strong>protegido</strong> , pero ahora el analizador de estudio lo rega√±ar√° por ello. </p><br><p>  En principio, puede agregar un constructor a esta clase y hacer algo de trabajo all√≠, pero esto no es recomendable, es mejor colocar toda la l√≥gica de inicializaci√≥n en el m√©todo <strong>OnInitializedAsync ()</strong> </p><br><p>  Eso es todo lo que queda en <strong>FetchData.razor</strong> </p><br><p><img src="https://habrastorage.org/webt/_m/5f/3z/_m5f3zs5nzf8qvrguce_zc9pxbo.png" alt="imagen"></p><br><p>  Hubo marcas de Razor intercaladas, pero como no pod√≠a ser de otra manera, todav√≠a necesitamos mostrar nuestros datos de alguna manera.  Pero el c√≥digo C # puro desapareci√≥ por completo.  Y esto es genial en mi opini√≥n.  Le aconsejo que inicialmente siga un enfoque similar y luego ni usted ni sus colegas tomar√°n la decisi√≥n cuando su control crezca a grandes tama√±os. </p><br><p>  Lo m√°s importante es si funciona o no, ahora veamos: </p><br><p><img src="https://habrastorage.org/webt/gr/sn/rh/grsnrh24yfincyy0eq8rv9gvxme.png" alt="imagen"></p><br><p>  Genial, es como si no hubieran roto nada =) </p><br><h3 id="partial-class">  Clase parcial </h3><br><p>  Y as√≠, el segundo enfoque, que apareci√≥ recientemente ( <a href="https://docs.microsoft.com/en-us/aspnet/core/blazor/components%3Fview%3Daspnetcore-3.1" rel="nofollow">https://docs.microsoft.com/en-us/aspnet/core/blazor/components?view=aspnetcore-3.1#partial-class-support</a> ), pero muy probablemente reemplazar√° por completo el anterior  A pedido de los trabajadores, .Net Core 3.1 agreg√≥ la capacidad de crear una <strong>clase parcial</strong> para los controles Razor.  Entonces, dejamos casi todo como est√° en el enfoque anterior, pero ahora no necesitamos heredar de ComponentBase, y la clase puede llamarse igual que el componente, es decir, su firma ser√° la siguiente: <br>  clase parcial p√∫blica [ComponentName] </p><br><p>  Como puede ver a continuaci√≥n, los cambios son m√≠nimos, en el c√≥digo subyacente eliminamos la herencia de <strong>ComponentBase</strong> y marcamos la clase como <strong>parcial.</strong> </p><br><p><img src="https://habrastorage.org/webt/q1/5o/i5/q15oi5kifsulqhij-jhookhhryu.png" alt="imagen"></p><br><p>  El archivo de marcado tambi√©n est√° un poco simplificado, tambi√©n eliminamos la herencia de FetchDataBase, esta clase dej√≥ de existir debido a su inutilidad. </p><br><p><img src="https://habrastorage.org/webt/mq/53/tl/mq53tldh_tppbmfrcicmqe0wwbw.png" alt="imagen"></p><br><p>  Como puede ver, hay dos enfoques para mantener limpio su marcado.  El que elijas depende de ti.  Desafortunadamente, ser√≠a bueno para el estudio generar inmediatamente c√≥digo subyacente al crear un nuevo componente.  Ahora, esto se est√° discutiendo activamente y, como dicen los desarrolladores, en el futuro se agregar√° dicha probabilidad si existe una demanda, y ciertamente lo ser√°. <br>  Entonces, ¬øen qu√© se convierte nuestro componente Razor? </p><br><p><img src="https://habrastorage.org/webt/jf/2v/ef/jf2vefp9jwrsq5pb_psmcbvonua.png" alt="imagen"></p><br><p>  Es familiar, ¬øno es as√≠?) Todos los que alguna vez hicieron sus componentes MVC Razor Asp.Net encontrar√°n muy familiar el contenido del archivo generado autom√°ticamente. </p><br><p>  Espero que hayas aprendido un poco m√°s sobre Blazor hoy de mi primer art√≠culo sobre Habr.  Deje a continuaci√≥n las cr√≠ticas, preguntas y solicitudes de nuevos art√≠culos =) </p></div></div><p>Source: <a href="https://habr.com/ru/post/484822/">https://habr.com/ru/post/484822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484812/index.html">Mi experiencia con Plesk</a></li>
<li><a href="../484814/index.html">6. Fortinet Getting Started v6.0. Filtrado web y control de aplicaciones</a></li>
<li><a href="../484816/index.html">Uso de enlaces de operaciones para hacer copias de seguridad de archivos en macOS sobre la marcha</a></li>
<li><a href="../484818/index.html">El libro "C ++. La pr√°ctica de la programaci√≥n multiproceso "</a></li>
<li><a href="../484820/index.html">FAQ.Net: un programa gratuito para tomar notas para Windows con un dise√±o actualizado</a></li>
<li><a href="../484824/index.html">La guerra por apagar las luces</a></li>
<li><a href="../484826/index.html">La inteligencia artificial empeora a√∫n m√°s la mala medicina</a></li>
<li><a href="../484834/index.html">C√≥mo construir una estrategia corporativa para capacitaci√≥n y desarrollo</a></li>
<li><a href="../484836/index.html">C√°lculo de rentabilidad del Arancel Verde en 2020, Ucrania</a></li>
<li><a href="../484838/index.html">13 ejemplos de configuraci√≥n de reglas en Google Ads [instrucci√≥n]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>