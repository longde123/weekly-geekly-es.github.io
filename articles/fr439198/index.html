<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß¶ üõå üì† G√©n√©ration de Barrier Island üë©üèª‚Äçüè≠ üëú üôèüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les nouvelles de d√©cembre de l' ouragan Florence faisaient souvent r√©f√©rence √† des hauts - fonds externes - une s√©rie d'√Æles-barri√®res au large des c√¥...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©n√©ration de Barrier Island</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439198/">  Les nouvelles de d√©cembre de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ouragan Florence</a> faisaient souvent r√©f√©rence √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des hauts</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonds externes</a> - une s√©rie d'√Æles-barri√®res au large des c√¥tes de la Caroline du Nord: <br><br><div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/getpro/habr/post_images/a00/e8c/eef/a00e8ceef5bfbae53ac9a95a42a7cf5e.png"></div><br>  Les √Æles barri√®res sont des plaques de sable plates ou en blocs form√©es par les vagues et surfent parall√®lement √† la c√¥te du continent.  Ils prennent souvent la forme de longues cha√Ænes qui peuvent s'√©tirer sur plusieurs dizaines de kilom√®tres.  Les √Æles barri√®res sont g√©n√©ralement s√©par√©es par de petits canaux de mar√©e et peuvent former des lagunes entre les √Æles et le continent. <br><br>  Selon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikipedia</a> , les √Æles barri√®res peuvent couvrir jusqu'√† 15% de la c√¥te, vous pouvez donc vous attendre √† les voir sur la plupart des cartes fantastiques, mais en fait, elles sont assez rares.  Et en raison de la nature du bruit, ils ne se produisent presque jamais sur des cartes g√©n√©r√©es de mani√®re proc√©durale qui utilisent le bruit pour cr√©er un terrain. <br><br>  Pour comprendre pourquoi il en est ainsi, jetons un coup d'≈ìil √† la carte vanille de l'√Æle: <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb8/342/f10/cb8342f1095276e3e7ced43ed57bf688.png"></div><br>  En fait, c'est un cercle d√©form√© par une petite quantit√© de bruit basse fr√©quence ajout√©e pour diviser une forme circulaire.  Essayons maintenant d'utiliser le bruit pour briser la c√¥te et former des √Æles c√¥ti√®res.  Voici le m√™me √Ælot avec l'ajout de bruit basse fr√©quence: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e18/658/5b7/e186585b7a15a9287ad56bc13ac61f6d.png"></div><br>  Il a des baies et des capes.  Les √©l√©ments en relief sont assez grands car j'ai utilis√© du bruit basse fr√©quence, qui change lentement.  Cependant, le bruit n'est pas assez fort pour cr√©er des √Æles.  Poussons un peu: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9a/e78/c4a/f9ae78c4a84f5e99b2f58821ccade3b0.png"></div><br>  Nous avons maintenant cr√©√© plusieurs √Æles, mais ce sont essentiellement des spots circulaires, qui ne s'√©tendent pas n√©cessairement le long de la c√¥te.  Vous pouvez ajouter du bruit haute fr√©quence: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/89f/834/cab89f83445965bbad12d0f95bba1d94.png"></div><br>  Cela peut nous donner des c√¥tes tr√®s bris√©es et de petites √Æles le long de la c√¥te, mais rien ne ressemblant √† une √Æle barri√®re. <br><br>  La seule raison √† cela est que le bruit n'est pas adapt√© en x et y, donc bien que le bruit ne soit pas al√©atoire en g√©n√©ral, les formes qu'il cr√©e sont al√©atoires: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2e/4b4/ef6/d2e4b4ef6005d2675d2557f71eb0ce7b.png"></div><br>  Pour certaines choses, c'est bien, mais cela ne convient pas pour cr√©er une forme sp√©cifique, par exemple, des √Æles le long de la c√¥te. <br><br>  Comme dans d'autres cas, lorsque je devais g√©n√©rer une certaine forme ou zone, il √©tait n√©cessaire de cr√©er un masque de la forme requise, puis d'utiliser le bruit √† l'int√©rieur du masque.  (Vous pouvez √©galement utiliser le bruit pour d√©former le masque et lui donner une forme plus naturelle.) Les √Æles-barri√®res sont en fait de longues zones minces qui sont d√©cal√©es par rapport √† la c√¥te.  Cr√©ons donc un masque de cette forme. <br><br>  Pour commencer, nous avons d√©fini la partie de la c√¥te sur laquelle l'√Æle barri√®re sera situ√©e.  Cela peut √™tre fait en s√©lectionnant un point al√©atoire sur la c√¥te et un deuxi√®me point inf√©rieur, qui sont marqu√©s sur la figure avec une ligne rouge dans le coin sup√©rieur droit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b45/e88/a41/b45e88a410c47b6832350b02b3215525.png"></div><br>  Pour commencer √† cr√©er une √Æle barri√®re, je peux simplement prendre une ligne droite entre ces deux points et la projeter un peu vers l'ext√©rieur, dans l'eau.  Cela me donnera une √Æle tr√®s droite et peu naturelle, mais vous pouvez d√©former sa forme pour la cacher.  Le vrai probl√®me est que l'√Æle ne suivra pas le littoral.  Cela semblera probablement normal pour la plupart des tron√ßons directs de la c√¥te, mais cela semblera √©trange sur les c√¥tes sinueuses.  Il vaut mieux reproduire le littoral et en faire la base de la forme de l'√Æle. <br><br>  Pour ce faire, je dois cr√©er une copie du littoral, puis la projeter dans l'oc√©an perpendiculairement au littoral.  J'ai d√©j√† une proc√©dure pour calculer les perpendiculaires (normales) aux lignes bris√©es depuis que j'ai r√©alis√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des lignes manuscrites</a> , et mes c√¥tes vont toujours dans le m√™me sens, donc c'est assez simple: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/9f1/b1e/0b39f1b1e868bb43d98839614109a3f5.png"></div><br>  Ou <i>cela semble</i> simple.  Voyons ce qui se passe si je projette le littoral un peu plus vers l'ext√©rieur (pour cr√©er l'autre c√¥t√© du masque de l'√Æle) sur la partie la moins lisse du littoral: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3e/99f/5b8/a3e99f5b8bed9f6a0ffd74f5ae7e864a.png"></div><br>  Deux segments de la ligne projet√©e se croisent et cr√©ent un ¬´huit¬ª effrayant sur le polygone.  C'est ce que l'on appelle le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">probl√®me de la courbe parall√®le</a> .  Nous ne pouvons pas simplement d√©placer la c√¥te √† une certaine distance, il est √©galement n√©cessaire de r√©soudre les probl√®mes r√©sultant des angles internes et externes pointus. <br><br>  Je cherchais du code Javascript pour r√©soudre ce probl√®me, mais le seul exemple trouv√© (√† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir d'ici</a> ) se bloquait √©tonnamment m√™me sur des √©chantillons assez simples.  J'ai donc √©crit le mien.  En g√©n√©ral, la solution consiste √† d√©placer chaque point le long de la normale, mais v√©rifiez ensuite si le nouveau point cr√©e une ligne coupant l'une des lignes existantes.  Si c'est le cas, nous coupons la boucle et ins√©rons une nouvelle ligne compos√©e du point d'intersection et du nouveau point.  Dans les cas de test que j'ai test√©s, ce syst√®me fonctionnait assez bien pour mes besoins. <br><br>  Alors maintenant, je peux g√©n√©rer des masques simples (pas de boucles) pour les √Æles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/599/060/e89/599060e8909fb0d5dda3f01b7ca82806.png"></div><br>  C'est trop uniforme, donc je vais d√©former les contours: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b00/420/8a9/b004208a92018017e000669848f991ad.png"></div><br>  Les contours peuvent toucher la c√¥te √† certains endroits, mais c'est normal; cela se trouve souvent sur les √Æles barri√®res. <br><br>  L'√©tape suivante consiste √† remplir le contour de terre, mais avant de le faire, je veux allonger les √Æles et ajouter la logique d'√©viter les √Æles qui se croisent en cas de cr√©ation de plusieurs √Æles barri√®res sur le m√™me littoral. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cee/654/659/cee6546597a3c9a4552344298e07e2ca.png"></div><br>  Essayons maintenant d'ajouter du terrain.  Pour ce faire, je vais √©lever la hauteur de tout emplacement terrestre (qui sont des triangles de Delaunay) au-dessus du niveau de la mer: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf7/206/5d4/bf72065d44a8acc8247d2a1895c5db72.png"></div><br>  Ici, il convient de noter quelques aspects.  Tout d'abord, dans le coin sup√©rieur gauche, il y a une √Æle barri√®re assez r√©ussie.  Cependant, l'√Æle ne semble pas bien remplir la d√©charge.  De nombreux triangles terrestres sont ¬´activ√©s¬ª en raison de la pr√©sence de leurs centres √† l'int√©rieur du polygone.  Cela ajoute un caract√®re al√©atoire √† la forme de l'√Æle.  Deuxi√®mement, on peut remarquer que les deux autres √Æles √©taient si proches de la c√¥te qu'elles ont simplement fusionn√© avec elle.  Comme je veux cr√©er des √Æles ici, je n'ai pas besoin que cela se produise trop souvent, donc je vais configurer la g√©n√©ration pour obtenir un plus grand √©cart d'eau entre le littoral et l'√Æle.  (Plus tard, j'ajouterai une v√©rification pour √©viter que cela ne se produise.) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/150/ba5/6ca150ba54c211d1da8fdf4470401a02.png"></div><br>  L'une des bonnes choses √† propos des triangles irr√©guliers terrestres est qu'ils cr√©ent naturellement des canaux de mar√©e typiques des √Æles-barri√®res.  La mauvaise chose √† leur sujet est qu'ils cr√©ent g√©n√©ralement des √Æles tachet√©es qui ressemblent √† des perles d√©form√©es sur une cha√Æne.  Ils ne sont pas tr√®s similaires aux √Æles barri√®res, et si vous prenez beaucoup de triangles individuels, ils ont l'air tr√®s peu naturels. <br><br>  Si j'augmente la largeur des √Æles, les deux effets disparaissent et j'obtiens des √Æles plus naturelles, mais sans canaux de mar√©e: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/153/005/e17/153005e17c9d6bf4e464e2e27b77c1c7.png"></div><br>  Mais je voudrais apprendre √† g√©n√©rer des √Æles tr√®s √©troites.  Une autre approche consiste √† augmenter (de mani√®re significative) le nombre d'emplacements dans le monde pour augmenter la r√©solution: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b6/57c/f04/3b657cf0414f8bcc8cc21da0921d25e6.png"></div><br>  Nous pouvons donc obtenir des √Æles incroyablement fines et d√©taill√©es, mais cela augmente consid√©rablement le temps et la m√©moire n√©cessaires pour cr√©er une carte. <br><br>  Dans ces deux m√©thodes, il y a de fortes chances que certaines parties de l'√Æle soient tr√®s in√©gales: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a75/32a/edd/a7532aedd16eeeba152ab0ee2e213f4b.png"></div><br>  Cela se produit parce que le chemin coupe les deux c√¥t√©s (et parfois les trois c√¥t√©s) des triangles Delaunay sous-jacents.  C'est un probl√®me inh√©rent √† l'utilisation de la triangulation de Delaunay dans la g√©n√©ration de cartes, mais pour une raison quelconque, ils en discutent rarement!  Cela se produit sur les c√¥tes de mon jeu pas tr√®s souvent, car pour r√©duire le nombre de ces cas, j'ai d√©lib√©r√©ment ajout√© une √©tape de lissage, mais cette √©tape a tendance √† d√©truire des √Æles √©troites.  Une solution potentielle est de cr√©er des √Æles l√©g√®rement plus larges et d'utiliser l'anti-aliasing - si elles sont correctement configur√©es, vous pouvez obtenir des √Æles plus minces sans beaucoup d'artefacts triangulaires: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52d/558/3f3/52d5583f3b04c85ddd7f504c3679cc01.png"></div><br>  Cependant, avec cette approche, il y a encore des limites sur l'√©troitesse des √Æles.  De plus, cela signifie que nous n'aurons jamais de c√¥tes v√©ritablement fractales. <br><br>  Parfois, l'algorithme de lissage conduit √† la division du long √Ælot barri√®re en plusieurs petits (comme dans le coin inf√©rieur gauche de l'image ci-dessus), mais il serait pratique d'avoir une option qui vous permet de le faire de force: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/863/e5f/489/863e5f4893bdb0069219c761308b2ff7.png"></div><br>  Il ne reste plus qu'√† donner des noms aux √Æles et √† les cartographier.  Le seul aspect subtil ici est que je ne veux pas donner de noms √† toutes les √Æles de la cha√Æne des √Æles barri√®res.  Dans de v√©ritables cha√Ænes d'√Æles-barri√®res, les √Æles individuelles ont souvent des noms, ce qui conduit au chaos sur la carte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e15/8b4/b27/e158b4b272c4b55b1d3b128e5e1b9d4c.png"></div><br>  Par cons√©quent, lors de la cr√©ation d'une √Æle barri√®re, je prends en compte tout l'arc et y attache un nom, m√™me si par cons√©quent la g√©n√©ration divise l'arc en plusieurs √Æles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fd/797/070/6fd797070e48a48856b4862892ff3b66.png"></div><br>  Habituellement, les √Æles barri√®res sont appel√©es ¬´banques¬ª ou ¬´puits¬ª (barres), de sorte que ces mots se trouvent dans les noms de variantes. <br><br>  Cet exemple montre un probl√®me potentiel d'√Ælot barri√®re: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/028/cee/b56/028ceeb56ebe1c5c83ea7e56f02c3a2f.png"></div><br>  Ici, l'√Æle barri√®re a √©t√© cr√©√©e √† l'int√©rieur de la baie.  Ceci est illogique (en plus, conduit √† l'intersection des noms).  Pour √©viter cela, je peux utiliser ma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">logique de reconnaissance des baies</a> et sauter ces sections du littoral.  Il n'y a probablement aucune protection contre le fou dans cette m√©thode, mais cela fonctionne bien pour cette carte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/086/180/a33/086180a3377f856a818fd9097925a998.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr439198/">https://habr.com/ru/post/fr439198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr439186/index.html">Editeur UX: histoire vraie, vie rial</a></li>
<li><a href="../fr439190/index.html">Comment cr√©er une application de r√©alit√© augment√©e √† l'aide d'ARCore</a></li>
<li><a href="../fr439192/index.html">Haut-parleur PC √† onze</a></li>
<li><a href="../fr439194/index.html">Gestion des personnages avec SharedEvents</a></li>
<li><a href="../fr439196/index.html">JPMorgan Analysts: Apple devrait acheter Blizzard, Netflix ou Sonos pour rassurer les investisseurs</a></li>
<li><a href="../fr439200/index.html">Compositeur pour les petits</a></li>
<li><a href="../fr439202/index.html">D√©tection d'attaque Web √† l'aide de l'encodeur automatique Seq2Seq</a></li>
<li><a href="../fr439204/index.html">Am√©lioration de l'efficacit√© de la photosynth√®se par modification g√©n√©tique des plantes</a></li>
<li><a href="../fr439206/index.html">Comment avons-nous r√©solu le probl√®me de la poursuite des listes de lecture au RecSys Challenge et avons pris la 3e place</a></li>
<li><a href="../fr439208/index.html">Oh, mon code: comment fonctionne MAPS.ME</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>