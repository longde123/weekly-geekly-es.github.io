<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè£ üßñüèø üëΩ Maintien de la position dans le servo variateur: contr√¥le subordonn√© vs mode pas √† pas üßñüèΩ üç† ü§πüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apr√®s la publication des articles pr√©c√©dents sur la commande vectorielle des moteurs √©lectriques, de nombreuses questions se sont pos√©es au sujet de l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maintien de la position dans le servo variateur: contr√¥le subordonn√© vs mode pas √† pas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/npf_vektor/blog/392837/"><img src="https://habrastorage.org/files/1a0/030/245/1a0030245bd548439397f1be298b8b76.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s la publication des articles pr√©c√©dents sur la commande vectorielle des moteurs √©lectriques, de nombreuses questions se sont pos√©es au sujet de l'entra√Ænement de position - comment d√©terminer une position donn√©e avec un entra√Ænement? </font><font style="vertical-align: inherit;">Comment fonctionne un servo variateur dans les machines modernes, comment utiliser un signal provenant d'un capteur de position, comment un variateur pas √† pas diff√®re d'un servo variateur avec r√©gulation subordonn√©e? </font><font style="vertical-align: inherit;">Montrons tout sous forme d'images et de vid√©os.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors qu'est-ce qu'un servo avec une boucle de position? </font><font style="vertical-align: inherit;">Pour commencer, regardez ceci. </font><font style="vertical-align: inherit;">Pour voir les graphismes en arri√®re plan, je vous conseille de regarder en mode plein √©cran.</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/QZCzQNvbjIc%3Ffeature%3Doembed&amp;usg=ALkJrhj2RzJ0bNlWDaeXc_QPdZCCiHKVbA" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Structure de contr√¥le √† trois boucles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me de commande cherche √† maintenir une position donn√©e de l'arbre du rotor. Je fais un effet d√©rangeant, j'√©loigne le rotor de la position r√©gl√©e, mais apr√®s avoir rel√¢ch√© l'arbre, il revient instantan√©ment √† la t√¢che. M√™me si vous le ¬´tournez¬ª de quelques tours, le syst√®me de contr√¥le les d√©visse de quelques tours en arri√®re, et avec une tr√®s bonne dynamique - de telle sorte que le mouvement n'a m√™me pas le temps d'entrer dans les images de la vid√©o. En arri√®re-plan, le programme de fonctionnement de l'entra√Ænement est visible: le courant du moteur est affich√© en rouge (proportionnel au moment), la position actuelle de l'arbre du rotor est affich√©e en vert et le r√©glage de position est jaune. Le moment maximum autoris√© (courant) du moteur dans cette exp√©rience √©tait limit√© √† trois fois le maximum, √† plein je ne serais pas en mesure de le tenir si facilement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment fonctionne un tel syst√®me de contr√¥le? </font><font style="vertical-align: inherit;">Il s'agit d'un syst√®me de contr√¥le esclave classique √† trois boucles avec correction s√©quentielle, illustr√© sur la figure 1.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/eb8/c49/210/eb8c492102b24bce8658e6cc4ad62317.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 1. Syst√®me √† trois circuits de r√©gulation subordonn√©e</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pourquoi un subordonn√©? </font><font style="vertical-align: inherit;">Parce que chaque circuit ferm√© est ¬´subordonn√©¬ª √† la t√¢che du sup√©rieur. </font><font style="vertical-align: inherit;">Il y a trois circuits dans le syst√®me, je liste √† partir de l'int√©rieur: circuits de courant (couple), circuit de vitesse (vitesse), boucle de position. </font><font style="vertical-align: inherit;">En cons√©quence, chaque circuit avec son propre r√©gulateur maintient sa valeur √† un niveau donn√©. </font><font style="vertical-align: inherit;">Dans ce cas, le contr√¥leur PI pour les courants, le contr√¥leur P pour la vitesse et le contr√¥leur PID pour la position ont √©t√© utilis√©s. </font><font style="vertical-align: inherit;">Pas de magie comme la logique floue, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les contr√¥les lin√©aires-quadratiques,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi exactement trois circuits et pr√©cis√©ment tels? Je vais essayer d'expliquer, comme d'habitude, "sur les doigts". Si nous voulons ajuster la position, le mieux que nous puissions contr√¥ler est la vitesse (vitesse), car c'est la vitesse qui affecte directement le changement de position (la vitesse est une d√©riv√©e de la position), et toutes les autres quantit√©s (courant, tension et autres) affectent la situation de mani√®re plus complexe, plus difficile √† r√©gler. De plus, si nous voulons maintenant r√©guler la vitesse, le meilleur moment que nous pouvons contr√¥ler est le moment moteur, car le moment d√©termine l'acc√©l√©ration de l'entra√Ænement, et il est √©galement li√© √† la vitesse avec la loi math√©matique la plus simple. √âtant donn√© que pour un moteur, le moment est courant (pour un moteur √† courant continu, cela est vrai explicitement,et pour les moteurs √† courant alternatif, il est valable pour le courant g√©n√©rateur de couple en contr√¥le vectoriel), puis pour contr√¥ler le moment o√π il est n√©cessaire de contr√¥ler la tension sur l'onduleur du convertisseur, car le courant et la tension sont √©galement connect√©s √† une premi√®re approximation via une simple √©quation diff√©rentielle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous omettez un circuit interne, alors ... la position sera r√©gul√©e, mais elle sera mal r√©gul√©e, pas √† la m√™me vitesse que dans un syst√®me √† trois circuits. </font><font style="vertical-align: inherit;">Si vous jetez, par exemple, le circuit de courant, for√ßant le r√©gulateur de vitesse √† affecter directement la tension de l'onduleur, le moment d'entra√Ænement (courant) restera incontr√¥l√© - il changera comme il le souhaite, les transitoires seront laiss√©s au hasard. </font><font style="vertical-align: inherit;">Malheureusement, certains arduinovides font la structure illustr√©e √† la Fig.2.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/45b/09d/e57/45b09de57dd6467097e427f24776c694.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.2. </font><font style="vertical-align: inherit;">La fa√ßon dont vous n'avez pas besoin d'ajuster la position du lecteur. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une telle structure fonctionne de fa√ßon d√©go√ªtante (lentement et oscille), bien qu'elle fonctionne d'une mani√®re ou d'une autre - le contr√¥leur PI va tout retirer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Courant continu et alternatif: quelle diff√©rence pour la boucle de position?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle est la diff√©rence de contr√¥le de position pour les moteurs √† courant continu et les moteurs √† courant alternatif? Dans la mani√®re de maintenir le moment. Dans un moteur √† courant continu, il suffit de mettre un r√©gulateur de courant, ce qui affecte la tension de l'enroulement d'induit - vous obtiendrez un contr√¥le du couple. Dans les moteurs √† courant alternatif (par exemple, une machine synchrone √† aimant permanent et un moteur asynchrone), une commande vectorielle devra √™tre appliqu√©e. Ce que c'est et comment √ßa marche a d√©j√† √©t√© discut√© en d√©tail dans les articles </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contr√¥le vectoriel sur les doigts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contr√¥le vectoriel pour un moteur asynchrone sur les doigts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Comme pour un moteur √† courant continu, la commande vectorielle vous permet de r√©gler le couple sur le moteur. </font><font style="vertical-align: inherit;">De plus, les m√™mes contr√¥leurs de vitesse et de position sont ¬´suspendus¬ª par le haut. </font><font style="vertical-align: inherit;">L'op√©rabilit√© finale de la boucle de position ne d√©pend pas du type de moteur (seules les nuances mineures changent).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode pas √† pas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les machines synchrones √† aimants permanents, il existe une autre option pour r√©soudre la situation - le mode de fonctionnement dit "pas √† pas". Les moteurs optimis√©s pour cela, respectivement, sont appel√©s pas √† pas. Tous les moteurs pas √† pas ne sont pas des machines synchrones avec des aimants, mais la plupart d'entre eux ne sont que cela (il existe encore des √©tapes de type inducteur de type pas √† pas). Comment √ßa marche? Le moteur fournit simplement du courant continu aux phases requises. Et c'est tout. Le rotor sous l'influence du "ressort magn√©tique" lui-m√™me s'√©l√®ve dans la position correspondant au courant. Si vous devez changer la position de l'arbre, alors le vecteur courant doit √™tre tourn√© - cela d√©pend en douceur ou discr√®tement du "driver" du moteur pas √† pas (avec ou sans micropas). √Ä propos du fonctionnement du moteur synchrone et de son emplacement, un ressort magn√©tique a d√©j√† √©t√© d√©crit dans l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mode pas √† pas est bon car en plus de la boucle de courant, il n'a besoin de rien - ni d'un capteur de position, ni m√™me d'un microcontr√¥leur. Le syst√®me de contr√¥le de ce mode est assembl√© √† partir de trois microcircuits et demi et est utilis√© dans toutes les machines CNC de niveau amateur (et pas si). Quels sont les inconv√©nients? La position est √©galement d√©go√ªtante. Le maintien de la position dans ce mode est le moteur lui-m√™me - un courant constant est fourni au stator, et le rotor a tendance √† se tenir dans la position correspondante. On peut imaginer deux aimants rectangulaires sur un axe passant par leur milieu (Fig. 3). Nous contr√¥lons un aimant (courant statorique), et le second - le rotor, pend tout seul et a tendance √† tourner en fonction du premier, parall√®lement √† lui.</font></font><br>
 <div style="text-align:center;"><img src="https://habrastorage.org/files/75f/1c8/e19/75f1c8e196174a51abe0db7eb60863a4.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">3. Mode de fonctionnement pas √† pas d'une machine synchrone</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le moment sur le rotor dans ce mode change en fonction de la loi du sinus de l'angle de d√©calage entre les deux aimants. </font><font style="vertical-align: inherit;">En position coordonn√©e, le moment est nul (la charge n'agit pas sur le rotor), √† 90 degr√©s (les aimants sont perpendiculaires), le moment moteur est maximum et tend √† faire tourner le rotor en position coordonn√©e. </font><font style="vertical-align: inherit;">Et l'amplitude de ce changement de sinus du moment d√©pend de la magnitude du courant fourni.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le nombre de paires de p√¥les</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Pour am√©liorer la pr√©cision du maintien de la position en mode pas √† pas, le nombre de paires de p√¥les au niveau du moteur est structurellement augment√©. </font><font style="vertical-align: inherit;">S'il y a une paire de p√¥les, alors le moteur correspond √† ces deux aimants sur la fig. </font><font style="vertical-align: inherit;">3 - le rotor peut suspendre jusqu'√† un quart de tour d'avant en arri√®re √† partir d'une position donn√©e. </font><font style="vertical-align: inherit;">Lorsque le nombre de paires de p√¥les augmente, le nombre d'alternances nord-sud augmente, √† la fois dans les aimants du rotor et dans les enroulements du stator. </font><font style="vertical-align: inherit;">Voici une photo montrant un moteur avec une paire de p√¥les et deux:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/e53/7b0/fa2/e537b0fa20974453b51b3f85cdde1b9a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.4. </font><font style="vertical-align: inherit;">Une paire de p√¥les vs deux paires de p√¥les.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous essayez de faire tourner un tel moteur avec deux paires de p√¥les avec le courant continu fourni en phases, le moment sur le rotor augmentera au maximum non pas dans un quart de tour (90 degr√©s, comme dans une paire de p√¥les), mais dans un huiti√®me de tour (45 degr√©s m√©caniques). Le moteur aura deux positions stables du rotor lors d'une r√©volution m√©canique. Pour la commodit√© de d√©crire les processus dans le moteur, le concept de ¬´r√©volution √©lectrique¬ª est introduit - combien le rotor doit √™tre tourn√© pour que les aimants du rotor d'un p√¥le tombent √† la place du m√™me de l'autre p√¥le, c'est-√†-dire faire un "pas". Ensuite, ils disent que le rotor a tourn√© √† 360 degr√©s, et pour traduire cela en m√©canique, il est n√©cessaire de diviser par le nombre de paires de p√¥les. Sur la r√©volution √©lectrique, le comportement de tous les moteurs en termes de contr√¥le est le m√™me quel que soit le nombre de paires de p√¥les.Une augmentation du nombre de paires de p√¥les ne cr√©e qu'une sorte d '¬´√©quipement √©lectrique¬ª - vous pouvez prendre une voiture avec une paire de p√¥les et mettre un r√©ducteur √† quatre vitesses, ou vous pouvez prendre une voiture avec quatre paires de p√¥les et obtenir, grosso modo, la m√™me chose.</font></font><br>
<br>
<h2>  vs  : </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les moteurs pas √† pas, le nombre de paires de p√¥les est tr√®s grand - 50, 100 ou plus. Dans ce cas, la capacit√© naturelle de maintenir la position est tr√®s bonne - si vous garantissez que le moment de charge ne d√©passe jamais le couple moteur maximal, la position sans capteur de position sera maintenue avec une pr√©cision de (¬± 360 / (nombre de paires de p√¥les * 4)) de degr√©s m√©caniques. Certes, le prix pour cela est une forte d√©t√©rioration des performances du moteur en termes de poids, de taille et d'efficacit√©. Si nous comparons la puissance d'un moteur pas √† pas avec une centaine de paires de p√¥les et un moteur synchrone de m√™me taille avec un petit nombre de paires de p√¥les, alors la puissance admise depuis longtemps d'un shagovik sera plusieurs fois inf√©rieure. Et aussi en raison de l'augmentation du nombre de paires de p√¥les, les shagoviks ont du mal √† travailler √† grande vitesse.La fr√©quence du courant en eux doit √™tre fournie autant de paires de paires de fois aussi grande que dans une machine synchrone ¬´r√©guli√®re¬ª, ce qui donne des fr√©quences de courant de l'ordre du kilohertz ou plus - il y a d'√©normes pertes sur l'inversion de magn√©tisation du fer, et tous les syst√®mes de contr√¥le ne le peuvent pas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, les shagoviki ne fournissent pas une bonne dynamique d'acc√©l√©ration et de freinage, car lors de l'acc√©l√©ration, le moteur doit surmonter deux points: le moment de charge, ainsi que le moment dynamique pour acc√©l√©rer la masse du volant et le corps de travail. Et si la somme de tous les moments d√©passe le couple moteur maximum, il sautera une √©tape, ce qui est inacceptable pour la CNC. Par cons√©quent, les vers de ver acc√©l√®rent et freinent n√©cessairement en douceur, avec une grande marge entre le moment total sur l'arbre et le couple moteur maximum, afin de ne pas sauter de pas.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient √©galement de noter qu'en mode pas √† pas, lorsqu'une charge est appliqu√©e au rotor, il c√©dera et s'√©cartera toujours de la position d√©finie d'un certain angle, quel que soit le courant fourni au moteur. De plus, avec une forte perte de charge, des fluctuations sont possibles - le rotor d'un ressort magn√©tique oscille d'avant en arri√®re. Si la charge n'est pas chanceuse et qu'elle est puls√©e, alors elle peut co√Øncider avec la fr√©quence interne du rotor, le faire pivoter, apr√®s quoi le rotor tombera de synchronicit√© - le moteur "sautera une √©tape".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que faire si pour r√©soudre le probl√®me, vous devez conserver une bonne position et obtenir un entra√Ænement dynamique √† grande vitesse? N'utilisez pas de stepshops! Et utilisez une machine synchrone ¬´ordinaire¬ª avec un petit nombre de paires de p√¥les comme servomoteur, installez un capteur de position et construisez un syst√®me de commande √† trois boucles. Il n'y a pas de "pas" dans le syst√®me de contr√¥le vectoriel - il n'y a rien √† perdre. En mode pas √† pas, un courant important est toujours requis pour traverser le moteur et en mode vectoriel avec une structure de commande √† trois boucles, le courant ne circule que lorsqu'une charge est appliqu√©e √† l'arbre. La pr√©cision du maintien de la position dans le syst√®me de r√©gulation subordonn√©e est le plus souvent d√©termin√©e par la pr√©cision du capteur de position du rotor. Plus le capteur est pr√©cis, meilleur est le travail de la boucle de position.Et les capteurs de position modernes sont tr√®s pr√©cis - des centaines de milliers d'√©tiquettes par r√©volution m√©canique. C'est des ordres de grandeur mieux que de donner des moteurs pas √† pas avec l'√©tape de concassage la plus forte.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode pas √† pas vs r√©gulation subordonn√©e: pratique</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, voyons en pratique tout ce qui pr√©c√®de. </font><font style="vertical-align: inherit;">Il faut d√©crire le stand avec lequel je travaille. </font><font style="vertical-align: inherit;">Il y a beaucoup d'informations techniques, je vais le cacher sous le spoiler.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banc d'essai</font></font></b><div class="spoiler_text">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VectorCARD 192101</a>,   ,      ,       .<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b5a/024/f76/b5a024f76a824688b4feb1f58b939a3c.jpg"></div><br>
<i>. 5.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VectorCARD 192101</a></i><br>
<br>
 ‚Äì Leadshine ACM601V36-1000.        100, 4  ,   36,   4,  11.   ‚Äì     1000    (,    , 4000  ()    A  B ).<br>
 ‚Äì        DRV8301-HC-EVM Texas Instruments.<br>
 ‚Äì   VectorCARD 192101    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">192101  ¬´¬ª (ARM Cortex-M4F, 100)</a>.<br>
     ,  ,   . 6.<br>
<img src="https://habrastorage.org/files/d05/d0f/4a8/d05d0f4a82954836aef62a8300ceab35.png"><br>
<i>. 6.       :   (), , .</i><br>
<br>
 -    ,  ,            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   ¬´ ¬ª</a>.          . 1.<br>
     20,     (  ) ‚Äì 10.   ‚Äì  ,      .        ,   .<br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode pas √† pas vs contr√¥le esclave: comparaison en mode statique</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Premi√®rement, nous comparons le mode de fonctionnement pas √† pas et le syst√®me √† trois boucles de r√©gulation subordonn√©e avec le contr√¥le vectoriel ¬´en statique¬ª. Nous r√©glons la m√™me position du rotor, puis nous augmentons progressivement le moment de charge sur l'arbre. Dans le mode de fonctionnement pas √† pas, nous fournissons un courant nominal de 4A et dans le mode de fonctionnement vectoriel, nous d√©finissons la limitation de courant de 4A. Qu'attendons-nous de voir? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le mode de fonctionnement pas √† pas, le courant sera constant √† la fois en phase et en amplitude, et la position du rotor devrait ¬´se plier¬ª sur le ressort magn√©tique sous charge. √âtant donn√© que le nombre de paires de p√¥les est de 4, le couple maximal doit √™tre atteint avec un √©cart de 360/4/4 = 22,5 degr√©s m√©caniques par rapport √† la position convenue d'origine.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que se passera-t-il dans le syst√®me de commande √† trois circuits? Le contr√¥leur de position dans cette exp√©rience est le PID (proportionnel - int√©gral - diff√©rentiel). La lettre cl√© ici est ¬´ET¬ª - elle a une composante int√©grale. Cela signifie que tant qu'il y aura au moins un certain d√©calage entre la position donn√©e et la position actuelle, l'int√©grateur du r√©gulateur int√©grera et augmentera sa sortie jusqu'√† ce que l'erreur atteigne z√©ro. Cela signifie que si vous chargez l'arbre lentement, afin que l'int√©grateur ait le temps d'int√©grer et de compenser l'erreur (c'est-√†-dire en mode statique), l'arbre se tiendra dans la m√™me position ¬´morte¬ª. Mais lorsque la marge actuelle (couple) du variateur est √©puis√©e (la r√©f√©rence actuelle atteint la limite de 4A), le variateur succombe imm√©diatement et s'√©carte de la r√©f√©rence (cependant, il tire tout le temps avec le couple maximal vers la r√©f√©rence).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour suivre la position actuelle de l'arbre du rotor, il est pratique d'observer le signal d'erreur du capteur de position (la diff√©rence entre la r√©f√©rence et la position actuelle), ainsi que le courant du stator. </font><font style="vertical-align: inherit;">Pendant l'exp√©rience, un oscillogramme avec ces donn√©es sera visible en arri√®re-plan. </font><font style="vertical-align: inherit;">Pour observer le moment de charge actuel dans l'exp√©rience, un dynamom√®tre sp√©cialis√© de haute pr√©cision a √©t√© utilis√©, que j'ai sorti du tiroir de la table de la cuisine. </font><font style="vertical-align: inherit;">Ici, en fait, l'exp√©rience elle-m√™me (pour rendre quelque chose de visible - plein √©cran!):</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/xTaPFB7K92E%3Ffeature%3Doembed&amp;usg=ALkJrhg9z5mWPwynNDq5zE0OVTObFIn6TA" frameborder="0" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La vid√©o confirme ce qui a √©t√© dit. </font><font style="vertical-align: inherit;">Dans le syst√®me de contr√¥le vectoriel √† trois boucles, le rotor √©tait immobile jusqu'√† ce que je ¬´s√©lectionne¬ª le courant 4A disponible, puis le rotor a commenc√© √† d√©vier. </font><font style="vertical-align: inherit;">Dans une structure DC-open avec un courant continu, le rotor a facilement succomb√© √† un moment ext√©rieur. </font><font style="vertical-align: inherit;">Comme le nombre de paires de p√¥les de ce moteur est de 4, le rotor s'est √©cart√© de plus de 20 degr√©s de la r√©f√©rence.</font></font><br>
<br>
<h3>  vs  :   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout devient plus int√©ressant en dynamique. Que faire si une charge de choc puls√©e est appliqu√©e? Il en r√©sulte une concurrence entre deux syst√®mes fondamentalement diff√©rents. Dans un syst√®me de contr√¥le vectoriel, la vitesse d√©pend directement de la vitesse de la structure de contr√¥le √† trois boucles. Plus les r√©gulateurs sont r√©gl√©s de mani√®re rigide, plus la fr√©quence de calcul de la structure est rapide, plus les capteurs sont pr√©cis et rapides, meilleure est la r√©ponse √† la perturbation de la dynamique. Dans un mode de fonctionnement pas √† pas, le syst√®me de contr√¥le ¬´repose¬ª. Elle a cr√©√© un vecteur actuel - c'est tout ce dont elle a besoin. Toute la r√©action √† la perturbation est fournie par le moteur lui-m√™me. Le moment sur l'arbre o√π l'arbre du rotor est d√©vi√© se produit ¬´instantan√©ment¬ª, car il s'agit en fait de l'interaction de deux aimants. Mais le moment augmente proportionnellement au sinus de l'angle de d√©viation √©lectrique, ce qui signifie qu'un tel syst√®me aura une certaine rigidit√©.En g√©n√©ral, il s'agit d'un ¬´ressort magn√©tique¬ª courant. La comparaison en dynamique est une tr√®s bonne exp√©rience d√©monstrative pour un syst√®me de contr√¥le √† trois circuits. Si elle est lente, elle ne pourra pas montrer un meilleur r√©sultat qu'une structure ouverte. Oui, en statique, la structure √† trois boucles peut choisir une erreur en positionnant √† z√©ro la partie int√©grante du r√©gulateur, mais en dynamique, elle peut √©galement "s'affaisser" plus que le mode de fonctionnement pas √† pas habituel. V√©rifiez-le?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour r√©aliser cette exp√©rience, j'ai utilis√© une charge mesur√©e, que j'ai trouv√©e dans mon armoire avec des outils, ainsi qu'un fil attach√© √† une tige, qui a un support en porte-√†-faux sur l'accouplement moteur. En abaissant la charge d'une hauteur fixe, nous obtenons une charge d'impulsion d'impact sur l'arbre du rotor. Vous pouvez observer √† quel point l'arbre du rotor s'√©carte de la t√¢che au moment de l'impact. Voici une vid√©o de l'exp√©rience:</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/ZjgNBDkpYVM%3Ffeature%3Doembed&amp;usg=ALkJrhito0wc5U_eiF_pFGn0Vsf-rRlNYg" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initialement, un mode de fonctionnement pas √† pas avec un vecteur courant fixe est activ√©. Je montre comment le rotor se plie sous l'influence du moment de charge, comment, apr√®s avoir ma√Ætris√© le moment de charge, vous pouvez sauter dans une autre position fixe. Ensuite, je m√®ne une exp√©rience pour vider la cargaison. De plus la m√™me chose pour la structure de contr√¥le √† trois boucles. Avez-vous remarqu√© √† quel point l'arbre du rotor a d√©vi√© dans la vid√©o dans le syst√®me de commande √† trois boucles? Ou peut-√™tre plus? Non. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si une vid√©o similaire avait √©t√© tourn√©e par Discovery Channel, ils auraient certainement install√© une cam√©ra √† grande vitesse pour de magnifiques clich√©s comparatifs. Cependant, nous avons un outil plus pr√©cis - un capteur de position du rotor et un microcontr√¥leur. Il vous suffit de supprimer l'erreur de forme d'onde lors de la d√©termination de la position au moment de l'application de la charge d'impulsion. La proc√©dure √† suivre est d√©crite en d√©tail dans l'article.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thodes de d√©bogage d'un logiciel de microcontr√¥leur dans un entra√Ænement √©lectrique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En bref, le microcontr√¥leur enregistre les points de la forme d'onde dans un r√©seau pour un √©v√©nement sp√©cifique, puis la forme d'onde est t√©l√©charg√©e sur l'ordinateur et affich√©e. Dans le logiciel du contr√¥leur, j'ai d√©fini le d√©clencheur pour claquer la forme d'onde lorsque l'erreur de position est sup√©rieure √† un certain param√®tre, en entrant quelques lignes de code C pour cela. Ensuite, sur l'ordinateur, j'ai obtenu un tel oscillogramme pour le mode de fonctionnement pas √† pas avec un courant de 5A:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/79e/abc/6f2/79eabc6f28ad4103ada8cf08c5b3cf59.png"></div><br>
<i>. 7.        ¬´¬ª   ‚Äì         .           (      4),     ,  ‚Äì   .       21 .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai ajout√© trois variables du syst√®me de contr√¥le √† l'oscilloscope: erreur de position, courant statorique, vitesse de l'arbre. L'oscillogramme montre que le courant statorique est rest√© constant et √©gal √† 5A, la charge de choc n'y a introduit qu'une petite perturbation (due √† la FEM d'un moteur tournant). Mais la situation a fortement bondi. La d√©viation maximale de la position de l'arbre par rapport √† la r√©f√©rence √©tait de 36 degr√©s √©lectriques (ou 9 m√©caniques). Il y a un mode oscillatoire amorti du rotor apr√®s l'impact. J'ai men√© plusieurs de ces exp√©riences, en m'assurant de la r√©p√©tabilit√©. Tous les oscillogrammes se sont av√©r√©s similaires - il est bon que si vous avez les outils n√©cessaires, le temps pour mener une exp√©rience et obtenir un oscillogramme (tel qu'ins√©r√© dans l'article) soit de 5 √† 10 secondes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant ce que la structure de contr√¥le √† trois circuits va montrer (Fig. 8). </font><font style="vertical-align: inherit;">Auparavant, je lui ai mis tous les r√©gulateurs √† vitesse moyenne.</font></font><br>
 <div style="text-align:center;"><img src="https://habrastorage.org/files/bba/5df/f95/bba5dff95d8b496fa0771b4defbe2a84.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">8. L'oscillogramme de la r√©action √† une surtension puls√©e avec un syst√®me √† trois boucles de r√©gulation subordonn√©e. </font><font style="vertical-align: inherit;">Le violet montre la d√©viation du rotor par rapport √† la position d√©finie en degr√©s √©lectriques (divis√© par 4 pour passer en m√©canique), le bleu montre le courant du stator le long de l'axe q (courant de formation de moment), le bleu indique sa t√¢che et le rouge indique la fr√©quence de rotation actuelle. </font><font style="vertical-align: inherit;">Dans une cellule, l'axe du temps est de 21 millisecondes.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus est plus int√©ressant ici. En plus de la situation, en fait, j'ai ajout√© √† l'oscilloscope toutes sortes de quantit√©s, qui montrent le travail de r√©gulation subordonn√©e. Au temps initial, il est toujours nul: l'erreur est z√©ro, la vitesse, le courant statorique et sa t√¢che. Aucune force n'agit sur le rotor, il repose en raison de sa force de friction. Mais le ruban √©lectrique en ce moment vole d√©j√† inexorablement vers le bas, la corde se d√©roule ... √Ä un certain moment, la longueur du fil est s√©lectionn√©e, la charge frappe l'arbre, la position commence √† changer, l'erreur (retour du contr√¥leur de position) grimpe, ainsi que la vitesse de l'arbre. En r√©ponse √† cela, le syst√®me √† trois circuits augmente consid√©rablement le moment sur le variateur, essayant de le ramener √† sa position d'origine. Cinq millisecondes apr√®s l'impact, le moment sur le moteur atteint le maximum autoris√© (courant 5A),apr√®s quoi la position commence √† contrec≈ìur √† changer dans la direction oppos√©e, la vitesse change de signe. Apr√®s avoir survol√© un point z√©ro et avoir effectu√© quelques oscillations, le syst√®me vient √† la t√¢che.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut voir comment la t√¢che pour le courant statorique (bleu) est l√©g√®rement en avance sur la valeur actuelle (bleu), mais le retard est inf√©rieur √† une milliseconde, ce qui indique une vitesse √©lev√©e de la boucle de courant. Cependant, certains ¬´peluches¬ª et ¬´aiguilles¬ª sont visibles dans la t√¢che actuelle, en particulier √† la fin du processus de transition. Qu'est-ce que c'est et d'o√π? Voyons ce que le contr√¥leur de position donne dans ce processus - la sortie de ses composants proportionnels, int√©graux et diff√©rentiels. Je laisse de nouveau tomber la bande, les voici:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/80d/3a6/300/80d3a63001de435d86bc94f2c7e1efb7.png"></div><br>
<i>. 9.           .           (      4),  ‚Äì      ,  ‚Äì ,  ‚Äì  .       21 .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyez comment les trois parties du contr√¥leur PID fonctionnent sur le transitoire. La forme d'onde ressemble √† celle d'un manuel, mais celui-ci est en direct, r√©el et frais, uniquement √† partir du moteur. La sortie de la partie proportionnelle est directement proportionnelle √† l'erreur. La partie int√©grale est l'int√©grale d'erreur, voyez comment elle s'est int√©gr√©e ¬´vers le bas¬ª √† partir de la premi√®re grande fluctuation, puis revient √† contrec≈ìur √† z√©ro. La partie diff√©rentielle est une d√©riv√©e d'une erreur. Mais puisque le capteur de position est incr√©mental et seulement 1000 marques, alors un changement dans chaque marque est un √©v√©nement. Par cons√©quent, la position du syst√®me de commande change de mani√®re discr√®te, irr√©guli√®re, ce qui signifie que la d√©riv√©e d'une telle modification sera "en forme d'aiguille". Ou m√™me impulsion, rectangulaire, bruyante - que l'on voit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais attendez ... Le d√©riv√© de la position est √† la m√™me vitesse! Faites d√©filer jusqu'√† la fig. 8 et comparer ce graphique de la vitesse avec le graphique de la partie diff√©rentielle de la figure 9. La m√™me chose, mais pas de bruit! Parce que la vitesse de rotation du module de traitement du codeur incr√©mental est d√©termin√©e de mani√®re plus comp√©tente - le mat√©riel du microcontr√¥leur, qui suit le temps entre les marques du capteur. La m√™me ¬´d√©riv√©e¬ª de position, mais plus correctement mesur√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle est la morale? Tous les composants du contr√¥leur ne sont pas √©galement utiles. Ce que fait la composante diff√©rentielle du contr√¥leur de position est th√©oriquement √† faire par la boucle de vitesse en aval. Comme j'en avais besoin pour un meilleur r√©glage, cela signifie seulement que je n'ai pas r√©gl√© la boucle de vitesse interm√©diaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ah oui. Par o√π avons-nous commenc√© l√†-bas? Avec erreur de position. Dans le mode de fonctionnement en boucle ouverte, l'erreur √©tait de 36 degr√©s √©lectriques (9 m√©caniques), et dans un syst√®me de r√©gulation subordonn√©e √† trois boucles avec ce r√©glage de r√©gulateurs, elle est de 21 degr√©s √©lectriques (5,2 m√©caniques). Mieux oui. C'est encore mieux? Prenons un autre coefficients de contr√¥leur de position. J'augmente tout - Kp, Ki, Kd fois une fois et demie. Nous regardons:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/aca/b11/286/acab11286c4e4184b10855dec87b5150.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 10. L'oscillogramme de la r√©action √† une surtension puls√©e avec un syst√®me √† trois boucles de r√©gulation subordonn√©e. Les coefficients du r√©gulateur de position sont augment√©s d'une fois et demie.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
L'erreur a diminu√©, oui ... 18 degr√©s √©lectriques. Mais que voyons-nous? Le syst√®me de contr√¥le s'est presque imm√©diatement heurt√© √† la limitation actuelle. Elle aimerait appliquer un courant sup√©rieur √† 5A, mais j'ai fix√© la limite √† 5. Pourquoi? Pour comparer honn√™tement avec un syst√®me de contr√¥le ouvert, qui avait √©galement un courant de 5A. Mais cela s'est av√©r√© malhonn√™te: le syst√®me de contr√¥le vectoriel ne cr√©e du courant que lorsqu'il en a besoin (quand il est n√©cessaire de r√©aliser l'instant), et un syst√®me ouvert entra√Æne toujours le courant d√©fini. Du point de vue de l'√©chauffement et des pertes, le syst√®me de contr√¥le vectoriel est beaucoup plus pr√©f√©rable pour le moteur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que le syst√®me vectoriel "abandonne" le courant? </font><font style="vertical-align: inherit;">Au moins pour une courte p√©riode. </font><font style="vertical-align: inherit;">Selon le passeport, le moteur permet 11A. </font><font style="vertical-align: inherit;">R√©solvez 7A pour √©valuer le r√©sultat.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3a5/b59/90d/3a5b5990dbf34173bf953dd2930f9eac.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">11. L'oscillogramme de la r√©action √† une surtension puls√©e avec un syst√®me √† trois boucles de r√©gulation subordonn√©e. </font><font style="vertical-align: inherit;">La limite de courant est pass√©e de 5A √† 7A. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'erreur n'est que de 15 degr√©s √©lectriques! </font><font style="vertical-align: inherit;">C'est 2,5 fois moins que dans le syst√®me de contr√¥le en boucle ouverte. </font><font style="vertical-align: inherit;">Mais regardez, qu'est-ce qu'il y a √† la fin du calendrier? </font><font style="vertical-align: inherit;">"Aiguilles" dans la t√¢che du courant ... et elles continuent et continuent, ce que j'entends acoustiquement - le moteur "sonne". </font><font style="vertical-align: inherit;">C'est ce qu'on appelle l'auto-oscillation - cela a trop entra√Æn√© les coefficients du r√©gulateur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circuits ferm√©s et leur bruit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Nous sommes donc arriv√©s au probl√®me de qualit√© sp√©cifique de tout syst√®me de contr√¥le, qui n'est parfois pas moins important que la pr√©cision du maintien du param√®tre r√©glable lui-m√™me - le bruit. Est-il permis au moteur de "faire du bruit" dans un syst√®me de commande en boucle ferm√©e? Cela d√©pend de combien il fait du bruit et de ce qu'il fait. J'ai pr√©par√© une vid√©o qui montre les diff√©rents bruits qui peuvent na√Ætre dans divers contours du syst√®me de r√©gulation subordonn√©e. Pour ce faire, j'ai fix√© le microphone en contact direct avec le moteur - √† distance du moteur, le son est presque inaudible. Bien que cela d√©pende du moteur, diff√©rents moteurs ¬´sonnent¬ª diff√©remment.</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/MNZu3JD6y3w%3Ffeature%3Doembed&amp;usg=ALkJrhiDch-DaHzJyHAa5se1yGREr6Od3w" frameborder="0" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©but de la vid√©o, le bruit de la boucle actuelle est affich√©. Seule la boucle de courant avec deux r√©gulateurs de courant a √©t√© activ√©e. Un bruit est apparu dans le moteur, que mon coll√®gue a compar√© au bruit d'un tuyau √† travers lequel l'eau coule. Il ressemble √† un bruit "blanc". Ce bruit est g√©n√©r√© par le bruit des mesures de courant de phase. En raison de la composante proportionnelle relativement importante (n√©cessaire pour la vitesse requise), les r√©gulateurs de courant captent toutes les petites fluctuations de la mesure de courant et les amplifient, transf√©rant la tension de l'onduleur √† la t√¢che. C'est-√†-dire Initialement, le courant dans le moteur est r√©gulier et ne fait pas de bruit, mais sa mesure est bruyante, les r√©gulateurs de courant tentent de le compenser, de "tirer" la tension de l'onduleur, ce qui fait que le courant r√©el dans le moteur "fait du bruit". Sur la forme d'onde, vous pouvez le voir comme ceci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f6e/3af/3a8/f6e3af3a825347168aca72d2657f4673.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 12. Oscillogramme du transitoire du saut dans la t√¢che (1A) des r√©gulateurs de courant et de leur ¬´bruit¬ª ult√©rieur. La r√©troaction sur les r√©gulateurs de courant (signal de l'ADC) et la sortie des r√©gulateurs alimentant l'onduleur sont affich√©es. Dans une cellule le long de l'axe du temps 4,2 ms.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
L'oscillogramme montre non seulement le bruit, mais aussi le processus transitoire des r√©gulateurs de courant lorsqu'ils sont allum√©s. Le courant est √©tabli en moins de 1 ms, et le transitoire est proche de l'accord √† un optimum technique. Le bruit dans la mesure du courant de l'ordre de + -0,02 A entra√Æne une variation de la tension de sortie de 20% du courant, qui est entendu comme du bruit. Si vous ralentissez les r√©gulateurs 10 fois, vous pouvez obtenir l'image suivante:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/68d/112/db7/68d112db768a4cdfa435395fa6512316.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 13. L'oscillogramme du processus transitoire du saut dans la t√¢che (1A) des r√©gulateurs de courant √† 10 Kp et Ki sous-estim√© par rapport au r√©glage technique optimal. Dans une cellule le long de l'axe du temps 4,2 ms.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les r√©gulateurs actuels sont devenus doux et silencieux, comme la laine de coton, et ils ne sont absolument pas int√©ress√©s √† r√©pondre √† certains bruits dans le canal analogique - tout comme pour leur propre t√¢che ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, la vid√©o montre diff√©rents sons du contr√¥leur de position. Il y a beaucoup d'exp√©riences l√†-bas, je vais montrer le dernier cas - auto-oscillations avec un contr√¥leur de position trop √©lev√© Kp. √âtant donn√© que le capteur de position est incr√©mental, avec un grand , un changement de position par une seule marque rend le contr√¥leur "fou" tr√®s nerveux, jetant la t√¢che √† la boucle de vitesse et, par cons√©quent, au courant. Quelque chose comme √ßa:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/83a/3d2/55e/83a3d255e2e14c15af0ffb7d4fac0c10.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 14. Auto-oscillations du contour de position avec un Kp excessivement √©lev√©. Le violet et le rouge indiquent le courant statorique de formation de moment (r√©f√©rence et r√©el), bleu - la position du codeur en marques (incr√©ments), bleu - la sortie du contr√¥leur de position (r√©f√©rence √† la boucle de vitesse).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
On peut voir qu'en changeant la position d'un seul rep√®re (un ¬´tick¬ª du capteur de position), le syst√®me de commande projette la r√©f√©rence de courant de 0,3A. C'est un point consid√©rable, √©tant donn√© la puissance moteur de 5A, ce qui conduit au d√©but du mouvement et, par cons√©quent, aux fluctuations. La vid√©o montre comment les auto-oscillations ¬´effrayantes¬ª sonnent, bien que la position saute d'une marque inoffensive d'avant en arri√®re.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä cet √©gard, une question philosophique se pose: quelles vibrations et quels bruits sont terribles, et lesquels ne m√©ritent pas d‚Äô√™tre pris en compte? Tout d√©pend de l'objet - o√π le servo est utilis√©. S'il s'agit d'une machine √† trois coordonn√©es avec une bo√Æte de vitesses et des jeux, un bras manipulateur pour le soudage ou une servocommande √† grande vitesse de certains appareils √† gouverner, la ¬´sonnerie¬ª n'est pas si terrible l√†-bas. Dans de telles applications, c'est juste le bruit acoustique qui peut provoquer une insatisfaction, mais presque rien montr√© dans la vid√©o n'affectera le processus technique. Mais s'il s'agit d'un entra√Ænement direct pour positionner des substrats dans une usine de silicium ou s'il s'agit d'un entra√Ænement direct pour un microscope, il n'y a aucun bruit du mot. Non seulement les grincements de la boucle de position de l'encodeur, mais m√™me ce bruit √† peine audible de la boucle de courant peut d√©j√† √™tre un probl√®me.Parce que tout cela est transmis √† l'organisme de travail et entra√Ænera une violation de la technologie du processus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, je dois dire que tous les sons qui sont montr√©s dans la vid√©o ne sont pas que des sons. Si vous saisissez l'arbre, ils se sentent tous tr√®s bien. Les doigts humains sont tr√®s sensibles - bien mieux que de nombreux capteurs. M√™me ce bruit de ¬´l'eau qui coule¬ª des r√©gulateurs actuels se fait sentir. Tout comme dans une conduite d'eau. Par cons√©quent, pour les t√¢ches d'asservissement qui interagissent avec les humains, les bruits et les vibrations sont √©galement ind√©sirables. Imaginez un simulateur d'avion avec un cockpit inclinable, o√π les commandes sous lui craquent et g√©missent.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment faire face au bruit? Eh bien, avec le contour de position plus ou moins clair - vous devez mettre un capteur plus pr√©cis. L'encodeur de ces exp√©riences avec 1000 balises est le capteur ¬´poulets pour rire¬ª dans le domaine du servo de haute pr√©cision. S'ils mettent un encodeur, alors environ cent mille marques. Et le plus souvent, ils mettent un capteur de position analogique, qui donne un signal sinus / cosinus. En utilisant un bon ADC et un sur√©chantillonnage (mesurant beaucoup plus souvent que n√©cessaire, puis en faisant la moyenne du r√©sultat), vous pouvez obtenir un ordre de grandeur plus pr√©cis que l'encodeur.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que faire du bruit ADC dans la boucle de courant? Recherchez d'abord une source de bruit. Dans ce lecteur, une source de bruit a √©t√© trouv√©e - il s'agit de DC / DC, ce qui rend l'instrument √† 5 V de l'alimentation d'entr√©e et mont√© sur la carte de l'onduleur. Le c√¢blage de la carte n'est pas enti√®rement r√©ussi, et DC / DC ¬´fonit¬ª √† toutes les pistes de la carte passant. L'ADC du microcontr√¥leur lui-m√™me est beaucoup moins bruyant que le bruit de ce DC / DC. Deuxi√®mement, le m√™me sur√©chantillonnage peut √™tre utilis√© si les performances de l'ADC le permettent. Troisi√®mement, vous devez choisir la bonne plage de mesure. J'ai travaill√© avec un moteur 5A √† partir d'un convertisseur 60A. En cons√©quence, la gamme compl√®te de l'ADC pour mesurer le courant est √©galement proche de 60A. Si la plage √©tait de 20 A, le m√™me bruit sur le canal analogique apr√®s conversion en amp√®res serait trois fois moins.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le bruit de l'ADC n'est pas tout. Je n'ai pas montr√© dans la vid√©o l'un des principaux bruits qui ne sont pas audibles - le bruit de PWM. La fr√©quence du PWM dans ces exp√©riences a √©t√© fix√©e √† 20 kHz - √† la fronti√®re de l'audibilit√©. Mais cela ne signifie pas que ces vibrations ne sont pas transmises √† l'arbre du rotor. Il est n√©cessaire de mesurer l'ondulation du courant dans le moteur caus√©e par une fr√©quence PWM donn√©e, de le recalculer pour le moment, et il est alors d√©j√† possible d'√©valuer s'il ¬´passera¬ª √† l'arbre ou non. La figure 15 montre le courant d'ondulation dans la phase moteur, mesur√© par un capteur externe et un oscilloscope.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7c0/d4d/ef6/7c0d4def6a0d4996b64edbb744a9822b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 15. Ondulation de courant dans la phase moteur √† une fr√©quence PWM de 20 kHz. L'amplitude de l'ondulation est de 0,3A.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
L'ondulation actuelle √† 0,3A est assez importante. Il serait plut√¥t significatif que nous positionnions des substrats en silicium dans l'usine Intel avec ce lecteur. Heureusement, cela ne brille pas sp√©cifiquement pour ces types de moteurs et vous pouvez oublier le probl√®me. Mais que se passe-t-il si vous devez effectuer une conduite plus s√©rieuse? Pour commencer, vous pouvez augmenter la fr√©quence du PWM. Les transistors √† effet de champ de puissance modernes peuvent fournir une fr√©quence de commutation allant jusqu'√† 500 kHz. Cependant, il y a ... trois probl√®mes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier probl√®me est qu'avec l'augmentation de la fr√©quence PWM, l'influence du soi-disant ¬´temps mort¬ª augmente (certains l'appellent une pause de temps mort, mais c'est faux - le courant y circule). C'est le moment o√π le transistor inf√©rieur de l'onduleur est d√©j√† bloqu√© et le sup√©rieur n'est pas encore allum√© (et vice versa). Ce temps est le m√™me pour un type de transistor, et en pourcentage de la p√©riode PWM, il devient de plus en plus avec une augmentation de la fr√©quence du PWM. Le temps mort d√©forme la tension de sortie de l'onduleur, ajoutant une non-lin√©arit√© aux r√©gulateurs de courant de l'onduleur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me probl√®me est qu'avec l'augmentation de la fr√©quence PWM, il devient plus difficile de g√©n√©rer ce microcontr√¥leur tr√®s PWM. Le microcontr√¥leur fait du PWM en utilisant une minuterie mat√©rielle qui se d√©clenche par unit√© √† chaque cycle d'horloge du microcontr√¥leur. En r√©glant la comparaison avec la minuterie, le programmeur choisit √† quelle heure ouvrir la cl√©. Que se passera-t-il dans un tel syst√®me avec un microcontr√¥leur √† 100 MHz et une fr√©quence PWM de 500 kHz? On se divise l'un dans l'autre, on obtient 200 quanta (discrets) de r√©glage du point de consigne. 200 param√®tres de r√©glage de tension pour PWM ne conviennent pas du tout. Un servo a besoin d'au moins deux ordres de grandeur de plus. Pour cela, certains fabricants de microcontr√¥leurs int√®grent le soi-disant PWM haute r√©solution dans leurs produits - ils permettent de compter le temps d'ouverture des cl√©s avec une r√©solution temporelle plusieurs fois meilleure qu'un cycle d'horloge unique du microcontr√¥leur.Il existe une telle possibilit√© dans ce microcontr√¥leur, cependant, le troisi√®me probl√®me emp√™che l'inclusion de PWM haute r√©solution.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisi√®me probl√®me concerne les capteurs de courant. Dans l'onduleur utilis√©, ils sont de type shunt et sont en s√©rie avec les touches inf√©rieures de l'onduleur. Et cela signifie qu'il est possible de mesurer le courant en phase uniquement au moment o√π la touche inf√©rieure est ouverte. Et cela signifie que le d√©marrage de l'ADC doit √™tre synchronis√© avec le fonctionnement PWM et que la mesure doit √™tre effectu√©e exactement au moment o√π la touche inf√©rieure est ouverte. Le probl√®me est que les transitoires dans les circuits analogiques n'ont pas le temps de se terminer, si la fr√©quence PWM est tr√®s √©lev√©e - le courant commence √† √™tre mesur√© avec une erreur. En g√©n√©ral, tout est compliqu√© ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe une mani√®re fondamentalement diff√©rente - certains fabricants de servo-variateurs refusent g√©n√©ralement le PWM et font une boucle de courant mat√©riel soit sur le FPGA soit sur des amplificateurs op√©rationnels fonctionnant en mode lin√©aire et dissipant toute l'√©nergie exc√©dentaire que le PWM est con√ßu pour √©conomiser. </font><font style="vertical-align: inherit;">Mais c'est une histoire tr√®s, tr√®s diff√©rente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusions</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les exigences pour les servos sont tr√®s diff√©rentes - quelqu'un a besoin d'un mode de contr√¥le pas √† pas pour une simple machine CNC lente (le prix d'√©mission est pilote + moteur quelques milliers de roubles), quelqu'un a besoin d'une telle qualit√© de maintien de la position que m√™me le bruit du circuit actuel devient un probl√®me. </font><font style="vertical-align: inherit;">Cet article ¬´au sommet¬ª parle de certains aspects du travail du syst√®me de r√©gulation subordonn√©e et de la qualit√© du travail de la boucle de position afin d'initier le lecteur √† autre chose que les ¬´beaux hommes¬ª bien connus. </font><font style="vertical-align: inherit;">La qualit√© du servo variateur montr√©e dans ces exp√©riences est en effet tr√®s m√©diocre, principalement en raison de la faible r√©solution du capteur de position du rotor. </font><font style="vertical-align: inherit;">Lorsque vous utilisez un capteur avec une bonne r√©solution, la qualit√© de la r√©gulation augmente nettement.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La publicit√©</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces exp√©riences ont √©t√© r√©alis√©es sur le kit </font><font style="vertical-align: inherit;">de </font><font style="vertical-align: inherit;">d√©bogage </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VectorCARD K1921BK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de NPF Vektor LLC, construit sur la base du microcontr√¥leur de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">motocontr√¥le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> domestique K1921BK01T </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">du NIIET OJSC (ARM Cortex-M4F, 100 MHz)</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le kit de d√©bogage comprend tous les √©quipements pr√©sent√©s dans l'article vid√©o, y compris le logiciel du microcontr√¥leur dans les codes source avec ce syst√®me √† trois boucles de r√©gulation subordonn√©e, ainsi que le logiciel pour observer les oscillogrammes de toutes les variables du syst√®me de contr√¥le.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liens associ√©s √† mes autres articles</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contr√¥le vectoriel du moteur √©lectrique ¬´sur les doigts¬ª </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thodes de d√©bogage du logiciel des microcontr√¥leurs dans un entra√Ænement √©lectrique </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouveau microcontr√¥leur domestique de contr√¥le moteur K1921VK01T de OJSC ¬´NIIET¬ª</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vid√©o bonus</font></font></b><div class="spoiler_text">         :<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/LxRMKj_8Bcg%3Ffeature%3Doembed&amp;usg=ALkJrhj2yq5wwDP0MxCdCNQ_vzphnfCxXA" frameborder="0" allowfullscreen=""></iframe></div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr392837/">https://habr.com/ru/post/fr392837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436936/index.html">Dep√≥sito nuclear japon√©s en Primorye o el sitio de disposici√≥n de los submarinos nucleares de la Flota del Pac√≠fico</a></li>
<li><a href="../es436938/index.html">Guix es el sistema operativo m√°s avanzado.</a></li>
<li><a href="../fr392829/index.html">PO2RT: le coworking en hauteur</a></li>
<li><a href="../fr392831/index.html">Station m√©t√©o mobile sur Arduino</a></li>
<li><a href="../fr392833/index.html">Adaptateur de programmation sans fil Arduino ou AVR avec chargeur ESP8266</a></li>
<li><a href="../fr392839/index.html">Module de contr√¥leur universel pour l'Internet des objets</a></li>
<li><a href="../fr392841/index.html">–ü—Ä–æ–µ–∫—Ç–æ—Ä—ã Epson –∏ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî —Å–æ–≤–µ—Ç—ã –ø–æ –≤—ã–±–æ—Ä—É –ø—Ä–æ–µ–∫—Ç–æ—Ä–∞</a></li>
<li><a href="../fr392843/index.html">Quelle distance une voiture autonome doit-elle parcourir pour prouver sa fiabilit√©</a></li>
<li><a href="../fr392845/index.html">SpaceX a t√©l√©charg√© des photos du lancement le plus r√©ussi du vaisseau spatial Falcon 9 de son histoire</a></li>
<li><a href="../fr392849/index.html">Les mousses m√©talliques peuvent prot√©ger divers types de rayonnement et m√™me arr√™ter les balles perforantes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>