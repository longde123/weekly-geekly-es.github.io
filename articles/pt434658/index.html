<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏼 🗻 😊 Desenvolvedor de módulo de potência. Tratamento de erros 👩🏽‍🤝‍👩🏻 ➰ 😼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saudações! Nos meus artigos anteriores ( uma e duas vezes ), você se familiarizou com o módulo de energia da meia ponte, que permite criar um converso...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desenvolvedor de módulo de potência. Tratamento de erros</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434658/"> Saudações!  Nos meus artigos anteriores ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">duas vezes</a> ), você se familiarizou com o módulo de energia da meia ponte, que permite criar um conversor de praticamente qualquer topologia.  Eu mostrei como rapidamente e sem muito esforço obter o layout do conversor de energia e executar a ideia e, no processo de implementação, foram identificadas algumas deficiências. <br><br>  Infelizmente, mesmo em dispositivos bastante simples, é necessária uma segunda revisão do ferro para "limpar" as más implementações de um determinado funcional, melhorar o layout e o design.  Como resultado, foi realizado um trabalho para otimizar os parâmetros técnicos e melhorar a usabilidade do módulo.  Hoje, neste artigo, vou falar mais sobre essas alterações, explicar por que motivo e no final do artigo, você verá fontes atualizadas.  Vamos lá! <br><br> <a href=""><img src="https://habrastorage.org/webt/go/w1/bv/gow1bvqvzdybxs94xxigwzryhao.jpeg"></a> <br><br><a name="habracut"></a><br><h2>  Alteração nº 1 </h2><br>  No processo de coleta do layout, experimentei a inconveniência de ter que arrastar energia extra + 3,3V para a placa de energia.  Eu nem sei por que fiz isso, olho para o circuito e não me entendo)) De qualquer forma, foi decidido aumentar a potência do módulo apenas 12V e obter 3,3V já na placa.  O consumo atual no barramento de 3.3V é de cerca de 10 mA, alimenta a parte lógica dos drivers do transistor, a lógica de proteção de hardware e 1 LED, portanto, não é economicamente viável definir dc / dc e foi decidido usar um estabilizador linear convencional (LDO): <br><br> <a href=""><img src="https://habrastorage.org/webt/rw/4n/li/rw4nliora3rkvs9zyryyzn8nn7g.png"></a> <br><br><h2>  Alteração No. 2 </h2><br>  A segunda revisão do design também foi otimizada para o custo dos componentes.  Um dos principais componentes que determina as características do módulo é o driver das teclas de energia - 1EDC60I12AHXUMA1.  Este é o principal driver da Infineon, mas acabou sendo um pouco redundante, ou melhor, não consegui me entender nesse conceito. <br><br>  Sim, possui uma grande corrente de 6,8A para abertura e 10A para fechamento. Isso permite que você alterne uma corrente bastante grande em alta frequência.  Em teoria, é legal, mas na prática encontrei um limite de frequência causado por parâmetros espúrios dos circuitos e fios conectados ao módulo.  O teto prático fica em algum lugar na região de 250-300 kHz, e a faixa de freqüência de operação mais popular é de cerca de 60 ... 120 kHz, por isso foi decidido instalar o driver da mesma linha, mas com uma corrente de abertura mais baixa e ao mesmo tempo mais barato e disponível - 1EDC40I12AHXUMA1.  Em geral, difere apenas na corrente mais baixa, na prática, foram testados um conversor buck e uma meia ponte com uma frequência de operação de até 250 kHz e esse driver acabou sendo suficiente para obter perdas ótimas, que representavam cerca de 15 ... 20% da estática no canal.  Além disso, essa substituição permitiu reduzir o custo em US $ 6 em apenas uma posição!  A propósito, este motorista está no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DKO Elektronshchik</a> a um preço muito bom, embora 200 semanas a 121 rublos tenham sido vendidos há 2 semanas, mas eles os ajuntaram rapidamente, eu mesmo peguei 50 deles da ganância. <br><br> <a href=""><img src="https://habrastorage.org/webt/2k/ah/d8/2kahd83r1nrawo1xpgexetoylvi.png"></a> <br><br>  É claro que você pode deixar o driver antigo, mas na Federação Russa custa 2 vezes mais, embora permita reduzir as perdas totais em transistores em cerca de 5 a 10%.  Ou use o 1EDC40I12AH em maquetes e coloque o irmão mais velho do 1EDC60I12AH em produção, porque toda a linha desses drivers é compatível com pinos. <br><br><h2>  Alteração nº 3 </h2><br>  O processamento mais profundo foi a proteção contra corrente de hardware.  Os comentários tiveram muitos conselhos e perguntas valiosos <s>e não muito</s> , alguns foram levados em conta, a outra parte me pareceu irrelevante. <br><br>  Aqui, gostaria de me afastar um pouco e falar sobre o micro-experimento realizado na primeira revisão.  Como você se lembra, o acoplador óptico mais simples LTV-817 foi usado para desacoplar a unidade de energia do controle (este é o mesmo PC-817 “popular”).  Pode ser encontrado frequentemente no feedback (SO) de fontes de alimentação de comutação baratas (IIPS), mas é usado no SO de tensão, onde não é necessário desempenho especial.  Eu queria experimentá-lo na proteção atual de hardware, porque  ele tem um bom preço (cerca de US $ 0,03) e vê na prática como ele se comportará.  Em princípio, ele lida com sua tarefa em frequências de até 40 ... 60 kHz, com um aumento adicional na frequência, o acoplador óptico não tem tempo para alternar (a tensão aumenta lentamente) e a corrente passante passa pelas teclas por 2-3 períodos.  Obviamente, com uma corrente de curto-circuito de 10 a 15A, isso causará apenas um pouco de calor e a proteção ainda funcionará, mas, quando alimentada pela rede, é 100% ampla - verificada.  Acho que o experimento foi um sucesso e o PC817 pode ser colocado em defesa se você estiver fabricando um dispositivo de grande escala com baixa frequência de comutação, onde uma economia de US $ 0,2-0,3 será significativa. <br><br>  Como resultado, substituí este acoplador óptico por um mais rápido, mas mais caro e menos popular - TLP2362, com ele o tempo de resposta da reação é de 2 ... 6 μs. <br><br> <a href=""><img src="https://habrastorage.org/webt/sq/fg/5t/sqfg5txrkqexoncrrmfptql9pcw.png"></a> <br><br>  Como você pode ver, a ideologia geral permaneceu a mesma; a implementação e os componentes mudaram um pouco.  Como sensor de corrente, 2 derivações conectadas em paralelo são usadas em um caso semelhante ao 2512; na verdade, são 2 resistores de precisão com 1% de erro, mais áreas soldadas com gordura e uma potência de dissipação de 3 W, produzida pela Bourns.  Nas lojas da Federação Russa, eles custam cerca de US $ 1 a 1,5, mas eu pedi 1000 peças na LCSC, eles provavelmente compraram uma bobina imediatamente e o saldo apareceu no site deles, o preço é de US $ 0,05 ou 20 vezes mais baixo!  Dê um mergulho enquanto estiver em estoque - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> .  Normalmente, não existem componentes específicos no LCSC, mas só aparecem se alguém encomendou muito e a loja os comprou e vende as sobras.  Ou você precisará encomendar mais de 100 derivações e elas a trarão para você. <br><br>  O sinal do sensor de corrente é amplificado usando um amplificador operacional (op-amp) D5, que aumenta a tensão para 4V a 20A.  Então, usando o comparador D6, esse sinal é comparado ao de referência e, se estiver acima dele, 1 lógico aparece na saída de D6 (pino 1), que “acende” o LED no acoplador óptico.  Nesse caso, o acoplador óptico possui uma inversão, ou seja, quando um log.1 é aplicado a ele, ele fornece um log.0 na saída e para desativar os drivers D2 e ​​D4, eles precisam enviar um log.1 para os pinos 3, verifica-se que o sinal precisa ser invertido de volta para o que é aplicado inversor D8.  Concluímos que, quando ocorre um erro na saída de proteção, o log.1 é instalado e desliga os drivers e, durante a operação normal, a saída é o log de proteção.0 e isso permite que os drivers funcionem normalmente. <br><br>  Obviamente, era possível ficar sem um inversor e implementar a “inversão preliminar” no comparador, ligando-o de maneira um pouco diferente, para que, se a corrente fosse excedida, produzisse um log.0, então haveria um log.1 na saída do acoplador óptico e o inversor D8 poderia ser removido do circuito.  Fiz o que fiz para tornar a lógica da proteção mais compreensível para iniciantes, como  essa inclusão é a mais óbvia, bem, e o inversor é essencialmente um amplificador de corrente adicional, o que é importante, porque  Na saída do sinal de erro, há um LED, 2 microcircuitos de driver e também nosso microcontrolador, ou talvez você decida travar outra coisa, para que a margem atual não seja prejudicada aqui. <br><br>  Além disso, por uma questão de conveniência, foram adicionados 2 jumpers.  O primeiro (no circuito J1) serve para desativar o sinal com proteção de corrente; por padrão, esse jumper é fechado e envia um sinal ao driver e ao controlador PWM / DSP.  Se, por algum motivo, você precisar desativar o sinal de proteção ou trazê-lo para outro circuito, poderá remover o jumper.  O segundo (no diagrama J2) é simplesmente a saída do sinal amplificado do shunt, de modo que é possível conectar convenientemente a sonda do osciloscópio ou o sistema operacional por corrente, embora o isolamento galvânico esteja "perdido". <br><br><h2>  Alteração nº 4 </h2><br>  De fato, este é um grupo de alterações e refere-se a uma alteração no layout e nos conectores.  Primeiramente, o conector para conectar à placa de controle foi substituído de WF-6 para BH-10, porque  o último permite organizar com mais precisão o loop e montá-lo não requer solda ou cravação astuta.  Em segundo lugar, o radiador foi afastado dos transistores em 1 mm, ou seja, pela espessura da junta de cerâmica, porque  na primeira revisão, isso não foi levado em consideração e tive que estuprar um pouco as pernas dos transistores, o que não é bom.  Em terceiro lugar, os capacitores C7-C9 no barramento de força foram movidos mais 1 mm do radiador, agora o espaço entre o radiador e os capacitores é de 3 mm. <br><br>  A última mudança não é crítica para mim, porque  o radiador com uma corrente nominal de 20A não aqueceu acima de +65 <sup>o</sup> C, mas várias pessoas falaram sobre esse problema em potencial, por isso foi decidido gastar um milímetro extra de textolito. <br><br><h2>  Alteração nº 5 </h2><br>  Provavelmente não é uma mudança, mas apenas uma versão alternativa - desta vez a versão de alta tensão do módulo também foi feita.  Foi utilizado um transistor IPP65R225C7XKSA1, os capacitores C7-C9 foram usados ​​em uma caixa semelhante de 22x25 mm com capacidade de 100 uF a 400V.  Também no circuito de proteção de corrente você pode instalar apenas um shunt, então sua resistência será de 4 mOhm, não 2, e, portanto, o corte de corrente será de 10A em vez de 20. <br><br>  Objetivamente, 20A no módulo de alta tensão não pode ser espremido, porque  o tamanho do radiador não permitirá dissipar tanto calor e, a 10A, eles foram testados com sucesso em um layout de chastotnik de 3 kW.  Portanto, colocamos 1 transistor no módulo de alta tensão e já escolhemos o número de derivações.  Em princípio, se a proteção estiver configurada em 20A, ela também salvará do curto-circuito e, com uma corrente de irrupção significativa, não ficará louca.  Além disso, ninguém proíbe colocar duas chaves para cima e para baixo no módulo de alta tensão, o local não desapareceu. <br><br>  A distância entre o módulo dc / dc e o driver também foi aumentada, e a pegada do módulo também foi corrigida.  O fato é que, inicialmente, peguei o modelo da caixa do módulo (SIP-7) da 3dcontent e não a verifiquei, acabou sendo um erro - as pernas estavam 1 mm mais afastadas da borda do gabinete do que na realidade, então o módulo entrou em um ajuste de interferência.  Agora o modelo foi corrigido e a folga aumentada em 3 mm. <br><br><h2>  Ordem PCB </h2><br>  Na primeira revisão, elaborei o conceito básico do módulo e do layout; a segunda revisão, claro, mudou um pouco o módulo, mas não globalmente, por isso foi decidido encomendar 50 placas de uma só vez, montar um conjunto completo e distribuir vários módulos aos amigos para testar a repetibilidade e a capacidade de sobrevivência em <s>mãos tortas</s> . <br><br><img src="https://habrastorage.org/webt/kj/s1/w6/kjs1w6shht-dod1olgmnv6szlqq.jpeg"><br><br>  Para mim, montei 5 módulos: 2 de baixa voltagem e 3 de alta voltagem.  Eu concebi esse conjunto como um "kit de desenvolvimento", porque  permite montar não apenas um conversor separado, mas também simular todo o dispositivo, por exemplo, eu já o testei fluentemente em um regulador de tensão (3 meias-pontes de alta tensão), em um conversor de frequência, e agora estou trabalhando em um inversor, que é 2 módulos de baixa tensão para aumentar de 24V a +380V por um circuito de ponte e uma meia ponte para desenhar um seno da tensão bipolar (pretendo escrever sobre isso).  Portanto, se você planeja estudar minuciosamente a eletrônica de potência, monte o mesmo kit e, para "experimentar" o suficiente, é claro. <br><br><img src="https://habrastorage.org/webt/w0/ns/hr/w0nshra5c_1f75i9cur-jbwlhme.jpeg"><br><br>  Encomendei placas no PCBway e recebi os seguintes preços: <br><br> <a href=""><img src="https://habrastorage.org/webt/ki/do/0z/kido0zxkaq6zhp3xdmodxitzujc.png"></a> <br><br>  Existem 2 conjuntos de placas no pedido, mas pode ser visto que os próprios módulos custam US $ 64, ou seja, cada placa custa US $ 1,28 / pc.  Entrega custa US $ 13 para tudo, acho que se você jogar fora o segundo conjunto de placas, poderá encontrar US $ 10 para entrega.  O custo total das placas saiu US $ 1,48 / pc.  Você pode queimar e não ficar chateado)) <br><br>  Da próxima vez, pretendo tentar encomendar PCBway, placas, componentes e instalação.  É interessante ver se será possível economizar no final das contas na compra de componentes.  Ao contrário do LCSC, o PCBway em si é comprado na digikey, mouser e arrow (esses distribuidores causam mais confiança), para que você possa comprar tudo de uma só vez.  Na mesma ordem, transistores e drivers vieram do engenheiro eletrônico, o restante com LCSC é inconveniente e pagar 3 entregas (taxas + 2 lojas de componentes) não é rentável, você pode economizar US $ 20 a 30.  Se for interessante, posso escrever um "tutorial" sobre este procedimento e preparar o pacote de documentação. <br><br><h2>  Como conseguir uma prancha? </h2><br>  Muitas pessoas perguntaram sobre isso no PM e nos comentários, eu respondi com ambíguo "mais tarde" e apenas lutei com a distribuição dos códigos-fonte, que foram anexados no final dos artigos.  Infelizmente, para a primeira revisão, eu não tinha 100% de certeza, então pedi para aguardar a execução e a revisão número dois.  Chegou a "revisão número dois" e descreverei várias maneiras: <br><br><ul><li>  Pegue a fonte na forma de arquivos Gerber e envie para o seu fabricante favorito.  Sim, não o vinculo a uma produção específica, tudo é aberto e democrático.  Talvez você encontre preços mais baixos ou deseje placas dos Estados Unidos, não da China.  Se houver dificuldades com o pedido em algum lugar, você também pode me perguntar: tentarei ajudar; </li><li>  Faça o pedido com um clique no PCBway - faça o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pedido</a> .  A qualidade das placas que você obtém pode ser vista nas fotografias do artigo, o fabricante também não bagunça os recortes dentro das placas, porque outros tiveram problemas, mas não fizeram cortes de isolamento sob os drivers e módulos dc / dc; </li><li>  Eu tenho cerca de 30 placas restantes, em princípio eu posso compartilhá-las.  O único pedido é que, se você puder fazer o pedido sozinho, 5 placas custarão US $ 12, incluindo o frete.  Se, por algum motivo, você não puder fazer o seu pedido, escreva - enviarei por correio. </li></ul><br><h2>  Fontes para o módulo de energia </h2><br>  Desta vez, você pode ver não apenas o esquema em arquivos PDF e gerber, mas também o projeto de origem no Altium Designer.  Você pode fazer alterações ou substituir componentes; por exemplo, de repente você deseja transistores no TO-247, coloque-os se achar necessário.  Havia muitas sugestões e dicas diferentes nos comentários, para implementá-las objetivamente todas elas não funcionarão, porque  às vezes eles se contradizem e eu não tenho carro, então agora você tem a oportunidade de adicionar toda a sua lista de desejos e mostrar a todos como fazê-lo. <br><br><ul><li>  Diagrama de circuitos - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PDF</a> </li><li>  Lista de componentes (BOM) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Excel</a> </li><li>  Arquivos PCB Gerber - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RAR</a> </li><li>  Fontes no Altium Designer - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RAR</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt434658/">https://habr.com/ru/post/pt434658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt434648/index.html">Notas em inglês # 1: termine com esse "muito"</a></li>
<li><a href="../pt434650/index.html">Agora oficialmente. Para o extremismo na Internet, a responsabilidade criminal é abolida (pela primeira vez)</a></li>
<li><a href="../pt434652/index.html">Emigração de TI com a família. E especialmente a procura de emprego em uma pequena cidade na Alemanha, quando você já está lá</a></li>
<li><a href="../pt434654/index.html">A ciência está prestes a traduzir o Twitter diretamente para o seu cérebro</a></li>
<li><a href="../pt434656/index.html">Vazamento de licenças do banco de dados ESET da África do Sul</a></li>
<li><a href="../pt434660/index.html">Como avaliar a relação custo-benefício da introdução de um sistema caro e justificar o orçamento antes do gerenciamento</a></li>
<li><a href="../pt434662/index.html">Produto vs. Projeto: qual a diferença entre profissões que costumam ser confusas</a></li>
<li><a href="../pt434664/index.html">Abordagem quase hambúrguer de engenharia</a></li>
<li><a href="../pt434666/index.html">Regras do jogo no mercado moderno de criptomoedas</a></li>
<li><a href="../pt434670/index.html">Relatório Anual Habrapost - 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>