<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëàüèø üëÜüèª üëµüèª PHP-Generika heute (na ja, fast) üì∑ üôçüèΩ üîñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie PHP-Entwickler fragen, welche M√∂glichkeiten sie in PHP sehen m√∂chten, nennen die meisten Generika. 


 Generische Unterst√ºtzung auf Sprachebe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PHP-Generika heute (na ja, fast)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456466/"><p>  Wenn Sie PHP-Entwickler fragen, welche M√∂glichkeiten sie in PHP sehen m√∂chten, nennen die meisten Generika. </p><br><p>  Generische Unterst√ºtzung auf Sprachebene w√§re die beste L√∂sung.  Aber sie zu realisieren ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">schwierig</a> .  Wir hoffen, dass eines Tages die Unterst√ºtzung der Muttersprachler Teil der Sprache wird, aber das Warten wird wahrscheinlich mehrere Jahre dauern. </p><br><p>  Dieser Artikel zeigt, wie wir mit vorhandenen Tools, in einigen F√§llen mit minimalen √Ñnderungen, die Leistungsf√§higkeit von Generika in PHP sofort nutzen k√∂nnen. </p><a name="habracut"></a><br><blockquote>  Von einem √úbersetzer: Ich verwende bewusst Transparentpapier aus den englischen "Generika", weil  Ich habe in der Kommunikation noch nie geh√∂rt, dass jemand es "generalisierte Programmierung" nannte. </blockquote><br><h2 id="soderzhanie">  Inhalt: </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was sind Generika?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">So implementieren Sie Generika ohne Sprachunterst√ºtzung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Standardisierung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Werkzeugunterst√ºtzung</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Code-Unterst√ºtzung von Drittanbietern</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Weitere Schritte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einschr√§nkungen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Warum f√ºgen Sie der Zunge nicht einfach Generika hinzu?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was ist, wenn ich keine Generika ben√∂tige?</a> </li></ul><br><h2 id="anchorwhat-are-genericsanchorchto-takoe-dzheneriki"><a name="what-are-generics"></a>  Was sind Generika? </h2><br><p>  Dieser Abschnitt enth√§lt eine kurze Einf√ºhrung in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Generika</a> . </p><br><p>  Links lesen: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">RFC</a> zum Hinzuf√ºgen von PHP-Generika </li><li>  Generische Unterst√ºtzung in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Phan</a> </li><li>  Psalm Generika und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Vorlagen</a> </li></ul><br><h3 id="prosteyshiy-primer">  Einfachstes Beispiel </h3><br><p>  Da es derzeit nicht m√∂glich ist, Generika auf Sprachebene zu definieren, m√ºssen wir eine weitere gro√üartige Gelegenheit nutzen - sie in den Dockbl√∂cken zu definieren. </p><br><p>  Wir verwenden diese Option bereits in vielen Projekten.  Schauen Sie sich dieses Beispiel an: </p><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string[] $names * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> User[] */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(iterable $names)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p>  Im obigen Code tun wir, was auf Sprachebene m√∂glich ist.  Wir haben den Parameter <code>$names</code> als etwas definiert, das aufgelistet werden k√∂nnte.  Wir haben auch angegeben, dass die Funktion ein Array zur√ºckgibt.  PHP <code>TypeError</code> einen <code>TypeError</code> wenn die Parametertypen und der R√ºckgabewert nicht √ºbereinstimmen. </p><br><p>  Docblock verbessert das Verst√§ndnis des Codes.  <code>$names</code> m√ºssen Zeichenfolgen sein und die Funktion muss ein Array von <code>User</code> .  PHP selbst f√ºhrt solche √úberpr√ºfungen nicht durch.  IDEs wie PhpStorm verstehen diese Notation und warnen den Entwickler, dass der zus√§tzliche Vertrag nicht eingehalten wurde.  Dar√ºber hinaus k√∂nnen statische Analysewerkzeuge wie Psalm, PHPStan und Phan die Richtigkeit der von und zu der Funktion √ºbertragenen Daten √ºberpr√ºfen. </p><br><h3 id="dzheneriki-dlya-opredeleniya-klyuchey-i-znacheniy-perechislyaemyh-tipov">  Generika zum Bestimmen von Schl√ºsseln und Werten von Aufz√§hlungstypen </h3><br><p>  Oben ist das einfachste Beispiel eines Generikums.  Komplexere Methoden umfassen die M√∂glichkeit, den Typ der Schl√ºssel sowie den Wertetyp anzugeben.  Nachfolgend finden Sie eine M√∂glichkeit, dies zu beschreiben: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array&lt;string, User&gt; */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p>  Hier hei√üt es, dass das von <code>getUsers</code> Array Zeichenfolgenschl√ºssel und Werte vom Typ <code>User</code> . </p><br><p>  Statische Analyseger√§te wie Psalm, PHPStan und Phan verstehen diese Anmerkung und ber√ºcksichtigen sie bei der √úberpr√ºfung. </p><br><p>  Betrachten Sie den folgenden Code: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array&lt;string, User&gt; */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(int $age)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(getUsers() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $name =&gt; $user) { showAge($name); }</code> </pre> <br><p>  Statische Analysatoren geben <code>showAge</code> Aufruf <code>Argument 1 of showAge expects int, string provided</code> eine Warnung mit folgendem Fehler aus: <code>Argument 1 of showAge expects int, string provided</code> . </p><br><p>  Leider wei√ü PhpStorm zum Zeitpunkt des Schreibens nicht, wie. </p><br><h3 id="bolee-slozhnye-dzheneriki">  Anspruchsvollere Generika </h3><br><p>  Wir besch√§ftigen uns weiterhin mit dem Thema Generika.  Stellen Sie sich ein Objekt vor, das ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Stapel ist</a> : </p><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Stack</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } }</code> </pre> <br><p>  Der Stapel kann jeden Objekttyp akzeptieren.  Was aber, wenn wir den Stapel nur auf Objekte vom Typ <code>User</code> beschr√§nken m√∂chten? </p><br><p>  Psalm und Phan unterst√ºtzen die folgenden Anmerkungen: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@template</span></span></span><span class="hljs-comment"> T */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Stack</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> T $item */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> T */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br><p>  Der docblock wird verwendet, um zus√§tzliche Typinformationen zu √ºbermitteln, zum Beispiel: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> Stack&lt;User&gt; $userStack */</span></span> $stack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stack(); Means that $userStack must only contain Users.</code> </pre> <br><p>  Psalm bei der Analyse des folgenden Codes: </p><br><pre> <code class="php hljs">$userStack-&gt;push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User()); $userStack-&gt;push(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>);</code> </pre> <br><p>  Beschwert sich √ºber Zeile 2 mit dem Fehler <code>Argument 1 of Stack::push expects User, string(hello) provided.</code> </p><br><p>  PhpStorm unterst√ºtzt diese Anmerkung derzeit nicht. </p><br><p>  Tats√§chlich haben wir nur einen Teil der Informationen √ºber Generika behandelt, aber im Moment ist dies genug. </p><br><h2 id="anchorhow-to-implement-generics-without-language-level-supportanchorkak-vnedrit-dzheneriki-bez-podderzhki-yazyka"><a name="how-to-implement-generics-without-language-level-support"></a>  So implementieren Sie Generika ohne Sprachunterst√ºtzung </h2><br><p>  Sie m√ºssen die folgenden Schritte ausf√ºhren: </p><br><ul><li>  Definieren Sie auf Community-Ebene generische Standards in Dockbl√∂cken (z. B. neue PSR oder kehren Sie zu PSR-5 zur√ºck). </li><li>  F√ºgen Sie Ihrem Code Dockblock-Anmerkungen hinzu </li><li>  Verwenden Sie IDEs, die diese Konventionen verstehen, um statische Echtzeitanalysen durchzuf√ºhren und Inkonsistenzen zu ermitteln. </li><li>  Verwenden Sie statische Analysewerkzeuge (z. B. Psalm) als einen der CI-Schritte, um Fehler zu erkennen. </li><li>  Definieren Sie eine Methode zum √úbergeben von Typinformationen an Bibliotheken von Drittanbietern. </li></ul><br><h2 id="anchoragreeing-on-a-standardanchorstandartizaciya"><a name="agreeing-on-a-standard"></a>  Standardisierung </h2><br><p>  Im Moment hat die PHP-Community dieses generische Format inoffiziell √ºbernommen (sie werden von den meisten Tools unterst√ºtzt und ihre Bedeutung ist den meisten klar): </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> User[] */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p>  Wir haben jedoch Probleme mit einfachen Beispielen wie diesem: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array&lt;string, User&gt; */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p>  Psalm versteht es und wei√ü, welchen Typ der Schl√ºssel hat und welche Werte das zur√ºckgegebene Array hat. </p><br><p>  Zum Zeitpunkt des Schreibens versteht PhpStorm dies nicht.  Mit diesem Eintrag vermisse ich die Leistungsf√§higkeit der statischen Echtzeitanalyse von PhpStorm. </p><br><p>  Betrachten Sie den folgenden Code.  PhpStorm versteht nicht, dass <code>$user</code> vom Typ <code>User</code> und <code>$name</code> vom Typ string ist: </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(getUsers() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $name =&gt; $user) { ... }</code> </pre> <br><p>  Wenn ich Psalm als statisches Analysewerkzeug w√§hlen w√ºrde, k√∂nnte ich Folgendes schreiben: </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> User[] * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@psalm</span></span></span><span class="hljs-comment">-return array&lt;string, User&gt; */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUsers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">array</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br><p>  Psalm versteht das alles. </p><br><p>  PhpStorm wei√ü, dass die Variable <code>$user</code> vom Typ <code>User</code> .  Er versteht jedoch immer noch nicht, dass sich der Array-Schl√ºssel auf eine Zeichenfolge bezieht.  Phan und PHPStan verstehen die spezifischen Psalmanmerkungen nicht.  Das Maximum, das sie in diesem Code verstehen, ist das gleiche wie in PhpStorm: der Typ von <code>$user</code> </p><br><p>  Sie k√∂nnten argumentieren, dass PhpStorm nur das √úbereinstimmungsarray <code>array&lt;keyType, valueType&gt;</code> akzeptieren sollte.  Ich stimme dir nicht zu, weil  Ich glaube, dass dieses Diktat von Standards die Aufgabe der Sprache und der Gemeinschaft ist und die Werkzeuge nur diesen folgen sollten. </p><br><p>  Ich gehe davon aus, dass die oben beschriebene Vereinbarung von den meisten PHP-Mitgliedern sehr positiv aufgenommen wird.  Eine, die sich f√ºr Generika interessiert.  Bei Mustern wird es jedoch viel komplizierter.  Weder PHPStan noch PhpStorm unterst√ºtzen derzeit Vorlagen.  Im Gegensatz zu Psalm und Phan.  Ihr Zweck ist √§hnlich, aber wenn Sie tiefer graben, werden Sie feststellen, dass die Implementierungen etwas anders sind. </p><br><p>  Jede der vorgestellten Optionen ist eine Art Kompromiss. </p><br><p>  Einfach ausgedr√ºckt, es besteht Bedarf an einer Einigung √ºber das generische Datensatzformat: </p><br><ul><li>  Sie verbessern das Leben von Entwicklern.  Entwickler k√∂nnen ihrem Code Generika hinzuf√ºgen und davon profitieren. </li><li>  Entwickler k√∂nnen die Tools verwenden, die ihnen am besten gefallen, und bei Bedarf zwischen ihnen (Tools) wechseln. </li><li>  Werkzeugentwickler k√∂nnen genau diese Werkzeuge erstellen, die Vorteile f√ºr die Community verstehen und nicht bef√ºrchten, dass sich etwas √§ndert oder dass ihnen ein "falscher Ansatz" vorgeworfen wird. </li></ul><br><h2 id="anchortool-supportanchorpodderzhka-instrumentami"><a name="tool-support"></a>  Werkzeugunterst√ºtzung </h2><br><p>  Psalm verf√ºgt √ºber alle notwendigen Funktionen zur √úberpr√ºfung von Generika.  Phan auch so. </p><br><p>  Ich bin sicher, dass PhpStorm Generika einf√ºhren wird, sobald die Community eine Vereinbarung √ºber ein einziges Format vorlegt. </p><br><h2 id="anchorthird-party-code-supportanchorpodderzhka-storonnego-koda"><a name="third-party-code-support"></a>  Code-Unterst√ºtzung von Drittanbietern </h2><br><p>  Der letzte Teil des allgemeinen Puzzles besteht darin, Unterst√ºtzung f√ºr Bibliotheken von Drittanbietern hinzuzuf√ºgen. </p><br><p>  Hoffentlich werden die meisten Bibliotheken den generischen Definitionsstandard implementieren, sobald er erscheint.  Dies wird jedoch nicht sofort geschehen.  Einige Bibliotheken werden verwendet, haben jedoch keine aktive Unterst√ºtzung.  Bei der Verwendung statischer Analysatoren zur Validierung von Typen in Generika ist es wichtig, dass alle Funktionen definiert sind, die diese Generika akzeptieren oder zur√ºckgeben. </p><br><p>  Was passiert, wenn Ihr Projekt auf Bibliotheken von Drittanbietern basiert, die keine generische Unterst√ºtzung bieten? </p><br><p>  Gl√ºcklicherweise wurde dieses Problem bereits gel√∂st und die Stub-Funktionen sind die L√∂sung.  Psalm, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Phan</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">PhpStorm</a> unterst√ºtzen Stubs. </p><br><p>  Stubs sind normale Dateien, die Signaturen von Funktionen und Methoden enthalten, diese jedoch nicht implementieren.  Durch Hinzuf√ºgen von Dockbl√∂cken zu Stubs erhalten statische Analysetools die zus√§tzlichen Informationen, die sie ben√∂tigen.  Zum Beispiel, wenn Sie eine Stapelklasse ohne Typhinweise und Generika wie diese haben. </p><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Stack</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* some implementation */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* some implementation */</span></span> } }</code> </pre> <br><p>  Sie k√∂nnen eine Stub-Datei mit identischen Methoden erstellen, jedoch mit zus√§tzlichen Dockbl√∂cken und ohne Implementierung von Funktionen. </p><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@template</span></span></span><span class="hljs-comment"> T */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Stack</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> T $item * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> T */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br><p>  Wenn der statische Analysator die Stapelklasse sieht, nimmt er Typinformationen vom Stub und nicht vom tats√§chlichen Code. </p><br><p>  Die M√∂glichkeit, den Code von Stubs einfach zu teilen (z. B. √ºber Composer), w√§re √§u√üerst n√ºtzlich, weil  w√ºrde es erm√∂glichen, die geleistete Arbeit zu teilen. </p><br><h2 id="anchornext-stepsanchordalneyshie-shagi"><a name="next-steps"></a>  Weitere Schritte </h2><br><p>  Die Gemeinde muss sich von Vereinbarungen entfernen und Standards setzen. </p><br><p>  Vielleicht w√§re die beste Option eine generische PSR? </p><br><p>  Oder vielleicht k√∂nnten die Entwickler der wichtigsten statischen Analyseger√§te, PhpStorm, andere IDEs und alle an der Entwicklung von PHP (zur Steuerung) beteiligten Personen einen Standard entwickeln, den jeder verwenden w√ºrde. </p><br><p>  Sobald der Standard angezeigt wird, kann jeder beim Hinzuf√ºgen von Generika zu vorhandenen Bibliotheken und Projekten helfen und Pull-Anforderungen erstellen.  Und wo dies nicht m√∂glich ist, k√∂nnen Entwickler Stubs schreiben und teilen. </p><br><p>  Wenn alles erledigt ist, k√∂nnen wir Tools wie PhpStorm verwenden, um die Generika in Echtzeit zu √ºberpr√ºfen, w√§hrend wir den Code schreiben.  Wir k√∂nnen statische Analysetools als Teil unseres CI als Sicherheitsgarantie verwenden. </p><br><p>  Generika k√∂nnen auch in PHP implementiert werden (na ja, fast). </p><br><h2 id="anchorlimitationsanchorogranicheniya"><a name="limitations"></a>  Einschr√§nkungen </h2><br><p>  Es gibt eine Reihe von Einschr√§nkungen.  PHP ist eine dynamische Sprache, mit der Sie viele "magische" Dinge wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">diese</a> tun k√∂nnen.  Wenn Sie zu viel PHP-Magie verwenden, kann es vorkommen, dass statische Analysatoren nicht alle Typen im System genau extrahieren k√∂nnen.  Wenn irgendwelche Typen unbekannt sind, k√∂nnen die Tools Generika nicht in allen F√§llen korrekt verwenden. </p><br><p>  Die Hauptanwendung dieser Analyse ist jedoch die Validierung Ihrer Gesch√§ftslogik.  Wenn Sie sauberen Code schreiben, sollten Sie nicht zu viel Magie verwenden. </p><br><h2 id="anchorwhy-dont-you-just-add-generics-to-the-languageanchorpochemu-by-vam-prosto-ne-dobavit-dzheneriki-v-yazyk"><a name="why-dont-you-just-add-generics-to-the-language"></a>  Warum f√ºgen Sie der Zunge nicht einfach Generika hinzu? </h2><br><p>  Das w√§re die beste Option.  PHP hat Open Source Code und niemand st√∂rt Sie, die Quellen zu klonen und Generika zu implementieren! </p><br><h2 id="anchorwhat-if-i-dont-want-genericsanchorchto-esli-mne-ne-nuzhny-dzheneriki"><a name="what-if-i-dont-want-generics"></a>  Was ist, wenn ich keine Generika ben√∂tige? </h2><br><p>  Ignorieren Sie einfach alle oben genannten Punkte.  Einer der Hauptvorteile von PHP besteht darin, dass es flexibel bei der Auswahl der geeigneten Komplexit√§t der Implementierung ist, je nachdem, was Sie erstellen.  Mit einem einmaligen Code m√ºssen Sie nicht √ºber Dinge wie das Tippen nachdenken.  Bei gro√üen Projekten lohnt es sich jedoch, solche M√∂glichkeiten zu nutzen. </p><br><blockquote>  Vielen Dank an alle, die diesen Ort gelesen haben.  Ich freue mich √ºber Ihre Kommentare in der PM. <br><br>  <strong>UPD</strong> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">ghost404</a> in den Kommentaren stellte fest, dass <em>PHPStan ab Version 0.12.x Psalmanmerkungen versteht und Generika unterst√ºtzt</em> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de456466/">https://habr.com/ru/post/de456466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456446/index.html">Ceph - von "auf dem Knie" bis "Produktion"</a></li>
<li><a href="../de456448/index.html">Regeln f√ºr die Auswahl eines JS-Frameworks</a></li>
<li><a href="../de456450/index.html">DO-RA.Avia zur √úberwachung der kosmischen Strahlung in der Luftfahrt</a></li>
<li><a href="../de456452/index.html">C ++ - Codebeispiele vor und nach Bereichen</a></li>
<li><a href="../de456462/index.html">Zusammenstellen einer Bibliothek von Winkelkomponenten als Webkomponenten</a></li>
<li><a href="../de456470/index.html">Fallstricke des WSUS Package Publisher</a></li>
<li><a href="../de456472/index.html">Einf√ºhrung in Go und das Mggo Framework</a></li>
<li><a href="../de456474/index.html">Tic Tac Toe Teil 0: Vergleich von Svelte und React</a></li>
<li><a href="../de456476/index.html">√Ñnderungen am Bluetooth-Stack zur Verbesserung der Audioqualit√§t von Kopfh√∂rern ohne AAC-, aptX- oder LDAC-Codecs</a></li>
<li><a href="../de456482/index.html">Fang mich, wenn du kannst. K√∂nig Version</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>