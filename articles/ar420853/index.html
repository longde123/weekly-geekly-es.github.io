<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐จ๐ปโ๐ฌ ๐ฅช ุชุนุฑู ุนูู Windows Pseudo Console (ConPTY) ๐คท๐ฝ ๐คฒ๐ฝ ๐จ๐ผโ๐ฌ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชู ูุดุฑ ุงูููุงูุฉ ูู 2 ุฃุบุณุทุณ 2018 

 ูุฐู ูู ุงูููุงูุฉ ุงูุซุงููุฉ ุญูู ุณุทุฑ ุฃูุงูุฑ Windows ุ ุญูุซ ุณููุงูุด ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ุงูุฌุฏูุฏุฉ ููุงุฌูุงุช ุงูุจุฑูุฌุฉ ุงูุฎุงุตุฉ ุจูุญุฏุฉ ุงูุชุญู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุนุฑู ุนูู Windows Pseudo Console (ConPTY)</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420853/" style=";text-align:right;direction:rtl">  <font color="gray">ุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดุฑ</a> ุงูููุงูุฉ ูู 2 ุฃุบุณุทุณ 2018</font> <br><br>  ูุฐู ูู ุงูููุงูุฉ ุงูุซุงููุฉ ุญูู ุณุทุฑ ุฃูุงูุฑ Windows ุ ุญูุซ ุณููุงูุด ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ุงูุฌุฏูุฏุฉ ููุงุฌูุงุช ุงูุจุฑูุฌุฉ ุงูุฎุงุตุฉ ุจูุญุฏุฉ ุงูุชุญูู ุงูุฒุงุฆูุฉ Windows ุ ุฃู Windows Pseudo Console (ConPTY): ููุงุฐุง ุทูุฑูุงูุง ุ ูููุงุฐุง ููุงู ุญุงุฌุฉ ุฅูููุง ุ ูููู ุชุนูู ุ ูููููุฉ ุงุณุชุฎุฏุงููุง ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ. <br><br>  ูู ุงูููุงู ุงูุฃุฎูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุฅุฑุซ ุงููุงุถู ุงูุฎุทูุฑ.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดุงูู ุณุทุฑ ุฃูุงูุฑ Windows "</a> ุชุญุฏุซูุง ุนู ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ ูุธููุฑ ุงููุญุทุฉ ุงูุทุฑููุฉ ูุชุทูุฑ ุณุทุฑ ุงูุฃูุงูุฑ ูู Windows ุ ูุจุฏุฃูุง ุฃูุถูุง ูู ุฏุฑุงุณุฉ ุงูุจููุฉ ุงูุฏุงุฎููุฉ ููุญุฏุฉ ุชุญูู Windows ูุงูุจููุฉ ุงูุชุญุชูุฉ ูุณุทุฑ ุฃูุงูุฑ Windows.  ูุงูุดูุง ุฃูุถูุง ุงูุนุฏูุฏ ูู ุงููุฒุงูุง ูุงูุนููุจ ุงูุฑุฆูุณูุฉ ููุญุฏุฉ ุชุญูู Windows. <br><br>  ุฃุญุฏ ุงูุนูุงุฆู ูู ุฃู Windows ูุญุงูู ุฃู ูููู "ูููุฏูุง" ุ ููููู ูุชุนุงุฑุถ ูุน ูุทูุฑู ูุญุฏุงุช ุงูุชุญูู ุงูุจุฏููุฉ ูุงูุบูุฑ ุฎุงุฑุฌูุฉ ุ ููุทูุฑู ุงูุฎุฏูุฉ ุ ููุง ุฅูู ุฐูู.  ุนูุฏ ุฅูุดุงุก ูุญุฏุฉ ุชุญูู ุฃู ุฎุฏูุฉ ุ ูุญุชุงุฌ ุงููุทูุฑูู ุฅูู ุงููุตูู ุฅูู ูููุงุช ุงูุงุชุตุงู ุงูุชู ูู ุฎูุงููุง ุชุชุจุงุฏู ุทุฑููุฉ / ุฎุฏูุฉ ุงูุจูุงูุงุช ูุน ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุ ุฃู ุชููุฑ ุงููุตูู ุฅูููุง.  ูู ุนุงูู * NIX ุ ูุฐู ููุณุช ูุดููุฉ ูุฃู * NIX ูููุฑ ุจููุฉ ุชุญุชูุฉ ุทุฑููุฉ ุฒุงุฆูุฉ (PTY) ุชุฌุนู ูู ุงูุณูู ุฅูุดุงุก ูููุงุช ุงุชุตุงู ููุญุฏุฉ ุชุญูู ุฃู ุฎุฏูุฉ.  ูููู ูู ูุธุงู Windows ูู ููู ... <br><br>  <i><b>... ุญุชู ุงูุขู!</b></i> <br><a name="habracut"></a><br><h1 style=";text-align:right;direction:rtl">  ูู TTY ุฅูู PTY </h1><br>  ูุจู ุงูุชุญุฏุซ ุจุงูุชูุตูู ุนู ุชุทูุฑูุง ุ ุฏุนูุง ูุนูุฏ ููุชุฑุฉ ูุฌูุฒุฉ ุฅูู ุชุทููุฑ ุงููุญุทุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ูุงูุช TTY </h2><br>  ููุง ุชูุช ููุงูุดุชู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู ุณุงุจู</a> ุ ูู ุงูุฃูุงู ุงูุฃููู ูู ุงูุญูุณุจุฉ ุ ูุงู ุงููุณุชุฎุฏููู ูุชุญูููู ูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุจุงุณุชุฎุฏุงู ุฃููุงุน teletypes ุงูููุฑููููุงููููุฉ (TTYs) ุงููุชุตูุฉ ุจุฌูุงุฒ ููุจููุชุฑ ูู ุฎูุงู ููุน ูู ูููุงุช ุงูุงุชุตุงู ุงูุชุณูุณูู (ุนุงุฏุฉ ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญููุฉ ุชูุงุฑ 20 ูููู ุฃูุจูุฑ</a> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7b/e47/7fa/f7be477fac4e46cc71e70df23b26bef6.jpg"><br>  <font color="gray"><i>ูุนูู ููู ุทููุณูู ูุฏูููุณ ุฑูุชุดู (ูุงููุง) ุนูู Teletype DEC PDP-11 (ุฑุณุงุฆู ุจุฏูู ุดุงุดุฉ ุฅููุชุฑูููุฉ)</i></font> <br><br><h3 style=";text-align:right;direction:rtl">  ุชูุฒูุน ุงููุญุทุฉ </h3><br>  ุชู ุงุณุชุจุฏุงู Teletypes ุจูุทุงุฑูู ูุญูุณุจุฉ ูุน ุดุงุดุงุช ุฅููุชุฑูููุฉ (ุนุงุฏุฉ ุดุงุดุงุช CRT).  ุนุงุฏุฉู ูุง ุชููู ุงููุญุทุงุช ุงูุทุฑููุฉ ุฃุฌูุฒุฉ ุจุณูุทุฉ ููุบุงูุฉ (ููู ุซู ูุตุทูุญ "ุงูุทุฑู ุงูุจูู") ุ ูุชุญุชูู ููุท ุนูู ุงูุฅููุชุฑูููุงุช ูููุฉ ุงููุนุงูุฌุฉ ุงููุงุฒูุฉ ููููุงู ุงูุชุงููุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุณุชูุจุงู ุฅุฏุฎุงู ุงููุต ูู ููุญุฉ ุงูููุงุชูุญ. </li><li style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงููุต ุงููุฏุฎู ูุคูุชูุง ูู ุณุทุฑ ูุงุญุฏ (ุจูุง ูู ุฐูู ุงูุชุญุฑูุฑ ุงููุญูู ูุจู ุงูุฅุฑุณุงู). </li><li style=";text-align:right;direction:rtl">  ุฅุฑุณุงู / ุงุณุชูุจุงู ูุต ุนูู ููุงุฉ ุชุณูุณููุฉ (ุนุงุฏุฉ ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฌูุฉ RS-232</a> ุงูููุชุดุฑุฉ ูู ูู ููุงู). </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงููุต ุงููุณุชูู ุนูู ุดุงุดุฉ ุงููุญุทุฉ ุงูุทุฑููุฉ. </li></ol><br>  ุนูู ุงูุฑุบู ูู ุจุณุงุทุชูุง (ุฃู ุฑุจูุง ุจูุถููุง) ุ ุณุฑุนุงู ูุง ุฃุตุจุญุช ุงููุญุทุงุช ุงูุทุฑููุฉ ุงููุณููุฉ ุงูุฑุฆูุณูุฉ ูุฅุฏุงุฑุฉ ุงูุญูุงุณูุจ ุงูุตุบูุฑุฉ ุ ูุงูุญูุงุณูุจ ุงููุฑูุฒูุฉ ูุงูุฎูุงุฏู: ูุนุธู ูุดุบูู ุฅุฏุฎุงู ุงูุจูุงูุงุช ุ ููุดุบูู ุงูููุจููุชุฑ ุ ููุณุคููู ุงููุธุงู ุ ูุงูุนููุงุก ุ ูุงูุจุงุญุซูู ุ ููุทูุฑู ุงูุจุฑูุฌูุงุช ูุงููุฌูู ุงูุตูุงุนูุฉ ูุนูููู ุนูู ูุญุทุงุช DEC ุ IBM ู Wyse ูุบูุฑูุง ุงููุซูุฑ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/929/e3f/fd0/929e3ffd0e281600c9ef115f61b8b23a.jpg"><br>  <i><font color="gray">ุงูุฃุฏููุฑุงู ุบุฑูุณ ููุจุฑ ูู ููุชุจู ูุน ูุญุทุฉ DEC VT220 ุนูู ููุชุจู</font></i> <br><br><h3 style=";text-align:right;direction:rtl">  ุชูุฒูุน ูุญุทุงุช ุงูุจุฑูุฌูุงุช </h3><br>  ููุฐ ููุชุตู ุงูุซูุงููููุงุช ุ ุจุฏูุงู ูู ุงููุญุทุงุช ุงููุชุฎุตุตุฉ ุ ุจุฏุฃ ุงุณุชุฎุฏุงู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุฐุงุช ุงูุฃุบุฑุงุถ ุงูุนุงูุฉ ุชุฏุฑูุฌูุงู ุ ูุงูุชู ุฃุตุจุญุช ุฃูุซุฑ ุจุฃุณุนุงุฑ ูุนูููุฉ ูุดุนุจูุฉ ูููุฉ.  ูุงู ูุฏู ุงูุนุฏูุฏ ูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงููุฏููุฉ ูุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุฃุฎุฑู ูู ุงูุซูุงููููุงุช ุชุทุจููุงุช ุทุฑููุฉ ูุชุญุช ุงุชุตุงู RS-232 ุจุฌูุงุฒ ุงูููุจููุชุฑ ูุชุจุงุฏูุช ุงูุจูุงูุงุช ูุน ุฃู ุดุฎุต ุนูู ุงูุทุฑู ุงูุขุฎุฑ ูู ุงูุงุชุตุงู. <br><br>  ุนูุฏูุง ุฃุตุจุญุช ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุฐุงุช ุงูุฃุบุฑุงุถ ุงูุนุงูุฉ ุฃูุซุฑ ุชุนููุฏูุง ุ ุธูุฑุช ูุงุฌูุฉ ูุณุชุฎุฏู ุฑุณูููุฉ (GUI) ูุนุงูู ุฌุฏูุฏ ุชูุงููุง ูู ุงูุชุทุจููุงุช ุงููุชุฒุงููุฉ ุ ุจูุง ูู ุฐูู ุงูุชุทุจููุงุช ุงูุทุฑููุฉ. <br><br>  ูููู ูุงูุช ููุงู ูุดููุฉ: ููู ูููู ุฃู ูุชูุงุนู ุชุทุจูู ุทุฑูู ูุน ุชุทุจูู ุณุทุฑ ุฃูุงูุฑ ุขุฎุฑ ูุนูู ุนูู ููุณ ุงูุฌูุงุฒุ  ูููู ูููู ุชูุตูู ูุจู ุชุณูุณูู ูุนูููุง ุจูู ุชุทุจูููู ูุนููุงู ุนูู ููุณ ุฌูุงุฒ ุงูููุจููุชุฑุ <br><br><h2 style=";text-align:right;direction:rtl">  ูุธูุฑ ุงููุญุทุฉ ุงูุฒุงุฆูุฉ (PTY) </h2><br>  ูู ุนุงูู * NIX ุ ุชู ุญู ุงููุดููุฉ ูู ุฎูุงู ุฅุฏุฎุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุญุทุฉ ุฒุงุฆูุฉ (PTY)</a> . <br><br>  ูุญุงูู PTY ูุนุฏุงุช ุงูุงุชุตุงูุงุช ุงูุชุณูุณููุฉ ูู ุฌูุงุฒ ุงูููุจููุชุฑ ุนู ุทุฑูู ุงููุดู ุนู ุงูุฃุฌูุฒุฉ ุงูุฒุงุฆูุฉ ุงูุฑุฆูุณูุฉ ูุงูุฑููู ("ุงูุฑุฆูุณูุฉ" ู "ุงูุฑููู"): ุชุชุตู ุงูุชุทุจููุงุช ุงูุทุฑููุฉ ุจุงูุฌูุงุฒ ุงูุฒุงุฆู ุงูุฑุฆูุณู ุ ูุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ (ุนูู ุณุจูู ุงููุซุงู ุ ุงูุฃุตุฏุงู ูุซู cmd ู PowerShell ู bash) ุชุชุตู ุจุฌูุงุฒ ุงูุฒุงุฆูุฉ ุงูุฑููู.  ุนูุฏูุง ูุฑุณู ุนููู ุทุฑูู ุฃูุงูุฑ ูุตูุฉ ู / ุฃู ุฃูุงูุฑ ุชุญูู (ูุดูุฑุฉ ููุต) ุฅูู ุงูุฌูุงุฒ ุงูุฒุงุฆู ุงูุฑุฆูุณู ุ ูุชู ุชุฑุฌูุฉ ุงููุต ุฅูู ุงูุฑููู ุงููุฑุชุจุท ุจู.  ูุชู ุฅุฑุณุงู ุงููุต ูู ุงูุชุทุจูู ุฅูู ุงูุฌูุงุฒ ุงูุฒุงุฆู ุงูุฑููู ุ ุซู ูุนูุฏ ุฅูู ุงูุฑุฆูุณู ุ ูุจุงูุชุงูู ุฅูู ุงููุญุทุฉ ุงูุทุฑููุฉ.  ูุชู ุฏุงุฆููุง ุฅุฑุณุงู / ุงุณุชูุจุงู ุงูุจูุงูุงุช ุจุดูู ุบูุฑ ูุชุฒุงูู. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a42/2ba/b58/a422bab5816acdd43dd7b1c562d65caf.png"><br>  <i><font color="gray">ุชุทุจูู ูุญุทุฉ ููููุฉ / ุดู</font></i> <br><br>  ูู ุงูููู ููุงุญุธุฉ ุฃู ุงูุฌูุงุฒ ุงูุฒุงุฆู "ุงูุชุงุจุน" ูุญุงูู ุณููู ุงููุทุฑุงู ุงููุงุฏู ููุญูู ุฃุญุฑู ุงูุฃูุงูุฑ ุฅูู ุฅุดุงุฑุงุช POSIX.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุฃุฏุฎู ุงููุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CTRL + C</a> ูู ุงูููุงูุฉ ุงูุทุฑููุฉ ุ ูุณูุชู ุฅุฑุณุงู ูููุฉ ASCII ูู CTRL + C (0x03) ุนุจุฑ ุงูุดุฑูุญุฉ ุงูุฑุฆูุณูุฉ.  ุนูุฏ ุงุณุชูุงููุง ุนูู ุฌูุงุฒ ุฒุงุฆู ุชุงุจุน ุ ุชุชู ุฅุฒุงูุฉ ุงููููุฉ 0x03 ูู ุชุฏูู ุงูุฅุฏุฎุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชู</a> ุฅูุดุงุก <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุดุงุฑุฉ SIGINT</a> . <br><br>  ูุชู ุงุณุชุฎุฏุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ูู PTY ุนูู ูุทุงู ูุงุณุน ูู ูุจู * ุชุทุจููุงุช ูุญุทุฉ NIX ุ ูุฏูุฑู ููุญุฉ ุงููุต (ูุซู ุงูุดุงุดุฉ ุ tmux) ุ ุฅูุฎ.  ุชุณุชุฏุนู ูุฐู ุงูุชุทุจููุงุช <code>openpty()</code> ุ ูุงูุชู ุชูุฑุฌุน ุฒูุฌูุง ูู ูุงุตูุงุช ุงููููุงุช (fd) ููุณูุฏ PTY ูุงูุนุจุฏ.  ุจุนุฏ ุฐูู ูููู ููุชุทุจูู ุฃู ูููุฐ / ูููุฐ ุชุทุจูู ุณุทุฑ ุฃูุงูุฑ ุชุงุจุน (ุนูู ุณุจูู ุงููุซุงู ุ bash) ุ ูุงูุฐู ูุณุชุฎุฏู ุนุจูุฏู fd ููุงุณุชูุงุน ูุฅุฑุฌุงุน ุงููุต ุฅูู ุงููุญุทุฉ ุงูุทุฑููุฉ ุงููุชุตูุฉ. <br><br>  ุชุชูุญ ูุฐู ุงูุขููุฉ ููุชุทุจููุงุช ุงูุทุฑููุฉ "ุงูุชุญุฏุซ" ูุจุงุดุฑุฉ ูุน ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุงูุชู ุชุนูู ูุญูููุง ุ ุชูุงููุง ููุง ุชุชุญุฏุซ ุงููุญุทุฉ ุงูุทุฑููุฉ ูุน ููุจููุชุฑ ุจุนูุฏ ุนุจุฑ ุงุชุตุงู ุชุณูุณูู / ุดุจูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุงุฐุง ุ ูุง ููุฌุฏ Windows ูุญุฏุฉ ุชุญูู ุฒุงุฆูุฉุ </h2><br>  ููุง ูุงูุดูุง ูู ุงูููุงูุฉ ุงูุณุงุจูุฉ ุ ูู ุญูู ุฃู ูุญุฏุฉ ุชุญูู Windows ุชุดุจู ูู ุงููุงุญูุฉ ุงูููุงููููุฉ ูุญุทุฉ * NIX ุงูุชูููุฏูุฉ ุ ูุฅููุง ุชุฎุชูู ุจุนุฏุฉ ุทุฑู ุฑุฆูุณูุฉ ุ ุฎุงุตุฉ ุนูุฏ ุฃุฏูู ุงููุณุชููุงุช ุ ูุงูุชู ูููู ุฃู ุชุณุจุจ ูุดุงูู ููุทูุฑู ุชุทุจููุงุช ุณุทุฑ ุฃูุงูุฑ Windows ุ ุงูุทุฑููุฉ / ูุญุฏุงุช ุงูุชุญูู ุงูุทุฑููุฉ ูุงูุฎุงุฏู ุงูุชุทุจููุงุช: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ูุง ุชูุฌุฏ ุจููุฉ ุชุญุชูุฉ ูู PTY ุนูู Windows</b> : ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุชุดุบูู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ (ุนูู ุณุจูู ุงููุซุงู ุ Cmd ุ PowerShell ุ wsl ุ ipconfig ุ ุฅูุฎ.) ุ ูููู Windows ููุณู "ุจุชูุตูู" ูุซูู ุฌุฏูุฏ ุฃู ููุฌูุฏ ูู ูุญุฏุฉ ุงูุชุญูู ุจุงูุชุทุจูู. </li><li style=";text-align:right;direction:rtl">  <b>ูุชุฏุงุฎู Windows ูุน ูุญุฏุงุช ุชุญูู ุงูุทุฑู ุงูุซุงูุซ ูุชุทุจููุงุช ุงูุฎุงุฏู</b> : ูุง ูููุญ Windows (ุญุงูููุง) ุงููุญุทุงุช ุงูุทุฑููุฉ ุทุฑููุฉ ูุชูููุฑ ูููุงุช ุงุชุตุงู ูุฑูุฏูู ูู ุฎูุงููุง ุงูุชูุงุนู ูุน ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ.  ูุฌุจ ุนูู ุงููุญุทุงุช ุงูุทุฑููุฉ ุงูุฎุงุฑุฌูุฉ ุฅูุดุงุก ูุญุฏุงุช ุชุญูู ุฎุงุฑุฌ ุงูุดุงุดุฉ ุ ูุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุชู ุฃุฏุฎููุง ุงููุณุชุฎุฏู ููุงู ูุฅูุบุงุก ุงููุงุชุฌ ุนู ุทุฑูู ุฅุนุงุฏุฉ ุฑุณูู ุนูู ุงูุดุงุดุฉ ุงูุฎุงุตุฉ ุจูุญุฏุฉ ุชุญูู ุงูุทุฑู ุงูุซุงูุซ! </li><li style=";text-align:right;direction:rtl">  <b>ููุท Windows ูุฏูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู</b> : ุชุนุชูุฏ ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ูู Windows ุนูู Win32 Consol API ุ ููุง ูููู ูู ุฅููุงููุฉ ููู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุธุฑูุง ูุฃู ุฌููุน ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุงูุฃุฎุฑู ุชุฏุนู ุงููุต / VT ุ ูููุณ API. </li><li style=";text-align:right;direction:rtl">  <b>ุงููุตูู ุนู ุจุนุฏ ุบูุฑ ุงูููุงุณู</b> : ูุคุฏู ุงุนุชูุงุฏ ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุนูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช Consol ุฅูู ุชุนููุฏ ุงูุชูุงุนู ูุงูุจุฑุงูุฌ ุงููุตูุฉ ูููุตูู ุนู ุจุนุฏ ุจุดูู ูุจูุฑ. </li></ol><br><h2 style=";text-align:right;direction:rtl">  ูุงุฐุง ุชูุนู </h2><br>  ุบุงูุจูุง ูุง ูุทูุจ <b>ุงููุซูุฑ ูู</b> ุงููุทูุฑูู ุขููุฉ ุชุดุจู PTY ูู ูุธุงู Windows ุ ุฎุงุตุฉู ุฃููุฆู ุงูุฐูู ูุนูููู ูุน ุฃุฏูุงุช ConEmu / Cmder ู Console2 / ConsoleZ ู Hyper ู VSCode ู Visual Studio ู WSL ู Docker ู OpenSSH. <br><br>  ุญุชู ุจูุชุฑ ุจุฑุงูุช ุ ูุญุฑุฑ ุงูุชูููููุฌูุง ูู Ars Technica ุ ุทูุจ ููู ุชูููุฐ ุขููุฉ PTY ุจุนุฏ ุจุถุนุฉ ุฃูุงู ุนูุฏูุง ุจุฏุฃุช ุงูุนูู ูู ูุฑูู ูุญุฏุฉ ุงูุชุญูู: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2dd/799/ebf/2dd799ebf0c14f418ae7d68d9a26acaa.png"><br><br>  ููุคุฎุฑุง ูุฑุฉ ุฃุฎุฑู: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d1/c1e/c00/4d1c1ec00ffe5ad5e6f019d1a33198c8.png"><br><br>  ุญุณููุง ุ ููุฏ ูุนููุง ุฐูู ุฃุฎูุฑูุง: <b>ููุฏ ุฃูุดุฃูุง ูุญุฏุฉ ุชุญูู ุฒุงุฆูุฉ ููุธุงู ุงูุชุดุบูู Windows</b> : <br><br><h1 style=";text-align:right;direction:rtl">  ูุฑุญุจูุง ุจู ูู Windows Pseudo Console (ConPTY) </h1><br>  ููุฐ ุชุดููู ูุฑูู ูุญุฏุฉ ุงูุชุญูู ูุจู ุญูุงูู ุฃุฑุจุน ุณููุงุช ุ ุงูุฎุฑุทุช ุงููุฌููุนุฉ ูู ุฅุตูุงุญ ูุญุฏุฉ ุชุญูู Windows ูุงูุขููุงุช ุงูุฏุงุฎููุฉ ูุณุทุฑ ุงูุฃูุงูุฑ.  ูู ุงูููุช ููุณู ุ ุฏุฑุณูุง ุจุงูุชุธุงู ูุจุนูุงูุฉ ุงููุถุงูุง ุงูููุถุญุฉ ุฃุนูุงู ูุงูุนุฏูุฏ ูู ุงููุถุงูุง ูุงููุดููุงุช ุงูุฃุฎุฑู ุฐุงุช ุงูุตูุฉ.  ููู ุงูุจููุฉ ุงูุชุญุชูุฉ ูุงูุฑูุฒ ูู ูููููุง ูุณุชุนุฏูู ูุฌุนู ุฅุตุฏุงุฑ ูุญุฏุฉ ุงูุชุญูู ุงููุฒููุฉ ูููููุง ... ุญุชู ุงูุขู! <br><br>  ุณุชููู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุฌุฏูุฏุฉ ููุญุฏุฉ ุงูุชุญูู ุงูุฒุงุฆูุฉ ูู Windows (ConPTY) ููุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุจุนุถ ุงูุชุบููุฑุงุช ุงูุฃุฎุฑู ุฐุงุช ุงูุตูุฉ ุจุฅุฒุงูุฉ / ุชุฎููู ูุฆุฉ ูุงููุฉ ูู ุงููุดููุงุช ... <b>ุฏูู ูุณุฑ ุงูุชูุงูู ุงูุนูุณู ูุน ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุงูุญุงููุฉ</b> ! <br><br><blockquote style=";text-align:right;direction:rtl">  ูุงุฌูุฉ Win32 ConPTY API ุงูุฌุฏูุฏุฉ (ุณูุชู ูุดุฑ ุงููุซุงุฆู ุงูุฑุณููุฉ ูุฑูุจูุง) ูุชุงุญุฉ ุงูุขู ูู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช ุงููุทูุนูู ูู Windows 10 ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Windows 10 Insider Preview SDK</a> ุงููุทุงุจู.  ุณุชุธูุฑ ูู ุงูุฅุตุฏุงุฑ ุงูุฑุฆูุณู ุงูุชุงูู ูู Windows 10 (ูู ููุงู ูุง ูู ุฎุฑูู / ุดุชุงุก 2018). </blockquote><br><h2 style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุงูุชุญูู / ููุฏุณุฉ ConHost </h2><br>  ูููู ConPTY ุ ุชุญุชุงุฌ ุฅูู ุฏุฑุงุณุฉ ุจููุฉ ูุญุฏุฉ ุชุญูู Windows ุ ุฃู ุจุงูุฃุญุฑู ... ConHost! <br><br>  ูู ุงูููู ุฃู ูููู ุฃูู ุนูู ุงูุฑุบู ูู ุฃู ConHost ูุทุจู ูู ูุง ุชุฑุงู ูุชุนุฑูู ูุชุทุจูู ูุญุฏุฉ ุชุญูู Windows ุ ูุฅู ConHost ูุญุชูู ุฃูุถูุง ุนูู ูุนุธู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ูุณุทุฑ ุฃูุงูุฑ Windows ููููุฐูุง!  ูู ุงูุขู ูุตุงุนุฏูุง ุ <b>ุชุตุจุญ ConHost "ุนูุฏุฉ ูุญุฏุฉ ุชุญูู" ุญููููุฉ</b> ุ ุชุฏุนู ุฌููุน ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ู / ุฃู ุชุทุจููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุงูุชู ุชุชูุงุนู ูุน ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ! <br><br>  <b>ูููุ</b>  <b>ููุงุฐุงุ</b>  <b>ูุงุฐุงุ</b>  ุฏุนููุง ูููู ูุธุฑุฉ ูุงุญุตุฉ. <br><br>  ูููุง ููู ุนุฑุถ ุนุงูู ุงููุณุชูู ูุจููุฉ ูุญุฏุฉ ุงูุชุญูู ุงูุฏุงุฎููุฉ / ConHost: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/331/1bd/54d/3311bd54dbe80dc699ff243a4812b58a.png"><br><br>  ููุงุฑูุฉู ุจุงูุจููุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุงูุฉ ุงูุณุงุจูุฉ</a> ุ ูุญุชูู ConHost ุงูุขู ุนูู ุนุฏุฉ ูุญุฏุงุช ุฅุถุงููุฉ ููุนุงูุฌุฉ VT ููุญุฏุฉ ConPTY ุงูุฌุฏูุฏุฉ ุงูุชู ุชููุฐ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุงูููุชูุญุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ConPTY API</b> : ุชููุฑ ูุงุฌูุงุช ุจุฑูุฌุฉ ุชุทุจููุงุช Win32 ConPTY ุงูุฌุฏูุฏุฉ ุขููุฉ ูุดุงุจูุฉ ููููุฐุฌ POSIX PTY ุ ูููู ูู ุงููุณุงุฑ Windows. </li><li style=";text-align:right;direction:rtl">  <b>ุชูุงุนู VT</b> : ูุชููู ูุต ุงูุฅุฏุฎุงู ุจุชุฑููุฒ UTF-8 ุ ููุญูู ูู ุญุฑู ูุต ูุนุฑูุถ ุฅูู ุณุฌู <code>INPUT_RECORD</code> ุงูููุงุจู <code>INPUT_RECORD</code> ูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช.  ูุนุงูุฌ ุฃูุถูุง ุชุณูุณูุงุช ุงููุฑูุจ ุ ูุซู 0x03 (CTRL + C) ุ <code>KEY_EVENT_RECORDS</code> ุฅูู <code>KEY_EVENT_RECORDS</code> ุ ูุงูุชู ุชูุชุฌ ุฅุฌุฑุงุก ุงููุฑูุจ ุงูููุงุณุจ. </li><li style=";text-align:right;direction:rtl">  <b>VT Renderer</b> : ูููู ุจุฅูุดุงุก ุชุณูุณูุงุช VT ุงููุงุฒูุฉ ูุชุญุฑูู ุงููุคุดุฑ ูุชูุฏูู ุงููุต ูุงูููุท ูู ููุงุทู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ุงูุชู ุชู ุชุบููุฑูุง ูู ุงูุฅุทุงุฑ ุงูุณุงุจู. </li></ul><br>  ุญุณููุง ุ ูููู ูุงุฐุง ูุนูู ุฐูู ุญููุงุ <br><br><h2 style=";text-align:right;direction:rtl">  ููู ุชุนูู ุชุทุจููุงุช ุณุทุฑ ุฃูุงูุฑ Windowsุ </h2><br>  ูููู ุชุฃุซูุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุฌุฏูุฏุฉ ูู ConPTY ุจุดูู ุฃูุถู ุ ูููููู ูุธุฑุฉ ุนูู ููููุฉ ุนูู ูุญุฏุฉ ุชุญูู Windows ูุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุญุชู ุงูุขู. <br><br>  ุนูุฏูุง ูููู ูุณุชุฎุฏู ุจุชุดุบูู ุชุทุจูู ุณุทุฑ ุฃูุงูุฑ ูุซู Cmd ุฃู PowerShell ุฃู ssh ุ ูููู Windows ุจุฅูุดุงุก ุนูููุฉ Win32 ุฌุฏูุฏุฉ ูููู ูู ุฎูุงููุง ุจุชุญููู ุซูุงุฆู ุงูุชุทุจูู ุงููุงุจู ููุชูููุฐ ูุฃู ุชุจุนูุงุช (ููุงุฑุฏ ุฃู ููุชุจุงุช). <br><br>  ุนุงุฏุฉ ูุง ุชุฑุซ ุงูุนูููุฉ ุงูุชู ุชู ุฅูุดุงุคูุง ุญุฏูุซูุง ูุงุตูุงุช stdin ู stdout ูู ุฃุตููุง.  ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุงูุฃุตู ุนูููุฉ Windows GUI ุ ูุฅู ูุงุตูุงุช stdin ู stdout ููููุฏุฉ ุ ูุฐูู ุณูููู Windows ุจูุดุฑ ุงูุชุทุจูู ุงูุฌุฏูุฏ ูุฅุฑูุงูู ุจูุซูู ูุญุฏุฉ ุงูุชุญูู ุงูุฌุฏูุฏ.  ูุชู ููู ุงูุงุชุตุงู ุจูู ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ููุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจูู ูู ุฎูุงู ConDrv. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุชุนูู ูู ูุซูู PowerShell ุจุฏูู ุงูุชูุงุฒุงุช ูุฑุชูุนุฉ ุ ูุณูู ุชุฑุซ ุนูููุฉ ุงูุชุทุจูู ุงูุฌุฏูุฏุฉ ุงููุงุตูุงุช ุงูุฃุตููุฉ stdin / stdout ุ ูุจุงูุชุงูู ุ ุชุชููู ุจูุงูุงุช ุงูุฅุฏุฎุงู ูุชุฎุฑุฌ ุงููุงุชุฌ ุฅูู ููุณ ูุญุฏุฉ ุงูุชุญูู ูุซู ุงูุฃุตู. <br><br><blockquote style=";text-align:right;direction:rtl">  ููุง ูุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุญุฌุฒ ุ ูุฃูู ูู ุจุนุถ ุงูุญุงูุงุช ูุชู ุชุดุบูู ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ูุฑููุฉ ุจูุซูู <i>ุฌุฏูุฏ</i> ูู ูุญุฏุฉ ุงูุชุญูู ุ ุฎุงุตุฉ ูุฃุณุจุงุจ ุฃูููุฉ ุ ูููู ุงููุตู ุฃุนูุงู ุตุญูุญ ุนุงุฏุฉู. </blockquote><br>  ูู ุงูููุงูุฉ ุ ุนูุฏ ุจุฏุก ุชุดุบูู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ / shell ุ ูููู Windows ุจุชูุตููู ุจูุซูู ูุญุฏุฉ ุงูุชุญูู (ConHost.exe) ุนุจุฑ ConDrv: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fc3/4c8/d37/fc34c8d37f6f31c843422193bd5d01a6.png"><br><br><h2 style=";text-align:right;direction:rtl">  ููู ูุนูู ConHostุ </h2><br>  ุนูุฏูุง ูุชู ุชุดุบูู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ ุ ูููู Windows ุจุชูุตูู ุงูุชุทุจูู ุจูุซูู ุฌุฏูุฏ ุฃู ููุฌูุฏ ูู ConHost.  ูุชู ุชูุตูู ุงูุชุทุจูู ููุซูู ูุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจู ุนุจุฑ ุจุฑูุงูุฌ ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู ูู ูุถุน kernel (ConDrv) ุ ุงูุฐู ูุฑุณู / ูุณุชูุจู ุฑุณุงุฆู IOCTL ุงูุชู ุชุญุชูู ุนูู ุทูุจุงุช ููุงููุงุช API ุงููุณูุณูุฉ ู / ุฃู ุงูุจูุงูุงุช ุงููุตูุฉ. <br><br>  ุชุงุฑูุฎูุงู ุ ููุง ูุฑุฏ ูู ููุงู ุณุงุจู ุ ูุฅู ุนูู ConHost ุจุณูุท ูุณุจููุง ุงูููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุงููุณุชุฎุฏู ุจุฅูุดุงุก ุฅุฏุฎุงู ูู ููุญุฉ ุงูููุงุชูุญ / ุงููุงูุณ / ุงูููู / ููุญุฉ ุงูููุณ ุ ูุงูุชู ูุชู ุชุญููููุง ุฅูู <code>KEY_EVENT_RECORD</code> ุฃู <code>MOUSE_EVENT_RECORD</code> ูุชุฎุฒูููุง ูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช. </li><li style=";text-align:right;direction:rtl">  ูุชู ุฅูุฑุงุบ ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช ุจุณุฌู ูุงุญุฏ ูู ูู ูุฑุฉ ุ ูุชูููุฐ ุฅุฌุฑุงุกุงุช ุงูุฅุฏุฎุงู ุงููุทููุจุฉ ุ ูุซู ุนุฑุถ ุงููุต ุนูู ุงูุดุงุดุฉ ุ ูุชุญุฑูู ุงููุคุดุฑ ุ ููุณุฎ / ูุตู ุงููุต ุ ุฅูุฎ.  ุชุบูุฑ ุงูุนุฏูุฏ ูู ูุฐู ุงูุฅุฌุฑุงุกุงุช ูุญุชููุงุช ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ.  ูุชู ุชุณุฌูู ูุฐู ุงูููุงุทู ุงููุชุบูุฑุฉ ุจูุงุณุทุฉ ูุญุฑู ุญุงูุฉ ConHost. </li><li style=";text-align:right;direction:rtl">  ูู ูู ุฅุทุงุฑ ุ ุชุนุฑุถ ูุญุฏุฉ ุงูุชุญูู ุงููุณุงุญุงุช ุงููุชุบูุฑุฉ ูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ. </li></ul><br>  ุนูุฏูุง ูุณุชุฏุนู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ Windows Console API ุ ูุชู ุฅุฌุฑุงุก ุชุณูุณู ูููุงููุงุช API ูู ุฑุณุงุฆู IOCTL ูุฅุฑุณุงููุง ูู ุฎูุงู ุจุฑูุงูุฌ ุชุดุบูู ConDrv.  ุซู ุชููู ุจุชุณููู ุฑุณุงุฆู IOCTL ุฅูู ูุญุฏุฉ ุงูุชุญูู ุงููุฑููุฉ ุ ูุงูุชู ุชููู ุจูู ุชุดููุฑ ูุชูููุฐ ููุงููุฉ API ุงููุทููุจุฉ.  ูุชู ุฅุฑุฌุงุน ุชุณูุณู ุงูููู ุงููุฑุชุฌุนุฉ / ุงูุฅุฎุฑุงุฌ ุฅูู ุฑุณุงูุฉ IOCTL ูุฅุฑุณุงููุง ุฅูู ุงูุชุทุจูู ุนุจุฑ ConDrv. <br><br><h2 style=";text-align:right;direction:rtl">  ConHost: ุงููุณุงููุฉ ูู ุงููุงุถู ูู ุฃุฌู ุงููุณุชูุจู </h2><br>  ุชุณุนู Microsoft ูููุญุงูุธุฉ ุนูู ุงูุชูุงูู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ ูุน ุงูุชุทุจููุงุช ูุงูุฃุฏูุงุช ุงูููุฌูุฏุฉ ูููุง ุฃููู ุฐูู.  ุฎุงุตุฉ ุจุงููุณุจุฉ ูุณุทุฑ ุงูุฃูุงูุฑ.  ูู ุงููุงูุน ุ ูุง ูุฒุงู ุจุฅููุงู ุฅุตุฏุงุฑุงุช 32 ุจุช ูู Windows 10 ุชุดุบูู ุงูุนุฏูุฏ / ูุนุธู ุชุทุจููุงุช Win16 ูุงููููุงุช ุงูุชูููุฐูุฉ 16 ุจุช! <br><br>  ููุง ุฐูุฑ ุฃุนูุงู ุ ูุฅู ุฃุญุฏ ุฃุฏูุงุฑ ConHost ุงูุฑุฆูุณูุฉ ูู ุชูุฏูู ุงูุฎุฏูุงุช ูุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุ ุฎุงุตุฉ ุงูุชุทุจููุงุช ุงููุฏููุฉ ุงูุชู ุชุณุชุฏุนู ูุชุนุชูุฏ ุนูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู Win32.  ููุฏู ConHost ุงูุขู ุฎุฏูุงุช ุฌุฏูุฏุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจููุฉ ุชุญุชูุฉ ุณูุณุฉ ุชุดุจู PTY ููุชูุงุตู ูุน ูุญุฏุงุช ุงูุชุญูู ูุงููุญุทุงุช ุงูุทุฑููุฉ ุงูุญุฏูุซุฉ </li><li style=";text-align:right;direction:rtl">  ุชุฑููุฉ ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุงูุชูููุฏูุฉ / ุงููุฏููุฉ <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุณุชูุงู ูุชุญููู ูุต UTF-8 / VT ุฅูู ุณุฌูุงุช ุงูุฅุฏุฎุงู (ููุง ูู ุชู ุฅุฏุฎุงูู ูู ูุจู ุงููุณุชุฎุฏู) </li><li style=";text-align:right;direction:rtl">  ุชุณุชุฏุนู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ุฅูู ุงูุชุทุจูู ุงููุณุชุถุงู ุ ูุชุญุฏูุซ ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ููููุง ูุฐูู </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงูููุงุทู ุงููุนุฏูุฉ ูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ูู ุชุฑููุฒ UTF-8 ุ ูุต / VT </li></ul></li></ul><br>  ูููุง ููู ูุซุงู ุนูู ููููุฉ ุชูุงุตู ุชุทุจูู ูุญุฏุฉ ุงูุชุญูู ุงูุญุฏูุซุฉ ูุน ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ ูู ุฎูุงู ConPTY ConHost. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d72/7db/35e/d727db35e65b2e0eec45d0d535b4de83.png"><br><br>  ูู ูุฐุง ุงููููุฐุฌ ุงูุฌุฏูุฏ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุงูุชุญูู: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุดุฆ ูููุงุช ุงุชุตุงู ุฎุงุตุฉ </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฏุนุงุก ConPTY API ูุฅูุดุงุก ConPTY ุ ููุง ูุฌุจุฑ Windows ุนูู ุชุดุบูู ูุซูู ConHost ุงููุชุตู ุจุงูุทุฑู ุงูุขุฎุฑ ูููููุงุช </li><li style=";text-align:right;direction:rtl">  ูุฅูุดุงุก ูุซูู ูุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ (ูุซู PowerShell) ุงููุชุตู ุจู ConHost ุ ูุงููุนุชุงุฏ </li></ol></li><li style=";text-align:right;direction:rtl">  Conhost: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ูุต UTF-8 / VT ุนูุฏ ุงูุฅุฏุฎุงู <code>INPUT_RECORD</code> ุฅูู ุณุฌูุงุช <code>INPUT_RECORD</code> ุ ุงูุชู ูุชู ุฅุฑุณุงููุง ุฅูู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ </li><li style=";text-align:right;direction:rtl">  ุฅุฌุฑุงุก ููุงููุงุช API ูู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ ุงูุฐู ููููู ุชุนุฏูู ูุญุชููุงุช ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ </li><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงูุชุบููุฑุงุช ูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ูู ุชุฑููุฒ UTF-8 (text / VT) ูุฅุฑุณุงู ุงููุต ุงููุณุชูู ุฅูู ูุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจู </li></ol></li><li style=";text-align:right;direction:rtl">  ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนูู ูุงููุนุชุงุฏ ุ ูููุฑุฃ ุงูุฅุฏุฎุงู ููุณุชุฏุนู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ุ ุฏูู ุฃุฏูู ููุฑุฉ ุฃู ConPTY ConHost ูุชุฑุฌู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช ูู / ุฅูู UTF-8! </li></ol></li></ol><br>  ุงููุญุธุฉ ุงูุฃุฎูุฑุฉ ูููุฉ!  ุนูุฏูุง ูุณุชุฎุฏู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ ุงููุฏูู ููุงููุงุช ุฅูู ูุญุฏุฉ ุชุญูู API ูุซู <code>WriteConsoleOutput(...)</code> ุ ุชุชู ูุชุงุจุฉ ุงููุต ุงููุญุฏุฏ ุฅูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ConHost ุงูููุงุจู.  ุจุดูู ุฏูุฑู ุ ูุนุฑุถ ConHost ุงูููุงุทู ุงููุชุบูุฑุฉ ูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ููุต / VT ุ ูุงูุชู ูุชู ุฅุฑุณุงููุง ุนุจุฑ stdout ูุฑุฉ ุฃุฎุฑู ุฅูู ูุญุฏุฉ ุงูุชุญูู. <br><br>  ูู ุงูููุงูุฉ ุ ุญุชู ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุงูุชูููุฏูุฉ ูู ุงูุฎุงุฑุฌ "ุชุชุญุฏุซ" ุงููุต / VT <b>ุฏูู ุฃู ุชุบููุฑุงุช</b> ! <br><br>  ุจุงุณุชุฎุฏุงู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุฌุฏูุฏุฉ ูู ConPTY ุ ูููู ููุญุฏุงุช ุชุญูู ุงูุทุฑู ุงูุซุงูุซ ุงูุขู ุงูุชูุงุนู ุจุดูู ูุจุงุดุฑ ูุน ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุงูุญุฏูุซุฉ ูุงูุชูููุฏูุฉ ูุชุจุงุฏููุง ุฌููุนูุง ูู ูุต / VT. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุชูุงุนู ุนู ุจุนุฏ ูุน ุชุทุจููุงุช ุณุทุฑ ุฃูุงูุฑ Windows </h2><br>  ุชุนูู ุงูุขููุฉ ุงูููุถุญุฉ ุฃุนูุงู ุจุดูู ุฌูุฏ ุนูู ุฌูุงุฒ ููุจููุชุฑ ูุงุญุฏ ุ ูููููุง ุชุณุงุนุฏ ุฃูุถูุง ุนูุฏ ุงูุชูุงุนู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุน ูุซูู PowerShell ุนูู ุฌูุงุฒ ููุจููุชุฑ ูุนูู ุจูุธุงู ุงูุชุดุบูู Windows ุฃู ูู ุญุงููุฉ. <br><br>  ููุงู ูุดููุฉ ุนูุฏ ุจุฏุก ุชุดุบูู ุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ ุนู ุจูุนุฏ (ุฃู ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุงูุจุนูุฏุฉ ุฃู ุงูุฎูุงุฏู ุฃู ุงูุญุงููุงุช).  ูุงูุญูููุฉ ูู ุฃู ุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุนูู ุงูุฃุฌูุฒุฉ ุงูุจุนูุฏุฉ ุชุชูุงุตู ูุน ูุซูู ConHost ุงููุญูู ุ ูุฃู ุฑุณุงุฆู IOCTL ุบูุฑ ูุตููุฉ ููุชู ููููุง ุนุจุฑ ุงูุดุจูุฉ.  ููููุฉ ููู ุงูุฅุฏุฎุงู ูู ูุญุฏุฉ ุงูุชุญูู ุงููุญููุฉ ุฅูู ุงูุฌูุงุฒ ุงูุจุนูุฏ ูููููุฉ ุงูุญุตูู ุนูู ุงูุฅุฎุฑุงุฌ ูู ุงูุชุทุจูู ููุฏ ุงูุชุดุบูู ููุงูุ  ุนูุงูุฉ ุนูู ุฐูู ุ ูุงุฐุง ุชูุนู ูุน ุฃุฌูุฒุฉ Mac ู Linux ุ ุญูุซ ุชูุฌุฏ ูุญุทุงุช ุทุฑููุฉ ูููู ูุง ุชูุฌุฏ ูุญุฏุงุช ุชุญูู ูุชูุงููุฉ ูุน Windowsุ <br><br>  ูุจุงูุชุงูู ุ ูู ุฃุฌู ุงูุชุญูู ุนู ุจุนุฏ ูู ุฌูุงุฒ Windows ุ ูุญุชุงุฌ ุฅูู ููุน ูู ูุณูุท ุงูุงุชุตุงูุงุช ุงูุฐู ููููู ุฅุฌุฑุงุก ุชุณูุณู ููุจูุงูุงุช ุจุดูุงููุฉ ุนุจุฑ ุงูุดุจูุฉ ุ ูุฅุฏุงุฑุฉ ุนูุฑ ูุซูู ุงูุชุทุจูู ุ ููุง ุฅูู ุฐูู. <br><br>  ุฑุจูุง ุดูุก ูุซู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ssh</a> ุ <br><br>  ูุญุณู ุงูุญุธ ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููู</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">OpenSSH</a> ูุคุฎุฑูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูู Windows</a> ูุฃุถูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฎูุงุฑ ุฅุถุงูู ุฅูู Windows 10</a> .  ูุณุชุฎุฏู PowerShell Core ุฃูุถูุง ssh ููุงุญุฏ ูู ุจุฑูุชููููุงุช ุงูุนูู ุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุนุฏ PowerShell Core</a> ุงููุฏุนููุฉ.  ูุจุงููุณุจุฉ ูุฃููุฆู ุงูุฐูู ูููููู ุจุชุดุบูู Windows PowerShell ุ ูุง ูุฒุงู ุฎูุงุฑ Windows PowerShell ุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุนุฏ</a> ุฎูุงุฑูุง ููุจููุงู. <br><br>  ุฏุนููุง ูุฑู ููู ูุณูุญ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">OpenSSH ูู Windows ุงูุขู</a> ุจุงูุชุญูู ุนู ุจุนุฏ ูู ูุฐุงุฆู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Windows</a> ูุชุทุจููุงุช ุณุทุฑ ุงูุฃูุงูุฑ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30e/7fc/eeb/30e7fceebcbcea167c2d50d448c975a4.png"><br><br>  ูุชุถูู OpenSSH ุญุงูููุง ุจุนุถ ุงููุถุงุนูุงุช ุบูุฑ ุงููุฑุบูุจ ูููุง: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุณุชุฎุฏู: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุนููู ssh ุ ููุฑุจุท Windows ูุซูู ูุญุฏุฉ ุงูุชุญูู ูุงููุนุชุงุฏ </li><li style=";text-align:right;direction:rtl">  ูุฏุฎู ุงููุต ุฅูู ูุญุฏุฉ ุงูุชุญูู ุ ูุงูุฐู ูุฑุณู ุถุบุทุงุช ุงูููุงุชูุญ ุฅูู ุนููู ssh </li></ol></li><li style=";text-align:right;direction:rtl">  ุนููู ssh: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุฑุฃ ุงูุฅุฏุฎุงู ูุจุงูุช ูู ุงูุจูุงูุงุช ุงููุตูุฉ </li><li style=";text-align:right;direction:rtl">  ูุฑุณู ุงูุจูุงูุงุช ุงููุตูุฉ ุนุจุฑ ุงูุดุจูุฉ ุฅูู ุฎุฏูุฉ ุงูุงุณุชูุงุน sshd </li></ol></li><li style=";text-align:right;direction:rtl">  ุชูุฑ ุฎุฏูุฉ sshd ุจุนุฏุฉ ูุฑุงุญู: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุดุบู ุงูุตุฏูุฉ ุงูุงูุชุฑุงุถูุฉ (ุนูู ุณุจูู ุงููุซุงู ุ Cmd) ุ ููุง ูุฌุจุฑ Windows ุนูู ุฅูุดุงุก ูุชูุตูู ูุณุฎุฉ ุฌุฏูุฏุฉ ูู ูุญุฏุฉ ุงูุชุญูู </li><li style=";text-align:right;direction:rtl">  ูุจุญุซ ุนู ูุญุฏุฉ ุชุญูู ูุซูู Cmd ููุชุตู ุจูุง </li><li style=";text-align:right;direction:rtl">  ุชุญุฑูู ูุญุฏุฉ ุงูุชุญูู ุฎุงุฑุฌ ุงูุดุงุดุฉ (ู / ุฃู ุฅุฎูุงุกูุง) </li><li style=";text-align:right;direction:rtl">  ูุฑุณู ุงููุฏุฎูุงุช ุงููุงุฑุฏุฉ ูู ุนููู ssh ุฅูู ูุญุฏุฉ ุงูุชุญูู ุฎุงุฑุฌ ุงูุดุงุดุฉ ููุฏุฎู </li></ol></li><li style=";text-align:right;direction:rtl">  ูุนูู ูุซูู cmd ููุง ูู ุงูุญุงู ุฏุงุฆููุง: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌูุน ุงููุฏุฎูุงุช ูู ุฎุฏูุฉ sshd </li><li style=";text-align:right;direction:rtl">  ูู ุงูุนูู </li><li style=";text-align:right;direction:rtl">  ูุณุชุฏุนู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ูุชูุฏูู ุงููุต / ุงูููุท ุ ูุชุญุฑูู ุงููุคุดุฑ ุ ุฅูุฎ. </li></ol></li><li style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุงูุชุญูู ุงููุฑููุฉ [ุฎุงุฑุฌ ุงูุดุงุดุฉ]: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฌุฑุงุก ููุงููุงุช API ุนู ุทุฑูู ุชุญุฏูุซ ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ. </li></ol></li><li style=";text-align:right;direction:rtl">  ุฎุฏูุฉ Sshd: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฒูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ููุญุฏุฉ ุงูุชุญูู ุฎุงุฑุฌ ุงูุดุงุดุฉ ุ ููุฌุฏ ุงูุงุฎุชูุงูุงุช ุ ููุฑูุฒูุง ุฅูู ูุต / VT ููุฑุณู ูุฑุฉ ุฃุฎุฑู ... </li></ol></li><li style=";text-align:right;direction:rtl">  ุนููู ssh ูุฑุณู ุงููุต ... </li><li style=";text-align:right;direction:rtl">  ูุญุฏุฉ ุชุญูู ุชุนุฑุถ ุงููุต </li></ol><br>  <b>ูุฑุญ ุ ุตุญูุญุ</b>  <b>ูุง ุนูู ุงูุงุทูุงู!</b>  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฏ ููุญุฑู ุงููุซูุฑ ุ ุฎุงุตุฉ ูู ุนูููุฉ ูุญุงูุงุฉ ูุฅุฑุณุงู ูุฏุฎูุงุช ุงููุณุชุฎุฏู ููุณุญ ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ููุญุฏุฉ ุงูุชุญูู ุฎุงุฑุฌ ุงูุดุงุดุฉ.  ููุฐุง ูุคุฏู ุฅูู ุนุฏู ุงูุงุณุชูุฑุงุฑ ุ ูุงูุฃุนุทุงู ุ ูุชูู ุงูุจูุงูุงุช ุ ูุงูุงุณุชููุงู ุงูููุฑุท ููุทุงูุฉ ุ ุฅูุฎ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ุชููู ุฌููุน ุงูุชุทุจููุงุช ุจูููุฉ ุฅุฒุงูุฉ ููุณ ุงููุต ููุณู ูุญุณุจ ุ ุจู ุฃูุถูุง ุฎุตุงุฆุตู ุ ููุฐุง ูู ุณุจุจ ููุฏุงู ุงูุชูุณูู ูุงูููู! <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุนูู ุนู ุจุนุฏ ุจุงุณุชุฎุฏุงู ConHost ู ConPTY ุงูุญุฏูุซ </h3><br>  <b>ุจุงูุชุฃููุฏ ูููููุง ุชุญุณูู ุงููุถุนุ</b>  ูุนู ุ ุจุงูุทุจุน ูููููุง - ุฏุนูุง ูุฌุฑู ุจุนุถ ุงูุชุบููุฑุงุช ุงููุนูุงุฑูุฉ ููุทุจู ConPTY ุงูุฌุฏูุฏ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e8/677/f1d/5e8677f1da3a8abcf2951f4e539c6470.png"><br><br>  ููุถุญ ุงูุฑุณู ุงูุจูุงูู ุฃู ุงูุฏุงุฆุฑุฉ ุชุบูุฑุช ุนูู ุงููุญู ุงูุชุงูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุณุชุฎุฏู: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุนููู ssh ุ ููุฑุจุท Windows ูุซูู ูุญุฏุฉ ุงูุชุญูู ูุงููุนุชุงุฏ </li><li style=";text-align:right;direction:rtl">  ูุฏุฎู ุงููุต ุฅูู ูุญุฏุฉ ุงูุชุญูู ุ ูุงูุฐู ูุฑุณู ุถุบุทุงุช ุงูููุงุชูุญ ุฅูู ุนููู ssh </li></ol></li><li style=";text-align:right;direction:rtl">  ุนููู ssh: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุฑุฃ ุงูุฅุฏุฎุงู ูุจุงูุช ูู ุงูุจูุงูุงุช ุงููุตูุฉ </li><li style=";text-align:right;direction:rtl">  ูุฑุณู ุงูุจูุงูุงุช ุงููุตูุฉ ุนุจุฑ ุงูุดุจูุฉ ุฅูู ุฎุฏูุฉ ุงูุงุณุชูุงุน sshd </li></ol></li><li style=";text-align:right;direction:rtl">  ุฎุฏูุฉ Sshd: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุดุฆ ูููุงุช stdin / stdout </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฏุนุงุก API ConPTY ูุจุฏุก ConPTY </li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุชุดุบูู ูุซูู Cmd ูุชุตูุงู ุจุงูููุงูุฉ ุงูุฃุฎุฑู ูู ConPTY.  ูููู Windows ุจุจุฏุก ูุชุซุจูุช ูุณุฎุฉ ุฌุฏูุฏุฉ ูู ConHost </li></ol></li><li style=";text-align:right;direction:rtl">  ูุนูู ูุซูู cmd ููุง ูู ุงูุญุงู ุฏุงุฆููุง: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌูุน ุงููุฏุฎูุงุช ูู ุฎุฏูุฉ sshd </li><li style=";text-align:right;direction:rtl">  ูู ุงูุนูู </li><li style=";text-align:right;direction:rtl">  ูุณุชุฏุนู ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ูุชูุฏูู ุงููุต / ุงูููุท ุ ูุชุญุฑูู ุงููุคุดุฑ ุ ุฅูุฎ. </li></ol></li><li style=";text-align:right;direction:rtl">  ุงููุซูู ConPTY ConHost: <br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฌุฑุงุก ููุงููุงุช API ุนู ุทุฑูู ุชุญุฏูุซ ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ. </li><li style=";text-align:right;direction:rtl">  ูุนุฑุถ ุงูููุงุทู ุงูุชู ุชู ุชุบููุฑูุง ูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ ููุต ูุดูุฑ UTF-8 / VT ุ ูุงูุฐู ูุชู ุฅุฑุณุงูู ูุฑุฉ ุฃุฎุฑู ุฅูู ูุญุฏุฉ ุงูุชุญูู / ุงููุญุทุฉ ุงูุทุฑููุฉ ุนุจุฑ ssh </li></ol></li></ol><br>  ูู ุงููุงุถุญ ุฃู ูุฐุง ุงูููุฌ ุจุงุณุชุฎุฏุงู ConPTY ุฃูุซุฑ ูุธุงูุฉ ูุจุณุงุทุฉ ูุฎุฏูุฉ sshd.  ูุชู ุฅุฌุฑุงุก ุงูููุงููุงุช ุฅูู Windows Console API ุจุงููุงูู ูู ูุซูู ConHost ูุชุทุจูู ุณุทุฑ ุงูุฃูุงูุฑ ุ ูุงูุฐู ูุญูู ุฌููุน ุงูุชุบููุฑุงุช ุงููุฑุฆูุฉ ุฅูู ูุต / VT.  ูู ูุชุตู ุจู ConHost ุ ูุฅูู ูุง ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุฃู ุงูุชุทุจูู ููุงู ูุณุชุฏุนู API Console ุ ููุง ูููู ุจุฅูุดุงุก ูุต / VT! <br><br>  ุชูุงูู ุนูู ุฃู ุขููุฉ ุงูุชุญูู ุนู ุจุนุฏ ุงูุฌุฏูุฏุฉ ConPTY ูุฐู ุชุคุฏู ุฅูู ุจููุฉ ุฃูููุฉ ููุชุณูุฉ ูุจุณูุทุฉ.  ุฅูู ุฌุงูุจ ุงูููุฒุงุช ุงููููุฉ ุงููุฏูุฌุฉ ูู ConHost ุ ุฏุนู ุงูุชุทุจููุงุช ุงููุฏููุฉ ูุนุฑุถ ุงูุชุบููุฑุงุช ูู ุงูุชุทุจููุงุช ุงูุชู ุชุณุชุฏุนู ูุงุฌูุงุช ุจุฑูุฌุฉ ุชุทุจููุงุช ูุญุฏุฉ ุงูุชุญูู ููุต / VT ุ ุชุณุงุนุฏูุง ุงูุจููุฉ ุงูุชุญุชูุฉ ConHost ู ConPTY ุงูุฌุฏูุฏุฉ ุนูู ููู ุงููุงุถู ุฅูู ุงููุณุชูุจู. <br><br><h1 style=";text-align:right;direction:rtl">  ConPTY API ูููููุฉ ุงุณุชุฎุฏุงูู </h1><br><blockquote style=";text-align:right;direction:rtl">  ุชุชููุฑ ConPTY API ูู ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Windows 10 Insider Preview SDK</a> . </blockquote><br>  ุงูุขู ุ ุฃูุง ูุชุฃูุฏ ูู ุฃูู ูุง ููููู ุงูุงูุชุธุงุฑ ูุฑุคูุฉ ุจุนุถ ุงูุฑููุฒ ุ) <br><br>  ุฃูู ูุธุฑุฉ ุนูู ุฅุนูุงูุงุช API: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">// Creates a "Pseudo Console" (ConPTY). HRESULT WINAPI CreatePseudoConsole( _In_ COORD size, // ConPty Dimensions _In_ HANDLE hInput, // ConPty <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> _In_ HANDLE hOutput, // ConPty Output _In_ DWORD dwFlags, // ConPty Flags _Out_ HPCON* phPC); // ConPty Reference // Resizes the given ConPTY <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the specified size, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> characters. HRESULT WINAPI ResizePseudoConsole(_In_ HPCON hPC, _In_ COORD size); // Closes the ConPTY <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> associated handles. Client applications attached // <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the ConPTY will <span class="hljs-keyword"><span class="hljs-keyword">also</span></span> terminated. <span class="hljs-type"><span class="hljs-type">VOID</span></span> WINAPI ClosePseudoConsole(_In_ HPCON hPC);</code> </pre> <br>  ููุดู API ConPTY ุฃุนูุงู ุจุดูู ุฃุณุงุณู ุซูุงุซ ูุธุงุฆู ุฌุฏูุฏุฉ ููุงุณุชุฎุฏุงู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <b><code>CreatePseudoConsole(size, hInput, hOutput, dwFlags, phPC)</code></b> <br> <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุดุฆ pty ูุน ุงูุจุนุฏ ูู ุงูุฃุนูุฏุฉ <code>w</code> ูุงูุฎุทูุท <code>h</code> ุ ุจุงุณุชุฎุฏุงู ุงููููุงุช ุงูุชู ุฃูุดุฃูุง ุงููุชุตู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>size</code> : ุงูุนุฑุถ ูุงูุงุฑุชูุงุน (ุจุงูุฃุญุฑู) ูููุฎุฒู ุงููุคูุช ConPTY </li><li style=";text-align:right;direction:rtl">  <code>hInput</code> : ููุชุงุจุฉ ุจูุงูุงุช ุงูุฅุฏุฎุงู ุฅูู PTY ูุชุณูุณูุงุช ูุตูุฉ / VT ุจุชุฑููุฒ UTF-8 </li><li style=";text-align:right;direction:rtl">  <code>hOutput</code> : ููุฑุงุกุฉ ุงูุฅุฎุฑุงุฌ ูู PTY ูุชุณูุณูุงุช ูุตูุฉ / VT ูู ุชุฑููุฒ UTF-8 </li><li style=";text-align:right;direction:rtl">  <code>dwFlags</code> : ุงูููู ุงููุญุชููุฉ: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>PSEUDOCONSOLE_INHERIT_CURSOR</code> : <code>PSEUDOCONSOLE_INHERIT_CURSOR</code> ุชู ุฅูุดุงุคู ุฃู ูุฑุซ ููุถุน ุงููุคุดุฑ ูุชุทุจูู ุงููุญุทุฉ ุงูุทุฑููุฉ ุงูุฑุฆูุณู </li></ul></li><li style=";text-align:right;direction:rtl">  <code>phPC</code> : ููุจุถ ูุญุฏุฉ ุงูุชุญูู ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ConPty </li></ul></li><li style=";text-align:right;direction:rtl">  <b>ุงูุนูุงุฆุฏ</b> : ุงููุฌุงุญ / ุงููุดู.  ูู ุญุงูุฉ ูุฌุงุญ ุฐูู ุ ุชุญุชูู phPC ุนูู ููุจุถ ConPty ุงูุฌุฏูุฏ </li></ul><br> <b><code>ResizePseudoConsole(hPC, size)</code></b> <br> <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุบููุฑ ุญุฌู ุงููุฎุฒู ุงููุคูุช ุงูุฏุงุฎูู ConPTY ูุนุฑุถ ุนุฑุถ ูุงุฑุชูุงุน ูุนูููู </li></ul><br> <b><code>ClosePseudoConsole (hPC)</code></b> <br> <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ConPTY    .  ,   ConPTY,  ,        ,   </li></ul><br><h2 style=";text-align:right;direction:rtl">  ConPTY API </h2><br>       ConPTY API           ConPTY. <br><br><blockquote style=";text-align:right;direction:rtl"> :      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  GitHub</a> </blockquote><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby"> /<span class="hljs-regexp"><span class="hljs-regexp">/ Note: Most error checking removed for brevity. /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ... /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ Initializes the specified startup info struct with the required properties and /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ updates its thread attribute list with the specified ConPTY handle HRESULT InitializeStartupInfoAttachedToConPTY(STARTUPINFOEX* siEx, HPCON hPC) { HRESULT hr = E_UNEXPECTED; size_t size; siEx-&gt;StartupInfo.cb = sizeof(STARTUPINFOEX); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ Create the appropriately sized thread attribute list InitializeProcThreadAttributeList(NULL, 1, 0, &amp;size); std::unique_ptr&lt;BYTE[]&gt; attrList = std::make_unique&lt;BYTE[]&gt;(size); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ Set startup info's attribute list &amp; initialize it siEx-&gt;lpAttributeList = reinterpret_cast&lt;PPROC_THREAD_ATTRIBUTE_LIST&gt;( attrList.get()); bool fSuccess = InitializeProcThreadAttributeList( siEx-&gt;lpAttributeList, 1, 0, (PSIZE_T)&amp;size); if (fSuccess) { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ Set thread attribute list's Pseudo Console to the specified ConPTY fSuccess = UpdateProcThreadAttribute( lpAttributeList, 0, PROC_THREAD_ATTRIBUTE_PSEUDOCONSOLE, hPC, sizeof(HPCON), NULL, NULL); return fSuccess ? S_OK : HRESULT_FROM_WIN32(GetLastError()); } else { hr = HRESULT_FROM_WIN32(GetLastError()); } return hr; } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ... HANDLE hOut, hIn; HANDLE outPipeOurSide, inPipeOurSide; HANDLE outPipePseudoConsoleSide, inPipePseudoConsoleSide; HPCON hPC = 0; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ Create the in/out</span></span> <span class="hljs-symbol"><span class="hljs-symbol">pipes:</span></span> CreatePipe(&amp;inPipePseudoConsoleSide, &amp;inPipeOurSide, NULL, <span class="hljs-number"><span class="hljs-number">0</span></span>); CreatePipe(&amp;outPipeOurSide, &amp;outPipePseudoConsoleSide, NULL, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Create the Pseudo Console, using the pipes CreatePseudoConsole( {<span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>}, inPipePseudoConsoleSide, outPipePseudoConsoleSide, <span class="hljs-number"><span class="hljs-number">0</span></span>, &amp;hPC); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Prepare the StartupInfoEx structure attached to the ConPTY. STARTUPINFOEX siEx{}; InitializeStartupInfoAttachedToConPTY(&amp;siEx, hPC); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Create the client application, using startup info containing ConPTY info wchar_t* commandline = L<span class="hljs-string"><span class="hljs-string">"c:\\windows\\system32\\cmd.exe"</span></span>; PROCESS_INFORMATION piClient{}; fSuccess = CreateProcessW( nullptr, commandline, nullptr, nullptr, TRUE, EXTENDED_STARTUPINFO_PRESENT, nullptr, nullptr, &amp;siEx-&gt;StartupInfo, &amp;piClient); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ...</code> </pre> <br>  cmd.exe    ConPTY,  <code>CreatePseudoConsole()</code> .       ConPTY     /  Cmd.      <code>ResizePseudoConsole()</code> ,   โ   <code>ClosePseudoConsole()</code> . <br><br><h3 style=";text-align:right;direction:rtl">    </h3><br>     ConPTY  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">// <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> "echo Hello, World!", press enter <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> have cmd process the command, // <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> an up arrow (<span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> the previous command), <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> enter again <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">execute</span></span>. std::string helloWorld = "echo Hello, World!\n\x1b[A\n"; DWORD dwWritten; WriteFile(hIn, helloWorld.c_str(), (DWORD)helloWorld.length(), &amp;dwWritten, nullptr);</code> </pre> <br><h3 style=";text-align:right;direction:rtl">    </h3><br>   ,    ConPTY: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">// Suppose <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> other async callback triggered us <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> resize. // This <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> will <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> the Terminal <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the size we received. HRESULT hr = ResizePseudoConsole(hPC, {<span class="hljs-number"><span class="hljs-number">120</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>});</code> </pre> <br><h3 style=";text-align:right;direction:rtl">   </h3><br>     ConPTY: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs lisp">ClosePseudoConsole(<span class="hljs-name"><span class="hljs-name">hPC</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br> :  ConPTY   ConHost    . <br><br><h1 style=";text-align:right;direction:rtl">   ! </h1><br>  ConPTY API โ ,       ,     Windows   โฆ   <i></i> ! <br><br>     ConPTY API   Microsoft,        Microsoft ( Windows  Linux (WSL),  Windows Containers, VSCode, Visual Studio  .),      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">@ConEmuMaximus5</a> โ    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ConEmu</a>  Windows. <br><br> <b>    </b> ,        ConPTY API. <br><br><h2 style=";text-align:right;direction:rtl">     </h2><br>       ,        : ConHost     .           Console API.     ,          ,    . <br><br>   ,      VT, ,    โ  . <br><br>   ,     <b></b>    Windows,      /VT   UTF-8    Console API:  ยซ  VTยป     ,      Console API (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> 16M RGB True Color</a> ). <br><br><h2 style=";text-align:right;direction:rtl">   / </h2><br>       /     ,             ConPTY API:         ,  ,    ,   ,   . <br><br><blockquote style=";text-align:right;direction:rtl">     VSCode      ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GitHub #45693</a> )   ,     Windows. </blockquote><br><h2 style=";text-align:right;direction:rtl">  ConPTY API </h2><br>  ConPTY API     Windows 10 / 2018 . <br><br>      Windows, ,    ,     ConPTY.     Win32 API,     API    Runtime Dynamic Linking   <code>LoadLibrary()</code>  <code>GetProcAddress()</code> . <br><br>    Windows  ConPTY,        API ConPTY.  ,     ,    . <br><br><h1 style=";text-align:right;direction:rtl"> ,    ? </h1><br>    โฆ   !  ,       , <b></b> !  : ุฏ <br><br>       ,   , <i></i>    ,   <i></i>  .   โ            ,          Windows  ,   . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> Windows Console  GitHub</a> .    , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">    </a> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar420853/">https://habr.com/ru/post/ar420853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar420837/index.html">ุงุฎุชุจุงุฑ ุตูุงุฆู RAID ุงูุจุฑูุฌูุฉ ูุฃุฌูุฒุฉ NVMe ุจุงุณุชุฎุฏุงู ูููุฌูุฉ SNIA</a></li>
<li><a href="../ar420841/index.html">ุงูุฅุตูุงุญ ุงูุนุงุฌู ูุจู ุฏุฎูู ุงููุณุชุดูู ุฃู "Hey Swagger! ุฃูู ุฃุฎุทุงุฆูุ "</a></li>
<li><a href="../ar420843/index.html">7 ุณุจุชูุจุฑ ุ ููุงุชุฑููุจูุฑุบ - ุงุฌุชูุงุน ููุทูุฑู .NET</a></li>
<li><a href="../ar420845/index.html">ุชุฑููุถ ุงูููููุฏ ุจุงุณุชุฎุฏุงู ุนูุงุฒ: ูุชุญุฉ ูุญูู Wi-Fi WF2190 (Realtek8812AU Wireless LAN 802.11ac USB)</a></li>
<li><a href="../ar420847/index.html">ููุฏูุฉ ูู ุจุฑูุฌุฉ Shader ููุชุฎุทูุทุงุช</a></li>
<li><a href="../ar420857/index.html">ุงูุชุฌูุงู ุงูุณูุณ ุนุจุฑ ุดุจูุฉ Wi-Fi: ุงููุธุฑูุฉ ูู ุงูุชุทุจูู</a></li>
<li><a href="../ar420859/index.html">ููุณุฃูุฉ ููุฑุซ ูุณูุงุณู</a></li>
<li><a href="../ar420861/index.html">ุงูุงุณุชุนุฏุงุฏ ูู C ++ 20. ุฏุฑุงุณุฉ ุญุงูุฉ Coroutines TS Real</a></li>
<li><a href="../ar420863/index.html">ููุง ูุนููุง ุฃูู ูุงุชู ุฐูู ุฑูุณู ุ ุชุงุจุน</a></li>
<li><a href="../ar420865/index.html">ูุจุฏุฃ ุงูุนูู ุงูุฃูู. ุงูุฌุฒุก ุงูุฃูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>