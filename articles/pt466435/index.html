<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêÖ üå∫ üßïüèª Treinamento Cisco 200-125 CCNA v3.0. Dia 42. Roteamento Inter-VLAN e SVI üíáüèø ü§ë ‚ô¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje, analisamos o roteamento entre VLANs e a interface do comutador virtual SVI. J√° nos familiarizamos com esses t√≥picos no curso do ICND1 e agora va...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Treinamento Cisco 200-125 CCNA v3.0. Dia 42. Roteamento Inter-VLAN e SVI</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/466435/"> Hoje, analisamos o roteamento entre VLANs e a interface do comutador virtual SVI.  J√° nos familiarizamos com esses t√≥picos no curso do ICND1 e agora vamos lidar com eles com mais profundidade.  Esses t√≥picos s√£o mencionados na Se√ß√£o 2.0, Tecnologias de roteamento, do ICND2, subse√ß√µes 2.1a e 2.1b.  Primeiro, examinamos os problemas de configura√ß√£o, verifica√ß√£o e roteamento entre VLANs, depois o conceito de arquitetura de rede Router-on-a-Stick (ROAS) e a interface do switch SVI. <br><br>  Vamos seguir para o programa Packet Tracer e considerar qual √© a interface virtual do comutador SVI.  O diagrama mostra duas redes: um departamento de vendas e um departamento de marketing, cada um com seu pr√≥prio comutador.  Por padr√£o, os computadores s√£o conectados ao comutador atrav√©s da VLAN1 padr√£o, para que possam se comunicar sem problemas. <br><br><img src="https://habrastorage.org/webt/df/gp/ym/dfgpymzyjf8ai0gpqna6iezvqwk.jpeg"><br><br>  Mas se o computador n¬∫ 1 do departamento de vendas quiser entrar em contato com o computador n¬∫ 1 do departamento de marketing, ele n√£o poder√° fazer isso porque as redes n√£o est√£o conectadas.  Tecnicamente, voc√™ pode conectar os dois comutadores por cabo, mas os computadores ainda n√£o conseguir√£o se comunicar, porque fazem parte de redes diferentes com diferentes intervalos de endere√ßos IP - 192.168.10.0/24 e 192.168.20.0/24. <a name="habracut"></a><br><br>  √â poss√≠vel estabelecer a comunica√ß√£o entre essas duas redes se voc√™ colocar entre os dispositivos de comuta√ß√£o do OSI de terceiro n√≠vel, um roteador, e conectar os comutadores e o roteador com cabos. <br><br><img src="https://habrastorage.org/webt/gf/lk/ia/gflkiawp5nctwcrocn1m7atuzk0.jpeg"><br><br>  Normalmente, em um escrit√≥rio, voc√™ n√£o possui dois comutadores diferentes para duas redes, principalmente porque os comutadores Cisco s√£o muito caros; portanto, voc√™ deve gerenciar um comutador para 24 e 48 portas.  Suponha que tenhamos um switch de 48 portas. <br><br><img src="https://habrastorage.org/webt/wv/8l/fg/wv8lfgunfgblsrsdpwqmhxmlnoo.jpeg"><br><br>  Criamos VLANs diferentes. Deixe a cor das portas no diagrama n√£o incomod√°-lo, eu as desenharei em preto.  A rede azul √© VLAN10 e o vermelho √© VLAN20.  Se fizermos isso, os computadores de redes diferentes ainda n√£o conseguir√£o se comunicar, porque o switch √© um dispositivo OSI de n√≠vel 2.  Precisamos de um dispositivo de n√≠vel 3 para se conectar. <br><br>  Voc√™ pode resolver esse problema usando um roteador, uma porta da qual ser√° conectada a uma das portas da rede VLAN10 azul e a outra porta - a uma das portas da rede VLAN20 vermelha.  Ao mesmo tempo, podemos organizar facilmente a comunica√ß√£o entre computadores de redes diferentes atrav√©s deste roteador. <br><br><img src="https://habrastorage.org/webt/zb/em/wn/zbemwnondyrrqvdtdpco0dhhl-g.jpeg"><br><br>  Com esse esquema, estamos usando irracionalmente as interfaces do roteador, por isso √© muito mais eficiente usar outra maneira de interconex√£o chamada Router-on-a-Stick.  Mais tarde retornaremos a ele, mas, por enquanto, consideraremos a interface virtual do switch SVI.  Como voc√™ sabe, o switch "pronto para uso" todas as portas s√£o configuradas por padr√£o na VLAN1 e o switch possui uma interface virtual para essas redes - a interface da VLAN1.  O que √© uma interface virtual? <br><br>  Se voc√™, como administrador da rede, configurar o switch, use o computador conectado por cabo √† porta do console do switch.  O problema √© que, para usar o console, voc√™ deve estar ao lado do comutador, a uma dist√¢ncia n√£o superior ao comprimento do cabo.  Suponha que voc√™ seja um grande administrador de rede e deseje configurar o dispositivo remotamente.  No entanto, o switch √© um dispositivo do segundo n√≠vel da rede, portanto, n√£o pode ter um endere√ßo IP, e n√£o h√° como acess√°-lo pela rede, pois √© imposs√≠vel atribuir endere√ßos IP √†s interfaces f√≠sicas do switch.  Como esse problema pode ser resolvido? <br>  Para fazer isso, precisamos criar uma interface virtual para VLAN1 e atribuir a ele um endere√ßo IP 192.168.1.1 ou qualquer outro endere√ßo.  Em seguida, o computador do administrador de rede desenhado por mim com o endere√ßo IP 192.168.1.10 poder√° conectar-se a essa interface virtual com um switch via Telnet ou SSH.  Esse recurso existe para a VLAN1 por padr√£o. <br><br><img src="https://habrastorage.org/webt/e9/ra/mp/e9rampetqlahniqxfzfljf9wyhs.jpeg"><br><br>  No entanto, a rede azul PC1 pertence √† VLAN10 e a interface virtual pertence √† VLAN1; portanto, o computador n√£o pode se comunicar com a interface VLAN1, pois pertence a outra rede.  Nesse caso, voc√™ pode criar uma interface virtual para a VLAN10 e criar a mesma interface para a VLAN20.  Em seguida, o computador PC1 da rede azul e o computador PC1 da rede vermelha podem se comunicar remotamente com o comutador via interfaces virtuais - para isso, basta atribuir endere√ßos IP a essas interfaces nos intervalos de endere√ßos VLAN10 e VLAN20. <br><br>  Portanto, para fornecer acesso remoto de qualquer dispositivo ao comutador, voc√™ precisa criar uma interface virtual com o mesmo n√∫mero de VLAN ao qual esse dispositivo pertence, por exemplo, criar uma interface virtual VLAN20 para um computador da VLAN20, etc. <br><br>  Ao discutir VLANs, mencionamos as camadas 2 e 3 do modelo OSI.  Para entender a diferen√ßa entre eles, usamos o Packet Tracer. <br><br><img src="https://habrastorage.org/webt/pc/8t/sf/pc8tsfbggxpcmkkq0uon_imdlue.jpeg"><br><br>  Eu hospedo um dispositivo de n√≠vel 2 - um switch e adiciono alguns PCs de usu√°rio final.  O PC0 esquerdo est√° na VLAN10 e o PC1 direito est√° na VLAN20.  Ent√£o, criarei uma rede conectando computadores ao switch.  Ambos os computadores devem ter seus pr√≥prios endere√ßos IP, ent√£o eu vou para as configura√ß√µes de rede e atribuo ao PC0 o endere√ßo 198.168.10.1 e a m√°scara de sub-rede 255.255.255.0.  Por enquanto n√£o uso um gateway, por isso deixo as configura√ß√µes padr√£o.  Fa√ßo o mesmo com o PC1, atribuindo o endere√ßo 198.168.20.1 e a m√°scara de sub-rede 255.255.255.0. <br>  Agora estou pingando do PC0 um computador com o endere√ßo 198.168.20.1.  Nas li√ß√µes anteriores, voc√™ deve saber que isso n√£o vai funcionar.  Apesar de ambos os PCs estarem conectados √†s interfaces padr√£o do switch VLAN1, eles ainda n√£o podem se comunicar, porque possuem endere√ßos IP pertencentes a diferentes intervalos de endere√ßos de rede - o VLAN10 possui um intervalo de 192.168.10.0/0 e o VLAN20 tem 192.168.20.0 / 0  Ou seja, fisicamente os computadores podem se comunicar, mas logicamente - n√£o. <br><br>  Entro no console do switch e altero as configura√ß√µes da VLAN.  Para fazer isso, chamo a interface f0 / 1 e digito os comandos switchport access access e switchport access vlan10, ap√≥s o qual o sistema exibir√° uma mensagem informando que essa rede n√£o existe e ser√° criada.  Em seguida, inserirei o comando show vlan brief, e voc√™ pode ver que criamos uma rede VLAN10.  Ent√£o eu entro no comando show ip interface brief, e vemos que no final da lista de interfaces, temos a interface virtual VLAN1 por padr√£o - este √© o SVI.  Ele est√° em um estado administrativamente inoperante. <br>  Agora vamos tentar criar uma interface virtual para a VLAN10.  Vimos que o switch n√£o tinha uma rede VLAN10 e, portanto, a criou, este √© o segundo n√≠vel do modelo OSI.  A interface virtual para VLAN10 √© o n√≠vel 3 e voc√™ precisa usar o comando int vlan10 para cri√°-lo.  Depois disso, o sistema exibir√° uma mensagem informando que a interface da VLAN10 mudou de estado para ativo - ‚Äúon‚Äù, enquanto o protocolo linear da interface da VLAN10 tamb√©m est√° ativado. <br><br>  Se voc√™ digitar novamente o comando show int brief, ficar√° claro que acabamos de obter a interface VLAN10 criada, que est√° no estado ativo.  Se criarmos um SVI, por padr√£o, ele estar√° no estado "ligado".  Lembre-se - a interface da VLAN1 √© desativada por padr√£o, mas quando criamos outra interface virtual da VLAN, ela fica ativada. <br><br><img src="https://habrastorage.org/webt/xr/ic/yl/xricylmwm336r4_v_sw-y05sclg.jpeg"><br><br>  Como voc√™ pode ver, n√£o h√° VLAN20 no banco de dados da VLAN, por isso vou cri√°-lo com o comando int vlan 20. Voc√™ v√™ que estou no modo de subcomando desta interface.  Posso inserir o comando shutdown para desativar esse SVI ou escrever no shut se quiser deix√°-lo no estado de ativa√ß√£o.  Vejamos a lista de interfaces novamente.  Como voc√™ pode ver, criamos automaticamente uma rede VLAN20.  O VLAN10 criado anteriormente est√° no estado ativo, n√£o h√° problemas com ele.  Mas agora, quando criei a VLAN20, ela apareceu no estado desconectado.  Este √© um tipo de problema, portanto, precisamos descobrir por que ele e seu protocolo correspondente est√£o no estado inativo. <br><br>  Acontece que a interface VLAN20 est√° desativada porque ainda n√£o temos uma rede VLAN20.  Portanto, vamos sair das configura√ß√µes da interface e criar esta rede.  Lembre-se de que, ao criar um elemento de uma estrutura de n√≠vel 3 do modelo OSI, use o comando int vlan 20 e, para criar um elemento de n√≠vel 2, use o comando vlan 20. Depois de criar esta rede, o sistema exibir√° uma mensagem informando que a interface VLAN20 mudou de estado para cima.  Voc√™ tamb√©m pode ver que o sistema emite dicas no n√≠vel de subcomandos como Switch (config-vlan) # em vez de Switch (config) #. <br>  Vamos tentar agora mudar o nome da rede que criamos.  Se criarmos uma rede VLAN10, o sistema por padr√£o receber√° o mesmo nome - VLAN0010.  Se quisermos alter√°-lo, use o comando SALES name.  Ent√£o, usando o comando show vlan brief, examinamos o banco de dados da VLAN e vemos que a VLAN20 se transformou em uma rede de VENDAS. <br><br>  Se voc√™ agora examinar a lista de interfaces, poder√° ver que a interface da VLAN20 mudou de estado para Up porque agora o banco de dados da VLAN cont√©m uma rede que corresponde a essa interface. <br><br>  No entanto, voc√™ v√™ que o protocolo dessa porta ainda est√° inativo e est√° no estado inativo.  Isso ocorre porque ele n√£o "v√™" nenhum tr√°fego na rede VLAN20.  Por que ele n√£o v√™ esse tr√°fego?  Porque nenhuma porta est√° conectada √† rede VLAN20.  Portanto, precisamos conectar uma porta de trabalho a ela.  Nesse caso, apenas as portas f0 / 1 e f0 / 2 est√£o conectando dispositivos. <br><br><img src="https://habrastorage.org/webt/1q/ra/te/1qrateol8sltkg469nmalbiruiu.jpeg"><br><br>  Portanto, usando o comando int f0 / 2, entro no modo de subcomando dessa interface e entre nos comandos de acesso ao modo switchport e nos comandos vlan20 de acesso ao switchport.  Depois disso, o sistema relata que o protocolo da linha de interface da VLAN20 mudou de estado para ativo.  O mesmo pode ser visto com o comando show int brief - ambos os elementos, a interface e seu protocolo est√£o em um estado ativado.  Portanto, se voc√™ tiver um problema com uma interface VLAN desativada, verifique primeiro o banco de dados de VLANs e verifique se h√° uma rede que corresponda a essa interface.  Se voc√™ vir um protocolo desativado, verifique se h√° tr√°fego ativo na rede, ou seja, se h√° alguma porta conectada a esta rede. <br><br>  Se observarmos as outras interfaces do switch, por exemplo, f0 / 5, veremos que o protocolo para essa interface est√° no estado inativo, porque nenhum tr√°fego √© observado nessa interface.  Por padr√£o, a porta √© desativada se nenhum dispositivo estiver conectado a ela e o protocolo n√£o est√° ativo, porque n√£o h√° tr√°fego nessa porta.  Portanto, se voc√™ perceber que o SVI est√° no estado inativo, verifique primeiro o que foi mencionado acima. <br>  Agora que nossos computadores t√™m endere√ßos IP e as portas do switch est√£o configuradas, verificaremos se o ping do PC0 passa para o PC1.  Obviamente, voc√™ n√£o pode executar ping no computador certo, porque os dispositivos ainda est√£o em diferentes redes VLAN10 e VLAN20. <br><br>  Para resolver esse problema, colocarei um dispositivo no circuito ao qual pode ser atribu√≠do um endere√ßo IP - um roteador e conectarei uma de suas interfaces √† porta do switch f0 / 3 com um cabo e conectarei a outra interface do roteador √† porta f0 / 4 com um segundo cabo.  Essa √© a conex√£o padr√£o para esses casos - tudo funcionar√° se eu conectar uma interface √† VLAN10 e a outra √† VLAN20.  Para n√£o perder tempo, pr√©-configurei as portas do roteador atribuindo endere√ßos IP a elas.  Para ver isso, irei √†s configura√ß√µes do console do roteador e digite o comando show ip int brief.  Agora, farei as altera√ß√µes necess√°rias digitando os comandos terminal de configura√ß√£o, int f0 / 3, acesso ao modo de porta de comuta√ß√£o e acesso √† porta de comuta√ß√£o vlan 10. Da mesma forma, configurarei a interface f0 / 4 para funcionar com a rede VLAN20. <br><br>  Vamos ver se o ping vai passar agora.  Voc√™ pode ver que as portas do comutador demoram algum tempo para voltar ao estado de tr√°fego ignorado - os marcadores laranja logo ficar√£o verdes.  Entro ping 192.168.20.1 na linha de comando PC0, mas o ping falha novamente.  O motivo √© o meu erro, porque n√£o criei um gateway nas configura√ß√µes de rede dos computadores.  Portanto, vou ao painel de configura√ß√µes e especifique o endere√ßo do gateway para o primeiro computador 192.168.10.10 e para o segundo - 192.168.20.10. <br><br><img src="https://habrastorage.org/webt/qk/xz/me/qkxzme8udtdgopncrtuz_bfmu8e.jpeg"><br><br>  Depois disso, o ping √© bem-sucedido e agora o PC0 e o PC1 podem se comunicar.  No entanto, como eu disse, com essa topologia de rede, estamos desperdi√ßando os recursos das portas do roteador - geralmente o roteador tem apenas duas portas, portanto, √© crime us√°-las dessa maneira.  Para usar com mais efici√™ncia os recursos do roteador, √© usado o conceito de Roteador no Stick, ou "roteador em um stick, um roteador em uma unidade flash".  Vamos voltar para um dos slides anteriores. <br><br><img src="https://habrastorage.org/webt/sp/9c/hc/sp9chcaueg3swye8nwdjsfiehds.jpeg"><br><br>  Se trabalharmos com o terceiro n√≠vel do modelo OSI, a palavra-chave nos comandos de configura√ß√£o ser√° "interface".  Ele coloca o sistema no modo de subcomando da interface, onde voc√™ pode especificar a configura√ß√£o no shutdown ou shutdown e verificar o resultado das configura√ß√µes da interface usando o comando show ip interface brief. <br><br>  Se trabalharmos com o n√≠vel 2 e, no caso de um switch, nada mais for do que um banco de dados de VLAN, o comando para inserir as configura√ß√µes de rede virtual n√£o conter√° a palavra-chave ‚Äúinterface‚Äù, mas come√ßar√° com a palavra ‚Äúvlan‚Äù com o n√∫mero correspondente redes, por exemplo, vlan 10. Depois de entrar no modo de subcomando, voc√™ pode nomear a rede criada com o comando name VLAN10.  Use o comando show vlan brief para verificar suas configura√ß√µes. <br><br>  Para garantir o roteamento entre duas redes, como j√° mencionado, conectamos os comutadores dessas redes a um roteador conectado a uma rede externa - a Internet. <br><br><img src="https://habrastorage.org/webt/wq/81/ei/wq81eiwsldjufkfj_mn9nf8dut4.jpeg"><br><br>  Com esse esquema, o computador n¬∫ 1 pode acessar a Internet ou se comunicar com computadores em outra rede.  Ou seja, se tivermos dois comutadores diferentes, cada um para sua pr√≥pria rede, para a comunica√ß√£o entre eles, voc√™ precisar√° de um dispositivo do terceiro n√≠vel do modelo OSI. <br><br>  Como eu disse, geralmente no escrit√≥rio √© usado um switch, dividido ao meio usando VLAN.  No diagrama, designarei duas VLANs diferentes - SALES azul e MARKETING vermelho.  Para usar esse m√©todo, voc√™ pode usar duas interfaces diferentes do roteador ou uma interface f0 / 0; no diagrama, √© uma coluna azul entre o roteador e o comutador.  Esse conceito √© chamado de sub-interface - a interface f0 / 0.10 √© atribu√≠da para servir a rede azul e f0 / 0.20 para a rede vermelha. <br><br><img src="https://habrastorage.org/webt/e3/wg/s7/e3wgs7t7m8s11tk0hmyabgyrsv4.jpeg"><br><br>  Suponha que tudo isso azul esteja conectado a uma interface do switch f0 / 1, os computadores da VLAN azul estejam conectados √†s interfaces f0 / 2 e f0 / 3 e os computadores da rede vermelha estejam conectados aos f0 / 4 ef0 / 5.  Nesse caso, f0 / 1 deve ser uma porta de tronco e um tronco deve ser criado entre o switch e o roteador, porque precisamos de todo o tr√°fego da VLAN10 e da VLAN20 para chegar ao roteador.  Nesse caso, podemos usar apenas uma interface do roteador, dividida em duas subinterfaces ou subinterfaces. <br><br>  As subinterfaces s√£o praticamente criadas no roteador com a adi√ß√£o de um ponto na designa√ß√£o da interface f√≠sica.  Para a subinterface f0 / 0.10, atribu√≠mos um endere√ßo IP a partir do intervalo de endere√ßos da VLAN10, e f0 / 0.20 recebe um endere√ßo IP a partir do intervalo de endere√ßos da rede VLAN20.  Observo que os n√∫meros ap√≥s o ponto na designa√ß√£o de subinterface n√£o precisam corresponder ao n√∫mero da VLAN.  Uso n√∫meros correspondentes apenas para fazer voc√™ entender melhor esse conceito.  Portanto, se o exame apresentar uma pergunta sobre algum tipo de problema e voc√™ achar que foi causado por uma incompatibilidade entre os n√∫meros da VLAN e as subinterfaces, desde que voc√™ aprendeu que os n√∫meros da rede devem corresponder, voc√™ estar√° errado!  Mais uma vez, observo - o n√∫mero da subinterface e a VLAN correspondente podem n√£o coincidir; isso √© normal; portanto, a causa dos problemas n√£o reside nisso. <br>  Portanto, quando o computador n¬∫ 1 da rede azul envia tr√°fego, chega √† porta do tronco do switch, onde √© encapsulado usando o protocolo .1q, ou seja, recebe a tag VLAN10 e √© enviado ao roteador pelo tronco.  O tr√°fego VLAN20 √© marcado da mesma maneira.  Mas o problema √© que, por padr√£o, o roteador n√£o entende o idioma .1q.  Portanto, devemos entrar nas configura√ß√µes do roteador e indicar para as subinterfaces que o encapsulamento usa .1q.  Feito isso, atribu√≠mos a eles endere√ßos IP dos intervalos de endere√ßos correspondentes das redes VLAN10 e VLAN20.  Assim que fizermos isso, a comunica√ß√£o entre as redes ser√° estabelecida. <br><br>  Vamos para o Packet Tracer, onde eu apago primeiro os SVIs criados anteriormente, entrando no modo de configura√ß√£o do comutador global e aplicando os comandos no int vlan 10 e no int vlan 20. Se voc√™ olhar a lista de interfaces depois disso, poder√° ver que as interfaces VLAN10 e VLAN20 desapareceram.  No segundo n√≠vel do modelo OSI, essas redes ainda est√£o no banco de dados VLAN, pois queremos us√°-las, mas sem as interfaces virtuais correspondentes. <br><br>  Em seguida, removo os 2 cabos que conectam o switch e o roteador e conecto o switch e o roteador com um cabo, pois utilizarei apenas uma porta do roteador f0 / 0. <br><br><img src="https://habrastorage.org/webt/s9/mm/ty/s9mmtyamqn-sf-jb1bk_d6n0tdq.jpeg"><br><br>  Agora vou para as configura√ß√µes do roteador, selecione a interface f0 / 0 e insiro o comando no ip address (sem um endere√ßo IP).  Voc√™ pode exibir uma lista de interfaces em que pode ver que o endere√ßo IP da interface FastEthernet0 / 0 n√£o est√° atribu√≠do, como na interface Vlan1, e o endere√ßo IP 192.168.20.10 √© usado na interface FastEthernet0 / 1. <br><br><img src="https://habrastorage.org/webt/gj/iz/og/gjizog_0wuadcf617dceupnaade.jpeg"><br><br>  Para usar o m√©todo "roteador em um stick", a interface f√≠sica n√£o deve estar no modo de desligamento.  Como voc√™ pode ver, o FastEthernet0 / 0 est√° no modo manual para cima, ent√£o est√° tudo certo.  Essa √© a primeira coisa que voc√™ precisa ter antes de usar o Router-on-s-Stick; a segunda √© que essa interface n√£o possui um endere√ßo IP. <br><br>  Em seguida, digite int f0 / 0 para entrar no modo de subcomando da interface e insira o comando f0 / 0,10 para criar a subinterface .10.  Se voc√™ agora examinar a lista de interfaces, poder√° ver que o sistema criou uma nova interface virtual FastEthernet0 / 0.10, que est√° no estado ligado. <br><br><img src="https://habrastorage.org/webt/ug/rs/oy/ugrsoyfd-abo7yzblfem-llzmb0.jpeg"><br><br>  Um ponto no nome indica que √© uma interface virtual, n√£o f√≠sica.  Em seguida, retornamos ao modo de configura√ß√µes globais e criamos a subinterface f0 / 0.20.  Agora vamos para as configura√ß√µes da nova subinterface f0 / 0.10, usando o comando int f0 / 0.10.  Voc√™ v√™ que o prompt da linha de comando assumiu a forma de subcomandos do roteador (config-subif) #.  Agora eu posso atribuir um endere√ßo IP a essa interface com o comando ip address 192.168.10.10 255.255.255.0.  Se eu pressionar ‚ÄúEnter‚Äù, o sistema exibir√° uma mensagem: ‚ÄúA configura√ß√£o do roteamento IP para a subinterface LAN s√≥ √© poss√≠vel se essa interface j√° estiver configurada como parte da IEEE 802.10, 802.1q ou ISL vLAN‚Äù.  Portanto, preciso inserir o comando para usar o encapsulamento usando o protocolo .1q para uma VLAN espec√≠fica, para a qual digito o encapsulamento dot1Q 10, em que 10 √© o n√∫mero da VLAN. <br><br><img src="https://habrastorage.org/webt/om/us/c7/omusc7o_mydv1t5iqywmscxek60.jpeg"><br><br>  Agora vou inserir o endere√ßo IP desejado e o sistema o aceitar√°.        f0/0.20 ‚Äì         IP- 192.168.20.10.  ,   IP-    f0/1,         no ip address.         f0/0.20,    ,    . <br><br>       PC0  ,      PC1.   ,     -,    .    ,  int f0/3     switchport mode trunk. ,        ,     VLAN10  VLAN20.    ,   ,  ,       !   ,   Router-on-a-Stick.     -    ,      .  ,     . <br><br> ,       ,         VLAN1.    ¬´¬ª  .     IP- 192.168.30.1,   255.255.255.0    192.168.30.10.  ,    PC2,  VLAN1,      VLAN10? <br><br><img src="https://habrastorage.org/webt/la/ge/_e/lage_e7xfreaxgjnfjb9ma_ab-s.jpeg"><br><br>     native VLAN,       ,      ?      2  ‚Äì   VLAN10,   VLAN20. <br><br><img src="https://habrastorage.org/webt/pz/oj/up/pzojuplzc-d_b1hy-0dhy-m_xhi.jpeg"><br><br>  2    .  ‚Äì          int f0/0.      ip address 192.168.30.10 255.255.255.0,       IP-.         PC2,      VLAN,        f0/0       . <br><br>   ,     192.168.10.1   PC2.         ,         PC0.  ,    ,   ,   .     ,       ‚Äì  Fa0/4,      PC2,     VLAN 20 SALES. <br><br><img src="https://habrastorage.org/webt/f3/t-/2y/f3t-2yzbnzlg0jt5ewlgpyduudw.jpeg"><br><br>         int f0/4, switchport mode access  switchport access vlan 1.   PC0  ,    ,       ,  ,       ,        PC2  . <br><br> ,    Native VLAN      IP-.       ‚Äì    IP-  f0/0 ‚Äì    .        ,   f0/0.30.            .1q      ¬´native¬ª: encapsulation dot1Q 1 native.       ,      native VLAN,     .       IP- 192.168.30.10 255.255.255.0    no shutdown. <br><br>  ,    .      PC2  ping 192.168.10.1,   ,   . <br><br>      .     ,     ,       3 .    ,    3-   OSI. <br><br><img src="https://habrastorage.org/webt/k3/2p/is/k32pisnmdl-kmjnaidfcpacxtdw.jpeg"><br><br>  3-        ,    VLAN. ,          ,  ,    Inter-VLAN    3- ,          .   3-       2-     3- . <br>      .      3   ‚Äì     ,  .    VLAN10  VLAN20       SVI.    ,       VLAN,      ,            VLAN     .      SVI     IP-     VLAN. <br><br><img src="https://habrastorage.org/webt/nb/3f/fx/nb3ffx8m-jzciutqgpurd5zsqza.jpeg"><br><br>     SVI  ,       .     ,       SVI   ROAS,    .    3-      SVI. <br><br>   Packet Tracer.            Cisco 3- ,         VLAN:  f0/1   VLAN10,  f0/2   VLAN20,       .   , VLAN1  PC2,    . <br><br><img src="https://habrastorage.org/webt/f4/wx/c4/f4wxc474bwjd_ozhdhtwziztxtu.jpeg"><br><br>    ,    SVI   VLAN1,     administratively down. <br><br>    3- ,      .     show ip route      ,    , , IP-   . <br><br><img src="https://habrastorage.org/webt/dy/kc/5l/dykc5lba_x3itqmqokxx04e6zug.jpeg"><br><br>            ip routing,      .     show ip rout,  ,      ,      SVI     VLAN10  VLAN20. <br><br><img src="https://habrastorage.org/webt/yr/nw/un/yrnwunrbm8cvh05hpvhn-bikova.jpeg"><br><br>     Packet Tracer   SVI.     ,    int vlan 10,   ip address 192.168.10.10 255.255.255.0  no shutdown.      , ,     IP-      VLAN10. <br><br>      int vlan 20, ip address 192.168.20.10 255.255.255.0  no shutdown.  ,      PC0  PC1   192.168.20.1.  ,  VLAN10        VLAN20,     3-       Inter-VLAN. <br><br>        VLAN1,          int vlan 1, n shutdown     IP-  ip address 192.168.30.10 255.255.255.0,   n shutdown.       PC2. <br><br>        , ,       ,            VLAN.      f0/4    VLAN40.    f0/4  IP-     VLAN40. <br><br><img src="https://habrastorage.org/webt/ju/vs/5z/juvs5zhe5kefbf-astocgzygffw.jpeg"><br><br>    3-      ,    access-,      VLAN. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim, a interconex√£o entre VLANs pode ser organizada de duas maneiras: usando um esquema ROAS ou um switch Cisco Layer 3. </font><font style="vertical-align: inherit;">Lembre-se de que no segundo caso, voc√™ precisa configurar o SVI e, no primeiro caso, isso n√£o √© necess√°rio.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Z7WM7wFTWrs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</a> na Holanda!</b>  <b><b>Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - a partir de US $ 99!</b></b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466435/">https://habr.com/ru/post/pt466435/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466425/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 37. STP: sele√ß√£o de Bridge Root, recursos de prote√ß√£o PortFast e BPDU. Parte 2</a></li>
<li><a href="../pt466427/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 38. Protocolo EtherChannel para OSI Layer 2</a></li>
<li><a href="../pt466429/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 39. Pilhas e agrega√ß√£o do chassi do switch</a></li>
<li><a href="../pt466431/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 40. Fam√≠lia padr√£o 802.1X e protocolo AAA</a></li>
<li><a href="../pt466433/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 41. VLAN nativa do DHCP Snooping e Nondefault</a></li>
<li><a href="../pt466437/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 43. Protocolos de Roteamento Dist√¢ncia do Vetor e Estado do Link</a></li>
<li><a href="../pt466439/index.html">Verifique voc√™ mesmo: quantas perguntas voc√™ pode responder √† ChGK?</a></li>
<li><a href="../pt466441/index.html">C√≥digo de bugs Python: 10 erros mais comuns que os desenvolvedores cometem</a></li>
<li><a href="../pt466443/index.html">ShIoTiny e o mundo: sensores anal√≥gicos ou ADCs para os menores</a></li>
<li><a href="../pt466445/index.html">Ataques entre rela√ß√µes de confian√ßa entre dom√≠nios</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>