<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüåæ ü•Ä ü•£ Estruturando aplica√ß√µes de rea√ß√£o üë©üèø‚Äçü§ù‚Äçüë®üèª ü•ì üë±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O material, cuja tradu√ß√£o publicamos hoje, revela as abordagens usadas por seu autor na estrutura√ß√£o de aplicativos React. Em particular, discutiremos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estruturando aplica√ß√µes de rea√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460793/">  O material, cuja tradu√ß√£o publicamos hoje, revela as abordagens usadas por seu autor na estrutura√ß√£o de aplicativos React.  Em particular, discutiremos aqui a estrutura de pastas usada, o nome das entidades, os locais onde os arquivos de teste est√£o localizados e outras coisas semelhantes. <br><br>  Um dos recursos mais agrad√°veis ‚Äã‚Äãdo React √© que essa biblioteca n√£o for√ßa o desenvolvedor a cumprir rigorosamente certas conven√ß√µes relacionadas √† estrutura do projeto.  Muito disso permanece a crit√©rio do programador.  Essa abordagem √© diferente da, digamos, adotada nas estruturas Ember.js ou Angular.  Eles oferecem aos desenvolvedores mais recursos padr√£o.  Essas estruturas fornecem conven√ß√µes sobre a estrutura de projetos e regras para nomear arquivos e componentes. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/k6/9y/ug/k69yugvbt27p3wtccvzeqrf_v4w.jpeg"></a> <br><br>  Pessoalmente, gosto da abordagem adotada pelo React.  O fato √© que eu prefiro controlar algo sozinho, sem depender de certos "acordos".  No entanto, existem muitas vantagens na abordagem de estrutura√ß√£o de projetos que a Angular oferece.  A escolha entre liberdade e regras mais ou menos r√≠gidas se resume ao que est√° mais perto de voc√™ e de sua equipe. <br><br>  Ao longo dos anos de trabalho com o React, tentei v√°rias maneiras diferentes de estruturar aplicativos.  Algumas das id√©ias que apliquei foram mais bem-sucedidas do que outras.  Portanto, aqui vou falar sobre tudo que se mostrou bem na pr√°tica.  Espero que voc√™ encontre aqui algo que seja √∫til para voc√™. <br><a name="habracut"></a><br>  N√£o estou tentando mostrar aqui uma maneira "apenas correta" de estruturar aplicativos.  Voc√™ pode pegar algumas das minhas id√©ias e alter√°-las para atender √†s suas necessidades.  Voc√™ pode discordar de mim continuando a trabalhar como antes.  Equipes diferentes criam aplicativos diferentes e usam meios diferentes para atingir seus objetivos. <br><br>  √â importante observar que, se voc√™ olhar para o site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Thread</a> , do qual participo no desenvolvimento, e para o dispositivo de sua interface, encontrar√° lugares em que essas regras sobre as quais falarei n√£o s√£o respeitadas.  O fato √© que quaisquer "regras" na programa√ß√£o devem ser tomadas apenas como recomenda√ß√µes e n√£o como padr√µes abrangentes v√°lidos em qualquer situa√ß√£o.  E se voc√™ acha que algum tipo de ‚Äúregra‚Äù n√£o combina com voc√™, voc√™, com o objetivo de melhorar a qualidade do que est√° trabalhando, deve encontrar for√ßas para se desviar dessas ‚Äúregras‚Äù. <br><br>  Na verdade, agora, sem mais delongas, ofere√ßo minha hist√≥ria sobre a estrutura√ß√£o de aplicativos React. <br><br><h2>  <font color="#3AC1EF">N√£o se preocupe muito com as regras.</font> </h2><br>  Talvez voc√™ decida que a recomenda√ß√£o de que voc√™ n√£o se preocupa muito com as regras parece estranha no in√≠cio de nossa conversa.  Mas √© exatamente isso que quero dizer quando digo que o principal erro que os programadores t√™m em termos de observa√ß√£o das regras √© que os programadores atribuem muita import√¢ncia √†s regras.  Isto √© especialmente verdade no in√≠cio do trabalho em um novo projeto.  No momento da cria√ß√£o do primeiro <code>index.jsx</code> simplesmente imposs√≠vel saber o que √© melhor para este projeto.  √Ä medida que o projeto se desenvolve, voc√™ naturalmente encontrar√° algum tipo de estrutura de arquivos e pastas, o que provavelmente ser√° muito bom para esse projeto.  Se, durante a continua√ß√£o do trabalho, a estrutura existente n√£o for bem-sucedida, ela poder√° ser melhorada. <br><br>  Se voc√™ ler isso e se achar pensando que n√£o h√° nada em seu aplicativo que esteja sendo discutido, isso n√£o ser√° um problema.  Cada aplicativo √© √∫nico, n√£o h√° duas equipes de desenvolvimento absolutamente id√™nticas.  Portanto, cada equipe, trabalhando em um projeto, chega a alguns acordos em rela√ß√£o √† sua estrutura e m√©todos de trabalho.  Isso ajuda os membros da equipe a trabalhar produtivamente.  N√£o se esforce para, depois de aprender como algu√©m est√° fazendo algo, apresente isso imediatamente.  N√£o tente introduzir em seu trabalho o que √© chamado em certos materiais e, mesmo assim, a "maneira mais eficaz" de resolver um problema.  Sempre adotei e adotei a estrat√©gia a seguir em rela√ß√£o a essas recomenda√ß√µes.  Eu tenho meu pr√≥prio conjunto de regras, mas lendo sobre como os outros agem em determinadas situa√ß√µes, escolho o que me parece bem-sucedido e adequado para mim.  Isso leva ao fato de que, com o tempo, meus m√©todos de trabalho melhoram.  Ao mesmo tempo, n√£o tenho choques e n√£o h√° desejo de reescrever tudo do zero. <br><br><h2>  <font color="#3AC1EF">Componentes importantes est√£o localizados em pastas separadas</font> </h2><br>  A abordagem para colocar arquivos de componentes nas pastas em que cheguei √© que os componentes que podem ser considerados "importantes", "b√°sicos", "principais" no contexto do aplicativo s√£o colocados em pastas separadas.  Essas pastas, por sua vez, est√£o localizadas na pasta de <code>components</code> .  Por exemplo, se estamos falando de um aplicativo para uma loja de eletr√¥nicos, o componente <code>&lt;Product&gt;</code> usado para descrever o produto pode ser reconhecido como um componente semelhante.  Aqui est√° o que eu quero dizer: <br><br><pre> <code class="plaintext hljs">- src/  - components/    - product/      - product.jsx      - product-price.jsx    - navigation/      - navigation.jsx    - checkout-flow/      - checkout-flow.jsx</code> </pre> <br>  Nesse caso, os componentes "secund√°rios" usados ‚Äã‚Äãapenas por determinados componentes "principais" est√£o localizados na mesma pasta que esses componentes "principais".  Essa abordagem se provou na pr√°tica.  O fato √© que, devido √† sua aplica√ß√£o, uma certa estrutura aparece no projeto, mas o n√≠vel de aninhamento de pastas n√£o √© muito grande.  Sua aplica√ß√£o n√£o leva √† apar√™ncia de algo como <code>../../../</code> nos comandos de importa√ß√£o de componentes, n√£o dificulta a movimenta√ß√£o pelo projeto.  Essa abordagem permite criar uma hierarquia clara de componentes.  Esse componente, cujo nome corresponde ao nome da pasta, √© considerado "b√°sico".  Outros componentes localizados na mesma pasta servem para dividir o componente "base" em partes, o que simplifica o trabalho com o c√≥digo desse componente e seu suporte. <br><br>  Embora eu seja um defensor da presen√ßa de uma certa estrutura de pastas no projeto, acredito que o mais importante √© a sele√ß√£o de bons nomes de arquivos.  As pr√≥prias pastas s√£o menos importantes. <br><br><h2>  <font color="#3AC1EF">Usando subpastas para subcomponentes</font> </h2><br>  Uma das desvantagens da abordagem acima √© que seu uso pode levar ao aparecimento de pastas de componentes "b√°sicos" que cont√™m muitos arquivos.  Considere, por exemplo, o componente <code>&lt;Product&gt;</code> .  Arquivos CSS ser√£o anexados a ele (falaremos sobre eles mais adiante), arquivos de teste, muitos subcomponentes e, possivelmente, outros recursos - como imagens e √≠cones SVG.  Esta lista de "adi√ß√µes" n√£o √© limitada.  Tudo isso cair√° na mesma pasta que o componente "base". <br><br>  Eu realmente n√£o me importo com isso.  Isso serve para mim se os arquivos tiverem nomes bem pensados ‚Äã‚Äãe se puderem ser encontrados com facilidade (usando as ferramentas de busca de arquivos no editor).  Nesse caso, a estrutura da pasta desaparece em segundo plano.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui est√° um</a> tweet sobre este t√≥pico. <br><br>  No entanto, se voc√™ preferir que seu projeto tenha uma estrutura mais extensa, n√£o h√° nada dif√≠cil em mover subcomponentes para suas pr√≥prias pastas: <br><br><pre> <code class="javascript hljs">- src/  - components/    - product/      - product.jsx      - ...      - product-price/        - product-price.jsx</code> </pre> <br><h2>  <font color="#3AC1EF">Os arquivos de teste est√£o localizados no mesmo local que os arquivos dos componentes sob teste.</font> </h2><br>  Come√ßamos esta se√ß√£o com uma recomenda√ß√£o simples, que √© a de que os arquivos de teste devem ser colocados no mesmo local que os arquivos com o c√≥digo que foram verificados com a ajuda deles.  Tamb√©m falarei sobre como prefiro estruturar os componentes, tentando garantir que eles fiquem pr√≥ximos um do outro.  Mas agora posso dizer que acho conveniente colocar os arquivos de teste nas mesmas pastas que os arquivos de componentes.  Nesse caso, os nomes dos arquivos com os testes s√£o id√™nticos aos nomes dos arquivos com o c√≥digo.  <code>.test</code> nomes dos testes, antes da extens√£o do nome do arquivo, o sufixo <code>.test</code> adicionado apenas: <br><br><ul><li>  Nome do arquivo do componente: <code>auth.js</code> </li><li>  Nome do arquivo de teste: <code>auth.test.js</code> </li></ul><br>  Essa abordagem tem v√°rios pontos fortes: <br><br><ul><li>  Isso facilita a localiza√ß√£o de arquivos de teste.  √Ä primeira vista, voc√™ pode entender se h√° um teste para o componente com o qual estou trabalhando. </li><li>  Todos os comandos de importa√ß√£o necess√°rios s√£o muito simples.  No teste, para importar o c√≥digo testado, voc√™ n√£o precisa criar estruturas que descrevam, por exemplo, a sa√≠da da pasta <code>__tests__</code> .  Essas equipes parecem extremamente simples.  Por exemplo, assim: <code>import Auth from './auth'</code> . </li></ul><br>  Se tivermos alguns dados usados ‚Äã‚Äãdurante o teste, por exemplo, algo como zombarias de solicita√ß√µes de API, os colocaremos na mesma pasta em que o componente e seu teste j√° est√£o.  Quando tudo o que √© necess√°rio est√° em uma pasta, isso contribui para o crescimento da produtividade.  Por exemplo, se voc√™ usar uma estrutura de pastas ramificadas e o programador tiver certeza de que existe um determinado arquivo, mas n√£o conseguir lembrar o nome, o programador precisar√° procurar esse arquivo em v√°rios subdiret√≥rios.  Com a abordagem proposta, basta olhar para o conte√∫do de uma pasta e tudo ficar√° claro. <br><br><h2>  <font color="#3AC1EF">M√≥dulos CSS</font> </h2><br>  Eu sou um grande f√£ de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≥dulos CSS</a> .  Descobrimos que eles s√£o √≥timos para criar regras modulares de CSS para componentes. <br><br>  Al√©m disso, gosto muito da tecnologia de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">componentes</a> com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estilo</a> .  No entanto, no decorrer do trabalho em projetos nos quais muitos desenvolvedores participaram, verificou-se que a presen√ßa de arquivos CSS reais no projeto aumenta a usabilidade. <br><br>  Como voc√™ provavelmente j√° adivinhou, nossos arquivos CSS est√£o localizados, como outros arquivos, ao lado dos arquivos componentes, nas mesmas pastas.  Isso simplifica bastante o movimento entre arquivos quando voc√™ precisa entender rapidamente o significado de uma classe. <br><br>  Uma recomenda√ß√£o mais geral, cuja ess√™ncia permeia todo esse material, √© que todo o c√≥digo relacionado a um determinado componente seja mantido na mesma pasta em que esse componente est√° localizado.  Longe v√£o os dias em que pastas separadas foram usadas para armazenar c√≥digo CSS e JS, c√≥digo de teste e outros recursos.  O uso de estruturas complexas de pastas complica o movimento entre arquivos e n√£o tem nenhum benef√≠cio √≥bvio, exceto pelo fato de ajudar a "organizar o c√≥digo".  Mantenha os arquivos interconectados na mesma pasta - isso significa gastar menos tempo movendo-se entre as pastas durante o trabalho. <br><br>  At√© criamos um carregador Webpack para CSS, cujos recursos correspondem aos recursos de nosso trabalho.  Ele verifica os nomes de classe declarados e gera um erro no console se nos referirmos a uma classe que n√£o existe. <br><br><h2>  <font color="#3AC1EF">Quase sempre, apenas um c√≥digo de componente √© colocado em um arquivo</font> </h2><br>  Minha experi√™ncia mostra que os programadores geralmente aderem estritamente √† regra de que o c√≥digo para um e apenas um componente React deve estar em um arquivo.  Ao mesmo tempo, apoio totalmente a id√©ia de que n√£o vale a pena colocar muitos componentes em um arquivo (imagine as dificuldades de nomear esses arquivos!).  Mas acredito que n√£o h√° nada errado em colocar o c√≥digo de um determinado componente "grande" e o c√≥digo do componente "pequeno" associado a ele no mesmo arquivo.  Se esse movimento ajudar a preservar a pureza do c√≥digo, se o componente "pequeno" n√£o for muito grande para coloc√°-lo em um arquivo separado, isso n√£o prejudicar√° ningu√©m. <br><br>  Por exemplo, se eu criar um componente <code>&lt;Product&gt;</code> e precisar de um pequeno peda√ßo de c√≥digo para exibir o pre√ßo, posso fazer isso: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Price = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ price, currency }</span></span></span><span class="hljs-function">) =&gt;</span></span> (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    {currency}    {formatPrice(price)}  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Product = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> {  <span class="hljs-comment"><span class="hljs-comment">// ,      !  return (    &lt;div&gt;      &lt;Price price={props.price} currency={props.currency} /&gt;      &lt;div&gt;loads more stuff...&lt;/div&gt;    &lt;/div&gt;  ) }</span></span></code> </pre> <br>  A coisa boa dessa abordagem √© que eu n√£o precisei criar um arquivo separado para o componente <code>&lt;Price&gt;</code> e que esse componente esteja dispon√≠vel exclusivamente para o componente <code>&lt;Product&gt;</code> .  Como n√£o exportamos esse componente, ele n√£o pode ser importado para outro local do aplicativo.  Isso significa que, quando perguntado se deve colocar <code>&lt;Price&gt;</code> em um arquivo separado, voc√™ pode dar uma resposta clara e positiva se precisar import√°-lo para outro lugar.  Caso contr√°rio, voc√™ pode fazer isso sem colocar o c√≥digo <code>&lt;Price&gt;</code> em um arquivo separado. <br><br><h2>  <font color="#3AC1EF">Pastas separadas para componentes universais</font> </h2><br>  Recentemente, usamos componentes universais.  Eles, de fato, formam nosso sistema de design (que planejamos publicar um dia), mas at√© agora come√ßamos pequenos - com componentes como <code>&lt;Button&gt;</code> e <code>&lt;Logo&gt;</code> .  Um componente √© considerado "universal" se n√£o estiver vinculado a uma parte espec√≠fica do site, mas √© um dos elementos b√°sicos da interface do usu√°rio. <br><br>  Componentes semelhantes est√£o localizados em sua pr√≥pria pasta ( <code>src/components/generic</code> ).  Isso simplifica bastante o trabalho com todos os componentes universais.  Eles est√£o em um s√≥ lugar - √© muito conveniente.  Com o tempo, √† medida que o projeto cresce, planejamos desenvolver um guia de estilo (somos grandes f√£s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">react-styleguidist</a> ) para simplificar ainda mais o trabalho com componentes universais. <br><br><h2>  <font color="#3AC1EF">Usando aliases para importar entidades</font> </h2><br>  A estrutura de pastas relativamente plana em nossos projetos garante que os comandos de importa√ß√£o n√£o tenham estruturas muito longas como <code>../../</code> .  Mas √© dif√≠cil ficar sem eles.  Portanto, usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">babel-plugin-module-resolvedor</a> para configurar aliases que simplificam os comandos de importa√ß√£o. <br><br>  Voc√™ pode fazer o mesmo com o Webpack, mas, gra√ßas ao plug-in Babel, os mesmos comandos de importa√ß√£o podem funcionar em testes. <br><br>  Configuramos isso com um par de aliases: <br><br><pre> <code class="javascript hljs">{  <span class="hljs-attr"><span class="hljs-attr">components</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/components'</span></span>,  <span class="hljs-string"><span class="hljs-string">'^generic/([\\w_]+)'</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/components/generic/\\1/\\1'</span></span>, }</code> </pre> <br>  O primeiro √© extremamente simples.  Permite importar qualquer componente, iniciando o comando com a palavra <code>components</code> .  Na abordagem normal, os comandos de importa√ß√£o s√£o mais ou menos assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Product <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../components/product/product'</span></span></code> </pre> <br>  Em vez disso, podemos escrev√™-los assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Product <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'components/product/product'</span></span></code> </pre> <br>  Ambos os comandos importam o mesmo arquivo.  Isso √© muito conveniente, pois permite que voc√™ n√£o pense na estrutura da pasta. <br><br>  O segundo alias √© um pouco mais complicado: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'^generic/([\\w_]+)'</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/components/generic/\\1/\\1'</span></span>,</code> </pre> <br>  N√≥s usamos regex aqui.  Ele encontra comandos de importa√ß√£o que come√ßam com <code>generic</code> (o sinal <code>^</code> no in√≠cio da express√£o permite selecionar apenas os comandos que come√ßam com <code>generic</code> ) e captura o que √© depois de <code>generic/</code> no grupo.  Depois disso, usamos o fragmento capturado ( <code>\\1</code> ) na constru√ß√£o <code>./src/components/generic/\\1/\\1</code> . <br><br>  Como resultado, podemos usar os comandos de importa√ß√£o para componentes universais desse tipo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'generic/button'</span></span></code> </pre> <br>  Eles s√£o convertidos para os seguintes comandos: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'src/components/generic/button/button'</span></span></code> </pre> <br>  Este comando, por exemplo, serve para importar um arquivo JSX que descreve um bot√£o universal.  Fizemos tudo isso porque essa abordagem simplifica bastante a importa√ß√£o de componentes universais.  Al√©m disso, ser√° √∫til se decidirmos alterar a estrutura dos arquivos do projeto (isso, conforme nosso sistema de design est√° crescendo, √© bem poss√≠vel). <br><br>  Aqui, gostaria de observar que voc√™ deve ter cuidado ao trabalhar com pseud√¥nimos.  Se voc√™ tiver apenas alguns deles, e eles foram projetados para resolver problemas de importa√ß√£o padr√£o, tudo est√° bem.  Mas se voc√™ tiver muitos deles, eles podem trazer mais confus√£o do que benef√≠cios. <br><br><h2>  <font color="#3AC1EF">Pasta lib universal para utilit√°rios</font> </h2><br>  Gostaria de recuperar todo o tempo que gastei tentando encontrar o lugar perfeito para o c√≥digo que n√£o √© o componente.  Compartilhei tudo isso de acordo com princ√≠pios diferentes, destacando o c√≥digo de utilit√°rios, servi√ßos e fun√ß√µes auxiliares.  Tudo isso tem tantos nomes que eu n√£o vou mencionar todos eles.  Agora n√£o estou tentando descobrir a diferen√ßa entre o "utilit√°rio" e a "fun√ß√£o auxiliar" para encontrar o lugar certo para um determinado arquivo.  Agora eu uso uma abordagem muito mais simples e compreens√≠vel: tudo isso cai em uma √∫nica pasta <code>lib</code> . <br><br>  A longo prazo, o tamanho dessa pasta pode ser t√£o grande que voc√™ precisar√° estrutur√°-la de alguma forma, mas isso √© completamente normal.  √â sempre mais f√°cil equipar algo com uma certa estrutura do que se livrar de erros de estrutura excessiva. <br><br>  No nosso projeto Thread, a pasta <code>lib</code> cont√©m cerca de 100 arquivos.  Eles s√£o divididos aproximadamente igualmente em arquivos que cont√™m a implementa√ß√£o de certos recursos e em arquivos de teste.  N√£o causou nenhuma dificuldade em encontrar os arquivos necess√°rios.  Gra√ßas aos <code>lib/name_of_thing</code> pesquisa inteligentes incorporados √† maioria dos editores, quase sempre preciso digitar algo como <code>lib/name_of_thing</code> , e o que eu preciso √© encontrado. <br><br>  Al√©m disso, temos um alias que simplifica a importa√ß√£o da pasta <code>lib</code> , permitindo que voc√™ use comandos desse tipo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> formatPrice <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lib/format_price'</span></span></code> </pre> <br>  N√£o se assuste com as estruturas de pastas simples que podem causar o armazenamento de v√°rios arquivos em uma pasta.  Normalmente, essa estrutura √© tudo o que √© necess√°rio para um determinado projeto. <br><br><h2>  <font color="#3AC1EF">Ocultando bibliotecas de terceiros por tr√°s de APIs nativas</font> </h2><br>  Eu realmente gosto do sistema de monitoramento de bugs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sentry</a> .  Eu costumava us√°-lo no desenvolvimento de partes de aplicativos para servidor e cliente.  Com sua ajuda, voc√™ pode capturar exce√ß√µes e receber notifica√ß√µes sobre sua ocorr√™ncia.  Essa √© uma √≥tima ferramenta que nos permite acompanhar os problemas encontrados no site. <br><br>  Sempre que uso uma biblioteca de terceiros em meu projeto, penso em como faz√™-lo para que, se necess√°rio, possa ser substitu√≠do o mais facilmente poss√≠vel por outra coisa.  Freq√ºentemente, como no mesmo sistema Sentry de que realmente gostamos, isso n√£o √© necess√°rio.  Mas, apenas no caso, nunca √© demais pensar em uma maneira de evitar o uso de um determinado servi√ßo ou em uma maneira de alter√°-lo para outra coisa. <br><br>  A melhor solu√ß√£o para esse problema √© desenvolver sua pr√≥pria API que oculte as ferramentas de outras pessoas.  Isso √© como criar um m√≥dulo <code>lib/error-reporting.js</code> que exporta a fun√ß√£o <code>reportError()</code> .  O n√∫cleo deste m√≥dulo usa o Sentry.  Mas o Sentry √© importado diretamente apenas neste m√≥dulo e em nenhum outro lugar.  Isso significa que substituir o Sentry por outra ferramenta parecer√° muito simples.  Para fazer isso, basta alterar um arquivo em um s√≥ lugar.  Enquanto a API p√∫blica desse arquivo permanecer inalterada, o restante do projeto nem saber√° que, ao chamar <code>reportError()</code> , n√£o √© o Sentry que √© usado, mas outra coisa. <br><br>  Observe que a API p√∫blica do m√≥dulo √© chamada de fun√ß√µes que ele exporta e seus argumentos.  Eles tamb√©m s√£o chamados de interface p√∫blica do m√≥dulo. <br><br><h2>  <font color="#3AC1EF">Usando PropTypes (ou ferramentas como TypeScript ou Flow)</font> </h2><br>  Quando fa√ßo programa√ß√£o, penso em tr√™s vers√µes de mim mesmo: <br><br><ul><li>  Jack do passado e o c√≥digo que ele escreveu (√†s vezes c√≥digo duvidoso). </li><li>  Jack de hoje e o c√≥digo que ele escreve agora. </li><li>  Jack do futuro.  Quando penso nesse futuro, pergunto a mim mesmo o presente sobre como escrever c√≥digo que facilitar√° minha vida no futuro. </li></ul><br>  Pode parecer estranho, mas achei √∫til, pensando em como escrever c√≥digo, fa√ßa a seguinte pergunta: "Como ser√° percebido em seis meses?". <br><br>  Uma maneira simples de se apresentar e ser mais produtivo √© especificar os tipos de propriedades ( <code>PropTypes</code> ) usadas pelos componentes.  Isso economizar√° tempo procurando poss√≠veis erros de digita√ß√£o.  Isso o proteger√° de situa√ß√µes nas quais, usando o componente, s√£o aplicadas propriedades dos tipos errados ou elas esquecem completamente a transfer√™ncia de propriedades.  No nosso caso, a <a href="">regra eslint-react / prop-types</a> √© um bom lembrete da necessidade de usar <code>PropTypes</code> . <br><br>  Se voc√™ for ainda mais longe, √© recomend√°vel descrever as propriedades com a maior precis√£o poss√≠vel.  Por exemplo, voc√™ pode fazer isso: <br><br><pre> <code class="javascript hljs">blogPost: PropTypes.object.isRequired</code> </pre> <br>  Mas seria muito melhor fazer isso: <br><br><pre> <code class="javascript hljs">blogPost: PropTypes.shape({  <span class="hljs-attr"><span class="hljs-attr">id</span></span>: PropTypes.number.isRequired,  <span class="hljs-attr"><span class="hljs-attr">title</span></span>: PropTypes.string.isRequired,  <span class="hljs-comment"><span class="hljs-comment">//    }).isRequired</span></span></code> </pre> <br>  No primeiro exemplo, a verifica√ß√£o m√≠nima necess√°ria √© executada.  No segundo, o desenvolvedor recebe informa√ß√µes muito mais √∫teis.  Eles ser√£o muito √∫teis, por exemplo, se algu√©m se esquecer de um determinado campo usado no objeto. <br><br><h2>  <font color="#3AC1EF">Bibliotecas de terceiros s√£o usadas apenas quando s√£o realmente necess√°rias.</font> </h2><br>  Essa dica √© mais relevante do que nunca com o advento dos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ganchos React</a> .  Por exemplo, eu participei de uma grande altera√ß√£o de uma das partes do site Thread e decidi prestar aten√ß√£o especial ao uso de bibliotecas de terceiros.  ,       ,          .   (   ),  .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ,      React-.      ‚Äî  ,    ,   React  API Context,        . <br><br> ,  ,  Redux,    .       ,      (            ,     ). ,           ,   ,           . <br><br><h2> <font color="#3AC1EF">   </font> </h2><br>   ‚Äî   ,       ,   .      . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     emitter.send('user_add_to_cart') //     emitter.on('user_add_to_cart', () =&gt; {  //  -  })</span></span></code> </pre> <br>      ,            .     ,             .      ,   ¬´   ¬ª.   ,      ,   ,    .         . ¬´¬ª      - ,       .  ,    ,        . <br><br>      Redux.       .     ,  .  ,     ,  <code>user_add_to_cart</code> ,   .       .  , ,       Redux,      .     ,    Redux    ,     . <br><br>  ,       ,   ,  ,     : <br><br><ul><li>  ,   , .         . </li><li>  ,  ,   .       ,    . </li><li>  ,  -  , . ,     ,    . </li></ul><br>    - ,    .    ,        ,   .      ,        ,   ,           ¬´¬ª . <br><br>       ,       ,  API Context  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">-</a> . <br><br><h2> <font color="#3AC1EF">     </font> </h2><br>         ,    (, ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> ).     :    ,      . <br><br> ,    ,          ,     .        : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = mount(  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">UserAuth.Provider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ComponentUnderTest</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">UserAuth.Provider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> )</span></span></code> </pre> <br>      : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapper = mountWithAuth(ComponentUnderTest, {  <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'Jack'</span></span>,  <span class="hljs-attr"><span class="hljs-attr">userId</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, })</code> </pre> <br>       : <br><br><ul><li>     .       ‚Äî     ,     ,   ,      . </li><li>      ‚Äî    <code>mountWithAuth</code>       .    ,          . </li></ul><br>   ,           <code>test-utils.js</code> . ,       ‚Äî   .       . <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>       .     ,     , ,  ,      .         ,  ,              .        ,   :       .               .           -     ,   . <br><br>  <b>Caros leitores!</b>     React-? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt460793/">https://habr.com/ru/post/pt460793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt460777/index.html">Esta √© a vez: por que a Apple mudou os requisitos para desenvolvedores de aplicativos</a></li>
<li><a href="../pt460779/index.html">Depura√ß√£o avan√ßada</a></li>
<li><a href="../pt460783/index.html">Consenso sobre a reputa√ß√£o do n√≥. √â necess√°rio?</a></li>
<li><a href="../pt460785/index.html">Aplicativos para e-books no sistema operacional Android. Parte 1. Introdu√ß√£o e aplicativos de escrit√≥rio</a></li>
<li><a href="../pt460789/index.html">Finalmente, rejuvenescimento √© uma coisa</a></li>
<li><a href="../pt460795/index.html">12 dicas para melhorar o desempenho do aplicativo JavaScript</a></li>
<li><a href="../pt460797/index.html">Desenvolvimento de JavaScript respons√°vel, parte 2</a></li>
<li><a href="../pt460799/index.html">Solicita√ß√£o de pagamento da API do navegador padr√£o</a></li>
<li><a href="../pt460801/index.html">27 ferramentas incr√≠veis do VS Code para desenvolvedores modernos de JavaScript</a></li>
<li><a href="../pt460803/index.html">Leitura para o ver√£o: livros para t√©cnicos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>