<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì† üë®‚Äçüé® üë©‚Äç‚öïÔ∏è Software de c√≥digo aberto para LMS: como o software gratuito ajuda a administrar sistemas cr√≠ticos de neg√≥cios na VTB üë©‚Äçüé§ üïµüèø üëÉüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O sistema de suporte a documenta√ß√£o em nosso banco est√° em constante evolu√ß√£o e escala, enquanto os requisitos de velocidade e toler√¢ncia a falhas est...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Software de c√≥digo aberto para LMS: como o software gratuito ajuda a administrar sistemas cr√≠ticos de neg√≥cios na VTB</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vtb/blog/475572/">  O sistema de suporte a documenta√ß√£o em nosso banco est√° em constante evolu√ß√£o e escala, enquanto os requisitos de velocidade e toler√¢ncia a falhas est√£o apenas aumentando.  Em algum momento, a manuten√ß√£o do LMS sem um monitoramento centralizado eficaz tornou-se muito arriscada.  Para proteger os processos de neg√≥cios na VTB e simplificar o trabalho dos administradores, implementamos uma solu√ß√£o baseada em uma pilha de tecnologias abertas.  Com isso, podemos responder proativamente a incidentes, evitando poss√≠veis problemas.  Under the cut - uma hist√≥ria sobre nossa experi√™ncia no uso de software livre para monitorar sistemas de neg√≥cios em larga escala. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b05/e47/4d9/b05e474d91c2dfee13074c81bad76950.jpg"><br><a name="habracut"></a><br><h2>  Por que monitorar um sistema de fluxo de trabalho </h2><br>  Desde 2005, o sistema de documenta√ß√£o do VTB Bank √© ‚Äúgerenciado‚Äù pelo sistema CompanyMedia.  O SDO emprega mais de 60 mil usu√°rios que mensalmente criam mais de um milh√£o de novos documentos.  Nossos servidores devem operar 24 horas por dia: em quase qualquer momento, existem 2500-3000 pessoas no sistema que se conectam em todo o pa√≠s, de Petropavlovsk-Kamchatsky a Kaliningrad.  Cada segundo da opera√ß√£o do LMS √© de 10 a 15 altera√ß√µes. <br><br>  Para que o sistema cumpra claramente as tarefas atribu√≠das a ele, implantamos uma infraestrutura tolerante a falhas usando servidores proxy, balanceamento de consultas, prote√ß√£o de informa√ß√µes, pesquisa de texto completo, rotas de integra√ß√£o e backups.  Enormes recursos s√£o necess√°rios para apoiar e administrar um projeto dessa magnitude.  Administradores 24 horas monitoram informa√ß√µes b√°sicas sobre a opera√ß√£o de servidores, carregamento de RAM, tempo do processador, subsistema de entrada e sa√≠da e assim por diante.  Mas, al√©m disso, s√£o necess√°rias an√°lises mais sutis: <br><br><ul><li>  C√°lculo do tempo gasto na execu√ß√£o de cen√°rios de neg√≥cios; <br></li><li>  rastrear a din√¢mica do desempenho do sistema e carregar nele; <br></li><li>  Procure desvios nos componentes do sistema em rela√ß√£o aos requisitos n√£o funcionais aprovados. <br></li></ul><br>  11 anos ap√≥s a introdu√ß√£o do LMS, a quest√£o da resposta proativa a v√°rios tipos de erros surgiu de maneira especialmente acentuada.  A administra√ß√£o do banco percebeu que trabalhar sem monitores e o console da vida do sistema √© brincar com fogo: a menor falha em um sistema comercial desse n√≠vel est√° repleta de milh√µes de perdas. <br><br>  Em 2016, come√ßamos a introduzir ferramentas para a r√°pida identifica√ß√£o de problemas no funcionamento do LMS, inclusive para monitorar par√¢metros em tempo real que nos interessam.  Anteriormente, o sistema de monitoramento de aplicativos era implantado e testado na estrutura da infraestrutura da empresa InterTrust. <br><br><h2>  Como tudo come√ßou </h2><br>  Hoje, um sistema centralizado de monitoramento de aplicativos para VTB SDO baseado em software de c√≥digo aberto ajuda a evitar a maioria dos erros associados ao gerenciamento de documentos, classifica problemas com rapidez e precis√£o e responde rapidamente a qualquer incidente.  Inclui dois subsistemas: <br><br><ul><li>  para monitorar a infraestrutura de TI dos servi√ßos do sistema; <br></li><li>  monitorar a ocorr√™ncia de erros no trabalho do LMS. <br></li></ul><br>  Tudo come√ßou com o √∫nico aplicativo de monitoramento gratuito.  Ap√≥s analisar v√°rias op√ß√µes, optamos pelo software livre Zabbix, originalmente escrito para servi√ßos e equipamentos banc√°rios.  Este sistema baseado na Web PHP, que pode armazenar dados no MySQL, PostgreSQL, SQLite ou Oracle Database, atende perfeitamente √†s nossas necessidades. <br><br>  O Zabbix executa seus agentes em cada servidor e coleta informa√ß√µes sobre as m√©tricas de interesse em tempo real em um √∫nico banco de dados.  Usando o aplicativo, √© conveniente coletar dados sobre a carga nos processadores e RAM, sobre o uso da rede e outros componentes, verificar a disponibilidade e a rea√ß√£o dos servi√ßos padr√£o (SMTP ou HTTP), executar programas externos e oferecer suporte ao monitoramento via SNMP. <br><br>  Ao implantar o Zabbix, configuramos m√©tricas de hardware padr√£o e, a princ√≠pio, isso foi suficiente.  Mas o VTB SDO est√° em constante evolu√ß√£o e crescimento: em 2016, o n√∫mero de servidores aumentou notavelmente, surgiram os processos de migra√ß√£o, o Banco de Moscou, a VTB Capital e o VTB24 conectados ao sistema.  Existem menos m√©tricas padr√£o e ensinamos o Zabbix a rastrear informa√ß√µes sobre a presen√ßa de filas em cada um dos volumes conectados ao servidor (na caixa do Zabbix, reflete apenas a fila de disco geral), bem como sobre o tempo necess√°rio para processar um procedimento espec√≠fico. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3e/e05/b67/d3ee05b67fa8025031b1814ea975fbc5.jpg"><br><br>  Al√©m disso, equipamos o sistema com v√°rios gatilhos - as condi√ß√µes sob as quais uma notifica√ß√£o √© enviada ao administrador (mensagem para Telegram, SMS para um n√∫mero de telefone ou e-mail).  Os gatilhos s√£o personaliz√°veis ‚Äã‚Äãpara qualquer conjunto de par√¢metros.  Por exemplo, voc√™ pode especificar uma certa porcentagem de espa√ßo livre em disco e o sistema notificar√° o administrador quando o limite especificado for atingido ou informar√° se algum procedimento em segundo plano demora mais que o normal. <br><br><h2>  Conectividade Java e visualiza√ß√£o de dados </h2><br>  Expandimos significativamente a gama de dados analisados, mas logo isso n√£o foi suficiente para um monitoramento eficaz.  Aproveitando o fato de que o CompanyMedia DLS √© um aplicativo Java, nos conectamos √† Java Virtual Machine por meio da interface JMX e pudemos obter m√©tricas Java diretamente.  Al√©m disso, n√£o apenas as fun√ß√µes vitais padr√£o do Java, como a intensidade do consumo de GC ou Heap, mas tamb√©m amostras espec√≠ficas relacionadas diretamente ao c√≥digo execut√°vel do aplicativo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/569/a2a/56d/569a2a56d9b7e7e6956a78d13ed6ab5d.jpg"><br><br>  Em 2017, cerca de um ano ap√≥s a introdu√ß√£o do sistema de monitoramento, ficou claro que, para o trabalho normal com o colossal conjunto de dados coletado no Zabbix, n√£o h√° visualiza√ß√£o suficiente - telas complexas.  A melhor solu√ß√£o para esse problema foi novamente o software livre - o Grafana, um painel conveniente para m√©tricas que permite agregar todos os dados em uma √∫nica tela. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/228/3c0/def/2283c0def9fc3f5209baa8ccaec6edea.jpg"><br><br>  A interface interativa da Grafana √© uma reminisc√™ncia de um sistema OLAP.  O subsistema exibe os dados que o Zabbix recebe em uma √∫nica tela, apresentando as informa√ß√µes na forma de gr√°ficos e tabelas convenientes para an√°lise.  O administrador pode personalizar facilmente as fatias necess√°rias. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/03e/e95/fe5/03ee95fe517f5ddead62e929160a685b.jpg"><br><br><h2>  Monitoramento e solu√ß√£o de problemas preventivos no sistema LMS </h2><br>  A filtragem e an√°lise das informa√ß√µes recebidas durante o monitoramento ajudam a plataforma de software de c√≥digo aberto ELK.  Este produto de c√≥digo aberto consiste em tr√™s ferramentas poderosas para coletar, armazenar e analisar dados: Elasticsearch, Logstash e Kibana.  A implementa√ß√£o desse subsistema permite, em particular, ver em tempo real quantos erros ocorreram no sistema, em quais servidores e se esses erros s√£o repetidos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/61d/478/2b4/61d4782b468e8914666ca6dcab2d251a.jpg"><br><br>  Agora, o administrador pode detectar o problema em um est√°gio inicial, antes mesmo que o usu√°rio o encontre.  Esse monitoramento proativo ajuda a evitar mau funcionamento do sistema, eliminando erros em tempo h√°bil.  Al√©m disso, podemos entender como o comportamento do sistema mudou ap√≥s a atualiza√ß√£o, bem como detectar novos problemas, se surgirem. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ed/bed/860/4edbed860c81e8039f8ec8307e726d65.jpg"><br><br><h2>  Monitoramento de Opera√ß√µes de Neg√≥cios </h2><br>  Al√©m das fun√ß√µes b√°sicas de monitoramento do consumo de recursos, o sistema tem a capacidade de analisar e controlar as opera√ß√µes de neg√≥cios. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f4/475/45f/1f447545f2cc00b92a5e837d6405f20a.jpg"><br><br>  O monitoramento do tempo total das opera√ß√µes de neg√≥cios permite identificar novos fatores e entender o impacto que eles t√™m no sistema. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc4/e6a/139/cc4e6a139580113d7b03d30a3ad4e2c2.jpg"><br><br>  O monitoramento do tempo de execu√ß√£o de solicita√ß√µes no contexto de cada servi√ßo de neg√≥cios possibilita detectar opera√ß√µes que possuem um desvio da norma. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ab/fb5/1e5/8abfb51e549da3086fa87eb552c77d4c.jpg"><br><br>  A captura de tela acima mostra um exemplo de monitoramento de uma tarefa em segundo plano em termos de seu desvio da norma. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fdd/d0d/89c/fddd0d89cfdbb25691925d9193174b36.jpg"><br><br>  A lista de tarefas monitoradas em termos de atividade em um servidor espec√≠fico permite identificar erros - incluindo duplica√ß√£o da execu√ß√£o de tarefas - em todos os servidores. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/034/353/c80/034353c80c96cd06f5228d37f7e51c24.jpg"><br><br>  Ele tamb√©m monitora tend√™ncias no tempo de execu√ß√£o dos procedimentos em segundo plano. <br><br><h2>  O sistema cresce, desenvolve e ajuda a lidar com problemas. </h2><br>  Com a implementa√ß√£o do sistema descrito, o monitoramento da opera√ß√£o dos servidores DLS foi bastante simplificado.  No entanto, surgem periodicamente v√°rios conflitos que afetam a velocidade do fluxo de trabalho e causam reclama√ß√µes dos usu√°rios.  Ent√£o percebemos que √© necess√°rio controlar o comportamento do aplicativo em si, e n√£o apenas os servidores. <br><br>  Para resolver esse problema, um balanceador foi conectado ao sistema de monitoramento por meio da API, que trabalha com um cluster de servidores de aplicativos.  Gra√ßas a isso, o administrador pode ver quanto tempo o servidor √© respons√°vel por cada solicita√ß√£o do usu√°rio. <br><br>  Os dados no tempo de resposta do servidor ficaram dispon√≠veis para an√°lise, o que possibilitou associar a desacelera√ß√£o do LMS aos processos que ocorreram no servidor.  Uma situa√ß√£o interessante foi revelada, em particular: o servidor est√° lento, embora neste momento n√£o esteja carregado.  Analisando a anomalia, descobrimos desvios na opera√ß√£o do Garbage Collector Java.  No final, descobriu-se que foi a opera√ß√£o incorreta desse servi√ßo que levou a essa situa√ß√£o.  Assumindo o controle do Garbage Collector Java, corrigimos completamente o problema. <br><br>  <i>√â assim que o software livre ajuda a desenvolver e desenvolver um sistema de gerenciamento de documentos no setor banc√°rio.</i>  <i>Abordamos apenas os principais problemas relacionados ao sistema de monitoramento do VTB LMS.</i>  <i>Se voc√™ estiver interessado nos detalhes - pergunte nos coment√°rios, teremos o maior prazer em compartilhar nossa experi√™ncia com voc√™.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475572/">https://habr.com/ru/post/pt475572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475558/index.html">Dicion√°rio de TI ou o qu√™? Onde Para onde? Parte 1</a></li>
<li><a href="../pt475560/index.html">KotlinConf 2019 Live: Assista ao vivo de 5 a 6 de dezembro</a></li>
<li><a href="../pt475562/index.html">MVC no Unity com objetos program√°veis. Parte 1</a></li>
<li><a href="../pt475564/index.html">Kaizen no desenvolvimento de software - por experi√™ncia pr√≥pria</a></li>
<li><a href="../pt475568/index.html">O Hadoop est√° morto? Parte 1</a></li>
<li><a href="../pt475576/index.html">C√≥digo do programa no carro</a></li>
<li><a href="../pt475578/index.html">O que voc√™ precisa saber sobre a Olimp√≠ada ‚ÄúEu sou profissional‚Äù: Falamos sobre as √°reas de Big Data e Rob√≥tica</a></li>
<li><a href="../pt475580/index.html">Como ‚ÄúToy Story 2‚Äù Pixar foi exclu√≠da duas vezes: primeiro por acidente e depois por causa da busca pela excel√™ncia</a></li>
<li><a href="../pt475582/index.html">O problema da monetiza√ß√£o: por que a popular App Store exclui utilit√°rios de c√≥digo aberto</a></li>
<li><a href="../pt475584/index.html">Como est√£o as se√ß√µes de aprendizado de m√°quina nas entrevistas Yandex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>