<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê§ üöú üë©‚Äçüéì C√≥mo funciona el formato JPEG üíª üë©üèΩ‚Äç‚úàÔ∏è ü¶ì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las im√°genes JPEG se encuentran en todas partes en nuestra vida digital, pero detr√°s de esta cobertura de conciencia se encuentran algoritmos que elim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo funciona el formato JPEG</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454944/"><h4>  Las im√°genes JPEG se encuentran en todas partes en nuestra vida digital, pero detr√°s de esta cobertura de conciencia se encuentran algoritmos que eliminan detalles que no son percibidos por el ojo humano.  El resultado es la m√°s alta calidad visual con el tama√±o de archivo m√°s peque√±o, pero ¬øc√≥mo funciona exactamente?  ¬°Veamos lo que nuestros ojos no ven exactamente! </h4><br><img src="https://habrastorage.org/webt/xh/7m/8n/xh7m8nokzhgfqixb00fnwcmkthm.jpeg"><br><br>  Es f√°cil dar por sentado la posibilidad de enviar una foto a un amigo y no preocuparse por el dispositivo, el navegador o el sistema operativo que utiliza; sin embargo, este no siempre ha sido el caso.  A principios de la d√©cada de 1980, las computadoras sab√≠an c√≥mo almacenar y mostrar im√°genes digitales, pero hab√≠a muchas ideas competitivas sobre la mejor manera de hacerlo.  Era imposible simplemente enviar una imagen de una computadora a otra y esperar que todo funcionara. <br><a name="habracut"></a><br>  Para resolver este problema, en 1986 se form√≥ un comit√© de expertos de todo el mundo bajo el nombre de "Joint Photographic Experts Group (JPEG)", basado en la colaboraci√≥n de la Organizaci√≥n Internacional de Normalizaci√≥n (ISO) y la Comisi√≥n Electrot√©cnica Internacional (IEC) ) - dos organizaciones internacionales de normalizaci√≥n, cuya sede se encuentra en Ginebra (Suiza). <br><br>  Un grupo de personas llamado JPEG cre√≥ el est√°ndar de compresi√≥n de imagen digital JPEG en 1992.  Cualquiera que usara Internet probablemente encontrar√≠a im√°genes codificadas en JPEG.  Esta es la forma m√°s com√∫n de codificar, enviar y almacenar im√°genes.  Desde p√°ginas web hasta correo electr√≥nico y redes sociales, JPEG se usa miles de millones de veces al d√≠a, casi cada vez que vemos una imagen en l√≠nea o la enviamos.  Sin JPEG, la web ser√≠a menos vibrante, m√°s lenta y probablemente habr√≠a menos im√°genes de gatos. <br><br>  Este art√≠culo trata sobre c√≥mo decodificar una imagen JPEG.  En otras palabras, sobre lo que se requiere para convertir los datos comprimidos almacenados en una computadora en una imagen que aparece en la pantalla.  Vale la pena saber sobre esto, no solo porque es importante para comprender la tecnolog√≠a que usamos diariamente, sino tambi√©n porque al revelar los niveles de compresi√≥n, entendemos mejor la percepci√≥n y la visi√≥n, as√≠ como los detalles a los que nuestros ojos son m√°s sensibles. <br><br>  Adem√°s, jugar con im√°genes de esta manera es muy interesante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f8/312/709/4f831270939c4f685405283f4286e867.gif"><br><br><h2>  Mirando dentro de un JPEG </h2><br>  En una computadora, todo se almacena como una secuencia de n√∫meros binarios.  Por lo general, estos bits, ceros y unos, se agrupan en ocho, formando bytes.  Cuando abre una imagen JPEG en una computadora, algo (navegador, sistema operativo, algo m√°s) debe decodificar los bytes, restaurando la imagen original en forma de una lista de colores que se pueden mostrar. <br><br>  Si descargas esta linda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">foto de gato</a> y la abres en un editor de texto, ver√°s un mont√≥n de personajes incoherentes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e4/8a0/017/1e48a0017ada1830f50eefc5079410ea.png"><br>  <i>Aqu√≠ uso Notepad ++ para examinar el contenido de un archivo, ya que los editores de texto normales, como el Bloc de notas de Windows, corromper√°n el binario despu√©s de guardarlo y ya no satisfar√°n el formato JPEG.</i> <br><br>  Cuando abre una imagen en un editor de texto, confunde la computadora, ¬°as√≠ como confunde su cerebro cuando se frota los ojos y comienza a ver manchas de color! <br><br>  Estos puntos que ves se conocen como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fosfenos</a> y no son el resultado de la exposici√≥n a un est√≠mulo de luz o alucinaciones generadas por la mente.  Ocurren porque su cerebro cree que cualquier se√±al el√©ctrica en los nervios √≥pticos transmite informaci√≥n sobre la luz.  El cerebro necesita hacer tales suposiciones, porque es imposible saber si la se√±al es sonido, visi√≥n o cualquier otra cosa.  Todos los nervios del cuerpo transmiten exactamente los mismos impulsos el√©ctricos.  Al presionar los ojos, env√≠a se√±ales que no son visuales, pero activan los receptores del ojo que su cerebro interpreta, en este caso, incorrectamente, como algo visual.  ¬°Eres literalmente capaz de ver la presi√≥n! <br><br>  Es divertido pensar en c√≥mo las computadoras se ven como un cerebro, pero tambi√©n es una analog√≠a √∫til que ilustra cu√°n fuertemente la importancia de los datos, transmitidos a trav√©s del cuerpo por los nervios o almacenados en una computadora, depende de su interpretaci√≥n.  Todos los datos binarios consisten en ceros y unos, componentes b√°sicos que pueden transmitir informaci√≥n de cualquier tipo.  Su computadora a menudo adivina c√≥mo interpretarlos usando sugerencias, como extensiones de archivo.  Y ahora lo estamos obligando a interpretarlos como texto, ya que esto es lo que espera el editor de texto. <br><br>  Para entender c√≥mo decodificar JPEG, necesitamos ver las se√±ales originales en s√≠ mismas: datos binarios.  ¬°Esto se puede hacer usando el editor hexadecimal, o directamente en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">p√°gina web del art√≠culo original</a> !  Hay una imagen, junto a la cual en el cuadro de texto est√°n todos sus bytes (excepto el encabezado), presentados en forma decimal.  Puede cambiarlos, y el script recodificar√° y producir√° una nueva imagen sobre la marcha. <br><br><img src="https://habrastorage.org/webt/0e/tu/az/0etuazw_ujtrjmepdjpaacmg_jo.png"><br><br>  Puedes aprender mucho solo jugando con este editor.  Por ejemplo, ¬øpuede decir en qu√© orden se almacenan los p√≠xeles? <br><br>  En este ejemplo, es extra√±o que cambiar algunos n√∫meros no afecte la imagen en absoluto, pero, por ejemplo, si reemplaza el n√∫mero 17 con 0 en la primera l√≠nea, ¬°la foto quedar√° completamente mal! <br><br><img src="https://habrastorage.org/webt/ql/47/xz/ql47xznmt7fq29yoynour0fscls.png"><br><br>  Otros cambios, por ejemplo, el reemplazo de 7 en la l√≠nea 1988 con el n√∫mero 254 cambia el color, pero solo de los p√≠xeles posteriores. <br><br><img src="https://habrastorage.org/webt/tj/tu/0o/tjtu0o9qppmq2pgv5mpfh02hpzw.png"><br><br>  Quiz√°s lo m√°s extra√±o es que algunos n√∫meros cambian no solo el color, sino tambi√©n la forma de la imagen.  Cambie 70 en la l√≠nea 12 a 2 y mire la fila superior de la imagen para ver a qu√© me refiero. <br><br><img src="https://habrastorage.org/webt/wr/ui/w3/wruiw3ds_yihzasjgytn8vul1de.png"><br><br>  Y no importa qu√© imagen JPEG use, siempre encontrar√° estas secuencias de ajedrez cr√≠pticas cuando edite bytes. <br><br>  Cuando se juega con el editor, es dif√≠cil entender c√≥mo se recrea la foto a partir de estos bytes, ya que la compresi√≥n JPEG consta de tres tecnolog√≠as diferentes que se aplican secuencialmente en todos los niveles.  Estudiaremos cada uno de ellos por separado para revelar el comportamiento misterioso que observamos. <br><br>  <b>Tres niveles de compresi√≥n JPEG:</b> <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Submuestreo de color</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Transformaci√≥n discreta del coseno y discretizaci√≥n</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Longitudes de series de codificaci√≥n</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Delta</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Huffman</a> </li></ol><br>  Para que pueda imaginar la escala de compresi√≥n, tenga en cuenta que la imagen de arriba representa 79.819 n√∫meros, es decir, aproximadamente 79 Kb.  Si lo almacenamos sin compresi√≥n, para cada p√≠xel se requerir√≠an tres n√∫meros, para el componente rojo, verde y azul.  Eso ser√≠a 917,700 n√∫meros, o aprox.  917 Kb.  Como resultado de la compresi√≥n JPEG, el archivo resultante ha disminuido en m√°s de 10 veces. <br><br>  De hecho, esta imagen se puede comprimir con mucha m√°s fuerza.  A continuaci√≥n se muestran dos im√°genes una al lado de la otra: la foto de la derecha se redujo a 16 Kb, ¬°57 veces m√°s peque√±a que la versi√≥n sin comprimir! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ec8/a0f/b53/ec8a0fb53e28470aafb8fb6b04713de3.png"><br><br>  Si observa de cerca, ver√° que estas im√°genes no son id√©nticas.  Ambas son im√°genes con compresi√≥n JPEG, pero la correcta es mucho m√°s peque√±a en volumen.  Tambi√©n se ve un poco peor (mira los cuadrados de los colores de fondo).  Por lo tanto, JPEG tambi√©n se llama compresi√≥n con p√©rdida;  Durante la compresi√≥n, la imagen cambia y pierde algunos detalles. <br><br><h2>  1. Disminuci√≥n de color </h2><br>  Aqu√≠ hay una imagen que usa solo el primer nivel de compresi√≥n. <br><br><img src="https://habrastorage.org/webt/bn/jq/j3/bnjqj3gjgcxd3xazrfnepcfwo-s.png"><br>  <i>(Versi√≥n interactiva - en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">original</a> ).</i>  <i>Eliminar un n√∫mero destruye todos los colores.</i>  <i>Sin embargo, si elimina exactamente seis n√∫meros, esto pr√°cticamente no afecta la imagen.</i> <br><br>  Ahora los n√∫meros son un poco m√°s f√°ciles de descifrar.  Esta es una lista casi simple de colores en los que cada byte cambia exactamente un p√≠xel, pero al mismo tiempo ya tiene la mitad del tama√±o de una imagen sin comprimir (que ocupar√≠a unos 300 Kb en un tama√±o tan reducido).  Adivina por qu√©? <br><br>  Puede ver que estos n√∫meros no denotan los componentes rojo, verde y azul est√°ndar, porque si reemplazamos todos los n√∫meros con ceros, obtenemos una imagen verde (y no blanca). <br><br><img src="https://habrastorage.org/webt/ij/ar/qj/ijarqjsfiuanba52sxsn-ovh6q0.png"><br><br>  Esto se debe a que estos bytes indican Y (brillo), <br><br><img src="https://habrastorage.org/webt/ab/sl/bt/abslbtgj10nk62g7ksdlx0lusck.png"><br><br>  Cb (azul relativo), <br><br><img src="https://habrastorage.org/webt/_s/ao/1c/_sao1c1div5bv1dltl6gahkp86a.png"><br><br>  y fotos de Cr (enrojecimiento relativo). <br><br><img src="https://habrastorage.org/webt/mp/fz/jt/mpfzjtlicxlsmw3wmbrnqhywinu.png"><br><br>  ¬øPor qu√© no usar RGB?  De hecho, as√≠ es como funcionan las pantallas m√°s modernas.  Su monitor puede mostrar cualquier color, incluido rojo, verde y azul con diferentes intensidades para cada p√≠xel.  El blanco se obtiene al encender los tres con brillo completo, y el negro al apagarlos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c27/504/f77/c27504f7737bca3efab3468f2a09aacc.png"><br><br>  Tambi√©n es muy similar al trabajo del ojo humano.  Los receptores de color de nuestros ojos se denominan " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conos</a> " y se dividen en tres tipos, cada uno de los cuales es m√°s sensible al rojo, verde o azul [los conos tipo S son sensibles al azul violeta (S del ingl√©s Short - shortwave espectro), tipo M - en verde-amarillo (M del ingl√©s. Medio - onda media), y tipo L - en las partes amarillo-rojo (L del ingl√©s. Largo - onda larga) del espectro.  La presencia de estos tres tipos de conos (y varillas sensibles en la parte verde esmeralda del espectro) le da a la persona una visi√≥n del color.  / aprox.  transl.].  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las varillas</a> , otro tipo de fotorreceptores en nuestros ojos, solo pueden capturar cambios en el brillo, pero son mucho m√°s sensibles.  A nuestros ojos hay alrededor de 120 millones de barras y solo 6 millones de conos. <br><br>  Por lo tanto, nuestros ojos notan cambios en el brillo mucho mejor que los cambios en el color.  Si separa el color del brillo, puede eliminar un poco de color y nadie notar√° nada.  La disminuci√≥n de color es el proceso de representar los componentes de color de una imagen a una resoluci√≥n m√°s baja que los componentes de brillo.  En el ejemplo anterior, cada p√≠xel tiene exactamente un componente Y, y cada grupo individual de cuatro p√≠xeles tiene exactamente un componente Cb y un Cr.  Por lo tanto, la imagen contiene cuatro veces menos informaci√≥n de color que la original. <br><br>  El espacio de color YCbCr se usa no solo en JPEG.  Fue inventado originalmente en 1938 para programas de televisi√≥n.  No todos tienen un televisor en color, por lo que la separaci√≥n de color y brillo permiti√≥ que todos recibieran la misma se√±al, y los televisores sin color solo usaron el componente de brillo. <br><br>  Por lo tanto, eliminar un n√∫mero del editor destruye completamente todos los colores.  Los componentes se almacenan como YYYY Cb Cr (de hecho, no necesariamente en ese orden; el orden de almacenamiento se especifica en el encabezado del archivo).  Eliminar el primer n√∫mero conducir√° al hecho de que el primer valor de Cb se percibir√° como Y, Cr como Cb, y en su conjunto resultar√° un efecto domin√≥, cambiando todos los colores de la imagen. <br><br>  La especificaci√≥n JPEG no lo obliga a usar YCbCr.  Pero en la mayor√≠a de los archivos se usa porque proporciona im√°genes de mejor calidad despu√©s de la disminuci√≥n de resoluci√≥n en comparaci√≥n con RGB.  Pero no tienes que creer mi palabra.  Vea usted mismo en la tabla a continuaci√≥n c√≥mo se ver√° la disminuci√≥n de resoluci√≥n de cada componente individual en RGB y en YCbCr. <br><br><img src="https://habrastorage.org/webt/9b/fl/ei/9bfleirkdnq8sdwiudks05bdz1o.png"><br>  (Versi√≥n interactiva - en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">original</a> ). <br><br>  Eliminar el azul no es tan notable como el rojo o el verde.  Esto se debe a los seis millones de conos en los ojos, aproximadamente el 64% son sensibles al rojo, el 32% al verde y el 2% al azul. <br><br>  El submuestreo del componente Y (abajo a la izquierda) se ve mejor.  Se nota incluso un ligero cambio. <br><br>  La conversi√≥n de una imagen de RGB a YCbCr no reduce el tama√±o del archivo, pero facilita la b√∫squeda de detalles menos notables que se pueden eliminar.  La compresi√≥n con p√©rdida se produce en la segunda etapa.  Se basa en la idea de representar datos en una forma m√°s compresible. <br><br><h2>  2. Transformaci√≥n discreta del coseno y discretizaci√≥n </h2><br>  Este nivel de compresi√≥n en su mayor parte determina la esencia de JPEG.  Despu√©s de convertir los colores a YCbCr, los componentes se comprimen por separado, por lo que podemos concentrarnos en el componente Y solo m√°s tarde, y as√≠ es como se ven los bytes del componente Y despu√©s de aplicar este nivel. <br><br><img src="https://habrastorage.org/webt/sr/c2/en/src2enhysp480z4qoycrgptdn5m.png"><br>  <i>(Versi√≥n interactiva - en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">original</a> ).</i>  En la versi√≥n interactiva, al hacer clic en un p√≠xel se desplaza el editor a la l√≠nea que lo indica.  Intente eliminar n√∫meros del final o agregue algunos ceros a un n√∫mero espec√≠fico. <br><br>  A primera vista, parece una muy mala compresi√≥n.  Hay 100.000 p√≠xeles en la imagen, y se requieren 102.400 n√∫meros para indicar su brillo (componentes Y), ¬°esto es peor que no comprimir nada en absoluto! <br><br>  Sin embargo, tenga en cuenta que la mayor√≠a de estos n√∫meros son cero.  Adem√°s, todos estos ceros al final de las l√≠neas se pueden eliminar sin cambiar la imagen.  ¬°Quedan unos 26,000 n√∫meros, y esto es casi 4 veces menos! <br><br>  En este nivel est√° el secreto de los patrones de ajedrez.  A diferencia de otros efectos que vimos, la apariencia de estos patrones no es un problema t√©cnico.  Son los bloques de construcci√≥n de toda la imagen.  Cada l√≠nea del editor contiene exactamente 64 n√∫meros, coeficientes de transformaci√≥n de coseno discreto (DCT) correspondientes a intensidades de 64 patrones √∫nicos. <br><br>  Estos patrones se forman sobre la base del gr√°fico coseno.  Aqu√≠ hay algunos de ellos: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2cc/8da/dd7/2cc8dadd7ca3d6565753fdd8f14a4fcd.png"><br>  <i>8 de 64 cuotas</i> <br><br>  A continuaci√≥n se muestra una imagen que muestra los 64 patrones. <br><br><img src="https://habrastorage.org/webt/z3/8n/ri/z38nrihqi2zbdt2cznzqy3p1bh0.png"><br>  <i>(Versi√≥n interactiva - en el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">original</a> ).</i> <br><br>  Estos patrones son de particular importancia ya que forman la base de im√°genes de 8x8.  Si no est√° familiarizado con el √°lgebra lineal, esto significa que se puede obtener cualquier imagen de 8x8 a partir de estos 64 patrones.  DCT es el proceso de dividir im√°genes en bloques de 8x8 y convertir cada bloque en una combinaci√≥n de estos 64 coeficientes. <br><br>  El hecho de que cualquier imagen pueda estar compuesta de 64 patrones espec√≠ficos parece m√°gico.  Sin embargo, esto es lo mismo que decir que cualquier lugar en la Tierra puede describirse con dos n√∫meros: latitud y longitud [indicando hemisferios / aprox.  transl.].  A menudo consideramos la superficie de la Tierra en dos dimensiones, por lo que solo necesitamos dos n√∫meros.  Una imagen de 8x8 tiene 64 dimensiones, por lo que necesitamos 64 n√∫meros. <br><br>  Todav√≠a no est√° claro c√≥mo esto nos ayuda en el sentido de la compresi√≥n.  Si necesitamos 64 n√∫meros para representar una imagen de 8x8, ¬øpor qu√© ser√≠a mejor que simplemente almacenar 64 componentes de luminancia?  Hacemos esto por la misma raz√≥n por la que convertimos tres n√∫meros RGB en tres n√∫meros YCbCr: esto nos permite eliminar detalles invisibles. <br><br>  Es dif√≠cil ver exactamente qu√© detalles se eliminan en esta etapa, porque JPEG aplica DCT a bloques de 8x8.  Sin embargo, nadie nos proh√≠be aplicarlo a toda la imagen.  As√≠ es como se ve DCT en el componente Y cuando se aplica a toda la imagen: <br><br><img src="https://habrastorage.org/webt/ab/sl/bt/abslbtgj10nk62g7ksdlx0lusck.png"><br><br>  Desde el final, puede eliminar m√°s de 60,000 n√∫meros pr√°cticamente sin cambios notables en la foto. <br><br><img src="https://habrastorage.org/webt/we/mq/ma/wemqmatswqyazpgyxm12k-g7l-s.png"><br><br>  Sin embargo, tenga en cuenta que si restablecemos los primeros cinco n√∫meros, la diferencia ser√° obvia. <br><br><img src="https://habrastorage.org/webt/m0/fj/tj/m0fjtjcfr_-6b50duzk3-zvl7gi.png"><br><br>  Los n√∫meros al principio indican cambios de baja frecuencia en la imagen, y nuestros ojos los perciben mejor.  Los n√∫meros cerca del final indican cambios en las frecuencias altas que son m√°s dif√≠ciles de notar.  Para "ver lo que no es visible con el ojo", podemos aislar estas partes de alta frecuencia poniendo a cero los primeros 5000 n√∫meros. <br><br><img src="https://habrastorage.org/webt/si/gj/w2/sigjw20pylfjmu0rzqjocl6oqv4.png"><br><br>  Vemos todas las √°reas de la imagen en las que se produce el mayor cambio de p√≠xel a p√≠xel.  Se destacan los ojos del gato, su bigote, la manta de felpa y las sombras en la esquina inferior izquierda.  Puede ir m√°s all√° borrando los primeros 10,000 n√∫meros: <br><br><img src="https://habrastorage.org/webt/eg/vi/9a/egvi9a_wkwv48xktp7jiyajnhuc.png"><br><br>  20,000: <br><br><img src="https://habrastorage.org/webt/y9/fr/ri/y9frrialb_94gnwdd-plq_hcyqc.png"><br><br>  40,000: <br><br><img src="https://habrastorage.org/webt/0d/ce/kr/0dcekrobg9_ir-hqnggr9fjlw4u.png"><br><br>  60,000: <br><br><img src="https://habrastorage.org/webt/uo/8f/qx/uo8fqxadj-snukbdf1dcjgvoux0.png"><br><br>  Estas partes de alta frecuencia son jpeg y se eliminan durante la fase de compresi√≥n.  La conversi√≥n de colores a coeficientes DCT no tiene p√©rdidas.  Las p√©rdidas se generan en el paso de discretizaci√≥n, donde se eliminan los valores de alta frecuencia o cerca de cero.  Cuando baja la calidad de guardar JPEG, el programa aumenta el umbral para la cantidad de valores eliminados, lo que reduce el tama√±o del archivo, pero hace que la imagen est√© m√°s pixelada.  Por lo tanto, la imagen en la primera secci√≥n, que era 57 veces m√°s peque√±a, se ve√≠a as√≠.  Cada bloque de 8x8 parec√≠a tener un n√∫mero mucho menor de coeficientes DCT en comparaci√≥n con una versi√≥n mejor. <br><br>  Puede hacer un efecto genial como la transmisi√≥n gradual de im√°genes.  Puede mostrar una imagen borrosa, que se vuelve m√°s detallada a medida que se descargan m√°s y m√°s coeficientes. <br><br>  Aqu√≠, solo por diversi√≥n, qu√© sucede cuando se usan solo 24,000 n√∫meros: <br><br><img src="https://habrastorage.org/webt/vn/sf/xr/vnsfxrqyogsnc4qx9pzsok--rno.png"><br><br>  O solo 5000: <br><br><img src="https://habrastorage.org/webt/oi/y3/u6/oiy3u6saz6kliguv_pm8iucdbqa.png"><br><br>  Muy borrosa, pero como si fuera reconocible! <br><br><h2>  3. Codificaci√≥n de longitudes de series, delta y Huffman </h2><br>  Hasta ahora, todas las etapas de compresi√≥n han ido con p√©rdidas.  La √∫ltima etapa, por el contrario, pasa sin p√©rdida.  No elimina informaci√≥n, pero reduce significativamente el tama√±o del archivo. <br><br>  ¬øC√≥mo se puede comprimir algo sin descartar informaci√≥n?  Imagina c√≥mo describir√≠amos un simple rect√°ngulo negro de 700 x 437. <br><br>  JPEG utiliza 5000 n√∫meros para esto, pero se puede lograr un resultado mucho mejor.  ¬øTe imaginas un esquema de codificaci√≥n que describa una imagen con el menor n√∫mero de bytes posible? <br><br>  El esquema m√≠nimo que se me ocurre utiliza cuatro: tres para indicar el color y el cuarto: cu√°ntos p√≠xeles tienen ese color.  La idea de representar valores repetidos de una manera tan comprimida se denomina codificaci√≥n de longitud de serie.  No tiene p√©rdidas, ya que podemos restaurar los datos codificados en su forma original. <br><br>  El tama√±o de un archivo JPEG con un rect√°ngulo negro es mucho mayor que 4 bytes; recuerde que en el nivel DCT, la compresi√≥n se aplica a bloques de 8x8 p√≠xeles.  Por lo tanto, al menos necesitamos un coeficiente DCT por cada 64 p√≠xeles.  Necesitamos uno porque en lugar de almacenar un solo coeficiente DCT seguido de 63 ceros, codificar las longitudes de la serie nos permite almacenar un n√∫mero e indicar que "todos los dem√°s son ceros". <br><br>  La codificaci√≥n delta es una t√©cnica en la que cada byte contiene una diferencia de alg√∫n valor, en lugar de un valor absoluto.  Por lo tanto, la edici√≥n de ciertos bytes cambia el color de todos los dem√°s p√≠xeles.  Por ejemplo, en lugar de almacenar <br><br>  12 13 14 14 14 13 13 14 <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podr√≠amos comenzar con 12 y luego simplemente indicar cu√°nto necesitamos sumar o restar para obtener el siguiente n√∫mero. Y esta secuencia en la codificaci√≥n delta toma la forma: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12 1 1 0 0 -1 0 1 Los </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datos convertidos no se obtienen menos que el original, pero ya es m√°s f√°cil comprimirlos. El uso de la codificaci√≥n delta antes de codificar longitudes de serie puede ayudar mucho, mientras se mantiene la compresi√≥n sin p√©rdidas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La codificaci√≥n delta es una de las pocas t√©cnicas utilizadas fuera de los bloques de 8x8. De los 64 coeficientes DCT, uno es simplemente una funci√≥n de onda constante (color s√≥lido). Representa el brillo promedio de cada bloque para los componentes de luminancia, o el azul promedio para los componentes de Cb, y as√≠ sucesivamente. El primer valor de cada bloque DCT se denomina valor DC, y cada valor DC sufre una codificaci√≥n delta con respecto a los anteriores. Por lo tanto, un cambio en el brillo del primer bloque afectar√° a todos los bloques. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El √∫ltimo misterio permanece: ¬øc√≥mo el cambio singular estropea por completo toda la imagen? Hasta ahora, los niveles de compresi√≥n no ten√≠an tales propiedades. La respuesta se encuentra en el encabezado JPEG. Los primeros 500 bytes contienen metadatos sobre la imagen: ancho, alto, etc., y hasta ahora no hemos trabajado con ellos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin un encabezado, es casi imposible (bueno, o muy dif√≠cil) decodificar JPEG. Parecer√° que estoy tratando de describirte la imagen y comenzar a inventar palabras para transmitir mi impresi√≥n. La descripci√≥n probablemente ser√° muy concisa, porque puedo inventar palabras con exactamente el significado que quiero transmitir, pero para todos los dem√°s no tendr√°n sentido. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suena est√∫pido, pero eso es exactamente lo que sucede. Cada imagen JPEG est√° comprimida con c√≥digos espec√≠ficos. Un diccionario de c√≥digos se almacena en el encabezado. Esta t√©cnica se llama c√≥digo Huffman y el diccionario se llama tabla Huffman. En el encabezado, la tabla est√° marcada con dos bytes: 255 y luego 196. Cada componente de color puede tener su propia tabla.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los cambios en las tablas afectar√°n radicalmente cualquier imagen. Un buen ejemplo es cambiar 1 en 12 en la l√≠nea 15. </font></font><br><br><img src="https://habrastorage.org/webt/mz/-c/xd/mz-cxdyzf2haxuj1_tojoatbl7s.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto se debe a que las tablas indican c√≥mo leer bits individuales. Hasta ahora, solo hemos trabajado con n√∫meros binarios en forma decimal. Pero esto nos oculta el hecho de que si desea almacenar el n√∫mero 1 en un byte, entonces se ver√° como 00000001, ya que cada byte debe tener exactamente ocho bits, incluso si solo se necesita uno de ellos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto es potencialmente una gran p√©rdida de espacio si tienes muchos n√∫meros peque√±os. El c√≥digo Huffman es una t√©cnica que nos permite relajar este requisito, seg√∫n el cual cada n√∫mero debe ocupar ocho bits. Esto significa que si ve dos bytes: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">234 115</font></font><br><br> ,     ,     .   ,        : <br><br> 11101010 01110011 <br><br>    ,  ,   .  ,      , (111010),  58   ,      (10011),  19,      (0011),  3. <br><br>          .    ,  .           ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a> . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uno de los trucos interesantes que puede hacer si sabe esto es separar el encabezado del JPEG y almacenarlo por separado. </font><font style="vertical-align: inherit;">De hecho, resulta que solo t√∫ puedes leer el archivo. </font><font style="vertical-align: inherit;">Facebook est√° haciendo esto para reducir a√∫n m√°s el tama√±o del archivo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que m√°s puede hacer es modificar un poco la tabla de Huffman. </font><font style="vertical-align: inherit;">Para otros, se ver√° como una imagen da√±ada. </font><font style="vertical-align: inherit;">Y solo t√∫ conocer√°s la versi√≥n m√°gica de su correcci√≥n. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para resumir: entonces, ¬øqu√© se necesita para la decodificaci√≥n JPEG? </font><font style="vertical-align: inherit;">Es necesario:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extraiga la (s) tabla (s) Huffman del encabezado y decodifique los bits. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extraiga coeficientes de transformaci√≥n de coseno discretos para cada componente de color y brillo para cada bloque de 8x8 realizando transformaciones inversas de codificaci√≥n de longitudes y deltas de series. </font></font></li><li>     ,        88. </li><li>   ,    (    ). </li><li>    YCbCr     RGB. </li><li>    ! </li></ol><br>        ! ,      ‚Äì ,   JPEG .      ,     ,   .  , ,   JPEG,  ,        .  , -        ,      ,       ( , ). <br><br> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,   </a> , ,         .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/454944/">https://habr.com/ru/post/454944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454930/index.html">Recolecci√≥n de basura en V8: como funciona el nuevo Orinoco GC</a></li>
<li><a href="../454932/index.html">Inversiones y software: 5 terminales comerciales para operar en bolsa</a></li>
<li><a href="../454936/index.html">Vivaldi: el bloqueo de anuncios debe ser la elecci√≥n del usuario</a></li>
<li><a href="../454938/index.html">Desarrollo de su propio n√∫cleo para incrustar en un sistema de procesador basado en FPGA</a></li>
<li><a href="../454940/index.html">Seguro m√©dico de viaje: instrucciones detalladas</a></li>
<li><a href="../454946/index.html">Estados globales: por qu√© y c√≥mo evitarlos</a></li>
<li><a href="../454958/index.html">Una mirada al interior: escuela de posgrado en EPFL. Parte 4.1: vida cotidiana</a></li>
<li><a href="../454960/index.html">Microbiota C√≥mo las drogas afectan las bacterias intestinales</a></li>
<li><a href="../454962/index.html">¬øC√≥mo se protegen las empresas de TI del mundo de la competencia frente a los ex empleados?</a></li>
<li><a href="../454964/index.html">El uso de la visi√≥n por computadora en la investigaci√≥n marina o 12 personas en el cofre de un muerto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>