<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍕 🙅🏻 👩🏽‍⚖️ SSH à distance: conseils et astuces 🏇🏾 🌧️ 🌎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans un article précédent sur Remote SSH, nous avons examiné comment configurer une machine virtuelle Linux et se connecter à une machine virtuelle à ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SSH à distance: conseils et astuces</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/472274/">  Dans un article précédent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Remote SSH,</a> nous avons examiné comment configurer une machine virtuelle Linux et se connecter à une machine virtuelle à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'</a> aide de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'extension Remote-SSH</a> dans Visual Studio Code.  Dans cet article, nous parlerons de quelques trucs et astuces que vous pouvez utiliser pour tirer le meilleur parti de votre configuration à distance. <br><br><img src="https://habrastorage.org/webt/ov/u8/tt/ovu8ttvadc44hgdbjstecaecy9i.png"><a name="habracut"></a><br><br><h2>  Se connecter en utilisant SSH distant </h2><br>  L'extension Visual Studio Code Remote - SSH vous permet de vous connecter à une machine distante ou à une machine virtuelle à l'aide de SSH, et tout cela depuis VS Code.  Si l'extension n'est pas déjà installée, vous pouvez rechercher «ssh distant» dans l'onglet «Extensions» (⇧⌘X). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a1/94e/3a2/7a194e3a2e20a905fd72773a8c8e9524.png"><br><br>  Après avoir installé l'extension, vous verrez un indicateur dans le coin inférieur gauche de la barre d'état.  Cet indicateur vous indique dans quel contexte VS Code (local ou distant) fonctionne.  Cliquez sur l'indicateur pour afficher une liste des commandes d'extension à distance. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/575/c4f/3c9/575c4f3c962d7a2232dacd016debf545.png"><br><br><h2>  Fichier de configuration SSH </h2><br>  Dans un article précédent sur SSH distant, nous nous sommes connectés à une seule machine et, à l'invite, nous avons entré «user @ host».  Si vous vous connectez régulièrement à plusieurs serveurs distants ou machines virtuelles locales, il existe un meilleur moyen de se connecter sans avoir à se souvenir de tous les noms d'utilisateur, adresses et paramètres de configuration supplémentaires. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenSSH</a> prend en charge l'utilisation d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un fichier de configuration</a> pour stocker toutes vos différentes connexions SSH.  Pour utiliser le fichier de configuration SSH, cliquez sur l'indicateur distant pour appeler les commandes distantes, sélectionnez «Ouvrir le fichier de configuration» et sélectionnez le fichier qui se trouve dans «Utilisateurs / {votre nom d'utilisateur} /. Ssh / config». <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ac7/29b/631/ac729b631568ca0f2006e2de9c424ff7.png"><br><br>  Voici un exemple de fichier de configuration SSH: <br><br><pre><code class="plaintext hljs">#      SSH: https://linux.die.net/man/5/ssh_config Host python-linux-vm HostName &lt;vm address&gt; User sana IdentityFile ~/.ssh/id_python_vm Host node-vm HostName &lt;vm address&gt; User sana Port 5522 IdentityFile ~/.ssh/id_node_vm</code> </pre> <br>  Il existe de nombreuses autres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">options de configuration</a> que vous pouvez spécifier dans le format de fichier de configuration SSH.  Vous obtiendrez les modules complémentaires dans ce fichier, et vous pouvez cliquer sur (⌃Espace) pour IntelliSense pour en savoir plus sur les options de configuration. <br><br>  Options utilisées ci-dessus: <br><div class="scrollable-table"><table><tbody><tr><td>  Hôte </td><td>  Un alias facile à retenir pour votre hôte. </td></tr><tr><td>  Nom d'hôte </td><td>  Nom d'hôte du serveur (vous pouvez utiliser l'adresse IP du serveur). </td></tr><tr><td>  Utilisateur </td><td>  L'utilisateur que vous avez spécifié pour se connecter via SSH. </td></tr><tr><td>  Port </td><td>  Le port utilisé pour se connecter via SSH.  Le port par défaut est 22, mais si vous avez spécifié un port unique, vous pouvez le configurer ici. </td></tr><tr><td>  IdentityFile </td><td>  L'emplacement du fichier où vous avez enregistré votre clé privée. </td></tr></tbody></table></div>  Vous pouvez ajouter des informations pour tous les hôtes que vous possédez.  Après avoir enregistré le fichier de configuration, vous pouvez voir ces nœuds dans l'Explorateur distant, ainsi que tous les dossiers que vous ouvrez sur ce nœud.  Vous pouvez sélectionner une icône à côté de chaque hôte ou dossier, et il lancera une nouvelle fenêtre VS Code (instance) et vous connectera à cet hôte.  Dans la capture d'écran ci-dessous, je suis connecté à ma machine distante "python-linux-vm" et Remote Explorer me montre les dossiers auxquels je me suis connecté par le passé, ainsi que tous les ports redirigés de la machine distante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a0f/500/def/a0f500defad2f6ea8d8a7b64755e14a8.png"><br><br><h2>  Proxycommand </h2><br>  Parfois, vous devrez peut-être vous connecter depuis votre ordinateur de bureau ou portable à un ordinateur distant via l'intranet de votre entreprise ou derrière un pare-feu.  Dans ce cas, vous pouvez utiliser un serveur intermédiaire ou un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jump-box</a> .  Ce type de configuration est utile si vous exécutez un système sécurisé configuré pour accepter les connexions SSH uniquement à partir d'un ensemble fixe d'hôtes. <br><br>  Pour utiliser la configuration du jump-box avec l'extension Remote - SSH, vous pouvez utiliser le paramètre de configuration <code>ProxyCommand</code> .  Cette configuration ouvrira une connexion SSH en arrière-plan avec le boîtier de connexion, puis se connectera via l'adresse IP privée à la cible. <br><br>  Vous pouvez définir le paramètre de configuration <code>ProxyCommand</code> dans le fichier de configuration SSH comme suit: <br><br><pre> <code class="plaintext hljs"># Jump box   IP- Host jump-box HostName 52.179.157.97 User sana IdentityFile ~/.ssh/jumpbox #     IP- Host target-box HostName &lt;IP address of target&gt; User sana IdentityFile ~/.ssh/target ProxyCommand ssh -q -W %h:%p jump-box</code> </pre> <br><h2>  Controlmaster </h2><br>  Si vous vous connectez à un hôte SSH distant à l'aide de méthodes d'authentification autres que l'authentification par clé, telles que l'authentification à deux facteurs, basée sur un mot de passe ou une clé SSH avec une phrase de passe, vous devrez peut-être saisir les informations requises plusieurs fois. <br><br>  Au lieu d'ouvrir plusieurs connexions SSH, vous pouvez utiliser l'option <code>ControlMaster</code> (uniquement sur les clients macOS / Linux) pour réutiliser une connexion existante et réduire le nombre de fois que vous devez saisir votre phrase secrète. <br><br>  Pour utiliser cette fonctionnalité, ajoutez les éléments suivants à votre fichier de configuration SSH: <br><br><pre> <code class="plaintext hljs">Host * ControlMaster auto ControlPath ~/.ssh/sockets/%r@%h-%p ControlPersist 600</code> </pre><br><h2>  Ordinateur distant autonome </h2><br>  Si vous êtes limité par un pare-feu ou que votre entreprise bloque vos machines virtuelles et qu'elles ne peuvent pas se connecter à Internet, l'extension Remote - SSH ne pourra pas se connecter à votre machine virtuelle car VS Code doit télécharger un composant appelé VS Code Server sur la machine distante. <br><br>  Cependant, vous pouvez maintenant résoudre ce problème avec un nouveau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">paramètre</a> utilisateur dans l'extension distante - SSH.  Si vous activez le paramètre <code>remote.SSH.allowLocalServerDownload</code> , l'extension installera d'abord VS Code Server sur le client, puis le copiera sur le serveur via SCP. <br><br>  Remarque  Il s'agit actuellement d'une fonctionnalité expérimentale, mais elle sera activée par défaut dans une future version. <br><br><h2>  Télécommande - Extension SSH Nightly </h2><br>  Si vous souhaitez tester de nouvelles mises à jour et fonctionnalités expérimentales dès qu'elles sont disponibles, installez l'extension Remote - SSH Nightly (supprimez d'abord l'extension stable Remote-SSH).  Il s'agit d'une version du jour de l'extension, où nous expérimentons de nouvelles fonctionnalités et de nouveaux paramètres avant de les ajouter à la version stable. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr472274/">https://habr.com/ru/post/fr472274/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr472262/index.html">Le condensé de matériaux intéressants pour le développeur mobile # 318 (du 14 au 20 octobre)</a></li>
<li><a href="../fr472264/index.html">Archéologie numérique et réalité virtuelle ou comment j'ai essayé de me faire des amis avec le BIM et la VR</a></li>
<li><a href="../fr472268/index.html">Amélioration des contrôles Microsoft Edge sur Chromium</a></li>
<li><a href="../fr472270/index.html">«Vous n'avez pas accès à la prière actuelle»: des perles hi-tech du Vatican ont été piratées en 15 minutes</a></li>
<li><a href="../fr472272/index.html">Un nouveau jeu avec une vieille ambiance sur Three.js. 2e partie</a></li>
<li><a href="../fr472278/index.html">Mon git commit préféré</a></li>
<li><a href="../fr472280/index.html">La tâche de déterminer la présence d'une paume sur un scanner veineux</a></li>
<li><a href="../fr472288/index.html">9 extensions de navigateur utiles pour les développeurs (liste pour 2020)</a></li>
<li><a href="../fr472290/index.html">Structures vs classes</a></li>
<li><a href="../fr472292/index.html">Blocage de contenu: la scène mondiale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>