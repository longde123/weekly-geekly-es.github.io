<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👓 👨🏽‍🔬 🌲 SP701 + PCAM-5C + 15 minutos + VITIS = MIPI fácil no FPGA 👆🏻 👨🏼‍🔧 ⛪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anotação 
 A interface MIPI hoje está se tornando uma interface cada vez mais popular para conectar câmeras e monitores. Por esse motivo, mais e mais ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SP701 + PCAM-5C + 15 minutos + VITIS = MIPI fácil no FPGA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476620/"><h2>  Anotação </h2><br>  A interface MIPI hoje está se tornando uma interface cada vez mais popular para conectar câmeras e monitores.  Por esse motivo, mais e mais kits de depuração baseados em FPGA contêm conectores de interface MIPI a bordo - para conectar câmeras e monitores.  Para começar a trabalhar com a nova tecnologia ou apenas para ver como é, os desenvolvedores estão tentando encontrar um guia adequado na Internet, que descreva as nuances relevantes do trabalho.  Por um lado, o caso de teste deve simplesmente subir no kit de depuração e, por outro lado, deve fornecer uma compreensão bastante simples e ampla do que está acontecendo nesse caso de teste. <br><br>  <b>O objetivo do artigo</b> é mostrar como começar a trabalhar com a interface MIPI usando uma das mais recentes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">depurações</a> do Xilinx - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SP701</a> , uma câmera com uma interface MIPI da Digilent <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PCAM-5C</a> e o ambiente de desenvolvimento Vivado + VITIS (SDK) da Xilinx <br><br><img src="https://habrastorage.org/webt/jy/-y/sa/jy-ysacn2v1otw1rtw8_029srlg.jpeg"><br><a name="habracut"></a><br><h2>  Lista de equipamentos </h2><br>  Começando com o primeiro lançamento do VITIS e Vivado 2019.2, o Xilinx oferece aos desenvolvedores a oportunidade de gerar um caso de teste para trabalhar com a interface MIPI na placa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SP701</a> .  Anteriormente, o projeto estava disponível para a placa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ZCU102</a> , no entanto, como o exemplo exigia uma câmera bastante específica, não tivemos a oportunidade de executar um projeto de teste.  Com o lançamento do orçamento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SP701</a> , que também conecta a câmera PCAM-5C, surgiu uma oportunidade. <br><br>  <i>PS0: o guia não informará o que é MIPI, em que consiste ou qualquer outra teoria que possa ser encontrada na Internet.</i>  <i>Aqui vamos nos concentrar em como gerar um projeto de teste.</i>  <i>Além disso, usando este projeto, você mesmo pode fixar os módulos adicionais e o processamento de vídeo especificados nos termos de referência do seu projeto.</i> <i><br></i>  <i>PS1: Não vamos reclamar, mas focar na ação.</i>  <i>Apenas fotos, apenas hardcore.</i> <br><br>  Vamos começar. <br><br><h2>  Software Necessário </h2><br>  Para este guia, precisaremos do Vivado 2019.2 e VITIS, que são baixados do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> .  O VITIS contém o Vivado, portanto, não há necessidade de baixar o VITIS e o Vivado, basta baixar e instalar o VITIS.  O Vivado será instalado automaticamente. <br><br><img src="https://habrastorage.org/webt/ys/e0/yg/yse0ygvqxqpstb11di-cxb6zwck.png"><br><br><h3>  Etapa 1: Criar um Projeto Vivado </h3><br>  1. Inicie o Vivado 2019.2 <br><br><img src="https://habrastorage.org/webt/yb/j2/62/ybj2620jr6viuslq5r6yktqj_10.png"><br><br>  2. Clique em “Criar projeto” (1) :: Clique em “Avançar” (2) <br><br><img src="https://habrastorage.org/webt/un/wa/xo/unwaxorjnotttje2h9jmd2qu4m4.jpeg"><br><br>  3. Especifique “Nome do projeto” (1) :: Especifique o diretório do projeto (2) :: Marque a caixa (3) :: Clique em “Avançar” (4) <br><br><img src="https://habrastorage.org/webt/zr/qs/ve/zrqsvep1887deaweze6h1hhdwdi.png"><br><br>  4. Selecione o tipo de projeto (1) :: Marque a caixa de seleção (2) :: Clique em “Avançar” (3) <br><br><img src="https://habrastorage.org/webt/bd/hk/jp/bdhkjp0__31bxlpnqe9twrztraw.png"><br><br>  5. Vá para a guia “Boards” (1) :: Localize e selecione SP701 (2) :: Clique em “Next” (3) <br><br><img src="https://habrastorage.org/webt/3c/qo/mj/3cqomjrq9depcimcrq6a11bsk2a.png"><br><br>  6. Clique em "Concluir" (1) <br><br><img src="https://habrastorage.org/webt/pa/ng/sq/pangsqtcar54zr6sqdrfux1h1za.png"><br><br><h3>  Etapa 2: instalar licenças </h3><br>  Considerando que usaremos o IP Core, que requer licenças, precisamos gerá-los e instalá-los.  O projeto de teste usa o IP para conectar a câmera (MIPI CSI-Rx) e a tela (MIPI DSI-Tx), para as quais a Xilinx oferece uma licença de teste por um período de 120 dias. <br><br>  PS: No projeto de teste, a saída da imagem é duplicada na interface HDMI, a presença de um monitor com a interface MIPI não é necessária, mas é necessária uma licença DSI-Tx. <br><br>  7. Obtenha uma licença para CSI-Rx (conexão da câmera) clicando no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> e clique em "Avaliar IP".  Depois siga as instruções. <br><br><img src="https://habrastorage.org/webt/mg/ad/rv/mgadrvdqpju8xe8fq3u_edeh6s0.png"><br><br><img src="https://habrastorage.org/webt/fb/4c/ks/fb4cksdjtyujwg8pyynwk3q8j5s.png"><br><br>  8. Obtenha uma licença para DSI-Tx (conexão de vídeo) clicando no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">link</a> e clique em "Avaliar IP".  Depois siga as instruções. <br><br><img src="https://habrastorage.org/webt/sw/ws/fv/swwsfveazvgnrz3avl0dbmi3uf4.png"><br><br><img src="https://habrastorage.org/webt/bm/tz/tx/bmtztxtpr3_m1jjebv-6d8wti0s.png"><br><br>  9. Faça o download dos arquivos de licença. <br><br>  10. Na janela Vivado, clique em “Ajuda” (1) :: Selecione “Gerenciar licença” (2) <br><br><img src="https://habrastorage.org/webt/zb/cb/q4/zbcbq4ofrjedau9gknfsr_zfn34.jpeg"><br><br>  11. No gerenciador de licenças, selecione “Carregar licença” (1) :: Depois “Copiar licença” (2).  Selecione licenças .lic baixadas para os núcleos IP CSI e DSI <br><br><img src="https://habrastorage.org/webt/z0/ar/od/z0aroddbnyffaxcia62cxot2jbq.png"><br><br>  12. No gerenciador de licenças, selecione “Exibir status da licença” (1) :: Verifique se as licenças foram coletadas corretamente (2) <br><br><img src="https://habrastorage.org/webt/fo/bk/m7/fobkm7suhdl9ywtea27c1cqrxda.jpeg"><br><br><h3>  Etapa 3: Criar um Projeto de Teste </h3><br>  13. No Vivado, clique em “Criar design de bloco” (1) :: Clique em “OK” (2) <br><br><img src="https://habrastorage.org/webt/4y/ho/nu/4yhonue7dwol1jcjhwfaisfvo-u.png"><br><br>  14. No campo IP Integrator, clique em “+” ou “ctrl + i” (1) :: Digite “mipi” no campo “Search” (2) :: Clique duas vezes em “MIPI CSI-2 Rx Subsystem” (3) <br><br><img src="https://habrastorage.org/webt/v2/5l/zv/v25lzvkk07amh5fvgw2ssymhn6g.png"><br><br>  15. Clique com o botão direito do mouse no IP criado (1) :: Selecione “Customize Block” (2) <br><br><img src="https://habrastorage.org/webt/gd/l6/z7/gdl6z7ylzjvbowbwbcudqidsnqo.png"><br><br>  16. Vá para a guia “Design de exemplo de aplicação” (1) :: Selecione “SP701” (2) :: Clique em “OK” (3) <br><br><img src="https://habrastorage.org/webt/sf/ja/yk/sfjaykzdosm3qj7rjhpbt9tc1de.jpeg"><br><br>  17. Clique com o botão direito do mouse em IP (1) :: Selecione "Abrir exemplo de design" (2) <br><br><img src="https://habrastorage.org/webt/ur/4f/4s/ur4f4squw_y_qxy7fyduehwg_-i.png"><br><br>  18. Clique em "OK" para salvar as alterações do projeto. <br><br><img src="https://habrastorage.org/webt/ac/fi/y5/acfiy5ssfelrkthxnrsqffkjweq.png"><br><br>  19. Especifique o diretório em que o projeto de teste estará localizado (observe que, para usuários do Windows, o caminho para a pasta deve ser o mais curto possível; caso contrário, o caminho para os núcleos IP internos do projeto poderá exceder 260 caracteres, o que causará um erro ao criar o projeto) (1) :: Instale a caixa de seleção (2) :: Clique em “OK” (3) :: Clique em “OK” (4) <br><br><img src="https://habrastorage.org/webt/ux/5i/gi/ux5igihyreb11hxjzwjxeuixsim.png"><br><br>  20. O projeto de teste será aberto em uma nova janela do Vivado.  Aguarde até a criação do projeto.  Isso levará alguns minutos. <br><br><img src="https://habrastorage.org/webt/fe/pf/kp/fepfkpgsalurmccfvw4xqogfpyy.png"><br><br>  21. Na janela do projeto de teste, clique em “Gerar fluxo de bits” (1) :: Clique em “Sim” (2) <br><br><img src="https://habrastorage.org/webt/ra/oi/f_/raoif__toyxls8yjc-sug-wse1c.png"><br><br>  22. Selecione o número preferido de IPs sintetizados simultaneamente (1): Clique em "OK" <br><br><img src="https://habrastorage.org/webt/rm/9k/t2/rm9kt26ndchqivorcjeyqhzkouy.png"><br><br>  23. Aguarde até que o arquivo de firmware FPGA seja criado (fluxo de bits) <br><br><h3>  Etapa 4: configuração e conexão </h3><br>  24. Conecte a câmera PCAM-5C ao conector MIPI CSI na placa SP701 <br><br>  25. Conecte o monitor HDMI e / ou a tela MIPI ao SP701 <br><br>  26. Conecte o cabo uUSB à placa SP701 <br><br>  27. Ligue a energia do SP701 <br><br>  28. Abra um aplicativo de terminal para a porta serial (por exemplo, Tera Term).  Devido ao fato de três portas COM diferentes serem reconhecidas no Tera Term, abrimos três sessões diferentes do Tera Term.  A velocidade do UART na qual as mensagens serão transmitidas tem uma velocidade de 9600 (verifique as configurações de uartlite IP no projeto de teste) <br><br><h3>  Iniciar e depuração </h3><br>  29. Inicie o VITIS do Vivado.  Clique em “Ferramentas” (1) :: Clique em “Iniciar VITIS” (2) <br><br><img src="https://habrastorage.org/webt/jp/8r/da/jp8rdadr1meqbmckmdwufzzcmpe.png"><br><br>  30. Especifique o diretório de trabalho.  Ele está localizado dentro do diretório do projeto de teste “mipi_ex :: mipi_csi2_rx_subsystem_0_ex :: SW :: xmipi_app” (1) no nosso caso :: Clique em “Launch” (2) <br><br><img src="https://habrastorage.org/webt/dc/gd/kr/dcgdkrxo_c9czkbrphibvukvd0a.png"><br><br>  31. Feche a guia "Bem-vindo" no VITIS <br><br><img src="https://habrastorage.org/webt/pp/7x/b7/pp7xb7onwcp0kl84zxv4sco0zxg.png"><br><br>  32. Agora temos acesso ao componente de software do nosso projeto, ou seja,  programa para o processador de software MicroBlaze.  Examine o código, se desejar. <br><br><img src="https://habrastorage.org/webt/sr/p-/3o/srp-3od0jpy-xaydz01jfb9_lsg.png"><br><br>  33. Clique na seta ao lado do ícone do bug (1) :: Clique em “Debug Configurations” (2) <br><br><img src="https://habrastorage.org/webt/uk/tz/ez/uktzez5nntynsxxhdsqoyruvcs8.png"><br><br>  34. Clique duas vezes em “Single Application Debug (GDB)” (1) :: Selecione “Debugger Executable” (2) :: Especifique o arquivo de firmware FPGA (.bit) criado por Vivado (3) :: Instale a caixa de seleção (4): : Clique em "Debug" (5) <br><br><img src="https://habrastorage.org/webt/zk/8r/lb/zk8rlb7dz2ruyntrk605h4smc7e.jpeg"><br><br>  35. Pressione o botão Iniciar e siga as instruções que aparecem no terminal Tera Term <br><br><img src="https://habrastorage.org/webt/kw/kw/1p/kwkw1pbm5bc2gha5xfquiohwyku.jpeg"><br><br>  36. Isso é tudo (não se esqueça de remover a tampa protetora da câmera;) <br><br><img src="https://habrastorage.org/webt/us/2j/j4/us2jj4158gwypwatvtwkixk8wr8.jpeg"><br><br><h2>  Conclusão </h2><br>  Como vimos, a criação de um projeto de teste com uma interface MIPI é bastante simples.  Foram necessários apenas o VITIS / Vivado e a disponibilidade do hardware apropriado (placa e câmera).  Quase todos os núcleos IP do Xilinx têm a capacidade de gerar um projeto de teste e, neste artigo, demonstramos como fazer isso. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt476620/">https://habr.com/ru/post/pt476620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt476592/index.html">CLRium # 6: faltam 9 dias</a></li>
<li><a href="../pt476594/index.html">Clientes estrangeiros e a legalização da renda de um programador na Federação Russa. O que deve ser feito e quanto vai custar?</a></li>
<li><a href="../pt476596/index.html">Siemens constrói uma planta de eletrólise para a produção de aço, alimentada por moinhos de vento</a></li>
<li><a href="../pt476610/index.html">Um pouco da teoria dos processos de negócios</a></li>
<li><a href="../pt476618/index.html">Como projetei o kit de foco</a></li>
<li><a href="../pt476624/index.html">Pipelines de qualidade no desenvolvimento móvel, parte 1: Android</a></li>
<li><a href="../pt476626/index.html">PVS-Studio nas nuvens: GitLab CI / CD</a></li>
<li><a href="../pt476628/index.html">O PVS-Studio vai para as nuvens: GitLab CI / CD</a></li>
<li><a href="../pt476636/index.html">Ajustando Firebird e Linux para um banco de dados de 691 GB de tamanho com mais de 1000 usuários</a></li>
<li><a href="../pt476640/index.html">Protegendo o Zimbra OSE da força bruta e ataques de DoS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>