<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÖ üßîüèº üö≤ ‚ÄúAutoma√ß√£o de infraestrutura. Por que estamos fazendo isso? ‚Äù (Denis Yakovlev) ‚öïÔ∏è üë®‚Äçüë®‚Äçüëß‚Äçüëß üà≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Proponho me familiarizar com a decodifica√ß√£o do relat√≥rio de Denis Yakovlev "Automa√ß√£o de infraestrutura. Por que estamos fazendo isso?" 


 O pr√≥prio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>‚ÄúAutoma√ß√£o de infraestrutura. Por que estamos fazendo isso? ‚Äù (Denis Yakovlev)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470572/"><h4 id="predlagayu-oznakomitsya-s-rasshifrovkoy-doklada-denisa-yakovleva-avtomatizaciya-infrastruktury-zachem-my-eto-delaem">  Proponho me familiarizar com a decodifica√ß√£o do relat√≥rio de Denis Yakovlev "Automa√ß√£o de infraestrutura. Por que estamos fazendo isso?" </h4><br><p>  <strong>O pr√≥prio relat√≥rio de 2016.</strong>  <strong>O relat√≥rio foi especialmente descriptografado para quem cria m√°quinas virtuais com as m√£os.</strong> </p><br><p>  Relate como n√≥s, no 2GIS, automatizamos o trabalho com infraestrutura. </p><br><p>  ‚ÄúVoc√™ precisa correr o mais r√°pido poss√≠vel para permanecer no lugar, mas para chegar a algum lugar, voc√™ deve correr pelo menos duas vezes mais r√°pido‚Äù (Alice no pa√≠s das maravilhas). </p><br><p>  O que essa frase significa para n√≥s?  Em um ambiente altamente competitivo, as empresas devem se esfor√ßar para entregar seus produtos aos usu√°rios o mais r√°pido poss√≠vel.  Diminuir o tempo de coloca√ß√£o no mercado √© uma tarefa em v√°rios n√≠veis.  Para resolv√™-lo, voc√™ precisa alterar os processos e as ferramentas de desenvolvimento.  Uma base importante para todo o processo de desenvolvimento √© a infraestrutura.  Quanto maior a infraestrutura, maiores problemas, casos de uso etc.  Se todas as opera√ß√µes com ele n√£o forem automatizadas, o n√∫mero de problemas aumentar√°.  Um deles √© o tempo que um desenvolvedor gasta em quest√µes de infraestrutura em vez de escrever a l√≥gica de neg√≥cios. </p><br><p>  Vamos falar sobre: </p><br><ul><li>  Quais problemas de infraestrutura enfrentaram as equipes; </li><li>  Como os processos de desenvolvimento e teste sofreram com isso; </li><li>  Como implementamos o OpenStack; </li><li>  Quais s√£o os nossos cen√°rios para usar o OpenStack; </li><li>  Como a automa√ß√£o recebeu um impulso adicional no desenvolvimento e novos produtos internos come√ßaram a aparecer; </li><li>  Quais aspectos que nos restam n√£o s√£o automatizados. </li></ul><br><iframe width="560" height="315" src="https://www.youtube.com/embed/18b-OWRKrO4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><p>  Sobre mim.  Empresa 2GIS.  Eu trabalho na empresa h√° dois anos. </p><br><p><img src="https://habrastorage.org/webt/gy/ag/2-/gyag2-xckvwdkl7gdm_7hx6pvwk.png"></p><br><p>  Equipe de Infraestrutura e Opera√ß√µes.  Damos suporte principalmente √† infraestrutura interna do departamento da Web.  Recentemente, outras equipes internas de produtos se juntaram a n√≥s.  Tamb√©m somos respons√°veis ‚Äã‚Äãpela opera√ß√£o dos produtos web da empresa em produ√ß√£o.  E tamb√©m estamos pesquisando e desenvolvendo novas ferramentas para facilitar nossa vida e melhorar a vida de nossos amados desenvolvedores.  Existem apenas 9 de n√≥s. </p><br><p><img src="https://habrastorage.org/webt/c3/uz/zk/c3uzzkplsh7pvj68b9jf3w0x6fw.png"></p><br><p>  Primeiro entendemos a infraestrutura.  Por que estamos falando dela?  O que √© isso  Quando come√ßamos a falar sobre ela? </p><br><p><img src="https://habrastorage.org/webt/kt/le/hu/ktlehulbfvgz5uniizdomjk3ksi.png"></p><br><p>  Desde os primeiros momentos de trabalho no produto e em algum projeto, temos uma pergunta - onde vamos implantar?  onde verificar os resultados?  onde testar e assim por diante. </p><br><p><img src="https://habrastorage.org/webt/vc/f1/og/vcf1ogp7ucfxxsl7fcr0a1ovn4i.png"></p><br><p>  Imediatamente a primeira resposta √© local.  Localmente porque √© muito simples.  Desenvolvido em seu laptop, lan√ßado, verificado - est√° tudo bem.  Voc√™ fica pensando - por que verificar al√©m do seu laptop?  Tudo funciona para mim. </p><br><p><img src="https://habrastorage.org/webt/tv/fo/8s/tvfo8s67s_3qr_lddgivqgufr1q.png"></p><br><p>  E se tivermos um sistema operacional no laptop e outro estiver girando na produ√ß√£o?  Ou nosso produto deve oferecer suporte a v√°rios sistemas operacionais? </p><br><p><img src="https://habrastorage.org/webt/oi/1v/3v/oi1v3vxhil-0wjcz2nccgv35ane.png"></p><br><p>  O caso n√£o √© coberto.  Ou seja, diferentes sistemas operacionais. </p><br><p><img src="https://habrastorage.org/webt/cz/az/nd/czaznduqrmabsvhdrj3ghflrjmk.png"></p><br><p>  Se tivermos a oportunidade e tomarmos uma decis√£o com muita for√ßa de vontade - temos Linux em todos os lugares.  Por exemplo, alguns Ubuntu.  O resto √© todo do maligno.  Parece-nos que resolvemos todos os nossos problemas. </p><br><p><img src="https://habrastorage.org/webt/fk/cm/n4/fkcmn40rxtplxg4wqwwrc5rfqzk.png"></p><br><p>  Mas simplesmente combinar o sistema operacional n√£o √© suficiente.  Precisamos de pacotes de uma determinada vers√£o. </p><br><p><img src="https://habrastorage.org/webt/ur/wk/v2/urwkv23z-j7zrihbl1khhw-w15y.png"></p><br><p>  pensamos em como resolver esse problema.  E lembre-se - n√≥s temos isolamento.  Coisas muito altas.  Gra√ßas a Deus existem tantos produtos no mercado.  Tomamos o VirtualBox.  Crie uma m√°quina virtual.  N√≥s lan√ßamos nosso produto.  Fazemos instant√¢neos.  Temos o meio ambiente. </p><br><p><img src="https://habrastorage.org/webt/r-/n9/bk/r-n9bka6ertxpzyqxpbhupanpky.png"></p><br><p>  Estamos desenvolvendo.  Nosso produto est√° ficando mais dif√≠cil.  Este n√£o √© mais apenas um aplicativo de banco de dados php.  O aplicativo cresceu para um sistema distribu√≠do.  Temos outros produtos chegando. </p><br><p><img src="https://habrastorage.org/webt/6s/i2/hk/6si2hkul51ld2phlv1mpz__aixw.png"></p><br><p>  A empresa est√° se desenvolvendo.  E temos novos casos de uso.  Todos esses produtos desejam integrar, para poderem trabalhar juntos.  Temos recursos que passam por v√°rios produtos.  Somos constantemente solicitados a mostrar o que voc√™ desenvolveu.  Vamos v√™-lo em algum lugar.  N√£o temos mais recursos para testes manuais.  Lembramos que h√° integra√ß√£o cont√≠nua, autoteste.  Para fazer isso, voc√™ precisa de um software adicional.  O ambiente local dos EUA, mesmo com todo o isolamento, n√£o √© mais suficiente.  √â aqui que a infraestrutura entra.  Precisamos de um local onde possamos implantar nossos produtos e mostrar a algu√©m os resultados.  De alguma forma, precisamos gerenciar tudo isso e deve ser conveniente. </p><br><p><img src="https://habrastorage.org/webt/pr/vf/uh/prvfuhn624yrkiadhp2hsbuyvfe.png"></p><br><p>  Vamos olhar para a nossa empresa 2GIS. </p><br><p><img src="https://habrastorage.org/webt/e-/a8/j-/e-a8j-63rvzelvponft65ysnbmw.png"></p><br><p>  Este √© um guia e mapas.  Voc√™ pode olhar para o mapa da cidade, procurar organiza√ß√µes. </p><br><p><img src="https://habrastorage.org/webt/iy/lp/rc/iylprcfa5i3k3gevbgac_aun2ai.png"></p><br><p>  Temos: produtos da web, m√≥veis, aplicativos de desktop.  Existem cerca de 35 equipes diferentes de tamanhos diferentes. </p><br><p><img src="https://habrastorage.org/webt/g4/za/ei/g4zaeixca9qx5xbjlb7c7pdhg-e.png"></p><br><p>  Que problemas tivemos com a infraestrutura?  No final de 2013, usamos proxmox.  Este √© um sistema de gerenciamento de virtualiza√ß√£o.  Utilizando-o, voc√™ pode criar m√°quinas virtuais KVM ou cont√™ineres OpenVZ.  Mas tudo isso √© feito manualmente atrav√©s de interfaces.  Para o pleno funcionamento, voc√™ ainda precisa entrar na m√°quina virtual e configurar a rede, dns. </p><br><p><img src="https://habrastorage.org/webt/jh/un/um/jhunumwvdccmklzouppnrkzu3ns.png"></p><br><p>  Portanto, por algum tempo, o fluxo de nosso desenvolvimento ficou como segue.  Como desenvolvedor, estou procurando administradores de t√≠quetes.  Os administradores, quando t√™m tempo, criam uma m√°quina virtual.  Eles fornecem um endere√ßo IP, login, senha.  Mas se eu precisar reimplementar esta m√°quina virtual, vou novamente para os administradores que j√° me olham com suspeita.  Eles dizem - um cara, tanto quanto poss√≠vel? </p><br><p><img src="https://habrastorage.org/webt/hm/1a/ls/hm1alsxmnf5lmpfgtmminlzvtdq.png"></p><br><p>  N√£o houve separa√ß√£o de projetos.  Havia um conjunto de m√°quinas virtuais em v√°rios servidores, onde os administradores criavam tudo com as m√£os.  Havia uma alta probabilidade de erro humano.  Voc√™ pode confundir o endere√ßo IP ou excluir a m√°quina virtual errada.  Muitos, muitos casos assim.  E a responsabilidade pela m√°quina virtual √© incompreens√≠vel.  Os desenvolvedores n√£o assumem responsabilidade, os administradores tamb√©m n√£o tomam banho de vapor.  N√£o est√° claro que algu√©m precise de uma m√°quina virtual ou que todo mundo a tenha esquecido e n√£o saiba. </p><br><p><img src="https://habrastorage.org/webt/3y/9e/pw/3y9epwkzviqkgupe0toc_9pbioo.png"></p><br><p>  Al√©m disso, h√° uma API fraca.  Os plugins s√£o pagos ou perl. </p><br><p><img src="https://habrastorage.org/webt/vb/pq/9y/vbpq9yat0roahzxzqzhca9i23hy.png"></p><br><p>  Mas, al√©m dos problemas, t√≠nhamos algo mais √∫til.  T√≠nhamos nosso pr√≥prio ferro, no qual tudo isso estava girando.  Nossos administradores de sistema s√£o √≥timos companheiros, sabem cozinhar esse ferro, cuidar dele e compr√°-lo corretamente.  E eles tiveram alguma experi√™ncia com virtualiza√ß√£o. </p><br><p><img src="https://habrastorage.org/webt/kn/tl/ic/kntlic-tm5c91z9ogulyo9zweqa.png"></p><br><p>  Come√ßamos a pensar: que solu√ß√£o nos conviria?  Como deve ser nossa infraestrutura para n√£o interferir no processo de desenvolvimento, mas ajudar? </p><br><p>  Obtivemos a seguinte lista de requisitos como resultado do estudo: </p><br><ul><li><p>  Utiliza√ß√£o eficaz de ferro.  N√£o queremos ter m√°quinas virtuais √≥rf√£s.  N√£o queremos apenas aquecer o ar no data center. </p><br></li><li><p>  Queremos ter recursos de equipe para que a equipe assuma a responsabilidade pelos recursos que usa.  E ela estava atenta a eles. </p><br></li><li><p>  Queremos que a solu√ß√£o seja modular, escolha apenas os servi√ßos de que precisamos.  E em caso de necessidade, com maior desenvolvimento, ser√° capaz de expandir. </p><br></li><li><p>  A solu√ß√£o deve ser finalizada facilmente.  Se novos requisitos aparecerem, poderemos refinar a solu√ß√£o para nossas necessidades espec√≠ficas. </p><br></li><li><p>  N√£o precisamos apenas de uma interface com o usu√°rio, precisamos de uma API para gravar nossas liga√ß√µes e gerenciar a infraestrutura. </p><br></li><li><p>  Queremos isolar as equipes, e especialmente a equipe de teste de carga.  Eu queria que ela n√£o perturbasse o resto. </p><br></li></ul><br><p><img src="https://habrastorage.org/webt/fg/nc/xf/fgncxfm2nnnkbfslzo0nnl35cfk.png"></p><br><p>  Quais foram as nossas op√ß√µes? </p><br><p>  Observamos a nuvem p√∫blica: AWS e muito mais.  A op√ß√£o √© atraente, pois eles enfrentam quase todos os problemas relacionados √† infraestrutura.  Era poss√≠vel levar e pagar muito dinheiro para essas empresas famosas, mas est√°vamos constrangidos pela situa√ß√£o repugnante com o d√≥lar (ou san√ß√µes).  Eu realmente n√£o queria bloquear nenhum fornecedor.  A terceira op√ß√£o, na qual analisamos o que temos no mercado de c√≥digo aberto?  Quais solu√ß√µes s√£o oferecidas?  Temos nosso pr√≥prio hardware, resta escolher algo entre esses muitos aplicativos de c√≥digo aberto. </p><br><p><img src="https://habrastorage.org/webt/qk/ii/sw/qkiiswbwmdnunz_qpef2z7vpdso.png"></p><br><p>  Ent√£o, no final, nossas pesquisas e experimentos nos levaram a um software chamado OpenStack.  Softinke, claro, parece muito rude. </p><br><p><img src="https://habrastorage.org/webt/o9/-8/rd/o9-8rd06u7nff83ufgzbdagqage.png"></p><br><p>  O OpenStack √© um software completo, de fato, √© um conjunto de servi√ßos para a constru√ß√£o de uma nuvem p√∫blica ou privada.  O OpenStack √© uma solu√ß√£o de c√≥digo aberto.  Todos os servi√ßos s√£o escritos em python.  Cada servi√ßo √© respons√°vel por sua tarefa, possui sua pr√≥pria API. </p><br><p><img src="https://habrastorage.org/webt/vw/x9/gm/vwx9gmn5e_jp0m9wcer_ajrj4e0.png"></p><br><p>  E parece assim.  Lembre-se desta imagem.  Ent√£o vamos voltar para ela.  Existem servi√ßos compartilhados (gerais).  Existem servi√ßos para esse fim: computa√ß√£o, rede, armazenamento.  E nosso aplicativo ou usu√°rio trabalha com esses servi√ßos. </p><br><p><img src="https://habrastorage.org/webt/1i/eg/1e/1ieg1ek2kopjwzgf_3_tsatwdtg.png"></p><br><p>  Solu√ß√£o de c√≥digo aberto.  O lan√ßamento ocorre meio ano.  O lan√ßamento inclui componentes b√°sicos.  Cada vers√£o inclui novos componentes que aparecem inicialmente nesta incubadora.  Eles passam algum tempo l√°, corrigem bugs, estabilizam e assim por diante.  E em algum momento, a comunidade decide que esse componente deve ser inclu√≠do nos componentes b√°sicos a partir do pr√≥ximo release.  H√° tamb√©m muitas correspond√™ncias, reuni√µes e confer√™ncias diferentes.  A maior confer√™ncia √© a OpenStack Summit.  Realizado todos os anos.  E na √∫ltima c√∫pula do OpenStack, havia cerca de quatro ou cinco mil participantes.  Um evento t√£o grande.  Muitos relat√≥rios. </p><br><p><img src="https://habrastorage.org/webt/ac/ms/go/acmsgowharhocay2-ypwcuhhwky.png"></p><br><p>  Muitas pessoas est√£o contribuindo para essa decis√£o.  Aqui dei apenas uma lista desses tops.  Essa lista √© suficiente para entender a seriedade do projeto e quais empresas e quantos recursos investem nele. </p><br><p><img src="https://habrastorage.org/webt/mu/jd/i_/mujdi_xe4zcvroyq_czco2ccwvm.png"></p><br><p>  Como resolvemos nossos problemas de infraestrutura. </p><br><ul><li>  Um dos componentes do OpenStack √© o planejador, que seleciona o host no qual a m√°quina virtual ser√° criada. </li><li>  A equipe agora tem seus pr√≥prios recursos.  Essa √© a quantidade de CPU, mem√≥ria e muito mais.  N√≥s nos livramos desse cen√°rio para criar um virtual no tiket (aplicativo). </li><li>  OpenStack √© um conjunto de servi√ßos que √©.  Pegamos apenas o kit b√°sico que fornecia nossas necessidades. </li><li>  Como o OpenStack √© de c√≥digo aberto, √© poss√≠vel modific√°-lo. </li><li>  Cada servi√ßo tem uma API.  Existem compila√ß√µes python.  Ou seja, √© bastante simples interagir com cada servi√ßo e escrever suas pr√≥prias liga√ß√µes. </li><li>  Isolamento.  Podemos isolar equipes para n√≥s em projetos, zonas de agrega√ß√£o, redes e assim por diante. </li></ul><br><p><img src="https://habrastorage.org/webt/db/th/sr/dbthsrjfwry6lmqpejowmzephv4.png"></p><br><p>  Os desenvolvedores da equipe receberam a infraestrutura como servi√ßo.  Como √© isso? </p><br><p><img src="https://habrastorage.org/webt/e7/q8/6y/e7q86ycmgunc1i0clqgi13hosza.png"></p><br><p>  Existem dois conceitos de pilha e modelo.  Stack √© um conjunto de recursos de nuvem: m√°quinas virtuais, rede, registros DNS e muito mais.  Um modelo √© uma descri√ß√£o dessa pilha.  No caso do OpenStack, este √© um arquivo YAML comum.  Aqui est√° parte do arquivo.  Ele diz que existe uma entidade como um servidor com um servidor OS Nova do tipo interno.  Para sua opera√ß√£o normal, voc√™ precisa de um endere√ßo IP e um registro DNS.  Aqui, os par√¢metros de nome s√£o aceitos como entrada, sabor √© uma descri√ß√£o dos recursos que este servidor precisa.  Sistema operacional da imagem.  key_name - qual chave p√∫blica colocar ao implantar o servidor.  Temos todos esses modelos no reposit√≥rio de cada um no git.  Todo mundo tem acesso.  Todos podem enviar uma solicita√ß√£o de recebimento. </p><br><p><img src="https://habrastorage.org/webt/ue/cn/yb/uecnybkseypqwackevttdl_urym.png"></p><br><p>  E a cria√ß√£o do Stack √© a seguinte.  Heat √© o componente OpenStack respons√°vel pela orquestra√ß√£o.  Dizemos isso neste contexto.  Este √© um √≥timo utilit√°rio que instalamos para n√≥s mesmos.  Dizemos muito calor, crie uma pilha com esse nome, aqui est√° uma descri√ß√£o dos recursos que precisamos para criar essa pilha.  E aqui est√° a entrada que nosso modelo exige, que descreve nossa pilha.  N√≥s carregamos no calor.  Ele mexe l√° por um tempo, cria todos os recursos necess√°rios para n√≥s dentro de si.  E tamb√©m neste modelo aqui podemos especificar a sa√≠da.  Quando o Heat criou o Stack, ele pode gerar informa√ß√µes: endere√ßo IP, acesso e o restante que pedimos.  Al√©m disso, j√° podemos aplicar essas informa√ß√µes para automa√ß√£o adicional. </p><br><p><img src="https://habrastorage.org/webt/8o/rw/wr/8orwwrabyca0-nmfxfeg8s9yrxg.png"></p><br><p>  Para que voc√™ n√£o pense que o OpenStack √© simples e barato, eu lhe direi para qual hardware o OpenStack funciona.  O painel de controle gira em 3 infra-n√≥s.  Estes s√£o servidores de ferro com esses recursos.  Esta √© a configura√ß√£o recomendada para failover. </p><br><p><img src="https://habrastorage.org/webt/kv/r1/nv/kvr1nvsoifsdsnvnf9lnyxrcdvw.png"></p><br><p>  Tamb√©m temos dois n√≥s de rede KVM que atendem nossa rede. </p><br><p><img src="https://habrastorage.org/webt/ql/gw/oh/qlgwohgkf6ry1g_iiy8ousjoaum.png"></p><br><p>  Recursos da equipe, giramos em 8 n√≥s de computa√ß√£o.  Eles s√£o divididos em 3 zonas de agrega√ß√£o.  Um n√≥ de computa√ß√£o √© alocado por zona para teste de carga.  L√°, os servidores s√£o criados apenas a partir da equipe de teste de carga.  Para n√£o interferir com o resto.  Temos uma zona de agrega√ß√£o para nosso projeto de automa√ß√£o de teste de GUI interno.  Ele tem certos requisitos.  Est√° localizado em uma zona de agrega√ß√£o separada.  Todo o restante de nossos ambientes de desenvolvimento, servidores e ambientes de teste est√£o girando na terceira grande zona de agrega√ß√£o.  S√£o necess√°rios 6 n√≥s de computa√ß√£o. </p><br><p><img src="https://habrastorage.org/webt/uq/qh/wb/uqqhwbqsf0aqg4xl4hibkvdjcyw.png"></p><br><p>  Giramos cerca de 350 m√°quinas virtuais para todas as equipes. </p><br><p><img src="https://habrastorage.org/webt/q9/u5/nw/q9u5nwuk8lajoby71bgk8ttftea.png"></p><br><p>  O que entendemos quando j√° t√≠nhamos ido de alguma maneira.  Para implantar e dar suporte a esse software, voc√™ precisa de uma equipe.  Equipe dependendo de seus recursos. </p><br><p><img src="https://habrastorage.org/webt/8b/cs/eb/8bcsebrogamrpv-i4aevm6brqsu.png"></p><br><p>  As equipes devem ter certas compet√™ncias. </p><br><p>  Primeiro de tudo, √© naturalmente Ansible.  A implanta√ß√£o do OpenStack √© escrita em Ansible.  Existe um projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">OpenStack-Ansible</a> .  Se voc√™ deseja adicionar o OpenStack-Ansible √†s suas necessidades, as pessoas que far√£o isso precisam possuir o Ansible. </p><br><p>  Experi√™ncia de virtualiza√ß√£o.  Voc√™ precisa ser capaz de cozinhar a virtualiza√ß√£o, precisa ajustar.  Entenda como isso funciona. </p><br><p>  A mesma rede. </p><br><p>  O mesmo vale para os servi√ßos de back-end que o OpenStack usa para seu trabalho.  Este banco de dados √© MySQL Galera e RabbitMQ como uma fila. </p><br><p>  Compreendendo como o DNS funciona.  Como configur√°-lo. </p><br><p>  O OpenStack √© escrito em python.  Voc√™ deve poder ler o c√≥digo.  Idealmente, voc√™ precisa ser capaz de corrigir.  Pesquisar corre√ß√µes da comunidade.  Ser capaz de estrear o c√≥digo.  Tudo isso √© muito √∫til.  Se uma equipe tem essa abordagem, sabe como usar uma abordagem como Infraestrutura como c√≥digo, como ansible, por exemplo, todas as altera√ß√µes s√£o armazenadas no c√≥digo, elas n√£o ter√£o problemas ao configurar m√£os. </p><br><p>  Integra√ß√£o cont√≠nua.  O conjunto de servi√ßos OpenStack inclui um servi√ßo como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">tempest</a> .  Nele, todos os testes s√£o escritos em todos os componentes.  Se alterarmos a configura√ß√£o, execute um diploma separado na instala√ß√£o da Multifuncional e execute <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">tempest</a> - procuramos ver se algo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">caiu</a> conosco.  O IC est√° configurado e a equipe deve entender isso e deve poder configurar tudo isso. </p><br><p><img src="https://habrastorage.org/webt/tf/ys/f5/tfysf5fh56lvcmsdh8ae1oqupnu.png"></p><br><p>  Porque tudo parece simples e atraente dado. </p><br><p><img src="https://habrastorage.org/webt/pn/yw/d3/pnywd3j3eyzqffrnz3egw_wfyg8.png"></p><br><p>  Mas quando voc√™ come√ßa a se aprofundar mais, entende que, de fato, tudo se parece com isso.  Isso pode ser uma surpresa para algu√©m. </p><br><p><img src="https://habrastorage.org/webt/5p/9d/uj/5p9dujin57sxp6qs8akdiw3fgxw.png"></p><br><p>  A introdu√ß√£o do OpenStack n√£o √© apenas uma solu√ß√£o t√©cnica.  Al√©m disso, voc√™ precisa poder vender, explicar √†s equipes o novo paradigma de como elas agora funcionam, quais benef√≠cios ela traz.  Como trabalhar com ele para obter lucro.  Escrevemos muita documenta√ß√£o.  A documenta√ß√£o est√° no formato in√≠cio r√°pido (in√≠cio r√°pido), primeiros passos (primeiros passos).  Ou seja, o que precisa ser feito para facilitar rapidamente sua vida e n√£o gastar muito tempo nela. </p><br><p>  Conduzimos o TechTalk, conversamos, criamos t√≥picos, mostramos, conversamos, agora veja agora voc√™ pode obter seu produto da seguinte maneira.  literalmente, aqui estamos escrevendo um modelo, estamos lan√ßando-o.  Tudo √© bem simples.  Agora voc√™ n√£o precisa procurar os administradores e pedir alguma coisa por l√°. </p><br><p>  Em casos especialmente dif√≠ceis, quando o projeto √© complexo, h√° muitos casos, chegamos √†s equipes, trabalhamos diretamente com as equipes.  Ou seja, eles de alguma forma tentaram ajud√°-los na automa√ß√£o de processos.  Configure todas as equipes.  Acabou com alguns insetos.  Eles entenderam que n√£o configuramos algo errado l√°.  Em geral, trabalho duro com equipes. </p><br><p><img src="https://habrastorage.org/webt/rh/kv/xo/rhkvxoaqqbbicptnizpn1iouykg.png"></p><br><p>  Recebemos uma r√°pida implanta√ß√£o de produtos.  Anteriormente, para receber produtos, era necess√°rio realizar muitas a√ß√µes manuais, interagir com muitas pessoas.  Agora temos a cria√ß√£o de Envinronment (Ambiente, servidor) por bot√£o.  E se o deploy for gravado e funcionar para o projeto, seremos implantados pelo bot√£o ou pelo novo Envinronment (Ambiente, servidores) com o produto instalado. </p><br><p>  A falta de uma infraestrutura normal foi um bloqueador para algumas equipes em termos de implementa√ß√£o do processo de IC dentro da equipe.  Resolvemos os problemas de infraestrutura, as equipes criadas no servidor de CI, configuramos o pipeline, as m√°quinas virtuais s√£o criadas no pipeline.  Em geral, eles deram um impulso ao desenvolvimento desses processos. </p><br><p>  Eles tamb√©m ajudaram alguns produtos internos que usam a infraestrutura para automatizar os testes.  O VM Master √© um produto que testa nosso online.  Ele precisa criar muitas m√°quinas virtuais para entrar no site a partir de diferentes navegadores, seguir algumas etapas para entender que o online funciona em todos os navegadores conhecidos.  Ou seja, eles o ajudaram muito. </p><br><p>  Um bom b√¥nus √© que eles descarregaram os administradores (eles mesmos).  Porque, em algum momento, a atividade de criar uma m√°quina virtual come√ßou a ocupar espa√ßo no tempo.  E todo mundo come√ßou a ficar nervoso.  Agora estamos fazendo coisas interessantes, produtos complexos.  Nos livramos da tarefa de rotina. </p><br><p><img src="https://habrastorage.org/webt/ho/0f/4z/ho0f4zmwursgmh8xbvcx8anakg8.png"></p><br><p>  Perguntas? </p><br><p>  Pergunta: Quanto tempo levou para implantar o OpenStack? </p><br><p>  Resposta: A pergunta √© complicada porque tivemos um processo que pode acomodar uma s√©rie de com√©dia.  Ele tem um alto limiar de entrada.  Compreendemos toda a nossa infraestrutura, procuramos uma solu√ß√£o - levou tr√™s meses.  Em um m√™s, lan√ßamos a primeira instala√ß√£o em algum lugar.  Adicionamos alguns projetos l√°.  Eles moravam l√°.  Ent√£o o fator humano aconteceu - eles atiraram na cabe√ßa desta instala√ß√£o.  Percebemos que a falta de toler√¢ncia a falhas √© ruim.  Ent√£o esperamos pelo ferro. </p><br><p>  Pergunta: Voc√™ usa suporte pago? </p><br><p>  Resposta: n√£o, n√£o usamos. </p><br><p>  Pergunta: Qual vers√£o do OpenStack voc√™ est√° usando? </p><br><p>  Resposta: As vers√µes do OpenStack s√£o chamadas de palavras.  Primeiro foi Juno, depois atualizamos para o Liberty. </p><br><p>  Pergunta: As m√°quinas virtuais s√£o criadas no pipeline Integra√ß√£o cont√≠nua? </p><br><p>  Resposta: Construir em Jenkins pode causar calor e criar uma m√°quina virtual. </p><br><p>  Pergunta: Voc√™ encontrou problemas com o compartilhamento de recursos?  Grosso modo, 2 m√°quinas virtuais est√£o no mesmo servidor f√≠sico.  Um deles come√ßa a carregar um disco, por exemplo, um banco de dados.  Se enfrentou, como voc√™ decidiu? </p><br><p>  Resposta: N√£o encontramos problemas com o compartilhamento de recursos.  Os produtos um do outro n√£o interferem muito.  Organizamos os scripts.  Se voc√™ precisar executar um cen√°rio pesado, execute testes de carga, precisar√° ir para a equipe de teste de carga e eles executar√£o o teste de carga. </p><br><p> :            - ? </p><br><p> :      OpenStack .   .       .         . </p><br><p> :     .         .   OpenStack      ? </p><br><p> :     .  OpenStack  .   . </p><br><p> :          OpenStack? </p><br><p> :     .      proxmox.     OpenStack. </p><br><p> :   DevOps? </p><br><p> : DevOps  ,          .    , ,           . </p><br><p> PS  2019       OpenStack  heat   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Terraform</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt470572/">https://habr.com/ru/post/pt470572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt470561/index.html">Minha experi√™ncia na empresa 1C</a></li>
<li><a href="../pt470563/index.html">Como os desenvolvedores vivem em Ulyanovsk e o que est√£o fazendo al√©m do trabalho?</a></li>
<li><a href="../pt470566/index.html">Preparando-se para a certifica√ß√£o profissional da Spring. Perguntas sobre Spring MVC</a></li>
<li><a href="../pt470568/index.html">Implanta√ß√£o azul-verde de aplicativos Spring com o Nginx Web Server</a></li>
<li><a href="../pt470570/index.html">GridmiAPI - uma biblioteca Android simples e flex√≠vel para trabalhar com REST e RPC</a></li>
<li><a href="../pt470576/index.html">Os bancos da Am√©rica nos pr√≥ximos anos se livrar√£o de 200.000 empregos</a></li>
<li><a href="../pt470578/index.html">Como "humanizamos" a contabilidade em um banco m√≥vel</a></li>
<li><a href="../pt470582/index.html">Verificando a interface do usu√°rio da Telerik quanto √† UWP como uma maneira de come√ßar a usar o PVS-Studio</a></li>
<li><a href="../pt470584/index.html">Verifique a interface do usu√°rio da Telerik para obter UWP para se familiarizar com o PVS-Studio</a></li>
<li><a href="../pt470592/index.html">Revis√£o do Plesk - pain√©is de controle de hospedagem e site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>