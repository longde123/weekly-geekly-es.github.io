<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÇüèø üë©üèø‚Äçü§ù‚Äçüë©üèª ‚ôëÔ∏è Outils de d√©veloppement Node.js. Appel de proc√©dure √† distance sur les sockets Web üòΩ üî° ‚èÆÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les histoires d'horreur parlent souvent de la technologie Websocket, par exemple, qu'elle n'est pas prise en charge par les navigateurs Web ou que les...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Outils de d√©veloppement Node.js. Appel de proc√©dure √† distance sur les sockets Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459978/"> Les histoires d'horreur parlent souvent de la technologie Websocket, par exemple, qu'elle n'est pas prise en charge par les navigateurs Web ou que les fournisseurs / administrateurs suppriment le trafic Websocket - elle ne peut donc pas √™tre utilis√©e dans les applications.  D'un autre c√¥t√©, les d√©veloppeurs ne pr√©voient pas toujours les pi√®ges de la technologie Websocket, comme toute autre technologie.  En ce qui concerne les limitations all√©gu√©es, je dirai tout de suite que 96,8% des navigateurs Web prennent en charge la technologie Websocket aujourd'hui.  On peut dire que 3,2% restant √† la mer, c'est beaucoup, ce sont des millions d'utilisateurs.  Je suis totalement d'accord avec toi.  Seul tout est connu en comparaison.  Le m√™me XmlHttpRequest, que tout le monde utilise en Ajax depuis de nombreuses ann√©es, prend en charge 97,17% des navigateurs Web (pas beaucoup plus, non?), Et r√©cup√®re en g√©n√©ral, 93,08% des navigateurs Web.  Contrairement √† websocket, un tel pourcentage (et auparavant encore plus bas) n'a arr√™t√© personne depuis longtemps lors de l'utilisation de la technologie Ajax.  Donc, utiliser le repli sur les longs sondages n'a actuellement aucun sens.  Si ce n'est que parce que les navigateurs Web qui ne prennent pas en charge WebSocket sont les m√™mes navigateurs Web qui ne prennent pas en charge XmlHttpRequest, et en r√©alit√©, aucune solution de secours ne se produira. <br><br>  La deuxi√®me histoire d'horreur, interdisant sur le Websocket des fournisseurs ou des administrateurs de r√©seaux d'entreprise, est √©galement d√©raisonnable, car maintenant tout le monde utilise le protocole https, et il est impossible de comprendre que la connexion Websocket est ouverte (sans casser https). <br><br>  Quant aux vraies limitations et aux moyens de les surmonter, je vous en parlerai dans cet article, sur l'exemple du d√©veloppement de la zone d'administration web de l'application. <br><a name="habracut"></a><br>  Ainsi, l'objet WebSocket dans le navigateur Web a, franchement, un ensemble de m√©thodes tr√®s concis: send () et close (), ainsi que les m√©thodes addEventListener (), removeEventListener () et dispatchEvent () h√©rit√©es de l'objet EventTarget.  Par cons√©quent, le d√©veloppeur doit utiliser des biblioth√®ques (g√©n√©ralement) ou ind√©pendamment (presque impossible) pour r√©soudre plusieurs probl√®mes. <br><br>  Commen√ßons par la t√¢che la plus compr√©hensible.  La connexion au serveur est interrompue p√©riodiquement.  La reconnexion est assez simple.  Mais si vous vous souvenez que les messages du client et du serveur continuent de circuler √† ce moment, tout devient imm√©diatement et beaucoup plus compliqu√©.  En g√©n√©ral, un message peut √™tre perdu si un m√©canisme de confirmation pour le message re√ßu n'est pas fourni, ou remis (m√™me plusieurs fois) si le m√©canisme de confirmation est fourni, mais l'√©chec s'est produit juste au moment apr√®s la r√©ception et avant la confirmation du message. <br><br>  Si vous avez besoin d'une livraison de message garantie et / ou d'une livraison de message sans prise, il existe des protocoles sp√©ciaux pour l'impl√©mentation, par exemple, AMQP et MQTT, qui fonctionnent avec le transport websocket.  Mais aujourd'hui, nous ne les consid√©rerons pas. <br><br>  La plupart des biblioth√®ques pour travailler avec websocket prennent en charge la transparence pour que le programmeur se reconnecte au serveur.  L'utilisation d'une telle biblioth√®que est toujours plus fiable que le d√©veloppement de votre impl√©mentation. <br><br>  Ensuite, vous devez impl√©menter l'infrastructure d'envoi et de r√©ception de messages asynchrones.  Pour ce faire, utilisez le gestionnaire d'√©v√©nements onmessage ¬´nu¬ª sans liaison suppl√©mentaire, une t√¢che ingrate.  Une telle infrastructure peut √™tre, par exemple, un appel de proc√©dure √† distance (RPC).  L'id id a √©t√© introduit dans la sp√©cification json-rpc, sp√©cifiquement pour travailler avec le transport websocket, qui vous permet de mapper l'appel de proc√©dure distante par le client au message de r√©ponse du serveur web.  Je pr√©f√©rerais ce protocole √† toutes les autres possibilit√©s, mais jusqu'√† pr√©sent, je n'ai pas trouv√© d'impl√©mentation r√©ussie de ce protocole pour la partie serveur sur node.js. <br><br>  Et enfin, vous devez impl√©menter la mise √† l'√©chelle.  Rappelez-vous que la connexion entre le client et le serveur se produit p√©riodiquement.  Si la puissance d'un serveur ne nous suffit pas, nous pouvons augmenter plusieurs serveurs.  Dans ce cas, une fois la connexion d√©connect√©e, la connexion au m√™me serveur n'est pas garantie.  En r√®gle g√©n√©rale, un serveur Redis ou un cluster de serveurs Redis est utilis√© pour coordonner plusieurs serveurs WebSocket. <br><br>  Et, malheureusement, t√¥t ou tard, nous rencontrerons de toute fa√ßon les performances du syst√®me, car les capacit√©s de node.js dans le nombre de connexions Websocket qui sont ouvertes simultan√©ment (ne confondez pas cela avec les performances) sont nettement inf√©rieures √† celles des serveurs sp√©cialis√©s tels que les files d'attente de messages et les courtiers.  Et la n√©cessit√© d'un √©change crois√© entre toutes les instances de serveurs WebSocket via le cluster de serveurs Redis, apr√®s un certain point critique, n'entra√Ænera pas une augmentation significative du nombre de connexions ouvertes.  La fa√ßon de r√©soudre ce probl√®me consiste √† utiliser des serveurs sp√©cialis√©s, tels que AMQP et MQTT, qui fonctionnent, y compris avec le transport Websocket.  Mais aujourd'hui, nous ne les consid√©rerons pas. <br><br>  Comme vous pouvez le voir dans la liste des t√¢ches r√©pertori√©es, faire du v√©lo tout en travaillant avec websocket prend beaucoup de temps, et m√™me impossible si vous avez besoin de faire √©voluer la solution sur plusieurs serveurs websocket. <br><br>  Par cons√©quent, je propose de consid√©rer plusieurs biblioth√®ques populaires qui impl√©mentent le travail avec websocket. <br><br>  Je vais imm√©diatement exclure de la consid√©ration les biblioth√®ques qui mettent en ≈ìuvre exclusivement le repli sur les modes de transport obsol√®tes, car aujourd'hui cette fonctionnalit√© n'est pas pertinente, et les biblioth√®ques qui impl√©mentent une fonctionnalit√© plus large, en r√®gle g√©n√©rale, impl√©mentent √©galement le repli sur les modes de transport obsol√®tes. <br><br>  Je vais commencer par la biblioth√®que la plus populaire - socket.io.  Vous pouvez maintenant entendre l'opinion, tr√®s probablement juste, que cette biblioth√®que est lente et co√ªteuse en termes de ressources.  C'est probablement le cas, et cela fonctionne plus lentement que le Websocket natif.  Cependant, c'est aujourd'hui la biblioth√®que la plus d√©velopp√©e par ses moyens.  Et, encore une fois, lorsque vous travaillez avec websocket, le principal facteur limitant n'est pas la vitesse, mais le nombre de connexions ouvertes simultan√©ment avec des clients uniques.  Et cette question est d√©j√† mieux r√©solue en √©tablissant des connexions avec les clients vers des serveurs sp√©cialis√©s. <br><br>  Ainsi, soket.io impl√©mente une r√©cup√©ration fiable lors de la d√©connexion du serveur et de la mise √† l'√©chelle √† l'aide d'un serveur ou d'un cluster de serveurs redis.  socket.io, en fait, impl√©mente son propre protocole de messagerie individuel, qui vous permet d'impl√©menter la messagerie entre le client et le serveur sans √™tre li√© √† un langage de programmation sp√©cifique. <br><br>  Une caract√©ristique int√©ressante de socket.io est la confirmation du traitement des √©v√©nements, dans lequel un objet arbitraire peut √™tre renvoy√© du serveur au client, ce qui permet des appels de proc√©dure √† distance (bien qu'il ne soit pas conforme √† la norme json-rpc). <br><br>  Aussi, pr√©liminaire, j'ai examin√© deux autres biblioth√®ques int√©ressantes, dont je vais bri√®vement parler ci-dessous. <br><br>  Biblioth√®que Faye <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">faye.jcoglan.com</a> .  Il impl√©mente le protocole bayeux, qui a √©t√© d√©velopp√© dans le cadre du projet CometD et impl√©mente l'abonnement / distribution de messages aux canaux de messages.  Ce projet prend √©galement en charge la mise √† l'√©chelle √† l'aide d'un serveur ou d'un cluster de serveurs redis.  Une tentative pour trouver un moyen d'impl√©menter RPC a √©chou√© car il ne cadrait pas avec le sch√©ma du protocole de Bayeux. <br><br>  Dans le projet socketcluster <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">socketcluster.io</a> , l'accent est mis sur la mise √† l'√©chelle du serveur websocket.  Dans le m√™me temps, le cluster de serveurs websocket n'est pas cr√©√© sur la base du serveur redis, comme dans les deux premi√®res biblioth√®ques mentionn√©es, mais sur la base de node.js.  √Ä cet √©gard, lors du d√©ploiement du cluster, il a √©t√© n√©cessaire de lancer une infrastructure assez complexe de courtiers et de travailleurs. <br><br>  Passons maintenant √† l'impl√©mentation de RPC sur socket.io.  Comme je l'ai dit plus haut, cette biblioth√®que a d√©j√† impl√©ment√© la possibilit√© d'√©changer des objets entre le client et le serveur: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'socket.io-client'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> socket = io({ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'/ws'</span></span>, <span class="hljs-attr"><span class="hljs-attr">transports</span></span>: [<span class="hljs-string"><span class="hljs-string">'websocket'</span></span>] }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> remoteCall = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { socket.emit(<span class="hljs-string"><span class="hljs-string">'remote-call'</span></span>, data, (response) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.error) { reject(response); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { resolve(response); } }); });</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http'</span></span>).createServer(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> io = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'socket.io'</span></span>)(server, { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'/ws'</span></span> }); io.on(<span class="hljs-string"><span class="hljs-string">'connection'</span></span>, (socket) =&gt; { socket.on(<span class="hljs-string"><span class="hljs-string">'remote-call'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (data, callback) =&gt; { handleRemoteCall(socket, data, callback); }); }); server.listen(<span class="hljs-number"><span class="hljs-number">5000</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'dashboard backend listening on *:5000'</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handleRemoteCall = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">socket, data, callback</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> response =... callback(response) }</code> </pre><br>  C'est le sch√©ma g√©n√©ral.  Nous allons maintenant consid√©rer chacune des parties par rapport √† une application sp√©cifique.  Pour construire le panneau d'administration, j'ai utilis√© la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react</a> -admin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/marmelab/react-admin</a> .  L'√©change de donn√©es avec le serveur de cette biblioth√®que est mis en ≈ìuvre √† l'aide d'un fournisseur de donn√©es, qui a un sch√©ma tr√®s pratique, presque une sorte de standard.  Par exemple, pour obtenir une liste, la m√©thode est appel√©e: <br><br><pre> <code class="javascript hljs">dataProvider( <span class="hljs-string"><span class="hljs-string">'GET_LIST'</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, { <span class="hljs-attr"><span class="hljs-attr">pagination</span></span>: { <span class="hljs-attr"><span class="hljs-attr">page</span></span>: {int}, <span class="hljs-attr"><span class="hljs-attr">perPage</span></span>: {int} }, <span class="hljs-attr"><span class="hljs-attr">sort</span></span>: { <span class="hljs-attr"><span class="hljs-attr">field</span></span>: {string}, <span class="hljs-attr"><span class="hljs-attr">order</span></span>: {string} }, <span class="hljs-attr"><span class="hljs-attr">filter</span></span>: { <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span> } }</code> </pre><br>  Cette m√©thode dans une r√©ponse asynchrone renvoie un objet: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [  ], <span class="hljs-attr"><span class="hljs-attr">total</span></span>:      }</code> </pre><br>  Il existe actuellement un nombre impressionnant d'impl√©mentations de fournisseurs de donn√©es React-Admin pour divers serveurs et frameworks (par exemple Firebase, Spring Boot, Graphql, etc.).  Dans le cas de RPC, l'impl√©mentation s'est av√©r√©e √™tre la plus concise, puisque l'objet est transf√©r√© dans sa forme d'origine √† l'appel de fonction emit: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> io <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'socket.io-client'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> socket = io({ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'/ws'</span></span>, <span class="hljs-attr"><span class="hljs-attr">transports</span></span>: [<span class="hljs-string"><span class="hljs-string">'websocket'</span></span>] }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (action, collection, payload = {}) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { socket.emit(<span class="hljs-string"><span class="hljs-string">'remote-call'</span></span>, {action, collection, payload}, (response) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.error) { reject(response); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { resolve(response); } }); });</code> </pre><br>  Malheureusement, un peu plus de travail a d√ª √™tre fait c√¥t√© serveur.  Pour organiser le mappage des fonctions qui g√®rent l'appel distant, un routeur similaire √† express.js a √©t√© d√©velopp√©.  Ce n'est qu'au lieu de la signature du middleware (req, res, next) que l'impl√©mentation s'appuie sur la signature (socket, payload, callback).  En cons√©quence, nous avons tous obtenu le code habituel: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Router = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./router'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> router = Router(); router.use(<span class="hljs-string"><span class="hljs-string">'GET_LIST'</span></span>, (socket, payload, callback) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> limit = <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(payload.pagination.perPage); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> offset = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Number</span></span></span></span><span class="hljs-function"><span class="hljs-params">(payload.pagination.page</span></span></span><span class="hljs-function">) - 1) * </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">limit</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{data: users.slice(offset, offset + limit </span></span></span><span class="hljs-function">), </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">total</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">users</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">length</span></span></span><span class="hljs-function">}); }); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">router</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">use</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'GET_ONE'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, (socket, payload, callback</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: users[payload.id]}); }); router.use(<span class="hljs-string"><span class="hljs-string">'UPDATE'</span></span>, (socket, payload, callback) =&gt; { users[payload.id] = payload.data <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: users[payload.id] }); }); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = router; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> users = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10000</span></span>; i++) { users.push({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: i, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">`name of </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${i}</span></span></span><span class="hljs-string">`</span></span>}); }</code> </pre><br>  Les d√©tails de la mise en ≈ìuvre du routeur peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans le r√©f√©rentiel du projet.</a> <br><br>  Il ne reste plus qu'√† assigner un fournisseur pour le composant Admin: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Admin, Resource, EditGuesser } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-admin'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UserList <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./UserList'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dataProvider <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./wsProvider'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;Admin dataProvider={dataProvider}&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Resource</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"users"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">list</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{UserList}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">edit</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{EditGuesser}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Admin</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App;</code> </pre><br><br>  Liens utiles <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1.www.infoq.com/articles/Web-Sockets-Proxy-Servers</a> <br><br>  apapacy@gmail.com <br>  14 juillet 2019 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459978/">https://habr.com/ru/post/fr459978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459964/index.html">8 astuces UI simples pour dynamiser la conception d'un prototype sans recourir √† l'animation</a></li>
<li><a href="../fr459968/index.html">Qu'est-il vraiment arriv√© au Boeing malaisien disparu (partie 3/3)</a></li>
<li><a href="../fr459970/index.html">Promise.allSettled</a></li>
<li><a href="../fr459972/index.html">D√©veloppement pour Docker. Environnement local. Partie 1</a></li>
<li><a href="../fr459976/index.html">Nouvelle version gratuite de Nemesida WAF pour NGINX</a></li>
<li><a href="../fr459980/index.html">Lettres nig√©rianes de haute technologie</a></li>
<li><a href="../fr459982/index.html">Analyseurs de Roslyn. Comment √©crire du code rapidement et avec pr√©cision</a></li>
<li><a href="../fr459984/index.html">Construire une infrastructure en tant que code avec GitLab et Ansible</a></li>
<li><a href="../fr459988/index.html">Le chien a mang√© sur des r√©seaux de neurones</a></li>
<li><a href="../fr459990/index.html">Immersion in Move - le langage de programmation de la cha√Æne de blocs Libra de Facebook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>