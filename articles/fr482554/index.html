<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏽‍🤝‍🧑🏼 🌈 🍬 Maison intelligente avec Xiaomi sur l'exemple d'un bain 👨‍🎤 🚦 🥘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sur Internet, il y a beaucoup de critiques et de vidéos sur la construction de maisons intelligentes. Il y a une opinion que tout cela est assez cher ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maison intelligente avec Xiaomi sur l'exemple d'un bain</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plesk/blog/482554/"> Sur Internet, il y a beaucoup de critiques et de vidéos sur la construction de maisons intelligentes.  Il y a une opinion que tout cela est assez cher et gênant dans l'organisation, c'est-à-dire, en général, le lot des geeks.  Mais les progrès ne s'arrêtent pas.  Les appareils deviennent moins chers, tandis que plus fonctionnels, et la conception et l'installation sont assez simples.  Cependant, fondamentalement, les critiques se concentrent sur 1-2 exemples d'utilisation, ne couvrant pratiquement pas les nuances et sans créer une image holistique.  Par conséquent, dans cet article, je veux passer en revue le projet terminé, démontrer les scénarios d'utilisation et les pièges dans la construction d'une maison intelligente à l'aide d'appareils Xiaomi en utilisant l'exemple d'une baignoire.  Les idées décrites avec de légères variations peuvent être appliquées à l'automatisation de l'appartement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9h/lb/tj/9hlbtjf6rdghf--lzwsq-5bysk8.jpeg" alt="image" width="400" height="400"></div><br><a name="habracut"></a><br><h2>  Contexte ou pourquoi tout cela est nécessaire </h2><br>  Pour commencer, un peu de fond pour clarifier le contexte.  Au début de l'automne 2018, la finition du bain a été achevée et mise en service.  Le bain public est un bâtiment autonome avec chauffage et approvisionnement en eau toute l'année. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/wd/o5/nswdo5svyprgue1sgxhojmb83kk.jpeg" alt="image"></div><br>  Pour des raisons évidentes, personne ne vit constamment dans les bains et ne contrôle pas l'état des lieux.  Autant que je voudrais, une visite au bain n'est pas non plus un événement très fréquent.  En conséquence, des réflexions sur la création d'un bain «intelligent» étaient présentes dès le début du projet.  Tout d'abord, pour des raisons de sécurité (incendie, inondation, contrôle d'accès).  Par exemple, éteindre le chauffage à -35 degrés dans la rue (j'habite à Novossibirsk) est une situation très dangereuse.  Cependant, contrairement à la maison principale, je n'ai pas réfléchi au projet d'automatisation de la baignoire dès le début et je n'ai pas fait de câblage supplémentaire aux bons endroits.  En revanche, Internet a été réalisé dans les bains publics et une surveillance vidéo est en cours pour l'apparition de deux autres bâtiments (vous pouvez évaluer visuellement ce qui se passe). <br><br>  De retour d'un voyage d'affaires en novembre 2019, le soir je suis allé aux bains publics, j'ai ouvert la porte d'entrée et j'ai été choqué par ce que j'ai vu.  Les LED du point WiFi m'ont clignoté dans l'obscurité et un jet d'eau a jailli de mes pieds.  Autrement dit, des inondations se sont produites, alors que l'électricité n'a pas été coupée.  L'eau dans les bains est organisée à l'aide de son propre puits, d'une pompe submersible et d'une automatisation qui contrôle le processus.  Comme il s'est avéré plus tard, l'un des raccords de l'échangeur des toilettes a été perturbé et a inondé toutes les pièces.  Je n'ai jamais découvert pourquoi l'automatisation était dommage et toujours désactivée, mais elle a réussi à pomper 15 cm d'eau en 30 carrés.  Dans la rue ce jour-là, il faisait -14 degrés.  Le sol chaud a fait face, continuant à maintenir la température ambiante au niveau approprié, mais 100% d'humidité est apparue.  Il était impossible de tergiverser davantage sur l'organisation d'une maison intelligente - vous devez commencer à le faire. <br><br><h2>  Sélection d'équipement </h2><br>  Lors de la construction de la maison principale, j'ai acquis une expérience de travail avec les appareils <a href="https://eldesalarms.com/">Eldes</a> (le câblage correspondant a été créé).  Une partie de l'automatisation se fait sur le <a href="https://www.raspberrypi.org/">Raspberry PI</a> .  Une autre partie <a href="https://www.aqara.com/en/home.html">concerne les appareils Xiaomi Aqara</a> .  L'option avec Raspberry PI était la plus attrayante pour moi et elle a d'abord été envisagée pour les bains publics.  Mais, malheureusement, cela nécessite beaucoup plus d'efforts d'organisation.  Ce n'est toujours pas un appareil plug-and-play - commençant par des exercices avec du matériel et se terminant par un logiciel d'écriture pour vos propres besoins.  Pour certaines raisons, <a href="https://mjdm.ru/">MajorDoMo n'était</a> pas content.  Traverser Raspberry PI, ZigBee Adapter (pour utiliser les capteurs sans fil Xiaomi) et Apple HomeKit ont nécessité une étude (et l'interface Apple HomeKit n'est pas très heureuse pour le moment).  Il n'y avait pas beaucoup de temps (je ne voulais pas répéter la situation), et il n'y avait pas de câblage pour chaque point souhaité, j'ai donc décidé de tout faire sur les appareils Xiaomi. <br><br>  Le périphérique principal dans cette situation est le concentrateur.  Dans le cas de Xiaomi, il existe deux options pour le concentrateur: Xiaomi Mi Smart Home Gateway 2 et Xiaomi Aqara Gateway.  Ce dernier est environ deux fois plus cher, plus adapté au marché local et est capable d'intégrer des appareils dans Apple HomeKit.  Cependant, si vous installez l'application Aqara Home et sélectionnez la région «Russie», au moment de la rédaction de ces lignes, seuls 13 appareils différents (commutateurs, prises, capteurs) seront disponibles.  Si vous installez l'application Xiaomi Home, sélectionnez la région «Chine continentale», puis des centaines d'appareils seront disponibles pour la connexion.  Cependant, si vous sélectionnez la région «Chine continentale», vous ne pourrez pas connecter une prise européenne et vice versa.  La sélection de la région «Chine continentale» dans le cadre de l'application Aqara Home ne fournit pas l'intégralité des appareils présents dans Xiaomi Home avec la même région.  Peur d'incompatibilité, j'ai décidé de m'arrêter sur le hub Xiaomi Mi Smart Home Gateway 2. Le prix d'émission est d'environ 2000 p.  Soit dit en passant, le moyeu lui-même agit comme une lampe - cela peut être pris en compte lors de l'installation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vs/ul/kx/vsulkxlnghjjindbwwmxw9aemxq.jpeg" alt="image"></div><br>  Une autre question intéressante est de savoir combien de temps cela fonctionnera.  Il ne s'agit même pas de capteurs et de batteries, mais de synchronisation et de stockage de données dans le cloud.  Le compte est actuellement gratuit.  Toutes les informations sont stockées sur les serveurs Xiaomi.  Si demain les gars décident que les utilisateurs de Russie ne devraient pas stocker de données dans la région "Chine continentale" ou si Roskomnadzor interdit leurs serveurs pour une raison quelconque, alors toute la maison intelligente risque de se transformer en citrouille.  J'ai décidé moi-même que dans ce cas, les capteurs resteront et le concentrateur sera remplacé par l'adaptateur Raspberri PI + ZigBee. <br><br><h2>  Contrôle et prévention des fuites </h2><br>  Le premier et le plus important scénario d'automatisation était une continuation naturelle du problème - en cas de fuite, vous devez couper l'alimentation en eau, c'est-à-dire la pompe, et envoyer une notification du problème au téléphone.  Il y avait deux endroits potentiellement dangereux pour l'apparition de fuites. <br><br>  En plus du concentrateur pour ce scénario, deux capteurs de fuite et une prise murale intelligente étaient nécessaires.  Le prix du capteur de fuite est d'environ 1400 r.  Le prix d'une prise murale intelligente est d'environ 1700 p.  Les capteurs de fuite sont autonomes, ils fonctionnent sur piles.  Le fabricant prétend qu'une seule batterie suffit pour 2 ans. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bt/d3/q2/btd3q2gftpvfsf_drdszmsisfwm.jpeg" alt="image"></div><br>  L'installation d'une prise intelligente était un peu compliquée car des prises carrées sont nécessaires pour les points de vente chinois, qui ne sont pas vendus dans nos magasins habituels (mais peuvent être commandés).  Percer des trous carrés est toujours un plaisir.  De plus, dans le bon sens, vous avez besoin d'un adaptateur, bien qu'il existe également une prise pour une prise européenne.  Dans la version Aqara pour le marché local, il n'y a actuellement pas de prise murale pour le montage mural, ce qui nous relie à la région «Chine continentale».  Alternativement, vous pouvez installer une prise ordinaire, brancher une prise intelligente avec une prise de Xiaomi, mais cela nécessiterait deux adaptateurs supplémentaires.  Une autre alternative est un relais.  Mais je me suis installé sur une prise murale. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qe/rg/pg/qergpgrjkaqqosy5xr2pqc_hli8.jpeg" alt="image"></div><br>  Dans l'application Xiaomi Home, une prise et un capteur ont été ajoutés.  Ensuite, le scénario «en cas de fuite» est prescrit pour deux actions: fermer la prise et envoyer une alerte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p7/pj/ub/p7pjubzhpjzb6tt_aoxrdd20_fs.jpeg" alt="image"></div><br>  Le premier capteur de fuite a été installé à côté de la pompe (et, en fait, à côté du moyeu).  Pour le test, de l'eau a été versée dans une petite plaque et le capteur y a été abaissé.  J'ai effectué toute l'action directement sur le site d'installation du capteur afin de rapprocher le plus possible la situation de la réalité.  Le test a réussi: la prise s'est éteinte, la notification est parvenue au téléphone, et le concentrateur a clignoté en mode d'urgence. <br><br>  Le deuxième détecteur de fuite devait être installé dans les toilettes à côté de l'échangeur.  Mais avec son installation, des nuances sont apparues - le moyeu n'a pas vu le capteur, bien que la distance soit petite.  La raison en est la configuration des locaux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ce/33/gb/ce33gbivdrkzwq2f4t-vghi69ki.jpeg" alt="image"></div><br>  Il y avait un hammam entre le site d'installation du hub (salle de relaxation) et le site d'installation du deuxième capteur de fuite (toilettes).  Le hammam, dans les meilleures traditions, est cousu dans le cercle avec du papier d'aluminium, créant des problèmes avec le passage du signal. <br><br>  Le fabricant affirme que les appareils peuvent former un réseau maillé, c'est-à-dire qu'un appareil peut transmettre des données au concentrateur via un autre appareil.  Quelque part, je suis tombé sur des informations selon lesquelles seuls les appareils connectés au réseau (et non sur piles) peuvent agir comme de tels émetteurs dans un réseau maillé.  Cependant, il me suffisait d'installer un capteur de température dans le coin de la salle de bain pour que le signal du capteur de fuite cesse de disparaître.  C'est peut-être une coïncidence, car plus tard dans la salle de bain sous le plafond, un relais de contrôle de l'éclairage public a été monté (peut-être qu'il agit comme un émetteur dans le réseau maillé).  Cependant, le problème de la perte de signal du capteur de fuite dans les toilettes a été résolu.  De plus, vous pouvez vérifier la connexion de l'appareil avec le concentrateur en cliquant sur le capteur au centre.  Si tout va bien, alors en chinois pur, les informations pertinentes retentiront depuis le hub (dans le cas du hub Aqara, la communication se fera en anglais agréable). <br><br>  La vérification de l'arrêt, puis la mise sous tension à l'aide de la machine ont montré que la prise intelligente passe à l'état éteint.  Pour qu'il passe à l'état activé lorsque l'électricité apparaît, il existe un paramètre correspondant: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7m/mp/rv/7mmprvrfrwirqrveigp5hk5rbna.jpeg" alt="image"></div><br>  Un signe supplémentaire de l'inondation de la pièce était une augmentation de l'humidité jusqu'à 100%.  Sur le contrôle de ce symptôme - dans la section suivante. <br><br><h2>  Contrôle de la fumée et de la température </h2><br>  Le bain public étant une pièce à risque d'incendie, le scénario suivant consistait à identifier les signes d'incendie. <br><br>  Pour ce scénario, deux capteurs de température (et d'humidité) et un capteur de fumée étaient nécessaires.  Le prix du capteur de température est d'environ 1000 r.  Le détecteur de fumée coûte environ 2000 p.  Dans la version Aqara pour la région locale, il n'y a actuellement aucun détecteur de fumée, ce qui nous relie à nouveau à la région «Chine continentale». <br><br>  Le détecteur de fumée était monté au plafond du couloir de la salle de lavage (en fait non loin du poêle et de la sortie du hammam).  Ensuite, dans l'application Xiaomi Home, un appareil a été ajouté et un scénario «en cas de détection de fumée» a été créé, suivi de l'envoi d'une notification au téléphone.  Le test a été effectué par une cheminée.  Le capteur a réussi le test.  Le moyeu cligna des yeux avec une alarme, plus une alerte sonore a fonctionné.  Le capteur lui-même était également très vil et un bip fort, avertissant du problème. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zg/ej/jg/zgejjg01wv9ayueq8tzptcumzs8.jpeg" alt="image"></div><br>  Un autre signe d'incendie est une augmentation de la température.  Pour surveiller la température, deux capteurs ont été installés: l'un dans les toilettes, l'autre dans les toilettes.  Ensuite, dans l'application, le scénario «dans le cas d'une température supérieure à l'ensemble» a été configuré avec la notification correspondante au téléphone.  Pour le moment, je fixe le seuil de la salle de relaxation à 30 degrés (en été, probablement, je devrai le reconfigurer). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nq/0w/pj/nq0wpjrfwe3nsl6hfpnjxwsuzhq.jpeg" alt="image"></div><br>  De plus, le scénario a été mis en place «dans le cas d'une température inférieure à l'ensemble» avec un seuil de 18 degrés et des alertes au téléphone.  Si, pour une raison quelconque, le chauffage cesse de fonctionner, j'aimerais en être informé dès que possible.  De même, les scénarios «en cas d'augmentation de l'humidité» ont été créés pour les deux capteurs avec un seuil de 70%, une alerte au téléphone et un arrêt de la pompe d'alimentation en eau. <br><br>  Parmi les bonus agréables pour les capteurs de température et d'humidité, des graphiques historiques sont disponibles dans l'application.  Vous pouvez, par exemple, déterminer à quels moments le bain a été utilisé aux fins prévues (pics de température dans le graphique ci-dessous) ou comparer si la température actuelle est anormale. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/tb/av/cftbaviejmlpp8nndfwizm6un60.jpeg" alt="image"></div><br><br><h2>  Contrôle de la ventilation </h2><br>  Un extrait forcé des locaux est organisé dans le hammam.  Après avoir terminé les procédures, il est conseillé de ventiler la pièce.  La ventilation était activée par un interrupteur à clé et la ventilation elle-même nécessitait au moins 30 minutes, mais les rassemblements dans les bains se terminaient souvent la première ou la deuxième heure de la nuit.  Il n'est pas toujours possible de tout faire à l'avance, et de s'asseoir à la fin pendant 30 minutes supplémentaires et d'attendre que le hammam soit ventilé est un plaisir en dessous de la moyenne car vous voulez déjà dormir. <br><br>  Pour ce scénario, nous avions besoin d'un interrupteur à clé de Xiaomi avec une ligne zéro et un montage mural.  Le prix de l'émission est d'environ 1900 p.  Les commutateurs sont disponibles dans la version Aqara pour le marché local. <br><br>  Dans mon cas, il est impossible de remplacer simplement un interrupteur conventionnel par un interrupteur intelligent - une ligne électrique est nécessaire.  En conséquence, j'ai dû étirer la ligne zéro jusqu'au trou de montage du commutateur, car il y avait une telle opportunité.  Dans le cas d'un interrupteur sans ligne zéro, l'installation serait plus facile. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q0/k2/p-/q0k2p-qvozvt_zk3e-i407jprhk.jpeg" alt="image"></div><br>  Après l'installation, un commutateur intelligent a été ajouté à l'application en tant que périphérique et ses performances ont été testées.  Il y a une minuterie dans les paramètres du commutateur et vous pouvez régler l'heure de désactivation.  Autrement dit, avant de quitter le bain, la minuterie d'arrêt est réglée pour 30 minutes de ventilation supplémentaires, et vous pouvez vous endormir en toute sécurité. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9e/4c/5g/9e4c5gckmsp0dsiekxkbvhk5imk.jpeg" alt="image"></div><br>  Une autre option d'automatisation des processus est possible.  Après le bain, en plus de la ventilation, la porte du hammam s'ouvre complètement.  Cela entraîne une augmentation de la température dans la salle de lavage, où un capteur de température est installé.  Sur la base des lectures de ce capteur, vous pouvez créer des scénarios d'activation / désactivation de la ventilation.  Mais je n'ai pas encore exécuté cette option.  De plus, on pourrait expérimenter avec un capteur d'ouverture de porte de hammam.  Mais je crains qu'il ne meure ou ne tombe rapidement, car la porte est en verre et dans le hammam, elle peut également être à 120 degrés. <br><br><h2>  Contrôle d'éclairage public </h2><br>  Une autre tâche que je voulais automatiser était de contrôler l'éclairage public de la véranda.  Un des scénarios typiques: allumez la lumière sur la véranda lorsque vous êtes près du bâtiment et il fait sombre à l'extérieur.  La baignoire est verrouillée, l'interrupteur d'éclairage public est situé à l'intérieur.  J'ai dû aller chercher la clé pour ouvrir la porte et allumer la lumière.  Éteindre les lumières a nécessité une procédure similaire.  Un autre scénario qui se reproduisait régulièrement: allumer ou éteindre la lumière sur la véranda lorsque vous êtes dans la maison principale.  Assez souvent, en sortant des bains, j'ai oublié d'éteindre les lumières de la véranda et je l'ai trouvé déjà dans la maison: soit en regardant par la fenêtre, soit en regardant les caméras de surveillance.  À ce moment, la réticence est généralement nulle part où aller, donc la lumière a continué à brûler toute la nuit. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/tg/ex/cctgexbilx-hsr-tomjp9cs0gl8.jpeg" alt="image"></div><br>  Pour mettre en œuvre cette idée, un relais à deux canaux a été acheté.  Le prix de l'émission est d'environ 2000 p.  Il manque actuellement des relais dans la version Aqara pour le marché local.  Mais il peut être remplacé par un interrupteur à clé (il est clair que son installation dans une boîte de distribution est un processus plus gênant). <br><br>  Au départ, j'avais l'intention de monter le relais derrière l'interrupteur à clé, cependant, il s'est avéré très problématique de tirer la ligne d'alimentation au bon endroit (encore une fois, le relais a besoin d'alimentation).  Un endroit idéal est une boîte de jonction où la ligne électrique, la ligne de l'interrupteur et la ligne des lampadaires ont convergé.  Il se trouvait sous un faux plafond, ce qui a entraîné le démontage de plusieurs rails de revêtement.  Il convenait de réfléchir à l'avance à ce point.  Cependant, l'installation s'est terminée avec succès.  Le schéma de câblage est beaucoup plus compliqué que pour les prises et interrupteurs (dans mon cas, quatre fils à 3 fils et 8 bornes sur le relais lui-même).  Afin de ne pas garder à l'esprit et de ne rien confondre, j'ai dessiné un schéma sur une feuille de papier avant de monter.  Ensuite, j'ai fait une installation d'essai pour tout vérifier: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/n5/gd/bzn5gdba_obeh-ja73lxl2fdvjc.jpeg" alt="image"></div><br>  L'appareil était connecté dans l'application et la phase de test a commencé.  Le réverbère était censé être allumé / éteint en tant qu'interrupteur à clé existant précédemment et utiliser l'application.  Il y a deux lumières dans la rue - une à gauche, l'autre à droite.  Le relais a deux canaux, mais il n'était pas logique de les activer séparément.  Par contre, je ne voulais pas les inclure tour à tour en deux clics dans l'application.  Par conséquent, le contrôle a été effectué sur un canal de relais.  Par une étrange coïncidence, cette option ne fonctionnait pas normalement - il y avait coller dans l'une ou l'autre position.  Il n'y avait plus beaucoup de temps pour les expériences, car la lumière du jour se terminait et je voulais assembler la doublure au plafond.  Par conséquent, j'ai juste attrapé les lumières en parallèle sur les deux canaux et tout a fonctionné comme je le voulais.  Pour que les commutateurs physiques et logiciels fonctionnent comme des relais, l'option de verrouillage a été activée dans les paramètres du relais. <br><br>  Il serait également possible d'organiser le voyant de la minuterie marche / arrêt.  Mais ce scénario ne s'est pas encore intéressé. <br><br><h2>  Contrôle d'accès </h2><br>  Un autre moment curieux a été le contrôle de l'ouverture de la porte de la rue.  Tout d'abord, pour déterminer et notifier que quelqu'un a oublié de fermer cette porte normalement ou de la laisser complètement ouverte. <br><br>  Pour ce scénario, un capteur d'ouverture de fenêtre / porte était nécessaire.  Le prix d'émission est d'environ 1000 r.  Il existe des capteurs fabriqués par Aqara pour le marché local (ils ont des bords moins arrondis). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pb/fy/id/pbfyidivjmpgggpxrwxowgeq-h8.jpeg" alt="image"></div><br>  L'installation est très simple - les capteurs sont montés sur du ruban adhésif double face.  Avant le montage, il est préférable de connecter le capteur dans l'application pour voir à quelle distance se produit l'opération.  Les instructions écrivent sur un espace pouvant atteindre 20 mm, mais ce n'est pas vrai, pour le moins, - le capteur et l'aimant de réponse doivent être montés presque à fleur.  Dans la maison principale, un capteur similaire est installé sur la porte du garage.  Entre le guide et le collier, il y a une gomme d'étanchéité d'une largeur de 1 cm, à cette distance, le capteur a montré la position «ouvert» et a dû augmenter l'aimant de réponse. <br><br>  Une fois qu'un nouveau périphérique a été ajouté à l'application, vous pouvez passer à l'automatisation.  Nous configurons le scénario «si la porte est ouverte pendant plus d'une minute» avec une notification au téléphone.  Dans la localisation en anglais, une partie de la phrase d'environ 1 minute n'est pas visible, mais le seuil de réponse est exactement cela.  Dans le capteur Aqara et les applications Aqara Home, d'autres intervalles de déclenchement peuvent être configurés.  Malheureusement, cela ne peut pas encore être fait dans l'application Xiaomi Home.  Mais la pratique a montré qu'un intervalle de 1 minute est plus que suffisant - il n'y a pas de faux positifs, tous les positifs étaient dans le cas.  Vous pouvez également consulter les journaux par capteurs.  Ce capteur ne fait pas exception.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Il est possible, par exemple, de déterminer par bûche quand les bains sont arrivés (la première porte a été ouverte ce jour-là) et quand elle est partie (la dernière porte fermée), estimant ainsi le temps total passé dans la pièce. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/uv/ry/wkuvryxsyoah4u-7dwoj0yct9a4.jpeg" alt="image"></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Impressions d'exploitation </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'expérience d'exploitation globale est purement positive. </font><font style="vertical-align: inherit;">Bien sûr, il y a quelques nuances mineures, mais l'objectif principal de l'automatisation a été atteint. </font><font style="vertical-align: inherit;">Tout d'abord, c'est un calme psychologique, confirmé par les résultats des tests. </font><font style="vertical-align: inherit;">Le confort est également important - télécommande de l'éclairage public, une hotte aspirante a été obtenue, une lampe de nuit supplémentaire est apparue. </font><font style="vertical-align: inherit;">Après être parti en vacances, vous vous souvenez et coupez l'eau à distance. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les coûts de tous les appareils ci-dessus sous une forme approximative (sans référence à un magasin particulier) sont indiqués ci-dessous. </font><font style="vertical-align: inherit;">Lors de la commande sur AliExpress, les prix différeront dans une direction plus petite.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i9/ij/pf/i9ijpffhxd2i-jaq00ieo58eupo.png" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors du choix d'un ensemble d'équipements, il est nécessaire de prendre en compte la compatibilité (pour quelle région cet équipement a été fabriqué et à quelle famille il appartient). Dans le cadre de l'application, il ne sera pas possible de créer un scénario qui, par exemple, par l'événement détecteur de fumée (pour la région «Chine continentale») contrôlera le débouché pour la région européenne. Si vous n'avez pas besoin d'un type exotique de détecteur de fumée, il est préférable de regarder les appareils Aqara pour le marché local. Au final, le relais peut être remplacé, par exemple, par un interrupteur à deux touches. Un certain nombre de magasins vendant des appareils Xiaomi les importent apparemment en gris (ces appareils sont conçus pour la région chinoise). Mais, par exemple, le Messenger, appareils chanceux conçus pour notre marché. En plus de la compatibilité des mêmes prises, elles contiendront également des instructions en anglais et en russe. Ci-dessous, une photo de deux capteurs identiques,mais pour différentes régions (chinois interne - à gauche et européen externe - à droite):</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uw/ph/x_/uwphx_titz3r1-hhwlduqxmzlwg.jpeg" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La réactivité du contrôle via l'application n'est pas toujours bonne. Par exemple, parfois, vous pouvez rencontrer une situation qui, au fil du temps, au lieu d'allumer la lumière, nous obtenons une erreur dans l'esprit de «la demande a échoué». Le traitement identifié expérimentalement - décharger l'application de la mémoire et la redémarrer - résout ce problème plus rapidement que d'attendre une réponse lors de la prochaine tentative. De plus, il y a parfois des retards notables (jusqu'à 20-30 secondes) avec la mise à jour de l'état d'un capteur. À ces moments, il est préférable de ne pas appuyer à nouveau sur les boutons de mise sous / hors tension, mais d'attendre que le statut soit mis à jour. Lors du démarrage de l'application dans certaines situations, vous pouvez voir une liste vide au lieu d'une liste de périphériques. Il n'y a pas lieu de paniquer - il apparaît généralement dans les prochaines secondes. Les notifications sur le téléphone ne sont pas localisées et la dénomination correcte des événements est enregistrée.De plus, les auteurs de l'application utilisent régulièrement le canal de notification push pour la publicité (toujours en chinois). Ceci, bien sûr, je n'aime pas, mais il n'y a pas beaucoup de choix.</font></font><br><br> ,           Xiaomi         .     - ,    ,      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr482554/">https://habr.com/ru/post/fr482554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr482540/index.html">Software VS Hardware: quelle est la tendance et qui est le futur?</a></li>
<li><a href="../fr482544/index.html">Rassembler une équipe de démarrage avec «0» - instructions étape par étape pour les plus petits</a></li>
<li><a href="../fr482546/index.html">VK Tech: une année de développement en chiffres Git</a></li>
<li><a href="../fr482548/index.html">Security Week 52 + 1: les 3 principales nouvelles non standard de l'année</a></li>
<li><a href="../fr482550/index.html">Le mystérieux programme LyX. 2e partie</a></li>
<li><a href="../fr482556/index.html">Vers l'époque où l'herbe était «plus verte» et AKG produisait des écouteurs dinostatiques</a></li>
<li><a href="../fr482558/index.html">Les scientifiques ont d'abord tué le virus de l'herpès endormi dans les cellules humaines</a></li>
<li><a href="../fr482560/index.html">Comment écrire des textes faciles</a></li>
<li><a href="../fr482562/index.html">L'ordinateur personnel devait mourir il y a dix ans: que s'est-il passé à la place</a></li>
<li><a href="../fr482564/index.html">Si toutes les histoires étaient écrites dans le style de la science-fiction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>