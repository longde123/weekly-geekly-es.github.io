<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ üà∫ üî† Como o Discord serve simultaneamente 2,5 milh√µes de bate-papos por voz usando o WebRTC üë©üèª‚Äçüåæ üë©‚Äçüë©‚Äçüëß‚Äçüë¶ üçú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde o in√≠cio, planejamos solu√ß√µes de engenharia e produtos para que o Discord seja adequado para bate-papo por voz enquanto estiver jogando com os a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como o Discord serve simultaneamente 2,5 milh√µes de bate-papos por voz usando o WebRTC</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423171/"><img src="https://habrastorage.org/webt/no/3o/oj/no3oojc_pnuwknb6hcrplkrhtmq.jpeg"><br><br>  Desde o in√≠cio, planejamos solu√ß√µes de engenharia e produtos para que o Discord seja adequado para bate-papo por voz enquanto estiver jogando com os amigos.  Essas solu√ß√µes permitiram dimensionar bastante o sistema, com uma equipe pequena e recursos limitados. <br><br>  Este artigo discute as v√°rias tecnologias que o Discord usa para bate-papos de √°udio / v√≠deo. <br><br>  <i>Para maior clareza, chamaremos todo o grupo de usu√°rios e canalizaremos o "grupo" (guilda) - no cliente, eles s√£o chamados de "servidores".</i>  <i>Em vez disso, o termo "servidor" refere-se √† nossa infraestrutura de servidores.</i> <br><a name="habracut"></a><br><h1>  Princ√≠pios principais </h1><br>  Cada bate-papo de √°udio / v√≠deo no Discord suporta muitos participantes.  Vimos milhares de pessoas conversando em conversas em grupo.  Esse suporte requer uma arquitetura cliente-servidor, porque uma rede ponto a ponto ponto a ponto se torna proibitivamente cara com um aumento no n√∫mero de participantes. <br><br>  O roteamento do tr√°fego de rede atrav√©s dos servidores Discord tamb√©m garante que seu endere√ßo IP nunca fique vis√≠vel - e ningu√©m iniciar√° um ataque DDoS.  O roteamento atrav√©s de servidores tem outras vantagens: por exemplo, modera√ß√£o.  Os administradores podem desativar rapidamente o som e o v√≠deo para os invasores. <br><br><h1>  Arquitetura do cliente </h1><br>  A disc√≥rdia √© executada em muitas plataformas. <br><br><ul><li>  Web (Chrome / Firefox / Edge, etc.) </li><li>  Aplicativo aut√¥nomo (Windows, MacOS, Linux) </li><li>  Telefone (iOS / Android) </li></ul><br>  Podemos suportar todas essas plataformas de apenas uma maneira: atrav√©s da reutiliza√ß√£o do c√≥digo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WebRTC</a> .  Essa especifica√ß√£o para comunica√ß√µes em tempo real inclui componentes de rede, √°udio e v√≠deo.  O padr√£o √© adotado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pelo World Wide Web Consortium</a> e pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Internet Engineering Group</a> .  O WebRTC est√° dispon√≠vel em todos os navegadores modernos e como uma biblioteca nativa para implementa√ß√£o em aplicativos. <br><br>  O √°udio e o v√≠deo no Discord s√£o executados no WebRTC.  Portanto, o aplicativo do navegador depende da implementa√ß√£o do WebRTC no navegador.  No entanto, os aplicativos para desktops, iOS e Android usam um √∫nico mecanismo multim√≠dia C ++, constru√≠do sobre sua pr√≥pria biblioteca WebRTC, que √© especialmente adaptada √†s necessidades de nossos usu√°rios.  Isso significa que algumas fun√ß√µes no aplicativo funcionam melhor do que no navegador.  Por exemplo, em nossos aplicativos nativos, podemos: <br><br><ul><li>  Ignorar o Volume do Windows Mute por padr√£o, quando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">todos os aplicativos s√£o silenciados automaticamente ao usar um fone de ouvido</a> .  Isso √© indesej√°vel quando voc√™ e seus amigos realizam um ataque e coordenam as atividades de bate-papo do Discord. </li><li>  Use seu pr√≥prio controle de volume em vez do misturador global do sistema operacional. </li><li>  Processe os dados de √°udio originais para detectar atividade de voz e transmitir √°udio e v√≠deo em jogos. </li><li>  Reduza a largura de banda e o consumo de CPU durante per√≠odos de sil√™ncio - mesmo nas mais numerosas conversas por voz a qualquer momento, apenas algumas pessoas falam ao mesmo tempo. </li><li>  Forne√ßa funcionalidade em todo o sistema para o modo push to talk. </li><li>  Envie junto com pacotes de √°udio e v√≠deo informa√ß√µes adicionais (por exemplo, um indicador de prioridade no bate-papo). </li></ul><br>  Ter sua pr√≥pria vers√£o do WebRTC significa atualiza√ß√µes frequentes para todos os usu√°rios: este √© um processo demorado que estamos tentando automatizar.  No entanto, esse esfor√ßo compensa gra√ßas √†s caracter√≠sticas espec√≠ficas de nossos jogadores. <br><br>  No Discord, a comunica√ß√£o de voz e v√≠deo √© iniciada inserindo um canal ou chamada de voz.  Ou seja, a conex√£o √© sempre iniciada pelo cliente - isso reduz a complexidade das partes do cliente e do servidor e tamb√©m aumenta a toler√¢ncia a erros.  No caso de uma falha na infraestrutura, os participantes podem simplesmente se reconectar ao novo servidor interno. <br><br><h3>  Sob nosso controle </h3><br>  O controle da biblioteca nativa permite implementar algumas fun√ß√µes de maneira diferente da implementa√ß√£o do WebRTC no navegador. <br><br>  Primeiro, o WebRTC conta com o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SDP</a> (Session Description Protocol) para negociar √°udio / v√≠deo entre os participantes (at√© 10 KB por troca de pacotes).  Em sua pr√≥pria biblioteca, a API de n√≠vel inferior do WebRTC ( <code>webrtc::Call</code> ) √© usada para criar os dois fluxos - de entrada e de sa√≠da.  Quando conectado a um canal de voz, h√° uma troca m√≠nima de informa√ß√µes.  Este √© o endere√ßo e a porta do servidor back-end, o m√©todo de criptografia, as chaves, o codec e a identifica√ß√£o do fluxo (cerca de 1000 bytes). <br><br><pre> <code class="cpp hljs">webrtc::<span class="hljs-function"><span class="hljs-function">AudioSendStream* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createAudioSendStream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ssrc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> payloadType, webrtc::Transport* transport, rtc::scoped_refptr&lt;webrtc::AudioEncoderFactory&gt; audioEncoderFactory, webrtc::Call* call)</span></span></span><span class="hljs-function"> </span></span>{ webrtc::AudioSendStream::Config config{transport}; config.rtp.ssrc = ssrc; config.rtp.extensions = {{<span class="hljs-string"><span class="hljs-string">"urn:ietf:params:rtp-hdrext:ssrc-audio-level"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>}}; config.encoder_factory = audioEncoderFactory; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webrtc::SdpAudioFormat kOpusFormat = {<span class="hljs-string"><span class="hljs-string">"opus"</span></span>, <span class="hljs-number"><span class="hljs-number">48000</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>}; config.send_codec_spec = webrtc::AudioSendStream::Config::SendCodecSpec(payloadType, kOpusFormat); webrtc::AudioSendStream* audioStream = call-&gt;CreateAudioSendStream(config); audioStream-&gt;Start(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> audioStream; }</code> </pre> <br>  Al√©m disso, o WebRTC usa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ICE</a> (Interactive Connectivity Establishment) para determinar a melhor rota entre os participantes.  Como temos cada cliente conectado ao servidor, n√£o precisamos do ICE.  Isso permite que voc√™ forne√ßa uma conex√£o muito mais confi√°vel se estiver atr√°s do NAT e tamb√©m mantenha seu endere√ßo IP em segredo de outros participantes.  Os clientes fazem ping periodicamente para que o firewall mantenha uma conex√£o aberta. <br><br>  Por fim, o WebRTC usa o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SRTP</a> (Secure Real-Time Transport Protocol) para criptografar a m√≠dia.  As chaves de criptografia s√£o definidas usando o protocolo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DTLS</a> (Datagram Transport Layer Security) com base no TLS padr√£o.  A biblioteca interna do WebRTC permite implementar sua pr√≥pria camada de transporte usando a API <code>webrtc::Transport</code> . <br><br>  Em vez de DTLS / SRTP, decidimos usar uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">criptografia Salsa20</a> mais r√°pida.  Al√©m disso, n√£o enviamos dados de √°udio durante per√≠odos de sil√™ncio - uma ocorr√™ncia comum, especialmente em grandes salas de bate-papo.  Isso leva a uma economia significativa em largura de banda e recursos da CPU; no entanto, o cliente e o servidor devem estar prontos a qualquer momento para parar de receber dados e reescrever os n√∫meros de s√©rie dos pacotes de √°udio / v√≠deo. <br><br>  Como o aplicativo Web usa a implementa√ß√£o baseada em navegador da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API WebRTC</a> , SDP, ICE, DTLS e SRTP n√£o podem ser abandonados.  O cliente e o servidor trocam todas as informa√ß√µes necess√°rias (menos de 1200 bytes ao trocar pacotes) - e a sess√£o SDP √© estabelecida com base nessas informa√ß√µes para os clientes.  O back-end √© respons√°vel por resolver as diferen√ßas entre aplicativos de desktop e navegador. <br><br><h1>  Arquitetura de back-end </h1><br>  Existem v√°rios servi√ßos de bate-papo por voz no back-end, mas vamos nos concentrar em tr√™s: Discord Gateway, Discord Guilds e Discord Voice.  Todos os nossos servidores de sinal s√£o escritos em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Elixir</a> , o que nos permite reutilizar o c√≥digo repetidamente. <br><br>  Quando voc√™ est√° on-line, seu cliente suporta uma conex√£o WebSocket com um Discord Gateway (n√≥s chamamos de conex√£o de <i>gateway</i> WebSocket).  Por meio dessa conex√£o, seu cliente recebe eventos relacionados a grupos e canais, mensagens de texto, pacotes de presen√ßa etc. <br><br>  Quando conectado a um canal de voz, o status da conex√£o √© exibido pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">objeto de</a> status de voz.  O cliente atualiza esse objeto pela conex√£o do gateway. <br><br><pre> <code class="hljs pgsql">defmodule VoiceStates.VoiceState <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> t :: %{ session_id: String.t(), user_id: Number.t(), channel_id: Number.t() | nil, token: String.t() | nil, mute: <span class="hljs-type"><span class="hljs-type">boolean</span></span>, deaf: <span class="hljs-type"><span class="hljs-type">boolean</span></span>, self_mute: <span class="hljs-type"><span class="hljs-type">boolean</span></span>, self_deaf: <span class="hljs-type"><span class="hljs-type">boolean</span></span>, self_video: <span class="hljs-type"><span class="hljs-type">boolean</span></span>, suppress: <span class="hljs-type"><span class="hljs-type">boolean</span></span> } defstruct session_id: nil, user_id: nil, token: nil, channel_id: nil, mute: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, deaf: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, self_mute: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, self_deaf: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, self_video: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, suppress: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  Quando conectado a um canal de voz, voc√™ recebe um dos servidores de voz do Discord.  Ele √© respons√°vel por transmitir som para cada participante do canal.  Todos os canais de voz em um grupo s√£o atribu√≠dos a um servidor.  Se voc√™ √© o primeiro a conversar, o servidor do Discord Guilds √© respons√°vel por atribuir o servidor do Discord Voice a todo o grupo usando o processo descrito abaixo. <br><br><h3>  Destino do servidor de voz Discord </h3><br>  Cada servidor do Discord Voice reporta periodicamente seu status e carga.  Essas informa√ß√µes s√£o colocadas em um sistema de descoberta de servi√ßo (usamos o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">etcd</a> ), conforme discutido em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo anterior</a> . <br><br>  O servidor Discord Guilds monitora o sistema de descoberta de servi√ßo e atribui ao grupo o servidor Discord Voice menos usado na regi√£o.  Quando selecionado, todos os objetos de status de voz (tamb√©m suportados pelo servidor do Discord Guilds) s√£o transferidos para o servidor do Discord Voice para que ele possa configurar o encaminhamento de √°udio / v√≠deo.  Os clientes s√£o notificados do servidor Discord Voice selecionado.  Em seguida, o cliente abre a <i>segunda</i> conex√£o WebSocket com o servidor de voz (chamamos de conex√£o de <i>voz</i> WebSocket), que √© usada para configurar o encaminhamento de multim√≠dia e a indica√ß√£o de fala. <br><br>  Quando o cliente exibe o status <i>Aguardando ponto de extremidade</i> , isso significa que o servidor do Discord Guilds est√° procurando o servidor ideal do Discord Voice.  Uma mensagem <i>Voice Connected</i> indica que o cliente trocou pacotes UDP com sucesso com o servidor Discord Voice selecionado. <br><br>  O servidor Discord Voice cont√©m dois componentes: um m√≥dulo de sinal e uma unidade de retransmiss√£o multim√≠dia, denominada unidade de encaminhamento seletivo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SFU</a> ).  O m√≥dulo de sinal controla totalmente o SFU e √© respons√°vel por gerar identificadores de fluxo e chaves de criptografia, redirecionando indicadores de fala, etc. <br><br>  Nosso SFU (em C ++) √© respons√°vel por direcionar o tr√°fego de √°udio e v√≠deo entre os canais.  Ele √© desenvolvido por si s√≥: para o nosso caso em particular, o SFU oferece desempenho m√°ximo e, portanto, a maior economia.  Quando os moderadores violam (silenciam o servidor), seus pacotes de √°udio n√£o s√£o processados.  O SFU tamb√©m funciona como uma ponte entre aplicativos nativos e baseados em navegador: implementa transporte e criptografia para aplicativos nativos e de navegador, convertendo pacotes durante a transmiss√£o.  Por fim, o SFU √© respons√°vel pelo processamento do protocolo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RTCP</a> , usado para otimizar a qualidade do v√≠deo.  O SFU coleta e processa relat√≥rios RTCP dos destinat√°rios - e notifica os remetentes sobre qual banda est√° dispon√≠vel para transmiss√£o de v√≠deo. <br><br><h1>  Toler√¢ncia a falhas </h1><br>  Como apenas os servidores Discord Voice est√£o dispon√≠veis diretamente na Internet, falaremos sobre eles. <br><br>  O m√≥dulo de sinal monitora continuamente o SFU.  Se travar, reiniciar√° instantaneamente com uma pausa m√≠nima no servi√ßo (v√°rios pacotes perdidos).  O status do SFU √© restaurado pelo m√≥dulo de sinal sem qualquer intera√ß√£o com o cliente.  Embora as falhas do SFU sejam raras, usamos o mesmo mecanismo para atualizar o SFU sem interrup√ß√µes no servi√ßo. <br><br>  Quando o servidor do Discord Voice falha, ele n√£o responde ao ping - e √© removido do sistema de descoberta de servi√ßo.  O cliente tamb√©m percebe uma falha no servidor devido a uma conex√£o de voz do WebSocket interrompida e solicita o <i>ping do servidor de voz</i> atrav√©s da conex√£o do gateway do WebSocket.  O servidor do Discord Guilds confirma a falha, consulta o sistema de descoberta de servi√ßos e atribui um novo servidor do Discord Voice ao grupo.  As Discord Guilds enviam todos os objetos de status de voz para o novo servidor de voz.  Todos os clientes recebem uma notifica√ß√£o sobre o novo servidor e se conectam a ele para iniciar a configura√ß√£o de multim√≠dia. <br><br><img src="https://habrastorage.org/webt/tw/1r/kz/tw1rkzplhbqsax95lajz9-ylluu.gif"><br><br>  Freq√ºentemente, os servidores Discord Voice se enquadram no DDoS (vemos isso pelo r√°pido aumento dos pacotes IP recebidos).  Nesse caso, executamos o mesmo procedimento de quando o servidor travou: n√≥s o removemos do sistema de descoberta de servi√ßo, selecionamos um novo servidor, transferimos todos os objetos de estado de comunica√ß√£o de voz para ele e notificamos os clientes sobre o novo servidor.  Quando o ataque DDoS desaparece, o servidor retorna ao sistema de descoberta de servi√ßo. <br><br>  Se o propriet√°rio do grupo decidir escolher uma nova regi√£o para a vota√ß√£o, seguiremos um procedimento muito semelhante.  O Discord Guilds Server seleciona o melhor servidor de voz dispon√≠vel em uma nova regi√£o em consulta com um sistema de descoberta de servi√ßo.  Em seguida, ele traduz para ele todos os objetos do estado da comunica√ß√£o de voz e notifica os clientes sobre o novo servidor.  Os clientes interrompem a conex√£o atual do WebSocket com o antigo servidor Discord Voice e criam uma nova conex√£o com o novo servidor Discord Voice. <br><br><h1>  Dimensionamento </h1><br>  Toda a infraestrutura do Discord Gateway, do Discord Guilds e do Discord Voice suporta o dimensionamento horizontal.  O Discord Gateway e o Discord Guilds funcionam no Google Cloud. <br><br>  Temos mais de 850 servidores de voz em 13 regi√µes (localizadas em mais de 30 data centers) em todo o mundo.  Essa infraestrutura fornece maior redund√¢ncia em caso de falhas nos datacenters e DDoS.  Trabalhamos com v√°rios parceiros e usamos nossos servidores f√≠sicos em seus data centers.  Mais recentemente, a regi√£o sul-africana foi adicionada.  Gra√ßas aos esfor√ßos de engenharia nas arquiteturas de clientes e servidores, o Discord agora pode atender simultaneamente a mais de 2,6 milh√µes de usu√°rios de bate-papo por voz com tr√°fego de sa√≠da de mais de 220 Gbit / se 120 milh√µes de pacotes por segundo. <br><br><h1>  O que vem a seguir? </h1><br>  Monitoramos constantemente a qualidade das comunica√ß√µes de voz (as m√©tricas s√£o enviadas do lado do cliente para os servidores back-end).  No futuro, essas informa√ß√µes ajudar√£o na detec√ß√£o e elimina√ß√£o autom√°tica da degrada√ß√£o. <br><br>  Embora tenhamos lan√ßado bate-papo por v√≠deo e screencasts h√° um ano, agora eles s√≥ podem ser usados ‚Äã‚Äãem mensagens privadas.  Comparado ao √°udio, o v√≠deo requer significativamente mais energia e largura de banda da CPU.  O desafio √© equilibrar a quantidade de largura de banda e os recursos de CPU / GPU usados ‚Äã‚Äãpara garantir a melhor qualidade de v√≠deo, especialmente quando um grupo de jogadores em um canal est√° em dispositivos diferentes.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A</a> tecnologia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Scalable Video Coding</a> (SVC), uma extens√£o do padr√£o H.264 / MPEG-4 AVC, pode se tornar uma solu√ß√£o para o problema. <br><br>  Os screencasts precisam de mais largura de banda que o v√≠deo, devido ao maior FPS e resolu√ß√£o do que as webcams convencionais.  Atualmente, estamos trabalhando no suporte √† codifica√ß√£o de v√≠deo baseada em hardware em um aplicativo de desktop. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt423171/">https://habr.com/ru/post/pt423171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt423161/index.html">As empresas querem dados pessoais</a></li>
<li><a href="../pt423163/index.html">Conectando o CryptoPro ao Mono</a></li>
<li><a href="../pt423165/index.html">Desenho de malha din√¢mica no Unreal Engine 4</a></li>
<li><a href="../pt423167/index.html">O que Mark Zuckerberg fala sobre quest√µes do Facebook. Artigo essencial do The New Yorker</a></li>
<li><a href="../pt423169/index.html">Inicializa√ß√£o do dia (julho a agosto de 2018)</a></li>
<li><a href="../pt423173/index.html">Tempo m√≠nimo - dor m√°xima</a></li>
<li><a href="../pt423175/index.html">Por que escrever seu pr√≥prio mecanismo de jogo?</a></li>
<li><a href="../pt423177/index.html">Livro de infraestrutura de seguran√ßa do Microsoft Azure</a></li>
<li><a href="../pt423179/index.html">Guia do aplicativo de arquitetura em nuvem</a></li>
<li><a href="../pt423181/index.html">Livro do Guia do Desenvolvedor do Azure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>