<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’„ ğŸš– ğŸ’†ğŸ½ Alam semesta pelaporan SAP â— ğŸ›ŒğŸ½ ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sekitar 4 tahun yang lalu, kami memindahkan sistem pelaporan kami dari Oracle ke SAP Hana. Saat ini, ia menyimpan sekitar 10.000 meja, 38.000 orang me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Alam semesta pelaporan SAP</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mvideo/blog/462015/"><img src="https://habrastorage.org/webt/nf/96/da/nf96daardoyhax1e_lj6oy2wk9o.jpeg"><br><br>  Sekitar 4 tahun yang lalu, kami memindahkan sistem pelaporan kami dari Oracle ke SAP Hana.  Saat ini, ia menyimpan sekitar 10.000 meja, 38.000 orang menggunakannya, dan lebih dari 5.000 proses pemuatan terjadi setiap hari.  Saat ini, kompleks kami, tempat sistem bekerja, terdiri dari 8 server dengan memori 14 TB.  Setiap hari, sistem pelaporan memproses 1,5 pb data.  Pada saat yang sama, Hana sekitar 20 kali lebih produktif daripada Oracle, DB2 dan MySQL.  Dan hari ini saya ingin memberi tahu bagaimana, dalam kerangka integrasi M.Video dan Eldorado, kami juga meningkatkan kinerja sistem pelaporan, yang kami optimalkan. <br><a name="habracut"></a><br><h2>  Muat </h2><br>  Saat ini, dari beberapa ribu laporan yang dibuat oleh sistem, hanya 10 yang menghasilkan 70% dari total beban.  Laporan terberat dalam database Hana adalah Weekly Bussines Review.  Ini berjalan selama 30 menit dan menghabiskan 4 TB memori.  90% dari semua laporan dihasilkan oleh pusat kontak: kami menciptakan layanan yang, ketika klien memanggil dengan nomor teleponnya, secara otomatis membuka laporan dan menunjukkan kepada operator seluruh sejarah pembelian penelepon dan interaksinya dengan perusahaan. <br><br><h2>  Model data </h2><br>  Model data utama tempat sebagian besar laporan dibangun berisi 1.500 tabel.  Kebanyakan dari mereka adalah tabel referensi.  Dengan menggunakan model ini, Anda dapat menganalisis segala arah perusahaan.  Contohnya adalah visualisasi model data yang dibuat menggunakan desainer Universe.  Benar, itu hanya mencerminkan sepersepuluh dari sistem kami. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/054/47a/9d3/05447a9d3d7447a41a4732c49a7b205d.png"><br><br><h2>  Performa </h2><br>  Pada saat penggabungan M.Video dan Eldorado, jumlah data dalam dua sistem pelaporan adalah sekitar 10 TB: 7 TB di BW pada sistem HANA M.Video, 2 TB di BW pada HANA Eldorado dan 1 TB data tambahan di HADOOP (data historis).  Ketika menggabungkan sistem, kami memiliki keterbatasan perangkat keras: kompleks M. Video terdiri dari 6 node (masing-masing 2 TB), termasuk satu cadangan.  Sistem ini dapat diperluas hingga maksimum 8 node, di mana satu cadangan. <br><br>  Dalam persiapan untuk merger, kami mengasumsikan bahwa jumlah total semua data akan mencapai 13 TB.  Oleh karena itu, berdasarkan rekomendasi SAP, kami membutuhkan sistem 16 node masing-masing 2 TB, termasuk dua node cadangan.  Juga, satu node harus dialokasikan sebagai master node, yang, dengan volume informasi seperti itu, akan mengambil alih fungsi manajemen.  Artinya, untuk operasi yang benar perlu untuk menggunakan 13 node. <br><br>  Seperti yang Anda lihat, sumber daya yang tersedia tidak cukup.  Dan itu adalah tantangan pertama. <br><br>  Kesulitan utama kedua sebelum merger adalah bahwa kecepatan sistem seringkali tidak memuaskan kebutuhan bisnis.  Alasan utama adalah banyaknya panggilan bersamaan ke database.  Dari sudut pandang sistem, itu tampak seperti bola salju, yang dapat menyebabkan pembekuan dan gangguan bagian dari proses, atau bahkan ke pembuangan global "kehabisan memori" pada node. <br><br>  Jelas bahwa tanpa modifikasi yang signifikan, peningkatan dua kali lipat dalam jumlah data dalam laporan (untuk dua merek) akan menyebabkan memburuknya situasi sekitar dua kali lipat. <br><br>  Oleh karena itu, kami memutuskan untuk mengoptimalkan sistem di bidang berikut: <br><br><ul><li>  <b>Pelaporan</b>  Akselerasi laporan yang paling kritis dan paling intensif sumber daya dan revisi model data. <br></li><li>  <b>Repositori</b> .  Pengoptimalan pengarsipan dan penyimpanan. <br></li><li>  <b>Unduhan</b> .  Rampingkan prosedur dan ubah jadwal pengunduhan. <br></li></ul><br>  Pendekatan umum untuk optimasi adalah ini: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1aa/534/20d/1aa53420d809464c7d3f28bd9761e411.png"><br><br>  Pertama, kami melakukan analisis ke segala arah, mengidentifikasi penyebab masalah, dan kemudian menganalisis kemampuan sistem dengan sumber daya yang diperlukan.  Kami juga segera mencoba untuk mengotomatisasi proses ini sebanyak mungkin sehingga di masa depan kami dapat dengan cepat mengidentifikasi penyebab masalah dan dengan cepat mengembalikan kinerja. <br><br>  Apa yang telah kami lakukan: <br><br><ul><li>  Mengubah konfigurasi server aplikasi ABAP: jumlah instance, penggunaan efektif teknologi NUMA dan jumlah optimal alur kerja. <br></li><li>  Kami menerapkan parameter optimal HANA dan sistem operasi Linux. <br></li><li>  Kami menganalisis penurunan konsumsi CPU. <br></li><li>  Kami menganalisis konsumsi RAM dalam seluruh interval waktu yang diamati. <br></li><li>  Kami menganalisis terjadinya OOM di HANA. <br></li><li>  Kami menganalisis terjadinya kunci dalam sistem dan ketersediaan sumber daya sistem untuk operasi tunggu (tunggu). <br></li><li>  Kami menganalisis perimbangan data dengan mempertimbangkan redistribusi dan partisi ulang data untuk solusi SCALE-OUT HANA. <br></li><li>  Kami menganalisis penyebab dump ABAP yang memengaruhi operasi rantai kritis. <br></li></ul><br>  Berdasarkan hasil, laporan kinerja dikompilasi, serta instruksi sehingga di masa depan dimungkinkan untuk secara mandiri menentukan kemacetan dalam sistem dan interval waktu puncak. <br><br>  Apa hasil yang dicapai: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82a/e7e/382/82ae7e3826abf0a8eaf2cafb2c10d27b.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5a/b6e/221/d5ab6e221145f19b6f385738f57d9dca.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a5e/a35/4d2/a5ea354d258baaed8ef8176ad0a0ad45.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1dc/654/1f7/1dc6541f7d68c70012d8203e92182775.png"><br><br>  Sejumlah laporan yang dioptimalkan SAP BO mulai bekerja <b>beberapa kali lebih cepat</b> dan mengkonsumsi <b>memori ratusan kali lebih sedikit</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7fc/ed2/3c7/7fced23c7b586cf2334745b265245447.png"><br><br>  Berikut adalah beberapa contoh mencolok tentang bagaimana sistem secara tidak benar memenuhi persyaratan pemilihan, dan cara membuat kueri dengan benar di HANA. <br><br>  Masalah terungkap saat memfilter oleh objek yang tidak terwujud, terutama (!) Saat menggunakan indikator <code>COUNT DISTINCT</code> (CD dapat ditulis baik di tingkat Universe dan dalam fungsi di CV). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c2c/25c/e8c/c2c25ce8cab11363b6dd1958c9b1c25a.png"><br><br>  Bahkan jika Anda mengecualikan CD dari kueri, opsi pertama masih akan berjalan 20 kali lebih lambat dari yang kedua, dan dengan CD, kecepatannya akan lebih dari 500 kali lebih tinggi. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1dc/f0b/6a3/1dcf0b6a38e4053829e20a531d67c45a.png"><br><br>  Kasus khusus menggunakan objek yang tidak terwujud dalam filter: filter komposit dari dua objek atau lebih, misalnya, menempelkan satu minggu dan satu tahun: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cda/a3a/d8e/cdaa3ad8e73905c217346b6b00004dd0.png"><br><br>  Kueri dengan filter terpaku tidak berfungsi selambat konversi ke tanggal, tetapi kueri masih melambat (sekitar 2-3 kali). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cec/182/9d6/cec1829d65a06d6d73f53b2110cfc4e3.png"><br><br>  Untuk mengumpulkan statistik tentang pengoperasian sistem pelaporan, proses pemuatan, dan rantai, kami mengembangkan skema berikut: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9fc/3c5/d8a/9fc3c5d8aab834bca29c4988592f25f8.png"><br><br>  Pada saat yang sama, kami menambahkan komentar khusus pada laporan dengan nama laporan.  Dengan demikian, kita dapat membandingkan beban dari berbagai bagian sistem dan membandingkan periode ke periode. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/14e/665/69b/14e66569bb4292fb4e66364fe51de6be.png"><br><br><h2>  <font color="#ec2028">Paket</font> </h2><br>  Kami memiliki banyak rencana untuk pengembangan fungsionalitas bisnis dan revisi substansial dari alat visualisasi data.  Tren global di mana kami berpartisipasi secara aktif adalah untuk mengintegrasikan sistem pelaporan ke dalam paradigma transformasi digital. <br><br>  Apa maksudmu <br><br>  Ketika sistem pelaporan kami masih muda, pengguna sering mendatangi kami dengan permintaan serupa: "Mengotomatiskan pembuatan laporan yang menunjukkan berapa laba bersih yang diterima toko ini atau itu, atau seluruh perusahaan." <br><br>  Kemudian mereka mulai mendatangi kami dengan permintaan untuk membuat algoritma yang akan membangun rencana atau perkiraan untuk laba bersih, tergantung pada faktor-faktor tertentu. <br><br>  Dan hari ini kita sampai pada kesimpulan bahwa pengguna ingin mengetahui perkiraan laba bersih yang akurat.  Kami memiliki semua data yang diperlukan untuk pengembangan algoritma peramalan, dan ada spesialis analisis data yang dapat membuat model pembelajaran mesin.  Seperti yang Anda ketahui, ini membutuhkan data dalam jumlah sangat besar, jadi salah satu tren utama dalam pengembangan sistem pelaporan kami adalah transisi ke analisis dan pembuatan model berdasarkan data besar. <br><br><h2>  <font color="#ec2028">Beberapa kata tentang tim kami</font> </h2><br>  Saat ini, perusahaan besar semakin memperkenalkan sistem peramalan yang didasarkan pada algoritma pembelajaran mesin yang dikembangkan oleh sistem itu sendiri.  Dua tahun lalu, kami menciptakan pusat kompetensi di bidang analisis data dari Pusat Sains Data Ritel Digital, dan tahun ini kami memiliki sekelompok insinyur data.  Kami memperkenalkan sistem baru untuk memproses dan menganalisis data besar.  Dan kami membutuhkan orang-orang dalam tim di departemen dukungan, pengembangan, dan analisis data terapan. <br><br>  Jika Anda tertarik pada bidang-bidang ini, jika Anda merasakan kekuatan dalam diri Anda sendiri - selamat datang!  Anda akan menemukan pekerjaan yang menarik dan sulit, terkadang membuat stres, tetapi selalu kreatif. <img src="https://habrastorage.org/files/fa7/d16/199/fa7d16199fca4fee89c0b96fa9919513.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id462015/">https://habr.com/ru/post/id462015/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id462005/index.html">Fitur Google PageSpeed: peningkatan peringkat situs dan peringkat pencarian</a></li>
<li><a href="../id462007/index.html">Mengembangkan skrip Python yang kuat</a></li>
<li><a href="../id462009/index.html">Tren pemrograman: apa yang bisa diharapkan pada tahun 2020?</a></li>
<li><a href="../id462011/index.html">Layanan geoser web. Ikhtisar solusi modern</a></li>
<li><a href="../id462013/index.html">Docker storage (docker root) histori masalah migrasi</a></li>
<li><a href="../id462021/index.html">Bagaimana cara berhenti melakukan hal yang sama</a></li>
<li><a href="../id462023/index.html">Cascadeur: Masa Depan Animasi Game</a></li>
<li><a href="../id462025/index.html">Model data jaringan relasional</a></li>
<li><a href="../id462027/index.html">Bagaimana Dark Menyebarkan Kode 50ms</a></li>
<li><a href="../id462029/index.html">19 fitur berguna dari file .htaccess</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>