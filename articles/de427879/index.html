<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßì üë¨ ‚òùÔ∏è Wie ich von Python zu Julia gewechselt bin (und warum) üî≥ üóúÔ∏è ‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ein kleiner Hintergrund √ºber Python 
 Python ist eine gro√üartige Sprache. Ich habe vorher mehrere Sprachen ausprobiert: Pascal in der Schule; C, C mit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie ich von Python zu Julia gewechselt bin (und warum)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427879/"><h3>  Ein kleiner Hintergrund √ºber Python </h3><br>  Python ist eine gro√üartige Sprache.  Ich habe vorher mehrere Sprachen ausprobiert: Pascal in der Schule;  C, C mit Klassen, C ++ an der Universit√§t.  Die letzten zwei (drei) haben eine starke Abneigung gegen die Programmierung ausgel√∂st: Anstatt das Problem zu l√∂sen, spielen Sie mit Zuordnungen und Destruktoren (be√§ngstigende W√∂rter aus der Vergangenheit), Sie denken in Grundelementen auf niedriger Ebene.  Meiner Meinung nach ist C nicht zur L√∂sung von p√§dagogischen und wissenschaftlichen Problemen geeignet (auf jeden Fall im Bereich der Mathematik).  Ich bin sicher, dass sie Einw√§nde gegen mich erheben werden, aber ich versuche niemandem etwas aufzuzwingen, ich dr√ºcke einfach meine Meinung aus. <br><br>  Python war einmal eine Offenbarung.  Zum ersten Mal in meinem Leben schrieb ich mehrere Abstraktionsebenen, die h√∂her waren als in C √ºblich.  Der Abstand zwischen der Aufgabe und dem Code wurde wie nie zuvor verringert. <br><br>  Ich h√§tte dies wahrscheinlich mein ganzes Leben in Python getan, wenn ich nicht pl√∂tzlich statistische NIST-Tests implementieren m√ºsste.  Es scheint, dass die Aufgabe sehr einfach ist: Es gibt ein Array mit einer L√§nge von mehreren (&gt; = 10) Megabyte, es gibt eine Reihe von Tests, die auf dieses Array angewendet werden m√ºssen. <br><a name="habracut"></a><br><h3>  Wof√ºr ist gut numpy? </h3><br>  In Python gibt es ein gutes Numpy-Paket f√ºr die Arbeit mit Arrays, das im Wesentlichen eine √ºbergeordnete Schnittstelle f√ºr schnelle Bibliotheken wie LAPACK darstellt.  Es scheint, dass das gesamte Gentleman-Set f√ºr wissenschaftliches Rechnen verf√ºgbar ist (Sympy, Numpy, Scipy, Matplotlib). Was m√∂chten Sie mehr? <br><br>  Jeder, der sich mit Numpy befasst hat, wei√ü, dass er gut ist, aber nicht in allem.  Wir m√ºssen auch versuchen sicherzustellen, dass die Operationen vektorisiert sind (wie in R), d.h.  in gewissem Sinne einheitlich f√ºr das gesamte Array.  Wenn Ihr Problem aus irgendeinem Grund pl√∂tzlich nicht mehr in dieses Paradigma passt, haben Sie Probleme. <br><br>  √úber welche nicht vektorisierten Aufgaben spreche ich?  Ja, nehmen Sie mindestens das gleiche NIST: Berechnen Sie die L√§nge des linearen Schieberegisters mit dem Berlekamp-Messi-Algorithmus.  Berechnen Sie die L√§nge der l√§ngsten Teilsequenz aufeinanderfolgender Einheiten usw.  Ich schlie√üe die M√∂glichkeit nicht aus, dass es eine geniale L√∂sung gibt, die das Problem auf eine vektorisierte reduziert. <br><br><div class="spoiler">  <b class="spoiler_title">List?</b> <div class="spoiler_text">  Als Beispiel aus demselben NIST: Es war notwendig, die Anzahl der "Schalt" -Sequenzen zu berechnen, wobei mit "Umschalten" das √Ñndern aufeinanderfolgender Einheiten (... 1111 ...) in aufeinanderfolgende Nullen (... 000 ...) gemeint ist. ), umgekehrt.  Dazu k√∂nnen Sie die urspr√ºngliche Sequenz ohne das letzte Element (x [: -1]) nehmen und die um 1 verschobene Sequenz (x [2:]) davon subtrahieren und dann die Anzahl der Elemente ungleich Null in der resultierenden neuen Sequenz berechnen.  Alles zusammen wird aussehen wie: <br><br><pre><code class="python hljs">np.count_nonzero(x[:<span class="hljs-number"><span class="hljs-number">-1</span></span>] - x[<span class="hljs-number"><span class="hljs-number">1</span></span>:])</code> </pre> <br>  Es mag wie ein unterhaltsames Training f√ºr den Geist aussehen, aber im Wesentlichen passiert hier etwas Unnat√ºrliches, ein Trick, der dem Leser nach kurzer Zeit nicht klar sein wird.  Ganz zu schweigen davon, dass dies immer noch langsam ist - niemand hat die Speicherzuordnung abgebrochen. <br></div></div><br>  Nicht vektorisierte Operationen in Python sind eine lange Zeit.  Wie gehe ich mit ihnen um, wenn Numpy nicht genug ist?  Normalerweise bieten sie mehrere L√∂sungen an: <br><br><ol><li>  <b>Numba JIT.</b>  Wenn sie wie auf der Numba-Titelseite beschrieben arbeiten w√ºrde, w√ºrde es sich meiner Meinung nach lohnen, die Geschichte zu beenden.  Ich hatte in der Vergangenheit etwas vergessen, was mit ihr schief gelaufen war;  Das Fazit ist, dass die Beschleunigung leider nicht so beeindruckend war, wie ich erwartet hatte. </li><li>  <b>Cython.</b>  OK, heben Sie Ihre H√§nde diejenigen, die glauben, dass Cython eine wirklich sch√∂ne, elegante L√∂sung ist, die nicht die Bedeutung und den Geist von Python zerst√∂rt?  Ich denke so nicht;  Wenn Sie nach Cython kommen, k√∂nnen Sie bereits aufh√∂ren, sich selbst zu t√§uschen, und zu etwas weniger Anspruchsvollem wie C ++ und C wechseln. </li><li>  Schreiben Sie die Engp√§sse in C neu und ziehen Sie sie aus Ihrem geliebten Python heraus.  OK, aber was ist, wenn ich das gesamte Programm habe - es geht nur um Berechnungen und Engp√§sse?  Xi bietet nicht!  Ich spreche nicht von der Tatsache, dass Sie in dieser L√∂sung nicht nur eine, sondern zwei Sprachen beherrschen m√ºssen - Python und C. </li></ol><br><h3>  Hier kommt die JULIA! </h3><br>  Nachdem ich √ºber vorhandene L√∂sungen nachgedacht hatte und nichts Gutes gefunden hatte (nicht programmieren konnte), beschloss ich, es mit etwas ‚ÄûSchnellerem‚Äú umzuschreiben.  In der Tat, wenn Sie im 21. Jahrhundert mit normaler Unterst√ºtzung f√ºr Arrays, vektorisierte Operationen "out of the box" usw. "Dreschmaschine f√ºr Zahlen" schreiben.  usw., dann ist Ihre Wahl nicht sehr dicht: <br><br><ol><li>  <b>Fortran</b> .  Und nicht lachen, wer von uns hat BLAS / LAPACK nicht aus unseren Lieblingssprachen gezogen?  Fortran ist eine wirklich gute (bessere SI!) Sprache f√ºr SCIENTIFIC Computing.  Ich habe es nicht aus dem Grund genommen, dass seit der Zeit von Fortran viele Dinge erfunden und zu Programmiersprachen hinzugef√ºgt wurden;  Ich hatte auf etwas Moderneres gehofft. </li><li>  <b>R</b> leidet unter den gleichen Problemen wie Python (Vektorisierung). </li><li>  <b>Matlab</b> - wahrscheinlich ja, ich habe leider kein Geld zum √úberpr√ºfen. </li><li>  <b>Julia</b> - das Pferd ist dunkel, wird abheben, wird nicht abheben (und es war nat√ºrlich bis zur stabilen Version 1.0) </li></ol><br><h3>  Einige offensichtliche Vorteile von Julia </h3><br><ol><li>  Es sieht aus wie Python, zumindest das gleiche "High-Level", mit der F√§higkeit, bei Bedarf in Zahlen zu zerfallen. </li><li>  Keine Aufregung mit Speicherzuordnungen und dergleichen. </li><li>  Leistungsstarkes Typensystem.  Typen werden optional und sehr dosiert verschrieben.  Ein Programm kann ohne Angabe eines einzelnen Typs geschrieben werden - und wenn Sie dies tun, k√∂nnen sie es schnell tun.  Aber es gibt Nuancen. </li><li>  Es ist einfach, benutzerdefinierte Typen zu schreiben, die genauso schnell sind wie die integrierten Typen. </li><li>  Mehrfachversand.  Sie k√∂nnen stundenlang dar√ºber sprechen, aber meiner Meinung nach - dies ist das Beste, was Julia hat, es ist die Grundlage f√ºr die Gestaltung aller Programme und im Allgemeinen die Grundlage f√ºr die Philosophie der Sprache. <br>  Dank des Mehrfachversands sind viele Dinge sehr einheitlich geschrieben. <br><br><div class="spoiler">  <b class="spoiler_title">Mehrere Versandbeispiele</b> <div class="spoiler_text"><pre> <code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>() #       <span class="hljs-number"><span class="hljs-number">0</span></span>  <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) #   <span class="hljs-number"><span class="hljs-number">10</span></span>     <span class="hljs-number"><span class="hljs-number">0</span></span>  <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) #   <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">5</span></span>   .... using Distributions d = Normal() #     <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(d) #     <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(d, <span class="hljs-number"><span class="hljs-number">10</span></span>) #   <span class="hljs-number"><span class="hljs-number">10</span></span> ...   </code> </pre><br>  Das hei√üt, das erste Argument kann eine beliebige (eindimensionale) Verteilung von Verteilungen sein, aber der Funktionsaufruf bleibt buchst√§blich gleich.  Und nicht nur die Verteilung (es ist m√∂glich, das RNG selbst als MersenneTwister-Objekt zu √ºbertragen und vieles mehr).  Ein weiteres (meiner Meinung nach veranschaulichendes) Beispiel ist die Navigation in DataFrames ohne loc / iloc. <br></div></div></li><li>  6. Arrays sind native, integrierte Arrays.  Vektorisierung aus der Box. <br></li></ol><br><h3>  Nachteile zu schweigen, was ein Verbrechen w√§re! </h3><br><ol><li>  Neue Sprache.  Einerseits nat√ºrlich ein Minus.  In etwas vielleicht unreifem.  Auf der anderen Seite ber√ºcksichtigte er den Rechen vieler fr√ºherer Sprachen, steht ‚Äûauf den Schultern von Riesen‚Äú, hat viele interessante und neue Dinge aufgenommen. </li><li>  Es ist unwahrscheinlich, dass sofort schnelle Programme schreiben.  Es gibt einige nicht offensichtliche Dinge, die sehr einfach zu handhaben sind: Sie treten auf den Rechen, bitten die Community um Hilfe, treten erneut ... usw.  Dies sind haupts√§chlich Typinstabilit√§t, Typinstabilit√§t und globale Variablen.  Soweit ich selbst sagen kann, durchl√§uft ein Programmierer, der schnell in Julia schreiben m√∂chte, im Allgemeinen mehrere Phasen: a) schreibt in Python.  Das ist gro√üartig und so ist es auch, aber manchmal gibt es Leistungsprobleme.  b) schreibt wie in C: wo immer m√∂glich Typen manuell vorschreiben.  c) versteht allm√§hlich, wo es notwendig (sehr gemessen) ist, Typen zu verschreiben, und wo sie sich gegenseitig st√∂ren. </li><li>  √ñkosystem  Einige Pakete sind roh in dem Sinne, dass irgendwo st√§ndig etwas abf√§llt;  Einige sind ausgereift, aber nicht miteinander vereinbar (eine Umstellung auf andere Typen ist beispielsweise erforderlich).  Einerseits ist das offensichtlich schlecht;  Auf der anderen Seite hat Julia viele interessante und mutige Ideen, nur weil ‚Äûwir auf den Schultern der Riesen stehen‚Äú - wir haben enorme Erfahrungen mit dem Betreten eines Rechen und ‚Äûwie man es nicht macht‚Äú gesammelt, und dies wird (teilweise) von den Paketentwicklern ber√ºcksichtigt. </li><li>  Nummerierung von Arrays ab 1. Ha, Scherz, das ist nat√ºrlich ein Plus!  Nein, im Ernst, was ist los, mit welchem ‚Äã‚ÄãIndex beginnt die Nummerierung?  Man gew√∂hnt sich in 5 Minuten daran.  Niemand beschwert sich dar√ºber, dass Ganzzahlen Ganzzahlen genannt werden, nicht ganze.  Das sind alles Geschmackssachen.  Und ja, nehmen Sie mindestens das gleiche Cormen gem√§√ü den Algorithmen - alles ist dort von einem nummeriert, und es ist manchmal unpraktisch, es im Gegenteil in Python zu wiederholen. </li></ol><br><h3>  Warum Geschwindigkeit? </h3><br>  Es ist Zeit, sich daran zu erinnern, warum alles begonnen wurde. <br><br>  Hinweis: Ich habe Python sicher vergessen. Schreiben Sie Ihre Verbesserungen in die Kommentare. Ich werde versuchen, sie auf meinem Laptop auszuf√ºhren und die Laufzeit anzuzeigen. <br><br>  Also zwei kleine Beispiele mit Mikrobenchmarks. <br><br><div class="spoiler">  <b class="spoiler_title">Etwas Vektorisiertes</b> <div class="spoiler_text">  Problem: Ein Vektor X von 0 und 1 wird dem Eingang der Funktion zugef√ºhrt. Es ist notwendig, ihn in einen Vektor von 1 und (-1) (1 -&gt; 1, 0 -&gt; -1) umzuwandeln und zu berechnen, wie viele Koeffizienten aus der Fourier-Transformation dieses Vektors sind Absolutwert √ºberschreitet die Grenzgrenze. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_fft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, boundary)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> np.count_nonzero(np.abs(np.fft.fft(<span class="hljs-number"><span class="hljs-number">2</span></span>*x<span class="hljs-number"><span class="hljs-number">-1</span></span>)) &gt; boundary) %timeit process_fft(x, <span class="hljs-number"><span class="hljs-number">2000</span></span>) <span class="hljs-number"><span class="hljs-number">84.1</span></span> ms ¬± <span class="hljs-number"><span class="hljs-number">335</span></span> ¬µs per loop (mean ¬± std. dev. of <span class="hljs-number"><span class="hljs-number">7</span></span> runs, <span class="hljs-number"><span class="hljs-number">10</span></span> loops each)</code> </pre><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_fft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, boundary)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t -&gt; t &gt; boundary, abs.(fft(2*x.-1)</span></span></span><span class="hljs-function">)) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">benchmark</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process_fft</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, 2000)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkTools</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Trial</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memory</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">106</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">81</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MiB</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">61</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">minimum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">80</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">233</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(4.75% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">median</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">80</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">746</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(4.70% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">85</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">000</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(8.67% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maximum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">205</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">831</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(52.27% GC)</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">samples</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">59</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evals</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sample</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span></span></code> </pre><br>  Wir werden hier nichts √úberraschendes sehen - trotzdem betrachten sie es nicht selbst, sondern geben es an gut optimierte fortran-Programme weiter. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Etwas nicht Vektorisierbares</b> <div class="spoiler_text">  Dem Eingang wird ein Array von 0 und 1 zugef√ºhrt. Ermitteln Sie die L√§nge der l√§ngsten Teilsequenz aufeinanderfolgender Einheiten. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> maxLen = <span class="hljs-number"><span class="hljs-number">0</span></span> currLen = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment"># This will count the number of ones in the block for bit in x: if bit == 1: currLen += 1 maxLen = max(maxLen, currLen) else: maxLen = max(maxLen, currLen) currLen = 0 return max(maxLen, currLen) %timeit longest(x) 599 ms ¬± 639 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1 loop each)</span></span></code> </pre><br><pre> <code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maxLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> # </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">This</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">will</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">the</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">number</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">of</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ones</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">the</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">block</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bit</span></span></span><span class="hljs-function"> == </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currLen</span></span></span><span class="hljs-function"> += </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maxLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maxLen, currLen)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maxLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maxLen, currLen)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currLen</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">return</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(maxLen, currLen)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">benchmark</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BenchmarkTools</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Trial</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">memory</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bytes</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocs</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">estimate</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">0</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">minimum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">094</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">median</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">248</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">9</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">319</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maximum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">time</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">12</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">177</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ms</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(0.00% GC)</span></span></span><span class="hljs-function"> -------------- </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">samples</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">536</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evals</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sample</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">1</span></span></span></span></code> </pre><br>  Der Unterschied ist mit blo√üem Auge offensichtlich.  Tipps zum "Fertigstellen" und / oder Vektorisieren der Numpy-Version sind willkommen.  Ich m√∂chte auch darauf hinweisen, dass die Programme fast identisch sind.  Zum Beispiel habe ich in Julia keinen einzigen Typ registriert (vergleiche mit dem vorherigen) - trotzdem funktioniert alles schnell. <br></div></div><br>  Ich m√∂chte auch darauf hinweisen, dass die vorgestellten Versionen nicht im endg√ºltigen Programm enthalten waren, sondern weiter optimiert wurden.  hier werden sie als Beispiel und ohne unn√∂tige Komplikationen angegeben (Weiterleiten von zus√§tzlichem Speicher in Julia, um rfft an Ort und Stelle auszuf√ºhren usw.). <br><br><h3>  Was kam am Ende heraus? </h3><br>  Ich werde den endg√ºltigen Code f√ºr Python und f√ºr Julia nicht zeigen: Dies ist ein Geheimnis (zumindest f√ºr den Moment).  Als ich mit dem Beenden der Python-Version aufh√∂rte, wurden alle NIST-Tests auf einem Array von 16 Megabyte Bin√§rzeichen in ~ 50 Sekunden durchgef√ºhrt.  Bei Julia laufen derzeit alle Tests auf dem gleichen Volumen ~ 20 Sekunden.  Es kann gut sein, dass ich ein Dummkopf bin und es Raum f√ºr Optimierungen usw. gab.  usw.  Aber das bin ich, wie ich bin, mit all seinen Vor- und Nachteilen, und meiner Meinung nach sollte nicht die sph√§rische Geschwindigkeit von Programmen in einem Vakuum in Programmiersprachen ber√ºcksichtigt werden, sondern wie ich sie pers√∂nlich programmieren kann (ohne wirklich grobe Fehler). <br><br><h3>  Warum habe ich das alles geschrieben? </h3><br>  Die Leute <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> wurden interessiert;  Ich beschloss zu schreiben, wenn die Zeit gekommen ist.  Ich denke, ich werde Julia in Zukunft genauer durchgehen und ein Beispiel f√ºr die L√∂sung einiger typischer Probleme geben.  Warum?  Mehr Sprachen, gut und anders, und lassen Sie jeden, der etwas finden m√∂chte, das zu ihm pers√∂nlich passt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427879/">https://habr.com/ru/post/de427879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427869/index.html">Offenes Webinar ‚ÄûMultithreading in Java. Jenseits von synchronized-notifyAll ¬ª</a></li>
<li><a href="../de427871/index.html">Weltraumpiraterie: - Bewaffnete Kaufleute und Milit√§rpatrouillen - Teil II</a></li>
<li><a href="../de427873/index.html">3D-Konstruktionsdrucker f√ºr das College of Modern Technology</a></li>
<li><a href="../de427875/index.html">Hintergrund: ‚ÄûInternet Archive‚Äú - Entstehungsgeschichte, Mission und Nebenprojekte</a></li>
<li><a href="../de427877/index.html">Rockstar-Programmiersprache: Wenn der Code wie Rock-Hit-Text aussieht</a></li>
<li><a href="../de427883/index.html">Einf√ºhrung in Virtualisierung, Container und Kubernetes: 18 Cloud-Ressourcen</a></li>
<li><a href="../de427889/index.html">Falsch, falsch, falsch! Methoden zur DDoS-Minderung</a></li>
<li><a href="../de427891/index.html">Millionen von Menschen k√∂nnen durch Sicherheitsl√ºcken in der Cisco WebEx Conference Platform angegriffen werden</a></li>
<li><a href="../de427893/index.html">Bloody Lola auf Omega 2 oder Python an Halloween w√ºrgen</a></li>
<li><a href="../de427895/index.html">Entfernen von Daten aus einer Shardable-Datenbank</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>