<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏿 🌚 👨‍👨‍👧‍👦 Pièges liés à l'identification d'un appareil Android 🤱🏾 ❕ 🤡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Certains développeurs peuvent avoir besoin d'identifier les appareils Android de leurs utilisateurs. Le plus souvent, cela ne se fait pas pour reconna...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pièges liés à l'identification d'un appareil Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434726/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/s_/wt/6d/s_wt6dw8egmbo7_j2bpzpvita3m.jpeg"></div><br>  Certains développeurs peuvent avoir besoin d'identifier les appareils Android de leurs utilisateurs.  Le plus souvent, cela ne se fait pas pour reconnaître le périphérique, mais pour déterminer l'installation spécifique de l'application.  J'ai également rencontré plusieurs cas où c'était nécessaire, si le développeur avait plusieurs applications et voulait comprendre qu'elles fonctionnent dans le même environnement. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google dit que l'</a> identification d'un appareil est facile.  Mais nous parlons d'Android :) <br><br>  <i>Cet article se concentre sur les applications ou les bibliothèques qui ne souhaitent pas être associées aux services Google.</i> <br><br>  Plongeons-nous donc dans cette merveilleuse aventure qui consiste à obtenir un identifiant d'appareil unique. <br><a name="habracut"></a><br><h4>  Ici, nous voyons plusieurs façons: </h4><br><ul><li>  Identifiant publicitaire </li><li>  IMEI </li><li>  Adresse MAC </li><li>  Numéro de série </li><li>  ID Android </li></ul><br>  Ça n'a pas l'air mal pour l'instant, n'est-ce pas?  Il existe jusqu'à cinq façons d'obtenir un identifiant unique pour un appareil Android.  Je suis sûr que si vous brouillez toujours sur le réseau, vous trouverez sûrement quelques autres façons, mais ici, j'ai fait les plus populaires.  Alors allons-y dans l'ordre. <br><br><h3>  Identifiant publicitaire </h3><br>  Il s'agit d'un identifiant publicitaire unique fourni par les services Google Play.  Il est nécessaire que la publicité fonctionne, afin que Google comprenne quelles annonces peuvent être affichées pour un utilisateur spécifique et quelles annonces ont déjà été diffusées à l'aide des bannières publicitaires intégrées aux applications.  Et cela signifie également que vous perdrez cet identifiant si votre application est téléchargée, par exemple, sur Amazon, et en plus vous devrez faire glisser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les bibliothèques Google</a> dans votre application. <br><br><pre><code class="xml hljs">dependencies { compile 'com.android.support:appcompat-v7:21.0.3' compile 'com.google.android.gms:play-services:6.5.87' }</code> </pre> <br>  <u>Conclusion:</u> nous n'identifions pas l'appareil dans tous les cas. <br><br>  Mais nous voulons à coup sûr, non?  Continuez ensuite. <br><br><h3>  IMEI </h3><br>  Il s'agit de l'identifiant international de l'équipement mobile utilisé sur les téléphones GSM.  Le numéro IMEI est utilisé par les réseaux pour identifier les smartphones et bloquer l'accès à un réseau d'appareils volés ou sur liste noire.  Mais malheureusement, avec IMEI, un certain nombre de problèmes peuvent survenir: <br><br><ul><li>  Une erreur IMEI non valide se produit </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IMEI peut être modifié</a> </li><li>  Pour obtenir l'autorisation IMEI, vous devez: </li></ul><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.READ_PHONE_STATE"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) { String imei = telephonyMgr.getImei(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { String imei = telephonyMgr.getDeviceId(); }</code> </pre> <br>  <u>Conclusion:</u> nous n'identifions pas l'appareil dans tous les cas, et ils peuvent aussi nous tromper: C <br><br><h3>  Adresse MAC </h3><br>  Pas fiable à 100%.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google lui-même en parle</a> , mais, malheureusement, j'ai vraiment rencontré quelques applications qui s'appuyaient sur l'adresse MAC de l'appareil.  Ne le faites pas. <br><blockquote>  Il peut être possible de récupérer une adresse Mac à partir du matériel WiFi ou Bluetooth d'un appareil.  Nous vous déconseillons de l'utiliser comme identifiant unique.  Pour commencer, tous les appareils n'ont pas de WiFi.  De plus, si le WiFi n'est pas activé, le matériel peut ne pas signaler l'adresse Mac. </blockquote><br><h3>  Numéro de série </h3><br>  Il est considéré comme un numéro de série unique de l'appareil, qui reste avec lui jusqu'à la «toute fin».  Vous pouvez l'obtenir de cette façon: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Until Android 7.1 (SDK 25) Build.SERIAL //Android 8 (SDK 26) ++ Build.getSerial()</span></span></code> </pre> <br>  Et maintenant sur les problèmes.  Tout d'abord, pour obtenir un numéro de série, vous devrez demander l'autorisation à l'utilisateur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i>READ_PHONE_STATE</i></a> , et l'utilisateur peut refuser.  Deuxièmement, le numéro de série <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut être modifié</a> . <br><br>  <u>Conclusion:</u> nous n'identifions pas l'appareil dans tous les cas, nous devons demander la permission de l'utilisateur, qui le triche et peut encore nous tromper. <br><br><h3>  ID Android </h3><br>  - Ça y est!  - nous devons crier.  - La solution à tous nos problèmes! <br><br>  L'ID Android est également un identifiant d'appareil unique.  Il s'agit d'une valeur 64 bits qui est générée et stockée lors du premier démarrage de l'appareil. <br>  Vous pouvez l'obtenir comme ceci: <br><br><pre> <code class="java hljs">Secure.getString(getContentResolver(), Secure.ANDROID_ID);</code> </pre> <br>  Il semblerait qu'une ligne aussi courte nous évite un mal de tête lors de l'identification de l'appareil.  Même les gars de Google utilisent Android_ID pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LVL</a> dans l'exemple. <br><br>  Et ici, nos espoirs s'effondrent et rien ne sera plus pareil.  Après la mise à jour vers Android 8, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Android_ID est</a> devenu unique pour chaque application installée.  Mais, en plus de cela, Google se soucie de nous, donc les applications qui ont été installées avant la mise à jour resteront avec les mêmes identifiants que Google enregistre en utilisant un service spécialement écrit pour cela.  Mais si l'application est désinstallée puis réinstallée, Android_ID sera différent.  Pour éviter cela, vous devez utiliser KeyValueBackup. <br><br><img src="https://habrastorage.org/webt/xv/i-/5c/xvi-5cj9pb1ecoo9bcmxasu_s14.png"><br>  Mais ce service de sauvegarde doit être enregistré, ainsi que le nom du package à spécifier.  En outre, la documentation indique que cela peut ne pas fonctionner pour <i>une</i> raison <i>quelconque</i> .  Et qui est à blâmer?  Personne, juste comme ça. <br><br><h4>  Conclusion générale </h4><br>  Si vous avez un bon backend, il vous suffit de collecter la distribution de l'appareil (applications installées, services, toutes les données sur l'appareil que vous pouvez obtenir) et de comparer les paramètres déjà là, considérez un pourcentage de modifications acceptables. <br><br>  PS Je publie toutes les collections comme toujours dans la chaîne de télégramme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@paradisecurity</a> , et le lien peut être trouvé dans mon profil, ou trouvé dans la recherche de télégrammes par nom. <br><br>  Heureux :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434726/">https://habr.com/ru/post/fr434726/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434716/index.html">Passer au centre de données: préparation</a></li>
<li><a href="../fr434718/index.html">Deux ans plus tard, la prise casque me manque toujours</a></li>
<li><a href="../fr434720/index.html">Verso de la connaissance zéro: une porte dérobée dans zk-SNARK qui ne peut pas être détectée</a></li>
<li><a href="../fr434722/index.html">Douleur, pilules et deux ambulances, ou comment nous sommes tous montés à la cinquième place IronStar 226 à Sotchi</a></li>
<li><a href="../fr434724/index.html">Les agriculteurs chinois font du streaming en direct</a></li>
<li><a href="../fr434728/index.html">Personnes et processus: pourquoi ne pas udalenka adapté à chaque entreprise?</a></li>
<li><a href="../fr434730/index.html">Bases de données en mémoire: application, mise à l'échelle et ajouts importants</a></li>
<li><a href="../fr434732/index.html">La vie à 6200 DPI. Examen du noyau HyperX Pulsefire</a></li>
<li><a href="../fr434734/index.html">Transformation de Fourier. Le rapide et le furieux</a></li>
<li><a href="../fr434736/index.html">Utilisation de la base de données des journaux Mikrotik pour supprimer la force brute</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>