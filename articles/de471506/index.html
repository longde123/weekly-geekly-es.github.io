<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëãüèΩ ‚ûó üòâ Korrekte Rundung von Dezimalzahlen im Bin√§rcode üßòüèø üëµüèø üßíüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eines der schwerwiegenden Probleme mit im Bin√§rcode dargestellten Dezimalzahlen ist das Problem, eine Bin√§rzahl auf den Wert einer darstellbaren Dezim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Korrekte Rundung von Dezimalzahlen im Bin√§rcode</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471506/"> Eines der schwerwiegenden Probleme mit im Bin√§rcode dargestellten Dezimalzahlen ist das Problem, eine Bin√§rzahl auf den Wert einer darstellbaren Dezimalzahl zu runden, die einer korrekt gerundeten Dezimalzahl am n√§chsten kommt.  Im Folgenden diskutieren wir dieses Problem und geben einen einfachen Algorithmus f√ºr die richtige Rundung an.  Die Funktionsweise des Algorithmus wird durch ein Testprogramm in C ++ veranschaulicht. <br><a name="habracut"></a><br>  Denken Sie daran, dass eine darstellbare Dezimalzahl eine Zahl ist, deren Wert durch Bin√§rcode genau dargestellt werden kann.  Die Zahl 0,125 entspricht also genau der Bin√§rzahl 0,001.  Es kann auch argumentiert werden, dass der Wert einer beliebigen Bin√§rzahl <i>y</i> gleich einer darstellbaren Dezimalzahl <i>x ist</i> .  Beispielsweise ist der Wert der Bin√§rzahl <i>y</i> = 1,001101 * 2 ^ -3 gleich dem Wert der dezimal darstellbaren Zahl <i>x</i> = 0,150390625. <br>  Wir sagen, dass die Bin√§rzahl y der Dezimalzahl <i>x entspricht</i> .  Umgekehrt entspricht die Dezimalzahl <i>x</i> der Bin√§rzahl <i>y</i> . <br><br>  Mal sehen, was mit einer Dezimalzahl passiert, wenn sie √ºber die Konsole eingegeben wird oder wenn sie im Programm als Konstante angezeigt wird. <br>  Jede Dezimalzahl wird vom Compiler in das vom Programmierer angegebene Format konvertiert (konvertiert).  Da Bin√§rzahlen in einem Computer am schnellsten verarbeitet werden, wird die eingegebene Dezimalzahl meistens entweder in ein Festkommaformat (einschlie√ülich int) oder in eines der Gleitkommaformate - einfach, doppelt oder in ein anderes Bin√§rformat - konvertiert . <br><br>  Gem√§√ü dem IEEE754-Standard werden reelle Zahlen im internen Format einer Maschine in normalisierter Bin√§rform dargestellt.  Eine bin√§re positive reelle Zahl <i>y</i> kann also als <i>y</i> <i>= b0.b1 ... bp * 2 ^ e (b0 ‚â† 0) dargestellt werden.</i> <br>  Die gleiche Zahl kann als <i>0.b0b1 ... bp * 2 ^ (e + 1) (b0 ‚â† 0) dargestellt werden,</i> wenn <i>e + 1&gt; 0</i> und <i>0.b0b1 ... bp * 2 ^ e (b0 ‚â† 0)</i> wenn <i>e &lt;0</i> . <br>  Weiter werden wir uns an die zweite Ansicht halten, da  In unserem C ++ - Testprogramm unten gibt es eine Funktion q = frexp (x, &amp; e), mit der wir den Wert des Exponenten <i>e</i> in der Bin√§rzahl bestimmen k√∂nnen, die als <i>b0.b1 ... bp * 2 ^</i> <i>e dargestellt wird</i> . <br><br>  Das <i>Dezimal√§quivalent</i> einer beliebigen bin√§ren normalisierten Zahl <i>y = 0.b0b1 ... bp * 2 ^ e (b0 ‚â† 0)</i> ist also gleich einer normalisierten Dezimalzahl <i>x = 0.d0d1 ... dN ... dn * 10 ^ E (d0 ‚â† 0).</i> <br>  Beispielsweise entspricht die Zahl <i>y = 0,1001101 * 2 ^ -2</i> der darstellbaren Dezimalzahl <i>x = 0,150390625</i> . <br>  Um die Zahl <i>Xr</i> von <i>x</i> gleich der auf <i>N</i> signifikanten Stellen gerundeten Zahl zu erhalten, muss <i>X</i> mit einem Faktor von <i>10 ^ k</i> multipliziert werden, wobei <i>k = NE ist</i> .  Dies ist notwendig, damit die resultierende Zahl einen ganzzahligen Teil mit <i>N</i> signifikanten Stellen enth√§lt, der dann auf die n√§chste ganze Zahl gerundet werden kann.  Die gerundete ganze Zahl muss dann durch Multiplizieren mit <i>10 ^ -k</i> auf die vorherige Skala reduziert werden.  Mathematisch kann dies mit der folgenden Formel geschrieben werden: <br>  <i>X = [x * 10 ^ k + 0,5] * 10 ^ -k = [y * 10 ^ k + 0,5] * 10 ^ -k,</i> wobei [] der ganzzahlige Teil der Zahl ist. <br><br>  Es kann gezeigt werden, dass eine ganzzahlige Bin√§rzahl <i>B</i> mit <i>m</i> Bin√§rziffern gleich dem Wert der Dezimalzahl <i>D ist</i> , die <i>n = ‚åäm * log2‚åã</i> Dezimalstellen enth√§lt, vorausgesetzt, <i>B &lt;10 ^ n.</i>  <i>Und gleich n = n + 1</i> , vorausgesetzt <i>B ‚â• 10 ^ n</i> .  In den Berechnungen k√∂nnen wir <i>log2‚âà0.301</i> nehmen. <br><br>  Wir bestimmen den Wert von <i>k</i> basierend auf den Informationen, die in der bin√§ren Darstellung von <i>y</i> verf√ºgbar sind.  In der Formel f√ºr <i>k ist die</i> Rundungsgenauigkeit von <i>N</i> bekannt, daher m√ºssen wir den Exponenten <i>E</i> bestimmen <i>.</i> <br>  Der Exponent <i>E wird</i> aus der Beziehung bestimmt: <i>E = ‚åäe * 0,301‚åã</i> . <br>  Es bleibt der folgende Umstand zu ber√ºcksichtigen.  Wenn <i>x * 10 ^ k = X&gt; 10 ^ N ist</i> , m√ºssen Sie es mit <i>10 ^ (- 1)</i> multiplizieren und den Koeffizienten <i>k</i> anpassen.  Wir erhalten <i>X = X * 10 ^ (- 1), k = k-1</i> . <br>  Die gerundete Zahl ist gleich <i>Xr = X * 10 ^ (- k)</i> . <br><br>  Als Ergebnis erhalten wir den folgenden einfachen Algorithmus f√ºr die korrekte Dezimalrundung von bin√§ren reellen Zahlen.  Der Algorithmus eignet sich f√ºr jedes Bin√§rzahlformat mit einer willk√ºrlich festgelegten Dezimalrundungsgenauigkeit <i>N.</i> <br>  Am Eingang: <br>  Dezimalrundungsgenauigkeit <i>N</i> ; <br>  Ist eine Bin√§rzahl im Format <i>y = 0.b0b1 ... bp * 2 ^ e (b0 ‚â† 0)</i> . <br>  Ausgabe: Abgerundete Dezimalzahl <i>X = 0.d0d1 ... dN * 10 ^ E.</i> <br>  - 1. Bestimmen Sie den Exponenten e der Bin√§rzahl y; <br>  2. E = ‚åäe * 0,3‚åã; <br>  3. k = NE; <br>  4. X = x * 10 ^ k; <br>  5. Wenn X &lt;10 ^ N, dann Punkt 8; <br>  6. X = X * 10 ^ -1; <br>  7. k = k-1; <br>  8. Xr = [X + 0,5] * 10 ^ (- k); <br>  Ende. <br>  - In dem obigen Algorithmus ist die Zahl <i>Xr</i> die darstellbare Dezimalzahl, die der Zahl am n√§chsten liegt. Dies ist die korrekte Rundung der Zahl <i>x</i> , die wiederum das Dezimal√§quivalent der Zahl <i>y ist</i> . <br>  Da wir es gewohnt sind, mit Dezimalzahlen zu arbeiten, ist der Eingabestream in der Regel genau Dezimalzahlen.  Am Ausgang wollen wir auch Dezimalzahlen erhalten.  Zum Beispiel wie in Excel.  Nach der Konvertierung von Dezimalzahlen in Bin√§rcode werden diese jedoch normalerweise irreversibel transformiert.  Infolgedessen stimmt die in Bin√§rzahlen konvertierte Rundung m√∂glicherweise nicht mit der korrekten Rundung der auf der Konsole gedruckten Zahlen √ºberein.  Dies gilt haupts√§chlich f√ºr F√§lle, in denen versucht wird, eine Dezimalzahl auf die maximal m√∂gliche Anzahl signifikanter Stellen zu runden.  F√ºr Single ist dies 7 und f√ºr Double ist es 15. <br>  Dies kann mit dem folgenden Testprogramm, das der Autor in C ++ geschrieben hat, gut untersucht werden. <br><br>  Im Testprogramm wird auf Anfrage Folgendes in die Konsole eingegeben: <br>  - die Genauigkeit der <i>N-</i> Dezimalrundung der Zahl <i>X</i> , die die n√§chste darstellbare Zahl des bin√§ren √Ñquivalents der Zahl <i>x ist</i> ; <br>  Ist die Zahl <i>x</i> in beliebiger Form. <br><br>  Unter der eingegebenen Dezimalzahl <i>x wird die</i> Zahl <i>X</i> gedruckt, die die darstellbare Zahl ist, die <i>x am</i> n√§chsten kommt (siehe Abbildung unten). <br>  Die Zahl <i>X</i> wird gerundet, weil  Der genaue Wert von <i>x geht</i> bei der bin√§ren Konvertierung verloren. <br>  R√ºckgabe: <br>  - Dezimalzahl im Format <i>Xr = M * 10 ^ (N + e),</i> wobei <i>M</i> eine ganzzahlige Dezimalzahl mit <i>N</i> signifikanten Stellen ist; <br>  Ist die Zahl <i>xr</i> , die gleich der darstellbaren Zahl ist, die dem normalisierten bin√§ren √Ñquivalent der Zahl <i>X am</i> n√§chsten kommt. <br><img src="https://habrastorage.org/webt/su/5-/g5/su5-g5wfbg4xm6py0ged3m9yeaq.png" alt="Bild"><br>  Im Screenshot: <br><br>  N = 15 - Die Anzahl der dezimalen signifikanten Stellen, auf die die eingegebene Dezimalzahl gerundet ist. <br>  x = 7.123456789098765321 e-89 ist die Dezimalzahl, die wir auf 15 signifikante Stellen runden m√∂chten. <br>  X = 7.12345678909876559 e-089 - eine darstellbare Dezimalzahl, deren Wert gleich der Bin√§rzahl ist, die durch Konvertieren der Zahl x in das Format p = 53 erhalten wird. <br>  Xr = x = 712345678909877e-103 - Ganzzahlige Mantissenzahl, erhalten durch Runden der Zahl X. <br>  xr = x = 7.12345678909877e-089 - die Zahl, die durch Normalisieren des bin√§ren √Ñquivalents der Dezimalzahl Xr erhalten wird.  Es ist am n√§chsten an Xr. <br><br>  Unten finden Sie den Code des Testprogramms f√ºr die korrekte Rundung von Dezimalzahlen, die im Bin√§rcode in C ++ dargestellt sind. <br><br><pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;math.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;iomanip&gt;
using namespace std;

int main()
{
   double q,x,xr,X;
   unsigned long long int Xr;
   int N,p,E,e,k;

  cout &lt;&lt;"Input a binary precision p=";
  cin&gt;&gt;p;
  cout &lt;&lt;"Input a decimal precision N=";
  cin&gt;&gt;N;
  cout &lt;&lt;endl&lt;&lt;"Input a number and press ENTER:"&lt;&lt;"\n"&lt;&lt;"x= ";
  cin&gt;&gt;x;
   cout&lt;&lt;"X= "&lt;&lt; setprecision(18)&lt;&lt;x &lt;&lt; '\n';

    q=frexp (x, &amp;e);
    E =static_cast &lt;int&gt; (e*0.301);
    k=N-E;
   if (E&lt;0)       //for format xr=d0.d1...dN*10^E (d0‚â†0).
        k=k+1;
    X=x*pow(10,k);
       if (X &gt; pow (10,N)){
            X=X/10;
            k=k-1;
      }

       X=X+0.5;
       Xr=static_cast &lt;unsigned long long int&gt; (X);
       xr=Xr*pow(10,-k);

    cout&lt;&lt;endl &lt;&lt;"Xr= "&lt;&lt;Xr&lt;&lt;"e"&lt;&lt;-k&lt;&lt;'\n';
    cout&lt;&lt;"xr="&lt;&lt;xr&lt;&lt;'\n';

   system("pause");
      return 0;
}</code></pre><br>
<br>
      pow(10,k). ,   <i> k</i> ,    ,    <i>10^k</i>,   <i>5^k</i>.</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de471506/">https://habr.com/ru/post/de471506/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de471496/index.html">Ein bisschen √ºber das Abonnementmodell im App Store</a></li>
<li><a href="../de471498/index.html">Die Karte der Stra√üenfixierungskameras wird ver√∂ffentlicht: sich freuen oder weinen?</a></li>
<li><a href="../de471500/index.html">R√ºckruf oder ‚ÄûSteigerung der Kundenbindung‚Äú</a></li>
<li><a href="../de471502/index.html">Ideenfarm</a></li>
<li><a href="../de471504/index.html">Zweidimensionales Duett: Erzeugung von Borofen-Graphen-Heterostrukturen</a></li>
<li><a href="../de471508/index.html">Armless Admin = Hyperkonvergenz?</a></li>
<li><a href="../de471512/index.html">28. Oktober, Jekaterinburg - Qualit√§tskommunikation</a></li>
<li><a href="../de471514/index.html">Die √úberschrift "Artikel f√ºr Sie lesen." Januar - Juni 2019</a></li>
<li><a href="../de471516/index.html">Intel 665p - SSD mit 96-Layer-QLC-NAND</a></li>
<li><a href="../de471518/index.html">Apple im Jahr 2019 ist Linux im Jahr 2000</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>