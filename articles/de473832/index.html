<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüç≥ üë∏üèΩ üçï ShIoTiny: Updates und Benachrichtigungen üë®‚ÄçüöÄ ü§πüèº ü§∏üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Worum geht es in diesem Artikel? 
 Wir setzen die Artikelserie √ºber ShIoTiny fort - eine visuell programmierbare Steuerung, die auf dem ESP8266- Chip ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: Updates und Benachrichtigungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473832/"><img src="https://habrastorage.org/webt/2x/3l/hz/2x3lhz-tej3w7wnbri8k_crqjbs.jpeg"><br><br><h4>  Worum geht es in diesem Artikel? </h4><br>  Wir setzen die Artikelserie √ºber <b>ShIoTiny fort</b> - eine visuell programmierbare Steuerung, die auf dem <b>ESP8266-</b> Chip basiert. <br><br>  In diesem Artikel wird <b>erl√§utert,</b> was sich seit der vorherigen <b>ShIoTiny-</b> Firmware ge√§ndert hat: Wie hat sich die Benutzeroberfl√§che ge√§ndert <b>?</b>  wie man "Beine" und andere weniger wichtige, aber nicht weniger lang erwartete Dinge neu zuordnet. <br><br>  Der Artikel pr√§sentiert so etwas wie ein " <i><b>Fact Sheet</b></i> " zum Stand der Dinge im Bereich der <b>ShIoTiny-</b> Firmware- <b>Entwicklung</b> .  Diejenigen, die nicht an meiner Entwicklung dieses Artikels interessiert sind, k√∂nnen diesen Artikel mit gutem Gewissen √ºberspringen. <br><br>  Diejenigen, die nicht wissen, wovon sie sprechen, aber es herausfinden m√∂chten, k√∂nnen meine vorherigen Artikel √ºber die <b>ShIoTiny-</b> Firmware lesen oder sich auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> beziehen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>ShIoTiny-</b> Projektseite</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Online-Version des <b>ElDraw-</b> Editors</a> ist genau die gleiche wie in der Firmware. <br><br>  Links zu Schaltpl√§nen, Firmware und mehr - auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>ShIoTiny-</b></a> Website im Dokumentationsbereich. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorherige <b>ShIoTiny-Artikel</b> und meine anderen Artikel</a> <br><a name="habracut"></a><br><h3>  Einf√ºhrung, um die ehrw√ºrdige √ñffentlichkeit zu beruhigen </h3><br>  So kam es, dass das vierte Quartal ein permanenter Ansturm ist.  Daher haben einige Genossen bereits begonnen, das <b>ShIoTiny-</b> Projekt zu begraben und mir per Post zu schreiben. Sie sagen: ‚ÄûHey, Autor, wo bist du ?!  warum schreibst du nicht ?!  Wir verwenden hier Ihre Firmware!  und du bist kein einziger neuer Artikel! " <br>  Das war nat√ºrlich h√∂flich, aber in Bezug auf die Bedeutung war es das auch.  Einige schrieben im Gegenteil Vorschl√§ge und Kommentare, die beim Auffangen von Softwarefl√∂hen sehr hilfreich waren.  Danke Jungs.  Es ist immer sch√∂n, dass Sie nicht in Ihrem eigenen Saft kochen, sondern Gleichgesinnte haben. <br><br>  Freunde!  Ich erinnere Sie daran, dass mein Projekt ein Hobby ist und ich au√üerdem einen Job, eine Frau und Kinder habe.  Also bitte ich Sie: Seien Sie nachsichtig!  Der Autor schreibt, wie er kann und kann :) <br><br>  Ich beeile mich, alle zu beruhigen: Das <u>Projekt ist nicht tot</u> !  Ich habe einige Fl√∂he aus dem Code gefangen und au√üerdem die Projektwebsite √ºberarbeitet (obwohl ich sie noch nicht fertiggestellt habe - ich f√ºlle die Website mit Inhalten). <br><br>  Aus der Sicht der meisten philosophischen Lehren der Welt gibt es nichts Dauerhaftes.  Sogar unser Universum entwickelt sich weiter.  Was k√∂nnen wir √ºber die Firmware des Mikrocontrollers oder die Projektwebsite sagen? <br><br>  Die wichtigsten √Ñnderungen in der <b>ShIoTiny-</b> Firmware betrafen haupts√§chlich zwei Dinge: die M√∂glichkeit, die Beine neu zu definieren, und die Controller- <b>Statusseite</b> .  Wir werden dar√ºber reden.  Das neue Design der Projektwebsite werde ich hier nicht ansprechen: Jeder, der neugierig ist, wird vorbeikommen, schauen und kritisieren. <br><br><h3>  <b>ESP8266</b> Beine neu definieren </h3><br>  Also, die Beine oder sie sind - <b>GPIO</b> .  Urspr√ºnglich sollten die Beine des <b>ESP866-</b> Mikrocontrollers nicht neu definiert werden.  Sie waren fest mit den Ein- und Ausg√§ngen des <b>ESP-07-</b> Boards verbunden (alle Interessierten - alles dar√ºber finden Sie auf der Projektwebsite). <br><br>  Aber pl√∂tzlich stellte sich heraus, dass meine Firmware ohne Modifikation nicht nur auf dem <b>ESP-07-</b> Modul mit 1 MB FLASH, sondern auch auf dem <b>ESP-01</b> , <b>ESP-12</b> und sogar auf dem <b>ESP-8285 funktioniert</b> ! <br><br>  Die Frage stellte sich zu Recht, dass einer 5 Eing√§nge und einen Ausgang, die anderen 6 Ausg√§nge und keine Eing√§nge und die dritten drei Thermometer gleichzeitig ben√∂tigt. <br><br>  Eine Welle von Briefen aus der emp√∂rten √ñffentlichkeit verdunkelte fast die √úberreste meines Geistes!  Meine Frau bereitete sich bereits darauf vor, mich mit einem Todeshemd als Pfleger zu bezeichnen ... Aber ich stellte mich als harte Nuss heraus! <br>  Ich biss die Z√§hne zusammen und trank drei Liter Kaffee. Ich sammelte die Reste des Gehirns, die zuf√§llig nicht in der Studentenschaft getrunken wurden, und fand heraus, wie man den Trick mit einer Neudefinition der Beine umsetzt, damit sich alle wohl f√ºhlen. <br><br>  Ich werde den Leser nicht mit der internen Programmk√ºche langweilen.  Aus Sicht des Benutzers sieht alles sehr einfach aus: Er steckt die Maus in einen Knoten, der mit einem beliebigen Teil des <b>GPIO-</b> Moduls verbunden ist, und w√§hlt einen Teil aus der Liste der m√∂glichen aus.  Ungef√§hr wie in der folgenden Abbildung gezeigt. <br><br><img src="https://habrastorage.org/webt/zn/-f/9x/zn-f9x5xesj70levkx1noewx5ay.jpeg"><br><br>  <b>N / A</b> - bedeutet, dass der Fu√ü nicht ausgew√§hlt ist. <br>  Wenn sich in der Schaltung ein Knoten befindet, f√ºr den kein <b>N / A-</b> <b>Zweig</b> ausgew√§hlt ist, kann eine solche Schaltung nicht in das Ger√§t geladen werden - der <b>ElDraw-</b> Editor l√§sst dies nicht zu.  Ein solches Schema kann jedoch auf die Festplatte heruntergeladen werden, um es ‚Äûeinige Zeit sp√§ter‚Äú weiter zu bearbeiten. <br><br>  Alles ist sehr einfach, aber es gibt Nuancen. <br><br>  <b>Erstens</b> , was meiner Meinung nach sehr praktisch ist, werden in der Liste nur unbenutzte Beine angezeigt.  Das hei√üt, ein Bein zweimal zu w√§hlen ist unm√∂glich. <br><br>  <b>Zweitens</b> ist das <b>GPIO15-</b> Bein f√ºr die AP-Taste reserviert und kann nicht f√ºr andere Zwecke verwendet werden.  Sorry, aber sonst auf keinen Fall ... <br><br>  <b>Drittens</b> kann der <b>GPIO16-Zweig</b> nicht als regul√§rer <b>Bin√§reingang</b> ( <b>Eingangsknoten</b> ) verwendet werden. <br><br>  <b>Viertens</b> k√∂nnen die <b>GPIO9-</b> und <b>GPIO10-Beine</b> nur auf dem <b>ESP-8285-</b> Modul verwendet werden.  Bei anderen Modulen ist das Ergebnis katastrophal - volle Abh√§ngigkeit und endloser Neustart! <br><br>  Der letzte Punkt - das H√§ngen einiger Module bei der Auswahl der <b>GPIO9-</b> und <b>GPIO10-Beine</b> hat mich zum Nachdenken gebracht.  Schlie√ülich m√∂chte ich den Controller nicht jedes Mal √§ndern, wenn die Beine falsch ausgew√§hlt sind!  Und ich habe mir einen modifizierten, neuen Weg ausgedacht, um in den Konfigurationsmodus zu wechseln. <br><br><h3>  Neue M√∂glichkeit, in den Konfigurationsmodus zu wechseln </h3><br>  Wenn jemand meine vorherigen Artikel gelesen hat, erinnert er sich daran, dass der <b>ShIoTiny-</b> Firmware-Konfigurationsmodus der Modus ist, in dem der ESP8266-Chip zu einem offenen Zugangspunkt wird und die Programmschaltung nach dem Neustart nicht automatisch startet.  Und wenn es nicht startet, bleibt es bei der Auswahl von <b>GPIO-</b> Beinen nicht h√§ngen. <br><br>  Das hei√üt, im Konfigurationsmodus k√∂nnen Sie die Problembereiche von <b>GPIO9</b> und <b>GPIO10</b> auf andere <b>√§ndern</b> .  Das Problem ist jedoch, dass Sie nur dann in den Konfigurationsmodus gelangen k√∂nnen, wenn Sie die <b>AP-</b> Taste etwa 4 Sekunden lang gedr√ºckt halten!  Und w√§hrend dieser Zeit hat der Controller Zeit, das Schaltungsprogramm "Kurve" auszuf√ºhren und einzufrieren! <br><br>  Um dieses Problem zu beheben, habe ich nach dem Neustart des Controllers ein Schutzintervall von einer halben Sekunde festgelegt.  Wenn die <b>AP-</b> Taste innerhalb von 0,5 Sekunden nach dem Neustart des Controllers gedr√ºckt wird, wird der Controller sofort im Konfigurationsmodus neu gestartet.  Gleichzeitig startet das Programmschema w√§hrend des Schutzintervalls von einer halben Sekunde nicht.  Und das bedeutet, dass es nicht h√§ngen kann. <br><br>  Die Nachteile liegen auf der Hand - das Programm startet nicht sofort, sondern eine halbe Sekunde sp√§ter.  Die Vorteile sind wesentlich gr√∂√üer: Wenn Sie die ‚Äûfalschen Beine‚Äú ausw√§hlen oder das Schaltungsprogramm aus einem anderen Grund einfriert, k√∂nnen Sie jederzeit in den Konfigurationsmodus wechseln und die Situation beheben, ohne den Controller zu blinken. <br><br>  In der Praxis sieht alles einfacher aus als eine ged√§mpfte R√ºbe: Wir dr√ºcken die <b>Reset-</b> Taste und dr√ºcken die <b>AP-</b> Taste, ohne sie zu st√∂ren.  Sofort f√ºr etwa eine halbe Sekunde leuchtet die blaue <b>STATUS-</b> LED auf (wenn Sie sie nat√ºrlich an <b>GPIO0</b> gel√∂tet <b>haben</b> ) und der Controller wird im Konfigurationsmodus neu <b>gestartet</b> . <br><br>  Wenn die Programmschaltung normal funktioniert, k√∂nnen Sie jederzeit auf die ‚Äûalte‚Äú Weise in den Konfigurationsmodus wechseln - indem Sie die <b>AP-</b> Taste etwa 4 Sekunden lang gedr√ºckt halten (bis die blaue <b>STATUS-</b> LED aufleuchtet). <br><br><h3>  <b>ShIoTiny-Statusseite</b> </h3><br>  Die M√∂glichkeit, die Beine nach dem Willen des Benutzers zu verbinden, hat zu einer √úberarbeitung der Hauptinformationsseite der <b>ShIoTiny-</b> Firmware gef√ºhrt. <br><br>  Nach intensiven √úberlegungen kam ich zu dem Schluss, dass die Seite a) informativ sein und b) nicht zu viel enthalten sollte. <br><br>  Was ich bekommen habe, ist in der Abbildung unten dargestellt. <br><br><img src="https://habrastorage.org/webt/c6/lr/as/c6lrasjcqqtzgd1fhz_gk--k4z4.jpeg"><br><br>  Auf der Hauptinformationsseite gibt es zwei Abschnitte: <b>Info</b> - Allgemeine Informationen und <b>Verwendete Gruppenrichtlinienobjekte</b> - Informationen zur Verwendung von E / A-Beinen.  Betrachten wir sie genauer. <br><br><h4>  Info Abschnitt </h4><br>  <b>Name: esp_8266_155da4</b> - ein eindeutiger Name f√ºr das Ger√§t.  Es wird automatisch generiert und kann nicht ge√§ndert werden. <br><br>  <b>Ver: 2019-10-22 22:54:51 +0700 6b5ee82 clean</b> - Firmware-Version (Erstellungsdatum und Commit- <b>ID</b> ). <br><br>  <b>MQTT: Verbunden mit: 192.168.1.2:21064, SSL</b> - Verbindung zum MQTT-Server.  Zeigt die IP-Adresse oder URL des Servers, den Serverport und den SSL-Modus an, wenn eine sichere Verbindung verwendet wird.  Denken Sie daran, dass die Verbindung niemals hergestellt wird, wenn das Schaltungsprogramm keine Knoten f√ºr die Arbeit mit MQTT enth√§lt! <br><br>  <b>WiFi: STA IP: 192.168.1.134.</b>  - <b>WiFi ESP8266</b> Betriebsmodus: <b>STA</b> - Station, <b>AP</b> - Access Point.  Beide Modi mit unterschiedlichen IP-Adressen k√∂nnen gleichzeitig ausgew√§hlt werden. <br><br>  <b>Jetzt: Mi 30 Okt 2019 21:49:28 GMT + 0700</b> - aktuelle Zeit.  Es wird angezeigt, dass nur die Zeit vom Knoten Zeit einstellen eingestellt ist!  Andernfalls wird angezeigt, dass die Uhrzeit nicht synchronisiert und nicht eingestellt ist. <br><br><h4>  Abschnitt "Verwendete GPIOs" </h4><br>  Dieser Abschnitt zeigt alle im Programmdiagramm verwendeten Modulzweige und ihren aktuellen Status. <br><br>  Das Ausgabeformat ist offensichtlich: <b>GPIO &lt;Beinennummer&gt; (Funktion): Status</b> <br>  Die <b>Beinnummer</b> ist die Nummer oder f√ºr den <b>ADC</b> anstelle der Nummer die Inschrift <b>adc</b> . <br>  Funktion: <b>Eingang</b> - Bin√§reingang;  <b>Relais</b> - Bin√§rausgang;  <b>ADC</b> - ADC oder Sensortyp: <b>DS182x</b> oder <b>DHTxx</b> . <br><br>  Feld "Zustand" - h√§ngt vom Zweck des Beins ab. <br>  F√ºr bin√§re Ein- und Ausg√§nge - 0 oder 1. <br>  F√ºr Sensoren - Temperatur, Luftfeuchtigkeit. <br>  F√ºr den ADC - seine Messwerte werden gem√§√ü der angegebenen Formel neu berechnet (siehe Beschreibung der Arbeit mit dem ADC in den Anweisungen). <br><br>  Meiner Meinung nach enth√§lt die Hauptseite alle notwendigen Informationen √ºber den Betrieb der Steuerung. <br><br><h3>  Fazit </h3><br>  Hier sind in der Tat alle wichtigen √Ñnderungen in der Firmware heute.  Zus√§tzlich zu diesen Neuerungen wurden Dutzende von f√ºnf kleinen Fehlern behoben. <br><br>  Wie gewohnt - detaillierte Anweisungen auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>ShIoTiny-</b></a> Website im Dokumentationsbereich oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Vorschl√§ge, W√ºnsche, Kritik, <s>Geld, Geschenke</s> usw. - senden Sie mir einen Kommentar oder eine E-Mail: <b>shiotiny@yandex.ru</b> . <br><br>  Warten auf Feedback und Vorschl√§ge. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473832/">https://habr.com/ru/post/de473832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473818/index.html">Anwendung auf TSD und Kommunikation mit 1C: Enterprise 8.3 √ºber HTTP-Service. Teil 4 (OnKeyUp. SC-Scanner mit Tastaturemulation)</a></li>
<li><a href="../de473822/index.html">Stellenangebot an einem Tag: Wie wir am selben Tag interviewt und Feedback gegeben haben</a></li>
<li><a href="../de473824/index.html">So erstellen Sie eine Gesch√§ftstechnologie f√ºr die Vertriebsplanung in einem einzigen System</a></li>
<li><a href="../de473826/index.html">OTP-Authentifizierung auf dem Apache-Webserver</a></li>
<li><a href="../de473828/index.html">Computer Vision als Alternative zu B√ºroausweisen</a></li>
<li><a href="../de473834/index.html">Blackbox-√úberwachung in Clos-Netzwerken. Yandex-Bericht</a></li>
<li><a href="../de473838/index.html">DJI Mavic Mini: der leichteste zusammenklappbare Quadrocopter</a></li>
<li><a href="../de473840/index.html">Streamen Sie Videos vom Android-Ger√§t √ºber UDP zur JAVA-Anwendung</a></li>
<li><a href="../de473842/index.html">Oktober Maschinelles Lernen und k√ºnstliche Intelligenz News Digest</a></li>
<li><a href="../de473844/index.html">Warum brauchen wir Bereiche von C ++ 20 in einem einfachen Brecher?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>