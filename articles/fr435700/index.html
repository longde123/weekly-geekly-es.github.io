<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçñ ü§∏üèª ‚õìÔ∏è Questions d'entretiens chez 8 Worst Vue.js üìã üßëüèø üò•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Aimez-vous les entretiens d'embauche? Et souvent les d√©penser? Si la r√©ponse √† la deuxi√®me question est ¬´Oui¬ª, alors parmi les candi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Questions d'entretiens chez 8 Worst Vue.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/constanta/blog/435700/">  Bonjour, Habr! <br><br>  Aimez-vous les entretiens d'embauche?  Et souvent les d√©penser?  Si la r√©ponse √† la deuxi√®me question est ¬´Oui¬ª, alors parmi les candidats, vous avez probablement rencontr√© des personnes excellentes et intelligentes qui ont r√©pondu √† toutes vos questions et ont approch√© la fin de la paie. <br><br>  Mais vous, bien s√ªr, ne voulez pas trop payer les professionnels.  Et il est vital de para√Ætre plus intelligent qu'eux, ne les laissez que pour la dur√©e de l'entretien. <br><br>  Si vous avez des probl√®mes avec cela, alors bienvenue au chat.  Vous y trouverez les questions les plus d√©licates et les plus perverses sur Vue, ce qui mettra tout candidat en place et vous fera douter de vos comp√©tences professionnelles. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f2/bbc/b61/1f2bbcb6172cd2d001c0329926105190.jpg" alt="image"><br><a name="habracut"></a><br><h3>  1. D√©clencheur Watcher √† l'int√©rieur des crochets du cycle de vie </h3><br>  Cette question peut sembler facile, mais je vous garantis que personne, m√™me le d√©veloppeur le plus avanc√©, n'y r√©pondra.  Vous pouvez lui demander au d√©but de l'entretien pour que le candidat ressent imm√©diatement votre sup√©riorit√©. <br><br>  <b>Question:</b> <br><br>  Il existe un composant TestComponent qui a une variable de montant.  √Ä l'int√©rieur des principaux crochets du cycle de vie, nous le d√©finissons sur une valeur dans l'ordre num√©rique de 1 √† 6. Watcher, qui affiche sa valeur dans la console, se tient sur cette variable. <br><br>  Nous cr√©ons une instance TestComponent et la supprimons apr√®s quelques secondes.  Il faut dire que nous verrons dans la sortie console. <br><br>  Code: <br><br><pre><code class="django hljs"><span class="xml"><span class="xml">/* TestComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> I'm Test component </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { data() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">amount</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">0</span></span></span></span><span class="xml"><span class="javascript">, }; }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">watch</span></span></span></span><span class="xml"><span class="javascript">: { amount(newVal) { </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(newVal); }, }, beforeCreate() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.amount = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">1</span></span></span></span><span class="xml"><span class="javascript">; }, created() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.amount = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">2</span></span></span></span><span class="xml"><span class="javascript">; }, beforeMount() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.amount = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">3</span></span></span></span><span class="xml"><span class="javascript">; }, mounted() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.amount = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">4</span></span></span></span><span class="xml"><span class="javascript">; }, beforeDestroy() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.amount = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">5</span></span></span></span><span class="xml"><span class="javascript">; }, destroyed() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.amount = </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">6</span></span></span></span><span class="xml"><span class="javascript">; }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Je vais vous donner un indice: "2345" est la mauvaise r√©ponse. <br><br><div class="spoiler">  <b class="spoiler_title">La r√©ponse</b> <div class="spoiler_text">  Dans la console, nous ne verrons que le chiffre 4. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Explication</b> <div class="spoiler_text">  L'instance elle-m√™me n'a pas encore √©t√© cr√©√©e dans le hook beforeCreate, watcher ne fonctionnera pas ici. <br><br>  Watcher d√©clenche des modifications sur les crochets cr√©√©s, beforeMount et mont√©s.  √âtant donn√© que tous ces crochets sont appel√©s pendant un tick, Vue appellera watcher une fois √† la fin, avec une valeur de 4. <br><br>  Vue se d√©sabonnera de la surveillance du changement de la variable avant d'appeler les hooks beforeDestroy et destroy, donc 5 et 6 n'atteindront pas la console. <br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sandbox avec un exemple pour vous assurer que la r√©ponse</a> <br><br><h3>  2. Comportement implicite des accessoires </h3><br>  Cette question est bas√©e sur le comportement des accessoires rares dans Vue.  Tous les programmeurs, bien s√ªr, exposent simplement les validations n√©cessaires pour prop'ov et ne rencontrent jamais un tel comportement.  Mais le candidat n'a pas besoin de le dire.  Il serait pr√©f√©rable de poser cette question, d'y jeter un coup d'≈ìil condamnant apr√®s une r√©ponse incorrecte et de passer √† la suivante. <br><br>  <b>Question:</b> <br><br>  En quoi l'h√©lice avec un type bool√©en diff√®re-t-elle des autres? <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* SomeComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">/* ... */</span></span></span></span><span class="xml"><span class="javascript"> props: { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">testProperty</span></span></span></span><span class="xml"><span class="javascript">: { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">Boolean</span></span></span></span><span class="xml"><span class="javascript">, }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">La r√©ponse</b> <div class="spoiler_text">  Prop avec un type bool√©en diff√®re de tous les autres en ce que Vue a un casting de type sp√©cial pour cela. <br><br>  Si une cha√Æne vide ou le nom de l'accessoire lui-m√™me dans kebab-case est pass√© en param√®tre, Vue le convertira en vrai. <br><br>  Un exemple: <br><br>  Nous avons un fichier avec prop bool√©en: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* TestComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-if</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"canShow"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> I'm TestComponent </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">props</span></span></span></span><span class="xml"><span class="javascript">: { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">canShow</span></span></span></span><span class="xml"><span class="javascript">: { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">Boolean</span></span></span></span><span class="xml"><span class="javascript">, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">required</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">true</span></span></span></span><span class="xml"><span class="javascript">, }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Tous les cas d'utilisation valides pour le composant TestComponent sont indiqu√©s ci-dessous. <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* TestWrapper.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--    canShow   true  TestComponent --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TestComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">canShow</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">""</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--    , vue-template-compiler      prop' --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TestComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">canShow</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--  canShow   true --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TestComponent</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">canShow</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"can-show"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> TestComponent </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'path/to/TestComponent'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">components</span></span></span></span><span class="xml"><span class="javascript">: { TestComponent, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sandbox avec un exemple pour vous assurer que la r√©ponse</a> <br><br><h3>  3. Utilisation d'un tableau dans $ refs </h3><br>  Si votre candidat sait comment fonctionne le cadre de l'int√©rieur vers le niveau Evan Yu, vous avez encore quelques atouts dans votre manche: vous pouvez poser une question sur le comportement non document√© et non √©vident du cadre. <br><br>  <b>Question:</b> <br><br>  Vuex contient un tableau d'objets de fichiers, chacun des objets du tableau a des propri√©t√©s de nom et id uniques.  Ce tableau est mis √† jour toutes les quelques secondes, des √©l√©ments sont supprim√©s et ajout√©s. <br><br>  Nous avons un composant qui affiche le nom de chaque objet tableau avec un bouton, en cliquant sur lequel l'√©l√©ment dom associ√© au fichier courant doit √™tre affich√© dans la console: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* FileList.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"(file, idx) in files"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"file.id"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"files"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ file.name }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"logDOMElement(idx)"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Log DOM element </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> { mapState } </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'vuex'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">computed</span></span></span></span><span class="xml"><span class="javascript">: { ...mapState(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'files'</span></span></span></span><span class="xml"><span class="javascript">), }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">methods</span></span></span></span><span class="xml"><span class="javascript">: { logDOMElement(idx) { </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.$refs.files[idx]); }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Il faut dire o√π est l'erreur potentielle et comment y rem√©dier. <br><br><div class="spoiler">  <b class="spoiler_title">La r√©ponse</b> <div class="spoiler_text">  Le probl√®me est que le tableau √† l'int√©rieur de $ refs peut ne pas aller dans le m√™me ordre que le tableau d'origine ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien vers le probl√®me</a> ).  Autrement dit, une telle situation peut se produire: nous cliquons sur le bouton du troisi√®me √©l√©ment de la liste, et l'√©l√©ment dom du second est affich√© sur la console. <br><br>  Cela se produit uniquement lorsque les donn√©es du tableau changent fr√©quemment. <br><br>  Les m√©thodes de la solution sont √©crites sur GitHub: <br><br>  1. Cr√©ez une r√©f√©rence unique pour chaque article <br><br><pre> <code class="django hljs"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"(file, idx) in files"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"file.id"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"`file_${idx}`"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ file.name }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"logDOMElement(idx)"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Log DOM element </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> { mapState } </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'vuex'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">computed</span></span></span></span><span class="xml"><span class="javascript">: { ...mapState(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'files'</span></span></span></span><span class="xml"><span class="javascript">), }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">methods</span></span></span></span><span class="xml"><span class="javascript">: { logDOMElement(idx) { </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.$refs[</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">`file_{idx}`</span></span></span></span><span class="xml"><span class="javascript">]); }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  2. Attribut suppl√©mentaire <br><br><pre> <code class="django hljs"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"(file, idx) in files"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"file.id"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:data-file-idx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"idx"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ file.name }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"logDOMElement(idx)"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Log DOM element </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> { mapState } </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'vuex'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">computed</span></span></span></span><span class="xml"><span class="javascript">: { ...mapState(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'files'</span></span></span></span><span class="xml"><span class="javascript">), }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">methods</span></span></span></span><span class="xml"><span class="javascript">: { logDOMElement(idx) { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="javascript"> fileEl = </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.$el.querySelector(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">`*[data-file-idx=</span></span></span><span class="hljs-subst"><span class="xml"><span class="javascript"><span class="hljs-string"><span class="hljs-subst">${idx}</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-string">]`</span></span></span></span><span class="xml"><span class="javascript">); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(fileEl); }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br></div></div><br><h3>  4. Loisirs de composants √©tranges </h3><br>  <b>Question:</b> <br><br>  Nous avons un composant sp√©cial qui √©crit sur la console chaque fois que le crochet mont√© est appel√©: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* TestMount.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> I'm TestMount </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { mounted() { </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(</span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'TestMount mounted'</span></span></span></span><span class="xml"><span class="javascript">); }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><br>  Ce composant est utilis√© dans le composant TestComponent.  Il a un bouton, en appuyant sur lequel pendant 1 seconde le message Top message appara√Ætra. <br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* TestComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-if</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"canShowTopMessage"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Top message </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TestMount</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"showTopMessage()"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-if</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"!canShowTopMessage"</span></span></span></span><span class="xml"><span class="hljs-tag"> &gt;</span></span></span><span class="xml"> Show top message </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> TestMount </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'./TestMount'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">components</span></span></span></span><span class="xml"><span class="javascript">: { TestMount, }, data() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">canShowTopMessage</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">false</span></span></span></span><span class="xml"><span class="javascript">, }; }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">methods</span></span></span></span><span class="xml"><span class="javascript">: { showTopMessage() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.canShowTopMessage = </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">true</span></span></span></span><span class="xml"><span class="javascript">; setTimeout(</span></span><span class="hljs-function"><span class="hljs-params"><span class="xml"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="xml"><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.canShowTopMessage = </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">false</span></span></span></span><span class="xml"><span class="javascript">; }, </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">1000</span></span></span></span><span class="xml"><span class="javascript">); }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Cliquez sur le bouton et voyez ce qui se passe dans la console: <br><br><img src="https://habrastorage.org/webt/6i/87/ir/6i87irzaijkt4yqpqrncrxvvpvw.png"><br><br>  La premi√®re monture √©tait attendue, mais o√π sont les deux autres?  Comment y rem√©dier? <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sandbox avec un exemple pour comprendre l'erreur et la corriger</a> <br><br><div class="spoiler">  <b class="spoiler_title">La r√©ponse</b> <div class="spoiler_text">  Le probl√®me vient ici des particularit√©s de la recherche de diff√©rences de DOM virtuels dans Vue. <br><br>  Au tout d√©but, notre DOM virtuel ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nu/m1/hf/num1hf9uxtgu3colqu98n6l7apc.png"></div><br>  Apr√®s avoir cliqu√© sur le bouton, cela ressemble √† ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lz/i-/jq/lzi-jqtkskqsotfeduk7em0nc5u.png"></div><br><br>  Vue essaie de faire correspondre l'ancien DOM virtuel avec le nouveau pour comprendre ce qui doit √™tre supprim√© et ajout√©: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c8/uh/il/c8uhilyiq6akagl4dwhmpilbdfo.png"></div><br>  <font color="#999999"><i>Les √©l√©ments supprim√©s sont barr√©s en rouge, les √©l√©ments cr√©√©s sont surlign√©s en vert</i></font> <br><br>  Vue n'a pas pu trouver le composant TestMount, il l'a donc recr√©√©. <br><br>  Une situation similaire se r√©p√©tera une seconde apr√®s avoir appuy√© sur le bouton.  √Ä ce stade, le composant TestMounted affiche des informations sur sa cr√©ation sur la console pour la troisi√®me fois. <br><br>  Pour r√©soudre le probl√®me, placez simplement l'attribut key sur le div avec le composant TestMounted: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* TestComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TestMount</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> /* ... */</span></span></code> </pre><br>  Maintenant, Vue pourra cartographier sans ambigu√Øt√© les √©l√©ments n√©cessaires des DOM virtuels. <br></div></div><br><h3>  5. Cr√©ation d'un composant de table </h3><br>  <b>D√©fi:</b> <br><br>  Il est n√©cessaire de cr√©er un composant qui prend un tableau avec des donn√©es et les affiche dans un tableau.  Il est n√©cessaire de donner la possibilit√© de sp√©cifier les colonnes et le type de cellule. <br><br>  Les informations sur les colonnes et le type de cellule doivent √™tre transmises via un composant sp√©cial (identique √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">element-ui</a> ): <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* SomeComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomTable</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:items</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"items"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomColumn</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Name"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">slot-scope</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.name }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomColumn</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomColumn</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Element Id"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">slot-scope</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.id }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomColumn</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">CustomTable</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Au d√©but, la t√¢che ne contenait pas la n√©cessit√© de faire la m√™me chose que element-ui.  Mais il s'est av√©r√© que certaines personnes sont en mesure de terminer la t√¢che dans le libell√© d'origine.  Par cons√©quent, l'exigence a √©t√© ajout√©e pour transmettre des informations sur les colonnes et le type de cellule utilisant des composants. <br><br>  Je suis s√ªr que vos interlocuteurs seront tout le temps dans la stupeur.  Vous pouvez leur donner 30 minutes pour r√©soudre un tel probl√®me. <br><br><div class="spoiler">  <b class="spoiler_title">Solution</b> <div class="spoiler_text">  L'id√©e principale est de transf√©rer toutes les donn√©es vers le composant CustomTable dans le composant CustomColumn, puis il restituera tout lui-m√™me. <br><br>  Voici un exemple d'impl√©mentation.  Il ne prend pas en compte certains points (comme le changement d'√©tiquette), mais le principe de base doit √™tre clair. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* CustomColumn.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">label</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, }, mounted() { <span class="hljs-comment"><span class="hljs-comment">//    CustomTable   this.$parent.setColumnData({ label: this.label, createCell: this.$scopedSlots.default, }); }, };</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* CustomTable.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*  JSX,    template     createCell,   CustomColumn.js */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { columnsData, items } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-attr"><span class="hljs-attr">default</span></span>: defaultSlot } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$slots; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> //   CustomColumn {defaultSlot} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> //   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {columnsData.map(columnData =&gt; ( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{columnData.label}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {columnData.label} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ))} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> //    {items.map(item =&gt; ( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {columnsData.map(columnData =&gt; ( </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{columnData.label}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {columnData.createCell(item)} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">td</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ))} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ))} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">items</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, }, data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">columnsData</span></span>: [], }; }, <span class="hljs-attr"><span class="hljs-attr">methods</span></span>: { setColumnData(columnData) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.columnsData.push(columnData); }, }, };</code> </pre><br></div></div><br><h3>  6. Cr√©ation d'un portail </h3><br>  Si votre candidat n'a pas termin√© la t√¢che pr√©c√©dente, il n'y a rien √† craindre: vous pouvez lui en donner une de plus, pas moins difficile! <br><br>  <b>D√©fi:</b> <br><br>  Cr√©ez un composant Portal et PortalTarget, comme la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">portal-vue</a> : <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* FirstComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Portal</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Super header </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Portal</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* SecondComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">PortalTarget</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Solution</b> <div class="spoiler_text">  Pour cr√©er un portail, vous devez impl√©menter trois objets: <br><br><ul><li>  Entrep√¥t de donn√©es du portail </li><li>  Composant de portail qui ajoute des donn√©es au magasin </li><li>  Le composant PortalTarget qui r√©cup√®re les donn√©es du magasin et les affiche </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* dataBus.js */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Vue <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'vue'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bus = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">portalDatas</span></span>: [], }; }, <span class="hljs-attr"><span class="hljs-attr">methods</span></span>: { setPortalData(portalData) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { portalDatas } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> portalDataIdx = portalDatas.findIndex( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pd</span></span></span><span class="hljs-function"> =&gt;</span></span> pd.id === portalData.id, ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (portalDataIdx === <span class="hljs-number"><span class="hljs-number">-1</span></span>) { portalDatas.push(portalData); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } portalDatas.splice(portalDataIdx, <span class="hljs-number"><span class="hljs-number">1</span></span>, portalData); }, removePortalData(portalDataId) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { portalDatas } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> portalDataIdx = portalDatas.findIndex( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pd</span></span></span><span class="hljs-function"> =&gt;</span></span> pd.id === portalDataId, ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (portalDataIdx === <span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } portalDatas.splice(portalDataIdx, <span class="hljs-number"><span class="hljs-number">1</span></span>); }, getPortalData(portalName) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { portalDatas } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> portalData = portalDatas.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pd</span></span></span><span class="hljs-function"> =&gt;</span></span> pd.to === portalName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> portalData || <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }, }, }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> bus;</code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* Portal.vue */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      dataBus */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dataBus <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./dataBus'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> currentId = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">to</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, }, <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { <span class="hljs-comment"><span class="hljs-comment">//  id . //      dataBus id() { return currentId++; }, }, render() { return null; }, created() { this.setPortalData(); }, //    updated() { this.setPortalData(); }, methods: { setPortalData() { const { to, id } = this; const { default: portalEl } = this.$slots; dataBus.setPortalData({ to, id, portalEl, }); }, }, beforeDestroy() { dataBus.removePortalData(this.id); }, };</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/* PortalTarget.vue */</span></span> <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dataBus <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./dataBus'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }, }, render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { portalData } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!portalData) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"portal-target"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {portalData.portalEl} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }, <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { portalData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataBus.getPortalData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name); }, }, };</code> </pre><br>  Cette solution ne prend pas en charge la modification de l'attribut to, ne prend pas en charge les animations pendant la transition et ne prend pas en charge les valeurs par d√©faut, comme portal-vue.  Mais l'id√©e g√©n√©rale doit √™tre claire. <br></div></div><br><h3>  7. Pr√©vention de la r√©activit√© </h3><br>  <b>Question:</b> <br><br>  Vous avez re√ßu un grand objet de l'API et l'avez affich√© √† l'utilisateur.  Quelque chose comme √ßa: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* ItemView.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-if</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.name }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.price }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ item.quality }}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--     --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> getItemFromApi </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'path/to/getItemFromApi'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { data() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">item</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">null</span></span></span></span><span class="xml"><span class="javascript">, }; }, </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">async</span></span></span></span><span class="xml"><span class="javascript"> mounted() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.item = </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">await</span></span></span></span><span class="xml"><span class="javascript"> getItemFromApi(); }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Il y a un probl√®me dans ce code.  Nous ne modifions pas le nom, le prix, la qualit√© et les autres propri√©t√©s de l'objet article.  Mais Vue ne le sait pas et ajoute de la r√©activit√© √† chaque champ. <br><br>  Comment √©viter cela? <br><br><div class="spoiler">  <b class="spoiler_title">La r√©ponse</b> <div class="spoiler_text">  Pour √©viter de changer les propri√©t√©s en r√©actif, vous devez figer l'objet avant de l'ajouter dans Vue √† l'aide de la m√©thode Object.freeze. <br><br>  Vue v√©rifiera si l'objet est gel√© √† l'aide de la m√©thode Object.isFrozen.  Et si c'est le cas, Vue n'ajoutera pas de getters et setters r√©actifs aux propri√©t√©s de l'objet, car ils ne peuvent en aucun cas √™tre modifi√©s.  Avec de tr√®s gros objets, cette optimisation permet d'√©conomiser jusqu'√† plusieurs dizaines de millisecondes. <br><br>  Le composant optimis√© ressemblera √† ceci: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* ItemView.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> getItemFromApi </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'path/to/getItemFromApi'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">/* .... */</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">async</span></span></span></span><span class="xml"><span class="javascript"> mounted() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="javascript"> item = </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">await</span></span></span></span><span class="xml"><span class="javascript"> getItemFromApi(); </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">Object</span></span></span></span><span class="xml"><span class="javascript">.freeze(item); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.item = item; }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Object.freeze fige uniquement les propri√©t√©s de l'objet lui-m√™me.  Ainsi, si un objet contient des objets imbriqu√©s, ils doivent √©galement √™tre gel√©s. <br><br>  <b>Mise √† jour du 19 janvier</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2019</a> : Sur les conseils de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dmitry Zlygin, j'ai</a> regard√© la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que vue-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nonreactive et j'ai</a> trouv√© un autre moyen.  Il est parfait pour les situations o√π vous avez beaucoup d'objets imbriqu√©s. <br><br>  Vue n'ajoutera pas de r√©activit√© √† un objet s'il voit qu'il est d√©j√† r√©actif.  Nous pouvons tromper Vue en cr√©ant un observateur vide pour l'objet: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* ItemView.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> Vue </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'vue'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">import</span></span></span></span><span class="xml"><span class="javascript"> getItemFromApi </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">from</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-string"><span class="xml"><span class="javascript"><span class="hljs-string">'path/to/getItemFromApi'</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="javascript"> Observer = </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">new</span></span></span></span><span class="xml"><span class="javascript"> Vue() .$data .__ob__ .constructor; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">/* .... */</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">async</span></span></span></span><span class="xml"><span class="javascript"> mounted() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="javascript"> item = </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">await</span></span></span></span><span class="xml"><span class="javascript"> getItemFromApi(); </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">//   Observer   item.__ob__ = new Observer({}); this.item = item; }, }; </span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br></div></div><br><h3>  8. Erreurs des appareils lents </h3><br>  <b>Question:</b> <br><br>  Il existe un composant avec une m√©thode qui affiche l'une des propri√©t√©s de l'objet √©l√©ment dans la console, puis supprime l'objet √©l√©ment: <br><br><pre> <code class="django hljs"><span class="xml"><span class="xml">/* SomeComponent.vue */ </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-if</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> @</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"logAndClean()"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Log and clean </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { data() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">item</span></span></span></span><span class="xml"><span class="javascript">: { </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="javascript">: </span></span><span class="hljs-number"><span class="xml"><span class="javascript"><span class="hljs-number">124</span></span></span></span><span class="xml"><span class="javascript">, }, }; }, </span></span><span class="hljs-attr"><span class="xml"><span class="javascript"><span class="hljs-attr">methods</span></span></span></span><span class="xml"><span class="javascript">: { logAndClean() { </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(</span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.item.value); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.item = </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">null</span></span></span></span><span class="xml"><span class="javascript">; }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Qu'est-ce qui pourrait mal tourner ici? <br><br><div class="spoiler">  <b class="spoiler_title">La r√©ponse</b> <div class="spoiler_text">  Le probl√®me est qu'apr√®s le premier clic sur le bouton Vue, il faut un certain temps pour mettre √† jour le DOM pour l'utilisateur et supprimer le bouton.  Par cons√©quent, l'utilisateur peut parfois double-cliquer.  La m√©thode logAndClean fonctionne normalement la premi√®re fois et se bloque une deuxi√®me fois, car elle ne peut pas obtenir la propri√©t√© value. <br><br>  Je vois constamment un tel probl√®me dans le traqueur d'erreurs, en particulier souvent sur les t√©l√©phones portables bon march√© pour 4-5k roubles. <br><br>  Pour l'√©viter, il suffit d'ajouter une v√©rification de l'existence de l'√©l√©ment au d√©but de la fonction: <br><br><pre> <code class="django hljs"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="javascript"><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">export</span></span></span></span><span class="xml"><span class="javascript"> </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">default</span></span></span></span><span class="xml"><span class="javascript"> { </span></span><span class="hljs-comment"><span class="xml"><span class="javascript"><span class="hljs-comment">/* ... */</span></span></span></span><span class="xml"><span class="javascript"> methods: { logAndClean() { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="javascript"> { item } = </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">; </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="javascript"> (!item) { </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="javascript">; } </span></span><span class="hljs-built_in"><span class="xml"><span class="javascript"><span class="hljs-built_in">console</span></span></span></span><span class="xml"><span class="javascript">.log(item.value); </span></span><span class="hljs-keyword"><span class="xml"><span class="javascript"><span class="hljs-keyword">this</span></span></span></span><span class="xml"><span class="javascript">.item = </span></span><span class="hljs-literal"><span class="xml"><span class="javascript"><span class="hljs-literal">null</span></span></span></span><span class="xml"><span class="javascript">; }, }, }; </span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Pour reproduire le bug, vous pouvez vous rendre dans le bac √† sable avec un exemple, d√©finir la limitation maximale du CPU et cliquer rapidement sur le bouton.  Par exemple, je l'ai fait. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/xe/b5/noxeb5ysmokpbubphdzhibvmalg.png"></div><br></div></div><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien Sandbox pour vous assurer que la r√©ponse</a> <br><br>  Merci d'avoir lu l'article jusqu'au bout!  Je pense que maintenant vous pouvez certainement para√Ætre plus intelligent lors des entretiens et les salaires de vos candidats vont baisser de mani√®re significative! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr435700/">https://habr.com/ru/post/fr435700/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr435690/index.html">[Quel est le probl√®me avec GraphQL] ... Et comment y faire face</a></li>
<li><a href="../fr435692/index.html">Y Combinator: ¬´Au d√©but, certaines des plus grandes entreprises technologiques ressemblent √† des jouets¬ª</a></li>
<li><a href="../fr435694/index.html">Comment et pourquoi nous avons optimis√© l'algorithme de nettoyage des caches SLAB dans le noyau Linux</a></li>
<li><a href="../fr435696/index.html">Antiquit√©s: publicit√© informatique 1997</a></li>
<li><a href="../fr435698/index.html">√âcrire votre propre bon gestionnaire de m√©moire</a></li>
<li><a href="../fr435702/index.html">Les trolls brevet√©s commencent et gagnent: comment je suis rest√© sans jeu</a></li>
<li><a href="../fr435704/index.html">Solutions architecturales pour un jeu mobile. Partie 2: commande et leurs files d'attente</a></li>
<li><a href="../fr435706/index.html">Nous utilisons rcm pour d√©ployer la configuration dans n'importe quel dossier</a></li>
<li><a href="../fr435708/index.html">Fayal: un lieu de rencontre dans l'Atlantique</a></li>
<li><a href="../fr435712/index.html">Procter & Gamble lance une imprimante pour la peau anti-√¢ge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>