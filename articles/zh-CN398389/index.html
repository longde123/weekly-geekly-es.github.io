<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🎨 🏇🏼 ✊🏾 KiQ笑话猫或我们如何制作成人有声玩具 🧑🏽‍🤝‍🧑🏻 👨🏿‍🤝‍👨🏼 😔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="世界上有数量惊人的儿童发声玩具，这只会给成年人带来无聊的印象。我们的团队决定纠正这种情况。
 
 故事的开始
 一切始于这样一个事实：我的一个朋友和一个网蜗牛同事的脑海里浮现出一个聪明的主意：为什么不但要小孩，还要让成年人逗笑主题笑话？负担得起的，久经考验的熨斗的好处现在从来都不是稀罕的，它不仅可以...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>KiQ笑话猫或我们如何制作成人有声玩具</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/398389/"><img src="https://ksr-ugc.imgix.net/assets/013/958/564/d6c061618e04b2f7d81d1d88c07c543d_original.jpg?w=680&amp;fit=max&amp;v=1475469443&amp;auto=format&amp;q=92&amp;s=94a8eb1e4d730d541ec407637a1490ee" alt="Kiq玩具"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
世界上有数量惊人的儿童发声玩具，这只会给成年人带来无聊的印象。</font><font style="vertical-align: inherit;">我们的团队决定纠正这种情况。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">故事的开始</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切始于这样</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">事实：我的一个朋友和一个网</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蜗牛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同事的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;">脑海里浮现</font></a><font style="vertical-align: inherit;">出一个</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;">聪明的主意</font></a><font style="vertical-align: inherit;">：为什么不但要小孩，还要让成年人</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;">逗笑</font></a><font style="vertical-align: inherit;">主题笑话？负担得起的，久经考验的熨斗的好处现在从来都不是稀罕的，它不仅可以随着灯光闪烁，而且还可以</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唱歌</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这方面，他打电话给我，并提出要</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复史诗般的壮举，</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以确保ESP8266在网络上播放MP3音乐，以确保它很好，并且</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果仓鼠被撕成碎片，是否</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真的有足够的性能，这是我在2016年新年假期中做到的：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pW-BoVe46O8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266在视频上播放互联网广播，并通过I2S hack使用5位PWM输出声音。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然而，从互联网贵霜播放MP3收音机几乎所有的资源ESP8266，听起来“马马虎虎”，而想象力已经吸引了我们</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多的东西</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不仅仅是一个MP3收音机列。</font><font style="vertical-align: inherit;">有了这些创造性的动力，我们来到了团队和心爱的厨师</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弗拉基米尔（Vladimir）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
经过一番脑力激荡，</font><font style="vertical-align: inherit;">我们不仅想要而且可以做到</font><font style="vertical-align: inherit;">的更加详细的图片甚至</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑链</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了用更少资源和更自由的方式替换MP3，我们停在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成功并迅速地</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;">移植</font></a><font style="vertical-align: inherit;">到了ESP8266。</font></font><br>
<br>
</li>
<li>           SD , ..    ,    ESP8266     —    .<br>
<br>
</li>
<li> « »  - ,     random .     ,        .         Apple Notification Center Service (ANCS),     iPod, iPhone  iPad.<br>
<br>
</li>
<li>     Bluetooth Low Energy (BLE),            .<br>
<br>
</li>
<li>                .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pawn language</a>.<br>
<br>
</li>
<li>       ,           —          «»  «» (),   -        .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初，我想在一个多合一板上制作一个非常简单但可以正常工作的原型，因此我们决定在</font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinkIt ONE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上尝试</font><font style="vertical-align: inherit;">MediaTek。而</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">netsnail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几乎立即获得了成功。与手机建立了连接，并且SD卡MP3播放得很好。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
似乎-这是幸福和现成的平台！但是随后，我们面临着</font><font style="vertical-align: inherit;">封闭的SDK </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">局限性和欣喜若狂</font><font style="vertical-align: inherit;">的</font><s><font style="vertical-align: inherit;">严峻现实</font></s><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们意识到，满足我们所有愿望的一块板上完成的平台不是自然的，这意味着我们必须从头开始创建它。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们不得不选择（2016年2月）最适合的BLE芯片，该芯片需要与ESP8266连接。</font><font style="vertical-align: inherit;">作为ESP8266和BLE芯片之间的连接（我们尚不知道会是哪种芯片），我们决定使用标准的TWI（I2C）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是使用BLE时，选择不是很好：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TI CC2541-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考虑到BLE服务的数量和玩具中所需的特性，</font><font style="vertical-align: inherit;">由于</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的体系结构，我立即不喜欢它</font><font style="vertical-align: inherit;">，并且8 Kb的RAM看起来寿命很短。</font></font><br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BCM20732-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它看起来非常有前途，但实际上SDK却非常粗糙，而且Broadcom WICED Smart BLE“钥匙串”是如此的小巧，以至于我在这里不会写任何东西以免发誓。</font><font style="vertical-align: inherit;">让我知道现在情况是否有所改善。</font></font><br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">nRF52832</a> —  ,   .      BLE  — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">rekod</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>, SDK  ,    <i></i> .  BLE ANCS          iPhone    UART.           SEGGER J-Link,       .<br>
<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">nRF51822</a> —      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>,     SEGGER  nRF52832.      —     nRF52832     nRF51822  !</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其结果是，第一铁看上去</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像蜘蛛狼蛛</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic1.jpg" alt="铁蜘蛛"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
抓毛刺由于脱落杜邦电缆，特别是在nRF51822模块，其中pin'y尺寸略小，这是非常可悲的。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nRF51822和iOS应用程序上的BLE服务</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管如此，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事情</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和我</font><font style="vertical-align: inherit;">已经在这个蜘蛛网上开始在nRF51822上实现BLE服务和功能，将所有内容一分为二：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apple Notification Center服务（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANCS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-用于从智能手机接收事件通知。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苹果当前时间服务（CTS）-连接后，玩具会从手机上花费时间。</font></font></li>
<li>HandShake Service (HSS) —  , ,   «»        .   ,     lientID      pair     Bluetooth,    ,      .      ,    .</li>
<li>Battery As Service (BAS) —       .</li>
<li>Content Service (CONTS) —       ,   (     ).</li>
<li>Settings Service (SETTS) —       ,      (, )  ..</li>
</ul><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同时，MaximKit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为iOS开发</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font><b><font style="vertical-align: inherit;">应用程序</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://ksr-ugc.imgix.net/assets/013/983/125/8dfbfd651b320b4818fa9ed65ebf67fc_original.jpg?w=680&amp;fit=max&amp;v=1475618060&amp;auto=format&amp;q=92&amp;s=952c7ac032d25e8b72ec4425cad5891d" alt="图片"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右图显示了该应用程序的主屏幕。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因电线脱落而无法忍受我们的痛苦，并在家中用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激光熨斗</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制作了</font><font style="vertical-align: inherit;">第一个普通原型：</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic2.jpg" alt="第一个或多或少的原型"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
照片</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;">中看</font></a><font style="vertical-align: inherit;">不到</font><font style="vertical-align: inherit;">它，但是那里已经有一个microSD卡插槽。</font><font style="vertical-align: inherit;">在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALC5627</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下方的小方形披肩上</font><font style="vertical-align: inherit;">，声音已经比通过I2S的5位PWM好得多。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">AXP209</font></a><font style="vertical-align: inherit;">进行电源</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使您可以同时为电池充电和使用，以及监视其状态。</font><font style="vertical-align: inherit;">该芯片非常普遍，但是在编程和所需的外部组件方面都有很多细节，所谓的 </font><font style="vertical-align: inherit;">“线束”。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266的魔力</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flexxnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;">Fatfs的</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FatFs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移植</font><font style="vertical-align: inherit;">到ESP8266，为ESP8266和nRF51822制作了引导加载程序，这样就可以不通过有线方式更新固件，而是通过将固件文件放在microSD卡上来进行更新。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就我个人而言，在我看来，外星人帮助了他，因为他在大约一个月内完成了所有这一切。但是他不承认与外星人的思想接触。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后是第二个更普通的原型：</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic3.jpg" alt="第一个或多或少的原型"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，更普通的原型不再爬进毛绒玩具中。即使他进入，然后随着潜在用户从玩具中猛烈移动，“陌生人”也会爬升，这对于MVP当然是不可接受的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，决定向专业人员收取费用，结果是这样：</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic4.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管看起来有些不人道，但这种设计已经非常适合猫的使用：</font></font><br>
<br>
<img src="https://kiqup.com/sites/default/files/images/pic5.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同时，人们担心会发生电话事件的发生，因此用户会感到烦恼而不是乐趣。需要灵活的过滤逻辑，可以随时轻松更改而不闪烁。在这方面，研究了材料并意识到ESP8266没有快速紧凑的脚本（Lua和microPython是解释器）后，我决定移植</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pawn语言</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">语言</font></a><font style="vertical-align: inherit;">很快（仅比本地</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">语言</font></a><font style="vertical-align: inherit;">慢18倍）执行紧凑的字节码。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顺便说一下，Pawn源代码与C非常相似，因此很高兴修改脚本-只需将其编译为AMX字节码并将其复制到SD卡即可。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作弊的小工具。</font><font style="vertical-align: inherit;">假装是Android上的iOS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后“突然”我们都记得世界上的Android手机并没有那么小，甚至比带有iOS的手机还要多。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，我不得不加快步伐，检查我们是否可以</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">愚弄小工具，并假装自己是Android上的iOS，</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以便他们看到ANCS服务与Apple并无区别。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后，一切顺利，一周后，这些小工具（我们的猫也不例外）真诚地认为我拥有一部带有ANCS服务的iPhone，可以连接到Nexus 5甚至是旧的装有Android 4.4的三星Galaxy。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">去云</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于没有人喜欢多次听一个笑话（事实），并且也有喜好和文化限制，因此决定为每个用户创建一个唯一的播放列表。为此，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与云中的服务器息息相关。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是如何决定谁会喜欢呢？是的-让用户决定！为此，我对</font><font style="vertical-align: inherit;">意法半导体</font><font style="vertical-align: inherit;">的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIS3DH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加速度计进行了基本的手势检测</font><font style="vertical-align: inherit;">。我喜欢这个笑话-我倾斜了猫，好像是“是”，我不喜欢这个笑话-我侧身倾斜了，好像在“否”。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，他为手机添加了一个“勿忘我”功能-如果BLE连接消失，并且加速度计检测到运动，则说明猫被抬到某个地方，并且手机也被遗忘了。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在用户“保持警惕”并由此表明他的喜好之后，该信息进入服务器，在服务器中比较播放列表的“基因组”，并为用户生成新的笑话集。</font><font style="vertical-align: inherit;">但这是另一篇文章的主题。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总结</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，娱乐成为一个出色的平台，可以：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过BLE与电话通信并接收事件通知；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过WiFi进行通信并下载内容和固件更新；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在microSD上的FAT32中保存和读取文件；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">玩带有speex编解码器的笑话；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用加速度计确定用户的偏好（手势检测）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据每个用户的喜好形成播放列表；</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
值得注意的是，“非常聪明的手柄”很可能已连接到相应的引脚上（甚至板上的连接器的孔都留了下来），并且可以随意“向上抬起猫”。</font><font style="vertical-align: inherit;">这使得多功能平台吸引了极客。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这个平台上，我们进行了kickstarter，将成品玩具称为KiQ。</font><font style="vertical-align: inherit;">在第一天，收集了40％，现在收集了57％。</font><font style="vertical-align: inherit;">但这是一个完全不同的故事。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
感谢所有阅读这一行的人。</font><font style="vertical-align: inherit;">等待您的有趣问题。</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN398389/">https://habr.com/ru/post/zh-CN398389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN398377/index.html">物理上的信息是什么？</a></li>
<li><a href="../zh-CN398379/index.html">您的无人出租车到达</a></li>
<li><a href="../zh-CN398381/index.html">Arduino延时机器人原型</a></li>
<li><a href="../zh-CN398385/index.html">大脑的错觉。世界上第一个普遍的幻觉</a></li>
<li><a href="../zh-CN398387/index.html">汽车攻击：激烈的战斗</a></li>
<li><a href="../zh-CN398391/index.html">“灰，吹，凉...”，或智能家居中气候控制的逻辑</a></li>
<li><a href="../zh-CN398393/index.html">冰冷的尼康D5500a拍摄惊人的太空照片</a></li>
<li><a href="../zh-CN398395/index.html">哇：拓扑是用诺贝尔代替了引力波</a></li>
<li><a href="../zh-CN398397/index.html">在两个老星系中发现了超亮X射线源。一个新的自然现象？</a></li>
<li><a href="../zh-CN398399/index.html">自动摘要：当前和未来的技术</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>