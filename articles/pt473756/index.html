<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï• üï† üö∫ DNS HTTPS - Solu√ß√£o meia e errada üë®üèΩ‚Äçüöí üêµ üìÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ao longo da exist√™ncia da Internet, a abertura tem sido uma de suas caracter√≠sticas definidoras e a maior parte do tr√°fego atual ainda √© transmitida s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DNS HTTPS - Solu√ß√£o meia e errada</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473756/"><img src="https://habrastorage.org/getpro/habr/post_images/7d6/203/a53/7d6203a5324d08022ed45f39179a429b.png"><br><br>  Ao longo da exist√™ncia da Internet, a abertura tem sido uma de suas caracter√≠sticas definidoras e a maior parte do tr√°fego atual ainda √© transmitida sem criptografia.  A maioria das solicita√ß√µes de p√°ginas HTML e conte√∫do relacionado √© feita em texto sem formata√ß√£o e as respostas s√£o retornadas da mesma maneira, apesar do protocolo HTTPS existir desde 1994. <br><br>  No entanto, √†s vezes h√° necessidade de seguran√ßa e / ou confidencialidade.  Embora a criptografia do tr√°fego da Internet tenha se espalhado amplamente em √°reas como servi√ßos banc√°rios e compras on-line, a quest√£o da manuten√ß√£o da confidencialidade em muitos protocolos da Internet n√£o foi resolvida t√£o rapidamente.  Em particular, ao consultar o endere√ßo IP de um site para um host, quase sempre uma consulta DNS √© transmitida em texto n√£o criptografado, o que permite que todos os computadores e provedores determinem qual site voc√™ est√° visitando, mesmo se voc√™ usar HTTPS ap√≥s estabelecer uma conex√£o. <br><a name="habracut"></a><br>  A id√©ia de que a criptografia tamb√©m √© necess√°ria para consultas de DNS n√£o √© nova e as primeiras tentativas foram feitas nos anos 2000 - DNSCrypt, DNS sobre TLS (DoT) etc.  Mozilla, Google e outras grandes empresas de Internet est√£o promovendo um novo m√©todo de criptografia de consultas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DNS</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DNS sobre HTTPS</a> (DoH). <br><br>  O DoH n√£o apenas criptografa a consulta DNS, mas tamb√©m a transfere para o servidor Web "regular", n√£o para o servidor DNS, para que o tr√°fego DNS n√£o possa ser diferenciado do HTTPS normal.  Esta moeda tem dois lados.  Esse procedimento protege a consulta DNS em si, como DNSCrypt ou DoT, e tamb√©m impossibilita que os funcion√°rios dos servi√ßos de seguran√ßa de grandes empresas rastreiem a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">falsifica√ß√£o de DNS</a> e transferem a responsabilidade por fun√ß√µes cr√≠ticas da rede do sistema operacional para o aplicativo.  E tamb√©m n√£o ajuda em nada a ocultar o endere√ßo IP do site que voc√™ acabou de solicitar - afinal, voc√™ acessa o site mesmo assim. <br><br>  Comparado ao DoT, o DoH centraliza informa√ß√µes sobre os sites que voc√™ visitou em v√°rias empresas: hoje √© o Cloudflare, que promete se livrar de seus dados em 24 horas, e o Google, que pretende salvar e monetizar todos os detalhes de tudo que voc√™ j√° planejou fazer. <br><br>  DNS e privacidade s√£o t√≥picos importantes, ent√£o vamos nos aprofundar nos detalhes. <br><br><h2>  Servidor DNS e confian√ßa </h2><br>  O conceito de sistema de nome de dom√≠nio remonta √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ARPANET</a> , quando o √∫nico arquivo de texto em cada n√≥ da ARPANET - sob o nome HOSTS.TXT - continha toda a correspond√™ncia entre os nomes dos sistemas conectados √† ARPANET e seus endere√ßos digitais.  Quando voc√™ reabasteceu esse arquivo, foi f√°cil verificar se estava correto.  Com o crescimento da rede, tornou-se irrealista manter c√≥pias centrais e locais desses arquivos.  No in√≠cio dos anos 80, tentativas j√° haviam come√ßado a criar um sistema de automa√ß√£o para esse processo. <br><br>  O primeiro servidor de nomes (Berkeley Internet Name Domain Server ou BIND) foi escrito em 1984 por um grupo de estudantes da Universidade da Calif√≥rnia, Berkeley, com base nas RFC 882 e RFC 883. Em 1987, o padr√£o DNS foi revisado v√°rias vezes, levando ao advento das RFC 1034 e RFC 1035. que desde ent√£o, em geral, n√£o mudaram. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/beb/598/038/beb5980380a12a3eb9c2736e83bf9b1a.png"><br><br>  A base da estrutura DNS √© sua estrutura em √°rvore, onde n√≥s e folhas s√£o divididos em zonas.  A zona raiz do DNS √© o n√≠vel superior, composto por treze clusters de servidores raiz que formam os servidores DNS raiz oficiais.  Qualquer novo servidor DNS (criado por um provedor ou empresa) recebe registros DNS de pelo menos um desses servidores principais. <br><br>  Cada zona DNS subsequente adiciona outro dom√≠nio ao sistema de nomes.  Normalmente, cada pa√≠s mant√©m seus pr√≥prios dom√≠nios e os dom√≠nios .org ou .com que n√£o est√£o associados a pa√≠ses s√£o servidos separadamente.  Uma consulta para um nome de host por meio do DNS come√ßa com um nome de dom√≠nio (por exemplo, .com) e, em seguida, com um nome (por exemplo, google), seguido por poss√≠veis subdom√≠nios.  Se os dados ainda n√£o foram armazenados em cache, pode ser necess√°rio fazer v√°rias transi√ß√µes pelas zonas DNS para resolver a solicita√ß√£o. <br><br><h2>  DNSSEC: adicionando confian√ßa ao sistema DNS </h2><br>  Antes de prosseguir com a criptografia das consultas DNS, voc√™ precisa garantir que possamos confiar no servidor DNS.  Essa necessidade tornou-se aparente nos anos 90 e levou √†s primeiras extens√µes operacionais do DNS Security Standard (DNSSEC), RFC 2353 e RFC 4033 revisado (DNSSEC-bis). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/145/ce5/eab/145ce5eab809d2786155dd6bcec6751e.png"><br>  <i>Mapa da internet em 2006</i> <br><br>  DNSSEC funciona assinando registros de consulta DNS com uma chave p√∫blica.  A autenticidade do registro DNS pode ser confirmada pelas chaves p√∫blicas da zona raiz do DNS, que √© um terceiro confi√°vel nesse cen√°rio.  Os propriet√°rios do dom√≠nio geram suas chaves, assinadas pelos operadores de zona e adicionadas ao DNS. <br><br>  Embora o DNSSEC permita que voc√™ esteja relativamente confiante de que as respostas do servidor DNS s√£o reais, esse protocolo deve ser inclu√≠do no sistema operacional.  Infelizmente, poucos sistemas operacionais implementam um servi√ßo DNS que pode fazer mais do que apenas "saber sobre DNSSEC", ou seja, eles n√£o confirmam realmente as respostas DNS.  Portanto, hoje voc√™ n√£o pode ter certeza de que as respostas que recebe do DNS s√£o reais. <br><br><h2>  Problema com DoH </h2><br>  Suponha que voc√™ esteja usando DNSSEC.  Voc√™ est√° pronto para criptografar mensagens para adicionar privacidade √† sua transfer√™ncia de dados.  Pode haver muitas raz√µes para manter as consultas DNS em segredo para olhares indiscretos.  Entre os mais inocentes, est√£o ignorando os filtros da corpora√ß√£o e fornecedores, proibindo o monitoramento dos h√°bitos da Internet e muito mais.  Entre os mais s√©rios est√£o as tentativas de evitar persegui√ß√µes por parte do governo por expressar opini√µes pol√≠ticas na Internet.  Naturalmente, a criptografia de consultas DNS n√£o permite que as pessoas as espionem, mas, como resultado, problemas maiores com a seguran√ßa do DNS e, √© claro, todos os outros protocolos de comunica√ß√£o s√£o ignorados. <br><br>  Os principais concorrentes aqui s√£o DoT usando TLS e DoH usando HTTPS.  A diferen√ßa mais √≥bvia entre as duas √© a porta: o DoT √© executado em uma porta TCP dedicada 853 e o DoH se mistura com outro tr√°fego HTTPS na porta 443. Isso oferece a vantagem controversa de tornar as consultas DNS indistingu√≠veis de outro tr√°fego, o que torna imposs√≠vel para os operadores de rede (privados e corporativos) ) proteja sua pr√≥pria rede, como Paul Vixie, um dos arquitetos do DNS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anunciou no Twitter</a> no ano passado. <br><br>  A segunda das principais diferen√ßas √© que, se o DoT simplesmente envia consultas DNS pelo TLS, o DoH √© essencialmente DNS sobre HTTP sobre TLS, requer seu pr√≥prio aplicativo Tipo de M√≠dia / dns-message e torna as coisas muito mais complicadas.  A mistura de DoH com protocolos existentes faz com que cada consulta e resposta DNS passe pela pilha HTTPS.  Esse √© um pesadelo para aplicativos incorporados e tamb√©m √© incompat√≠vel com quase todos os tipos de equipamentos existentes. <br><br>  O DoT tem outra vantagem - esse protocolo j√° foi implementado e, por muito mais tempo que o DoH, √© usado por empresas como Cloudflare, Google e fornecedores de Internet locais;  Um software de servidor padr√£o como o BIND usa o DoT imediatamente.  No Android Pie OS (vers√£o 9), o DNS sobre TLS ser√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usado por padr√£o</a> se o servidor DNS selecionado suportar DoT. <br><br>  Por que mudar para o DoH se o DoT j√° est√° sendo implementado?  Se aplicativos n√£o padr√£o, como o Firefox, ignoram o DNS do sistema baseado em DoT e usam seu pr√≥prio sistema de recupera√ß√£o de nomes de dom√≠nio via DoH, ent√£o, do ponto de vista da seguran√ßa, essa situa√ß√£o se tornar√° muito dif√≠cil.  Transferir o DNS para aplicativos individuais, o que est√° acontecendo agora, parece um passo atr√°s.  Voc√™ sabe qual m√©todo DNS cada aplicativo usa?  Voc√™ sabia que ele mistura esse processo com o tr√°fego TCP na porta 443? <br><br><h2>  A criptografia n√£o interfere com a espionagem </h2><br>  Duas grandes empresas, Cloudflare e Mozilla, defendem o DNS por HTTPS, e o √∫ltimo at√© lan√ßou uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-">pequena e agrad√°vel hist√≥ria em quadrinhos</a> , na qual tenta explicar o esquema de DoH.  Sem surpresa, eles n√£o mencionam o DNSSEC (mesmo que seja chamado de "cr√≠tico" na RFC 8484) e, em vez disso, oferecem algo chamado Trusted Recursive Resolver (TRR), que representa essencialmente o conselho "use trust Servidor DNS ‚Äùpelo qual Mozilla significa Cloudflare. <br><br>  Al√©m do DoH, eles mencionam o padr√£o de minimiza√ß√£o de QNAME ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RFC 7816</a> ), que deve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reduzir a quantidade de informa√ß√µes n√£o cr√≠ticas</a> enviadas pelo servidor DNS.  Ao mesmo tempo, esse padr√£o n√£o depende do DoH de forma alguma e funcionar√° sem nenhuma criptografia DNS.  Como no DNSSEC, a seguran√ßa e a privacidade s√£o aprimoradas com a evolu√ß√£o do padr√£o DNS. <br><br>  O mais interessante est√° na se√ß√£o ‚ÄúO que o TRR + DoH n√£o corrige‚Äù?  Como muitos especialistas disseram, a criptografia DNS n√£o impede a espionagem.  Qualquer solicita√ß√£o subsequente para o endere√ßo IP que foi recebido de uma maneira terrivelmente secreta ainda ser√° claramente vis√≠vel.  Mesmo assim, eles saber√£o que voc√™ visitou o Facebook.com ou o site para dissidentes.  Nenhuma criptografia de DNS ou tr√°fego da Internet ocultar√° informa√ß√µes vitais para a opera√ß√£o de uma rede como a Internet. <br><br><h2>  A futura Internet se tornar√° um ponto √∫nico de falha? </h2><br>  A Mozilla se oferece para lidar com a quest√£o da espionagem de IP simplesmente afirmando que isso n√£o √© um problema atrav√©s do uso da nuvem.  Quanto mais sites e redes de distribui√ß√£o de conte√∫do (CDNs) dependem de um pequeno n√∫mero de servi√ßos (Cloudflare, Azure, AWS, etc.), menos esse √∫nico endere√ßo IP significa - voc√™ s√≥ precisa acreditar que o escolhido seu servi√ßo de nuvem n√£o roubar√° seus dados e n√£o cair√° por um dia. <br><br>  Este ano, 24 de junho, houve uma queda maci√ßa nos servi√ßos, quando um erro de configura√ß√£o cometido pelo provedor da Verizon deixou o Cloudflare, Amazon, Linode e muitos outros indispon√≠veis durante a maior parte do dia.  Em 2 de julho deste ano <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">, o Cloudflare caiu</a> por cerca de meia hora e, com ele, muitos sites que dependem de seus servi√ßos. <br><br>  Coincidentemente, o servi√ßo em nuvem Office365 da Microsoft tamb√©m permaneceu por v√°rias horas naquele dia, motivo pelo qual muitos usu√°rios n√£o conseguiram usar seus servi√ßos.  No fim de semana anterior ao Dia do Trabalho [feriado nacional dos EUA comemorado na primeira segunda-feira de setembro / aprox.  A falha de energia trans.] no data center da AWS nos EUA-Leste-1 levou a que um terabyte de dados de clientes armazenados l√° fosse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">coberto por uma bacia de cobre</a> .  Obviamente, ainda existem algumas desvantagens na id√©ia dos benef√≠cios de centralizar a Internet. <br><br><h2>  M√∫sicas antigas de uma nova maneira </h2><br>  Surpreendentemente, n√£o h√° men√ß√£o de redes privadas virtuais (VPNs) ao longo desta discuss√£o sobre privacidade e rastreamento.  Eles resolvem problemas com criptografia de dados e consultas DNS, ocultando o endere√ßo IP e muito mais, simplesmente movendo o ponto em que seu PC ou outro dispositivo conectado √† Internet se conecta √† Internet.  Dissidentes dentro de regimes autorit√°rios usam VPNs h√° d√©cadas para contornar a censura na Internet;  As VPNs, incluindo recursos especiais como o Tor, s√£o um elemento cr√≠tico da liberdade da Internet. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe8/8f2/fa3/fe88f2fa3bbaceddafca0314218123ad.png"><br>  <i>Como o Tor funciona</i> <br><br>  Se voc√™ confia em uma grande empresa comercial como a Cloudflare em um esquema como o DoH, ser√° f√°cil encontrar um provedor de VPN confi√°vel que n√£o armazene ou venda seus dados.  E o navegador Opera geralmente oferece suporte a proxy gratuito e integrado, que oferece <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">muitos benef√≠cios de VPN</a> . <br><br>  No final, podemos dizer que o DoH confirma sua sigla, fazendo mal que o DoT j√° esteja indo bem [‚ÄúDoh!‚Äù  - uma exclama√ß√£o indicando a estupidez de uma a√ß√£o perfeita, especialmente a sua / aprox.  transl.].  Precisamos nos concentrar mais na implementa√ß√£o onipresente do DNSSEC, juntamente com o DoT e na minimiza√ß√£o do QNAME.  E se voc√™ se preocupa com a privacidade real, precisa recorrer √† VPN. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473756/">https://habr.com/ru/post/pt473756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473740/index.html">CreateRemoteThread para Linux</a></li>
<li><a href="../pt473742/index.html">Impressoras de engenharia Epson para CAD e GIS e algumas palavras sobre "design robusto"</a></li>
<li><a href="../pt473748/index.html">Curva de Bezier a servi√ßo dos economistas do trabalho</a></li>
<li><a href="../pt473750/index.html">Stereopi + WebRTC = telepresense em casa</a></li>
<li><a href="../pt473752/index.html">O que h√° de errado com o Copy-on-Write for Linux ao copiar</a></li>
<li><a href="../pt473760/index.html">Psss, quer algumas hist√≥rias terr√≠veis de TI?</a></li>
<li><a href="../pt473762/index.html">O trabalho n√£o √© um lobo, parte 1. Procura de emprego: 9 voltas HR-a</a></li>
<li><a href="../pt473764/index.html">Parcel √© meu construtor de projetos favorito</a></li>
<li><a href="../pt473766/index.html">An√°lise est√°tica de grandes volumes de c√≥digo Python: experi√™ncia no Instagram. Parte 1</a></li>
<li><a href="../pt473768/index.html">Os 5 melhores livros para quem deseja melhorar suas habilidades</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>