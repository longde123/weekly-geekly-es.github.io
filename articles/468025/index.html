<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíü üëÇüèΩ üíÖüèæ ¬øC√≥mo configurar SNI en Zimbra OSE? üå™Ô∏è üññ üåê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A principios del siglo XXI, un recurso como las direcciones IPv4 est√° al borde del agotamiento. En 2011, IANA asign√≥ los √∫ltimos cinco bloques / 8 res...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo configurar SNI en Zimbra OSE?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/468025/">  A principios del siglo XXI, un recurso como las direcciones IPv4 est√° al borde del agotamiento.  En 2011, IANA asign√≥ los √∫ltimos cinco bloques / 8 restantes de su espacio de direcciones a los registradores regionales de Internet, y ya en 2017 terminaron sus direcciones.  La respuesta a la catastr√≥fica escasez de direcciones IPv4 no fue solo el advenimiento de IPv6, sino tambi√©n la tecnolog√≠a SNI, que permiti√≥ alojar una gran cantidad de sitios web en una direcci√≥n IPv4.  La esencia de SNI es que esta extensi√≥n permite a los clientes decirle al servidor el nombre del sitio con el que desean conectarse durante un apret√≥n de manos.  Esto permite que el servidor almacene m√∫ltiples certificados, lo que significa que m√∫ltiples dominios pueden operar en la misma direcci√≥n IP.  La tecnolog√≠a SNI se hizo especialmente popular entre los proveedores de SaaS para empresas, que pudieron alojar una cantidad casi ilimitada de dominios sin tener en cuenta la cantidad de direcciones IPv4 necesarias para esto.  Veamos c√≥mo puede implementar el soporte SNI en Zimbra Collaboration Suite Open-Source Edition. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="imagen"><a name="habracut"></a><br><br>  SNI funciona en todas las versiones actuales y compatibles de Zimbra OSE.  En el caso de que su Zimbra Open-Source se ejecute en una infraestructura multiservidor, deber√° realizar todas las siguientes acciones en el nodo con el servidor Zimbra Proxy instalado.  Adem√°s, necesitar√° pares de certificado + clave coincidentes, as√≠ como cadenas de certificados confiables de su autoridad de certificaci√≥n para cada uno de los dominios que desea colocar en su direcci√≥n IPv4.  Tenga en cuenta que la raz√≥n de la gran mayor√≠a de los errores al configurar SNI en Zimbra OSE es precisamente en los archivos de certificado incorrectos.  Por lo tanto, le recomendamos que verifique cuidadosamente todo antes de instalarlos directamente. <br><br>  En primer lugar, para que SNI funcione normalmente, debe ingresar el comando <b>zmprov mcf zimbraReverseProxySNIEnabled TRUE</b> en el nodo con el servidor proxy Zimbra, y luego reiniciar el servicio Proxy usando el comando <b>zmproxyctl restart</b> . <br><br>  Comenzaremos creando un nombre de dominio.  Por ejemplo, tomamos el dominio <b>company.ru</b> y, despu√©s de que el dominio ya se haya creado, determinaremos el nombre del host virtual de Zimbra y la direcci√≥n IP virtual.  Llamamos la atenci√≥n sobre el hecho de que el nombre del host virtual de Zimbra debe corresponder con el nombre que el usuario debe ingresar en la l√≠nea del navegador para obtener acceso al dominio, y tambi√©n debe coincidir con el nombre indicado en el certificado.  Como ejemplo, tome Zimbra <b>mail.company.ru</b> como el nombre de host virtual y use <b>1.2.3.4</b> como la direcci√≥n IPv4 virtual. <br><br>  Despu√©s de eso, simplemente ingrese el comando <b>zmprov md company.ru zimbraVirtualHostName mail.company.ru zimbraVirtualIPAddress 1.2.3.4</b> para vincular el host virtual de Zimbra a la direcci√≥n IP virtual.  Llamamos su atenci√≥n sobre el hecho de que si el servidor est√° ubicado detr√°s de un NAT o firewall, se debe tener cuidado de que todas las solicitudes al dominio vayan a la direcci√≥n IP externa vinculada a √©l, y no a su direcci√≥n en la red local. <br><br>  Una vez hecho todo, solo queda verificar y preparar los certificados de dominio para la instalaci√≥n y luego instalarlos. <br><br>  Si el certificado para el dominio se emiti√≥ correctamente, debe tener tres archivos con certificados a la mano: dos de ellos son cadenas de certificados de su autoridad de certificaci√≥n y uno es un certificado directo al dominio.  Adem√°s, en sus manos debe tener un archivo con la clave que utiliz√≥ para obtener el certificado.  Cree una carpeta separada <b>/tmp/company.ru</b> y coloque all√≠ todos los archivos disponibles con claves y certificados.  El resultado deber√≠a ser algo como esto: <br><br><pre><code class="bash hljs">ls /tmp/company.ru company.ru.key  company.ru.crt  company.ru.root.crt  company.ru.intermediate.crt</code> </pre> <br>  Despu√©s de eso, combine las cadenas de certificados en un archivo usando el comando <b>cat company.ru.root.crt company.ru.intermediate.crt &gt;&gt; company.ru_ca.crt</b> y aseg√∫rese de que todo est√© bien con los certificados usando el comando <b>/ opt / zimbra / bin / zmcertmgr verificadocrt comm /tmp/company.ru/company.ru.key /tmp/company.ru/company.ru.crt /tmp/company.ru/company.ru_ca.crt</b> .  Despu√©s de que la verificaci√≥n de los certificados y la clave sean exitosas, puede continuar con su instalaci√≥n. <br><br>  Para comenzar la instalaci√≥n, primero combinaremos el certificado de dominio y las cadenas de confianza de las autoridades de certificaci√≥n en un solo archivo.  Tambi√©n se hace usando un comando del formulario <b>cat company.ru.crt company.ru_ca.crt &gt;&gt; company.ru.bundle</b> .  Despu√©s de eso, debe ejecutar el comando para escribir todos los certificados y la clave en LDAP: <b>/ opt / zimbra / libexec / zmdomaincertmgr savecrt company.ru company.ru.bundle company.ru.key</b> , y luego instalar los certificados usando el comando <b>/ opt / zimbra / libexec / zmdomaincertmgr deploycrts</b> .  Despu√©s de la instalaci√≥n, los certificados y la clave del dominio company.ru se almacenar√°n en la carpeta <b>/opt/zimbra/conf/domaincerts/company.ru</b> . <br><br>  Al repetir estos pasos utilizando diferentes nombres de dominio, pero con la misma direcci√≥n IP, puede lograr la ubicaci√≥n de varios cientos de dominios en la misma direcci√≥n IPv4.  Al mismo tiempo, puede usar certificados de varios centros de su emisi√≥n sin ning√∫n problema.  Puede verificar la exactitud de todas las acciones realizadas en cualquier navegador, donde para cada nombre de host virtual se debe mostrar su certificado SSL. <br><br>  Para todas las preguntas relacionadas con la Suite Zextras, puede contactar al representante de Zextras, Ekaterina Triandafilidi, por correo electr√≥nico katerina@zextras.com </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468025/">https://habr.com/ru/post/468025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468015/index.html">Lo que se sabe sobre ITIL 4 en este momento y qui√©n ya est√° usando la nueva biblioteca</a></li>
<li><a href="../468017/index.html">The Maybe Monad a trav√©s de async / wait en C # (¬°sin Task ov!)</a></li>
<li><a href="../468019/index.html">Desarrollo de sitios web en WebAssembly usando NetCore 3 y Blazor</a></li>
<li><a href="../468021/index.html">PHP, ¬øcu√°nta abstracci√≥n para la gente?</a></li>
<li><a href="../468023/index.html">Inteligencia artificial en el juego de lucha Shadow Fight 3</a></li>
<li><a href="../468027/index.html">M√©todos de optimizaci√≥n de c√≥digo para Redd. Parte 2: memoria no almacenable en cach√© y operaci√≥n de bus paralelo</a></li>
<li><a href="../468031/index.html">Llevamos un juego multijugador de C ++ a la web con Cheerp, WebRTC y Firebase</a></li>
<li><a href="../468035/index.html">Descargue la prensa con un controlador de juego u 8 patentes inusuales para dispositivos de entrada</a></li>
<li><a href="../468039/index.html">Meetup de Mosc√∫ Kubernetes # 6 en Acronis (Fiztehpark) 10/03/2019</a></li>
<li><a href="../468041/index.html">Anuncio de la interfaz web de Kubernetes Web View (y una breve descripci√≥n de otras IU web para Kubernetes)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>