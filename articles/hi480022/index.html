<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯПЖ тЩ╗я╕П ЁЯдЬ рдкрд╛рдпрдерди рддрд╛рддреНрдХрд╛рд▓рд┐рдХрддрд╛ ЁЯФб ЁЯеР ЁЯФЗ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╡рд░реНрдЧ рдлреВ рд╣реИ : 


class Foo(object): def __init__(self, x, y=0): self.x = x self.y = y  


 рдЬрдм рдЖрдк рдЗрд╕рдХреА рд╡рд╕реНрддреБ рдмрдирд╛рддреЗ рд╣реИрдВ рддреЛ рдХреНрдпрд╛ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдкрд╛рдпрдерди рддрд╛рддреНрдХрд╛рд▓рд┐рдХрддрд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480022/"><p>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╡рд░реНрдЧ <b>рдлреВ рд╣реИ</b> : </p><br><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, x, y=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> self.x = x self.y = y</code> </pre> <br><p>  рдЬрдм рдЖрдк рдЗрд╕рдХреА рд╡рд╕реНрддреБ рдмрдирд╛рддреЗ рд╣реИрдВ рддреЛ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ? </p><br><pre> <code class="python hljs">f = Foo(<span class="hljs-number"><span class="hljs-number">1</span></span>, y=<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><p>  <b>рдлреВ</b> рдХреЛ рдЗрд╕ рдХреЙрд▓ рдХреЗ рд╕рд╛рде рдХрд┐рд╕ рд╡рд┐рдзрд┐ рдХреЛ рдкрд╣рд▓реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдЕрдзрд┐рдХрд╛рдВрд╢ рдирд╡рд╛рдЧрдВрддреБрдХреЛрдВ, рдФрд░ рд╢рд╛рдпрдж рдХреБрдЫ рдЕрдиреБрднрд╡реА pythonists, рддреБрд░рдВрдд рдЬрд╡рд╛рдм рджреЗрдВрдЧреЗ: " <b>__in____</b> рд╡рд┐рдзрд┐ред"  рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк рдКрдкрд░ рдХреЗ рд╕реНрдирд┐рдкреЗрдЯреНрд╕ рдХреЛ рдХрд░реАрдм рд╕реЗ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЬрд▓реНрдж рд╣реА рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдХрд┐ рдРрд╕рд╛ рдЙрддреНрддрд░ рдЧрд▓рдд рд╣реИред </p><br><p>  <b>__init__</b> рдХреЛрдИ рдкрд░рд┐рдгрд╛рдо рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ, рдФрд░ <b>рдлреВ (1, y = 2)</b> , рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, <strong>рд╡рд░реНрдЧ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреЗрддрд╛ рд╣реИ</strong> ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, <b>__init__</b> рдкрд╣рд▓реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ <b>рд╕реНрд╡рдпрдВ</b> рдХреЛ рд▓реЗрддрд╛ рд╣реИ, рдЬреЛ <b>рдлреВ (1, y = 2) рдХреЛ</b> рдХреЙрд▓ рдХрд░рддреЗ рд╕рдордп рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред  рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдирд╛ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣рдо рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗред </p><a name="habracut"></a><br><h1>  рдСрдмреНрдЬреЗрдХреНрдЯ рдХреНрд░рд┐рдПрд╢рди рдкреНрд░реЛрд╕реАрдЬрд░ </h1><br><p>  рдкрд╛рдпрдерди рддрд╛рддреНрдХрд╛рд▓рд┐рдХрддрд╛ рдореЗрдВ рдХрдИ рдЪрд░рдг рд╣реЛрддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдХреЛ рд╕рдордЭрдирд╛ рд╣рдореЗрдВ рднрд╛рд╖рд╛ рдХреЛ рд╕рдордЧреНрд░ рд░реВрдк рд╕реЗ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдирд┐рдХрдЯ рдмрдирд╛рддрд╛ рд╣реИред  <b>рдлреВ</b> рдПрдХ рд╡рд░реНрдЧ рд╣реИ, рд▓реЗрдХрд┐рди рдкрд╛рдпрдерди рдореЗрдВ, рдХрдХреНрд╖рд╛рдПрдВ рднреА рд╡рд╕реНрддреБрдПрдВ рд╣реИрдВ!  рдХрдХреНрд╖рд╛рдПрдВ, рдлрд╝рдВрдХреНрд╢рдВрд╕, рд╡рд┐рдзрд┐рдпрд╛рдБ рдФрд░ рдЙрджрд╛рд╣рд░рдг рд╕рднреА рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИрдВ, рдФрд░ рдЬрдм рднреА рдЖрдк рдЙрдирдХреЗ рдирд╛рдо рдХреЗ рдмрд╛рдж рдХреЛрд╖реНрдардХ <b>рд▓рдЧрд╛рддреЗ рд╣реИрдВ</b> , рддреЛ рдЖрдк рдЙрдирдХреА <b>__call__</b> рд╡рд┐рдзрд┐ рдХрд╣рддреЗ рд╣реИрдВред  рддреЛ <b>Foo (1, y = 2)</b> <b>Foo .__ рдХреЙрд▓ __ (1, y = 2)</b> рдХреЗ рд╕рдорддреБрд▓реНрдп рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, <b>__call__</b> рд╡рд┐рдзрд┐ <b>рдлреВ</b> рд╡рд╕реНрддреБ рдХреЗ рд╡рд░реНрдЧ рдореЗрдВ рдШреЛрд╖рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред  <b>рдлреВ</b> рд╡рд╕реНрддреБ рдХрд╛ рд╡рд░реНрдЧ рдХреНрдпрд╛ рд╣реИ? </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>Foo.__class__ &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">'&gt;</span></span></code> </pre> <br><p>  рддреЛ <b>Foo</b> рд╡рд░реНрдЧ рдПрдХ <b>рдкреНрд░рдХрд╛рд░</b> рдХреА рдХрдХреНрд╖рд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ рдФрд░ рдЕрдВрддрд┐рдо рд╡рд░реНрдЧ рдХреЗ <b>__call__</b> рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛ <b>Foo</b> рд╡рд░реНрдЧ рдХреЛ рджреЗрддрд╛ рд╣реИред  рдЕрдм рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ <b>рдЯрд╛рдЗрдк</b> рдХреНрд▓рд╛рд╕ рдХрд╛ <b>__call__</b> рддрд░реАрдХрд╛ рдХреНрдпрд╛ рд╣реИред  рдиреАрдЪреЗ <b>C</b> рдореЗрдВ CPython рдореЗрдВ рдФрд░ PyPy рдореЗрдВ рдЗрд╕рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИрдВред  рдпрджрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рджреЗрдЦрдХрд░ рдердХ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╕рд░рд▓реАрдХреГрдд рд╕рдВрд╕реНрдХрд░рдг рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдФрд░ рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВ: </p><br><h3>  CPython </h3><br><p>  <a href="">рд╕реНрд░реЛрдд рд╕реЗ рд▓рд┐рдВрдХ рдХрд░реЗрдВ</a> </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> PyObject * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type_call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PyTypeObject *type, PyObject *args, PyObject *kwds)</span></span></span><span class="hljs-function"> </span></span>{ PyObject *obj; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type-&gt;tp_new == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { PyErr_Format(PyExc_TypeError, <span class="hljs-string"><span class="hljs-string">"cannot create '%.100s' instances"</span></span>, type-&gt;tp_name); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } obj = type-&gt;tp_new(type, args, kwds); obj = _Py_CheckFunctionResult((PyObject*)type, obj, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Ugly exception: when the call was type(something), don't call tp_init on the result. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type == &amp;PyType_Type &amp;&amp; PyTuple_Check(args) &amp;&amp; PyTuple_GET_SIZE(args) == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; (kwds == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || (PyDict_Check(kwds) &amp;&amp; PyDict_Size(kwds) == <span class="hljs-number"><span class="hljs-number">0</span></span>))) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj; <span class="hljs-comment"><span class="hljs-comment">/* If the returned object is not an instance of type, it won't be initialized. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!PyType_IsSubtype(Py_TYPE(obj), type)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj; type = Py_TYPE(obj); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type-&gt;tp_init != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> res = type-&gt;tp_init(obj, args, kwds); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (res &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { assert(PyErr_Occurred()); Py_DECREF(obj); obj = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { assert(!PyErr_Occurred()); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj; }</code> </pre> <br><h3>  PyPy </h3><br><p>  <a href="https://bitbucket.org/pypy/pypy/src/87c5d21350cdad5ab2ff0c0b8e2e412f0ca85ddb/pypy/objspace/std/typeobject.py%3Fat%3Ddefault%26amp%3Bfileviewer%3Dfile-view-default">рд╕реНрд░реЛрдд рд╕реЗ рд▓рд┐рдВрдХ рдХрд░реЗрдВ</a> </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">descr_call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, space, __args__)</span></span></span><span class="hljs-function">:</span></span> promote(self) <span class="hljs-comment"><span class="hljs-comment"># invoke the __new__ of the type if not we_are_jitted(): # note that the annotator will figure out that self.w_new_function # can only be None if the newshortcut config option is not set w_newfunc = self.w_new_function else: # for the JIT it is better to take the slow path because normal lookup # is nicely optimized, but the self.w_new_function attribute is not # known to the JIT w_newfunc = None if w_newfunc is None: w_newtype, w_newdescr = self.lookup_where('__new__') if w_newdescr is None: # see test_crash_mro_without_object_1 raise oefmt(space.w_TypeError, "cannot create '%N' instances", self) w_newfunc = space.get(w_newdescr, self) if (space.config.objspace.std.newshortcut and not we_are_jitted() and isinstance(w_newtype, W_TypeObject)): self.w_new_function = w_newfunc w_newobject = space.call_obj_args(w_newfunc, self, __args__) call_init = space.isinstance_w(w_newobject, self) # maybe invoke the __init__ of the type if (call_init and not (space.is_w(self, space.w_type) and not __args__.keywords and len(__args__.arguments_w) == 1)): w_descr = space.lookup(w_newobject, '__init__') if w_descr is not None: # see test_crash_mro_without_object_2 w_result = space.get_and_call_args(w_descr, w_newobject, __args__) if not space.is_w(w_result, space.w_None): raise oefmt(space.w_TypeError, "__init__() should return None") return w_newobject</span></span></code> </pre> <br><hr><br><p>  рдпрджрд┐ рдЖрдк рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреА рддреНрд░реБрдЯрд┐ рдЬрд╛рдВрдЪ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рд▓рдЧрднрдЧ рдЗрд╕рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИрдВ: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(obj_type, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> obj = obj_type.__new__(*args, **kwargs) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> issubclass(obj, obj_type): obj.__init__(*args, **kwargs) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj</code> </pre> <br><p>  <b>__new__</b> "рдЦрд╛рд▓реА" рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <b>__init__</b> рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ: </p><br><ol><li>  <b>Foo (* args, ** kwargs)</b> <b>Foo .__ рдХреЙрд▓ __ (* args, ** kwargs) рдХреЗ</b> рдмрд░рд╛рдмрд░ рд╣реИред </li><li>  рдЪреВрдВрдХрд┐ <b>рдлреВ</b> рдСрдмреНрдЬреЗрдХреНрдЯ <b>рдЯрд╛рдЗрдк</b> рдХреНрд▓рд╛рд╕ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ, рдЬрд┐рд╕рдореЗрдВ <b>рдлреВ .__ рдХреЙрд▓ __ (* рдЖрд░реНрдЧреНрд╕, ** рдХрд╡рд░реНрд╕)</b> <b>рдЯрд╛рдЗрдк рдХреЗ</b> рдмрд░рд╛рдмрд░ рд╣реИ <b>ред__ рдХреЙрд▓ __ (рдлреВ, рдЕрд░реНрдЧреНрд╕, ** рдХрд╡рд░реНрд╕)</b> ред </li><li>  <b>рдкреНрд░рдХрд╛рд░ .__ рдХреЙрд▓ __ (рдлреВ, * рдЖрд░реНрдЧреНрд╕, ** рдХрд╡рд░реНрд╕)</b> <b>рдЯрд╛рдЗрдк рдХрд░рддреЗ рд╣реИрдВ ред__ рдирдИ __ (рдлреВ, * рдЖрд░реНрдЧреНрд╕, ** рдХрд╡рд░реНрд╕)</b> рд╡рд┐рдзрд┐, рдЬреЛ <b>рдУрдмреНрдЬ</b> рд░рд┐рдЯрд░реНрди рдХрд░рддреА рд╣реИред </li><li>  <b>obj рдХреЛ</b> <b>obj .__ init __ (* args, ** kwargs)</b> рдХрд╣рдХрд░ рдЖрд░рдореНрдн рдХрд┐рдпрд╛ <b>рдЬрд╛рддрд╛</b> рд╣реИред </li><li>  рдкреВрд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдПрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ <b>рдУрдмреНрдЬреЗрдХреНрдЯ рд╣реИ</b> ред </li></ol><br><h1>  рдЕрдиреБрдХреВрд▓рди </h1><br><p>  рдЕрдм рд╣рдо <b>__new__</b> рдХреА рдУрд░ рдЕрдкрдирд╛ рдзреНрдпрд╛рди рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рд╡рд┐рдзрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рддреА рд╣реИ рдФрд░ рдЙрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рддреА рд╣реИред  рдЖрдк рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рд╣реИрдВред  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдпрджреНрдпрдкрд┐ <b>__new__</b> рдПрдХ рд╕реНрдерд┐рд░ рд╡рд┐рдзрд┐ рд╣реИ, рдЖрдкрдХреЛ <b>@staticmethod</b> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдШреЛрд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ: рджреБрднрд╛рд╖рд┐рдпрд╛ <b>__new__</b> рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдорд╛рдорд▓реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдирддрд╛ рд╣реИред </p><br><p>  <b>__New__</b> рдУрд╡рд░рд░рд╛рдЗрдбреНрд╕ рдХрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдЙрджрд╛рд╣рд░рдг рд╕рд┐рдВрдЧрд▓рдЯрди рдмрдирд╛ рд░рд╣рд╛ рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Singleton</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> _instance = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cls._instance <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: cls._instance = super().__new__(cls, *args, **kwargs) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._instance</code> </pre> <br><p>  рддрдм: </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>s1 = Singleton() ... s2 = Singleton() ... s1 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> s2 <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><p>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <b>__in__</b> рдХреЛ рд╣рд░ рдмрд╛рд░ <b>рд╕рд┐рдВрдЧрд▓рдЯрди ()</b> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рджреЗрдЦрднрд╛рд▓ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред </p><br><p>  <b>__New__</b> рдУрд╡рд░рд░рд╛рдЗрдб рдХрд╛ рдПрдХ рдФрд░ рдЙрджрд╛рд╣рд░рдг <a href="https://www.safaribooksonline.com/library/view/python-cookbook/0596001673/ch05s23.html">рдмреЛрд░реНрдЧ рдкреИрдЯрд░реНрди ("рдмреЛрд░реНрдЧ")</a> рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Borg</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> _dict = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__new__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> obj = super().__new__(cls, *args, **kwargs) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cls._dict <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: cls._dict = obj.__dict__ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: obj.__dict__ = cls._dict <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj</code> </pre> <br><p>  рддрдм: </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>b1 = Borg() ... b2 = Borg() ... b1 <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> b2 <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> &gt;&gt;&gt; b1.x = <span class="hljs-number"><span class="hljs-number">8</span></span> ... b2.x <span class="hljs-number"><span class="hljs-number">8</span></span></code> </pre> <br><p>  рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рд╣рд╛рд▓рд╛рдВрдХрд┐ рдКрдкрд░ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдг <b>__new__</b> рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><blockquote><p>  <b>__new__</b> рджреБрд░реБрдкрдпреЛрдЧ рдХреА рд╕рдмрд╕реЗ рд▓рдЧрд╛рддрд╛рд░ рд╢рд┐рдХрд╛рд░ рд▓реЛрдЧреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред  рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЛ рдУрд╡рд░рд░рд╛рдЗрдб рдХрд░рдХреЗ рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рдЕрдиреНрдп рддрд░реАрдХреЛрдВ рд╕реЗ рдмреЗрд╣рддрд░ рд╣рд╛рд╕рд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬрдм рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рддреЛ <b>__new__</b> рдПрдХ рдЕрддреНрдпрдВрдд рдЙрдкрдпреЛрдЧреА рдФрд░ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЙрдкрдХрд░рдг рд╣реИред </p><br><p>  - рдкрд╛рдЗрдерди рдореЗрдВ рдПрд░рд┐рдпрди рд╕реНрдкреИрдЧ, рдж <a href="https://concentricsky.com/articles/detail/pythons-hidden-new">рд╡реЗрд▓</a> рдлреЙрд░рдЧреЙрдЯреЗрди <a href="https://concentricsky.com/articles/detail/pythons-hidden-new">рдУрд▓реНрдб</a> </p></blockquote><br><p>  рдПрдХ рд╢рд╛рдпрдж рд╣реА рдХрднреА рдкрд╛рдпрдерди рдореЗрдВ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╕рдорд╛рдзрд╛рди <b>__new__</b> рдХрд╛ рдЙрдкрдпреЛрдЧ <b>рдХрд░рдирд╛ рдерд╛</b> ред  рд▓реЗрдХрд┐рди рдЬрдм рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╣рдереМрдбрд╝рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╣рд░ рд╕рдорд╕реНрдпрд╛ рдирд╛рдЦреВрди рдХреА рддрд░рд╣ рджрд┐рдЦрдирд╛ рд╢реБрд░реВ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП <strong>рд╣рдореЗрд╢рд╛ рд╕рдмрд╕реЗ рдЙрдкрдпреБрдХреНрдд рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЙрдкрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдкрд╕рдВрдж рдХрд░реЗрдВ</strong> ред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi480022/">https://habr.com/ru/post/hi480022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi480008/index.html">рдпреВрд░реА рд░реЛрдЬрдЪреЗрд╡: "рдореИрдВ рдПрдо -1 рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдпрд╛ рдерд╛, рдХрдВрдкреНрдпреВрдЯрд░ рддрдХрдиреАрдХ рдХреЛ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдерд╛"</a></li>
<li><a href="../hi480010/index.html">рд╢реАрд░реНрд╖ 3 HTML рддрддреНрд╡ рд╣рдо рднреВрд▓ рдЧрдП</a></li>
<li><a href="../hi480012/index.html">рдХреНрд▓реИрдВрдЧ-рдкреНрд░рд╛рд░реВрдк рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрддрд╛ рд╣реИ</a></li>
<li><a href="../hi480016/index.html">39% рд░реВрд╕реА рдПрд╕рдПрдордмреА рдХрдВрдкрдирд┐рдпреЛрдВ рдиреЗ рд▓рдХреНрд╖рд┐рдд рд╕рд╛рдЗрдмрд░ рд╣рдорд▓реЛрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi480018/index.html">рдкрд╛рдпрдерди рдореЗрдВ рдореЛрдмрд╛рдЗрд▓ рдРрдк рд╡рд┐рдХрд╛рд╕ред KivyMD рд▓рд╛рдЗрдмреНрд░реЗрд░реА</a></li>
<li><a href="../hi480024/index.html">рдкреЗрд░рд┐рд╡рд┐рдВрдХрд▓: рд╕рд┐рдВрдЧрд▓-рдЗрдВрд╕реНрдЯреНрд░рдХреНрд╢рди рдкреНрд░реЛрд╕реЗрд╕рд░</a></li>
<li><a href="../hi480026/index.html">рдПрдЬрд╝реНрдпреЛрд░ рд╕реНрдкреЙрдЯ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЗ рдкреВрд░реНрд╡рд╛рд╡рд▓реЛрдХрди рдХреА рдШреЛрд╖рдгрд╛</a></li>
<li><a href="../hi480028/index.html">рд╕рдмрд╕реЗ рд╢рд╛рдВрддрд┐рдкреВрд░реНрдг рдХреНрд░рд╛рдВрддрд┐</a></li>
<li><a href="../hi480032/index.html">рдЯрдВрдХрдг рдХреЗ рд▓рд┐рдП Async, Swoole рдФрд░ рд╕рдорд╛рдирд╛рдВрддрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ PHP рдХрдиреЗрдХреНрдЯрд░реНрд╕ рдХреЛ рддреЗрдЬ рдХрд░рдирд╛</a></li>
<li><a href="../hi480034/index.html">2019 рдХреЗ рд▓рд┐рдП рд╣реИрдмреНрд░рд┐рдЯрд┐рдВрдЧ: рд╕рд╛рдВрдЦреНрдпрд┐рдХреА рдФрд░ 2019 рдХреЗ рд▓рд┐рдП рд▓реЗрдЦрдХреЛрдВ рдХреА рд░реИрдВрдХрд┐рдВрдЧ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>