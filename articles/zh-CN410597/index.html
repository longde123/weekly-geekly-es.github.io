<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏿 🧒🏼 💵 另一个智能家居设备 🅾️ 🕋 🍲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="参赛作品 
 在过去三年中从事家庭自动化，我试图跟踪该领域中的所有新设备。 最近，展览吸引了国内生产的新设备的注意。 搜索互联网后，我没有找到有关它们的任何信息。 我觉得很奇怪，因此决定与制造商联系（我不会指出）。 谈话后，我设法获得了一个月的测试样品。 一个月后，我决定分享我对该产品的印象。 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>另一个智能家居设备</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/410597/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/7e/rp/b87erppacywqripfkc5as0cvpxu.png"></div><br><h3> 参赛作品 </h3><br> 在过去三年中从事家庭自动化，我试图跟踪该领域中的所有新设备。 最近，展览吸引了国内生产的新设备的注意。 搜索互联网后，我没有找到有关它们的任何信息。 我觉得很奇怪，因此决定与制造商联系（我不会指出）。 谈话后，我设法获得了一个月的测试样品。 一个月后，我决定分享我对该产品的印象。 <br><br><h3> 制造商说明 </h3><br> 根据制造商的说法，所研究的设备是一个平台，使您可以创建用于监视和管理基础设施的自动化系统。 该平台允许您开发集中式和分布式系统，包括连接任何智能设备，并且系统的功能由安装的软件确定。 <br><br> 制造商声明该设备的以下特征： <br><a name="habracut"></a><table><tbody><tr><td> 中央处理器 </td><td>  •CPU：Allwinner H5，四核64位Cortex A53 <br>  •内存：1GB <br>  •存储：8GB eMMC，MicroSD卡 </td></tr><tr><td> 作业系统 </td><td>  •Linux Debian或Ubuntu </td></tr><tr><td> 通讯技术 </td><td>  •网络：Gbps以太网 <br>  •WiFi：802.11b / g / n <br>  •蓝牙：4.0双模 <br>  •无线电：2.4 GHz <br>  •2 x USB主机 <br>  •1 x RS485 </td></tr><tr><td> 输入/输出端口 </td><td>  •4个“干”触点350 v / 120mA <br>  •4个输出12 v / 1A <br>  •4个输入0-12 v </td></tr><tr><td> 状态指示 </td><td>  •OLED显示屏 <br>  •LED </td></tr><tr><td> 营养学 </td><td>  •直流12 v </td></tr></tbody></table><br><h3> 我们为客户做准备 <br></h3><br> 该设备有两种版本：仅裸机版本和带有软件的现成解决方案。 我得到了第一个选择，但更有趣的是-在哪里嬉戏幻想。 <br><br> 该设备的外观很苦涩： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b8/7e/rp/b87erppacywqripfkc5as0cvpxu.png"></div><br> 设备外壳可将其安装在DIN导轨上的机柜中，并占用四个模块的宽度。 <br><br> 在前面板上是： <br><br><ul><li> 展示 </li><li> 四个按钮； </li><li> 设备状态的LED指示灯（“红色”-禁用，“绿色”-供电，“蓝色”-指示处理器活动）； </li></ul><br> 掩盖位于： <br><br><ul><li>  I / O连接器（乍看之下，它们的数量可能不足，但此刻我会说一点儿低一点）； </li><li>  RS485接口 </li><li> 电源连接。 </li></ul><br> 所有的连接器都是拧紧的，这让我很高兴，因为我不喜欢夹紧。 盒子的右侧没有连接器和控件，通常对于将设备更紧密地安装在机柜中很有用。 <br><br> 所有连接器均组装在左侧： <br><br><ul><li> 可移动的WiFi天线； </li><li>  2个USB; </li><li>  1个 </li><li> 音频插孔。 </li></ul><br>  WiFi天线会干扰USB设备和网络电缆的连接。 必须将其调低，或使用电缆将其移到机柜的前部，第二种选择可能更正确，从而改善了信号电平。 <br><br> 我们继续进行“打开病人的过程”（将整个箱子组装在门闩上，不难拆卸），然后看一下里面的东西/打开前盖，然后看看： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/j4/d4/kaj4d4omm3_z-78fnhmpqiv5ws4.png"></div><br><ul><li>  OLED显示屏SSD1306（128x64px）：屏幕肯定很小，但是您可以获得的信息很少； </li><li> 根据名称判断，四个按钮可对设备进行本地控制，用于控制屏幕上的信息输出； </li><li> 电源管理按钮（如ATtiny13后来发现的那样进行电源管理）； </li><li>  RGB LED </li><li> 铭文下方是无线电模块的天线。 </li></ul><br> 我们进一步进行研究-打开机箱，看到该设备由三块板组成：主板，处理器板连接到该板上，而上面描述了“上”板的“上”板通过电缆连接到该板上。 我们将更仔细地研究它们： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lt/ty/hz/lttyhznbz7tcf5yn8dzppnqxjtc.png"></div><br><br><ul><li> 处理器模块是单板计算机NanoPi NEO Plus2。 不太夸张的OBC，但从技术角度来看非常有趣。 你可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a>阅读。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gp/3p/x-/gp3px-m9pebjgkevd2dnqi-fsbm.png"></div><br> 在主板上位于： <br><br><ul><li> 防止极性反转（我们认为“防止傻瓜”已经不错）； </li><li>  XL4005E1 5A上的DC-DC转换器很高兴他们没有在强大的肖特基二极管（12A）上受阻，但是线圈上缠着一根细线-3A会拉动，但我不再用它装了，转换器的冷却多边形是在板子的背面制成的，增加工作信心（控制ATtiny13的转换器）； </li><li> 其余细节都包含在标准方案中：用于3.3 v的AMS 1117稳压器，MCP23017扩展器，用于组织RS485接口的SP3485，ADS1115 16位ADC，大气压传感器BMP180的出现令人惊讶。 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qk/iw/r_/qkiwr_vhzvpuc6l9aii7ovcb6u0.png"></div><br> 在“上”板的背面安装了： <br><br><ul><li>  RTC模块DS3231; </li><li>  PCF8574端口扩展器负责处理按钮的单击； </li><li> 带放大器的无线电模块nRF24L01P。 </li></ul><br><h3> 使用和编程 </h3><br> 正如我已经说过的那样，我精疲力尽，不得不检查模块的运行并自己创建脚本。 他不懂哲学，Armbian参加了Linux程序集，并用Python进行了所有编程-快速，廉价且愉快！ 所有微电路对于许多业余无线电爱好者来说都是众所周知的；找到描述和基本使用方法将并不困难。 <br><br> 在研究了设备之后，形成了一个大概的任务清单： <br><br><ol><li> 通过“干”触点的输出连接接触器220v。  （获得可控制的电源线） </li><li> 标准安全和火灾传感器连接到两个12v / 1A输出和两个输入。  （获得安全和消防系统，而无需访问遥控器，但这通常不是必需的）。 </li><li> 连接到自由输入和输出，泄漏传感器和带12v电驱动器的球阀。  （获得防止泄漏的保护）。 </li><li> 提升WEB服务器并编写管理界面（获取远程控制）。 </li><li> 检查通过无线电，WiFi和其他设备的RS485的连接（检查建立分布式网络的可能性）。 </li><li> 检查USB调制解调器的操作。 </li><li> 检查作为路由器的操作。 </li></ol><br><img src="https://habrastorage.org/webt/zc/za/cu/zczacu4t1wrx2kogetbvn3kx53u.png"><br><br> 为了进行测试，我迅速组装了一个架子并开始玩得开心： <br><br>  ATtiny13已经编程过，我没有碰过它，而是让它按照制造商的计划负责电源。 <br><br>  MCP23017，ADS1115，PCF8574，DS3231，BMP180-所有这些均根据I2C起作用，因此，了解该总线的操作将立即确定大约80％的代码。 由于制造商已经设置了设备的地址，因此一切都按预期启动。 <br><br>  nRF24L01P在SPI总线上运行，其中的示例也足够了。 我联系了Arduino上的一对设备，一切正常。 <br><br>  RS485已使用Eastron SDM220功率计在Modbus协议上进行了测试。 进行阅读，没有惊喜。 <br><br> 华为E1550调制解调器中的USB插头确定了所有内容，拿起了VPN客户端并联系了家庭服务器。 安装了Web服务器并播放了遥控器。 <br><br>  WiFi模块既可以在客户端模式下也可以在接入点模式下工作。 他将模块置于AP模式，安装了DHCP服务器，配置了iptables并接收了WiFi路由器。 <br><br> 安装本地Blynk服务器不会引起问题。 已检查ESP8266的工作。 来自智能手机的控件正在工作，并显示读数。 <br><br> 至此，所有任务已经完成，智能家居的中央设备已经启动！ 似乎一切都已编程，配置简单容易，或者我是个天才。 <br><br> 我向您保证不是这样！ 我已经遇到了大多数微电路和模块，所以我踩了一把耙子，额头很疼，但颠簸过去了，但知识仍然存在！ <br><br> 处理器模块的功能足以解决我的任务，在测试过程中，处理器的平均负载不超过15％。  eMMC内存和MicroSD卡的存在将允许OS和软件的复制。 未连接USB设备时的功耗约为300 mA。 有了这种消耗，就不难用几个小时的电池来组织不间断电源进行5次工作。 <br><br> 所选的用于构建外围设备的元件基础非常可靠，这使人们对设备在24x7模式下的无故障运行充满信心。 <br><br> 设备本身上少量输入和输出的存在可以通过485总线和无线电模块的存在得到充分补偿，也就是说，构建分布式控制系统并不是很困难，并且板上的一组输入和输出可以用于电源柜中的本地控制。 <br><br><h3> 结论 </h3><br> 制造商声明的该设备是否可以集成所有智能设备？ 一口气，你可以说会。 但是不幸的是，没有足够的无线电模块用于433 MHz，CAN总线，ZigBee支持，但是RS485、2.4 GHz无线电模块和WiFi的存在将允许连接足够多的设备，并且通信协议可以用软件实现。 <br><br> 我再说一遍，有问题的设备有两种版本：用于构建分布式控制系统的完全现成的解决方案，仅硬件。 我认为，仅当您不想处理编程和懒惰时，才可以购买现成的解决方案。 在其他情况下，采用该平台并自己进行编程会更有趣。 <br><br> 我目前不知道设备的价格。 我认为，如果制造商的价格不超过13 tr。 对于“裸机”版本，则购买此设备非常有趣。 在中国购买了所有零件并将其包装在一个包装中后，您不太可能会变得便宜。 <br><br> 竞争对手可能是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wiren Board 5</a> 。 它赢得了端口数量和可能的接口数量，但失去了处理器模块的功能。 这不会影响标准任务，但是在本地安装Blynk服务器或制作语音控制模块可能会出现问题。 如果有人尝试在WB5上执行此操作，请在评论中发表评论。 <br><br>  <b>PS：</b>在完成本文之后，我还在板上找到了ATSHA204加密芯片。 它支持SHA 256加密算法，非常适合对称身份验证任务。 好吧，这绝对是极客们！ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN410597/">https://habr.com/ru/post/zh-CN410597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN410585/index.html">如何成为魔术师（第1部分）</a></li>
<li><a href="../zh-CN410587/index.html">苹果打算独家向矿业公司购买钴</a></li>
<li><a href="../zh-CN410589/index.html">能够适应全球变暖的海洋生态系统</a></li>
<li><a href="../zh-CN410591/index.html">70年代至90年代初第一台计算机的处理器的情感历史</a></li>
<li><a href="../zh-CN410593/index.html">电报进行另一轮ICO</a></li>
<li><a href="../zh-CN410599/index.html">一波来自采矿场的设备盗窃横扫冰岛</a></li>
<li><a href="../zh-CN410601/index.html">今天的教育机器人是什么</a></li>
<li><a href="../zh-CN410603/index.html">所有权宣言</a></li>
<li><a href="../zh-CN410605/index.html">业余天文学家测试了一台新相机并意外拍摄了一颗超新星</a></li>
<li><a href="../zh-CN410607/index.html">SpaceX继续工作：全球无线互联网网络的前两颗卫星和寻宝游戏</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>