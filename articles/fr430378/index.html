<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤱🏽 ❎ 🦇 J2CL - Mieux vaut tard que jamais 🎄 👩🏿‍🚀 😒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Personne n'a encore pu être en retard pour leurs funérailles. 
 Valentin Domil 


 La semaine dernière, une équipe de Google a finalement publié le co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>J2CL - Mieux vaut tard que jamais</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/430378/"><p>  <em>Personne n'a encore pu être en retard pour leurs funérailles.</em> <em><br></em>  <em>Valentin Domil</em> </p><br><p>  La semaine dernière, une équipe de Google a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">finalement publié le code source du framework J2CL</a> , dont on parle depuis 2015.  L'idée de traduire Java en JavaScript est loin d'être nouvelle, et tout le monde a longtemps rempli les cônes avec Google Web Toolkit, mais la communauté attendait ce produit pas comme les autres - ils en ont parlé et prononcé des discours, mais personne ne l'a vu. </p><br><img src="https://habrastorage.org/webt/ye/fe/6k/yefe6kgvdo8449ifrxfzlfenbve.png"><br><p>  ‌‌‍‍ <br>  Plus de 3 ans se sont écoulés depuis la première annonce et il semble que le produit ait perdu le marché sans même être né.  Aujourd'hui, nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scala.js</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kotlin.js</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSweet</a> , sans oublier que le développement Web a été détourné par TypeScript et qu'il n'y a plus d'espace pour Java.  Pendant ce temps, beaucoup, même les javistes les plus dévoués, ont perdu confiance en «Java for Front-end» et ont freiné tel ou tel framework JavaScript. </p><br><p>  Depuis la sortie, voyons ce qui s'est passé et à qui cela pourrait être utile. </p><a name="habracut"></a><br><h2 id="ideya">  Idée </h2><br><p>  Fondamentalement, l'émulation de machines virtuelles Java dans un navigateur est une tâche difficile.  Les développeurs de Google Web Toolkit le résolvent depuis longtemps et ont obtenu certains succès: ils ont construit un traducteur, développé des mécanismes d'émulation pour la bibliothèque Java standard et fourni des réglages pour le développement d'applications. </p><br><p>  Cette approche présente de nombreux avantages: la saisie statique, la possibilité de réutiliser le code du serveur dans un navigateur et des outils prêts à l'emploi sous la forme d'un IDE Java.  De nombreuses approches initialement définies dans GWT sont désormais visibles dans TypeScript, Web Pack et d'autres outils de développement frontaux. </p><br><p>  L'ancien Google Web Toolkit n'était pas apprécié pour son encombrement et son abstraction pour la construction d'une interface utilisateur.  L'idée de J2CL est plus simple - vous permettant de traduire Java en JavaScript au coût le plus bas possible, afin que vous puissiez facilement appeler Java à partir de JavaScript et vice versa. </p><br><p>  Et si en 2015 il y aurait vraiment eu un traducteur Java de haute qualité dans JS sans ordures inutiles, on ne sait pas comment le développement Web se développerait davantage. </p><br><h2 id="predystoriya-j2cl">  Contexte J2CL </h2><br><p>  Début 2015, l'équipe Google GWT a pris une décision difficile mais nécessaire: développer un nouveau produit qui vous permet d'utiliser Java dans le développement frontal. </p><br><p>  Cela était principalement dû aux tendances changeantes du développement Web et de leurs nouveaux clients internes, qui considéraient Java pour le Web non pas comme un écosystème isolé, mais comme partie intégrante d'une grande pile.  Cela a nécessité une vision complètement nouvelle et la création d'outils à partir de zéro, qui devraient être étroitement intégrés avec le reste de l'écosystème. </p><br><p>  Avec GWT, il était presque impossible d'atteindre ces objectifs.  Bien qu'il y ait des outils d'interaction bidirectionnelle avec JavaScipt dans le GWT, le cadre n'a pas pu se débarrasser de beaucoup de bagages sous la forme d'une interface utilisateur, d'une bibliothèque RPC et d'autres API d'application. </p><br><h2 id="chto-eto-za-zver">  Quelle est cette bête </h2><br><p>  Selon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les développeurs</a> , J2CL fournit une intégration transparente du code Java dans les applications JavaScript.  Il s'agit d'un traducteur Java vers JavaScript simple et léger axé sur l'optimisation du code à l'aide du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">compilateur de fermeture</a> . </p><br><ul><li>  Vous pouvez facilement mélanger Java et JavaScript dans un seul projet, en tirant le meilleur parti de chacune des langues. </li><li> Permet la réutilisation du code entre une solution serveur, une application Web et la plate-forme Android.  Un grand nombre de bibliothèques Java sont disponibles, telles que: Guava, Dagger et AutoValue. </li><li>  Moderne et confortable.  L'assemblage des projets est basé sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bazel</a> , soutenu par Live-reload. </li><li>  Vérifié.  On prétend que J2CL est utilisé dans la production dans les projets GSuite: GMail, Docs, Slides et Calendar. </li></ul><br><p>  Essentiellement, J2CL traduit le code source Java en code JavaScript sans utiliser le bytecode de la classe Java.  Cela signifie que, comme dans le cas de Google Web Toolkit, le code source de toutes les bibliothèques utilisées est nécessaire pour compiler le projet.  De plus, cela soulève des questions sur la prise en charge des fonctionnalités du langage Java dans les nouvelles versions.  À l'heure actuelle, les développeurs promettent la prise en charge de toutes les fonctionnalités de syntaxe de Java 11. </p><br><p>  J2CL ne prend pas en charge les widgets GWT, GWT RPC et d'autres bibliothèques GWT - uniquement Java de base et le moteur d'intégration JavaScript, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSInterop</a> . </p><br><p>  C'est-à-dire  Il s'agit d'une version très limitée de GWT avec un tout nouveau transporteur.  Et, comme le nouveau produit n'est plus compatible avec GWT, il s'appelle non pas GWT, mais J2CL.  En conséquence, la version prévue de GWT 3 sera un framework au-dessus de J2CL, où toutes les bibliothèques d'applications seront séparées du niveau système du traducteur lui-même. </p><br><p>  Les restrictions de compatibilité Java existantes sont décrites <a href="">sur GitHub</a> .  Fondamentalement, ils sont restés les mêmes que dans GWT - il n'y a pas de support de réflexion, pas d'API réseau Java.  Mais quelque chose est différent - la sémantique des tableaux et des listes n'est pas émulée, par exemple, l'index ne vérifie pas les occurrences dans les limites des tableaux.  Les développeurs ne se concentrent pas sur l'émulation du comportement JVM, mais sur la syntaxe du langage pour garantir une surcharge minimale et ne pas générer des tonnes de JavaScript pour assurer une compatibilité totale. </p><br><p>  Bien que J2CL soit prêt pour la production, sa version OSS en est encore loin.  Par exemple, il y a des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">problèmes pour démarrer des projets sous Windows</a> et les développeurs ne promettent pas une API stable. </p><br><p>  Le choix de Bazel comme système de build pour le produit interne de Google est facile à expliquer, mais il n'y a aucun avantage pour la communauté, et il n'y a pas d'autre moyen d'utiliser J2CL que d'apprendre ce système de build.  Il ne reste plus qu'à attendre que la communauté écrive des plugins pour Maven / Gradle. </p><br><h2 id="probuem">  Essayez </h2><br><p>  Tout d'abord, pour essayer J2CL maintenant, vous avez besoin de Mac OS ou Linux. <br>  Deuxièmement, vous devez installer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bazel</a> - un système de construction quelque peu exotique de Google. </p><br><p>  Maintenant, vous pouvez au moins collecter quelque chose, par exemple, HelloWorld à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partir du référentiel officiel.</a> </p><br><pre><code class="plaintext hljs">&gt; bazel build src/main/java/com/google/j2cl/samples/helloworld:helloworld</code> </pre> <br><p>  Si nous regardons la conclusion, nous serons agréablement surpris: </p><br><pre> <code class="plaintext hljs">&gt; cat bazel-bin/src/main/java/com/google/j2cl/samples/helloworld/helloworld.js document.write('Hello from Java! and JS!');</code> </pre> <br><p>  Bien sûr, cela ne prouve rien, mais il est très satisfait de son minimalisme après les modules GWT.  Il n'y a pas encore de grands exemples d'applications, nous attendrons leur apparition. </p><br><h2 id="zachem-eto-nuzhno-esli-est-xxxjs">  Pourquoi est-il nécessaire s'il y a xxx.js </h2><br><p>  La réponse à la question de savoir pourquoi cela doit être trouvé est toujours difficile.  À première vue, J2CL a une idée très forte - réutiliser Java pour le frontend tout comme les gens utilisent TypeScript.  En revanche, le projet semble être en retard. </p><br><p>  De nouveaux projets de transpilateur dans JS, tels que Kotlin.js et Scala.js, sont implémentés en tant que plugins de compilation et n'ont pas besoin de ré-analyser le code source.  Et à cet égard, J2CL est un pas en arrière, car il a besoin du code source qu'il analysera. </p><br><p>  Un point distinct est le langage Java lui-même.  Pourquoi écrire en Java verbeux, si vous pouvez écrire à la fois le serveur et la partie client en Kotlin concis? </p><br><p>  Bien que, comparé à un autre projet similaire - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JSweet</a> , je fais davantage confiance à J2CL.  L'outillage JSweet est beaucoup plus convivial et plus prêt à l'emploi, mais JSweet a une petite communauté et il est presque entièrement écrit par une seule personne. </p><br><h2 id="kod-govorite-otkrytyy">  Vous dites le code open source? </h2><br><p>  Certainement heureux que le projet dispose d'une licence ouverte pour Apache 2.0. </p><br><p>  Malheureusement, l' <em>open source</em> ne signifie pas <em>un processus de développement ouvert</em> .  La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plus grande déception</a> de la communauté est venue de la situation actuelle, le projet J2CL a été annoncé il y a 3 ans, mais personne ne montre son code source, vous ne pouvez pas influencer son API finale et ne pas accélérer le processus de développement, car il n'y a nulle part où envoyer des correctifs. </p><br><p>  Espérons que la situation s'améliore et que le produit devienne viable. </p><br><p>  <strong>Mise à jour:</strong> première application J2CL portée depuis GWT2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/DominoKit/dominodo</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430378/">https://habr.com/ru/post/fr430378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430364/index.html">«Il me semble que nous approchons du moment où tout le monde pourra coder. Le code est la liberté. "</a></li>
<li><a href="../fr430366/index.html">VR-cuisine: ce qui n'est pas visible dans le casque</a></li>
<li><a href="../fr430372/index.html">Voiture à hydrogène. Est-il temps de dire au revoir à l'essence?</a></li>
<li><a href="../fr430374/index.html">Ingénierie des données et plus encore: bandes vidéo Wrike et diapositives de la réunion</a></li>
<li><a href="../fr430376/index.html">Guide JavaScript, partie 6: exceptions, points-virgules, littéraux de modèle</a></li>
<li><a href="../fr430380/index.html">Guide JavaScript Partie 5: Tableaux et boucles</a></li>
<li><a href="../fr430382/index.html">Guide JavaScript Partie 4: Fonctionnalités</a></li>
<li><a href="../fr430384/index.html">Création de cartes à partir d'entités de bruit</a></li>
<li><a href="../fr430386/index.html">Construction d'une centrale de stockage à semi-conducteurs en Inde</a></li>
<li><a href="../fr430388/index.html">Conférence Web Summit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>