<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ³ ğŸ†‘ ğŸ¥ Solusi sederhana untuk pengujian regresi visual di Java + Selenium Webdriver + aShot ğŸ™ŒğŸ½ ğŸŠ âœŒğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo 

 Saya sudah menerbitkan artikel tentang pengalaman saya dalam mengotomatisasi pengujian regresi visual. 

 Sejak itu, proyek telah meningkat se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Solusi sederhana untuk pengujian regresi visual di Java + Selenium Webdriver + aShot</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485710/">  Halo <br><br>  Saya sudah menerbitkan <a href="https://habr.com/ru/post/461553/">artikel</a> tentang pengalaman saya dalam mengotomatisasi pengujian regresi visual. <br><br>  Sejak itu, proyek telah meningkat secara signifikan - strukturnya telah berubah, telah menjadi jauh lebih mudah untuk mengatur proyek dan mulai menulis autotest, laporannya telah meningkat secara signifikan. <br><br><img src="https://habrastorage.org/webt/2x/wd/w4/2xwdw479i_x2gosf6whoc4jvcho.png"><br><br>  <b><a href="https://github.com/predewill/VisualRegressionFramework">VisualRegressionFramework</a></b> adalah solusi yang cukup sederhana untuk proyek-proyek kecil.  Sekitar 50 autotest (halaman + elemen) ditulis untuk proyek yang saya kerjakan. <br><a name="habracut"></a><br>  Saya menjalankan tes setelah perubahan tata letak.  Setiap perubahan segera terlihat, yaitu, masalah seperti " <i>mengubah tata letak elemen pada satu halaman, tetapi semuanya pecah pada halaman lain</i> " telah lama diselesaikan. <br><br>  Teknologi yang digunakan - Java, TestNG, Maven, Selenium Webdriver, aShot (pustaka untuk membandingkan gambar). <br><br><h3>  Kemampuan: </h3><br><ul><li>  Bandingkan tangkapan layar halaman </li><li>  Perbandingan tangkapan layar halaman + mengabaikan elemen tertentu (konten dinamis, dll.) </li><li>  Bandingkan tangkapan layar item </li><li>  Breakpoints - Anda dapat membandingkan tangkapan layar halaman atau elemen dengan lebar berbeda.  Secara default, 3 breakpoint digunakan - 1920px, 768px, 360px </li><li>  Otomatis menghasilkan tangkapan layar yang diharapkan </li><li>  Anda dapat menulis tes sebagai autotest fungsional biasa, tidak ada batasan - ini penting karena kadang-kadang mungkin perlu melakukan beberapa tindakan kompleks sebelum mengambil tangkapan layar. </li></ul><br><h3>  Laporkan </h3><br>  Laporannya terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/2x/wd/w4/2xwdw479i_x2gosf6whoc4jvcho.png"><br><br>  Bilah sisi kiri berisi daftar tes, log dengan kesalahan, browser tempat autotests dijalankan. <br><br>  Anda juga dapat beralih di antara breakpoint dan memperbesar gambar apa pun dengan mengkliknya. <br><br><h3>  Struktur kerangka kerja </h3><br>  <b>src / config / visual.properties</b> - berikut ini semua pengaturan yang diperlukan <br><br><ul><li>  breakpoints - breakpoints, lebar situs tempat pengambilan tangkapan layar </li><li>  <b>allowableDiffSize</b> - perbedaan yang diizinkan antara tangkapan layar yang diharapkan dan aktual dalam piksel </li><li>  jalur ke folder dengan tangkapan layar </li><li>  jalur ke templat untuk laporan, ke laporan itu sendiri dan ke file dengan log kesalahan </li></ul><br>  <b>report / REPORT.html</b> - report <br><br>  <b>tangkapan layar</b> <br><br><ul><li>  <b>aktual</b> - tangkapan layar aktual yang dibuat selama pengujian </li><li>  screenshot yang diharapkan - diharapkan, jika tidak ada screenshot yang diharapkan, mereka akan dibuat secara otomatis saat pertama kali Anda menjalankan tes </li><li>  gambar berbeda yang area ketidakcocokan disorot dalam warna merah </li><li>  <b>gif</b> - <b>gif</b> dibuat dari gambar aktual, yang diharapkan, dan berbeda </li></ul><br>  <b>src / main / framework</b> - kelas <b>framework</b> - generator laporan, tangkapan layar, gif, dll. <br><br>  <b>src / main / app</b> hanyalah contoh arsitektur objek halaman, tidak perlu digunakan, itu bisa dihapus. <br><br>  <b>src / test / resources / testng.xml</b> - di sini Anda perlu menambahkan kelas tes baru, antara A_BeforeAllTests dan A_AfterAllTests <br><br>  <b>src / test / java</b> <br><br><ul><li>  A_BaseTest - kelas tes dasar tempat semua kelas tes baru akan mewarisi </li><li>  A_BeforeAllTests - inisialisasi pengaturan dan browser sebelum pengujian </li><li>  A_AfterAllTests - melaporkan pembuatan setelah pengujian </li><li>  A_ErrorsLogListener - kesalahan logging </li><li>  StaticGuestTest - contoh kelas uji </li></ul><br>  <b>Kelas berjalan dalam urutan tertentu:</b> <br><br><ol><li>  pertama kali datang inisialisasi pengaturan dan browser - kelas <b>A_BeforeAllTests</b> </li><li>  kemudian uji autotest </li><li>  dan pada akhirnya sebuah laporan dihasilkan - kelas <b>A_AfterAllTests</b> </li></ol><br><h3>  Cara bekerja dengan kerangka kerja </h3><br>  <b>Contoh uji</b> <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ app.open(); app.preparePageForScreenshot(); Comparer.comparePages(<span class="hljs-string"><span class="hljs-string">"index_page"</span></span>); }</code> </pre> <br>  Pada contoh di atas, halaman hanya terbuka, lalu halaman disiapkan untuk tangkapan layar, setelah itu tangkapan layar halaman yang diharapkan dan saat ini dibandingkan.  Screenshot dibuat dan dibandingkan di semua breakpoints. <br><br>  <b>Mengapa kita membutuhkan fungsi prepPageForScreenshot ()</b> : <br><br>  Secara default, halaman hanya gulir ke bawah, dan kemudian naik melalui js + ada jeda kedua.  Ini diperlukan agar semua gambar, gaya, dll. Dapat dimuat. <br><br>  Juga dalam fungsi ini, Anda dapat menyembunyikan elemen yang tidak perlu, misalnya, blok dinamis dengan iklan.  Dalam proyek saya, saya menyembunyikan footer, header dan sidebar, karena mereka sama di semua halaman.  Tanpa elemen-elemen ini, tes bekerja lebih cepat dan memeriksa laporan lebih mudah. <br><br>  <b>Halaman</b> <br><br>  Bandingkan tangkapan layar halaman di semua breakpoints: <br><br><pre> <code class="java hljs">Comparer.comparePages(<span class="hljs-string"><span class="hljs-string">"test_name"</span></span>);</code> </pre> <br>  Bandingkan tangkapan layar halaman di semua breakpoint + sembunyikan elemen: <br><br><pre> <code class="java hljs">Comparer.comparePages(<span class="hljs-string"><span class="hljs-string">"test_name"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{<span class="hljs-string"><span class="hljs-string">"css_locator_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"css_locator_2"</span></span>});</code> </pre> <br>  Bandingkan tangkapan layar halaman hanya di breakpoint yang ditentukan: <br><br><pre> <code class="java hljs">Comparer.comparePagesWithBreakpoint(<span class="hljs-string"><span class="hljs-string">"test_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"1920"</span></span>);</code> </pre> <br>  Bandingkan tangkapan layar halaman hanya di breakpoint + sembunyikan elemen yang ditentukan: <br><br><pre> <code class="java hljs">Comparer.comparePagesWithBreakpoint(<span class="hljs-string"><span class="hljs-string">"test_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"1920"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String[]{<span class="hljs-string"><span class="hljs-string">"css_locator_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"css_locator_2"</span></span>});</code> </pre> <br>  <b>Item</b> <br><br>  Bandingkan tangkapan layar dari elemen yang ditentukan di semua breakpoints: <br><br><pre> <code class="java hljs">Comparer.compareElements(<span class="hljs-string"><span class="hljs-string">"test_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"css_locator"</span></span>);</code> </pre> <br>  Bandingkan tangkapan layar dari elemen yang ditentukan hanya di breakpoint yang ditentukan: <br><br><pre> <code class="java hljs">Comparer.compareElementsWithBreakpoint(<span class="hljs-string"><span class="hljs-string">"test_name"</span></span>, <span class="hljs-string"><span class="hljs-string">"1920"</span></span>, <span class="hljs-string"><span class="hljs-string">"css_locator"</span></span>);</code> </pre> <br>  <a href="https://github.com/predewill/VisualRegressionFramework"><b>Tautan ke repositori proyek</b></a> <br><br><h3>  Masalah saat ini </h3><br><ul><li>  Area hitam dapat ditambahkan ke akhir tangkapan layar, saya telah menjumpai ini selama beberapa waktu.  Masalahnya hilang ketika saya mulai menyembunyikan catatan kaki.  Ini adalah masalah pustaka aShot - <a href="https://github.com/pazone/ashot/issues/169">https://github.com/pazone/ashot/issues/169</a> </li><li>  Autotest mungkin tidak lulus karena perbedaan beberapa piksel.  Masalahnya dipecahkan dengan meningkatkan nilai <b>TestConfig.allowableDiffSize</b> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485710/">https://habr.com/ru/post/id485710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485694/index.html">Embox pada prosesor Elbrus. Atau jangan pernah melupakan kecerdasan Anda</a></li>
<li><a href="../id485702/index.html">Pertemuan FunCorp iOS # 2</a></li>
<li><a href="../id485704/index.html">Seni pixel untuk pemula: memperbaiki kesalahan umum</a></li>
<li><a href="../id485706/index.html">Kami mengundang Anda ke pertemuan "Transformasi Digital dan Peran Baru dalam Ilmu Data"</a></li>
<li><a href="../id485708/index.html">Blockchain Mengubah Cara Kerja Industri Rel</a></li>
<li><a href="../id485712/index.html">Manajemen bukan kalimat</a></li>
<li><a href="../id485716/index.html">Calico untuk berjejaring di Kubernetes: berkenalan dan sedikit pengalaman</a></li>
<li><a href="../id485718/index.html">Pac-Man: Kisah Tak Terungkap tentang Bagaimana Kami Sebenarnya Memainkan Game Ini</a></li>
<li><a href="../id485726/index.html">Retas Pesawat - 3</a></li>
<li><a href="../id485732/index.html">15 Februari Badoo PHP Meetup # 4. Warisan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>