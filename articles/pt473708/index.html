<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüíº üëàüèΩ ü§µüèø Carro el√©trico caseiro - nem tudo √© o que voc√™ pensa üë®‚Äçüíº üâë üí®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° pessoal. Enquanto estudava na universidade, colecionei um pequeno carro el√©trico, po√ßo ou cart√µes. O truque dele era que todo o controle do aciona...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Carro el√©trico caseiro - nem tudo √© o que voc√™ pensa</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473708/">  Ol√° pessoal.  Enquanto estudava na universidade, colecionei um pequeno carro el√©trico, po√ßo ou cart√µes.  O truque dele era que todo o controle do acionamento el√©trico, incluindo os freios, era dado a um controlador improvisado.  E sobre como eu fiz esse pequeno carro e quais as armadilhas que encontrei durante a constru√ß√£o - eu gostaria de contar neste material.  O material n√£o afirma ser √∫nico, mas para mim foi uma experi√™ncia √≥tima e interessante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d7/ba5/bcd/0d7ba5bcd39361bb01bdd48e517dfef1.jpg" alt="imagem"><br><a name="habracut"></a><br>  O tema da hist√≥ria est√° na jun√ß√£o dos aspectos de hardware e software.  E no firmware do controlador, eu n√£o estava lidando com alguns conceitos ou dados abstratos, mas com dispositivos "f√≠sicos" muito reais: rel√©s, motores el√©tricos, transistores etc.  Ent√£o, darei uma breve descri√ß√£o da parte t√©cnica, a composi√ß√£o que estava no momento de todas as dan√ßas com um pandeiro. <br><br><h2>  N√≥s principais </h2><br>  Motor de tra√ß√£o - coletor universal.  Pode trabalhar da corrente direta e da corrente alternada.  Tens√£o operacional 220 volts. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e16/7d7/b68/e167d7b689f2550e86b9952e6a642125.jpg" alt="imagem"><br><br>  A bateria possui 25 c√©lulas de chumbo-√°cido de 6 volts, cada uma fabricada pela Casil, conectadas em s√©rie e, como resultado, obtemos uma bateria de 150-160 volts.  Ele √© instalado na parte traseira e enrolado com fita isolante azul, tudo est√° como deveria :) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0f/c4f/b13/c0fc4fb132bc5363c231df22b9ecb5c7.jpg" alt="imagem"><br><br>  O motor aciona as rodas atrav√©s de uma engrenagem helicoidal com uma rela√ß√£o de engrenagem i = 10.  A foto mostra que o motor est√° acoplado √† caixa de engrenagens usando um pequeno rolo, que foi especialmente usinado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/38c/a83/d6f38ca83b6009735c06a4f0355ce1b4.jpg" alt="imagem"><br><br>  O sistema de frenagem, ou seja, o disco de freio com a pin√ßa, n√£o era, em princ√≠pio.  Coloque um freio f√≠sico naquele momento n√£o funcionou.  Portanto, a frenagem do motor permaneceu a √∫nica op√ß√£o real; portanto, o controlador tamb√©m teve que assumir o controle da frenagem da m√°quina. <br><br><h2>  Controlador para unidade de controle </h2><br>  Em princ√≠pio, um controlador simples para um ve√≠culo el√©trico tamb√©m pode ser montado em uma ‚Äúcama solta‚Äù.  Mas eu gostaria que fosse capaz de configurar lindamente tudo com a ajuda do programa, afinal, o s√©culo XXI.  Depois de uma longa discuss√£o cient√≠fica no jantar, decidi que o chip microchip pic16f877a deveria ser tomado como base do controlador, e aqui est√£o suas breves caracter√≠sticas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3d4/775/d75/3d4775d758648f5590a09594e4c5389a.jpg" alt="imagem"><br><br>  Naquela √©poca, eu realmente n√£o me atrapalhava com a eletr√¥nica e, inicialmente, queria tornar o circuito estupidamente vergonhoso - o motor est√° ligado ou desligado, mas em vez de um rel√©, coloque uma chave de transistor para que nada clique e n√£o queime.  Mas decidi que o risco era justificado, n√£o perdi nada e s√≥ queria fazer algo que valesse a pena.  Ent√£o, decidi usar um microcontrolador + transistor de efeito de campo de pot√™ncia como chave.  O acelerador e o bot√£o de r√© trazidos para o volante. <br><br><h2>  Recursos do circuito </h2><br>  Ao escolher um transistor, n√£o economizei e escolhi o IRFP4227PBF - um transistor de efeito de campo de canal N (abre com um pulso positivo) para uma voltagem de 200 volts e uma corrente m√°xima de 130 amperes.  Processo TO-247AC.  Mas, olhando para o futuro, eu direi - eu consegui queim√°-lo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c72/18c/3ea/c7218c3ea988d6fbb05736a0d83b1f57.jpg" alt="imagem"><br><br><h2>  PWM - o que √© e com o que ele come </h2><br>  Desde que eu usei um microcontrolador em conjunto com um transistor de efeito de campo, foi um pecado n√£o tentar usar pwm / pWM no circuito.  O que √© um cal√ßo?  A modula√ß√£o por largura de pulso (PWM) √© o processo de controle de energia pelo m√©todo de pulsar dentro e fora do dispositivo.  - gra√ßas √† Wikipedia. <br><br>  A vantagem deste m√©todo de controle do transistor: durante a opera√ß√£o, ele est√° em dois estados - completamente fechado, n√£o h√° corrente e nada est√° aquecendo, ou est√° completamente aberto e sua resist√™ncia √© de v√°rios quil√¥metros, respectivamente, algumas fra√ß√µes de um watt de calor s√£o dissipadas no calor no pr√≥prio transistor , ou unidades de watts, o circuito est√° quase quente neste modo de opera√ß√£o.  E esse processo - abrir / fechar ocorre milhares de vezes por segundo.  Isso √© chamado de frequ√™ncia PWM.  Existe tamb√©m uma coisa chamada ‚Äúciclo de servi√ßo‚Äù.  Traduzindo para a linguagem humana - esta figura mostra quanto tempo o transistor est√° aberto.  Se formos um pouco mais fundo - digamos que temos uma frequ√™ncia de um sinal PWM de 1000 hertz.  Assim, o transistor abre e fecha 1000 vezes por segundo, e o processo de altern√¢ncia entre ligar e desligar √© 1/1000 de uma fra√ß√£o de segundo.  O valor 1/1000 √© o per√≠odo da frequ√™ncia.  E com a ajuda do ciclo de servi√ßo, mostramos em que parte do tempo o per√≠odo em que o transistor est√° aberto e a corrente flui atrav√©s dele.  Por exemplo: no programa, o ciclo de trabalho 255 √© a pot√™ncia m√°xima, 127 - 50%, 0 - o transistor est√° fechado. <br><br>  Para gerar essa frequ√™ncia, foi utilizado o controlador "f√≠sico" embutido no chip, embora exista a possibilidade de implementa√ß√£o de software, mas nesse caso o controlador far√° apenas o que gerar uma frequ√™ncia com um per√≠odo e um ciclo de trabalho especificados na sa√≠da.  E, usando um controlador da periferia do MK, foi poss√≠vel gerar um sinal e, assim, o programa faria outra coisa. <br><br>  Quanto mais longe na floresta, mais irritados os lobos - a efic√°cia do acionamento el√©trico depende da frequ√™ncia do PWM.  Tentei frequ√™ncias diferentes, de 2 a 15 kilohertz, cada vez que mudava programaticamente.  Honestamente, n√£o notei muita diferen√ßa, mas tenho certeza de que √©.  Infelizmente, n√£o foi poss√≠vel obter dados sobre esse problema em quantidades suficientes.  A √∫nica coisa que notei foi que a m√°quina rangia em diferentes frequ√™ncias durante a opera√ß√£o.  A prop√≥sito, se algu√©m notou no metr√¥, √¥nibus e trens el√©tricos que durante a partida voc√™ ouve um estrondo, um guincho, um uivo - esse √© o mesmo chiado dos enrolamentos do motor devido ao trabalho nas frequ√™ncias do controlador.  Isso √© muito percept√≠vel no trem "Swallow", que percorre a MCC durante o in√≠cio. <br><br><h2>  Armadilhas no algoritmo do trabalho </h2><br>  O pr√≥ximo problema foi com o reverso do motor.  O motor √© um colecionador, possui dois enrolamentos - im√≥veis - um estator no corpo e rotativos - um rotor.  Para mudar o sentido de rota√ß√£o, √© necess√°rio implantar o sentido da corrente em um dos enrolamentos, n√£o eu no sentido do outro.  Para isso, foram utilizados dois rel√©s, que funcionavam simultaneamente, "acionando" o circuito para reverter quando a energia era fornecida a eles.  Mas na primeira vers√£o do firmware houve um erro - os rel√©s trocaram sob carga.  Como resultado do teste sob carga, existem dois rel√©s queimados, uma vez que o motor √© uma carga indutiva e houve um forte arco nos contatos do rel√©, os contatos simplesmente derreteram e queimaram durante a comuta√ß√£o. <br><br>  A sa√≠da da situa√ß√£o √© introduzir no programa a condi√ß√£o de que, antes de desligar, removemos a carga desaparafusando o ciclo de trabalho do sinal PWM por 0, ative o rel√© e retorne a pot√™ncia ao n√≠vel definido.  √â exatamente assim que os freios do carro funcionavam - marcha √† r√©.  Apenas hardcore - sem sensores e codificadores, nada.  E aqui est√° a foto do revezamento, √© como um revezamento inicial do Lada.  Se voc√™ troc√°-los sem carga, eles tamb√©m funcionam com altas tens√µes, mantiveram 160 volts a 15 amperes, mas admito que os contatos foram aquecidos devido √† pequena se√ß√£o transversal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1b/358/156/f1b35815670bb9af015657ad127eb8aa.jpg" alt="imagem"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b7/773/5c6/3b77735c6de9a2be1be39ce765877dd5.jpg" alt="imagem"><br><br>  Depois que terminei o firmware, o poder aumentou suavemente at√© um determinado n√≠vel.  E isso j√° elimina choques na transmiss√£o e carga nos n√≥s.  √â assim que uma linha do programa pode aumentar a vida √∫til da unidade. <br><br><h2>  Conectamos o controlador com o transistor corretamente </h2><br>  Restava apenas conectar corretamente o transistor ao controlador.  Fiz isso de maneira incorreta, diretamente, atrav√©s de um par √≥ptico.  Mas esse circuito rola quando se trabalha com baixas tens√µes, em altas tens√µes operacionais, o obturador do transistor queima constantemente, e √© necess√°rio um driver push-pull para controle.  O circuito normal √© mostrado abaixo.  No entanto, ao mesmo tempo, o circuito com um par √≥ptico foi suficiente, por algum milagre, funcionou para um test drive e come√ßou a queimar imediatamente depois dele.  Aqui est√° o diagrama do driver "correto", apenas na minha vers√£o ainda havia um desacoplamento √≥ptico do controlador.  Imagem tirada do Drive2: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/723/f64/92d/723f6492daa996d517a83d2ad563376e.jpg" alt="imagem"><br><br><h2>  Alguns pontos interessantes </h2><br><ul><li>  Ao dar partida, o motor el√©trico consome muitas vezes mais eletricidade, mesmo sem carga.  E quando o rotor freou durante o in√≠cio, as escovas de grafite come√ßaram a fumar. </li><li>  Nesse momento, quando o transistor queima na m√°quina - ele come√ßa a funcionar sozinho, porque apenas o transistor separa a bateria do motor.  Portanto, a introdu√ß√£o de esquemas de prote√ß√£o √© justificada se voc√™ n√£o quiser correr atr√°s do carro e rezar para que ele n√£o atinja ningu√©m. </li><li>  O motor que usei √© de uma m√°quina de lavar.  Rotatividade sem carga, ele alegou 14.000 - √© dif√≠cil de acreditar, mas esse n√∫mero estava na placa de identifica√ß√£o.  Embora ele puxe perfeitamente "do fundo". </li><li>  A tens√£o na bateria afunda, sem uma carga que eu tinha cerca de 150 volts, ela pode ser calmamente 140 sob carga.E se a bateria estiver muito baixa, ent√£o 130, por isso, o carro poder√° funcionar muito bem com baterias novas nos primeiros minutos, depois quando as baterias estiverem gastas algo em torno de 20 a 30% da energia, mais ou menos o modo de opera√ß√£o come√ßou, o carro dirigia mais devagar, acelerava mais devagar, mas n√£o era t√£o percept√≠vel.  Quando as baterias consumiram aproximadamente 70% da carga, o percurso se transformou em um curso de tartaruga. </li><li>  Eu at√© consegui gravar um transistor bastante poderoso devido √† sobretens√£o no obturador.  Para se proteger, √© necess√°rio desviar a porta do transistor com um diodo para a fonte de alimenta√ß√£o + do driver do transistor. </li><li>  Os rel√©s foram conectados ao MK usando comutadores de transistor de baixa pot√™ncia em pequenas pot√™ncias. </li></ul><br><h2>  No final, o que aconteceu no v√≠deo </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3tFyz7RdQ7k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Em geral, minhas experi√™ncias com o acionamento el√©trico come√ßaram na escola e eu tentei muitos projetos diferentes, mas esse √© o esquema mais bem-sucedido da √©poca.  Se voc√™ gosta do material, escreverei um post separado sobre todo o √©pico. <br><br>  UPD: Alterados os erros no artigo, obrigado a todos que responderam </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt473708/">https://habr.com/ru/post/pt473708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt473692/index.html">Ennoble Phicomm K3C Roteador Wi-Fi</a></li>
<li><a href="../pt473694/index.html">A R√∫ssia √© um centro global de desenvolvimento de CAD. Voc√™ sabia disso?</a></li>
<li><a href="../pt473702/index.html">O que √© sharding na blockchain terahash</a></li>
<li><a href="../pt473704/index.html">Bro vs. n√£o mano</a></li>
<li><a href="../pt473706/index.html">Zoia: CMS reativo leve para desenvolvimento r√°pido de sites</a></li>
<li><a href="../pt473710/index.html">Os princ√≠pios de documenta√ß√£o e localiza√ß√£o ou como obter uma boa localiza√ß√£o a um custo m√≠nimo</a></li>
<li><a href="../pt473714/index.html">Como cheguei √† especifica√ß√£o formal de um processador RISC-V em F #</a></li>
<li><a href="../pt473716/index.html">Widgets acionados por mouse. Arraste e solte dentro da janela</a></li>
<li><a href="../pt473718/index.html">Como adicionar cheques ao NoVerify sem escrever uma √∫nica linha de c√≥digo Go</a></li>
<li><a href="../pt473720/index.html">Duas maneiras de fazer testes de unidade confi√°veis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>