<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧕🏿 ⚪️ 🔴 كيف يبدو أرشيف الرمز البريدي وماذا يمكننا أن نفعل حيال ذلك 👨‍🏫 💄 📖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="يوم جيد يا عزيز هبر! 

 على مدى نصف العام الماضي ، قادني الطريق الملتوي لمشاريعي للحيوانات الأليفة إلى هذه الغابة ، حيث لا يزال من غير الممكن الخروج. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>كيف يبدو أرشيف الرمز البريدي وماذا يمكننا أن نفعل حيال ذلك</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471066/" style=";text-align:right;direction:rtl"> يوم جيد يا عزيز هبر! <br><br>  على مدى نصف العام الماضي ، قادني الطريق الملتوي لمشاريعي للحيوانات الأليفة إلى هذه الغابة ، حيث لا يزال من غير الممكن الخروج.  وقد بدأ كل شيء على نحو غير ضار - موقع يحتوي على صور ، ولكن إحساس بالكمال ، والسعي وراء الهدية الترويجية ، وكذلك بعض ميزات عقلي ، حولت هذا ، كما هو مخطط له في الأصل ، لمسافة صغيرة إلى رحلة طويلة حقيقية.  حسنًا ، حسنًا ، كما اعتاد المرء أن يقول ثوريًا: "تعلم ، ادرس ودرس مرة أخرى" ، وأنا ، ويلي ، نيلي ، يجب أن أتبع هذا النصح. <br><br>  أوه ، شيء كان يصرف انتباهنا عن الموضوع الرئيسي.  لن أتعرض لخطب مطولة بعد الآن ، لكنني سأذهب إلى العمل. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  إنشاء أرشيف مضغوط </h3><br>  من حيث المبدأ ، لن أعد كتابة <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">المواصفات</a> هنا.  على العموم ، لا معنى لوصف الهيكل أيضًا ، لأن كل هذا تم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">قبلي</a> . <br><br>  بالنسبة لأولئك الذين هم كسولون جدًا في متابعة الروابط ، سأشرح بإيجاز أن أي أرشيف مضغوط يجب أن يحتوي على: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إدخال الملف: <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  رأس الملف المحلي </li><li style=";text-align:right;direction:rtl">  بيانات مفيدة </li><li style=";text-align:right;direction:rtl">  واصف البيانات (اختياري ، يُستخدم عندما لا نعرف حجم الملف وتجزئته حتى نقرأه حتى النهاية) </li></ul></li><li style=";text-align:right;direction:rtl">  رأس ملف الدليل المركزي (لكل ملف. يشبه جدول محتويات كتاب ، حيث يشار إلى كل قسم والصفحة التي يمكن العثور عليها) </li><li style=";text-align:right;direction:rtl">  نهاية الدليل المركزي </li></ul><br>  مع العلم بذلك ، يمكننا محاولة كتابة أرشيف بسيط يحتوي على ملفين فقط: <br><br><pre style=";text-align:right;direction:rtl"><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//        (1.txt  2.txt)   : $entries = [ '1.txt' =&gt; 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc id ante ultrices, fermentum nibh eleifend, ullamcorper nunc. Sed dignissim ut odio et imperdiet. Nunc id felis et ligula viverra blandit a sit amet magna. Vestibulum facilisis venenatis enim sed bibendum. Duis maximus felis in suscipit bibendum. Mauris suscipit turpis eleifend nibh commodo imperdiet. Donec tincidunt porta interdum. Aenean interdum condimentum ligula, vitae ornare lorem auctor in. Suspendisse metus ipsum, porttitor et sapien id, fringilla aliquam nibh. Curabitur sem lacus, ultrices quis felis sed, blandit commodo metus. Duis tincidunt vel mauris at accumsan. Integer et ipsum fermentum leo viverra blandit.', '2.txt' =&gt; 'Mauris in purus sit amet ante tempor finibus nec sed justo. Integer ac nibh tempus, mollis sem vel, consequat diam. Pellentesque ut condimentum ex. Praesent finibus volutpat gravida. Vivamus eleifend neque sit amet diam scelerisque lacinia. Nunc imperdiet augue in suscipit lacinia. Curabitur orci diam, iaculis non ligula vitae, porta pellentesque est. Duis dolor erat, placerat a lacus eu, scelerisque egestas massa. Aliquam molestie pulvinar faucibus. Quisque consequat, dolor mattis lacinia pretium, eros eros tempor neque, volutpat consectetur elit elit non diam. In faucibus nulla justo, non dignissim erat maximus consectetur. Sed porttitor turpis nisl, elementum aliquam dui tincidunt nec. Nunc eu enim at nibh molestie porta ut ac erat. Sed tortor sem, mollis eget sodales vel, faucibus in dolor.', ]; //      Lorem.zip,      cwd (      ) $destination = 'Lorem.zip'; $handle = fopen($destination, 'w'); //      ,    ,     ,   "" Central Directory File Header $written = 0; $dictionary = []; foreach ($entries as $filename =&gt; $content) { //         Local File Header,     //        ,      . $fileInfo = [ //     'versionToExtract' =&gt; 10, //   0,        - 'generalPurposeBitFlag' =&gt; 0, //      ,    0 'compressionMethod' =&gt; 0, // -    mtime ,    ,      ? 'modificationTime' =&gt; 28021, //   , ? 'modificationDate' =&gt; 20072, //      .     ,       ,   ? 'crc32' =&gt; hexdec(hash('crc32b', $content)), //     .        . //       :) 'compressedSize' =&gt; $size = strlen($content), 'uncompressedSize' =&gt; $size, //    'filenameLength' =&gt; strlen($filename), //  .    ,   0. 'extraFieldLength' =&gt; 0, ]; //      . $LFH = pack('LSSSSSLLLSSa*', ...array_values([ 'signature' =&gt; 0x04034b50, //  Local File Header ] + $fileInfo + ['filename' =&gt; $filename])); //       ,       Central Directory File Header $dictionary[$filename] = [ 'signature' =&gt; 0x02014b50, //  Central Directory File Header 'versionMadeBy' =&gt; 798, //  .    ,  -  . ] + $fileInfo + [ 'fileCommentLength' =&gt; 0, //    . No comments 'diskNumber' =&gt; 0, //     0,        'internalFileAttributes' =&gt; 0, //    'externalFileAttributes' =&gt; 2176057344, //    'localFileHeaderOffset' =&gt; $written, //      Local File Header 'filename' =&gt; $filename, //  . ]; //      $written += fwrite($handle, $LFH); //    $written += fwrite($handle, $content); } // ,     ,    . //          End of central directory record (EOCD) $EOCD = [ //  EOCD 'signature' =&gt; 0x06054b50, //  .    ,   0 'diskNumber' =&gt; 0, //      -  0 'startDiskNumber' =&gt; 0, //       . 'numberCentralDirectoryRecord' =&gt; $records = count($dictionary), //    .    ,     'totalCentralDirectoryRecord' =&gt; $records, //   Central Directory Record. //      ,      'sizeOfCentralDirectory' =&gt; 0, // ,    Central Directory Records 'centralDirectoryOffset' =&gt; $written, //     'commentLength' =&gt; 0 ]; //     !   foreach ($dictionary as $entryInfo) { $CDFH = pack('LSSSSSSLLLSSSSSLLa*', ...array_values($entryInfo)); $written += fwrite($handle, $CDFH); } // ,   .  ,    $EOCD['sizeOfCentralDirectory'] = $written - $EOCD['centralDirectoryOffset']; //     End of central directory record $EOCD = pack('LSSSSLLS', ...array_values($EOCD)); $written += fwrite($handle, $EOCD); //  . fclose($handle); echo '  : ' . $written . ' ' . PHP_EOL; echo '     `unzip -tq ' . $destination . '`' . PHP_EOL; echo PHP_EOL;</span></span></code> </pre> <br>  حاول تشغيل هذا الكود البدائي وسوف يعطيك الإخراج ملف Lorem.zip الذي سيحتوي على 1.txt و 2.txt. <br><br><h3 style=";text-align:right;direction:rtl">  ولماذا؟ </h3><br>  بالطبع ، سيقول أي شخص مناسب أن كتابة الأرشيفات في php هي مهمة عقيمة ، خاصة وأن التنسيق مثل zip ، يوجد مجموعة من التطبيقات الجاهزة لكل الأذواق واللون.  وفي نفس php هناك مكتبات جاهزة.  سأقول ذلك أيضا :) <br><br>  لكن لماذا إذن ، هذا المقال برمته ، لماذا قضيت وقتاً في كتابته وأنت تقرأه؟ <br>  وبعد ذلك ، أن كل شيء ليس بهذه البساطة ومعرفة كيفية عمل الرمز البريدي ، يفتح لنا بعض الاحتمالات الإضافية. <br><br>  أولاً ، آمل ، قليلاً على الأقل ، لكنها ستساعد أولئك الذين يريدون فهم بنية الرمز البريدي. <br>  وثانيا ، إنشاء الأرشيف بأيدينا ، لدينا سيطرة ، والأهم من ذلك ، الوصول إلى بياناتها الداخلية. <br><br>  يمكننا احتساب "رأس الملف المحلي" و "رأس ملف الدليل المركزي" مسبقًا ، ثم إنشاء أرشيف مضغوط عند الطلب باستخدام أي محتوى وترتيب الملفات ، ببساطة استبدال هذه البيانات.  وليس النفقات العامة باستثناء I / O. <br><br>  أو ، يمكننا تسجيل الأرشيف ، وتحميله ، على سبيل المثال ، إلى السحابة ، التي تدعم التنزيل المجزأ ، ومعرفة الإزاحات لكل ملف ، الحصول على أي من ملفات الأرشيف ، كما لو لم يكن في الأرشيف على الإطلاق ، إضافة ملف واحد فقط عنوان الطلب.  ثم كل هذا يمكن أن يكون بروكسي و ... <br><br>  حسنًا ، دعونا لا نتقدم على أنفسنا.  إذا كنت مهتمًا بهذا الموضوع ، فسأحاول في المقالات التالية التفكير في هذه الفرص وإظهار كيفية استخدامها. <br><br><hr><blockquote style=";text-align:right;direction:rtl">  'diskNumber' =&gt; 0 ، // عادةً ما صادفت 0 في كل مكان ، وعلى وجه الخصوص قررت عدم الخوض في </blockquote>  كما اقترح <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">بيريز</a> ، رقم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">المجلد</a> في أرشيف متعدد المجلدات. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar471066/">https://habr.com/ru/post/ar471066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar471048/index.html">رد + Mobx: ما هي الفائدة؟</a></li>
<li><a href="../ar471050/index.html">تمويل تمويل تنمية صندوق D: منصات جديدة ومنح جديدة ...</a></li>
<li><a href="../ar471052/index.html">هل استطيع هاز؟ ضرب من قبل البرمجة النوع العام</a></li>
<li><a href="../ar471054/index.html">منذ فترة طويلة حول واقعية التهديد الكمومي للعملات المشفرة ومشاكل "نبوءة 2027"</a></li>
<li><a href="../ar471062/index.html">كيفية تعليم أليس لإدارة منزلك الذكي. تقرير ياندكس</a></li>
<li><a href="../ar471070/index.html">أي لغة الخادم لاختيار ... لمطور المحمول</a></li>
<li><a href="../ar471072/index.html">كم غرام في برقية؟</a></li>
<li><a href="../ar471074/index.html">Synet - إطار لإطلاق شبكات عصبية مدربة مسبقًا على وحدة المعالجة المركزية</a></li>
<li><a href="../ar471076/index.html">كيف خلقت المصفوفة إرث مضاد للرصاص</a></li>
<li><a href="../ar471078/index.html">سيقوم Chrome بحظر المحتوى المختلط تمامًا</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>