<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™üèΩ üë®üèΩ‚Äçüè≠ üë®üèΩ‚Äçüé§ Bloque or√°culo basado en or√°culo aleatorio basado en firma digital ‚õÑÔ∏è ‚õÑÔ∏è üë®üèª‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde la idea hasta la implementaci√≥n: modificamos el esquema de firma digital existente en una curva el√≠ptica para que sea determinista, y proporcion...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bloque or√°culo basado en or√°culo aleatorio basado en firma digital</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449340/"><p>  Desde la idea hasta la implementaci√≥n: modificamos el esquema de firma digital existente en una curva el√≠ptica para que sea determinista, y proporcionamos sobre su base las funciones de obtener n√∫meros pseudoaleatorios verificados dentro de la cadena de bloques. </p><br><p><img src="https://habrastorage.org/webt/iv/4j/ma/iv4jma5bmyktw3qm25amedvm17w.png"></p><a name="habracut"></a><br><h1 id="ideya">  Idea </h1><br><p>  En el oto√±o de 2018, los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primeros contratos inteligentes</a> se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">activaron en la</a> cadena de bloques Waves, de inmediato surgi√≥ la pregunta sobre la posibilidad de obtener <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">n√∫meros pseudoaleatorios en los</a> que pueda confiar. </p><br><p>  Rompiendo la cabeza sobre este problema, finalmente llegu√© a la conclusi√≥n: cualquier blockchain es una c√©lula, es imposible obtener una fuente confiable de entrop√≠a en un sistema cerrado. </p><br><p> Pero todav√≠a me gust√≥ una idea: si un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">or√°culo aleatorio</a> har√° que la firma de los datos del usuario sea un algoritmo determinista, el usuario siempre podr√° verificar dicha firma con la clave p√∫blica y se asegurar√° de que el valor recibido sea √∫nico.  El or√°culo, con todo el deseo, no tiene poder para cambiar nada, el algoritmo produce un resultado claro.  De hecho, el usuario captura el resultado, pero no lo sabe hasta que el or√°culo lo publica.  Resulta que no puedes confiar en el or√°culo en absoluto, pero verifica el resultado de su trabajo.  Luego, en el caso de una verificaci√≥n exitosa, dicha firma puede considerarse una fuente de entrop√≠a para un n√∫mero pseudoaleatorio. </p><br><p>  La plataforma de cadena de bloques Waves utiliza el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esquema de</a> firma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">EdDSA, una</a> variante de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ed25519</a> .  En este esquema, la firma consta de los valores de R y S, donde R depende de un valor aleatorio, y S se calcula sobre la base del mensaje que se firma, la clave privada y el mismo n√∫mero aleatorio que R. Resulta que no hay dependencia uno a uno para el mismo Un mensaje personalizado tiene muchas firmas v√°lidas. </p><br><p>  Obviamente, en su forma pura, dicha firma no puede usarse como fuente de n√∫meros pseudoaleatorios, ya que no es determinista y, por lo tanto, puede ser f√°cilmente manipulada por el or√°culo. </p><br><p>  Pero, como result√≥, es realmente posible determinarlo. </p><br><p>  Ten√≠a muchas esperanzas de una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funci√≥n aleatoria probada (VRF)</a> , pero despu√©s de estudiar el material, tuve que rechazar esta opci√≥n.  Aunque VRF ofrece una versi√≥n determinista de la firma y su prueba, el algoritmo tiene un lugar extra√±o que abre un agujero negro para manipular el or√°culo (esta es una declaraci√≥n falsa, ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Actualizaci√≥n</a> ).  Es decir, al calcular el valor de k ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secci√≥n 5.1</a> ), se usa una clave privada, que el usuario desconoce, entonces el usuario no puede verificar la exactitud del c√°lculo de k, entonces el or√°culo puede usar cualquier valor de k que necesite y al mismo tiempo mantener una base de datos de correspondencias k y los datos firmados para que Siempre podr√° recalcular el resultado correcto desde el punto de vista de VRF.  Ver√° un sorteo basado en VRF sin revelar la clave privada, puede pensar en ello: indique la necesidad o abra la clave, o excluya del c√°lculo de k, luego la clave privada se abrir√° autom√°ticamente cuando aparezca la primera firma.  En general, como ya se mencion√≥, un esquema extra√±o para un or√°culo aleatorio. </p><br><p>  Con un poco de reflexi√≥n y recabando el apoyo de analistas locales, naci√≥ el flujo de trabajo VECRO. </p><br><p>  VECRO es una abreviatura de Verificable Curva El√≠ptica Or√°culo Aleatorio, que en ruso significa un or√°culo aleatorio verificado en curvas el√≠pticas. </p><br><p>  Todo result√≥ ser bastante simple, para lograr el determinismo, es necesario fijar el valor de R antes de la aparici√≥n de un mensaje firmado.  Si R es fijo y es parte de un mensaje firmado, lo que adem√°s garantiza que R est√° fijo en el mensaje firmado en s√≠, el valor de S est√° determinado √∫nicamente por el mensaje del usuario y, por lo tanto, puede usarse como fuente de n√∫meros pseudoaleatorios. </p><br><p>  En tal esquema, no importa c√≥mo se arregle R, permanece en el √°rea de responsabilidad del or√°culo.  Es importante que el usuario determine √∫nicamente S, pero su valor se desconoce hasta que el or√°culo lo publica.  Todo lo que quisimos! </p><br><p>  Hablando de R fijo, tenga en cuenta que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">R reutilizado</a> al firmar varios mensajes revela de forma √∫nica la clave privada en el esquema EdDSA.  Para el propietario del or√°culo, se vuelve extremadamente importante excluir la posibilidad de reutilizar R para firmar diferentes mensajes de usuario.  Es decir, durante cualquier manipulaci√≥n o conspiraci√≥n, el or√°culo siempre correr√° el riesgo de perder su clave privada. </p><br><p>  En total, el or√°culo debe proporcionar a los usuarios dos funciones: inicializaci√≥n, que fija el valor de R, y una firma, que devuelve el valor de S. Adem√°s, el par R, S es una firma verificada regular de un mensaje de usuario que contiene un valor fijo de R y datos de usuario arbitrarios. </p><br><p>  Se puede argumentar que este esquema para blockchain no es m√°s que un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esquema</a> normal de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">compromiso-divulgaci√≥n</a> .  De hecho, s√≠, esa es ella.  Pero hay algunos matices.  En primer lugar, el or√°culo siempre funciona con la misma clave en todas las operaciones, por ejemplo, es conveniente usarlo en contratos.  En segundo lugar, existe el riesgo de perder la clave privada por el or√°culo debido a un comportamiento incorrecto, por ejemplo, el or√°culo le permite tomar muestras del resultado, luego es suficiente hacer solo dos pruebas para descubrir la clave privada y obtener acceso completo a la billetera.  En tercer lugar, la firma que se verifica de forma nativa en blockchain, que es una fuente de aleatoriedad, es hermosa. </p><br><p>  Durante medio a√±o, la idea de implementaci√≥n estuvo en mi cabeza, hasta que finalmente hubo una motivaci√≥n en forma de una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">subvenci√≥n de Waves Labs</a> .  Con una gran donaci√≥n, viene una gran responsabilidad, lo que significa que el proyecto debe ser. </p><br><h1 id="realizaciya">  Implementaci√≥n </h1><br><p>  Entonces, en este proyecto, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VECRO se implement√≥</a> en la cadena de bloques Waves en el modo de solicitud-respuesta utilizando transacciones de transferencia entre el usuario y el or√°culo.  Al mismo tiempo, se instala un script en la cuenta de Oracle que supervisa la operaci√≥n estrictamente de acuerdo con la l√≥gica descrita anteriormente.  Las transacciones de Oracle se verifican para restaurar toda la cadena de interacci√≥n del usuario.  Las cuatro transacciones participan en la verificaci√≥n del valor final, el contrato inteligente los coloc√≥ en un estricto hilo de verificaci√≥n, verificando paso a paso todos los valores y sin dejar espacio para ninguna manipulaci√≥n. </p><br><p>  Una vez m√°s, se pospondr√° y se har√° m√°s claro.  El or√°culo no solo funciona de acuerdo con el esquema propuesto.  Su trabajo est√° totalmente controlado a nivel de blockchain por un <a href="">contrato inteligente bien</a> establecido.  Un paso a la izquierda, y la transacci√≥n simplemente no funcionar√°.  Entonces, si la transacci√≥n cay√≥ en la cadena de bloques, el usuario ni siquiera necesita verificar nada, cientos de nodos de red ya lo han verificado todo. </p><br><p>  En este momento, un VECRO se est√° ejecutando en la red principal de Waves (puede ejecutar el suyo propio, no es dif√≠cil, solo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mire el ejemplo de configuraci√≥n</a> ).  El c√≥digo actual funciona en PHP (en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WavesKit</a> , del que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">habl√© anteriormente</a> ). </p><br><p>  Para utilizar el servicio Oracle debe: </p><br><ul><li>  Fix R; <br><ul><li>  Env√≠e un m√≠nimo de 0.005 Ondas al alias del or√°culo init @ vecr; </li><li>  Obtenga el c√≥digo R en el campo adjunto en la transferencia de 1 token R-vecr del or√°culo al usuario; </li></ul></li><li>  Consigue una firma <br><ul><li>  Env√≠e un m√≠nimo de 0.005 Ondas al alias del or√°culo random @ vecr, y SIEMPRE especifique el c√≥digo R recibido previamente y los datos adicionales del usuario en el campo adjunto; </li><li>  Obtenga el c√≥digo S en el campo adjunto en la transferencia de 1 token S-vecr del or√°culo al usuario; </li></ul></li><li>  Utilice el c√≥digo S como fuente de n√∫mero pseudoaleatorio. </li></ul><br><p>  Los matices de la implementaci√≥n actual: </p><br><ul><li>  Las ondas enviadas al or√°culo se utilizan como comisi√≥n para una transacci√≥n inversa para el usuario, hasta un m√°ximo de 1 ondas; </li><li>  El c√≥digo R es la concatenaci√≥n del byte del car√°cter 'R' y el valor de 32 bytes de R en la codificaci√≥n base58; </li><li>  El c√≥digo R en el archivo adjunto debe ser el primero, los datos del usuario vienen despu√©s del c√≥digo R; </li><li>  El c√≥digo S es la concatenaci√≥n del byte del car√°cter 'S' y el byte 32 del valor S en la codificaci√≥n base58; </li><li>  S es el resultado de la divisi√≥n del m√≥dulo; por lo tanto, S no puede usarse como un n√∫mero pseudoaleatorio completo de 256 bits (este n√∫mero puede considerarse un m√°ximo de un n√∫mero pseudoaleatorio de 252 bits); </li><li>  La opci√≥n m√°s simple es usar el hash del c√≥digo S como un n√∫mero pseudoaleatorio. </li></ul><br><p>  Un ejemplo de obtenci√≥n de c√≥digo S: </p><br><ul><li>  Inicializaci√≥n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://wavesexplorer.com/tx/8gc8jwM7JrPNehoDs7NVyos7BsufYktvkwVW1B6FAY6</a> </li><li>  Obtenci√≥n de c√≥digo R: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://wavesexplorer.com/tx/9eB25SbzEwvHEbm8pcKj7MGDrYv1u3Fxpj696FkJ96hd</a> </li><li>  Solicite el resultado de la firma del c√≥digo R y los datos del usuario "al azar": <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://wavesexplorer.com/tx/6faoFJobEsugDFYmYmfsbtQYABmckNuE2kevaLh7ifzz</a> </li><li>  Obteniendo c√≥digo S: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://wavesexplorer.com/tx/C5VrFLQcprbA1KXAToaNvMP4Kg2rq43NkwWuADAA7wXX</a> </li></ul><br><p>  Desde un punto de vista t√©cnico, el or√°culo est√° completamente listo para el trabajo, puede usarlo con seguridad.  Desde el punto de vista del uso por parte de un usuario com√∫n, una interfaz gr√°fica conveniente no es suficiente, esto tendr√° que esperar. </p><br><p>  Estar√© encantado de responder preguntas y aceptar comentarios, gracias. </p><br><h3 id="update-ot-8-maya-2019">  Actualizaci√≥n 8 de mayo de 2019 </h3><br><p>  Estaba equivocado acerca de VRF.  S√≠, de hecho, la firma ECVRF no se puede usar como fuente de un n√∫mero pseudoaleatorio, pero no se usa para este prop√≥sito.  Se necesita una firma para crear una prueba de la unicidad del valor Gamma ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secci√≥n 5.3</a> , paso 6).  Pero el valor Gamma verificado utilizando la firma ya est√° participando como fuente de un n√∫mero pseudoaleatorio ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">secci√≥n 5.2</a> , paso 5).  Gracias a Oleg Taraskin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Crittografo</a> por se√±alar en este punto, admito mi error.  ECVRF tiene todo el derecho a la vida. </p><br><p>  Desafortunadamente, todav√≠a no hay oportunidad de usar ECVRF en el nivel de cadena de bloques de Waves, debido a la falta del aparato matem√°tico necesario en los contratos inteligentes. </p><br><p>  Cuando esta funcionalidad o soporte RSA est√© disponible, puede escribir nuevos or√°culos.  En cuanto al esquema VECRO, en cualquier caso, ocupa su propio nicho y le permite trabajar sin ninguna funcionalidad adicional. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449340/">https://habr.com/ru/post/449340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449326/index.html">WebRTC y video vigilancia: c√≥mo vencimos el retraso del video de las c√°maras</a></li>
<li><a href="../449330/index.html">M√≥dulos √≥pticos coherentes CFP2-ACO / CFP2-DCO WDM (100G / 200G) y su aplicaci√≥n en sistemas DWDM</a></li>
<li><a href="../449334/index.html">C√≥mo la traducci√≥n t√©cnica se convierte en mini detective</a></li>
<li><a href="../449336/index.html">VIH: tratamientos desde el primer medicamento hasta hoy</a></li>
<li><a href="../449338/index.html">Julia Servicios web</a></li>
<li><a href="../449342/index.html">Or√°culo aleatorio basado en la firma digital blockchain</a></li>
<li><a href="../449344/index.html">Kodim - pizza</a></li>
<li><a href="../449346/index.html">MODX Digest # 4 (8 al 22 de abril de 2019)</a></li>
<li><a href="../449348/index.html">Buildroot - parte 2. Crear la configuraci√≥n de su placa; aplicaci√≥n de √°rbol externo, rootfs-overlay, scripts posteriores a la compilaci√≥n</a></li>
<li><a href="../449350/index.html">Keybase y verdadero TOFU</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>