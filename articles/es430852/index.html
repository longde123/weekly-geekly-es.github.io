<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèª üßúüèª üïë Consistencia y garant√≠as ACID en sistemas de almacenamiento distribuido üà∂ üòò üìΩÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los sistemas distribuidos se utilizan cuando existe una necesidad de escala horizontal para proporcionar indicadores de rendimiento incrementados de q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Consistencia y garant√≠as ACID en sistemas de almacenamiento distribuido</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/gridgain/blog/430852/">  Los sistemas distribuidos se utilizan cuando existe una necesidad de escala horizontal para proporcionar indicadores de rendimiento incrementados de que un sistema de escala vertical no es capaz de proporcionar el dinero adecuado. <br><br>  Al igual que la transici√≥n de un paradigma de un solo subproceso a un subproceso m√∫ltiple, la migraci√≥n a un sistema distribuido requiere una especie de inmersi√≥n y comprensi√≥n de c√≥mo funciona dentro, a lo que debe prestar atenci√≥n. <br><br>  Uno de los problemas que enfrenta una persona que quiere migrar un proyecto a un sistema distribuido o comenzar un proyecto en √©l es qu√© producto elegir. <br><br>  Nosotros, como empresa que "se comi√≥ un perro" en el desarrollo de sistemas de este tipo, ayudamos a nuestros clientes a tomar decisiones informadas en relaci√≥n con los sistemas de almacenamiento distribuido.  Tambi√©n estamos lanzando una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">serie de seminarios web</a> para una audiencia m√°s amplia que se centran en los principios b√°sicos en un lenguaje simple, y cualesquiera preferencias alimentarias espec√≠ficas ayudan a mapear caracter√≠sticas importantes para que sea m√°s f√°cil elegir. <br><br>  Este art√≠culo se basa en nuestros materiales sobre consistencia y garant√≠as de ACID en sistemas distribuidos. <br><a name="habracut"></a><br><h1>  ¬øQu√© es y por qu√© se necesita? </h1><br>  " <b>La</b> <b>consistencia de los</b> <b>datos</b> (a veces <i>la consistencia de los datos</i> ) es <i>la consistencia de los datos</i> entre s√≠, la integridad de los datos y la consistencia interna".  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> ) <br><br>  La coherencia implica que, en cualquier momento, las aplicaciones pueden estar seguras de que est√°n trabajando con la versi√≥n correcta y t√©cnicamente relevante de los datos, y pueden confiar en ellas al tomar decisiones. <br><br>  En los sistemas distribuidos, garantizar la coherencia es cada vez m√°s dif√≠cil y costoso, porque surgen una serie de nuevos desaf√≠os relacionados con el intercambio de red entre diferentes nodos, la posibilidad de falla de nodos individuales y, a menudo, la falta de una sola memoria que pueda servir para la verificaci√≥n. <br><br>  Por ejemplo, si tengo un sistema de 4 nodos: A, B, C y D, que sirve para transacciones bancarias, y los nodos C y D est√°n separados de A y B (por ejemplo, debido a problemas de red), es muy posible que ahora no Tengo acceso a parte de la transacci√≥n.  ¬øC√≥mo act√∫o en esta situaci√≥n?  Diferentes sistemas toman diferentes enfoques. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/8p/gw/lm8pgwmqnfcsp0uifu1hgiizhqg.png"></div><br>  En el nivel superior, hay 2 direcciones clave que se expresan en el teorema CAP. <br><br>  " <b>El teorema CAP</b> (tambi√©n conocido como <b>teorema de Brewer</b> ) es una declaraci√≥n heur√≠stica de que en cualquier implementaci√≥n de computaci√≥n distribuida es posible proporcionar no m√°s de dos de las siguientes tres propiedades: <br><br><ul><li>  consistencia de datos (consistencia inglesa): en todos los nodos de computaci√≥n en un punto en el tiempo, los datos no se contradicen entre s√≠; </li><li>  disponibilidad (disponibilidad ing.): cualquier solicitud a un sistema distribuido finaliza con una respuesta correcta, pero sin garantizar que las respuestas de todos los nodos del sistema coincidan; </li><li>  tolerancia de partici√≥n: dividir un sistema distribuido en varias secciones aisladas no genera una respuesta incorrecta de cada secci√≥n ". </li></ul><br>  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> ) <br><br>  Cuando el teorema CAP habla de consistencia, implica una definici√≥n bastante estricta, que incluye la linealizaci√≥n de registros y lecturas, y estipula solo consistencia al escribir valores individuales.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Martin Kleppman</a> ) <br><br>  El teorema de CAP dice que si queremos ser resistentes a los problemas de la red, en general debemos elegir sacrificar: consistencia o accesibilidad.  Tambi√©n hay una versi√≥n extendida de este teorema: PACELC ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> ), que adem√°s habla del hecho de que incluso en ausencia de problemas de red, debemos elegir entre velocidad de respuesta y consistencia. <br><br>  Y aunque, a primera vista, nativo del mundo de los DBMS cl√°sicos, parece que la elecci√≥n es obvia y la consistencia es lo m√°s importante que tenemos, esto est√° lejos de ser siempre el caso, lo que ilustra claramente el crecimiento explosivo de varios DBMS NoSQL que hicieron una elecci√≥n diferente y A pesar de esto, obtuvieron una gran base de usuarios.  Apache Cassandra con su famosa consistencia eventual es un buen ejemplo. <br><br>  Todo esto se debe al hecho de que esta es una <i>opci√≥n</i> que implica que sacrificamos algo, y no siempre estamos listos para sacrificarlo. <br><br>  A menudo, el problema de consistencia en los sistemas distribuidos se resuelve simplemente abandonando esta consistencia. <br><br>  Pero es necesario e importante comprender cu√°ndo es aceptable el rechazo de esta coherencia y cu√°ndo es un requisito comercial cr√≠tico. <br><br>  Por ejemplo, si dise√±o un componente que es responsable del almacenamiento de sesiones de usuario, aqu√≠, lo m√°s probable, la consistencia no es tan importante para m√≠, y la p√©rdida de datos no es cr√≠tica si ocurre solo en casos problem√°ticos, muy raramente.  Lo peor que suceder√° es que el usuario necesitar√° iniciar sesi√≥n, y para muchas empresas esto tendr√° poco efecto en su desempe√±o financiero. <br><br>  Si analizo el flujo de datos de los sensores, en muchos casos no es cr√≠tico para m√≠ perder parte de los datos y obtener un muestreo por un corto per√≠odo de tiempo, especialmente si finalmente veo los datos. <br><br>  Pero si hago un sistema bancario, la consistencia de las transacciones en efectivo es cr√≠tica para mi negocio.  Si acumul√© una multa en el pr√©stamo de un cliente debido al hecho de que simplemente no vi el pago realizado a tiempo, aunque √©l estaba en el sistema, esto es muy, muy malo.  Adem√°s, si el cliente puede retirar todo el dinero de mi tarjeta de cr√©dito varias veces, porque tuve problemas de red en el momento de la transacci√≥n, y la informaci√≥n de retiro no lleg√≥ a parte de mi grupo. <br><br>  Si realiza una compra costosa en una tienda en l√≠nea, no desea que se olvide su pedido, a pesar del informe de √©xito en la p√°gina web. <br><br>  Pero si opta por la coherencia, sacrifica la accesibilidad.  Y a menudo esto se espera, lo m√°s probable es que te hayas topado con esto personalmente m√°s de una vez. <br><br>  Es mejor si la cesta de la tienda en l√≠nea dice "intente m√°s tarde, un DBMS distribuido no est√° disponible" que si informa sobre el √©xito y olvida el pedido.  Es mejor obtener un rechazo en una transacci√≥n debido a la falta de disponibilidad de los servicios del banco que un golpe al √©xito y luego los procedimientos con el banco debido al hecho de que olvid√≥ que usted pag√≥ el pr√©stamo. <br><br>  Finalmente, si observamos el teorema PACELC extendido, entonces entendemos que incluso en el caso del funcionamiento regular del sistema, al elegir la consistencia, podemos sacrificar bajas latencias, obteniendo un nivel potencialmente m√°s bajo de rendimiento m√°ximo. <br><br>  Por lo tanto, respondiendo a la pregunta "¬øpor qu√© es esto necesario?": Es necesario si es fundamental para su tarea tener datos actualizados y consistentes, y la alternativa le traer√° p√©rdidas significativas mayores que la indisponibilidad temporal del servicio durante el per√≠odo del incidente o su menor rendimiento. <br><br><h1>  ¬øC√≥mo proporcionar esto? </h1><br>  En consecuencia, la primera decisi√≥n que debe tomar es d√≥nde se encuentra en el teorema CAP, si desea coherencia o disponibilidad en caso de un incidente. <br><br>  A continuaci√≥n, debe comprender en qu√© nivel desea realizar los cambios.  Quiz√°s solo tenga suficientes registros at√≥micos que afecten a un solo objeto, ya que MongoDB pudo y pudo (ahora lo extiende con soporte adicional para transacciones completas).  Perm√≠tame recordarle que el teorema CAP no dice nada sobre la consistencia de las operaciones de escritura que involucran m√∫ltiples objetos: el sistema bien puede ser CP (es decir, prefiere la consistencia de accesibilidad) y al mismo tiempo proporcionar solo registros at√≥micos √∫nicos. <br><br>  Si esto no es suficiente para usted, comenzamos a abordar el concepto de transacciones ACID distribuidas completas. <br><br>  Observo que incluso cuando nos mudamos al valiente y nuevo mundo de las transacciones de ACID distribuidas, a menudo tenemos que sacrificar algo.  Por ejemplo, varios sistemas de almacenamiento distribuido tienen transacciones distribuidas, pero solo dentro de una √∫nica partici√≥n.  O, por ejemplo, el sistema puede no admitir la parte "I" en el nivel que necesita, sin aislamiento o con un n√∫mero insuficiente de niveles de aislamiento. <br><br>  Estas restricciones a menudo se hicieron por alguna raz√≥n: ya sea para simplificar la implementaci√≥n o, por ejemplo, para mejorar el rendimiento o por otra cosa.  Son suficientes para una gran cantidad de casos, por lo que no debe considerarlos por s√≠ solos. <br><br>  Debe comprender si estas restricciones son un problema para su escenario espec√≠fico.  Si no, tiene m√°s opciones y puede dar m√°s peso, por ejemplo, a los indicadores de rendimiento o la capacidad del sistema para proporcionar tolerancia a desastres, etc.  Finalmente, no debemos olvidar que en varios sistemas estos par√°metros se pueden ajustar hasta el punto de que el sistema puede ser CP o AP dependiendo de la configuraci√≥n. <br><br>  Si nuestro producto pretende ser CP, entonces generalmente tiene un enfoque de qu√≥rum para la selecci√≥n de datos o nodos dedicados que son los principales propietarios de los registros, todos los cambios de datos pasan a trav√©s de ellos y, en caso de problemas de red, si estos nodos maestros no pueden proporcionar respuesta, se cree que los datos, en principio, no pueden obtenerse, o arbitraje, cuando un componente externo altamente accesible (por ejemplo, el cl√∫ster ZooKeeper) puede decir cu√°l de los segmentos del cl√∫ster es el principal, contiene la versi√≥n actual de los datos y puede atender eficientemente la solicitud  s. <br><br>  Finalmente, si estamos interesados ‚Äã‚Äãno solo en el CP, sino tambi√©n en el soporte de transacciones ACID distribuidas completas, a menudo se usa una sola fuente de verdad, por ejemplo, el almacenamiento centralizado en disco, donde nuestros nodos, de hecho, act√∫an solo como cach√©s, que pueden desactivarse en tiempo de confirmaci√≥n o se aplica el protocolo de confirmaci√≥n multifase. <br><br>  El primer enfoque de unidad √∫nica tambi√©n simplifica la implementaci√≥n, proporciona bajas latencias en las transacciones distribuidas, pero intercambia a cambio de una escalabilidad muy limitada en cargas con grandes vol√∫menes de grabaci√≥n. <br><br>  El segundo enfoque brinda mucha m√°s libertad en el escalado y, a su vez, se divide en protocolos de confirmaci√≥n de dos fases ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> ) y trif√°sicos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> ). <br><br>  Considere una confirmaci√≥n de dos fases que usa, por ejemplo, Apache Ignite. <br><br><img src="https://habrastorage.org/webt/ha/1a/qx/ha1aqxrjarg8g-x81wdn2i3xcoe.png"><br>  Ôøº <br>  El procedimiento de compromiso se divide en 2 fases: preparaci√≥n y compromiso. <br><br>  En la fase de preparaci√≥n, se prepara un mensaje sobre la preparaci√≥n para el compromiso, y cada participante, si es necesario, realiza un bloqueo, realiza todas las operaciones hasta el compromiso real e incluye el env√≠o, y env√≠a la preparaci√≥n a sus r√©plicas, si el producto lo asume.  Si al menos uno de los participantes respondi√≥ con una negativa por alg√∫n motivo o result√≥ no estar disponible, los datos no cambiaron realmente, no hubo compromiso.  Los participantes revierten los cambios, liberan bloqueos y vuelven a su estado original. <br><br>  En la fase de confirmaci√≥n, la ejecuci√≥n real de la confirmaci√≥n se env√≠a a los nodos del cl√∫ster.  Si por alguna raz√≥n algunos de los nodos no estaban disponibles o respondieron con un error, entonces para ese momento los datos se ingresaron en su redo-log (ya que la preparaci√≥n fue exitosa), y la confirmaci√≥n en cualquier caso puede completarse al menos en un estado pendiente. <br><br>  Finalmente, si el coordinador falla, en la etapa de preparaci√≥n se cancelar√° la confirmaci√≥n, en la etapa de confirmaci√≥n se puede seleccionar un nuevo coordinador, y si todos los nodos han completado la preparaci√≥n, puede verificar y asegurarse de que la etapa de confirmaci√≥n se haya completado. <br><br>  Los diferentes productos tienen sus propias caracter√≠sticas de implementaci√≥n y optimizaci√≥n.  Entonces, por ejemplo, algunos productos pueden en algunos casos reducir un compromiso de 2 fases a un compromiso de 1 fase, ganando significativamente en rendimiento. <br><br><h1>  Conclusiones </h1><br>  Conclusi√≥n clave: los sistemas de almacenamiento distribuido son un mercado bastante desarrollado, y los productos en √©l pueden proporcionar una alta consistencia de datos. <br><br>  Adem√°s, los productos de esta categor√≠a se ubican en diferentes puntos de la escala de consistencia, desde productos totalmente AP sin ninguna transaccionalidad hasta productos CP que adem√°s proporcionan transacciones ACID completas.  Algunos productos se pueden configurar de una forma u otra. <br><br>  Cuando elige lo que necesita, debe tener en cuenta las necesidades de su caso y comprender bien qu√© sacrificios y compromisos est√° dispuesto a hacer, porque nada sucede de forma gratuita, y al elegir uno, lo m√°s probable es que rechace otra cosa. <br><br>  Al evaluar productos desde este lado, vale la pena prestar atenci√≥n a lo siguiente: <br><br><ul><li>  donde est√°n en el teorema CAP; </li><li>  ¬øSoportan transacciones distribuidas de ACID? </li><li>  qu√© restricciones imponen a las transacciones distribuidas (por ejemplo, solo dentro de una √∫nica partici√≥n, etc.); </li><li>  Conveniencia y eficiencia del uso de transacciones distribuidas, su integraci√≥n en otros componentes del producto. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430852/">https://habr.com/ru/post/es430852/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430840/index.html">¬øQu√© evidencia puede convencer a los matem√°ticos si no hay evidencia rigurosa?</a></li>
<li><a href="../es430842/index.html">Utilizamos blockchain para combatir la corrupci√≥n y el ciberacoso</a></li>
<li><a href="../es430844/index.html">C√≥mo elegir una bater√≠a para UPS</a></li>
<li><a href="../es430846/index.html">Novedades: se conocieron detalles sobre la implementaci√≥n de la nueva arquitectura Zen 2</a></li>
<li><a href="../es430850/index.html">Apple Metal en MAPS.ME</a></li>
<li><a href="../es430854/index.html">"JS se est√° volviendo m√°s maduro": una entrevista con el comit√© del programa HolyJS 2018 Mosc√∫</a></li>
<li><a href="../es430856/index.html">Toda la verdad sobre RTOS. Art√≠culo # 21. Buzones: Introducci√≥n y servicios b√°sicos</a></li>
<li><a href="../es430860/index.html">Descargar, guardar y ver PDF en Swift</a></li>
<li><a href="../es430862/index.html">"Monstruos en los juegos: c√≥mo hacer que un jugador te odie"</a></li>
<li><a href="../es430864/index.html">Los partidos no son un juguete?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>