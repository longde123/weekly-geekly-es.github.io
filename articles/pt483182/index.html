<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜòÔ∏è üìì üë¶üèæ Cinco maneiras interessantes de usar Array.reduce () (e uma maneira chata) üïß üöî ü§õüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! Apresento a voc√™ a tradu√ß√£o do artigo "Cinco maneiras interessantes de usar Array.reduce () (e uma maneira chata)", de Chris Ferdinandi. 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cinco maneiras interessantes de usar Array.reduce () (e uma maneira chata)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483182/"><p>  Ol√° Habr!  Apresento a voc√™ a tradu√ß√£o do artigo <a href="https://24ways.org/2019/five-interesting-ways-to-use-array-reduce/" rel="nofollow">"Cinco maneiras interessantes de usar Array.reduce () (e uma maneira chata)",</a> de Chris Ferdinandi. </p><br><p>  De todos os m√©todos modernos de trabalhar com matrizes, o mais dif√≠cil de tudo que eu tinha que usar era Array.reduce (). </p><br><p>  √Ä primeira vista, parece ser um m√©todo simples e chato que faz pouco.  Mas, apesar de sua apar√™ncia modesta, Array.reduce () √© uma adi√ß√£o poderosa e flex√≠vel ao seu conjunto de ferramentas de desenvolvedor. </p><br><p>  Hoje, vamos ver algumas coisas interessantes que voc√™ pode fazer com Array.reduce (). </p><a name="habracut"></a><br><h4>  Como o Array.reduce () funciona </h4><br><p>  Os m√©todos mais modernos de matriz retornam uma nova matriz.  O m√©todo Array.reduce () √© um pouco mais flex√≠vel.  Ele pode devolver qualquer coisa.  Seu objetivo √© pegar uma matriz e compactar seu conte√∫do em um valor. </p><br><p>  Este valor pode ser um n√∫mero, uma sequ√™ncia ou at√© um objeto ou uma nova matriz.  Esta √© a parte que sempre me confundiu - eu n√£o entendia o qu√£o flex√≠vel √©! </p><br><h4>  Sintaxe </h4><br><p>  Array.reduce () usa dois argumentos: o m√©todo de retorno de chamada, executado para iniciar cada elemento na matriz, e o valor inicial initialValue. </p><br><p> O retorno de chamada tamb√©m recebe dois argumentos: acumulador, que √© o valor combinado atual, e o item atual no loop currentValue.  Tudo o que voc√™ retorna √© usado como um acumulador para o pr√≥ximo elemento no loop.  O primeiro loop usa o valor inicial. </p><br><pre><code class="plaintext hljs">var myNewArray = [].reduce(function (accumulator, current) { return accumulator;}, starting); }, starting);</code> </pre> <br><p>  Vejamos alguns exemplos. </p><br><pre> <code class="plaintext hljs">var myNewArray = [].reduce(function (accumulator, current) { return accumulator;}, starting);</code> </pre> <br><p>  <strong>1. Soma dos n√∫meros</strong> </p><br><p>  Suponha que voc√™ tenha uma matriz de n√∫meros que deseja adicionar.  Usando Array.forEach (), podemos fazer algo assim: </p><br><pre> <code class="plaintext hljs">var total = 0; [1, 2, 3].forEach(function (num) { total += num; });</code> </pre> <br><p>  Este √© um exemplo de clich√™ para usar Array.reduce ().  A palavra "acumulador" √© confusa; portanto, neste exemplo, a chamaremos de "soma" porque √© o que √© inerentemente. </p><br><pre> <code class="plaintext hljs">var total = [1, 2, 3].reduce(function (sum, current) { return sum + current; }, 0);    0    .</code> </pre> <br><p>  No retorno de chamada, adicionamos o valor atual √† soma que tem um valor inicial de 0 no primeiro ciclo, depois 1 (valor inicial 0 mais valor do elemento 1), depois 3 (valor total 1 mais valor do elemento 2) e assim por diante. <br>  <a href="https://codepen.io/cferdinandi/pen/drJOOB" rel="nofollow">Um exemplo</a> </p><br><p>  <strong>2. Uma alternativa para combinar os m√©todos de matriz Array.map () e Array.filter () em uma √∫nica etapa</strong> </p><br><p>  Imagine que existem muitos magos em Hogwarts. </p><br><pre> <code class="plaintext hljs">var wizards = [ { name: 'Harry Potter', house: 'Gryfindor' }, { name: 'Cedric Diggory', house: 'Hufflepuff' }, { name: 'Tonks', house: 'Hufflepuff' }, { name: 'Ronald Weasley', house: 'Gryfindor' }, { name: 'Hermione Granger', house: 'Gryfindor' }];</code> </pre> <br><p>  Queremos criar uma nova matriz que contenha apenas os nomes dos mestres do Hufflepuff.  Uma maneira de fazer isso √© usar o m√©todo Array.filter () para recuperar apenas os assistentes que possuem uma propriedade Hufflepuff em casa.  Em seguida, usamos o m√©todo Array.map () para criar uma nova matriz contendo apenas a propriedade name para os demais mestres. </p><br><pre> <code class="plaintext hljs">//      var hufflepuff = wizards.filter(function (wizard) { return wizard.house === 'Hufflepuff'; }).map(function (wizard) { return wizard.name; });</code> </pre> <br><p>  Usando o m√©todo Array.reduce (), voc√™ pode obter a mesma matriz em uma passagem, o que melhorar√° nosso desempenho.  Passamos uma matriz vazia ([]) como o valor inicial.  A cada passagem, verificamos se wizard.house √© uma Lufa-Lufa.  Nesse caso, envie-o para newArr (nosso acumulador neste exemplo).  Caso contr√°rio, n√£o fa√ßa nada. </p><br><p>  De qualquer forma, retorne newArr para obter o acumulador na pr√≥xima passagem. </p><br><pre> <code class="plaintext hljs">//      var hufflepuff = wizards.reduce(function (newArr, wizard) { if (wizard.house === 'Hufflepuff') { newArr.push(wizard.name); } return newArr; }, []);</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/jJYVyL" rel="nofollow">Um exemplo</a> </p><br><p>  <strong>Criar marca√ß√£o a partir de uma matriz</strong> </p><br><p>  E se, em vez de criar uma matriz de nomes, quisermos criar uma lista n√£o ordenada de mestres no Hufflepuff?  Em vez de uma matriz vazia em Array.reduce () como nosso valor inicial, passe uma string vazia ('') e chame-a de html. </p><br><p>  Se wizard.house for igual a Hufflepuff, combinamos nossa string html com wizard.name agrupado nos elementos da lista de abertura e fechamento (li).  Em seguida, retorne o HTML como acumulador no pr√≥ximo loop. </p><br><pre> <code class="plaintext hljs">//      var hufflepuffList = wizards.reduce(function (html, wizard) { if (wizard.house === 'Hufflepuff') { html += '&lt;li&gt;' + wizard.name + '&lt;/li&gt;'; } return html; }, '');</code> </pre> <br><p>  Adicione o item de lista desordenado de abertura e fechamento antes e depois de Array.reduce ().  Agora voc√™ est√° pronto para adicionar marca√ß√£o ao DOM. </p><br><pre> <code class="plaintext hljs">//      var hufflepuffList = '&lt;ul&gt;' + wizards.reduce(function (html, wizard) { if (wizard.house === 'Hufflepuff') { html += '&lt;li&gt;' + wizard.name + '&lt;/li&gt;'; } return html; }, '') + '&lt;/ul&gt;';</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/oNgYRZZ" rel="nofollow">Um exemplo</a> </p><br><p>  <strong>4. Agrupando elementos semelhantes em uma matriz</strong> </p><br><p>  A biblioteca <a href="https://lodash.com/" rel="nofollow">lodash</a> possui um m√©todo <a href="" rel="nofollow">groupBy ()</a> que pega uma cole√ß√£o de elementos como uma matriz e os agrupa em um objeto com base em alguns crit√©rios. </p><br><p>  Digamos que precisamos de uma matriz de n√∫meros. </p><br><p>  Se quisermos agrupar todos os elementos em n√∫meros pelo valor inteiro, isso deve ser feito usando lodash. </p><br><pre> <code class="plaintext hljs">var numbers = [6.1, 4.2, 6.3]; // returns {'4': [4.2], '6': [6.1, 6.3]} _.groupBy(numbers, Math.floor);</code> </pre> <br><p>  Se houver uma matriz de palavras e voc√™ precisar agrupar os elementos nas palavras pelo comprimento, far√≠amos isso. </p><br><pre> <code class="plaintext hljs">var words = ['one', 'two', 'three']; // returns {'3': ['one', 'two'], '5': ['three']} _.groupBy(words, 'length');</code> </pre> <br><p>  <strong>Criando uma fun√ß√£o groupBy () usando Array.reduce ()</strong> </p><br><p>  Voc√™ pode recriar a mesma funcionalidade usando o m√©todo Array.reduce (). </p><br><p>  Criamos uma fun√ß√£o auxiliar groupBy (), que utiliza uma matriz e crit√©rios para classificar como argumentos.  Dentro de groupBy (), executaremos Array.reduce () para nossa matriz, passando um objeto vazio ({}) como ponto de partida e retornando o resultado. </p><br><pre> <code class="plaintext hljs">var groupBy = function (arr, criteria) { return arr.reduce(function (obj, item) { // Some code will go here... }, {}); };</code> </pre> <br><p>  Dentro de Array.reduce (), chamamos a fun√ß√£o de retorno de chamada para verificar se o crit√©rio √© uma fun√ß√£o aplicada a um elemento ou uma propriedade de um elemento.  Ent√£o obtemos seu valor do elemento atual. </p><br><p>  Se o objeto ainda n√£o tiver uma propriedade com esse valor, crie-o [property] e atribua uma matriz vazia como seu valor.  Por fim, adicione um elemento a essa propriedade e retorne o objeto como um acumulador para o pr√≥ximo ciclo. </p><br><pre> <code class="plaintext hljs">var groupBy = function (arr, criteria) { return arr.reduce(function (obj, item) { //   ,        //  var key = typeof criteria === 'function' ? criteria(item) : item[criteria]; //    ,  . if (!obj.hasOwnProperty(key)) { obj[key] = []; } //     obj[key].push(item); //      return obj; }, {});};</code> </pre> <br><p>  Demonstra√ß√£o de uma fun√ß√£o auxiliar conclu√≠da. </p><br><p>  Agradecimentos especiais a <a href="https://tbremer.com/" rel="nofollow">Tom Bremer</a> por sua ajuda.  Essa fun√ß√£o auxiliar e muito mais podem ser encontradas no <a href="https://vanillajstoolkit.com/" rel="nofollow">Vanilla JS Toolkit</a> . </p><br><p>  <strong>5. Combinando dados de duas fontes em uma matriz</strong> </p><br><p>  Lembre-se de nossa lista de assistentes. </p><br><pre> <code class="plaintext hljs">var wizards = [ { name: 'Harry Potter', house: 'Gryfindor' }, { name: 'Cedric Diggory', house: 'Hufflepuff' }, { name: 'Tonks', house: 'Hufflepuff' }, { name: 'Ronald Weasley', house: 'Gryfindor' }, { name: 'Hermione Granger', house: 'Gryfindor' }];</code> </pre> <br><p>  E se houvesse um conjunto de dados diferente - um objeto com uma casa e pontos ganhos por cada m√°gico. </p><br><pre> <code class="plaintext hljs">var points = { HarryPotter: 500, CedricDiggory: 750, RonaldWeasley: 100, HermioneGranger: 1270 };</code> </pre> <br><p>  Imagine que queremos combinar os dois conjuntos de dados em uma matriz com o n√∫mero de pontos adicionados aos dados de cada assistente na matriz de assistentes.  Como fazer isso? </p><br><p>  O m√©todo Array.reduce () √© perfeito para isso! </p><br><pre> <code class="plaintext hljs">var wizardsWithPoints = wizards.reduce(function (arr, wizard) { //     points,     // var key = wizard.name.replace(' ', ' '); //     ,  , //   0. if (points[key]) { wizard.points = points[key]; } else { wizard.points = 0; } //   wizard   . arr.push(wizard); //  . return arr; }, []);</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/RwNoXEo" rel="nofollow">Um exemplo de combina√ß√£o de dados de duas fontes em uma matriz</a> . </p><br><p>  <strong>6. Combinando dados de duas fontes em um objeto</strong> </p><br><p>  E se, em vez disso, for necess√°rio combinar as duas fontes de dados em um objeto no qual o nome de cada assistente seja a chave e a casa e os √≥culos sejam propriedades?  Novamente, o m√©todo Array.reduce () √© perfeito para isso. </p><br><pre> <code class="plaintext hljs">var wizardsAsAnObject = wizards.reduce(function (obj, wizard) { //      points,     // var key = wizard.name.replace(' ', ' '); //     ,  , //   0. if (points[key]) { wizard.points = points[key]; } else { wizard.points = 0; } //   name delete wizard.name; //   wizard    obj[key] = wizard; //   return obj; }, {});</code> </pre> <br><p>  <a href="https://codepen.io/cferdinandi/pen/bGNBXZL" rel="nofollow">Um exemplo de combina√ß√£o de dados de duas fontes em um objeto</a> . </p><br><p>  <strong>Devo usar Array.reduce ()?</strong> </p><br><p>  O m√©todo Array.reduce () evoluiu de sem sentido para o meu m√©todo JavaScript favorito.  Ent√£o vale a pena us√°-lo?  E quando? </p><br><p>  O m√©todo Array.reduce () possui um suporte fant√°stico ao navegador.  Ele funciona em todos os navegadores modernos e no IE9.  H√° muito que √© suportado por navegadores m√≥veis.  Se precisar de mais, voc√™ pode adicionar um polyfill para retornar o suporte no IE6. </p><br><p>  O problema mais s√©rio pode ser que o Array.reduce () seja confuso para pessoas que nunca o encontraram [m√©todo] antes.  A combina√ß√£o dos m√©todos Array.filter () com Array.map () √© mais lenta e envolve etapas adicionais, mas √© mais f√°cil de ler.  Os nomes dos m√©todos mostram o que eles devem fazer. </p><br><p>  Como j√° mencionado, o m√©todo Array.reduce (), em geral, simplifica coisas mais complexas.  Um bom exemplo √© a fun√ß√£o auxiliar groupBy (). </p><br><p>  Por fim, essa √© outra ferramenta para o seu kit de ferramentas.  Uma ferramenta que, se usada corretamente, pode fornecer superpot√™ncias. </p><br><h4 id="ob-avtore">  Sobre o autor </h4><br><p>  Chris Ferdinandi ajuda as pessoas a aprender baunilha JavaScript.  Ele acredita que existe uma maneira mais simples e confi√°vel de fazer as coisas pela Internet. </p><br><p>  Chris √© o autor da s√©rie <a href="https://vanillajsguides.com/" rel="nofollow">Vanilla JS Pocket Guide</a> , criador do curr√≠culo da <a href="https://vanillajsacademy.com/" rel="nofollow">Vanilla JS Academy</a> e apresentador do <a href="https://vanillajspodcast.com/" rel="nofollow">Podcast Vanilla JS</a> .  Seu <a href="https://gomakethings.com/" rel="nofollow">boletim informativo para desenvolvedores √©</a> lido por milhares de desenvolvedores todos os dias da semana. </p><br><p>  Ele treinou desenvolvedores em organiza√ß√µes como Chobani e Boston Globe, e seus plugins JavaScript foram usados ‚Äã‚Äãpela Apple e pela Harvard Business School.  Chris Coyer, fundador do CSS-Tricks e CodePen, descreveu seu trabalho como "infinitamente citado". </p><br><p>  Chris adora piratas, filhotes e filmes da Pixar, e tamb√©m vive perto de fazendas de cavalos no interior de Massachusetts.  Ele lidera o <a href="https://gomakethings.com/" rel="nofollow">Go Make Things</a> com um filhote de cachorro Bailey. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483182/">https://habr.com/ru/post/pt483182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483170/index.html">Banco de dados do Messenger (parte 2): dividimos "lucro"</a></li>
<li><a href="../pt483172/index.html">Como localizar um aplicativo ou jogo? Dez principais fontes gratuitas de e-learning</a></li>
<li><a href="../pt483174/index.html">Grave e transfira som de um dispositivo para outro usando a conectividade de v√°rios usu√°rios</a></li>
<li><a href="../pt483176/index.html">Banco de dados do Messenger (parte 1): projetamos o quadro base</a></li>
<li><a href="../pt483178/index.html">Aqui est√° uma atualiza√ß√£o sobre o Flutter 1.9, juntamente com a programa√ß√£o do Dart 2.5</a></li>
<li><a href="../pt483184/index.html">Atualiza√ß√£o autom√°tica de c√≥digo para o TensorFlow 2</a></li>
<li><a href="../pt483186/index.html">Apresentando o Java 13: Vamos mergulhar nos novos recursos do JDK</a></li>
<li><a href="../pt483190/index.html">Respostas do suporte t√©cnico da 3CX: Atualize para o 3CX v16 de vers√µes anteriores</a></li>
<li><a href="../pt483194/index.html">Bot para taxas. Ir ao futebol com novas tecnologias</a></li>
<li><a href="../pt483198/index.html">Como o Alibaba Cloud gerencia dezenas de milhares de clusters do Kubernetes com ... Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>