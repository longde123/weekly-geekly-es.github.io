<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚢 🧘🏾 👵🏿 Préstamo de auto usado en 1 minuto 💅🏽 🍱 🌑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En lugar de presentar 


 Como todas las historias interesantes, esta comenzó hace mucho tiempo e inesperadamente. Una vez que nuestro banco asociado ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Préstamo de auto usado en 1 minuto</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kolesa/blog/431342/"><p><img src="https://habrastorage.org/webt/sb/mw/tr/sbmwtrme9nvzfag22j8cxpouqzk.jpeg"></p><br><h2 id="vmesto-vvedeniya">  En lugar de presentar </h2><br><p>  Como todas las historias interesantes, esta comenzó hace mucho tiempo e inesperadamente.  Una vez que nuestro banco asociado se nos acercó y dijo: “Chicos, aprendimos a hacer puntajes en nuestro sistema en un minuto.  ¿Qué hay de unir fuerzas e integrar proyectos?  Con nosotros, una decisión y un crédito, con usted, automóviles ".  Decir que fuimos inspirados, ¡sin decir nada!  ¡Tuvimos todas las posibilidades de convertirnos en los primeros casi en el mundo que pueden otorgar un préstamo en línea para un automóvil usado en un minuto (UN MINUTO, CARL)!  A continuación, le diré lo que surgió, pero primero le diré quiénes somos, de hecho, NOSOTROS. <a name="habracut"></a></p><br><p><img src="https://habrastorage.org/webt/n7/t5/sl/n7t5sljpvereqprdx0rbocrdm84.jpeg"></p><br><p>  Somos "Ruedas |  Techo |  Market "es la mayor empresa de TI con sede en Kazajstán.  Todos los días, nuestros productos ayudan a seis millones de kazajos a comprar y vender automóviles, apartamentos, cunas y miles de otras cosas.  Kolesa.kz es el recurso y la aplicación automotriz más grande; ya lleva varios años ocupando el primer lugar en la calificación móvil de Kazajstán. </p><br><h2 id="chto-iz-sebya-predstavlyaet-proekt-avtokredit">  ¿Qué es el proyecto "Préstamo de automóvil"? </h2><br><p>  Por el momento, la base de autos usados ​​es 103,400 autos, ¡más del 60% de ellos están disponibles a crédito! </p><br><div class="spoiler">  <b class="spoiler_title">Como se ve en las fotos</b> <div class="spoiler_text"><h3 id="1-vybiraem-mashinu-kotoruyu-hotim-vzyat-v-kredit">  1. Elija el auto que queremos llevar a crédito </h3><br><p><img src="https://habrastorage.org/webt/j6/ft/id/j6ftidhsd9nk8dsrqghfo5jyfes.png"></p><br><p>  <em>Figura 1. Resultados de búsqueda de automóviles disponibles a crédito</em> </p><br><h3 id="2-na-stranice-obyavleniya-vidim-formu-dlya-podachi-zayavki-na-kredit">  2. En la página de anuncios, vemos un formulario para solicitar un préstamo. </h3><br><p><img src="https://habrastorage.org/webt/qo/ja/cr/qojacrzpfgmut_8xd7-nlbcr-1s.png">  <em>Figura 2. Pantalla de la página de anuncios</em> </p><br><h3 id="3-vybiraem-period-i-pervonachalnyy-vznos-i-nazhimaem-poluchit-odobrenie">  3. Seleccione el período y el pago inicial y haga clic para obtener la aprobación </h3><br><p><img src="https://habrastorage.org/webt/yd/ve/ol/ydveol7jxtupaoguc81pyowbsmc.png"><br>  <em>Figura 3. Calculadora de crédito para el anuncio.</em> </p><br><h3 id="4-popadaem-na-formu-gde-nam-nuzhno-vvesti-svoi-kontaktnye-dannye">  4. Llegamos al formulario donde necesitamos ingresar nuestros datos de contacto </h3><br><p><img src="https://habrastorage.org/webt/sq/sk/zj/sqskzj6wk-zophmc7dibyd1teys.png"><br>  <em>Figura 4. Formulario de inicialización de una solicitud de préstamo</em> </p><br><p>  Aquí ingresamos su número de teléfono móvil Nombre e IIN (en Rusia sería un TIN) </p><br><h3 id="5-dalee-vam-neobhodimo-vvesti-kod-sms-kotoryy-pridyot-na-ukazannyy-vami-nomer">  5. Luego, debe ingresar el código de SMS que llegará a su número </h3><br><p><img src="https://habrastorage.org/webt/od/ey/kc/odeykcr1vtkveylifnf6oza8xxm.png"><br>  <em>Figura 5. Formulario de confirmación de número de teléfono ingresando SMS</em> </p><br><h3 id="6-posle-etogo-nachinaetsya-sam-process-skoringa-kotoryy-dlitsya-ne-bolee-1-minuty">  6. Después de eso, comienza el proceso de puntuación en sí, que no dura más de 1 minuto </h3><br><p><img src="https://habrastorage.org/webt/9s/po/6s/9spo6soaw7vjupijhkpfnehkdyq.png">  <em>Figura 6. Pantalla para el proceso de puntuación de la aplicación</em> </p><br><h3 id="7-est-neskolko-variantov-rezultata-skoringa">  7. Hay varias opciones para calificar resultados: </h3><br><ol><li>  Apruebas un préstamo </li><li>  Se le niega un préstamo. </li><li>  Se le ofrecen condiciones alternativas. </li><li>  Se le solicita información adicional, después de lo cual recibe una de las opciones anteriores (a, b, c) </li></ol><br><p><img src="https://habrastorage.org/webt/7s/ba/d_/7sbad_bmbosrd4kcgdt4wa65884.png"><br>  <em>Figura 7. Ejemplo de una pantalla de aprobación de préstamo automático</em> </p><br><p>  Después de que una persona recibe la aprobación de su solicitud, el gerente del banco le devuelve la llamada dentro de los 10 minutos y le informa qué medidas debe tomar a continuación para obtener un préstamo.  Conveniente, ¿no es así?  Veamos cómo se implementó todo. </p></div></div><br><h2 id="ty-pomnish-kak-vsyo-nachinalos">  ¿Recuerdas cómo empezó todo ... </h2><br><p>  ¡Todo fue por primera vez y otra vez!  Si antes teníamos un formulario de comentarios como un formulario de crédito, entonces nuestra nueva idea era algo completamente nuevo e incomprensible.  Porque  No teníamos análogos, teníamos una tarea muy emocionante por delante: planificar, diseñar, distribuir e implementar.  Para empezar, dividimos todo el proceso de nuestra integración conjunta en 2 bloques, que se llevaron a cabo en paralelo, a saber: </p><br><ul><li>  Integración de infraestructura </li><li><p>  Integración de software </p><br><p>  Inicialmente, acordamos con el banco asociado que él (el banco asociado) nos proporcionará algún tipo de API, a la que enviaremos algunos datos y recibiremos algunas respuestas.  Se decidieron por eso.  ¡Comenzamos a esperar la documentación API del banco, reunimos a nuestros ingenieros de red y a nosotros!  En términos de integración de software, surgió un esquema bastante simple, enviamos datos al banco, el banco los desplaza en su sistema y nos los devuelve, y todo esto durante 60 segundos garantizados.  En caso de un tiempo de espera (donde podría ser sin esto), acordamos mostrar un cuestionario de emergencia, en el que obtenemos datos que el banco puede necesitar adicionalmente. </p><br></li></ul><br><h3 id="seti">  Redes </h3><br><p>  En ese momento, mientras los desarrolladores elegían las herramientas para la implementación, diseñaban su sistema y esperaban la documentación del sistema asociado, ¡el trabajo en el departamento de infraestructura ya estaba en su apogeo!  Mi banco asociado y yo teníamos dos: 2 cisi uno al lado del otro en un DC, un cable que conectaba tsiska, túnel VPN, certificados de seguridad y pribludy para trabajar con ellos de todos los colores y tamaños ... El plan era el siguiente, reenviamos el canal VPN cifrado entre nuestros servidores, y construir integración directa entre nuestros servicios.  Esquemáticamente, esto se puede representar de la siguiente manera: </p><br><p><img src="https://habrastorage.org/webt/hl/oy/wn/hloywn-uxue8ceolpvmdodhla5w.png"></p><br><h3 id="pogovorim-pro-kod">  Hablemos del código. </h3><br><p>  A continuación, hablaremos sobre cómo y qué organiza nuestro servicio.  Entonces, después de recibir un documento que describe el servicio del socio listo para la integración, descubrimos que, a diferencia de nosotros, el banco solo trabaja con solicitudes SOAP y no quiere escuchar sobre ningún servicio RESTful.  Y dado que en nuestros servicios usamos SOAP con un poco menos de frecuencia que nunca, tuvimos muchos descubrimientos maravillosos sobre cómo aprender a preparar SOAP en nuestro nuevo producto.  Por lo tanto, necesitábamos enseñar nuestro servicio para analizar solicitudes SOAP y convertir nuestras respuestas nuevamente a SOAP. </p><br><h4 id="vybora-freymvorka">  Selección de marco </h4><br><p>  Para empezar, tenía que elegir al menos un lenguaje de implementación, había muchas ideas, comenzando con C y C # terminando con golang y erlang.  Decidimos seguir un camino simple.  El sistema deberá ser compatible, y para no encontrarse con el factor del bus con la falta de especialistas en el mercado, decidimos centrarnos en la tecnología más común en nuestra empresa: PHP.  Gracias a Dios que fuera de la ventana ya no era 2001, sino 2017 y hay tantos frameworks de php que pueden satisfacer las necesidades de incluso ingenieros muy sofisticados.  Después de pasar por un montón, elegimos uno de los más simples y al mismo tiempo compatibles: Yii 2. </p><br><p>  <strong>Por esta decisión fue:</strong> </p><br><ul><li>  Fácil de dominar, un montón de literatura; </li><li>  Es bastante fácil crear formularios y validadores; </li><li>  Hay un registro activo y un automóvil listo para trabajar con todo tipo de herramientas; </li><li>  El es realmente rápido; </li><li>  En base a esto, una API se construye simplemente, es conveniente escribir comandos de consola. </li></ul><br><p>  <strong>Contra fue:</strong> </p><br><ul><li>  El marco se basa en métodos estáticos; esto es muy inconveniente, incluso al escribir pruebas </li><li>  No estaba claro qué herramientas adicionales necesitaríamos en el futuro cercano después del lanzamiento y, como resultado, existía el riesgo de no encontrar las bibliotecas necesarias ... </li></ul><br><h4 id="vybor-hranilisch">  Selección de almacenamiento </h4><br><p>  Se eligió el marco, ahora es el momento de elegir un repositorio para aplicaciones.  Había varias opciones, MySQL, mongoDB, postgreSQL ... Por un lado, una aplicación es un documento, lo más probable es que su estructura pueda cambiar, complementada de vez en cuando por nuevos campos y deshacerse de los irrelevantes.  Por otro lado, el uso de bases de datos no relacionales impondrá sus limitaciones.  Después de sopesar todos los pros y los contras, decidimos sentarnos en 2 sillas y usar MySQL para iniciar, y después del lanzamiento migrar a un montón de mongoDB + ElasticSearch.  Como resultado, 2 réplicas de MySQL se generaron como almacenamiento y se atornillaron a la aplicación usando ActiveRecord.  Cuando comenzamos la transición a mongoDB, la cantidad de datos creció mucho y tomó una tasa de crecimiento tal que hubo otra necesidad de dividir las aplicaciones en repositorios condicionales.  Como una herramienta para la indexación de documentos casi en tiempo real, ElasticSearch decidió utilizar un servicio escrito en Golang - monstache. </p><br><h4 id="stroim-infrastrukturu">  Construyendo infraestructura </h4><br><p>  Decidimos hacer la siguiente infraestructura: 10 backends con la aplicación por parte del procesador de la aplicación, 2 equilibradores, 2 réplicas MySQL, 3 fragmentos elásticos de búsqueda, 3 réplicas mongoDB y 2 réplicas de servicio monstache. <img src="https://habrastorage.org/webt/n4/c4/gz/n4c4gzsszplllqrpbxxgd4uhnkw.png"></p><br><h2 id="process">  El proceso </h2><br><p>  En general, el proceso de préstamo de automóvil se puede dividir en 2 partes: </p><br><ol><li>  Para comenzar, necesita encontrar un automóvil adecuado, disponible a crédito.  Lo más probable es que se guíe por su condición y los términos del préstamo. </li><li>  Después de seleccionar un automóvil, debe obtener una aprobación de préstamo, para ello deberá completar una solicitud </li></ol><br><p>  Sobre la implementación de la segunda parte, más o menos lo describimos anteriormente, hablemos sobre la implementación de la primera parte.  La implementación de la primera parte consta de varias subpartes: </p><br><ol><li>  Al buscar un automóvil, una persona debe poder centrarse, además de los parámetros técnicos, en la disponibilidad de un automóvil para comprar a crédito y en el pago mínimo mensual.  Para hacer esto, necesitamos saber en el momento del anuncio que el automóvil está disponible a crédito y cuál será el pago mínimo por él. </li><li>  Después de que una persona haya elegido un automóvil, debemos proporcionarle una calculadora de préstamos, donde pueda elegir el monto del pago inicial y el plazo del préstamo, eligiendo así el monto de pago mensual más cómodo. </li></ol><br><p>  Para este propósito, se desarrolló un microservicio especial en el lenguaje go.  Su esencia era la siguiente: cuando se envía un anuncio al microservicio, se envía un objeto con todos los datos sobre el automóvil, el microservicio, basado en las reglas que se escriben por separado para él, devuelve el pago mensual mínimo para la indexación en la búsqueda, y también devuelve el anticipo mínimo y los plazos aceptables préstamos, que son la base para construir una calculadora de préstamos. </p><br><p><img src="https://habrastorage.org/webt/v3/3s/oj/v33sojevpnsmwuqh8il4vhciili.png"></p><br><p>  Almacenamos las opciones de cálculo erróneo por adelantado para el pago inicial estándar y los valores de pago mensual.  Esto se hace para cada uno de los períodos de crédito disponibles.  Si una persona cambia el pago inicial (dentro del rango aceptable), el microservicio volverá a calcular todos los datos.  Si el pago inicial se especifica por debajo de lo permitido, la calculadora mostrará un error de validación. </p><br><p><img src="https://habrastorage.org/webt/o0/0o/vv/o00ovv3safkjazq87fpkhqvvp2o.png"></p><br><p>  Debido a la alta carga de nuestro servicio, la calculadora de préstamos tiene 2 grados de almacenamiento en caché: la primera se realiza en el backend, donde los clientes inicialmente van por la calculadora, la segunda en el microservicio. </p><br><h2 id="tak-chto-v-itoge">  Entonces, ¿cuál es el resultado final? </h2><br><p>  Lanzamos el proyecto el 11 de septiembre de 2017.  Desde ese momento, hasta la fecha (4 de diciembre de 2018), se han presentado 2.973.868 solicitudes.  Estamos en un proceso continuo para mejorar nuestro servicio y simplificar el viaje del usuario.  ¡Lo hacemos más rápido, más fácil y más estable!  El tiempo de actividad del proyecto para todo el período desde el lanzamiento fue del 99,99%. </p><br><p>  Como resultado, tenemos los siguientes resultados: </p><br><ol><li>  Ruta de usuario significativamente reducida </li><li>  Ampliamos el volumen de automóviles disponibles para préstamos al 60% de toda la base </li><li>  ¡Hasta la fecha, el número de aplicaciones ha crecido más de 7 veces! </li></ol><br><h2 id="vmesto-zaklyucheniya">  En lugar de una conclusión </h2><br><p>  En 3 meses logramos construir un proyecto verdaderamente sorprendente y único.  Su objetivo principal era dar a nuestros clientes la oportunidad de comprar autos usados ​​sin salir de nuestra plataforma.  En solo 1 minuto, el usuario puede tomar una decisión sobre su aplicación, llamar al vendedor y redactar todos los documentos necesarios el mismo día. <br>  A juzgar por la cantidad de solicitudes para el año y 2 meses, podemos concluir que podemos hacer que el servicio sea realmente conveniente y demandado. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es431342/">https://habr.com/ru/post/es431342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es431330/index.html">Fin de semana móvil: transmisión gratuita de Mobius</a></li>
<li><a href="../es431332/index.html">Descripción general de los informes DotNext 2018 más interesantes: versión de EastBanc Technologies</a></li>
<li><a href="../es431334/index.html">Huawei: protección del plano de control</a></li>
<li><a href="../es431338/index.html">El libro "ADN. La historia de la revolución genética "</a></li>
<li><a href="../es431340/index.html">Su selección de 11 polígonos, nada que ver con el presente.</a></li>
<li><a href="../es431344/index.html">Acústica incorporada: qué es y cómo funciona</a></li>
<li><a href="../es431346/index.html">Desarrollando una aplicación de acción para Slack</a></li>
<li><a href="../es431348/index.html">Anycubic Photon: una mini descripción de una impresora 3D de fotopolímero económica</a></li>
<li><a href="../es431350/index.html">Planes de desarrollo de procesadores electrónicos Baikal</a></li>
<li><a href="../es431354/index.html">El primer códec de video de aprendizaje automático superó dramáticamente todos los códecs existentes, incluidos H.265 y VP9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>