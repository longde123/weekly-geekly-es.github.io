<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëãüèΩ üéÑ ‚ùå Organize um projeto de ML com a Ocean üôéüèº üì£ üí¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entrada 


 Ao longo dos anos desenvolvendo projetos de ML e DL, nosso est√∫dio acumulou uma grande base de c√≥digos, muita experi√™ncia e id√©ias e concl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Organize um projeto de ML com a Ocean</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/459340/"><p><img src="https://habrastorage.org/webt/cz/_r/ya/cz_ryawz8unift6rexjknj69rvo.png" alt="imagem"></p><br><h2 id="vstuplenie">  Entrada </h2><br><p>  Ao longo dos anos desenvolvendo projetos de ML e DL, nosso est√∫dio acumulou uma grande base de c√≥digos, muita experi√™ncia e id√©ias e conclus√µes interessantes.  Ao iniciar um novo projeto, esse conhecimento √∫til ajuda voc√™ a iniciar pesquisas com mais confian√ßa, reutilizar m√©todos √∫teis e obter os primeiros resultados mais rapidamente. </p><br><p>  √â muito importante que todos esses materiais n√£o estejam apenas na mente dos desenvolvedores, mas tamb√©m em forma leg√≠vel no disco.  Isso permitir√° um treinamento mais eficaz dos novos funcion√°rios, atualiz√°-los e mergulhar no projeto. </p><br><p>  Obviamente, esse nem sempre foi o caso.  Enfrentamos muitos problemas nos est√°gios iniciais </p><br><ul><li>  Cada projeto foi organizado de maneira diferente, especialmente se eles foram iniciados por pessoas diferentes. </li><li>  Eles n√£o acompanharam o que o c√≥digo estava fazendo, como execut√°-lo e quem era o autor. </li><li>  Eles n√£o usaram a virtualiza√ß√£o no n√≠vel adequado, frequentemente impedindo que seus colegas instalassem bibliotecas existentes de uma vers√£o diferente. </li><li>  As conclus√µes tiradas das cartas que se estabeleceram e morreram na montanha de cadernos de anota√ß√µes foram esquecidas. </li><li>  Relat√≥rios perdidos sobre os resultados e progresso do projeto. </li></ul><br><p>  Para resolver esses problemas de uma vez por todas, decidimos que precisamos trabalhar tanto em uma organiza√ß√£o unificada e adequada do projeto quanto em virtualiza√ß√£o, abstra√ß√£o de componentes individuais e reutiliza√ß√£o de c√≥digo √∫til.  Gradualmente, todo o nosso progresso nessa √°rea se transformou em uma estrutura independente - o oceano. </p><br><p>  Cereja no bolo - os logs do projeto, que s√£o agregados e transformados em um site bonito, coletados automaticamente usando um comando. </p><br><p>  No artigo, mostraremos um pequeno exemplo artificial de quais partes o Ocean consiste e como us√°-lo. </p><a name="habracut"></a><br><h2 id="pochemu-ocean">  Por que oceano </h2><br><p>  No mundo da ML, existem outras op√ß√µes que consideramos.  Antes de tudo, precisamos mencionar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cookiecutter-data-science</a> (a seguir CDS) como um inspirador ideol√≥gico.  Vamos come√ßar com o bom: o CDS n√£o apenas oferece uma estrutura de projeto conveniente, mas tamb√©m informa como gerenciar o projeto para que tudo fique bem - portanto, recomendamos que voc√™ discorde e analise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">as</a> principais id√©ias principais dessa abordagem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no artigo original do CDS</a> . </p><br><p>  Armado com o CDS no rascunho de trabalho, imediatamente trouxemos v√°rias melhorias: adicionamos um conveniente registrador de arquivos, uma classe de coordenador respons√°vel pela navega√ß√£o no projeto e um gerador autom√°tico de documenta√ß√£o do Sphinx.  Al√©m disso, v√°rios comandos foram enviados ao Makefile, de modo que mesmo um n√£o iniciado nos detalhes do gerente de projeto era conveniente para execut√°-los. </p><br><p>  No entanto, no processo, come√ßaram a surgir as desvantagens da abordagem CDS: </p><br><ul><li>  A pasta de <strong>dados</strong> pode aumentar, mas qual dos scripts ou blocos de anota√ß√µes gera o pr√≥ximo arquivo n√£o est√° completamente claro.  Em um grande n√∫mero de arquivos, √© f√°cil ficar confuso.  N√£o est√° claro se, no √¢mbito da implementa√ß√£o da nova funcionalidade, √© necess√°rio usar alguns arquivos dos existentes, uma vez que a descri√ß√£o ou documenta√ß√£o de sua finalidade n√£o √© armazenada em nenhum lugar. </li><li> Nos <strong>dados,</strong> n√£o h√° subpasta de <strong>recursos</strong> suficientes na qual voc√™ pode armazenar sinais: estat√≠sticas calculadas, vetores e outras caracter√≠sticas a partir das quais diferentes representa√ß√µes finais dos dados seriam coletadas.  Isso j√° foi notavelmente escrito em um post do blog. </li><li>  <strong>src</strong> √© outra pasta com problemas.  Possui fun√ß√µes relevantes para todo o projeto, por exemplo, preparando e limpando os dados do m√≥dulo <strong>src.data</strong> .  Mas tamb√©m existe o m√≥dulo <strong>src.models</strong> , que cont√©m todos os modelos de todos os experimentos, e pode haver dezenas deles.  Como resultado, o <strong>src</strong> √© atualizado com muita frequ√™ncia, expandindo-se com mudan√ßas muito pequenas e, de acordo com a filosofia do CDS, ap√≥s cada atualiza√ß√£o, voc√™ precisa reconstruir o projeto, e este √© tamb√©m o momento ..., - bem, voc√™ entende. </li><li>  <strong>s√£o</strong> apresentadas <strong>refer√™ncias</strong> , mas ainda h√° uma pergunta em aberto: quem, quando e de que forma deve levar os materiais para l√°.  E voc√™ pode dizer muito no decorrer do projeto: que trabalho foi realizado, qual √© o resultado deles, quais s√£o os planos futuros. </li></ul><br><p>  Para resolver os problemas acima, a seguinte ess√™ncia √© apresentada em Ocean: <em>experiment</em> .  Um experimento √© um reposit√≥rio de todos os dados envolvidos no teste de alguma hip√≥tese.  Isso pode incluir: quais dados foram usados, quais dados (artefatos) resultaram, a vers√£o do c√≥digo, o hor√°rio de in√≠cio e t√©rmino do experimento, o arquivo execut√°vel, par√¢metros, m√©tricas e logs.  Algumas dessas informa√ß√µes podem ser rastreadas usando utilit√°rios especiais, por exemplo, MLFlow.  No entanto, a estrutura dos experimentos apresentados no Ocean √© mais rica e flex√≠vel. </p><br><p>  O m√≥dulo de uma experi√™ncia √© o seguinte: </p><br><pre><code class="plaintext hljs">&lt;project_root&gt; ‚îî‚îÄ‚îÄ experiments ‚îú‚îÄ‚îÄ exp-001-Tree-models ‚îÇ ‚îú‚îÄ‚îÄ config &lt;- yaml-   ‚îÇ ‚îú‚îÄ‚îÄ models &lt;-   ‚îÇ ‚îú‚îÄ‚îÄ notebooks &lt;-    ‚îÇ ‚îú‚îÄ‚îÄ scripts &lt;- , , train.py  predict.py ‚îÇ ‚îú‚îÄ‚îÄ Makefile &lt;-      ‚îÇ ‚îú‚îÄ‚îÄ requirements.txt &lt;-    ‚îÇ ‚îî‚îÄ‚îÄ log.md &lt;-    ‚îÇ ‚îú‚îÄ‚îÄ exp-002-Gradient-boosting ...</code> </pre> <br><p>  Compartilhamos a base de c√≥digo: o c√≥digo bom reutiliz√°vel, relevante durante todo o projeto, permanece no m√≥dulo <b>src</b> do n√≠vel do projeto.  Raramente √© atualizado; portanto, com menos frequ√™ncia, √© necess√°rio criar um projeto.  E o m√≥dulo de <b>scripts</b> de um experimento deve conter c√≥digo relevante apenas para o experimento atual.  Assim, pode ser alterado com frequ√™ncia: n√£o afeta o trabalho dos colegas em outros experimentos. </p><br><p>  Vamos considerar as possibilidades de nossa estrutura usando o exemplo de um projeto abstrato de ML / DL. </p><br><h2 id="workflow-proekta">  Fluxo de trabalho do projeto </h2><br><h3 id="inicializaciya">  Inicializa√ß√£o </h3><br><p>  Assim, o cliente - a pol√≠cia de Chicago - nos enviou os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dados</a> e a tarefa: analisar os crimes cometidos na cidade durante o per√≠odo 2011-2017 e tirar conclus√µes. </p><br><p>  Vamos come√ßar!  Vamos ao terminal e executamos o comando: </p><br><p> <code>ocean project new -n Crimes</code> </p> <br><p>  A estrutura criou a pasta do projeto de <b>crimes</b> correspondente.  N√≥s olhamos para sua estrutura: </p><br><pre> <code class="plaintext hljs">crimes ‚îú‚îÄ‚îÄ crimes &lt;- src-   ,    ‚îú‚îÄ‚îÄ config &lt;- ,     ‚îú‚îÄ‚îÄ data &lt;-  ‚îú‚îÄ‚îÄ demos &lt;-    ‚îú‚îÄ‚îÄ docs &lt;- Sphinx- ‚îú‚îÄ‚îÄ experiments &lt;-  ‚îú‚îÄ‚îÄ notebooks &lt;-   EDA ‚îú‚îÄ‚îÄ Makefile &lt;-       ‚îú‚îÄ‚îÄ log.md &lt;-   ‚îú‚îÄ‚îÄ README.md ‚îî‚îÄ‚îÄ setup.py</code> </pre> <br><p>  <b>O coordenador</b> do m√≥dulo com o mesmo nome, que j√° est√° escrito e pronto, ajuda a navegar por todas essas pastas.  Para us√°-lo, o projeto precisa ser montado: </p><br><p> <code>make package</code> </p> <br><blockquote>  <b>Isso √© um bug</b> : se os comandos make n√£o quiserem ser executados, adicione o sinalizador -B a eles, por exemplo, "make -B package".  Isso se aplica a todos os outros exemplos. </blockquote><br><h3 id="logi-i-eksperimenty">  Logs e experimentos </h3><br><p>  Come√ßamos com o fato de que os dados do cliente, no nosso caso, o arquivo <b>crimes.csv</b> , s√£o colocados na pasta <b>data / raw</b> . </p><br><p>  No site de Chicago, existem mapas com as divis√µes da cidade em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">postos</a> ("batidas" - o menor local para o qual um carro-patrulha √© designado), setores ("setores", que consistem em 3-5 postos), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">se√ß√µes</a> ("distritos", consistem em 3 setores), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">distritos administrativos</a> (‚Äúenfermarias‚Äù) e, finalmente, √°reas p√∫blicas (‚Äú√°rea comunit√°ria‚Äù).  Esses dados podem ser usados ‚Äã‚Äãpara visualiza√ß√£o.  Ao mesmo tempo, os arquivos json com as coordenadas das se√ß√µes de pol√≠gono de cada tipo n√£o s√£o dados enviados pelo cliente, portanto, os colocamos em <b>dados / externos</b> . </p><br><p>  Em seguida, voc√™ precisa introduzir o conceito de experimento.  Tudo √© simples: consideramos uma tarefa separada como um experimento separado.  Precisa analisar / bombear dados e prepar√°-los para uso futuro?  Vale a pena fazer um experimento.  Preparar muitas visualiza√ß√µes e relat√≥rios?  Experi√™ncia separada.  Teste a hip√≥tese preparando um modelo?  Bem, voc√™ entendeu. </p><br><p>  Para criar nosso primeiro experimento a partir da pasta do projeto, realizamos: </p><br><p> <code>ocean exp new -n Parsing -a ivanov</code> </p> <br><p>  Agora, uma nova pasta com o nome <b>exp-001-Parsing</b> apareceu na pasta <b>crimes / experimentos</b> , cuja estrutura √© dada acima. </p><br><p>  Depois disso, voc√™ precisa examinar os dados.  Para fazer isso, crie um laptop na pasta de <b>cadernos</b> correspondente.  No Surf, seguimos a nomea√ß√£o "n√∫mero do laptop - nome", e o laptop criado ser√° chamado <b>001-Parse-data.ipynb</b> .  Dentro, prepararemos dados para trabalhos futuros. </p><br><div class="spoiler">  <b class="spoiler_title">C√≥digo de prepara√ß√£o de dados</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd pd.options.display.max_columns = <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-comment"><span class="hljs-comment">#       : from crimes.coordinator import Coordinator coord = Coordinator() coord.data_raw.contents() &gt; ['/opt/jupyterhub/notebooks/aolferuk/crimes/data/raw/crimes.csv'] #     : df = coord.data_raw.join('crimes.csv').load() df['Date'] = pd.to_datetime(df['Date']) df['Updated On'] = pd.to_datetime(df['Updated On']) df['Location X'] = np.nan df['Location Y'] = np.nan df.loc[df.Location.notnull(), 'Location X'] = df.loc[df.Location.notnull(), 'Location'].apply(lambda x: eval(x)[0]) df.loc[df.Location.notnull(), 'Location Y'] = df.loc[df.Location.notnull(), 'Location'].apply(lambda x: eval(x)[1]) df.drop('Location', axis=1, inplace=True) df['month'] = df.Date.apply(lambda x: x.month) df['day'] = df.Date.apply(lambda x: x.day) df['hour'] = df.Date.apply(lambda x: x.hour) #     : coord.data_interim.join('crimes.pkl').save(df)</span></span></code> </pre> </div></div><br><p>  Para que seus colegas estejam cientes do que voc√™ fez e se seus resultados podem ser usados ‚Äã‚Äãpor eles, √© necess√°rio comentar sobre isso no log: o arquivo <b>log.md.</b>  A estrutura do log (que √© essencialmente um arquivo de remarca√ß√£o familiar) √© a seguinte: </p><br><p><img src="https://habrastorage.org/webt/4g/us/lz/4guslzybw2d55w0nvck2y_q1nyu.png" alt="log.md"></p><br><p>  As pe√ßas preenchidas √† m√£o s√£o destacadas em cores.  O principal meta do experimento (cor clara da ameixa) √© o autor e a explica√ß√£o de sua tarefa, o resultado para o qual o experimento est√° sendo realizado.  Links para dados, obtidos e gerados no processo (cor verde), ajudam a monitorar arquivos de dados e a entender quem, dentro do qu√™ e por que os usa.  O pr√≥prio registro (cor amarela) informa o resultado do trabalho, as conclus√µes e o racioc√≠nio.  Todos esses dados posteriormente se tornar√£o o conte√∫do do site de log do projeto. </p><br><p>  A seguir, √© apresentado o est√°gio da EDA ( <em>An√°lise Explorat√≥ria de Dados - ‚Äúan√°lise de dados de intelig√™ncia‚Äù</em> ).  Talvez seja conduzido por pessoas diferentes e, √© claro, precisaremos de resultados na forma de relat√≥rios e gr√°ficos posteriormente.  Esses argumentos s√£o uma ocasi√£o para criar um novo experimento.  Realizamos: </p><br><p> <code>ocean exp new -n Eda -a ivanov</code> </p> <br><p>  Na pasta de <b>blocos</b> de <b>anota√ß√µes</b> do experimento, crie o bloco de anota√ß√µes <b>001-EDA.ipynb</b> .  O c√≥digo completo n√£o faz sentido, mas n√£o √© necess√°rio, por exemplo, pelos seus colegas.  Mas voc√™ precisa de gr√°ficos e conclus√µes.  Um monte de c√≥digo sai no notebook e, por si s√≥, n√£o √© o que se deseja mostrar ao cliente.  Portanto, registraremos nossas descobertas e informa√ß√µes no arquivo <b>log.md</b> e salvaremos as imagens dos gr√°ficos nas <b>refer√™ncias</b> . </p><br><p>  Aqui, por exemplo, h√° um mapa das √°reas seguras de Chicago, se o destino o levar at√© l√°: </p><br><p><img src="https://habrastorage.org/webt/0d/gc/yo/0dgcyoulqtdvmgoaclyjjdrd3t8.png" alt="chicagoMap"></p><br><p>  Foi apenas recebido em um caderno e transferido para <b>refer√™ncias</b> . </p><br><p>  A seguinte entrada foi adicionada ao log: </p><br><pre> <code class="plaintext hljs">19.02.2019, 18:15 EDA conclusion: * The most common and widely spread crimes are theft (including burglary), battery and criminal damage done with firearms. * In 1 case out of 4 the suspect will be set free after detention. [!Criminal activity in different beats of the city](references/beats_activity.jpg) Actual exploration you can check in [the notebook](notebooks/001-Eda.ipynb)</code> </pre> <br><p>  Observe: o gr√°fico foi projetado exatamente como inserir uma imagem em um arquivo md.  E se voc√™ deixar um link para o notebook, ele ser√° convertido para o formato html e salvo como uma p√°gina separada no site. </p><br><p>  Para colet√°-lo dos logs de experimentos, executamos o seguinte comando no n√≠vel do projeto: </p><br><p> <code>ocean log new</code> </p> <br><p>  Depois disso, a pasta <b>crime / project_log √© criada</b> e <b>index.html</b> nela √© o log do projeto. </p><br><blockquote>  <b>Isso √© um bug</b> : quando exibido no Jupyter, o site √© implementado como um iframe para maior seguran√ßa e, portanto, as fontes n√£o s√£o exibidas corretamente.  Portanto, usando o Ocean, voc√™ pode criar imediatamente um arquivo com uma c√≥pia do site, para que seja conveniente baix√°-lo e abri-lo em um computador local ou envi√°-lo por correio.  Assim: <br> <code>ocean log archive [-n NAME] [-p PASSWORD]</code> </blockquote> <br><h3 id="dokumentaciya">  A documenta√ß√£o </h3><br><p>  Vamos dar uma olhada na cria√ß√£o de documenta√ß√£o usando o Sphinx.  Crie uma fun√ß√£o no arquivo <b>crimes / my_cool_module.py</b> e documente-a.  Observe que o Sphinx usa o formato de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">texto reestruturado</a> (RST): </p><br><div class="spoiler">  <b class="spoiler_title">my_cool_module.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">my_super_cool_random</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(max_value)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">''' Returns a random number from [0; max_value) interval. Considers the number to be taken from uniform distribution. :param max_value: Maximum value that defines range. :returns: Random number. '''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-comment"><span class="hljs-comment"># Good enough to begin with</span></span></code> </pre> </div></div><br><p>  E ent√£o tudo √© muito simples: no n√≠vel do projeto, executamos a equipe de gera√ß√£o de documenta√ß√£o e voc√™ est√° pronto: </p><br><p> <code>ocean docs new</code> </p> <br><blockquote>  <strong>Pergunta da plat√©ia</strong> : Por que, se coletamos o projeto atrav√©s do <code>make</code> , voc√™ precisa coletar a documenta√ß√£o atrav√©s do <code>ocean</code> ? <br>  <strong>Resposta</strong> : o processo de gera√ß√£o da documenta√ß√£o n√£o √© apenas a execu√ß√£o do comando Sphinx, que pode ser colocado em <code>make</code> .  A Ocean assume a varredura do cat√°logo de seus c√≥digos-fonte, cria um √≠ndice para o Sphinx a partir deles e somente ent√£o o pr√≥prio Sphinx come√ßa a trabalhar. </blockquote><p>  A documenta√ß√£o html pronta espera por voc√™ no caminho <b>crimes / docs / _build / html / index.html</b> .  E nosso m√≥dulo com coment√°rios j√° apareceu l√°: </p><br><p><img src="https://habrastorage.org/webt/j0/fw/dp/j0fwdpya1gqoovqlstlvulpycgq.jpeg" alt="genDoc"></p><br><h3 id="modeli">  Modelos </h3><br><p>  O pr√≥ximo passo √© construir o modelo.  Realizamos: </p><br><p> <code>ocean exp new -n Model -a ivanov</code> </p> <br><p>  E dessa vez, d√™ uma olhada no que est√° na pasta de <b>scripts</b> dentro do experimento.  O arquivo <b>train.py</b> est√° em branco para o processo de treinamento futuro.  O arquivo j√° cont√©m o c√≥digo padr√£o que faz v√°rias coisas ao mesmo tempo. </p><br><ul><li>  A fun√ß√£o de aprendizado utiliza v√°rios caminhos de arquivo: <br><ul><li>  Para o arquivo de configura√ß√£o, para o qual √© razo√°vel transferir os par√¢metros do modelo, os par√¢metros de treinamento e outras op√ß√µes convenientes para o controle externo, sem se aprofundar no c√≥digo. </li><li>  Para o arquivo de dados. </li><li>  O caminho para o diret√≥rio em que voc√™ deseja salvar o dump do modelo final. </li></ul></li><li>  Rastreia as m√©tricas obtidas no processo de aprendizagem no <b>mlflow</b> .  Tudo o que foi solicitado pode ser visualizado por meio do mlflow da interface do usu√°rio executando o comando <code>make dashboard</code> na pasta da experi√™ncia. </li><li>  Envia um alerta ao seu telegrama de que o processo de aprendizado foi conclu√≠do.  Para implementar esse mecanismo, o bot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Alarmerbot</a> foi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">usado</a> .  Para fazer isso funcionar, voc√™ precisa fazer um pouco: envie o comando / start para o bot e transfira o token emitido pelo bot para o <b>arquivo crimes / config / alarm_config.yml</b> .  A string pode ficar assim: <br> <code>ivanov: a5081d-1b6de6-5f2762</code> </li> <li>  √â controlado a partir do console. </li></ul><br><p>  Por que gerenciar nosso script a partir do console?  Tudo √© organizado para que o processo de aprendizado ou obten√ß√£o de previs√µes de qualquer modelo seja facilmente organizado por um desenvolvedor externo que n√£o esteja familiarizado com os detalhes da implementa√ß√£o do seu experimento.  Para que todas as pe√ßas do quebra-cabe√ßa se <b>encaixem</b> , ap√≥s o design do <b>train.py,</b> voc√™ precisa organizar o <b>Makefile</b> .  Ele cont√©m o comando <b>train em</b> branco, e voc√™ s√≥ precisa definir corretamente os caminhos para os arquivos de configura√ß√£o necess√°rios listados acima e listar todos os que desejam receber notifica√ß√µes do Telegram no valor do par√¢metro username.  Em particular, o alias funciona, o que enviar√° um alerta a todos os membros da equipe. </p><br><p>  Quando tudo estiver pronto, nosso experimento come√ßa com o <code>make train</code> , de maneira simples e elegante. </p><br><p>  Caso voc√™ queira usar as redes neurais de outras pessoas, os ambientes virtuais ( <b>venv</b> ) ajudar√£o.  Criar e exclu√≠-los como parte de um experimento √© muito f√°cil: </p><br><ul><li>  <code>ocean env new</code> criar√° um novo ambiente.  Por padr√£o, ele n√£o √© apenas ativo, mas tamb√©m cria um kernel (kernel) adicional para notebooks e para pesquisas adicionais.  Ser√° chamado da mesma maneira que o nome do experimento. </li><li>  <code>ocean env list</code> exibe uma lista de n√∫cleos. </li><li>  <code>ocean env delete</code> ambiente criado no experimento. </li></ul><br><h2 id="chego-ne-hvataet">  O que est√° faltando? </h2><br><ul><li>  Ocean n√£o √© amigo de conda ( <del>  porque n√≥s n√£o usamos </del>  ) </li><li>  Modelo de projeto apenas em ingl√™s. </li><li>  O problema de localiza√ß√£o ainda se aplica ao site: a constru√ß√£o do log do projeto pressup√µe que todos os logs estejam em ingl√™s. </li></ul><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  O c√≥digo fonte do projeto est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Se voc√™ estiver interessado - √≥timo!  Voc√™ pode encontrar mais informa√ß√µes no README <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no reposit√≥rio Ocean</a> . </p><br><p>  E, como costumam dizer nesses casos, contribui√ß√µes s√£o bem-vindas, s√≥ ficaremos felizes se voc√™ participar da melhoria do projeto. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt459340/">https://habr.com/ru/post/pt459340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt459328/index.html">Melhor rela√ß√£o custo / benef√≠cio - Mpow A5 (059)</a></li>
<li><a href="../pt459330/index.html">Bitrix para programador e gerente: amor e √≥dio</a></li>
<li><a href="../pt459334/index.html">YouTrack 2019.2: um banner em todo o sistema, melhorias na p√°gina da lista de tarefas, novas op√ß√µes de pesquisa e muito mais</a></li>
<li><a href="../pt459336/index.html">Viva e aprenda. Parte 1. Escola e orienta√ß√£o profissional</a></li>
<li><a href="../pt459338/index.html">Usando o verificador como um meio de modelagem r√°pida de projetos RTL. Introdu√ß√£o ao UVM</a></li>
<li><a href="../pt459342/index.html">Cache remoto para iOS, altern√¢ncia de recursos, temas sombrios e carreira de desenvolvedor - reporte com o Avito iOS Meetup # 7</a></li>
<li><a href="../pt459344/index.html">M√©tricas do DevOps - onde obter dados para c√°lculos</a></li>
<li><a href="../pt459346/index.html">Em todo o mundo com um E-Book: ONYX BOOX James Cook 2 Review</a></li>
<li><a href="../pt459348/index.html">Outro desvio de autentica√ß√£o em redes Wi-Fi p√∫blicas</a></li>
<li><a href="../pt459350/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 467 (25/06/2019 - 07/07/2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>