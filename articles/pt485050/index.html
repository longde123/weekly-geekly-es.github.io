<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚¨õÔ∏è ü§ù ü•ò Hypercube. Como fornecemos aos desenvolvedores dispositivos de teste e n√£o os perdemos üéà üßï üññüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√â imposs√≠vel testar e depurar completamente aplicativos m√≥veis sem dispositivos de teste. Deve haver muitos desses dispositivos, porque o mesmo c√≥digo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hypercube. Como fornecemos aos desenvolvedores dispositivos de teste e n√£o os perdemos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/485050/"><p>  √â imposs√≠vel testar e depurar completamente aplicativos m√≥veis sem dispositivos de teste.  Deve haver muitos desses dispositivos, porque o mesmo c√≥digo em modelos diferentes se comporta de maneira diferente.  Mas como organizar a contabilidade de dispositivos?  Como fazer com que desenvolvedores e testadores rapidamente e sem burocracia obtenham um smartphone espec√≠fico na configura√ß√£o necess√°ria? </p><br><p>  Meu nome √© Alexey Lavrenyuk.  Voc√™ pode me conhecer como um dos autores do <a href="https://github.com/yandex/yandex-tank">Yandex.Tank</a> e como palestrante sobre o t√≥pico de <a href="https://www.youtube.com/watch%3Fv%3Dgws7L3EaeC0">teste</a> de <a href="https://www.youtube.com/watch%3Fv%3Dgws7L3EaeC0">carga</a> .  Ent√£o eu medi o consumo de energia dos telefones celulares.  Agora eu fa√ßo o Yandex.Rover em uma equipe de ve√≠culos n√£o tripulados (e √†s vezes luar como <a href="https://www.youtube.com/watch%3Fv%3DBZgpMC5ORW0">Papai Noel</a> ).  E entre os telefones e o Rover estava o Hypercube. </p><br><p>  H√° alguns anos, o chefe de desenvolvimento m√≥vel veio ao nosso departamento de teste de carga e reclamou da situa√ß√£o com os dispositivos de teste.  Telefones vagavam de m√£o em m√£o, para escolher e encontrar rapidamente o telefone era um problema.  J√° t√≠nhamos experi√™ncia com dispositivos m√≥veis: constru√≠mos um amper√≠metro digital para medir seu consumo de energia.  Portanto, decidimos ajudar os colegas e rapidamente fazer uma coisa legal: parecia funcionar por apenas tr√™s meses.  Eu rio de mim mesmo, ing√™nuo, a partir de 2020 e digo o que realmente nos esperava. </p><br><img src="https://habrastorage.org/webt/-k/hz/b2/-khzb2ut0-y7ljuehz1f_8virf0.jpeg"><br><br><a name="habracut"></a><h2>  Conceito de servi√ßo e primeiras id√©ias </h2><br><p>  Fomos um dos poucos em Yandex que montaram dispositivos de ferro.  Al√©m disso, √©ramos versados ‚Äã‚Äãem dispositivos m√≥veis.  Para mim, a id√©ia do servi√ßo estava √† superf√≠cie: voc√™ precisa conectar os telefones ao hub e rastrear sua disponibilidade e movimenta√ß√£o pelo escrit√≥rio via USB.  O design cabe em um gabinete de servidor. </p><br><p>  Aqui est√° como eu imaginei o processo: </p><br><ol><li>  <b>Mantemos registros de telefones via USB.</b>  Todos os telefones no gabinete est√£o conectados via USB.  O telefone est√° carregando e vemos informa√ß√µes sobre ele, incluindo o ID do dispositivo - um identificador exclusivo (na verdade, para alguns dispositivos chineses nem sempre √© √∫nico), pelo qual voc√™ pode distinguir um telefone do outro.  A prop√≥sito, pelo identificador - que qualquer dispositivo USB possui em geral - voc√™ pode acompanhar tudo: conecte uma unidade flash USB normal √†s chaves do carro, por exemplo, e mantenha um registro autom√°tico das chaves. </li><li>  <b>Lemos os usu√°rios em um crach√°.</b>  Identificamos todos que tiram o telefone do arm√°rio usando um crach√° (um passe pelo qual voc√™ pode reconhecer qualquer funcion√°rio da Yandex).  Depois que um funcion√°rio abre o gabinete, acredita-se que ele tenha feito todos os movimentos dos telefones no gabinete. </li><li>  <b>Todas as informa√ß√µes de movimento s√£o armazenadas centralmente no servi√ßo.</b>  Vemos onde e com quem cada celular est√° localizado.  Podemos rastrear estat√≠sticas: quais modelos s√£o mais populares, quais telefones est√£o ausentes. </li></ol><br><p>  Pode haver muitos desses gabinetes, mas as informa√ß√µes em todos os dispositivos m√≥veis neles est√£o em um s√≥ lugar.  Todos os cubos (arm√°rios) s√£o combinados e conectados logicamente e, juntos, formam um Hypercube grande (da√≠ o nome interno do servi√ßo). </p><br><p>  Todo mundo gostou da id√©ia, come√ßamos o trabalho. </p><br><h2>  Hypercube.  Iniciar </h2><br><p>  N√≥s contratamos um helpdesk para o leitor RFID e o minicomputador Intel NUC.  Compramos um arduino, uma trava el√©trica, um gabinete para equipamentos de rede (era menor que um gabinete de servidor, mas com os mesmos ‚Äútrilhos‚Äù para consertar o equipamento). </p><br><img width="600" src="https://habrastorage.org/webt/gf/d4/i8/gfd4i8d6nytgx9c7efxnotiiynk.jpeg"><br><br><p>  Obviamente, n√£o recebemos TK e a lista de compras.  N√£o sab√≠amos exatamente qual modelo de gabinete caberia, quantos parafusos e metros de fio s√£o necess√°rios.  Os requisitos para o gabinete foram alterados de acordo com os desejos das equipes.  Concordamos, por exemplo, que armazenaremos 40 telefones celulares em um arm√°rio e colocaremos o arm√°rio na mesa de cabeceira, porque √© pequeno e inconveniente inclinar-se para ele. </p><br><img src="https://habrastorage.org/webt/xm/pp/b5/xmppb5zuu2hmopkmxjagfwmsaxy.jpeg"><br><br><h3>  Prateleiras para telefones </h3><br><p>  Pensamos durante muito tempo em como tornar as prateleiras confort√°veis.  A Yandex tinha racks para demonstrar telefones ou testar interfaces.  Pensamos em reutilizar os racks, mas eles n√£o nos agradaram muito: os telefones colocam a tela no usu√°rio, como na vitrine de uma loja - n√£o precisamos disso.  Como quer√≠amos otimizar o espa√ßo no arm√°rio, decidimos fazer as pr√≥prias prateleiras. </p><br><p>  Havia uma ideia de colocar os telefones com for√ßa, como livros.  Para fazer isso, procuramos divis√≥rias em papelarias, tentamos usar suportes de CD-ROM, prateleiras - tudo por a√≠.  De maneira experimental, cantos de pl√°stico de um separador de corte de um duto de cabo foram colados a uma prateleira com adesivo de fus√£o a quente.  O ‚Äúlayout do livro‚Äù acabou sendo muito bem-sucedido e gostamos. </p><br><img src="https://habrastorage.org/webt/uy/f6/se/uyf6sey2q9tpuwgv-wlfxtrkpfw.jpeg"><br><br><h3>  Poucos lugares e muitos hubs </h3><br><p>  Na parte inferior do gabinete, havia pouco espa√ßo para quatro hubs de 10 portas e Intel NUC - est√°vamos longe da primeira tentativa de empurr√°-los para l√°.  A porta do arm√°rio n√£o era para prender a fechadura - usamos muita cola quente, blocos de madeira e uma serra.  Deixe-me lembr√°-lo: o projeto foi realizado por um grupo de teste de carga, nenhum de n√≥s teve experi√™ncia com um moedor em uma cafeteria. </p><br><img src="https://habrastorage.org/webt/uv/yy/oc/uvyyoc8ilf6w6apxjmoxfc26kys.jpeg"><br><br><h3>  Prot√≥tipo de servi√ßo </h3><br><p>  Lidamos rapidamente com isso: criamos uma p√°gina que mostrava a localiza√ß√£o dos telefones e a colocamos diretamente em nosso servi√ßo de teste de carga.  S√≥ porque permitiu que voc√™ tentasse r√°pida e quase sem esfor√ßo o que aconteceu. </p><br><h2>  O primeiro prot√≥tipo de trabalho </h2><br><p>  Coletamos o primeiro Hypercube em tr√™s semanas.  Ele ficou assim: </p><br><img src="https://habrastorage.org/webt/0s/3j/10/0s3j10s6n8gk4ryxw4tyxrq3xte.jpeg"><br><br><p>  Inicialmente, decidimos testar o prot√≥tipo em nosso escrit√≥rio da Yandex em Moscou (o cliente estava em Ecaterimburgo).  Ele foi dar uma volta na equipe m√≥vel Yandex.Browser - j√° a conhec√≠amos no projeto <a href="https://habr.com/ru/company/yandex/blog/311046/">Yandex Volta</a> (uma vers√£o mais recente do relat√≥rio est√° <a href="https://www.youtube.com/watch%3Fv%3DFRWvJpwyYrU">aqui</a> ).  Esses caras s√£o bem versados ‚Äã‚Äãno consumo de energia. </p><br><h2>  Primeiro teste </h2><br><h3>  Prateleiras novamente </h3><br><p>  Descobriu-se que a cola quente n√£o segura cantos de pl√°stico nas prateleiras de metal.  Voltamos √† ideia de estandes telef√¥nicos.  Pensei durante muito tempo sobre como deveria ser a prateleira ideal no arm√°rio.  Agora parece que foi poss√≠vel desenh√°-lo em 15 minutos.  No final, acabou n√£o muito parecido com o primeiro esbo√ßo, mas aqui est√° o que eu desenhei: </p><br><img src="https://habrastorage.org/webt/60/it/1c/60it1cg57quzpzegy-wshqqwb9o.jpeg"><br><br><p>  Pegamos as prateleiras compradas para arm√°rios de servidores e, em cima, colocamos os divisores fresados ‚Äã‚Äãde pl√°stico, que fizemos por encomenda.  Este design sobreviveu at√© hoje. </p><br><img src="https://habrastorage.org/webt/wo/gp/r9/wogpr9zec43uihz89v1icn6wrnu.jpeg"><br><br><h3>  Hubs inconvenientes </h3><br><p>  Os hubs dos primeiros gabinetes estavam com um interruptor, bot√µes sem trava, desligados por padr√£o.  Portanto, ap√≥s cada reinicializa√ß√£o, tive que ativar os quatro hubs com as m√£os.  Conectamos o Yandex SpeechKit para que o cubo pronuncie se os hubs voarem: "N√£o estou bem, ligue para a pessoa respons√°vel".  Quando uma pessoa entra, a voz diz para voc√™ verificar os hubs.  E o assistente de voz come√ßou a ligar para os funcion√°rios, por nome e voz, que levavam quantos telefones. </p><br><h3>  Problema de bloqueio </h3><br><p>  Houve v√°rias itera√ß√µes com o castelo.  Quando eu estava procurando bloqueios para o prot√≥tipo no come√ßo, encontrei a √∫nica op√ß√£o que me convinha - ‚ÄúXerife‚Äù: pequena, forte e muito espirituosa (ainda n√£o vi an√°logos).  Fechou-se perfeitamente, mas para abrir o arm√°rio, foi necess√°rio pressionar a porta levemente.  Nem todos os usu√°rios entenderam isso, por isso decidimos alterar o bloqueio. </p><br><p>  Eles pegaram o "xerife" com uma mola que empurrou a porta.  O gabinete abriu perfeitamente - mas come√ßou a fechar mal e permaneceu aberto (e se considerou fechado).  Isso ocorreu porque o sensor de fechamento foi instalado separadamente da trava, a porta teve uma folga e o sensor funcionou algumas vezes at√© a porta ser fechada.  Configur√°-lo era irreal. </p><br><p>  Mais uma vez, mudamos a trava para o pr√≥ximo ‚Äúxerife‚Äù, que n√£o era mais de um design t√£o espirituoso, mas, por outro lado, um sensor de fechamento foi constru√≠do diretamente nela.  A trava funcionou no prot√≥tipo, mas depois de coloc√°-lo em opera√ß√£o no primeiro gabinete, ele come√ßou a ser apreendido.  Eu tive que dan√ßar com um pandeiro: desmonte, lubrifique, lima com uma lima.  Com dor ao meio, ele acabou. </p><br><p>  Ap√≥s os primeiros testes, ficou claro: desenvolvedores e testadores gostam do gabinete, eles o usam ativamente.  Isso √© conveniente: voc√™ pode monitorar os dispositivos e procurar o dispositivo certo no servi√ßo da Web, em vez de perguntar aos seus colegas: ‚ÄúQuem tem esse telefone agora?‚Äù.  Identificamos os problemas mais importantes: hubs USB inconvenientes que voc√™ precisa ligar com as m√£os, cabos USB longos de baixa qualidade (os conectores quebraram e os fios emaranhados), uma trava ruim e divisores de prateleira n√£o confi√°veis ‚Äã‚Äãque ca√≠am o tempo todo.  O trabalho continuou. </p><br><h2>  Expans√£o do hiperespa√ßo </h2><br><p>  O gerente do departamento de gerenciamento de projetos - ele tamb√©m nos ajudou a organizar a terceiriza√ß√£o para as prateleiras - estava envolvido ativamente em rela√ß√µes p√∫blicas internas no Yandex: ele passou por equipes diferentes e falou sobre o nosso maravilhoso servi√ßo.  Nos reunimos com representantes de outros departamentos e, inesperadamente, come√ßamos a receber pedidos internos para v√°rias d√∫zias de arm√°rios.  Uma imagem sombria surgiu: os testadores de carga por semanas com toda a equipe montam manualmente os arm√°rios do que est√° √† m√£o. </p><br><p>  Percebemos que precis√°vamos de ajuda com a montagem.  Antes disso, era necess√°rio otimizar o custo de uma inst√¢ncia do gabinete e seu design para produ√ß√£o em pequena escala. </p><br><h3>  Estagi√°rio </h3><br><p>  Durante um m√™s e meio de ver√£o, conseguimos um estagi√°rio que sabia soldar, perfurar e codificar um pouco.  Com ele, refizemos o gabinete antigo no Raspberry Pi (para livrar-nos do caro e desnecess√°rio Intel NUC) e montamos mais um gabinete para instala√ß√£o em centrais de atendimento em Moscou e S√£o Petersburgo (existem pessoas inteligentes l√° que ajudar√£o nossos usu√°rios a lidar com o prot√≥tipo e fornecer feedback √∫til). </p><br><h3>  Alternativas de or√ßamento </h3><br><p>  Para otimizar o custo, substitu√≠mos os componentes mais absurdamente caros do prot√≥tipo: o minicomputador Intel NUC (25 mil rublos) e o leitor RFID (5 mil).  Eles encontraram um leitor alternativo no Ali Express por 150 rublos e, de um mini computador, mudaram para o Raspberry Pi por 3,5 mil rublos. </p><br><p>  Na nova plataforma, tivemos v√°rios problemas.  No in√≠cio, descobriu-se que o rel√© para os bloqueios n√£o muda, porque o RPi fornece 3,3 V e os rel√©s mec√¢nicos s√£o projetados para 5 V. Eu tive que mudar para o estado s√≥lido.  Em seguida, descobrimos que n√£o h√° rel√≥gio no quadro e voc√™ n√£o pode demorar um pouco usando o NTP: n√£o √© poss√≠vel autenticar na rede do escrit√≥rio sem a hora correta (encontramos uma placa de extens√£o especial com um rel√≥gio para RPi). </p><br><p>  O problema mais encantador foi com os iPhones.  Assim que o sexto iPhone foi inserido no RPi, ele ficou indispon√≠vel na rede.  Um gerente de projeto que estava passando (e no passado um administrador severo) nos ajudou a descobrir isso.  Descobriu-se que a placa de rede no RPi era divorciada via USB, e os iPhones provocaram um servi√ßo de buggy para concluir o barramento USB.  Esse problema apareceu pela primeira vez no escrit√≥rio de Minsk; os caras foram capazes de reproduzi-lo rapidamente e fornecer feedback, o que nos ajudou muito.  Eles resolveram o problema quando demoliram a interface gr√°fica (se bem me lembro), porque o servi√ßo estava integrado a ela. </p><br><h3>  Arm√°rios est√£o crescendo </h3><br><p>  Houve um debate sobre o tamanho do gabinete.  Algu√©m pensou que era necess√°rio colocar o dobro de telefones em um arm√°rio, algu√©m - que arm√°rios grandes eram inconvenientes para usar no escrit√≥rio.  E ent√£o descobrimos que j√° t√≠nhamos comprado todos os arm√°rios pequenos das lojas de Moscou, e a pr√≥xima entrega seria em apenas tr√™s meses.  O debate terminou por conta pr√≥pria. </p><br><p>  Eles decidiram fazer todos os seguintes arm√°rios grandes.  Olhando para o futuro, direi: foi a decis√£o certa.  Com base em um gabinete grande, ficou mais f√°cil colocar eletr√¥nicos; 80 telefones n√£o eram mais colocados nele.  Entre os trilhos havia um servidor padr√£o de 19 polegadas.  Em um pequeno gabinete, a dist√¢ncia entre os trilhos n√£o era suficiente. </p><br><img src="https://habrastorage.org/webt/yr/zt/x4/yrztx4px9jzm3937az12pj0yjli.jpeg"><br><br><h3>  Desenvolvimento Web e UX </h3><br><p>  Apertamos nossa varinha em uma das estruturas internas de desenvolvimento da web, percebemos que era bom e arrastamos a placa telef√¥nica do Django para o React.  Mas ficou claro que apenas um tablet n√£o seria adequado para ningu√©m.  O departamento de servi√ßos geogr√°ficos pensou e come√ßou a tarefa em v√°rias telas. </p><br><p>  Eu tive que ligar uma equipe de desenvolvimento web.  Foi designado um designer de produto que pensou plenamente na intera√ß√£o dos usu√°rios com o servi√ßo.  Ele fez adesivos convenientes nos arm√°rios, colocou os arm√°rios no mapa do escrit√≥rio, estudou o bate-papo de suporte para entender melhor o que os usu√°rios desejam.  Em resumo, assumi o projeto em termos de experi√™ncia do usu√°rio. </p><br><p>  Os desenvolvedores da Web assumiram a interface e implementaram rapidamente os layouts de design.  Temos algo semelhante ao Yandex.Market em uma escala menor: voc√™ entra, escolhe um telefone, vai busc√°-lo em um arm√°rio.  O sonho √© simples. </p><br><img src="https://habrastorage.org/webt/ve/ip/7s/veip7sfanydchkpd_jmd4su5fe8.png"><br><br><p>  Em algum lugar aqui, percebemos que o projeto teria que ser implementado em todo o Yandex.  Combinamos despesas para corrigir erros e melhorar seriamente a qualidade do servi√ßo: havia um or√ßamento geral para a compra de arm√°rios, pe√ßas de reposi√ß√£o e ferramentas.  Com a ajuda de Pasha Melnikov, chefe do grupo de projetos de ferro RnD (na √©poca, e agora ele est√° envolvido no Yandex.Station), conseguimos concordar com uma empresa externa sobre a produ√ß√£o de gabinetes seriais, levando em considera√ß√£o nossos requisitos. </p><br><h3>  Nova vers√£o dos hubs </h3><br><p>  Compramos outra vers√£o dos hubs, sem bot√µes de energia.  Agora n√£o havia necessidade de subir no gabinete e ligar os hubs ap√≥s uma reinicializa√ß√£o.  Montamos um prot√≥tipo manualmente - ele funcionou perfeitamente.  Mas quando o enviamos a Ecaterimburgo, imediatamente come√ßamos a receber reclama√ß√µes de que o gabinete n√£o v√™ alguns telefones.  Entendeu isso apenas no local.  Os novos hubs t√™m uma topologia diferente (mesmo para o mesmo modelo de hub em s√©ries diferentes, a topologia pode variar). </p><br><p>  O antigo e o novo hub de 10 portas no interior consiste em tr√™s chips USB com quatro portas.  Mas no antigo hub com o bot√£o liga / desliga, dois chips est√£o presos em um e no novo eles s√£o conectados por uma "guirlanda".  O n√∫mero de portas √© o mesmo, mas a profundidade do aninhamento √© diferente.  Telefones antigos n√£o foram detectados em portas com uma grande profundidade de aninhamento.  √â bom que eles fossem velhos e n√£o muito necess√°rios.  Resolvemos o problema de uma dor de cabe√ßa cortando a cabe√ßa: pegamos modelos de telefone mais novos para o gabinete, bem, est√°vamos esperando a implementa√ß√£o de nossos pr√≥prios hubs.  √â verdade que o software precisava possibilitar definir diferentes configura√ß√µes de topologia USB para diferentes gabinetes. </p><br><h2>  Hubs pr√≥prios </h2><br><p>  Juntamente com o Pasha, come√ßamos a desenvolver nosso pr√≥prio hub USB externo.  Era necess√°rio resolver o problema dos hubs adquiridos e tamb√©m destacar os dispositivos que o usu√°rio procurava e acelerar o carregamento dos telefones modernos: para isso, pegamos fontes de alimenta√ß√£o poderosas e suportamos os padr√µes mais recentes.  Os hubs tinham a capacidade de conectar sensores externos de temperatura - para que possamos control√°-lo em cada prateleira.  Os tamanhos foram escolhidos para que duas placas de hub instaladas em um caso se encaixassem exatamente no rack de servidor de 19 polegadas.  Os hubs t√™m um perfil discreto para economizar espa√ßo entre as prateleiras - em geral, eles s√£o legais e modernos.  Pasha falar√° com mais detalhes sobre este projeto em Habr√©. </p><br><img src="https://habrastorage.org/webt/fr/ou/uh/frouuhq7yr0jweypbpumfd0tpqq.jpeg"><br><br><h2>  Assembl√©ia </h2><br><p>  A montagem de componentes baseados em arm√°rios adquiridos tamb√©m foi terceirizada.  De acordo com nossos c√°lculos, a equipe de montagem deveria aguentar algumas noites, mas, devido √† abund√¢ncia de trabalho manual, durou algumas semanas.  Os fios que s√£o conectados de maneira n√£o-padr√£o de acordo com os esquemas desenhados com uma caneta em um folheto, solda manual, falta de assentos prontos para componentes e componentes acabados ... Os arm√°rios foram acabados no sentido literal da palavra: furos foram feitos para trancas e as figuras foram cortadas por um moedor para outros componentes. </p><br><h2>  Mais perto da produ√ß√£o </h2><br><p>  J√° sonhamos em dar arm√°rios para produ√ß√£o.  Decidimos que para acelerar √© necess√°rio simplificar a produ√ß√£o e aumentar a participa√ß√£o da terceiriza√ß√£o. </p><br><h3>  Placa perif√©rica </h3><br><p>  Projetou a placa perif√©rica e atualizou os componentes.  Agora, ele era conectado ao Raspberry Pi com um √∫nico cabo e a todos os outros componentes com conectores padr√£o. </p><br>  Montamos um rel√≥gio para o RPi no quadro: antes, coloc√°vamos um componente pronto em separado, comprado em uma loja.  Tamb√©m colocamos um conversor CC / CC (costumava haver uma fonte de alimenta√ß√£o separada) e uma interface RS-485: isso nos permitiu livrar-se da rede de fios.  Anteriormente, n√≥s os conect√°vamos manualmente de ponto a ponto soldando ou colando em um dos pinos RPi.  Verificamos o diagrama, examinamos o ponto de entrada do fio, procuramos o orif√≠cio desejado - e assim com cada fio por sua vez.  Foi muito demorado e provocou erros de montagem.  A nova diretoria usava tomadas telef√¥nicas. <br><br><img src="https://habrastorage.org/webt/bu/u5/11/buu5119817wci7cc-9mk2vderl8.jpeg"><br><br><p>  Descobriu-se mais tarde: ao fazer a fia√ß√£o, n√£o levei em conta que voc√™ precisava conectar o chip RS-485 a pernas RPi bem definidas.  Eu tive que atualizar a vers√£o do quadro.  Quando desenhei o componente de desacoplamento de energia RS-485, n√£o prestei aten√ß√£o no fato de que a folha de dados do microcircuito dava uma vis√£o de baixo, n√£o de cima, e quando o liguei pela primeira vez, produziu um "estrondo!" Com um cheiro caracter√≠stico.  Eu tive que soldar novamente o chip na parte traseira do painel durante toda a primeira s√©rie de pain√©is. </p><br><img src="https://habrastorage.org/webt/ob/7g/vf/ob7gvfrtpjy-iqvwg9dttukakwg.png"><br><br><h3>  Nova vers√£o do gabinete </h3><br><p>  Os arm√°rios comprados deixaram de nos adequar.  Eles pareciam estranhos, porque eram destinados ao servidor, e n√£o ao escrit√≥rio, e tamb√©m precisavam ser modificados manualmente.  Demorou muito tempo e o resultado foi artesanal.  Decidimos fazer nossos pr√≥prios arm√°rios na f√°brica em Arzamas. </p><br><p>  Pedimos √† f√°brica para montar um gabinete modificado com base no gabinete de servidor padr√£o: altere o tamanho, instale a trava, traga os conectores necess√°rios, fa√ßa furos para fixar os elementos.  Eles desenharam esbo√ßos das prateleiras, fizeram um estojo para a unidade eletr√¥nica (RPi e suas amigas), um estojo para o hub.  Quando chegou ao castelo, o engenheiro de design da f√°brica modificou levemente a op√ß√£o comprada e come√ßou a funcionar melhor.  Um relat√≥rio de erro com uma solicita√ß√£o de pull para finalizar o ferro foi enviado aos autores do xerife. </p><br><p>  ,          ,     .      ,        . </p><br><img src="https://habrastorage.org/webt/2o/1c/48/2o1c48-sruzbyqc-w-flwjh9x_w.png"><br><img src="https://habrastorage.org/webt/h9/az/i7/h9azi7um8ew9v8pj1buv2aqnd8g.png"><br><img src="https://habrastorage.org/webt/6_/yu/vb/6_yuvbuqop_0bxooqjwithyojie.png"><br><br><p>     ,      ,       .       ,      .    ‚Äî       . </p><br><img src="https://habrastorage.org/webt/be/qs/80/beqs80_1wvnvkexl2sjwadxrads.jpeg"><br><img src="https://habrastorage.org/webt/uu/gx/zj/uugxzj-rzbqpjeh5rhlrj0dso0c.jpeg"><br><br><p> , ,     : ,  ,  .        ,     .     . </p><br><img src="https://habrastorage.org/webt/y_/fb/lj/y_fbljom5cnrcjj9e2gn218rjwq.jpeg"><br><br><p> ,     ,     :  . </p><br><h2>    </h2><br><p>       .      :  ,  ,   ( ,  )  . . </p><br><p>            . ,  ,   ..   ,      ¬´¬ª.  ¬´¬ª     USB-,      .   ,         .        ‚Äî   ,    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485050/">https://habr.com/ru/post/pt485050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485034/index.html">Automatizando a compila√ß√£o de um projeto Qt no Windows no Travis CI</a></li>
<li><a href="../pt485036/index.html">Por que preciso de suporte instrumental para pagina√ß√£o de chaves</a></li>
<li><a href="../pt485042/index.html">Devido ao suporte obrigat√≥rio a 5G, smartphones com Snapdragon 865 ser√£o piores em 2020</a></li>
<li><a href="../pt485044/index.html">Desmontamos o rel√≥gio digital da sonda Soyuz</a></li>
<li><a href="../pt485046/index.html">Como planejar uma estrat√©gia de produto vencedora</a></li>
<li><a href="../pt485052/index.html">Quem √© um bom QA?</a></li>
<li><a href="../pt485056/index.html">Dividir e conquistar</a></li>
<li><a href="../pt485058/index.html">‚ÄúVerifique o rel√≥gio‚Äù: o que se sabe sobre o novo protocolo de sincroniza√ß√£o de hor√°rio do servidor</a></li>
<li><a href="../pt485068/index.html">C√≥digo Limpo para TypeScript - Parte 2</a></li>
<li><a href="../pt485070/index.html">Andrew Eun "Paix√£o pelo aprendizado de m√°quina". Tradu√ß√£o dos cap√≠tulos 36-46</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>