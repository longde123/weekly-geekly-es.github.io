<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÇ üê∞ üà∂ Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 4: "Compartir privilegios", Parte 3 ü§ô üë©‚Äçüéì üßìüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnolog√≠a de Massachusetts. Conferencia Curso # 6.858. "Seguridad de los sistemas inform√°ticos". Nikolai Zeldovich, James Mickens. A√±o 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 4: "Compartir privilegios", Parte 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/418211/"><h3>  Instituto de Tecnolog√≠a de Massachusetts.  Conferencia Curso # 6.858.  "Seguridad de los sistemas inform√°ticos".  Nikolai Zeldovich, James Mickens.  A√±o 2014 </h3><br>  Computer Systems Security es un curso sobre el desarrollo e implementaci√≥n de sistemas inform√°ticos seguros.  Las conferencias cubren modelos de amenazas, ataques que comprometen la seguridad y t√©cnicas de seguridad basadas en trabajos cient√≠ficos recientes.  Los temas incluyen seguridad del sistema operativo (SO), caracter√≠sticas, gesti√≥n del flujo de informaci√≥n, seguridad del idioma, protocolos de red, seguridad de hardware y seguridad de aplicaciones web. <br><br>  Lecci√≥n 1: "Introducci√≥n: modelos de amenaza" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 2: "Control de ataques de hackers" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 3: ‚ÄúDesbordamientos del b√∫fer: exploits y protecci√≥n‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <br>  Lecci√≥n 4: ‚ÄúSeparaci√≥n de privilegios‚Äù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Entonces, nuestro dibujo representa una "obra de arte", que sus creadores trataron de proteger de las amenazas.  En su caso, creo que estaban muy preocupados, porque al crear el <b>sitio de</b> citas <b>okcupid.com</b> , realmente quer√≠an asegurarse de que la reputaci√≥n de los usuarios del sitio no se ver√≠a afectada por la divulgaci√≥n de datos personales.  De una conversaci√≥n con uno de los desarrolladores del sitio que escribi√≥ el art√≠culo sobre esto, se sabe que en realidad no se vieron comprometidos.  Al menos, no se produjeron fugas de datos debido al uso de la arquitectura <b>OKWS</b> y en parte debido a la supervisi√≥n de la actividad maliciosa. <br><br>  La raz√≥n por la cual las personas no dividen sus aplicaciones en componentes m√°s peque√±os es porque este proceso requiere cierto esfuerzo.  Es necesario seleccionar todas las partes del c√≥digo, definir interfaces claras entre ellas y decidir a qu√© datos debe tener acceso cada componente.  Si decide implementar una nueva funci√≥n, tendr√° que cambiar los datos a los que tiene acceso cada componente del programa, para otorgarle nuevos privilegios o seleccionar algunos, y as√≠ sucesivamente.  Por lo tanto, este es un proceso que consume bastante tiempo. <br><br><img src="https://habrastorage.org/webt/th/7c/nb/th7cnbytweb-shrbg6mai4qmhpw.jpeg"><br><br>  Intentemos comprender c√≥mo est√° dise√±ado el servidor web, y quiz√°s una forma de hacerlo es hacer un seguimiento de c√≥mo el servidor <b>OKWS</b> procesa la solicitud http.  Entonces, similar al que se muestra en la figura anterior, tenemos un navegador web que quiere ir a <b>okcupid.com</b> .  Los desarrolladores del proyecto del sitio imaginaron que tendr√≠an un mont√≥n de m√°quinas, pero solo veremos la interfaz del sitio donde funcionar√° <b>OKWS</b> y otra m√°quina en segundo plano que almacenar√° la base de datos.  Esta segunda m√°quina usa <b>MySQL</b> porque es un buen software para muchas tareas.  Quieren proteger realmente estos datos porque es realmente dif√≠cil llegar a un disco o base de datos sin procesar con datagramas sin procesar. <br><br>  Entonces, ¬øc√≥mo funciona la solicitud, c√≥mo la procesa el servidor <b>OKWS</b> ?  Primero, llega y es procesado por un proceso llamado <b>okd</b> para el despachador de <b>OKWS</b> .  Comprueba que pide esta solicitud y luego hace un par de cosas.  Como es posible que primero deba registrar esta solicitud, la redirige a un componente llamado <b>oklogd</b> , despu√©s de lo cual deber√° crear algunas plantillas, y puede ser necesario crearlas incluso antes de que llegue la solicitud.  Y hace otro componente llamado <b>pubd</b> . <br><br><img src="https://habrastorage.org/webt/wq/uz/o0/wquzo0-ivmzrydzbxgj_ckcecsw.jpeg"><br><br>  Y finalmente, hay un servicio espec√≠fico al que se env√≠a esta solicitud, por lo que en <b>okd</b> hay una tabla del conjunto de servicios que admite.  Presumiblemente, esta solicitud llega a uno de estos servicios, por lo que despu√©s de revisar <b>okd</b> redirigir√° esta solicitud a un proceso de servicio <b>svc</b> espec√≠fico.  Este servicio har√° exactamente lo que la solicitud requiere, por ejemplo, suscribir al usuario al bolet√≠n de noticias, o permitir ver el directorio de usuarios de <b>ocupid</b> , usar la base de datos, etc. <br><br>  Y para esto, probablemente necesite el servicio para dejar la informaci√≥n de la aplicaci√≥n en el <b>registro del</b> componente <b>oklogd</b> .  Y al final del d√≠a, deber√≠a "hablar" con la base de datos.  Los creadores del sitio han implementado este proceso de "comunicaci√≥n" de forma un poco diferente de lo que suele ocurrir en <b>Apache</b> , donde simplemente se comunica con la base de datos y emite consultas <b>SQL</b> arbitrarias.  Se les ocurri√≥ este concepto de un proxy de base de datos, <b>dbproxy</b> , que se encuentra frente a la <b>base de datos MySQL</b> y acepta solicitudes del servicio <b>svc</b> para ejecutarlos.  Creo que esta ilustraci√≥n b√°sicamente muestra c√≥mo funciona <b>OKWS</b> . <br><br><img src="https://habrastorage.org/webt/e1/nb/be/e1nbbexq_wqwyqtsop6vnvlmfd0.jpeg"><br><br>  Hay otro componente que inicia todo esto, se llama <b>okld</b> , y es responsable de iniciar todos los procesos en la interfaz de este servidor web.  Espero que algunas de estas cosas le resulten familiares, porque esta es exactamente la arquitectura que se consider√≥ en el laboratorio.  Parece que es un buen dise√±o.  No ten√≠a <b>pubd</b> , <b>logd</b> y <b>dbproxy en LR</b> , pero ten√≠a <b>okd</b> y <b>svc</b> .  ¬øTiene preguntas sobre <b>OKWS</b> ? <br><br>  <b>Audiencia:</b> ¬øentendimos correctamente que <b>dbproxy</b> no acepta consultas SQL, sino un tipo diferente de consulta? <br><br>  <b>Profesor:</b> s√≠, claro!  ¬øC√≥mo se ve esta interfaz?  No describen esto con gran detalle, pero una cosa que podr√≠a hacer con este <b>dbproxy</b> es almacenar muchos argumentos para <b>las</b> plantillas de consulta <b>SQL</b> .  Por ejemplo, podr√≠a ser una plantilla de consulta de b√∫squeda para sus amigos, seleccion√°ndolos por <b>ID</b> . <br><br><img src="https://habrastorage.org/webt/0e/fv/33/0efv33jbe-yuwdw82mwqzxof_xc.jpeg"><br><br>  Supongamos que hay una plantilla como "seleccione <b>^ ID</b> de su lista de amigos, donde <b>^ ID ="% S "</b> .  Supongamos que desea encontrar a <b>Alice</b> entre sus amigos y enviar una solicitud <b>S</b> , donde el argumento es <b>"</b> <b>Alice</b> <b>"</b> .  Deje que nuestra aplicaci√≥n, disponible en la interfaz, sepa que <b>dbproxy est√°</b> listo para ejecutar tres tipos de solicitudes en su nombre.  Si desea ejecutar la consulta No. 1, y su argumento es <b>"Alice"</b> , entonces le da acceso a la base de datos. <br><br>  <b>Audiencia: ¬ø</b> puede un usuario externo al nivel de un navegador web enviar dicha solicitud a la base de datos o todo se aplica solo a los usuarios internos de la red? <br><br>  <b>Profesor:</b> s√≠, tal vez.  Entonces, ¬øc√≥mo funciona?  De hecho, es extra√±o que esta base de datos est√© en una m√°quina separada, ¬øporque podr√≠a conectarse a la <b>base de</b> datos <b>OKWS</b> o al servidor <b>MySQL</b> ?  Entonces, ¬øqu√© est√° deteniendo esto? <br><br>  <b>Audiencia:</b> cortafuegos? <br><br>  <b>Profesor:</b> s√≠, probablemente en alg√∫n nivel.  Los desarrolladores no describen esto con demasiado detalle, pero es probable que haya alguna red interna en la segunda m√°quina, y hay un cambio entre la interfaz y la base de datos que no se puede acceder desde el mundo exterior.  De hecho, ambas m√°quinas est√°n en la misma red, pero hay un firewall <b>Fw</b> que tiene ciertas reglas.  Quiz√°s sean que solo puede conectarse a esta computadora de interfaz a trav√©s del puerto 80, pero no directamente al servidor interno.  Esta es una de las opciones de protecci√≥n. <br><br><img src="https://habrastorage.org/webt/uu/lq/pt/uulqptu9yvouev1n-gdwegusujc.jpeg"><br><br>  Otro, probablemente, es que cuando se conecta a este <b>proxy de</b> base de datos <b>dbproxy</b> , debe proporcionar un token o clave criptogr√°fica de 20 bytes, y si no lo proporciona, <b>dbproxy</b> rechazar√° su conexi√≥n.  Entonces, la regla es que abra una conexi√≥n TCP, env√≠e sus 20 bytes y, si est√°n equivocados, la conexi√≥n se cierra.  Este, creo, es el significado de tal dise√±o de sistema. <br><br>  Entonces, tratemos de descubrir c√≥mo se a√≠slan estos diferentes procesos aqu√≠.  ¬øC√≥mo puede asegurarse de que todos estos componentes no se abruman entre s√≠? <br><br>  <b>Audiencia: ¬ø</b> diferentes derechos de root y diferentes ID de usuario? <br><br>  <b>Profesor:</b> s√≠, casi cada uno de estos componentes funciona como un <b>uid</b> diferente, as√≠ que aqu√≠, en la descripci√≥n del sistema, hay una tabla completa que describe para cada componente d√≥nde funciona y con qu√© <b>uid</b> .  Entonces podemos escribir que <b>okd</b> tiene su propio <b>uid</b> , <b>pubd</b> tiene su propio <b>uid</b> y <b>oklogd</b> tambi√©n tiene su propio <b>uid</b> . <br><br>  <b>Okld</b> funciona como <b>root</b> , lo cual es bastante infructuoso, pero quiz√°s esto no sea un gran problema.  Luego hay un mont√≥n de identificadores de usuario asignados din√°micamente para cada servicio, por ejemplo, ID 51001, etc. <br><br><img src="https://habrastorage.org/webt/hc/bp/bj/hcbpbjjrkwqqhtdun36v3fm7b_s.jpeg"><br><br>  Por lo tanto, esto asegura que cada servicio no pueda interferir con los procesos de otros servicios.  <b>Chroot</b> tambi√©n se usa ampliamente aqu√≠, por lo que algunos de estos componentes tienen derechos de <b>chroot</b> en directorios separados.  Por ejemplo, <b>okd</b> y <b>svc</b> est√°n dotados de derechos de <b>chroot</b> comunes en algunos directorios.  ¬øPor qu√© crees que estos dos componentes tienen un componente separado y no com√∫n con otros componentes <b>chroot</b> ? <br><br>  <b>Audiencia:</b> porque <b>okd</b> no tiene privilegios de root. <br><br>  <b>Profesor:</b> s√≠, pero ¬øpor qu√© no ponen <b>pubd</b> , <b>oklogd</b> y todos los dem√°s en el mismo <b>chroot</b> ? <br><br>  <b>P√∫blico: ¬øes</b> posible que si los servicios necesitan compartir una gran cantidad de datos, deber√≠an aislarse unos de otros? <br><br>  <b>Profesor:</b> tal vez.  Creo que deber√≠an compartir algunos datos, pero estos datos no est√°n en los archivos, se transfieren a trav√©s de sockets desde <b>okd</b> a los servicios.  Pero, de hecho, ninguno de estos componentes almacena nada interesante en el sistema de archivos. <br><br>  Por lo tanto, no hay nada interesante en el directorio <b>chroot</b> , y creo que los chicos de <b>OKWS</b> simplemente decidieron reducir los gastos improductivos para <b>chroot</b> , como la necesidad de crear una copia del directorio.  Quiz√°s tambi√©n quer√≠an deshacerse de algunos gastos generales de administraci√≥n para cada comando <b>chroot</b> .  Pero como no hay archivos reales aqu√≠, entonces todo est√° en orden. <br><br>  La raz√≥n por la que estos chicos asignaron diferentes <b>chroot</b> para los componentes del entorno es debido a algunas cosas interesantes.  Puede haber plantillas, pero aqu√≠, tal vez, hay un archivo de registro, por lo que no querr√≠an que el archivo de registro se lea accidentalmente, y cosas por el estilo. <br><br>  <b>P√∫blico:</b> ¬øEstos servicios tienen archivos, por ejemplo, como <b>aspx</b> ? <br><br>  <b>Profesor:</b> como se describe en el art√≠culo, el servicio es un √∫nico binario compilado de <b>C ++</b> , por lo que, de hecho, no hay archivos adicionales. <br><br>  Hay plantillas, pero en realidad se transmiten a trav√©s de este mecanismo extra√±o: <b>pubd</b> tiene plantillas en su directorio, las muestra en alg√∫n pre-computadora, formulario de inicio en <b>okd</b> , y <b>okd</b> ya proporciona plantillas para todos los servicios a trav√©s de llamadas <b>RPC</b> .  Por lo tanto, se sientan en la memoria, pero en realidad son inaccesibles directamente a trav√©s del sistema de archivos.  Este es un dise√±o algo paranoico cuando ni siquiera puedo leer las plantillas. <br>  Entonces, ¬øcu√°l es el punto de separar todos estos componentes?  ¬øPor qu√© necesitamos un <b>oklogd</b> separado? <br><br>  <b>Audiencia: ¬ø</b> eliminar la posibilidad de sobrescribir o recortar el diario? <br><br>  <b>Profesor:</b> s√≠, as√≠ que realmente queremos asegurarnos de que si algo sale mal, el diario, al menos, no se corromper√°.  Por lo tanto, hay un archivo de registro separado que este <b>uid</b> puede escribir, y todos los mensajes de registro se env√≠an como <b>RPC</b> para este servicio de registro.  E incluso si todo lo dem√°s se arruina, bueno, con la excepci√≥n de <b>okld</b> , la revista permanecer√° ilesa. <br><br>  <b>P√∫blico:</b> ¬øqu√© sucede si accidentalmente encuentra una manera de leer la revista y no ve lo que otros han hecho con ella? <br><br>  <b>Profesor:</b> no, creo que si "pirateaste" alg√∫n servicio, <b>pubd</b> u otra cosa, puedes escribir cualquier cosa en el diario.  Por lo tanto, crear una <b>entrada de oklogd</b> separada tiene sentido.  En realidad, <b>oklogd</b> es un proceso separado y no solo se actualiza adjuntando archivos como archivos <b>de solo agregado</b> .  Por lo tanto, <b>oklogd</b> no puede agregar informaci√≥n adicional a cada entrada de registro, porque si el sistema operativo admite el archivo de <b>solo agregar</b> , no sabr√° que alguien ha escrito en el archivo cuando esto suceda.  Mientras que <b>oklogd</b> pone una marca de tiempo para cada mensaje y le permite averiguar qu√© servicio realiz√≥ la grabaci√≥n o si vino de <b>okd</b> .  Por lo tanto, en realidad obtiene informaci√≥n adicional en este archivo de registro porque es un servicio separado. <br><br>  ¬øY cu√°l es el significado de la separaci√≥n <b>correcta</b> y por qu√© deber√≠a funcionar con los derechos de root?  Creo que hay varias razones para esto. <br><br>  Audiencia: si no desea que nadie m√°s act√∫e con privilegios de root, debe delegar la funci√≥n de autenticaci√≥n de usuario <b>okld</b> . <br><br><img src="https://habrastorage.org/webt/xg/c2/p0/xgc2p0qzezaptmg1jagd1l3koxi.jpeg"><br><br>  <b>Profesor:</b> si.  Alguien tiene que configurar todo esto <b>uid chroot</b> , y necesita <b>root</b> para este <b>Unix</b> , por lo que <b>okld</b> proporciona esto.  Esta es una de las razones.  Algo mas? <br><br>  <b>Audiencia:</b> ¬ødefinici√≥n de 80 puertos? <br><br>  <b>Profesor:</b> s√≠, por supuesto!  Tienes que enlazar escuchando el puerto 80, que est√° <b>bien</b> y proporciona algo m√°s? <br><br>  <b>P√∫blico:</b> completa la apertura del archivo de registro de <b>oklogd</b> porque no queremos dejar <b>oklogd</b> abierto para evitar el acceso al archivo de registro. <br><br>  <b>Profesor:</b> tal vez.  Pero no s√© si los desarrolladores realmente lo hicieron porque no miraron su c√≥digo fuente.  ¬øCrees que <b>okld</b> abre el archivo de registro y lo pasa <b>oklogd</b> ?  Posiblemente <br><br>  <b>Audiencia:</b> porque de lo contrario, un atacante que comprometi√≥ <b>oklogd</b> podr√≠a borrar todo el registro. <br><br>  <b>Profesor:</b> s√≠, es cierto.  Tal vez desee abrirlo en modo de <b>agregar</b> y luego pasarlo <b>oklogd</b> , entonces tiene m√°s garant√≠as de seguridad para el registro.  Esto es algo que no puede hacer sin privilegios de root. <br><br>  Entonces, ten√≠amos una pregunta sobre la tarea, qu√© suceder√° cuando este token de 20 bytes se "filtre" para acceder a la base de datos.  ¬øQu√© da√±o puede causar esto?  ¬øDeber√≠amos preocuparnos por esto? <br><br>  <b>Audiencia:</b> en este caso, un atacante puede tomar el control de un servicio en particular. <br><br>  <b>Profesor:</b> s√≠, claro, porque ahora puede conectarse y obtener todas las plantillas de consulta.  En realidad parece bastante simple.  Probablemente necesite comprometer uno de estos componentes para poder conectarse primero a la base de datos del servidor.  Entonces, creo que si tiene este token y puede comprometer uno de estos componentes que se muestran en la figura, entonces podr√≠a usar todas estas consultas. <br><br>  Ahora veamos c√≥mo se puede mejorar este dise√±o de <b>OKWS</b> .  Por ejemplo, podr√≠a asignar una unidad de <b>uid</b> separada para cada usuario, excepto para asignar un <b>uid</b> separado para cada servicio.  Aqu√≠, cada servicio, por ejemplo, noticias, b√∫squeda de amigos o creaci√≥n de una cuenta, tiene un <b>ID de usuario</b> separado, pero cada usuario de <b>OKWS</b> no se representa como un <b>UID de</b> <b>Unix</b> .  En realidad, no hay <b>ID de usuario</b> aqu√≠, solo las <b>ID de</b> servicio est√°n presentes aqu√≠.  ¬øCrees que necesitas tener un <b>uid</b> diferente para cada cliente <b>OKWS</b> ? <br><br>  <b>P√∫blico:</b> en este caso, resulta que si un usuario "piratea" un servicio, podr√° acceder a todos los datos de otros usuarios de este servidor. <br><br>  <b>Profesor:</b> s√≠, eso es correcto! <br><br>  <b>P√∫blico:</b> pero si tuviera, de hecho, un servicio separado y un <b>dbproxy</b> separado para cada usuario, entonces ser√≠a imposible acceder a los datos de otras personas. <br><br>  <b>Profesor:</b> s√≠, pero ¬øpodr√≠a ser este un modelo m√°s fuerte?  Creo que los desarrolladores de <b>OKWS</b> no dan ese paso por dos razones.  El primero es el rendimiento.  Si tiene un par de millones de usuarios del sitio <b>okcupid</b> , varios millones de procesos en ejecuci√≥n y un par de millones de <b>dbproxie</b> , entonces los gastos generales de rendimiento son posibles.  Y esto no permitir√° lograr el mismo rendimiento que <b>proporciona la</b> arquitectura <b>OKWS</b> existente. <br><br>  <b>Audiencia: la</b> descripci√≥n de <b>OKWS</b> dice que el rendimiento de este sistema es mejor que otros sistemas.  ¬øC√≥mo se logr√≥ esto? <br><br>  <b>Profesor:</b> Creo que esto se debe en parte a que ajustaron su dise√±o a una carga de trabajo espec√≠fica, adem√°s, escribieron todo esto en <b>C ++</b> .  Una alternativa es escribir algunas cosas en <b>PHP</b> , entonces es probable que obtenga beneficios en este frente. <br><br>  Adem√°s, no tienen muchas de las caracter√≠sticas que tiene <b>Apache</b> .  Tiene un dise√±o de prop√≥sito general, por lo que tiene muchos procesos de trabajo y los recarga de vez en cuando.  Hay muchas conexiones <b>TTP</b> que aseguran la duraci√≥n del proceso de conexi√≥n y mantienen su actividad.  Tambi√©n aumenta el n√∫mero de procesos que se ejecutan en el sistema.  <b>Apache se ha</b> hecho m√°s universal y puede hacer todo lo que le gustar√≠a obtener del servidor de Internet, y los chicos de <b>OKWS est√°n</b> m√°s enfocados en resolver problemas espec√≠ficos. <br><br>  Pero creo que hay otros servidores web en estos <b>d√≠as</b> que probablemente puedan coincidir <b>con el</b> rendimiento de <b>OKWS</b> .  Por ejemplo, <b>Nginx</b> es un servidor web muy optimizado que puede ejecutar en estos d√≠as.  Si desea aplicaciones de alto rendimiento en el lado del servidor, probablemente desee que el proceso largo sea muy similar al servicio <b>OKWS</b> .  Y para que tenga un mecanismo para una interfaz de puerta de enlace <b>CGI</b> com√∫n r√°pida para conectar un programa externo con un servidor web, o un tipo de protocolo que podr√≠a usarse en el lado del servidor para implementar esto incluso en <b>Apache</b> o <b>Nginx</b> .  Por lo tanto, creo que muchas de estas ideas no son exclusivas de <b>OKWS</b> , sino que pueden implementarse en otros servidores web.  Simplemente muestran que mejorar la seguridad no impide el uso de estos "trucos".  Creo que comenzaron con un esquema similar a <b>Apache</b> , pero pensaron que no ser√≠a lo suficientemente seguro. <br><br>  As√≠ que creo que una de las razones por las cuales los creadores de <b>OKWS</b> no quer√≠an introducir privilegios separados para los usuarios fue una posible degradaci√≥n del rendimiento. <br><br><img src="https://habrastorage.org/webt/ai/s9/zb/ais9zbrgrmnoslcojxk0jacxdyc.jpeg"><br><br>  Otra raz√≥n es que su modelo de aplicaci√≥n completo "gira" en torno a un servicio que intenta acceder a los datos de cada usuario, como encontrar amigos en <b>Okcupid</b> o alguien a quien pueda invitar a una cita.  Como resultado, este modelo de aislamiento de usuarios no tiene mucho sentido, porque, en √∫ltima instancia, debe haber un servicio para el que env√≠e una solicitud, y examinar√° todos los dem√°s datos para encontrar una coincidencia para su solicitud.  Entonces, incluso si tiene identificadores de usuario o alg√∫n mecanismo para aislarlos, a√∫n tiene que abrir el acceso al servicio para cada usuario. <br><br>  Para otros servicios, como <b>Gmail</b> o <b>Dropbox</b> , que est√°n mucho m√°s centrados en un usuario espec√≠fico y no ofrecen una capacidad abierta para compartir sus archivos, aislar a los usuarios puede proporcionar m√°s ventajas.  Por ejemplo, en el servidor de <b>Dropbox</b> hay un <b>ID</b> de <b>usuario</b> para cada cliente de <b>Dropbox</b> .  Y si hay un proceso ejecut√°ndose para usted y un proceso ejecut√°ndose para otra persona, incluso utilizando un exploit malicioso, no podr√° obtener la informaci√≥n de otras personas. <br>  Ahora veamos si <b>OKWS realmente</b> logr√≥ mejorar la seguridad en dicho modelo de servidor.  Para evaluar la seguridad, debe considerar cada componente del sistema y determinar qu√© tipo de ataques podr√≠an da√±arlo. <br><br>  Comencemos con <b>okd</b> .  Puede ser atacado con solicitudes a trav√©s del navegador, por ejemplo, causando un desbordamiento del b√∫fer.       c++,  ,       - ,   <b>okd</b>  .      ? <br><br><img src="https://habrastorage.org/webt/qz/md/d9/qzmdd9xheqlsc2fpbgs4e5to3_i.jpeg"><br><br> <b>:</b>        ? <br><br> <b>:</b> ,  ,      .   ? <br><br> <b>:</b>       ,  . <br><br> <b>:</b> ,  .  , ,       ,        <b>http</b> ,   ,   ,     .  ,     . <br><br> <b>:</b>           ? <br><br> <b>:</b> ,       .    ,  ,      ,        , ,  <b>match.com</b>    . , ,      <b>OkCupid</b> . , - ?          ? <br><br> <b>:</b> ,    ,      <b>okd</b> .           ,    ? <br><br> <b>:</b> .   , <b>okd</b>     . <br><br> <b>:</b> ,     ? <br><br> <b>:</b> !      ,      , , ,      ,   .      ,   , ,   ,      . , ,   .   ¬´¬ª <b>okd</b> ,     ,     ,         . <br><br> <b>:</b>         DOS-? <br><br> <b>:</b> ,  , , ¬´¬ª       ¬´¬ª  ,   DOS-    -   . <br><br> <b>:</b>       <b>okd</b> ,     ,  ‚Ä¶ <br><br> <b>:</b> ,  .  ,   , <b>okd</b>    ,         <b>okd</b> ,     .     <b>okd</b> ,           .  ,    <b>okd</b>  ,       ,      ,   ,            . <br><br> <b>:</b>          . <br><br> <b>:</b> ,    .  , <b>okd</b>     .   ,    <b>oklogd</b> ?    ? <br><br> <b>:</b>      . <br><br> <b>:</b> ,          ,             ,   ?       <b>pubd</b> ,  ,     ,  -  . <br><br> <b>:</b> ,    ,   ¬´¬ª  <b>oklogd</b> . <br><br> <b>:</b> ,  .      ,      ,   <b>append-only</b>    ,        . <br><br> <b>:</b> ,      ‚Ä¶ <br><br> <b>:</b> ,        ,   .          . <br><br>     <b>svc</b> ? ,  ,   .       , ,   <b>okd</b>  <b>oklogd</b>    .         ,  ,        . <br><br>   <b>svc</b>  - -,        ,       ,         .   ,         ,        ,       . <br><br>      <b>okld</b> ?       ,      root.       ? ,       .           <b>dbproxy</b> .    <b>okld</b> ?      ¬´¬ª?    ? <br><br> <b>:</b> ,  -   ? <br><br> <b>:</b> ,       .          ,    ,       . ,        ,  -    ,     , ,     -    .         -     .          root-   . <br><br> <b>:</b> -,    ,     -   <b>dbproxy</b> . <br><br> <b>:</b> ! <br><br> <b>:</b>  ,     ,  ,     <b>RPC</b> ,       ,     ,     ,  ,   !      . <br><br><img src="https://habrastorage.org/webt/qs/cu/x6/qscux6nxwgoo9wqu10wj04npz38.jpeg"><br><br> <b>:</b> ,    .       <b>dbproxy</b> ?  ,            .   ,   ¬´¬ª   ,      <b>dbproxy</b>  - . <br><br> <b>:</b>      ,   <b>svc</b>  ‚Ä¶ <br><br> <b>:</b> ,  <b>svc</b>   ,     ! <br><br> <b>:</b>  ,    ,     ! <br><br> <b>:</b>  ,  ,      <b>¬´¬ª</b> ,       ‚Ä¶ <br><br> <b>:</b>   <b></b>     <b>dbproxy</b> . <br><br> <b>:</b> . ,      <b>dbproxy</b> ,   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que entiendas lo que nos da compartir privilegios de aplicaciones. </font><font style="vertical-align: inherit;">Y como podemos ver, esto no es perfecto. </font><font style="vertical-align: inherit;">Hay muchas m√°s cosas que pueden salir mal. </font><font style="vertical-align: inherit;">Pero parece que esta soluci√≥n es, en cualquier caso, mejor que dise√±ar aplicaciones individuales sin privilegios de acceso, donde comenzamos.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dNl22h1kW1k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La versi√≥n completa del curso est√° disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Gracias por quedarte con nosotros.  ¬øTe gustan nuestros art√≠culos?  ¬øQuieres ver m√°s materiales interesantes?  <b>Ap√≥yenos</b> haciendo un pedido o recomend√°ndolo a sus amigos, un <b>descuento del 30% para los usuarios de Habr en un an√°logo √∫nico de servidores de nivel de entrada que inventamos para usted:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">toda la verdad sobre VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps de $ 20 o c√≥mo dividir el servidor?</a>  (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). <br><br>  <b>Dell R730xd 2 veces m√°s barato?</b>  ¬°Solo tenemos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV desde $ 249</a> en los Pa√≠ses Bajos y los Estados Unidos!</b>  Lea sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo construir un edificio de infraestructura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418211/">https://habr.com/ru/post/es418211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418201/index.html">¬øPodemos revivir Duck Hunt?</a></li>
<li><a href="../es418203/index.html">GraphQL API (CRUD) en marcha</a></li>
<li><a href="../es418205/index.html">Space Language Vol. 2: Bienvenido, GJ273b</a></li>
<li><a href="../es418207/index.html">Revisi√≥n de port√°tiles para juegos ASUS ROG Strix GL504GS SCAR II y ASUS ROG Strix GL504GM HERO II</a></li>
<li><a href="../es418209/index.html">Recibimos datos de los contadores Mercury 203.2T en RS-485</a></li>
<li><a href="../es418213/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 5: "De d√≥nde vienen los sistemas de seguridad", parte 1</a></li>
<li><a href="../es418215/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 5: "De d√≥nde vienen los errores del sistema de seguridad", Parte 2</a></li>
<li><a href="../es418217/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: "Oportunidades", parte 1</a></li>
<li><a href="../es418219/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: Oportunidades, Parte 2</a></li>
<li><a href="../es418221/index.html">Curso MIT "Seguridad de sistemas inform√°ticos". Lecci√≥n 6: "Oportunidades", parte 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>