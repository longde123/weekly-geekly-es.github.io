<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒƒ â–¶ï¸ ğŸ¥Œ Sebuah kisah peluncuran yang memengaruhi segalanya â›“ï¸ ğŸ˜· ğŸ§‘ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Musuh Realitas oleh 12f-2 

 Pada akhir April, ketika pejalan kaki putih mengepung Winterfell, sesuatu yang lebih menarik terjadi pada kami, kami mela...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sebuah kisah peluncuran yang memengaruhi segalanya</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/453364/"><img src="https://habrastorage.org/webt/kc/5y/q_/kc5yq_bh4rgol9q8lebwmzsldca.jpeg"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Musuh Realitas</a> oleh 12f-2</i> <br><br>  Pada akhir April, ketika pejalan kaki putih mengepung Winterfell, sesuatu yang lebih menarik terjadi pada kami, kami melakukan peluncuran yang tidak biasa.  Pada prinsipnya, kami terus-menerus memutar fitur-fitur baru di prod (seperti orang lain).  Tapi yang ini tidak seperti orang lain.  Skalanya sedemikian rupa sehingga potensi kesalahan apa pun yang dapat kami lakukan akan memengaruhi semua layanan dan pengguna kami.  Sebagai hasilnya, kami meluncurkan semuanya sesuai rencana, pada waktu henti yang direncanakan dan diumumkan, tanpa konsekuensi untuk penjualan.  Artikel ini adalah tentang bagaimana kita mencapai ini dan bagaimana mereka yang berharap dapat mengulanginya di rumah. <br><a name="habracut"></a><br>  Sekarang saya tidak akan menggambarkan keputusan arsitektur dan teknis kami, katakan bagaimana semuanya bekerja.  Ini adalah catatan pinggir yang lebih mungkin tentang bagaimana salah satu peluncuran paling sulit terjadi, yang saya amati dan di mana saya mengambil bagian langsung.  Saya tidak berpura-pura rincian lengkap atau teknis, mungkin mereka akan muncul di artikel lain. <br><br><h2>  Latar Belakang + fungsionalitas macam apa ini </h2><br>  Kami sedang membangun platform cloud <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mail.ru Cloud Solutions</a> (MCS), tempat saya bekerja sebagai CTO.  Dan sekarang - saatnya untuk melampirkan platform IAM kami (Identity and Access Management), yang menyediakan manajemen terpadu dari semua akun pengguna, pengguna, kata sandi, peran, layanan, dan banyak lagi.  Mengapa diperlukan di cloud adalah pertanyaan yang jelas: semua informasi pengguna disimpan di dalamnya. <br><br>  Biasanya, hal-hal seperti itu mulai dibangun pada awal setiap proyek.  Tetapi MCS secara historis sedikit berbeda.  MCS dibangun dalam dua bagian: <br><br><ul><li>  Openstack dengan modul otorisasi Keystone sendiri, </li><li>  Hotbox (penyimpanan S3) berdasarkan proyek Cloud Mail.ru, </li></ul><br>  di mana layanan baru kemudian muncul. <br><br>  Pada dasarnya, ini adalah dua jenis otorisasi.  Plus, kami menggunakan beberapa perkembangan Mail.ru terpisah, misalnya, penyimpanan kata sandi Mail.ru umum, serta konektor openid yang ditulis sendiri, yang mengaktifkan SSO (otorisasi pass-through) di panel Horizon mesin virtual (native OpenStack UI). <br><br>  Melakukan IAM berarti bagi kita untuk menggabungkan semua ini menjadi satu sistem, sepenuhnya milik kita sendiri.  Pada saat yang sama, jangan kehilangan fungsionalitas di sepanjang jalan, buat cadangan untuk masa depan, yang akan memungkinkan kita untuk memodifikasinya secara transparan tanpa refactoring, dan skala dalam hal fungsionalitas.  Juga pada awalnya, pengguna muncul model peran akses ke layanan (RBAC pusat, kontrol akses berbasis peran) dan beberapa hal kecil lainnya. <br><br>  Tugas itu ternyata non-sepele: python dan perl, beberapa backend, layanan yang ditulis secara independen, beberapa tim pengembangan dan admin.  Dan yang paling penting, ribuan pengguna langsung di sistem produksi tempur.  Semua ini harus ditulis dan, yang paling penting, diluncurkan tanpa korban. <br><br><h2>  Apa yang akan kita mulai </h2><br>  Jika ini sangat kasar, di suatu tempat dalam 4 bulan kami menyiapkan ini: <br><br><ul><li>  Mereka membuat beberapa setan baru yang mengagregasi fungsi-fungsi yang sebelumnya bekerja di berbagai bagian infrastruktur.  Layanan lain diresepkan backend baru dalam bentuk setan ini. </li><li>  Kami menulis repositori kata sandi dan kunci utama kami sendiri, tersedia untuk semua layanan kami, yang dapat dimodifikasi secara bebas sesuai kebutuhan. </li><li>  Dari awal, mereka menulis 4 backend baru untuk Keystone (pengguna, proyek, peran, penetapan peran), yang, pada kenyataannya, menggantikan basisnya, dan sekarang bertindak sebagai repositori tunggal kata sandi pengguna kami. </li><li>  Kami mengajarkan semua layanan Openstack kami untuk menjalankan kebijakan mereka ke layanan kebijakan pihak ketiga alih-alih membaca kebijakan ini secara lokal dari setiap server (ya, secara default Openstack berfungsi seperti itu!) </li></ul><br>  Perubahan besar seperti itu membutuhkan perubahan besar, kompleks, dan yang paling penting, sinkron dalam beberapa sistem yang ditulis oleh tim pengembangan yang berbeda.  Setelah perakitan, seluruh sistem harus bekerja. <br><br>  Bagaimana cara meluncurkan perubahan tersebut dan tidak mengacaukannya?  Pertama, kami memutuskan untuk melihat sedikit ke masa depan. <br><br><h2>  Strategi Peluncuran </h2><br><ul><li>  Dimungkinkan untuk diluncurkan dalam beberapa tahap, tetapi ini akan meningkatkan waktu pengembangan sebanyak tiga kali.  Selain itu, untuk beberapa waktu kami akan melakukan desinkronisasi data secara lengkap dalam database.  Saya harus menulis alat sinkronisasi saya sendiri dan hidup dengan beberapa gudang data untuk waktu yang lama.  Dan ini menciptakan berbagai macam risiko. </li><li>  Segala sesuatu yang dapat mereka persiapkan secara transparan untuk pengguna telah dilakukan sebelumnya.  Butuh 2 bulan. </li><li>  Kami membiarkan diri kami downtime selama beberapa jam - hanya untuk operasi pengguna untuk membuat dan memodifikasi sumber daya. </li><li>  Untuk pekerjaan semua sumber daya yang sudah dibuat, downtime tidak dapat diterima.  Kami merencanakan bahwa ketika meluncurkan sumber daya harus bekerja tanpa downtime dan mempengaruhi pelanggan. </li><li>  Untuk mengurangi dampak pada pelanggan kami, jika terjadi kesalahan, kami memutuskan untuk meluncurkannya pada hari Minggu malam.  Di malam hari, lebih sedikit pelanggan yang mengelola mesin virtual. </li><li>  Kami memperingatkan semua pelanggan kami bahwa selama periode yang dipilih untuk peluncuran, manajemen layanan tidak akan tersedia. </li></ul><br><h2>  Digresi: apa itu peluncuran? </h2><br>  <i>&lt;filosofi hati-hati&gt;</i> <br><br>  Setiap spesialis IT akan dengan mudah menjawab apa itu peluncuran.  Anda meletakkan CI / CD, dan secara otomatis semuanya dikirimkan ke prod.  :) <br><br>  Tentu saja ini benar.  Tetapi kesulitannya adalah bahwa dengan alat-alat modern untuk mengotomatisasi pengiriman kode, pemahaman tentang rolling itu sendiri hilang.  Bagaimana Anda melupakan penemuan epik roda, melihat kendaraan modern.  Semuanya begitu otomatis sehingga peluncuran sering dilakukan tanpa menyadari keseluruhan gambar. <br><br>  Dan keseluruhan gambarnya adalah sebagai berikut.  Peluncuran terdiri dari empat aspek besar: <br><br><ol><li>  Pengiriman kode, termasuk modifikasi data.  Misalnya, migrasi mereka. </li><li>  Rollback kode - kemampuan untuk mengembalikan jika terjadi kesalahan.  Misalnya, melalui pembuatan cadangan. </li><li>  Waktu setiap operasi roll-out / rollback.  Seseorang harus memahami waktu dari operasi apa pun dari dua poin pertama. </li><li>  Fungsionalitas yang terpengaruh.  Penting untuk mengevaluasi dampak positif dan kemungkinan negatif yang diharapkan. </li></ol><br>  Semua aspek ini harus diperhitungkan untuk keberhasilan peluncuran.  Biasanya mereka hanya mengevaluasi poin pertama, terbaik, poin kedua, dan kemudian peluncuran dianggap berhasil.  Tetapi yang ketiga dan keempat bahkan lebih penting.  Pengguna mana yang akan menyukainya jika peluncurannya memakan waktu 3 jam, bukan satu menit?  Atau jika sesuatu yang berlebihan mempengaruhi peluncuran?  Atau downtime satu layanan akan menyebabkan konsekuensi yang tidak terduga? <br><br><h2>  Act 1..n, persiapan untuk rilis </h2><br>  Pada awalnya, saya berpikir tentang menggambarkan secara singkat pertemuan kami: seluruh tim, bagian-bagiannya, banyak diskusi dalam poin kopi, perselisihan, tes, badai otak.  Kemudian saya berpikir bahwa itu akan berlebihan.  Empat bulan pengembangan selalu terdiri dari ini, terutama ketika Anda menulis bukan sesuatu yang dapat disampaikan terus-menerus, tetapi satu fitur besar pada sistem kehidupan.  Yang memengaruhi semua layanan, tetapi pengguna tidak boleh mengubah apa pun kecuali "satu tombol di antarmuka web." <br><br>  Pemahaman kami tentang cara meluncurkan, berubah dari setiap pertemuan baru, dan sangat signifikan.  Misalnya, kami akan memperbarui seluruh basis penagihan kami.  Tetapi mereka menghitung waktu dan menyadari bahwa tidak mungkin untuk melakukan ini dalam waktu peluncuran yang masuk akal.  Kami membutuhkan hampir satu minggu tambahan untuk shard dan mengarsipkan database penagihan.  Dan ketika kecepatan peluncuran yang diharapkan tidak berhasil setelah itu, mereka memesan setrika tambahan yang lebih kuat, di mana mereka menyeret seluruh pangkalan.  Bukannya kami tidak ingin melakukan ini sebelumnya, tetapi kebutuhan saat ini untuk meluncurkan tidak meninggalkan kami pilihan. <br><br>  Ketika salah satu dari kami ragu bahwa peluncuran dapat memengaruhi ketersediaan mesin virtual kami, kami menghabiskan waktu seminggu untuk menguji, bereksperimen, mengurai kode dan mendapatkan pemahaman yang jelas bahwa ini tidak akan terjadi dalam produksi kami, dan bahkan orang yang paling ragu pun setuju dengan hal ini. <br><br>  Sementara itu, orang-orang techsupport melakukan percobaan independen mereka untuk menulis instruksi kepada klien tentang cara menghubungkan, yang harus berubah setelah diluncurkan.  Mereka mengerjakan UX yang mudah digunakan, menyiapkan instruksi, dan memberikan saran pribadi. <br><br>  Kami telah mengotomatiskan semua operasi peluncuran yang dimungkinkan.  Setiap operasi ditulis, bahkan yang paling sederhana, terus-menerus mengendarai tes.  Mereka berdebat tentang cara terbaik untuk mematikan layanan - menurunkan daemon atau memblokir akses ke layanan dengan firewall.  Daftar tim dibuat untuk setiap tahap peluncuran, itu terus diperbarui.  Kami menggambar dan terus memperbarui bagan Gantt untuk semua pekerjaan peluncuran, dengan timing. <br><br>  Jadi ... <br><br><h2>  Babak terakhir, sebelum diluncurkan </h2><br>  ... saatnya untuk memulai. <br><br>  Seperti kata pepatah, sebuah karya seni tidak dapat diselesaikan, hanya untuk menyelesaikannya.  Penting untuk melakukan upaya yang keras, memahami bahwa Anda tidak akan menemukan segalanya, tetapi percaya bahwa Anda membuat semua asumsi yang masuk akal, menyediakan semua kemungkinan kasus, menutup semua bug penting, dan semua peserta melakukan semua yang mereka bisa.  Semakin banyak kode yang Anda keluarkan, semakin sulit untuk meyakinkan diri sendiri tentang hal ini (selain itu, siapa pun mengerti bahwa tidak mungkin untuk meramalkan segalanya). <br><br>  Kami memutuskan bahwa kami siap untuk meluncurkan ketika kami yakin bahwa kami telah melakukan segala yang mungkin untuk menutup semua risiko bagi pengguna kami yang terkait dengan dampak dan waktu henti yang tidak terduga.  Artinya - apa pun bisa salah kecuali: <br><br><ol><li>  Pengaruh (sakral bagi kami, yang paling berharga) dari infrastruktur pengguna, </li><li>  Fungsi: penggunaan layanan kami setelah peluncuran harus sama dengan sebelumnya. </li></ol><br><h2>  Luncurkan </h2><br><img src="https://habrastorage.org/webt/mx/vt/yq/mxvtyqnl26yvqbxhego52zj9d8c.png"><br>  <i>Dua bergulir, 8 tidak mengganggu</i> <br><br>  Kami mengambil downtime untuk semua permintaan dari pengguna dalam 7 jam.  Saat ini, kami memiliki rencana roll-out dan rollback. <br><br><ul><li>  Peluncuran itu sendiri memakan waktu sekitar 3 jam. </li><li>  2 jam - untuk pengujian. </li><li>  2 jam - cadangan untuk kemungkinan kembalikan perubahan. </li></ul><br>  Bagan Gantt telah dikompilasi untuk setiap tindakan, berapa banyak waktu yang dibutuhkan, apa yang berjalan secara berurutan, apa yang dilakukan secara paralel. <br><br><img src="https://habrastorage.org/webt/gl/4v/2p/gl4v2pcxxorqbzzhuvlbdsi0jtg.png"><br>  <i>Sepotong grafik peluncuran Gantt, salah satu versi sebelumnya (tanpa eksekusi paralel).</i>  <i>Alat sinkronisasi paling berharga</i> <br><br>  Semua peserta memiliki peran mereka dalam meluncurkan, tugas apa yang mereka lakukan, yang menjadi tanggung jawab mereka.  Kami mencoba menjadikan setiap tahap otomatis, memutar kembali, mengumpulkan umpan balik, dan memutar lagi. <br><br><h3>  Kronik peristiwa </h3><br>  Jadi, 15 orang datang untuk bekerja pada hari Minggu, 28 April, jam 10 malam.  Selain peserta utama, beberapa datang hanya untuk mendukung tim, yang berkat khusus untuk mereka. <br><br>  Secara terpisah, perlu disebutkan bahwa penguji utama kami sedang berlibur.  Tidak mungkin diluncurkan tanpa pengujian, kami sedang mengerjakan opsi.  Seorang kolega setuju untuk menguji kami keluar dari liburan, yang karenanya ia memiliki rasa terima kasih yang tak terukur dari seluruh tim. <br><br>  <b>00:00</b>  <b>Berhenti</b> <br>  Kami menghentikan permintaan pengguna, menutup papan nama, kata mereka, pekerjaan teknis.  Pemantauan berteriak, tetapi semuanya normal.  Kami memverifikasi bahwa tidak ada yang jatuh, kecuali harus.  Dan kami mulai bekerja pada migrasi. <br><br>  Setiap orang memiliki rencana peluncuran dicetak untuk poin, semua orang tahu siapa yang melakukan apa dan pada titik apa.  Setelah setiap tindakan, kami memeriksa dengan waktu yang tidak melebihi mereka, dan semuanya berjalan sesuai rencana.  Mereka yang tidak terlibat dalam peluncuran langsung pada tahap saat ini, bersiaplah dengan meluncurkan mainan online (Xonotic, tipe 3 kwaki), agar tidak mengganggu rekan kerja.  :) <br><br>  <b>02:00 pagi</b>  <b>Diluncurkan</b> <br>  Kejutan yang menyenangkan - kami selesai meluncurkan satu jam sebelumnya, karena optimalisasi basis data dan skrip migrasi kami.  Seruan universal, "diluncurkan!"  Semua fungsi baru di prod, tapi sejauh ini hanya kita yang bisa melihat antarmuka.  Semua orang masuk ke mode uji coba, disortir menjadi tumpukan, dan mulai melihat apa yang terjadi pada akhirnya. <br><br>  Itu tidak berhasil dengan baik, kami memahami ini setelah 10 menit, ketika tidak ada yang terhubung dan tidak berfungsi dalam proyek anggota tim.  Sinkronisasi cepat, suara masalah kami, prioritaskan, bongkar tim dan masuk ke debug. <br><br>  <b>2:30 pagi</b>  <b>Dua masalah besar vs empat mata</b> <br>  Kami menemukan dua masalah besar.  Kami menyadari bahwa pelanggan tidak akan melihat beberapa layanan yang terhubung, dan akan ada masalah dengan akun mitra.  Keduanya terkait dengan skrip migrasi yang tidak sempurna untuk beberapa kasus tepi.  Kami harus memperbaikinya sekarang. <br><br>  Kami menulis pertanyaan yang memperbaiki ini, setidaknya 4 mata.  Kami menggulung pre-gate untuk memastikan bahwa mereka berfungsi dan tidak merusak apa pun.  Anda bisa melanjutkan.  Secara paralel, pengujian integrasi biasa kami mulai, yang mendeteksi beberapa masalah lagi.  Semuanya kecil, tetapi juga perlu diperbaiki. <br><br>  <b>03:00 pagi</b>  <b>-2 Masalah +2 masalah</b> <br>  Dua masalah besar sebelumnya telah diperbaiki, hampir semua masalah kecil juga.  Semua orang yang tidak terlibat dalam perbaikan secara aktif bekerja di akun mereka dan melaporkan apa yang mereka temukan.  Kami memprioritaskan, mendistribusikan dengan perintah, meninggalkan tidak kritis di pagi hari. <br><br>  Menjalankan tes lagi, mereka mengungkapkan dua masalah besar baru.  Tidak semua kebijakan layanan tiba dengan benar, sehingga beberapa permintaan pengguna tidak diautentikasi.  Ditambah masalah baru dengan akun mitra.  Kami bergegas menonton. <br><br>  <b>03.20.</b>  <b>Sinkronisasi darurat</b> <br>  Satu masalah baru diperbaiki.  Untuk yang kedua, kami mengatur sinkronisasi darurat.  Kami memahami apa yang terjadi: perbaikan sebelumnya memperbaiki satu masalah, tetapi membuat yang lain.  Kami mengambil istirahat untuk mencari tahu bagaimana melakukannya dengan benar dan tanpa konsekuensi. <br><br>  <b>03:30 pagi</b>  <b>Enam mata</b> <br>  Kami menyadari apa yang seharusnya menjadi kondisi akhir pangkalan sehingga semuanya baik untuk semua mitra.  Kami menulis permintaan di 6 mata, berguling di pra-batang, tes, berguling di prod. <br><br>  <b>04:00.</b>  <b>Semuanya berfungsi</b> <br>  Semua tes lulus, tidak ada masalah kritis yang terlihat.  Dari waktu ke waktu, sesuatu tidak berfungsi dalam tim, kami merespons dengan cepat.  Paling sering, alarm salah.  Tetapi kadang-kadang sesuatu tidak mencapai, di suatu tempat halaman terpisah tidak berfungsi.  Kami duduk, memperbaiki, memperbaiki, memperbaiki.  Tim terpisah meluncurkan fitur besar terakhir - penagihan. <br><br>  <b>04:30.</b>  <b>Point of no return</b> <br>  Titik tidak bisa kembali mendekati, yaitu, waktu ketika, jika kita mulai memutar kembali, kita tidak akan memenuhi waktu henti yang diberikan kepada kita.  Ada masalah dengan penagihan, yang mengetahui segalanya dan menulis, tetapi keras kepala tidak ingin menghapus uang dari pelanggan.  Ada beberapa bug pada halaman individu, tindakan, status.  Fungsi utama berfungsi, semua tes berhasil lulus.  Kami memutuskan bahwa peluncuran berlangsung, kami tidak akan mundur. <br><br>  <b>06:00 pagi</b>  <b>Kami membuka sama sekali di UI</b> <br>  Bug diperbaiki.  Beberapa pengguna yang tidak memengaruhi dibiarkan kemudian.  Kami membuka antarmuka untuk semua orang.  Kami terus menyulap tagihan, menunggu umpan balik pengguna dan hasil pemantauan. <br><br>  <b>07:00 pagi</b>  <b>Masalah pemuatan API</b> <br>  Menjadi jelas bahwa kami memiliki sedikit perencanaan beban yang salah pada API kami dan menguji beban ini, yang tidak dapat mengidentifikasi masalah.  Akibatnya, â‰ˆ5% dari permintaan gagal.  Kami memobilisasi, mencari alasan. <br><br>  Tagihan keras kepala, tidak mau bekerja juga.  Kami memutuskan untuk menundanya nanti untuk membuat perubahan dalam mode tenang.  Artinya, semua sumber daya di dalamnya diakumulasikan, tetapi penghapusan dari pelanggan tidak lulus.  Tentu saja, ini merupakan masalah, tetapi dibandingkan dengan peluncuran secara umum, hal itu tampaknya tidak mendasar. <br><br>  <b>08:00.</b>  <b>Perbaiki API</b> <br>  Kami meluncurkan perbaikan untuk beban, yang gagal tersisa.  Kami mulai pulang. <br><br>  <b>10 pagi</b>  <b>Semua</b> <br>  Semuanya sudah diperbaiki.  Dalam pemantauan dan pelanggan diam, tim secara bertahap pergi tidur.  Penagihan tetap, kami akan mengembalikannya besok. <br><br>  Kemudian pada siang hari ada peluncuran yang memperbaiki log, notifikasi, kode pengembalian dan kode kustom dari beberapa pelanggan kami. <br><br>  Jadi, peluncurannya berhasil!  Tentu saja, itu bisa lebih baik, tetapi kami membuat kesimpulan tentang apa yang tidak cukup untuk mencapai kesempurnaan. <br><br><h2>  Total </h2><br>  Dalam 2 bulan persiapan aktif untuk waktu peluncuran, 43 tugas diselesaikan, berlangsung dari beberapa jam hingga beberapa hari. <br><br>  Selama peluncuran: <br><br><ul><li>  setan baru dan yang berubah - 5 buah, menggantikan 2 monolit; </li><li>  perubahan di dalam basis data - semua 6 dari basis data kami dengan data pengguna terpengaruh, dibongkar dari tiga basis data lama ke satu yang baru selesai; </li><li>  frontend sepenuhnya ulang; </li><li>  jumlah kode yang diunduh - 33 ribu baris kode baru, â‰ˆ 3 ribu baris kode dalam tes, â‰ˆ 5 ribu baris kode migrasi; </li><li>  semua data utuh, tidak ada mesin virtual tunggal dari pelanggan yang menderita.  :) </li></ul><br><h2>  Praktik yang baik untuk peluncuran yang baik </h2><br>  Kami dibimbing oleh mereka dalam situasi yang sulit ini.  Tetapi, secara umum, berguna untuk mengamati mereka dalam peluncuran apa pun.  Namun semakin sulit peluncurannya, semakin besar peran yang mereka mainkan. <br><br><ol><li>  Hal pertama yang perlu Anda lakukan adalah memahami bagaimana peluncuran dapat memengaruhi atau memengaruhi pengguna.  Akankah ada downtime?  Jika demikian, lalu apa itu downtime?  Bagaimana ini akan mempengaruhi pengguna?  Apa skenario terbaik dan terburuk?  Dan tutup risikonya. </li><li>  Rencanakan semuanya.  Pada setiap tahap, Anda perlu memahami semua aspek peluncuran: <br><ul><li>  pengiriman kode; </li><li>  kembalikan kode; </li><li>  waktu setiap operasi; </li><li>  fungsionalitas yang terpengaruh. </li></ul></li><li>  Mainkan skenario sampai semua tahap peluncuran jelas, serta risiko pada masing-masing tahap.  Jika ragu, Anda dapat beristirahat dan menjelajahi tahap meragukan secara terpisah. </li><li>  Setiap tahap dapat dan harus ditingkatkan jika itu membantu pengguna kami.  Misalnya, ini akan mengurangi waktu henti atau menghilangkan beberapa risiko. </li><li>  Menguji rollback jauh lebih penting daripada menguji pengiriman kode.  Penting untuk memverifikasi bahwa sebagai akibat dari rollback, sistem akan kembali ke kondisi semula, konfirmasikan ini dengan pengujian. </li><li>  Segala sesuatu yang dapat diotomatisasi harus diotomatisasi.  Segala sesuatu yang tidak dapat diotomatisasi harus ditulis sebelumnya pada lembar contekan. </li><li>  Catat kriteria keberhasilan.  Fungsi apa yang harus tersedia dan kapan?  Jika ini tidak terjadi, mulailah rencana kembalikan. </li><li>  Dan yang paling penting, orang-orang.  Setiap orang harus menyadari apa yang dia lakukan, untuk apa dan apa yang tergantung pada tindakannya dalam proses peluncuran. </li></ol><br>  Dan jika dalam satu kalimat, maka dengan perencanaan dan elaborasi yang baik, Anda dapat meluncurkan apa pun yang Anda inginkan tanpa konsekuensi untuk penjualan.  Bahkan itu mempengaruhi semua layanan Anda di prod. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id453364/">https://habr.com/ru/post/id453364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id453352/index.html">Bagaimana drone mengirimkan obat-obatan penting di Ghana</a></li>
<li><a href="../id453354/index.html">Klasifikasi tutupan lahan menggunakan eo-learning. Bagian 3</a></li>
<li><a href="../id453356/index.html">Tren dan rekomendasi terkini tentang aglomerasi lembaga keuangan besar</a></li>
<li><a href="../id453360/index.html">Kota tanpa kemacetan lalu lintas</a></li>
<li><a href="../id453362/index.html">HabraConf # 1 - Mundur untuk Backend</a></li>
<li><a href="../id453366/index.html">Cara menggunakan koma dalam bahasa Inggris: 15 aturan dan contoh kesalahan</a></li>
<li><a href="../id453368/index.html">Pemulihan data dari tabel XtraDB tanpa struktur file menggunakan analisis byte file ibd</a></li>
<li><a href="../id453370/index.html">Konfrontasi 2019: Tim Keamanan Jet mengambil tempat pertama di pertahanan</a></li>
<li><a href="../id453374/index.html">Penyedia API & SDK Chat, Panggilan Audio & Video Top 10 untuk Bisnis Perusahaan</a></li>
<li><a href="../id453376/index.html">Bagaimana membuang-buang waktu dan sumber daya SSD dengan sia-sia? Mudah dan sederhana</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>