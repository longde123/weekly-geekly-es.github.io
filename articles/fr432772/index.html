<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚úàÔ∏è üßùüèæ üì¨ Comment nous avons cr√©√© un service de campagne publicitaire conforme au RGPD üëë üß† üéæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le RGPD, entr√© en vigueur en mai de cette ann√©e, a s√©rieusement affect√© le march√© du marketing Internet. Ses participants veulent former le public le ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons cr√©√© un service de campagne publicitaire conforme au RGPD</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maxilect/blog/432772/">  Le RGPD, entr√© en vigueur en mai de cette ann√©e, a s√©rieusement affect√© le march√© du marketing Internet.  Ses participants veulent former le public le plus pr√©cis pour l'affichage des publicit√©s, mais maintenant, pour cela, il est n√©cessaire d'obtenir le consentement explicite de l'utilisateur, sinon m√™me une petite ressource de niche peut s'exposer √† des amendes de plusieurs millions de dollars.  Certaines ressources ont √©t√© ferm√©es, mais beaucoup sont en cours de conversion pour r√©pondre √† de nouvelles exigences.  Et notre projet de service de gestion de campagne publicitaire pour un client des √âtats-Unis en est un excellent exemple. <br><br><img src="https://habrastorage.org/webt/i2/ko/yo/i2koyopci8twyqzurhdgqkcxym8.jpeg" alt="image"><br><a name="habracut"></a><br><h3>  √Ä propos du service </h3><br>  Notre client, une entreprise am√©ricaine de Los Angeles, se concentre sur le marketing dans l'industrie musicale.  Son service prend en charge des campagnes publicitaires complexes pour des √©quipes de diff√©rentes tailles - des gangs du coin aux stars de la sc√®ne mondiale. <br><br>  En substance, le service client est une startup qui d√©veloppe une plateforme marketing sp√©cialis√©e qui a r√©ussi √† collecter les investissements des maisons de disques, car elle prend en compte les sp√©cificit√©s du comportement du public dans une industrie particuli√®re.  La plate-forme vous permet de cibler des annonces en analysant le comportement des utilisateurs qui ont manifest√© leur int√©r√™t pour une √©quipe particuli√®re.  Les principaux utilisateurs de la ressource sont les musiciens et les travailleurs de l'industrie (gestionnaires, employ√©s de maisons de disques, organisateurs de concerts et bien d'autres). <br><br>  Au d√©but de notre projet, le service fonctionnait d√©j√† et a r√©ussi √† gagner une certaine position sur le march√©.  Cependant, il s'agissait plut√¥t d'un prototype qui testait l'hypoth√®se de base d'une entreprise, d'autant plus qu'une partie de la fonctionnalit√© √©tait mise en ≈ìuvre via des services partenaires.  Nous nous sommes connect√©s au d√©veloppement afin de cr√©er une architecture √† part enti√®re, et le RGPD a √©t√© l'impulsion m√™me qui a lanc√© toutes les transformations.  Notre t√¢che n'√©tait pas seulement de mettre √† jour le service existant, mais de le reconstruire avec la nouvelle l√©gislation, de l'actualiser et de l'amener √† une interface utilisateur plus uniforme. <br><br><h3>  Impl√©mentation </h3><br>  L'ensemble du projet a √©t√© divis√© en plusieurs √©tapes. <br><br><img src="https://habrastorage.org/webt/pi/0r/n8/pi0rn8jspha0icrlm2fowfagm8k.jpeg" alt="image"><br><br>  Dans un premier temps, nous avons r√©√©crit de z√©ro la partie qui avait pr√©c√©demment fonctionn√© en PHP - raccourcisseur de lien et service d'autorisation. <br><br>  Le raccourcisseur de liens fait partie de la fonctionnalit√© disponible gratuitement pour tous les utilisateurs enregistr√©s et est utilis√© pour attirer les clients vers les services payants de l'entreprise.  Le service vous permet d'apporter un lien long vers un formulaire court afin de le publier sur les r√©seaux sociaux.  Dans le m√™me temps, vous pouvez personnaliser le lien en d√©finissant, par exemple, le g√©o-ciblage: selon le pays d'origine de l'utilisateur, il peut afficher diff√©rentes pages de destination. <br>  En mettant √† jour le backend, nous avons utilis√© OpenJDK 1.8, Kotlin et Spring boot / data / web - le cadre standard pour un projet qui ne s'attend pas √† des charges √©lev√©es.  Soit dit en passant, c'est dans ce projet que nous avons essay√© Kotlin ¬´au combat¬ª pour la premi√®re fois, et en raison de sa syntaxe, cela nous a permis d'acc√©l√©rer consid√©rablement le d√©veloppement.  Certainement, nous l'utiliserons dans d'autres projets. <br><br>  La base de donn√©es du service d'autorisation et du raccourcisseur mis en ≈ìuvre √† la premi√®re √©tape est construite sur la base de PostgreSQL - le mod√®le de stockage des donn√©es relationnelles √©tait bien adapt√© pour r√©soudre ces probl√®mes. <br><br>  Dans un deuxi√®me temps, nous avons repris la gestion des campagnes publicitaires.  Cette fonctionnalit√© sur la plate-forme client existait √©galement auparavant, mais via le service du partenaire, pour lequel vous deviez payer.  Maintenant, la plate-forme du client s'est d√©velopp√©e au point o√π il √©tait n√©cessaire de prendre soin de son infrastructure.  Contrairement √† un tiers, le service propre est beaucoup plus facile √† d√©velopper dans la bonne direction, apportant rapidement les changements n√©cessaires. <br><br>  Dans cette partie du projet, nous avons impl√©ment√© uniquement l'API externe pour le gestionnaire de campagne.  Mais √† la troisi√®me √©tape, nous avons d√©velopp√© ce module - nous avons finalis√© l'API et cr√©√© une interface utilisateur √† part enti√®re pour le gestionnaire de campagne. <br><br>  En parall√®le, nous avons d√©velopp√© une petite DMP (plateforme de gestion des donn√©es) propri√©taire qui g√®re la collecte des donn√©es des visiteurs.  Les donn√©es DMP sont stock√©es dans MongoDB, car nous avons d√©cid√© de quitter le terrain pour la future mise √† l'√©chelle horizontale de cette base de donn√©es.  D√©sormais, DMP traite jusqu'√† 2 000 requ√™tes par seconde (en pointe), tandis que nous nous sommes concentr√©s sur le stockage d'un t√©raoctet de donn√©es.  Un tel volume aurait pu √™tre enregistr√© dans PostgreSQL, mais √† long terme, il aurait fallu d√©ployer de gros efforts pour √©voluer. <br>  Le m√™me MongoDB est utilis√© dans la base de donn√©es du gestionnaire de campagne (Campaign DB) - ici le mod√®le d'une base de donn√©es orient√©e document nous a bien approch√©.  Les campagnes se d√©roulent comme des entit√©s uniques et peuvent se d√©velopper. <br><br>  Tous les caches fonctionnent sur Redis. <br><br>  Frontend: Angular 5, TypeScript, HTML5, Sass, Node.js, npm, Angular CLI. <br><br>  Au cours de la derni√®re √©tape du projet, nous avons achev√© l'int√©gration des syst√®mes clients et des services d'un partenaire cl√©, ouvrant l'acc√®s √† une √©norme base de musiciens pour l'entreprise, ce qui assurera une augmentation du nombre d'utilisateurs. <br><br>  Il y a eu quelques difficult√©s dans le projet.  Le client souhaitait sauvegarder les donn√©es utilisateurs et les enregistrements accumul√©s pendant le fonctionnement du service, tout en modifiant l√©g√®rement le mod√®le.  Parall√®lement √† la modification de l'architecture, nous avons transf√©r√© les enregistrements et chang√© ses principes - du nom d'utilisateur au courrier √©lectronique en tant que connexion, ce qui nous a apport√© de nombreuses nuits blanches en raison des restrictions sur le nombre d'utilisateurs avec la m√™me adresse √©lectronique.  Le mod√®le des droits dans le syst√®me a chang√©.  Auparavant, le service fonctionnait selon un mod√®le √† deux niveaux, mais nous avons mis en ≈ìuvre un mod√®le de droits sans restrictions (y compris la possibilit√© d'√©mettre des droits limit√©s). <br><br>  Dans le m√™me temps, la fonctionnalit√© s'est √©tendue.  Par exemple, √† un moment donn√©, un magasin multiple est apparu, √† l'aide duquel, pour les visiteurs finaux qui cliquent sur des liens courts vers une composition sp√©cifique, vous pouvez cr√©er des pages avec une liste de services o√π ces compositions sont disponibles pour achat l√©gal ou √©coute. <br><br><h3>  Il vaut la peine de dire s√©par√©ment sur le RGPD </h3><br>  Le principal march√© de notre client est les √âtats-Unis, mais environ 10% du trafic que l'entreprise ne voulait pas perdre provenait d'Europe.  Depuis l'entr√©e en vigueur du nouveau r√®glement (25 mai 2018), son ciblage est tout simplement d√©sactiv√©.  Apr√®s avoir consult√© des avocats, nous avons construit le service de mani√®re √† ne pas contredire le RGPD et √† partir du 16 ao√ªt, nous avons recommenc√© √† viser. <br>  Honn√™tement, nous avons √©tudi√© les subtilit√©s de la r√©glementation tout au long du groupe de deux semaines.  La difficult√© √† ce stade √©tait que, avec le flou g√©n√©ral du libell√©, il n‚Äôexiste pour l‚Äôinstant aucune pratique d‚Äôapplication de la loi - des cas r√©els qui pourraient montrer comment le faire correctement et ce qui ne va pas.  Cependant, maintenant (apr√®s nos propres recherches et consultations avec des avocats), nous sommes confiants dans l'architecture mise en ≈ìuvre de la solution. <br><br>  La logique du service impliquait l'ajout d'un utilisateur qui suit un lien court vers un public sp√©cifique, afin que plus tard, il puisse voir des publicit√©s.  En termes de GDPR, cela ne peut pas √™tre fait sans le consentement explicite de l'utilisateur.  Et nous avons mis en place une demande de consentement - lorsque vous cliquez sur le lien en bas de la page, une plaque appara√Æt avec une question et deux boutons.  La demande est ouverte aux utilisateurs dont l'IP appartient √† l'Europe, et leur r√©ponse est stock√©e sous forme de cookies, afin que les visiteurs n'aient pas √† appuyer sur les boutons √† chaque fois. <br>  S'il n'y a pas de consentement de l'utilisateur (c'est-√†-dire les cookies), nous ne lui montrons tout simplement pas de pixel, c'est-√†-dire  dans les statistiques g√©n√©rales du service, le fait de la visite sera comptabilis√©, mais les donn√©es des utilisateurs ne seront pas collect√©es et prises en compte. <br><br>  Le RGPD impose des restrictions architecturales - les donn√©es personnelles doivent non seulement √™tre correctement collect√©es, mais √©galement stock√©es en toute s√©curit√©.  Dans notre cas, ces restrictions s'appliquent au DMP mis en ≈ìuvre (en d√©pit du fait qu'il stocke des donn√©es anonymes avec des identifiants anonymes qui ne leur permettent que de se d√©sanonymiser) et √† la base de donn√©es du service d'autorisation.  Dans notre architecture, ces bases sont clairement allou√©es dans des blocs s√©par√©s.  Conform√©ment √† la r√©glementation, l'acc√®s des tiers √† ces modules ¬´sensibles¬ª est naturellement limit√©. <br><br>  Seul le service correspondant a acc√®s √† la base de donn√©es d'autorisation.  Tous les autres services ne savent rien des donn√©es personnelles de l'utilisateur de la plateforme - ils n'ont besoin que de la validation du service d'autorisation. <br><br>  La base de donn√©es DMP comprend √©galement uniquement le service √©ponyme.  Dans le m√™me temps, seuls les agr√©gats de donn√©es d'audience sont renvoy√©s de la base de donn√©es, mais pas les donn√©es elles-m√™mes.  Ces agr√©gats constituent la base des analyses que les utilisateurs du service de l'industrie musicale re√ßoivent dans leur compte personnel. <br>  Nous avons √©galement une proc√©dure obligatoire pour le t√©l√©chargement et la suppression des donn√©es utilisateur.  Il y avait une question sur la fa√ßon de v√©rifier que l'utilisateur demande vraiment l√©gitimement ses donn√©es.  Et nous utilisons le cookie stock√© par l'utilisateur comme facteur de v√©rification. <br><br>  Le projet a √©t√© achev√© r√©cemment, il est donc trop t√¥t pour parler de r√©sultats num√©riques. <br><br>  Auteur de l'article: Nikolay Eremin <br><br>  PS Nous publions nos articles sur plusieurs sites du Runet.  Abonnez-vous √† nos pages sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cha√Ænes</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">VK</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FB</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Telegram</a> pour d√©couvrir toutes nos publications et autres actualit√©s Maxilect. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr432772/">https://habr.com/ru/post/fr432772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr432762/index.html">Le d√©tecteur de mensonge AI peut d√©tecter quand une personne ment</a></li>
<li><a href="../fr432764/index.html">UDB. Qu'est-ce que c'est?</a></li>
<li><a href="../fr432766/index.html">Comment encoder un message secret dans une empreinte digitale</a></li>
<li><a href="../fr432768/index.html">√âcouteurs sans fil pour les "marathons en s√©rie": dans Dolby, ils seront offerts pour 599 $</a></li>
<li><a href="../fr432770/index.html">Les botnets et leurs types: ce que l'on sait en 2018</a></li>
<li><a href="../fr432774/index.html">Frontend DevDay. Enregistrement de rapport</a></li>
<li><a href="../fr432776/index.html">Le livre "R√©agissez en action"</a></li>
<li><a href="../fr432778/index.html">D√©veloppement d'un convertisseur abaisseur sur STM32F334: principe de fonctionnement, calculs, prototypage</a></li>
<li><a href="../fr432780/index.html">Pourquoi l'empathie est n√©cessaire dans le monde de la technologie</a></li>
<li><a href="../fr432782/index.html">Installation multi-serveurs Zimbra Collaboration Suite</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>