<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™‡ğŸ» ğŸ‘š ğŸ‘§ Kibanaç”¨æˆ·æŒ‡å—ã€‚ å¯è§†åŒ–ã€‚ ç¬¬6éƒ¨åˆ† ğŸ›©ï¸ ğŸ¤˜ğŸ¼ ğŸš¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kibanaä¸­å®˜æ–¹æ•°æ®å¯è§†åŒ–æ–‡æ¡£ç¿»è¯‘çš„äº”åˆ†ä¹‹ä¸€ã€‚ 

 åŸå§‹ææ–™çš„é“¾æ¥ï¼š Kibanaç”¨æˆ·æŒ‡å—[6.6]Â»å¯è§†åŒ– 

 é“¾æ¥åˆ°ç¬¬1éƒ¨åˆ†ï¼šã€Š Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚ å¯è§†åŒ–ã€‚ ç¬¬ä¸€éƒ¨åˆ† 
 é“¾æ¥è‡³ç¬¬2éƒ¨åˆ†ï¼šã€Š Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚ å¯è§†åŒ–ã€‚ ç¬¬äºŒéƒ¨åˆ† 
 é“¾æ¥è‡³ç¬¬3éƒ¨åˆ†ï¼šã€Š Kibanaç”¨æˆ·æŒ‡å—...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kibanaç”¨æˆ·æŒ‡å—ã€‚ å¯è§†åŒ–ã€‚ ç¬¬6éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442278/">  Kibanaä¸­å®˜æ–¹æ•°æ®å¯è§†åŒ–æ–‡æ¡£ç¿»è¯‘çš„äº”åˆ†ä¹‹ä¸€ã€‚ <br><br> åŸå§‹ææ–™çš„é“¾æ¥ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaç”¨æˆ·æŒ‡å—[6.6]Â»å¯è§†åŒ–</a> <br><br> é“¾æ¥åˆ°ç¬¬1éƒ¨åˆ†ï¼šã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯è§†åŒ–ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a> <br> é“¾æ¥è‡³ç¬¬2éƒ¨åˆ†ï¼šã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯è§†åŒ–ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a> <br> é“¾æ¥è‡³ç¬¬3éƒ¨åˆ†ï¼šã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯è§†åŒ–ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸‰éƒ¨åˆ†</a> <br> é“¾æ¥è‡³ç¬¬4éƒ¨åˆ†ï¼šã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯è§†åŒ–ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬4éƒ¨åˆ†</a> <br> é“¾æ¥è‡³ç¬¬5éƒ¨åˆ†ï¼šã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaç”¨æˆ·æŒ‡å—ã€‹ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯è§†åŒ–ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬5éƒ¨åˆ†</a> <br><br> å†…å®¹ï¼š <br><br>  1. Vegaå›¾ <br><br>  2.æ£€æŸ¥å¯è§†åŒ– <br><a name="habracut"></a><br><h3> ç»´åŠ ä¼¯çˆµ </h3><br>  <b>è­¦å‘Š</b> æ­¤åŠŸèƒ½æ˜¯è¯•éªŒæ€§çš„ï¼Œåœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šæ›´æ”¹æˆ–åˆ é™¤ã€‚  Elasticå°†å°½åŠ›è§£å†³ä»»ä½•é—®é¢˜ï¼Œä½†SLAå®˜æ–¹GAåŠŸèƒ½ä¸æ”¯æŒå®éªŒåŠŸèƒ½ã€‚ <br> æ‚¨å¯ä»¥ç¦»çº¿æˆ–åœ¨åœ°å›¾é¡¶éƒ¨åœ¨Kibanaä¸­æ„å»º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vega</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VegaLiteæ•°æ®çš„</a>å¯è§†åŒ–ã€‚ è¦è§‚çœ‹Vegaçš„å®é™…æ“ä½œï¼Œè¯·è§‚çœ‹æ­¤<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç®€çŸ­çš„æ¦‚è¿°è§†é¢‘</a> ã€‚ <br><br><h3>  Vegaå…¥é—¨ </h3><br> è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªVegaå¯è§†åŒ–æ–‡ä»¶ã€‚ <br><br><ol><li> åœ¨Kibanaä¸­ï¼Œé€‰æ‹©â€œå¯è§†åŒ–â€å¹¶æ·»åŠ Vegaå¯è§†åŒ–ã€‚ æ‚¨åº”è¯¥çœ‹åˆ°é»˜è®¤å›¾å½¢ã€‚ </li><li>å°è¯•å°†<code>mark</code>ä»<code>line</code>æ›´æ”¹ä¸º<code>point</code> ï¼Œ <code>area</code> ï¼Œ <code>bar</code> ï¼Œ <code>circle</code> ï¼Œ <code>square</code> ï¼Œ...ï¼ˆè¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a> ï¼‰ã€‚ </li><li> å°è¯•å…¶ä½™çš„Vegaæˆ–VegaLiteå¯è§†åŒ–æ•ˆæœã€‚ æ‚¨å¯èƒ½éœ€è¦ä½¿URLç»å¯¹ï¼Œä¾‹å¦‚ï¼Œå°†<code>"url": "data/world-110m.json"</code>æ›¿æ¢ä¸º<code>"url": "https://vega.github.io/editor/data/world-110m.json"</code> ï¼ˆè¯·å‚é˜…ä¸‹é¢çš„æ³¨é‡Šï¼‰ã€‚ </li><li> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">makelogså®ç”¨å·¥å…·</a> ï¼Œåˆ›å»ºä¸€äº›logstashæ•°æ®å¹¶å°è¯•ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">logstashç¤ºä¾‹</a> ï¼ˆ <b>è¯·å‹¿åœ¨ç”Ÿäº§é›†ç¾¤ä¸Šä½¿ç”¨makelogsï¼‰ã€‚</b> </li></ol><br><h3> ç»´åŠ vsç»´åŠ è±ç‰¹ </h3><br>  VegaLiteæ˜¯Vegaçš„ç®€åŒ–ç‰ˆæœ¬ï¼Œå¯ç”¨äºå¿«é€Ÿå…¥é—¨ï¼Œä½†æœ‰å¾ˆå¤šé™åˆ¶ã€‚  VegaLiteåœ¨æ‰§è¡Œå‰ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºVegaã€‚ æ¯”è¾ƒ<a href="">logstash-simple_line-vega</a>å’Œ<a href="">logstash-simple_line-vegalite</a> ï¼ˆéƒ½ä½¿ç”¨ä¸€äº›æ¥è‡ªElasticsearchçš„logstashæ•°æ®ï¼‰ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤ç¼–è¾‘å™¨</a>å°†VegaLiteè½¬æ¢ä¸ºVegaã€‚ <br><br><h3>  ElasticsearchæŸ¥è¯¢ </h3><br> é»˜è®¤æƒ…å†µä¸‹ï¼ŒVega <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•°æ®</a>é¡¹å¯ä»¥å°†å†…éƒ¨å’Œå¤–éƒ¨æ•°æ®ä¸<code>"url"</code>å‚æ•°ä¸€èµ·ä½¿ç”¨ã€‚  Kibanaé€šè¿‡é‡æ–°åŠ è½½<code>"url"</code>å€¼æ·»åŠ äº†å¯¹ç›´æ¥ElasticsearchæŸ¥è¯¢çš„æ”¯æŒã€‚ <br> è¿™æ˜¯ä¸€ä¸ªElasticsearchæŸ¥è¯¢çš„ç¤ºä¾‹ï¼Œè¯¥æŸ¥è¯¢è®¡ç®—æ‰€æœ‰ç´¢å¼•ä¸­çš„æ–‡æ¡£æ•°ã€‚ è¯¥æŸ¥è¯¢ä½¿ç”¨<code><b>@timestamp</b></code>å­—æ®µè¿‡æ»¤å‡ºæ—¶é—´èŒƒå›´å¹¶å°†å…¶åˆ’åˆ†ä¸ºæ¡å½¢æ®µã€‚ <br><br><pre> <code class="plaintext hljs">// An object instead of a string for the url value // is treated as a context-aware Elasticsearch query. url: { // Filter the time picker (upper right corner) with this field %timefield%: @timestamp // Apply dashboard context filters when set %context%: true // Which indexes to search index: _all // The body element may contain "aggs" and "query" subfields body: { aggs: { time_buckets: { date_histogram: { // Use date histogram aggregation on @timestamp field field: @timestamp // interval value will depend on the daterange picker // Use an integer to set approximate bucket count interval: { %autointerval%: true } // Make sure we get an entire range, even if it has no data extended_bounds: { min: { %timefilter%: "min" } max: { %timefilter%: "max" } } // Use this for linear (eg line, area) graphs // Without it, empty buckets will not show up min_doc_count: 0 } } } // Speed up the response by only including aggregation results size: 0 } }</code> </pre><br> å®Œæ•´ç»“æœå…·æœ‰ä»¥ä¸‹ç»“æ„ç±»å‹ï¼š <br><br><pre> <code class="plaintext hljs">{ "aggregations": { "time_buckets": { "buckets": [{ "key_as_string": "2015-11-30T22:00:00.000Z", "key": 1448920800000, "doc_count": 28 }, { "key_as_string": "2015-11-30T23:00:00.000Z", "key": 1448924400000, "doc_count": 330 }, ...</code> </pre><br> è¯·æ³¨æ„ï¼Œ <code>"key"</code>æ˜¯Unixæ—¶é—´æˆ³ï¼Œå¯ä»¥ä¸ç»Vegaæ—¥æœŸè¡¨è¾¾å¼è½¬æ¢è€Œä½¿ç”¨ã€‚ <br><br> å¯¹äºå¤§å¤šæ•°å›¾å½¢ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªç»†åˆ†å€¼åˆ—è¡¨ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨è¡¨è¾¾å¼<code>format: {property: "aggregations.time_buckets.buckets"}</code>ä»…å…³æ³¨æˆ‘ä»¬éœ€è¦çš„æ•°æ®ã€‚ <br><br> å¯ä»¥ä½¿ç”¨å•ä¸ªèŒƒå›´å’Œä¸Šä¸‹æ–‡ä¿¡æ¯é¢æ¿æŒ‡å®šè¯·æ±‚ã€‚ è¯¥æŸ¥è¯¢ç­‰æ•ˆäº<code>"%context%": true, "%timefield%": "@timestamp"</code> ï¼Œåªæ˜¯å°†æ—¶é—´èŒƒå›´åç§»äº†10åˆ†é’Ÿã€‚ <br><br><pre> <code class="plaintext hljs">{ body: { query: { bool: { must: [ // This string will be replaced // with the auto-generated "MUST" clause "%dashboard_context-must_clause%" { range: { // apply timefilter (upper right corner) // to the @timestamp variable @timestamp: { // "%timefilter%" will be replaced with // the current values of the time filter // (from the upper right corner) "%timefilter%": true // Only work with %timefilter% // Shift current timefilter by 10 units back shift: 10 // week, day (default), hour, minute, second unit: minute } } } ] must_not: [ // This string will be replaced with // the auto-generated "MUST-NOT" clause "%dashboard_context-must_not_clause%" ] } } } }</code> </pre><br>  <code>"%timefilter%"</code>ä¹Ÿå¯ç”¨äºç¡®å®šå•ä¸ªæœ€å°å€¼æˆ–æœ€å¤§å€¼ã€‚ å¦‚ä¸Šæ‰€ç¤ºï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå€¼ï¼ˆæœ€å°å€¼å’Œæœ€å¤§å€¼ï¼‰è®¾ç½®date_histogramä¸­çš„extended_boundsã€‚ å¯ä»¥ä½¿ç”¨<code>"min": {"%timefilter%": "min"}</code>ä»£æ›¿ç¡¬ç¼–ç çš„å€¼ï¼Œè¯¥å€¼å°†åœ¨å½“å‰æ—¶é—´èŒƒå›´çš„å¼€å§‹å¤„è¢«è¦†ç›–ã€‚ è¿˜æ”¯æŒ<code>shift</code>å’Œ<code>unit</code>å€¼ã€‚ å¯ä»¥åŠ¨æ€è®¾ç½®â€œé—´éš”â€ï¼Œå…·ä½“å–å†³äºå½“å‰é€‰æ‹©çš„èŒƒå›´ï¼š <code>"interval": {"%autointerval%": 10}</code>å°†å°è¯•è·å–å¤§çº¦10-15ä¸ªæ•°æ®ç‚¹ï¼ˆæ®µï¼‰ã€‚ <br><br><h3> å¼¹æ€§åœ°å›¾æ–‡ä»¶ </h3><br> è¿™æ˜¯æ ¹æ®æŸç§æœºåˆ¶è®¿é—®Elastic Map Serviceæ–‡ä»¶çš„èƒ½åŠ›ã€‚ <br><br><pre> <code class="plaintext hljs">url: { // "type" defaults to "elasticsearch" otherwise type: emsfile // Name of the file, exactly as in the Region map visualization name: World Countries } // The result is a geojson file, get its features to use // this data source with the "shape" marks // https://vega.github.io/vega/docs/marks/shape/ format: {property: "features"}</code> </pre><br><h3> ç»´åŠ åœ°å›¾ </h3><br> é»˜è®¤æƒ…å†µä¸‹ï¼ŒKibanaè´´å›¾å¯ç”¨ä½œVegaå›¾çš„åŸºç¡€ã€‚ è¦å¯ç”¨ï¼Œè¯¥å›¾å¿…é¡»åœ¨ä¸»æœºé…ç½®ä¸­å®šä¹‰<code>type=map</code> ã€‚ <br><br><pre> <code class="plaintext hljs">{ "config": { "kibana": { "type": "map", // Initial map position "latitude": 40.7, // default 0 "longitude": -74, // default 0 "zoom": 7, // default 2 // defaults to "default". Use false to disable base layer. "mapStyle": false, // default 0 "minZoom": 5, // defaults to the maximum for the given style, // or 25 when base is disabled "maxZoom": 13, // defaults to true, shows +/- buttons to zoom in/out "zoomControl": false, // defaults to true, disables mouse wheel zoom "scrollWheelZoom": false, // When false, repaints on each move frame. // Makes the graph slower when moving the map "delayRepaint": true, // default true } }, /* the rest of Vega JSON */ }</code> </pre><br> è¯¥å¯è§†åŒ–å°†è‡ªåŠ¨åµŒå…¥ç§°ä¸º<code>"projection"</code> ã€‚ ç”¨å®ƒæ¥è®¡ç®—æ‰€æœ‰åœ°ç†æ ‡ç­¾çš„ä½ç½®ã€‚ æ­¤å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç»åº¦ï¼Œçº¬åº¦å’Œæ¯”ä¾‹ã€‚ è¿™äº›ä¿¡å·å¯ä»¥åœ¨å›¾å½¢ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ›´æ–°ä»¥æ›´æ”¹åœ°å›¾çš„ä½ç½®ã€‚ <br><br><h3> ä¾¦é”™ </h3><br><h4> æµè§ˆå™¨è°ƒè¯•æ§åˆ¶å° </h4><br> ä½¿ç”¨æµè§ˆå™¨å·¥å…·è¿›è¡Œè°ƒè¯•ï¼ˆä¾‹å¦‚ï¼Œåœ¨Chromeä¸­ä¸ºF12æˆ–Ctrl + Shift + Jï¼‰æ¥æ£€æŸ¥<code>VEGA_DEBUG</code>å˜é‡ï¼š* <code>VEGA_DEBUG</code>è®¿é—®View Vegaå¯¹è±¡ã€‚ æœ‰å…³å¦‚ä½•åœ¨è¿è¡Œæ—¶æ£€æŸ¥æ•°æ®å’Œä¿¡å·çš„ä¿¡æ¯ï¼Œè¯·å‚è§ã€Š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vegaè°ƒè¯•æŒ‡å—ã€‹</a> ã€‚ å¯¹äºVegaLiteï¼Œ <code>VEGA_DEBUG.view.data('source_0')</code>è·å–ä¸»æ•°æ®é›†ã€‚ å¯¹äºVegaï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªæ•°æ®åç§°ï¼Œè¿™åœ¨æ‚¨çš„Vegaè§„èŒƒä¸­æ˜¯ä¸“é—¨çš„ã€‚  * <code>vega_spec</code>çš„ä¸€äº›ä¿®æ”¹åï¼ŒVega JSONå›¾çš„<code>vega_spec</code>è§„èŒƒã€‚ å¯¹äºVegaLiteï¼Œè¿™æ˜¯VegaLiteç¼–è¯‘å™¨çš„è¾“å‡ºã€‚  * <code>vegalite_spec</code>å¦‚æœå®ƒæ˜¯ä¸€ä¸ªVegaLiteå›¾ï¼Œåˆ™åœ¨ç¼–è¯‘VegaLiteä¹‹å‰è¯¥å›¾çš„JSONè§„èŒƒ <br><br><h4> èµ„æ–™ </h4><br> å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ElasticsearchæŸ¥è¯¢ï¼Œè¯·ç¡®ä¿æ¥æ”¶åˆ°çš„æ•°æ®ç¬¦åˆæ‚¨çš„æœŸæœ›ã€‚ æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æµè§ˆå™¨è°ƒè¯•å·¥å…·ï¼ˆä¾‹å¦‚F12ï¼‰ä¸­çš„â€œç½‘ç»œâ€æ ‡ç­¾ã€‚ ç¨å¾®ä¿®æ”¹å›¾å½¢ï¼Œä½¿å…¶è¿›è¡Œæœç´¢æŸ¥è¯¢å¹¶æŸ¥çœ‹æœåŠ¡å™¨å“åº”ã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kibanaå¼€å‘å·¥å…·â€</a>é€‰é¡¹å¡-å°†ç´¢å¼•åç§°æ”¾åœ¨ç¬¬ä¸€è¡Œä¸­ï¼š <code>GET &lt;INDEX_NAME&gt;/_search</code> ï¼Œç„¶ååœ¨ä¸‹ä¸€è¡Œæ·»åŠ æŸ¥è¯¢ï¼ˆä»…<code>"query"</code>å­—æ®µçš„å€¼ï¼‰ã€‚ <br> å¦‚æœæ‚¨éœ€è¦ä¸ä»–äººå…±äº«å›¾å½¢ï¼Œåˆ™å¯ä»¥å°†æ•°æ®å­—ç¬¦ä¸²çš„å“åº”å¤åˆ¶åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">gist.github.com</a> ï¼Œå¯èƒ½å¸¦æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">.json</a>æ‰©å±•åï¼Œä½¿ç”¨[raw]æŒ‰é’®ï¼Œç„¶åç›´æ¥åœ¨å›¾å½¢ä¸­ä½¿ç”¨æ­¤urlã€‚ <br> ä¸ºäº†é˜²æ­¢Vegaä½¿ç”¨éESæ•°æ®æºï¼Œè¯·åœ¨kibana.ymlæ–‡ä»¶ä¸­æ·»åŠ <code>vega.enableExternalUrls: false</code> ã€‚ <br><br><h3> æœ‰ç”¨çš„é“¾æ¥ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¼–è¾‘å™¨</a> -åŒ…æ‹¬Vegaå’ŒVegaLiteçš„ç¤ºä¾‹ï¼Œä½†ä¸æ”¯æŒä»»ä½•ç‰¹å®šçš„KibanaåŠŸèƒ½ï¼Œä¾‹å¦‚ElasticsearchæŸ¥è¯¢å’Œäº¤äº’å¼åŸºç¡€å›¾ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•™ç¨‹</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a>å’ŒVegaLite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¤ºä¾‹</a> ã€‚ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•™ç§‘ä¹¦</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£</a>å’ŒVega <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¤ºä¾‹</a> ã€‚ </li></ul><br><h4> ä½¿ç”¨Vegaå’ŒVegaLiteç¤ºä¾‹ </h4><br> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vega</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VegaLiteç¤ºä¾‹æ—¶</a> ï¼Œæ‚¨éœ€è¦ä¿®æ”¹â€œæ•°æ®â€éƒ¨åˆ†ä»¥ä½¿ç”¨ç»å¯¹URLã€‚ ä¾‹å¦‚ï¼Œå°†<code>"url": "data/world-110m.json"</code>æ›¿æ¢ä¸º<code>"url": "https://vega.github.io/editor/data/world-110m.json"</code> ã€‚ åŒæ ·ï¼Œåœ¨å¸¸è§„çš„Vegaç¤ºä¾‹ä¸­ï¼Œä»–ä»¬ä½¿ç”¨<code>"autosize": "pad"</code>å¸ƒå±€æ¨¡å‹<code>"autosize": "pad"</code>å’ŒKibanaä½¿ç”¨<code>fit</code> ã€‚ åˆ é™¤æ‰€æœ‰<code>autosize</code> ï¼Œ <code>width</code>å’Œ<code>height</code>å€¼ã€‚ è¯·å‚è§ä¸‹é¢çš„å°ºå¯¸å’Œä½ç½®ã€‚ <br><br><h4> å…¶ä»–é…ç½®é€‰é¡¹ </h4><br> è¿™äº›é€‰é¡¹ç‰¹å®šäºKibanaã€‚ å¡æ”¯æŒå…·æœ‰å…¶ä»–é…ç½®é€‰é¡¹ã€‚ <br><br><pre> <code class="plaintext hljs">{ config: { kibana: { // Placement of the Vega-defined signal bindings. // Can be `left`, `right`, `top`, or `bottom` (default). controlsLocation: top // Can be `vertical` or `horizontal` (default). controlsDirection: vertical // If true, hides most of Vega and VegaLite warnings hideWarnings: true // Vega renderer to use: `svg` or `canvas` (default) renderer: canvas } } /* the rest of Vega code */ }</code> </pre><br><h4> å¤§å°å’Œä½ç½® </h4><br>  Vegaå’ŒVegaLiteã€‚ <br><br> é»˜è®¤æƒ…å†µä¸‹ï¼ŒKibanaä¸­çš„Vegaå›¾å°†ä¸ºVegaå’ŒVegaLiteå›¾ä½¿ç”¨autosize <code>autosize = { type: 'fit', contains: 'padding' }</code>å¸ƒå±€æ¨¡å‹ã€‚  <code>fit</code>æ¨¡å‹ä½¿ç”¨æ‰€æœ‰å¯ç”¨ç©ºé—´ï¼Œè€Œå¿½ç•¥<code>width</code>å’Œ<code>height</code>å€¼ï¼Œä½†è€ƒè™‘åˆ°ç¼©è¿›å€¼ã€‚ æ‚¨å¯ä»¥é€šè¿‡æŒ‡å®šå…¶ä»–<code>autosize</code>å€¼æ¥è¦†ç›–æ­¤è¡Œä¸ºã€‚ <br><br> åœ°å›¾ä¸Šçš„ç»´åŠ ã€‚ <br><br> æ‰€æœ‰Vegaå›¾å½¢éƒ½å°†ä½¿ç”¨é›¶å‡¹ç—•<code>fit</code>æ¨¡å‹å¿½ç•¥<code>autosize</code> ï¼Œ <code>width</code> ï¼Œ <code>height</code>å’Œ<code>padding</code> ã€‚ <br><br><h3> å¯è§†åŒ–æ£€æŸ¥ </h3><br> è®¸å¤šå¯è§†åŒ–æ–‡ä»¶å…è®¸æ‚¨æ£€æŸ¥å¯è§†åŒ–æ–‡ä»¶åŸºç¡€çš„æ•°æ®ã€‚ <br> è¦æ£€æŸ¥å¯è§†åŒ–æ•ˆæœï¼Œè¯·å•å‡»ç¼–è¾‘å™¨ä¸­çš„â€œ <b>æ£€æŸ¥â€</b>æŒ‰é’®ï¼Œæˆ–ä»â€œä»ªè¡¨æ¿â€é¢æ¿èœå•ä¸­é€‰æ‹©â€œ <b>æ£€æŸ¥</b> â€ã€‚ <br><br> åˆå§‹å±å¹•æ˜¾ç¤ºç”¨äºå¯è§†åŒ–çš„åŸºæœ¬æ•°æ®ã€‚ æ‚¨å¯ä»¥å°†æ•°æ®ä½œä¸º<b>æ ¼å¼</b>æˆ–<b>åŸå§‹</b>æ ¼å¼çš„é€—å·åˆ†éš”å€¼ï¼ˆCSVï¼‰æ–‡ä»¶åŠ è½½ã€‚  <b>æ ¼å¼åŒ–</b>å°†ä»¥è¡¨æ ¼å¼åŠ è½½æ•°æ®ã€‚  <b>Raw</b>åŠ è½½æ˜¾ç¤ºçš„æ•°æ®-æ—¥æœŸä¸ºæ—¶é—´æˆ³ï¼Œä¸å¸¦åƒä½åˆ†éš”ç¬¦çš„æ•°å­—ç­‰ã€‚ <br><br> è¦æŸ¥çœ‹æ”¶é›†æ•°æ®çš„è¯·æ±‚ï¼Œ <b>è¯·</b>ä»å³ä¸Šæ–¹çš„â€œ <b>æŸ¥çœ‹â€</b>èœå•ä¸­é€‰æ‹©â€œ <b>è¯·æ±‚</b> â€ã€‚ <br><br> å¯ç”¨çš„è§†å›¾å–å†³äºæ£€æŸ¥çš„å¯è§†åŒ–ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442278/">https://habr.com/ru/post/zh-CN442278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442266/index.html">Delta Chat-ç”µå­é‚®ä»¶ä¹‹ä¸Šçš„åˆ†æ•£å¼Messenger</a></li>
<li><a href="../zh-CN442268/index.html">AsyncIO Micropythonï¼šå¼‚æ­¥ç¼–ç¨‹ä¸­çš„åŒæ­¥æ–¹æ³•</a></li>
<li><a href="../zh-CN442270/index.html">ä¸º3Dæ‰“å°åˆ›å»º3Dæ¨¡å‹æ—¶è¦é¿å…çš„5ä¸ªé”™è¯¯</a></li>
<li><a href="../zh-CN442272/index.html">Go + =è½¯ä»¶åŒ…ç‰ˆæœ¬æ§åˆ¶</a></li>
<li><a href="../zh-CN442274/index.html">Dart 2.å¼‚æ­¥ç¼–ç¨‹ï¼šæ•°æ®æµ</a></li>
<li><a href="../zh-CN442280/index.html">Dodoä¸­çš„æœºå™¨å­¦ä¹ ã€‚ å¦‚æœæ‚¨æ˜¯å¼€å‘äººå‘˜ï¼Œå¦‚ä½•å¯åŠ¨æ–°æ–¹å‘</a></li>
<li><a href="../zh-CN442282/index.html">Dart 2.å¼‚æ­¥ç¼–ç¨‹ï¼šæœŸè´§</a></li>
<li><a href="../zh-CN442284/index.html">NoVerifyï¼šæ¥è‡ªVKontakteå›¢é˜Ÿçš„PHP linterç°åœ¨å·²åœ¨å…¬å…±é¢†åŸŸ</a></li>
<li><a href="../zh-CN442286/index.html">ä¿„ç½—æ–¯çœ¼ç§‘åŒ»ç”Ÿè°ˆåˆ°äº†ä»¿ç”Ÿè§†è§‰ã€‚ æ–°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºæ¼”ç¤ºäº†ç½‘ç»œçš„å·¥ä½œ</a></li>
<li><a href="../zh-CN442288/index.html">è¾å°„ï¼šæ¥æº</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>