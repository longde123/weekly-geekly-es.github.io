<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💏 🙉 🕋 HL 2018. Zusammenfassung des Berichts „Machen Sie Passwörter wieder großartig! Wie man rohe Gewalt besiegt und Hackern nichts hinterlässt “ 👩🏾‍🏭 👩🏾‍🤝‍👩🏻 🖖🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Mein Name ist Akhmadeev Rinat, ich bin Sr. PHP-Entwickler. 


 Ich präsentiere Ihnen die Zusammenfassung des Berichts. Machen Sie Passwört...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HL 2018. Zusammenfassung des Berichts „Machen Sie Passwörter wieder großartig! Wie man rohe Gewalt besiegt und Hackern nichts hinterlässt “</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434708/"><p><img src="https://habrastorage.org/webt/ey/xs/qh/eyxsqh1i0z7s2_fexslxgbdi-fy.png" alt="Passwörter sind wie Unterwäsche"></p><br><p>  Hallo Habr!  Mein Name ist Akhmadeev Rinat, ich bin Sr.  PHP-Entwickler. </p><br><p>  Ich präsentiere Ihnen die Zusammenfassung des Berichts. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Machen Sie Passwörter wieder großartig!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie man Bruteforce besiegt und Hackern nichts</a> von Alexey Ermishkin von Virgil Security mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HighLoad ++ 2018 hinterlässt</a> . </p><br><p>  Als ich zu dem Bericht ging, war ich pessimistisch.  Aber seitdem  Da es sich um Virgil Security handelt, habe ich mich trotzdem entschlossen zu gehen.  Am Anfang schien der Bericht wirklich Kapitän zu sein, und ich verlor sogar das Interesse, aber wie sich herausstellte, fand ich sogar einige neue Ansätze für den Passwortschutz heraus, abgesehen vom üblichen Salt-Hashing. </p><br><p>  In dem Bericht werden Möglichkeiten zum Schutz von Passwörtern vor Hashes für modernere Ansätze wie das Facebook-Passwort Onion, Sphinx und Pythia erörtert.  Ganz am Ende werden die neuen Simple Password-Hardened Encryption Services (PHE) eingeführt. </p><br><p>  Der Bericht hat mir so gut gefallen, dass ich ein Kompendium vorbereitet habe.  Ich empfehle jedem, sich vertraut zu machen. </p><a name="habracut"></a><br><p>  Alexey Ermishkin hat die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Folien</a> und den Videobericht in den Kommentaren geteilt: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/y1MQyl13ssc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="konspekt">  Zusammenfassung </h2><br><h3 id="vstuplenie">  Eintrag </h3><br><p><img src="https://habrastorage.org/webt/wd/sg/tu/wdsgtu8tz1yjoswesm2sjy7gs0k.png" alt="Folie 0. Machen Sie Passwörter wiederholen"></p><br><p>  Hallo allerseits, guten Morgen allerseits!  Ich freue mich, Sie alle auf der Highload Conference zu sehen.  Mein Name ist Alexey Ermishkin, ich arbeite für Virgil Security. </p><br><p><img src="https://habrastorage.org/webt/p_/dm/2o/p_dm2o99hyouir1mw0qn1nq_k0s.png" alt="Virgilsecurity"></p><br><p>  Wir sind an der Entwicklung verschiedener kryptografischer Produkte für einzelne Entwickler und Unternehmen beteiligt.  Wir konzentrieren uns auf End-to-End-Lösungen. In diesem Fall müssen Sie dem Service nicht vertrauen, um Aktionen wie Datenübertragung, Authentifizierung usw. ausführen zu können.  Unsere SDKs sind offen und für alle zugänglich. </p><br><p><img src="https://habrastorage.org/webt/mt/_q/ey/mt_qeyv-o-f8tcltewqjz5bdxze.png" alt="Folie 7. Leistung, Komfort, Sicherheit"></p><br><p>  Passwörter werden seit langem als Mittel zur Authentifizierung verwendet, um irgendwohin zu gelangen.  Das war lange bevor Computer auftauchten.  Aber mit dem Aufkommen von Computern und dem Aufkommen von IT-Systemen haben die Menschen die Gewohnheit, Passwörter zu verwenden, nicht aufgegeben.  Dies wurde zu einem sehr großen Problem für Entwickler, da sie auf das Problem stießen, wie Systeme sowohl bequem als auch schnell und sicher gemacht werden können.  Sehr oft, wenn zwei dieser Aspekte versuchen, gut abzuschneiden, ist der dritte nicht sehr gut.  Wenn Sie das System produktiv und sicher machen, kann dies unpraktisch sein usw. </p><br><p><img src="https://habrastorage.org/webt/yf/vy/8n/yfvy8nslfegffzdm8ldboycqpvc.png" alt="Folie 8. Wovor schützen wir uns?"></p><br><p>  Also, worüber werden wir heute sprechen? </p><br><p>  Ich werde über den Schutz vor Offline-Angriffen sprechen.  Wenn Passwörter in Ihre Datenbanken gelangen, kontrolliert der Benutzer sie nicht.  Wenn Ihre Datenbank gehackt wird, leckt sie irgendwo und danach können Hacker alles damit machen.  Selbst wenn Sie die Passwörter irgendwie geschützt haben, können sie damit beginnen, sie zu sortieren, und sie müssen dafür mit niemandem interagieren. Sie haben bereits alles dafür.  Außerdem hören Benutzer nicht auf, schwache Passwörter zu verwenden.  Passwortrichtlinien sind natürlich eine nützliche Sache, aber auch nicht immer bequem, d. H.  Wenn sogar Personen ein sicheres Passwort eingeben, heißt es in der Richtlinie immer noch, dass Sie einen Buchstaben oder eine Zahl hinzufügen müssen. Für sie ist dies dann nicht bequem.  Es ist auch offensichtlich, dass das Problem darin besteht, dass die vom Benutzer eingegebenen Daten mit denen in der Datenbank verglichen werden müssen.  Wie geht das sicher?  Vergessen wir nicht, dass es im Unternehmen auch Menschen gibt, die nicht ganz freundlich sind und sich auch vor ihnen schützen möchten. </p><br><h3 id="heshi">  Hashes </h3><br><p><img src="https://habrastorage.org/webt/-w/aj/lj/-wajlj6zqzv9v52a1tm-jyykii0.png" alt="Folie 9. War es mit Passwichtig falsch?"></p><br><p>  Warum sind Passwörter im Prinzip ein so schmerzhaftes Thema, warum lohnt es sich, genauer mit ihnen zu arbeiten?  Das Problem ist, dass das Passwort eine kleine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Entropie hat</a> .  Was ist Entropie?  Dies ist die Menge an Informationen, die in den Daten enthalten sind, d.h.  Zum Beispiel sind im Highload-Wort 8 Buchstaben 8 Bytes, aber wenn wir die Entropie berechnen, sind es nicht 64 Bit wie das ganze Wort, sondern weniger als 30 Bit.  Wenn sie heute über das Brechen des Passworts sprechen, sagen sie, dass es möglich ist, Passwörter mit Entropie in einer solchen Zeit zu knacken, nicht mehr oder nicht weniger als so viele Bits.  Das heißt,  Auch die Anzahl der Passwörter wird nicht berücksichtigt. </p><br><p><img src="https://habrastorage.org/webt/2u/ry/lh/2urylhxlc1vap1pdvcq8wqubgai.png" alt="Folie 10.1.  Hashes"></p><br><p>  Wie haben die Leute mit der Passwortsicherheit angefangen?  Das erste, was mir in den Sinn kam, war die Verwendung von unidirektionalen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kryptografischen Hashes</a> . </p><br><p><img src="https://habrastorage.org/webt/ny/ng/3e/nyng3eb-ukqoj_siqeyekl-m6ys.png" alt="Folie 10.2.  Hashes"></p><br><p>  Ihr bemerkenswertes Merkmal ist, dass sie nicht zurückgedreht werden können.  Das heißt,  Wenn Sie einige Informationen in diesen Hash übertragen und am Wert einen Wert erhalten haben, können Sie diese Informationen nicht von diesem Wert zurückerhalten.  Leider sind sie sehr schnell berechnet.  Beispielsweise kann ein moderner Cluster von 4 NVidia-Grafikkarten mehrere Milliarden Passwörter pro Sekunde verarbeiten.  Das heißt,  Wenn die Entropie Ihres Passworts weniger als 40 Bit beträgt, wird es von einem Cluster von 4 Grafikkarten in einer Minute oder sogar weniger dort aufgenommen. </p><br><h3 id="raduzhnye-tablicy">  Regenbogentische </h3><br><p><img src="https://habrastorage.org/webt/rw/bd/ku/rwbdku7uc7nlyovcvlp7fh19zbk.png" alt="Folie 11.1.  Regenbogentische"></p><br><p>  Zusätzlich hat jeder knifflige Hash einen eigenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Regenbogentisch</a> .  Was ist dieser Tisch und wie werden sie hergestellt? </p><br><p><img src="https://habrastorage.org/webt/m_/sj/yy/m_sjyylroq0g4wcqjj8stum8yq4.png" alt="Folie 11.2.  Regenbogentische"></p><br><p>  Das heißt,  Sie verwenden die beliebtesten Kennwörter und Zeichenkombinationen, die auf die Festplatte passen, berücksichtigen Hashes für sie und speichern sie für mehrere Terabyte.  Wenn es eine Art Hash gibt, können Sie ihn nicht berechnen, aber anhand dieser Tabellen sehr schnell finden und mit dem zuvor berechneten Kennwort vergleichen.  Das heißt,  Die Vorteile von Tabellen sind, dass sie sehr schnell funktionieren, Sie jedoch viel Platz zum Speichern benötigen.  Trotzdem gibt es Tabellen für die beliebtesten Hashes im Internet, die heruntergeladen oder sogar gekauft werden können. </p><br><p>  <em>Anmerkung des Autors der Inhaltsangabe: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wikipedia</a> stimmt dem Sprecher nicht zu: "Die Rainbow-Tabelle ist eine spezielle Version von Suchtabellen zum Umkehren kryptografischer Hash-Funktionen unter Verwendung des Mechanismus eines vernünftigen Kompromisses zwischen der Suchzeit in der Tabelle und dem belegten Speicher."</em>  <em>Das heißt,</em>  <em>Es werden nicht die Hashes der beliebtesten Kennwörter gespeichert, die auf die Festplatte passen, sondern nur die Hashes einiger Kennwörter. Der Rest wird auf der Grundlage der vorhandenen Kennwörter berechnet. In der Tabelle sind mehrere Kennwörter pro Datensatz enthalten.</em> </p><br><h3 id="sol">  Salz </h3><br><p><img src="https://habrastorage.org/webt/nx/cx/l3/nxcxl3ijlwytnvaumlbt9zlnjdo.png" alt="Folie 12.1.  Salz"></p><br><p>  Andererseits hat jeder Regenbogentisch sein eigenes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Salz</a> .  Was ist Salz?  Dies ist eine zufällige Menge von Bytes, die an das Passwort angehängt werden.  Es wird in einem Tisch irgendwo in der Nähe des Hash gespeichert und schützt vor Regenbogentischen. </p><br><p><img src="https://habrastorage.org/webt/xl/z1/_j/xlz1_j7oasnp6wpvijtlbmpw5n8.png" alt="Folie 12.2.  Salz"></p><br><p>  Das heißt,  Personen, die eine Basis mit gesalzenen Hashes in die Hände bekommen, müssen diese Hashes noch berechnen.  Das Problem ist jedoch, dass diese Hashes sehr schnell berechnet werden und Salz hier nicht viel hilft. </p><br><h3 id="kak-zamedlit-perebor">  Wie kann ich die Suche verlangsamen? </h3><br><p><img src="https://habrastorage.org/webt/tb/vh/of/tbvhoftqtm7hlvgibwwvafv9cl4.png" alt="Folie 13.1.  Wie kann ich die Suche suchenamenamen?"></p><br><p>  Ein natürlicher Ausweg könnte darin bestehen, die Hash-Sortierung auf irgendeine Weise zu verlangsamen.  Wie kann das gemacht werden? </p><br><p><img src="https://habrastorage.org/webt/6j/9c/x0/6j9cx0nof6w-dzgbc3b6nx5qw-8.png" alt="Folie 13.2.  Wie kann ich die Suche suchenamenamen?"></p><br><p>  Der naivste Ansatz ist, dass wir eine Art Hash-Funktion, zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sha256, verwenden</a> und iterativ berechnen, d. H.  Berechnen Sie den Hash, aus diesem Hash den Hash erneut usw.  Sie können dies viele tausend und sogar millionenfach tun.  Das Problem ist, dass wenn Sie eine solche Implementierung selbst schreiben, diese höchstwahrscheinlich langsamer ist als die Implementierung von Personen, die professionell mit dem Erraten von Passwörtern befasst sind. </p><br><p><img src="https://habrastorage.org/webt/nj/f3/hr/njf3hrodtzqbbu5w3purv-vsm6u.png" alt="Folie 14. Passwort-Hashing-Funktionen"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SCrypt</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bcrypt</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Argon2</a> </p><br><p>  Aus diesem Grund haben Kryptographen verschiedene Funktionen entwickelt, die speziell zur Verlangsamung der Kennwortsuche entwickelt wurden. Sie verbrauchen viel Speicher und alle möglichen modernen Prozessoranweisungen.  Wenn das durch eine solche Funktion geschützte Passwort in die Hände von Angreifern fällt, müssen diese sehr leistungsfähige Hardware verwenden. </p><br><p><img src="https://habrastorage.org/webt/-e/ed/gw/-eedgw4f2c-6q3khy9pywdotzwa.png" alt="Folie 15. Argon2"></p><br><p>  Die modernste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Argon2-</a> Funktion funktioniert beispielsweise wie folgt: Im Diagramm sehen Sie, dass es viele verschiedene Speicherblöcke gibt, durch die der Hash ausgeführt wird.  Er macht dies auf verschiedene Arten Roundtrip, der Speicher wird sehr intensiv genutzt, der gesamte Speicher wird genutzt.  Es ist ziemlich schwierig, eine solche Funktion (Suchgeschwindigkeit) zu optimieren. </p><br><p><img src="https://habrastorage.org/webt/eu/gn/u2/eugnu2x_t3tsbyfzqmyesuwlmse.png" alt="Folie 16. Passwort-Hashing-Funktionen"></p><br><p>  Diese Ansätze haben aber auch ihre Nachteile.  Diese Funktionen sind speziell langsam gemacht, aber sie sind nicht nur für Angreifer besonders langsam, sondern auch für Sie besonders langsam.  Sie werden Ihr Eisen laden.  Diese Funktionen sind anpassbar, d.h.  Sie können auswählen, wie viel Speicher verwendet wird, um den Hash eines einzelnen Kennworts zu berechnen, bis zu mehreren Gigabyte, wie viele Durchgänge auf diesem Speicher vorhanden sind.  Wenn Sie diese Parameter sehr ernst nehmen, leidet Ihre eigene Hardware, und wenn sich viele Personen am System anmelden, müssen Sie nur erhebliche Ressourcen für den Kennwortschutz und einfache Kennwörter zuweisen. Nun, sehr einfache Kennwörter können immer noch abgerufen werden . </p><br><h3 id="facebooks-password-onion">  Facebooks Passwort Zwiebel </h3><br><p><img src="https://habrastorage.org/webt/jg/ij/6k/jgij6ksfudwqixuwbidyqos8g_y.png" alt="Folie 17. Und können Sie das Backend nicht laden?"></p><br><p>  Die Leute haben darüber nachgedacht und die Frage gestellt: Ist es möglich, dieselben Eigenschaften zu erzielen, ohne das Backend zu laden, ohne ihre eigenen Server zu laden? </p><br><p><img src="https://habrastorage.org/webt/3t/bt/i5/3tbti5mfy7-5smkvkfpkzyw8cq0.png" alt="Folie 18. Facebooks Passwort Zwiebel"></p><br><p>  Einer der Pioniere dabei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">war Facebook</a> .  Diese Zeilen, die Sie sehen, sind die historischen Phasen von Facebook, wie sie Passwörter schützten, zuerst gab es nur Passwörter, dann nahmen sie die alte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">md5-</a> Funktion, die lange Zeit geknackt worden war, dann fügten sie dort Salz hinzu und nahmen den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sha1-</a> Hash, und dann passierte es Interessanterweise haben sie die Berechnung der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hmac-</a> Funktion (dies ist ein Hash mit einem Schlüssel) zum Remote-Dienst gebracht. </p><br><p><img src="https://habrastorage.org/webt/at/hg/59/athg59eofneynp9pmmn1ffzdbg8.png" alt="Folie 19. Facebook"></p><br><p>  Wie funktioniert es  Es gibt ein Backend, es gibt einen Remote-Service.  Es gibt eine Art geheimen Schlüssel für diesen Dienst.  Eine Person betritt das Backend und gibt ihr Passwort ein.  Dieses Kennwort wird mit dem in der Datenbank enthaltenen Salt gemischt, durch einen Hash ausgeführt und an den Dienst gesendet.  Der Dienst nimmt seinen privaten Schlüssel, berechnet die hmac-Funktion und sendet alles zurück.  Im Backend wird es in die Basis gestellt. </p><br><p><img src="https://habrastorage.org/webt/nj/hw/ac/njhwackeuo-kschvhkkvaxstmky.png" alt="Folie 20. Facebook"></p><br><p>  Was gibt es?  Wenn Facebook über eine Benutzerdatenbank verfügt, ist es nicht sinnvoll, Kennwörter darin zu sortieren, da sie keinen entfernten geheimen Schlüssel haben.  Das Problem bei Facebooks Ansatz ist jedoch, dass sie große Probleme haben, wenn etwas mit ihrem privaten Remote-Schlüssel passiert.  Sie können nichts dagegen tun, weil sie Hashes verwenden, sie verwenden hmac.  Sie haben keine Möglichkeit, diese Situation irgendwie zu lösen, sodass Benutzer nichts bemerken und sich selbst in eine Ecke treiben. </p><br><h3 id="sphinx">  Sphinx </h3><br><p><img src="https://habrastorage.org/webt/_t/kq/nd/_tkqnduhchzryj-sgjt-kqytyo0.png" alt="Folie 21. Ist es besser?"></p><br><p>  Kryptographen schauten sich das Ganze an.  Sie mochten die Idee, Remote-Dienste zu nutzen, und beschlossen zu überlegen: Ist es möglich, noch bessere Ergebnisse zu erzielen?  Ist es möglich, ein ähnliches System zu erstellen, aber ohne die Minuspunkte, mit denen Facebook es ausgestattet hat? </p><br><p><img src="https://habrastorage.org/webt/hh/04/o5/hh04o5poadnr-d4diswhuaferuq.png" alt="Folie 22. Ist das Passwort eine Nummer?"></p><br><p> Und sie beschlossen, dieses Problem wie folgt anzugehen: Was ist, wenn das Passwort oder der Passwort-Hash als Zahl dargestellt wird?  Wenn wir das Wort <code>passw0rd</code> , besteht es aus 8 Bytes.  In fast allen Programmiersprachen gibt es ganzzahlige Typen von acht Bytes, d.h.  Im Prinzip ist dies ein und dasselbe.  Das heißt,  8 Bytes, das Wort <code>passw0rd</code> und wir können es als reguläre Dezimalzahl darstellen.  Was gibt uns das?  Dies gibt uns eine völlig andere Handlungsfreiheit.  Wir können Passwörter oder Hashes hinzufügen, multiplizieren und in andere Zahlen umwandeln.  Wir können mit ihnen wirklich ernsthafte mathematische Operationen durchführen. </p><br><p><img src="https://habrastorage.org/webt/6h/3d/wm/6h3dwmeitk9jftagy1hszcqbmgo.png" alt="Folie 23.1. Sphinx - Passwort-Manager"></p><br><p>  Eines der ersten Systeme, das diese Technologie verwendete, war <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sphinx</a> .  Sie erschien vor ein paar Jahren.  Dies ist ein deterministischer Passwort-Manager.  Es gibt viele verschiedene Programme wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">keepass</a> , bei denen Sie ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hauptkennwort</a> haben und für jede Site ein zufälliges generiert.  Es gibt aber auch deterministische Dinge, bei denen Sie Ihr Hauptkennwort eingeben, die Site, zu der Sie gehen möchten, und dort etwas berechnet und für jede Site ein eindeutiges Passwort ausgibt.  Es ist jedoch klar, dass, wenn dieses Hauptkennwort irgendwohin geht, alle Kennwörter Ihrer Websites dauerhaft kompromittiert werden. </p><br><p><img src="https://habrastorage.org/webt/qs/9j/0z/qs9j0z8enfk9_j_p53msuqcxufu.png" alt="Folie 23.2. Sphinx - Passwort-Manager"></p><br><p>  Wie ging Sphinx mit diesem Problem um?  Er nimmt das Master-Passwort, nimmt die Domain, bei der Sie sich anmelden möchten, führt das Ganze durch einen Hash und wandelt es in eine Nummer um.  Tatsächlich wird dort jedoch die elliptische Kryptographie verwendet. Der Einfachheit halber werde ich dies alles anhand gewöhnlicher Zahlen mit gewöhnlicher Mathematik erklären.  Er verwandelt es in eine Nummer (nennen wir es <code>a</code> ) und was macht er als nächstes? </p><br><p><img src="https://habrastorage.org/webt/wx/ba/hk/wxbahkcpmzzmwsaxj1_abbdwrpq.png" alt="Folie 24. Sphinx - der &quot;Manager&quot; von Passwörtern, verkleiden!"></p><br><p>  Absolut wundervolle Sache, jedes Mal können wir eine große Zufallszahl <code>r</code> erzeugen.  Wenn wir die Zahl <code>a</code> auf die Potenz von <code>r</code> erhöhen und einige Zeit später diese Zahl auf die Potenz invers zur Zahl <code>r</code> erhöhen, erhalten wir dieselbe Zahl <code>a</code> , oder?  Das heißt,  wir können etwas von Anfang an maskieren und dann entlarven. </p><br><p><img src="https://habrastorage.org/webt/pu/yp/5t/puyp5t7x6yprlu_xyybj4z8llna.png" alt="Folie 25.1. Sphinx - Passwort-Manager"></p><br><p>  Und was macht die Sphinx?  Wieder gibt es einen Benutzer, es gibt einen Remote-Dienst.  Eine maskierte Nummer wird an diesen Remote-Dienst gesendet.  Auf dem Remote-Dienst gibt es einen privaten Schlüssel. <code>b</code>  Was macht er?  Er multipliziert die gesendete Nummer <code>a^r</code> mit seinem geheimen Schlüssel <code>b</code> und sendet sie zurück.  ( <em>Anmerkung des Autors des Kompendiums: Auf der Folie wird die gesendete Zahl nicht mit dem privaten Schlüssel multipliziert, sondern auf den Grad des privaten Schlüssels angehoben, aber der Hauptpunkt ist</em> ).  Da die Nummer <code>r</code> jedes Mal anders ist, kann der Ferndienst nichts darüber sagen, welches Passwort und welche Domäne maskiert wurden, d. H.  jedes Mal sieht er verschiedene Zufallszahlen.  Und er multipliziert einfach mit seinem privaten Schlüssel <code>b</code> und sendet zurück. </p><br><p><img src="https://habrastorage.org/webt/gs/nm/bx/gsnmbxvngd2m2ziqnuqo-mdtney.png" alt="Folie 25.2. Sphinx - Passwort-Manager"></p><br><p>  Der Benutzer entlarvt, was der Server ihm gesendet hat, und erhält eine Nummer - sein Hauptkennwort mit der Domäne multipliziert mit dem geheimen Schlüssel des Servers <code>a^b</code> .  Es stellt sich heraus, dass er den geheimen Schlüssel des Servers nicht kennt, der Server nicht weiß, was der Benutzer ihm gesendet hat, aber am Ende erhält er auch eine Art deterministische Nummer.  Jedes Mal, wenn Sie dieses Protokoll ausführen, ist die Verkleidung unterschiedlich, aber das Ergebnis ist immer das gleiche. Dieses Ergebnis kann dann wieder in ein Kennwort umgewandelt und zur Eingabe verschiedener Sites verwendet werden. </p><br><p><img src="https://habrastorage.org/webt/7v/zd/hv/7vzdhvrksyvyg_awii2rkvphdgy.png" alt="Folie 26. Sphinx - der &quot;Manager&quot; von Passwörtern"></p><br><p>  Wirklich wunderbare Technologie.  Erstens können Sie große Passwörter generieren, d. H.  es schützt vor dem Platzen.  Zweitens, wenn ein Hacker Zugriff auf mehrere Passwörter erhält, kann er nichts über den Rest sagen, weil  Sie werden unabhängig voneinander erzeugt.  Drittens, wenn das Passwort des Benutzers irgendwo verschwindet, gibt dies auch nichts, da Hacker keinen geheimen Schlüssel haben.  Viertens funktioniert es sehr schnell, weil  Hier werden keine iterativen großen Hashes benötigt, d.h.  Es werden buchstäblich 2-3 Multiplikationen durchgeführt und alles funktioniert sofort. </p><br><p>  Dieses System hat jedoch seine Nachteile.  Der Server, mit dem der Benutzer spricht, weiß nichts über ihn.  Er empfängt einfach einige Zufallszahlen als Eingabe, multipliziert sie mit etwas und sendet sie zurück.  Der Client weiß auch nichts über den Server, er sendet irgendwo etwas, empfängt das Ergebnis, es funktioniert - gut.  Wenn jedoch etwas mit dem Dienst passiert, kann der Benutzer nichts dazu sagen, er hat keine Informationen dafür.  Der geheime Schlüssel kann auch nicht geändert werden, nichts kann damit gemacht werden. </p><br><h3 id="pythia">  Pythia </h3><br><p><img src="https://habrastorage.org/webt/cp/kt/3z/cpkt3zvvpwx7svjbydprtntli5i.png" alt="Folie 27. Könnte es besser sein?"></p><br><p>  Könnte es besser sein? </p><br><p><img src="https://habrastorage.org/webt/ot/jg/ms/otjgmsc63aic6zb8mpod01tn9jy.png" alt="Folie 28. ENDE-ZU-ENDE!"></p><br><p>  Kryptographen betrachteten dieses System und dachten, ist es möglich, das System zu verbessern und es durch Eigenschaften zu ergänzen, die es uns ermöglichen würden zu sagen, dass es den End-to-End-Prinzipien entspricht?  Das heißt,  Der Client kann mit dem Server kommunizieren, gleichzeitig aber auch authentifizieren und ihm in gewissem Maße vertrauen. </p><br><p><img src="https://habrastorage.org/webt/gv/2o/p8/gv2op8fshghvw1rvt0dnqnqwxnw.png" alt="Folie 29.1. Pythia"></p><br><p>  Und sie kamen mit einem Protokoll namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pythia</a> . </p><br><p><img src="https://habrastorage.org/webt/kq/wd/in/kqwdin-__0xxfcerqmva6s2vewo.png" alt="Folie 29.2. Pythia"></p><br><p>  Es wurde von dem wunderbaren Mann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Adam Everspaugh</a> mit seinen Kollegen gemacht.  Was macht es einzigartig?  Erstens weiß der Dienst, wer das Passwort eingibt, d.h.  Die Benutzer-ID wird nach dem Kennwort an den Server übergeben.  Es kann sich um eine zufällige ID-Box handeln, die daneben liegt, oder nur um einen Benutzernamen.  Nicht wichtig.  Aber der Service weiß davon.  Aber der Server weiß nicht nur ein wenig davon, er kann streng mathematisch beweisen, dass er es ist. </p><br><p><img src="https://habrastorage.org/webt/pf/lo/zf/pflozf9qji8nzq_nhpswlqd-3xa.png" alt="Folie 30.1. Pythia"></p><br><p>  Wie funktioniert es  Es gibt ein Backend (eine Art Webdienst, Website) und einen Pythia-Dienst.  Was macht das Backend und was macht der Service?  Es gibt einen privaten Schlüssel <code>k</code> im Dienst, aber er überträgt auch seinen öffentlichen Schlüssel an das Backend.  Das Service-Backend sendet nicht nur die maskierte Nummer <code>a^r</code> wie im Sphinx-Protokoll, sondern auch eine Art Benutzer- <code>UserID</code> ( <code>UserID</code> ).  Der Dienst multipliziert die Benutzer-ID und das Kennwort mit seinem privaten Schlüssel und das Ergebnis <code>(UserID, a)^(r*k)</code> Benutzer-ID <code>(UserID, a)^(r*k)</code> sendet das Backend.  Er sendet auch einen bestimmten <code>Proof</code> , mit dem das Backend den Server überprüfen kann, ob er nicht gehackt wurde und wie er reagiert. </p><br><p><img src="https://habrastorage.org/webt/re/qr/x2/reqrx276lka5gxfal99x0_l9esy.png" alt="Folie 30.2. Pythia"></p><br><p>  Dann gibt es eine Demaskierung und die Zahl <code>y</code> die sich als Ergebnis herausstellt, wird in eine Datenbank gestellt.  In der Datenbank haben wir nicht nur einen Hash, sondern eine Zahl, einen Punkt einer elliptischen Kurve. </p><br><p><img src="https://habrastorage.org/webt/xx/qc/jt/xxqcjtbljojosjg0ssvhptf3oj0.png" alt="Folie 31. Pythia"></p><br><p>  Hier gibt es einige interessante Punkte: </p><br><ul><li>  Die Möglichkeit für den Server, die Benutzer-ID und das Kennwort in einer Nummer zu kombinieren.  Dies wird als bilineare Operation oder bilineare Paarung bezeichnet.  Dies ist eine relativ neue Mathematik, die seit kurzem verwendet wird.  Sie hat alle Eigenschaften neuer Mathematiker in diesen 30 Jahren nicht vergangen, so dass jeder davon überzeugt wäre, dass damit alles normal ist. </li><li>  Aber der <code>Proof</code> , der den Dienst sendet, ist eine ziemlich alte Technologie.  Dies wird als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schnorr-Protokoll bezeichnet</a> .  Die Generierung öffentlicher Schlüssel ist die Multiplikation eines Basispunkts mit einem geheimen Schlüssel.  Das Schnorr-Protokoll beweist, dass der geheime Schlüssel, der zum Generieren des öffentlichen Schlüssels verwendet wurde, verwendet wurde, um das Kennwort des Benutzers mit derselben Nummer zu multiplizieren.  Dieses Protokoll gibt es schon seit langem, es wird häufig dort verwendet und es ermöglicht Ihnen, dies zu beweisen.  Dies wird als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zero-Proof-Proof bezeichnet.</a> Der Server zeigt seinen öffentlichen Schlüssel nicht an, aber es heißt, dass der von mir ausgeführte Vorgang von dem privaten Schlüssel ausgeführt wurde, auf den wir uns ursprünglich geeinigt hatten. </li></ul><br><p><img src="https://habrastorage.org/webt/jz/pg/lo/jzpglodcswcwxprayrpud8semws.png" alt="Folie 32.1. Vorteile von Pythia"></p><br><p>  Was sind die Vorteile dieses Systems? </p><br><p><img src="https://habrastorage.org/webt/xn/dg/zg/xndgzgr-to_dgnypnwarbyxengg.png" alt="Folie 32.2. Vorteile von Pythia"></p><br><p>  Und sie hat nicht viele davon. </p><br><ul><li>  Das System lädt das Backend nicht.  Da das Backend alles tut, verwandelt es das Passwort in eine Zahl, verschleiert es, sendet es und entlarvt dann auch das Ergebnis. </li><li>  Wenn Ihnen eine Datenbank mit solchen Nummern gestohlen wird, ist das Sortieren von Passwörtern auch ohne einen privaten Schlüssel nicht sinnvoll. </li><li>  Der Pythia-Dienst kann Brute-Force-Versuche blockieren, was bedeutet, dass das Backend dies im Prinzip nicht tun muss.  Wenn er sieht, dass sie unter derselben Benutzer-ID mehrmals versuchen, diesen Transformationsvorgang auszuführen, kann er ihn einfach abschneiden und an der Ratengrenze blockieren. </li><li>  Dank der Verkleidung weiß der Dienst nichts über das Passwort.  Jedes Mal, wenn eine neue Zufallszahl an ihn gesendet wird.  Nur die Benutzerkennung bleibt konstant. </li><li>  Dank ZKP (Zero-Knowledge Proof) weiß das Backend immer, dass es genau der Service war, den er einmal kontaktiert hatte. </li><li>  Wenn Sie beispielsweise eine Datenbank mit Hashes und Salt haben, können Sie für Benutzer nahtlos auf eine solche Lösung migrieren.  Sie können nicht einmal etwas bemerken.  Anstelle des Benutzerpassworts nehmen Sie seinen Hash, fahren ihn in Pythia und verwenden in Zukunft einfach dieses Protokoll, erhalten die Nummer <code>y</code> und fügen es erneut in Ihre Datenbank ein.  Der Hash kann dann gelöscht werden.  Jedes Mal, wenn sich ein Benutzer bei Ihrem System anmeldet, wird dieses Protokoll ausgeführt. Als Ergebnis wird eine Nummer abgerufen, die Sie mit der Datenbank vergleichen.  Das Authentifizierungssystem selbst bleibt unverändert  Benutzer melden sich früher an und melden sich mit denselben Passwörtern an, auch mit schwachen.  In diesem Fall ist das System viel sicherer. </li></ul><br><p><img src="https://habrastorage.org/webt/2i/63/ja/2i63jae0xiucsx-dqailxoaqiuw.png" alt="Folie 33.1. Das ist noch nicht alles"></p><br><p>  Aber das sind nicht alle Leckereien. </p><br><p><img src="https://habrastorage.org/webt/oa/dy/h9/oadyh9nurjtlv5qdbgo8f2xfcui.png" alt="Folie 33.2. Das ist noch nicht alles"></p><br><p>  Eine der Hauptfunktionen ist, dass selbst wenn der Pythia-Dienst gehackt wird, ein neuer privater Schlüssel generiert werden kann.  In unserer Datenbank wird eine Nummer gespeichert, kein Hash.  Wenn wir den alten Schlüssel als die Zahl <code>k</code> und den neuen als die Zahl <code>k'</code> , können wir eine Zahl berechnen, die als Aktualisierungstoken bezeichnet wird.  Dazu multiplizieren wir die neue Zahl mit der Zahl umgekehrt zur alten.  Mit diesem Update-Token können Sie die Datenbank für jeden Benutzer durchsuchen und diese Zahl <code>y</code> mit dem Update-Token multiplizieren.  Nachdem Sie dies getan haben, arbeitet Ihr System weiterhin mit dem neuen privaten Schlüssel auf dem Remote-Dienst.  Es passiert alles sofort.  Wenn eine Katastrophe eintritt, wird Ihnen Ihre Datenbank mit Passwörtern gestohlen, Sie geben per Mausklick ein Update-Token frei und die Tatsache, dass Hacker Ihnen gestohlen haben, wird sofort unbrauchbar.  Sie gehen einfach leise durch alle Datensätze im Hintergrund, aktualisieren sie und sie arbeiten mit dem neuen geheimen Schlüssel für Sie.  Benutzer bemerken im Allgemeinen gar nichts.  Das heißt,  Die nahtlose Aktualisierung und sofortige Ungültigmachung der Kennwortdatenbank sind einige der wichtigsten innovativen Merkmale dieses Systems. </p><br><p><img src="https://habrastorage.org/webt/uu/cb/_z/uucb_z0ikld1bufittz0asq5m84.png" alt="Folie 34.1. Bonus"></p><br><p>  Das ist aber noch nicht alles. </p><br><p><img src="https://habrastorage.org/webt/vr/jo/3k/vrjo3kpwbw1xuzdr6wklxmwkrgw.png" alt="Folie 34.2. Bonus"></p><br><p>  Die Zahl, die in der Basis liegt, ist groß <code>y</code> , sie ist im Grunde groß und sieht ziemlich pseudozufällig aus, d.h.  Es ist so einfach, es nicht aufzuheben.  Wenn wir die Funktionen, die wir im Backend haben, beispielsweise auf Clientgeräte oder auf Telefone übertragen, können wir mit diesem <code>y</code> Schlüssel generieren.  Wir haben dieses Ding BrainKey genannt.  Dies bedeutet, dass der Benutzer das Kennwort irgendwo auf dem Telefon eingibt, es auch verschleiert und an den Remote-Dienst sendet.  Der Dienst gibt eine bestimmte Zahl <code>y</code> und dann können Sie dieses <code>y</code> , um einige asymmetrische Schlüssel zu generieren.  Somit kann der Benutzer von seinem Passwort ein Schlüsselpaar erhalten.  Dies wird in allen Arten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BrainWallets verwendet</a> .  In diesem Fall geben Sie das Passwort ein und erhalten die dafür generierte Bitcoin-Brieftasche.  Diese Anwendung ist jedoch nicht auf Kryptowährungen beschränkt, sondern eine digitale Signatur, einige Sicherungen und die Wiederherstellung von Konten, d. H.  Überall dort, wo asymmetrische Kryptographie verwendet wird und asymmetrische Schlüssel benötigt werden.  All dies kann verwendet werden, aber gleichzeitig ein Schlüsselpaar, und sie können je nach Bedarf so viele generiert werden, wie Sie möchten.  Sie hängen also alle vom Passwort des Benutzers ab, und dies ist sehr praktisch. </p><br><p><img src="https://habrastorage.org/webt/sy/cw/nl/sycwnl1rpbmtpsc_0ddxi3fjlx0.png" alt="Folie 35.1. Nachteile?"></p><br><p>  In einem Fass Honig ist es nicht ohne eine Fliege in der Salbe. </p><br><p><img src="https://habrastorage.org/webt/wx/jw/an/wxjwanacuusmfnb_ptce1peh_cg.png" alt="Folie 35.2. Nachteile?"></p><br><p>  Und das Merkmal dieser Technologie ist, dass sie sehr neu ist.  Es wird eine elliptische Kurve für bilineare Operationen verwendet ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BLS12-381</a> ).  Die Mathematik selbst existiert schon seit einiger Zeit, aber diese spezielle Kurve, die insbesondere in unserer Implementierung verwendet wird, wird nur in <nobr>ZCash</nobr> außer uns verwendet.  Dementsprechend können Bibliotheken, die diese neue Mathematik verwenden, an den Fingern einer Hand gezählt werden.  Um dies in den Produktionszustand zu bringen, müssen Sie einige Zeit und Mühe aufwenden.  Trotzdem steht die Branche nicht still und all diese Nachteile sind vorübergehend.  Infolge der ersten beiden Eigenschaften stimmt die Geschwindigkeit dieser bilinearen Operationen nicht sehr mit der modernen Mathematik überein, insbesondere der elliptischen, die wir alle jetzt verwenden, wenn wir das TLS-Protokoll verwenden, wenn wir einige Standorte verwenden.  Dies sind ungefähr mehrere hundert Operationen an einem Dienst auf einem Kern.  Tatsächlich hat uns das nicht aufgehalten, und im Frühjahr haben wir dieses Protokoll implementiert, es in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Produktion</a> veröffentlicht, alle unsere Aufzeichnungen übersetzt und sie mit diesem Protokoll geschützt.  Im Prinzip sind wir mit der Leistung für unsere aktuellen Aufgaben zufrieden. Bei Bedarf werden wir mit dem Pythia-Dienst einen weiteren Knoten errichten, und im Prinzip können Sie bereits mit all dem spielen. </p><br><h3 id="phe">  PHE </h3><br><p><img src="https://habrastorage.org/webt/hv/1e/1l/hv1e1lslzyk31hgsw2fu5sffk_o.png" alt="Folie 36. Ist es noch besser?"></p><br><p>  Aber wir haben darüber nachgedacht, ob wir es noch besser machen können?  Ist es möglich, die Eigenschaften, die Pythia bietet, mithilfe der Mathematik von gestern zu erreichen?  Nicht morgen, nicht heute, sondern auch gestern, das seit vielen Jahren genutzt wird. </p><br><p><img src="https://habrastorage.org/webt/6r/rn/0x/6rrn0xaorj5qjkyuk2hhamqaqyk.png" alt="Folie 37.1. Einfache passwortgehärtete Verschlüsselungsdienste (PHE)"></p><br><p>  Und buchstäblich im Juli dieses Jahres veröffentlichten Wissenschaftler ein neues Protokoll namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Simple Password-Hardened Encryption Services,</a> kurz PHE. </p><br><p><img src="https://habrastorage.org/webt/hx/o5/zv/hxo5zveu2y75lmqm-t3pqknaq0e.png" alt="Folie 37.2. Einfache passwortgehärtete Verschlüsselungsdienste (PHE)"></p><br><p>  Dies ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Russell Lai</a> , ein Wissenschaftler aus Europa. </p><br><p>  Was ist der Vorteil dieses Service?  Erstens wird die Standard- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">P-256-</a> Kurve verwendet, die überall verwendet wird, in allen Browsern, Produkten und überall die Standardkurve, die es seit vielen Jahren gibt.  Zweitens funktioniert dieses Ding ungefähr zehnmal schneller als Pythia und verwendet Standardprimitive.  Es ist etwas schwierig, aber Sie können es mit Ihren eigenen Händen implementieren, ohne obskure Bibliotheken zu verwenden.  Sie können <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenSSL</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bouncy Castle verwenden</a> . </p><br><p><img src="https://habrastorage.org/webt/el/f0/ho/elf0hoawmvsekav9jgvkqxp0_ju.png" alt="Folie 38. Einfache kennwortgehärtete Verschlüsselungsdienste (PHE)"></p><br><p>  Aber es funktioniert etwas anders.  Wieder gibt es ein Backend, es gibt einen PHE-Dienst.  Das Backend hat einen öffentlichen Schlüssel, der Dienst hat einen privaten Schlüssel <code>y</code> .  Im Gegensatz zu Pythia unterscheiden sich der Registrierungsprozess und der Passwortüberprüfungsprozess etwas.  Was macht das Backend, wenn ein neuer Benutzer zum Dienst kommt und sich registrieren möchte?  Von Anfang an fragte er den PHE-Dienst, bitte geben Sie mir einige Daten, die ich zur Registrierung verwenden kann, eine Art Registrierungsdatensatz.  Der Dienst sagt OK und beantwortet das Backend mit den folgenden Dingen.  Es wird zufälliges 32-Byte-Salz ( <code>sNonce</code> ) erzeugt.  Basierend auf diesem Salt und seinem privaten Schlüssel y generiert es zwei Zahlen, nennen wir sie <code>C0</code> und <code>C1</code> .  Es werden auch Beweise ( <code>Proof</code> ) generiert, dass diese beiden Zahlen oder 2 Punkte genau unter Verwendung seines privaten Schlüssels <code>y</code> unter Verwendung des Schnorr-Protokolls (wie in früheren Protokollen) generiert wurden.  Das Backend prüft <code>Proof</code> .  Hier gibt es noch kein Passwort.  Was macht das Backend?  Er seinerseits hat auch seinen eigenen privaten Client-Privatschlüssel <code>x</code> und nachdem er das Passwort vom Benutzer erhalten hat, macht er ungefähr das Gleiche wie der Dienst und fügt dort nur das Passwort hinzu.  Es benötigt zufälliges <code>cNonce</code> (zufälliges Client-Salt), ein Passwort und generiert erneut 2 Zahlen <code>HC0</code> und <code>HC1</code> .  Warum 2?  Da der erste <code>HC0</code> zur Authentifizierung verwendet wird und die zweite Zahl <code>HC1</code> eine Zufallszahl <code>M</code> multipliziert mit dem privaten Schlüssel <code>x</code> ( <code>MC</code> ) <code>HC0</code> .  Die Nummer <code>M</code> ist ebenfalls 32 Byte groß und kann später zum Verschlüsseln von Benutzerdaten verwendet werden (wir haben Verschlüsselungsdienste) ( <em>Hinweis des Autors des Hinweises: Der Verschlüsselungsschlüssel ist in diesem Fall <code>MC</code></em> ).  Die <code>MC</code> Nummer ist erst als Schlüssel verfügbar, nachdem der Benutzer das richtige Passwort eingegeben hat.  Bei der Registrierung stellt sich heraus, dass Sie nicht nur einen Autorisierungsdatensatz, sondern auch einen für jeden Benutzer eindeutigen Verschlüsselungsschlüssel erstellen können, mit dem Sie sein Profil, einige Daten und etwas anderes verschlüsseln können.  Dann addiert das Backend einfach, was der Dienst gesendet hat und was er getan hat - addiert diese Punkte und erhält <code>T0</code> und <code>T1</code> .  Im ersten Fall addiert es zwei ( <code>C0 + HC0</code> ) und im zweiten drei ( <code>C1 + HC1 + MC</code> ).  Und er setzt in die Basis 2 Salze ( <code>sNonce</code> , <code>cNonce</code> ) ein, mit deren Hilfe diese Zahlen erhalten wurden, und 2 Zahlen ( <code>T0</code> und <code>T1</code> ), die sich als Ergebnis der Summe herausstellten. </p><br><p><img src="https://habrastorage.org/webt/ly/9d/fj/ly9dfjao1laxszgo9okoovsvzjy.png" alt="Folie 39. PHE-Login"></p><br><p>  Dementsprechend erfolgt der Benutzerauthentifizierungsprozess in umgekehrter Reihenfolge.  Der Benutzer gibt sein Passwort im Backend ein.  Das Backend berechnet <code>HC0</code> und <code>HC0</code> von dem, was es in der Datenbank hat, <code>HC0</code> von <code>T0</code> und sendet das resultierende <code>C0</code> zusammen mit dem <code>HC0</code> an den Dienst.  Der Dienst, der das Serversalz kennt, berechnet den gleichen Punkt an sich und sieht so aus, als ob er das Backend gesendet hat oder nicht. Wenn es übereinstimmt, ist das Passwort korrekt und Sie können es mit der zweiten Nummer <code>C1</code> beantworten, die er zusammen mit <code>HC1</code> von der Nummer abzieht <code>T1</code> und erhalten Sie den Verschlüsselungsschlüssel.  Somit verschwindet das Passwort für den PHE-Dienst nicht einmal.  Er verlässt nicht einmal das Backend.  Es besteht aus einigen Punkten multipliziert mit dem privaten Schlüssel des Backends.  Es existiert nicht einmal als solches, aber gleichzeitig kann der Ferndienst eine strikte Schlussfolgerung darüber ziehen, ob dieses Passwort korrekt ist oder nicht, und außerdem nachweisen, dass er alle Berechnungen mit seinem privaten Schlüssel <code>y</code> . </p><br><p><img src="https://habrastorage.org/webt/bi/7-/op/bi7-opjxk_7cwvgb4lm4wkwgtbi.png" alt="Folie 40.1. PHE-Funktionen"></p><br><p>  Welche Funktionen hat dieses System? </p><br><p><img src="https://habrastorage.org/webt/2t/ar/rm/2tarrmmsr5j4sgk5zlrtcsu1eyc.png" alt="Folie 40.2. PHE-Funktionen"></p><br><p>  Das Passwort verlässt, wie gesagt, das Backend nicht.  Im Gegensatz zu Pythia benötigen Sie jedoch einen privaten Schlüssel im Backend.  Nun, wir brauchen und müssen irgendwo sparen.  PHE hat alle Grundfunktionen von Pythia: </p><br><ul><li>  Sie können auch ein Update-Token ausgeben, wenn Ihnen mit dem privaten Schlüssel etwas passiert ist. </li><li>  Sie können auch die gesamte Datenbank durchsuchen, aktualisieren und alles wird so sein, wie es war. </li><li>  Suchschutz; </li><li>  Der Dienst weiß nichts über das Passwort. </li><li>   (Pythia , ,  ,    ,  PHE ); </li><li>     . </li></ul><br><p><img src="https://habrastorage.org/webt/vq/_m/yr/vq_myrj2venkvtkjqaij3ujapd4.png" alt=" 41. ..."></p><br><p>      ... </p><br><p><img src="https://habrastorage.org/webt/hp/s9/_t/hps9_tr6ha4ysxt6szxsdhseuoe.png" alt=" 42. passw0rd.io"></p><br><p> …      .      .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">passw0rd.io</a>  .    password  ,    18-        ,    ,    zero trust, ..    .     , , ..  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Let's encrypt</a> .  ,   .    CLI     ,   .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 SDK</a> ,  GO  .Net,     . </p><br><p><img src="https://habrastorage.org/webt/ey/xs/qh/eyxsqh1i0z7s2_fexslxgbdi-fy.png" alt=" 43. Passwords are like underwear"></p><br><p>           : </p><br><ol><li>    . </li><li>      . </li><li>     . </li></ol><br><p><img src="https://habrastorage.org/webt/d4/nh/d4/d4nhd4nzbnhgfq21j-8yqs1ps0m.png" alt=" 44. "></p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VirgilSecurity.com</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@VirgilSecurity</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub.com/VirgilSecurity</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NoiseSocket.com</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">passw0rd.io</a> </li></ul><br><p>     ,             . </p><br><h3 id="voprosy"> ? </h3><br><p> <strong> 37. ?</strong> </p><br><p><img src="https://habrastorage.org/webt/z_/t0/05/z_t005mcdxnznvcinnqsg-z750a.png" alt=" 45. ?"></p><br><p>     . </p><br><p> Q: ,    !   .     ,      Pythia       update token,        ?        private key  .         update token?  Oder nicht? <br> A: , update token-     . <br> Q:    .      -        update token-,       Private key         ? <br> A: ,    update token-,     ,  - ,   ,  ,    update token.     , ..   . <br> Q: , ,    ,   . <br> A: ..     . </p><br><p> Q: ,   ,     ,     -   Pythia  -    ,       ,     ,   ? <br> A:  . <br> Q:      ? <br> A: ,      Pythia   .  Das heißt,     ,        . <br> Q: ( )  bcrypt      ? <br> A: ,      ,   ,      . </p><br><p> Q:  ,    .      ?  , … <br> A: password   <br> Q: password  ?  Feuer!  Im Allgemeinen. <br> A: 123456   ,        12345, 123456. <br> Q: .    Pythia  ,  PHE   . <br> A:    ,           . <br> Q: .   .         ?  production   ? <br> A:  . !   Pythia. <br> Q:   Pythia,    , ? <br> A:  . <br> Q:   ,  ? <br> A:   . <br> Q: , , ! <br> A:     SDK,     . </p><br><p> Q: ,  ,  ,     , ..   -  ,     ?    ?    ? <br> A: ,    ,    , ..       PHE,    ,    5   2 ,   2   5  .    ,     .    PHE ( ,    ),    ,     10 ,    . <br> Q: ..      - ,      -  ?   ? <br> A:   .     rate limiting,   ,                . <br> Q: ..             , ? <br> A: . </p><br><p> Q: . , ..       Pythia      (),          , ? ? <br> A: ,    ,     . <br> Q:  ,   update   ? <br> A: ,    Pythia  ,         ,  -     -  ,   ,        ,     ) </p><br><p> A: ?   !   .     , ,   PHE,   , . </p><br><h2 id="vyvody">  Schlussfolgerungen </h2><br><p>      PHE (    )          + —    (  ,   ,  )      (     ).   PHE      ,                   . </p><br><p>         : </p><br><ul><li>       ( <strong></strong> )   ; </li><li>              (      ). </li></ul><br><p>  ,         . </p><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Scratch</a>   Virgil Security  ,    ,      ! </p><br><p>      (  )? </p><br><p> <strong>UPD</strong> :   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">Scratch</a> .          .     ,     .    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de434708/">https://habr.com/ru/post/de434708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de434698/index.html">Pessimismus über Multithreading</a></li>
<li><a href="../de434700/index.html">Vorteile der folgenden Styleguides bei der Entwicklung von Angular-Anwendungen</a></li>
<li><a href="../de434702/index.html">Warum moderne SSD mich zum Absturz bringt</a></li>
<li><a href="../de434704/index.html">Gründe für den Rückgang der Kosten des Mobilfunkverkehrs in Russland und die Prognose für 2019</a></li>
<li><a href="../de434706/index.html">UDB. Was ist das Teil 3. Datenpfad-FIFO</a></li>
<li><a href="../de434710/index.html">RUVDS-Blog über Habr: Jahr in drei</a></li>
<li><a href="../de434712/index.html">Dritter Turing-Test in russischer Sprache</a></li>
<li><a href="../de434714/index.html">Synchronisierung von Clientanforderungen im Frühjahr</a></li>
<li><a href="../de434716/index.html">Umzug ins Rechenzentrum: Vorbereitung</a></li>
<li><a href="../de434718/index.html">Zwei Jahre später vermisse ich immer noch die Kopfhörerbuchse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>