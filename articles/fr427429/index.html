<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•î üëÉüèæ üë©üèæ‚Äçüíª Framework GUI - par thread üòô üê† üò≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations, coll√®gues! 

 Il y a quelques mois, j'ai commenc√© √† regarder Golang dans le but de l'utiliser pour des applications de bureau. J'ai aim√© ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Framework GUI - par thread</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427429/">  Salutations, coll√®gues! <br><br>  Il y a quelques mois, j'ai commenc√© √† regarder Golang dans le but de l'utiliser pour des applications de bureau.  J'ai aim√© la langue, le volume et le sujet des paquets √©crits pour cela, mais la situation avec l'interface graphique n'est pas si rose.  Je ne m'attarderai pas sur les d√©tails maintenant, il suffira de dire qu'apr√®s avoir lu quelques critiques et un rapide aper√ßu des packages GUI existants, j'ai d√©cid√© d'√©crire le mien, d'autant plus que j'ai de l'exp√©rience avec cela. <br><br>  Ma premi√®re pens√©e a √©t√© de suivre le chemin d√©j√† bien trac√©: √©crire un ensemble de fonctions correspondantes en C, ou plut√¥t en adapter une d√©j√† pr√™te - ce que j'ai √©crit pour Harbor et C ++, le lier √† l'aide de cgo (API C pour Golang) et emballage convivial.  J'ai m√™me commenc√© √† le faire, j'ai re√ßu la premi√®re fen√™tre, mais comme j'imaginais combien de travail restait √† faire, s√©par√©ment pour Windows, s√©par√©ment pour Linux, un travail purement technique, puisque je l'avais d√©j√† parcouru, mon enthousiasme s'√©tait quelque peu calm√©. <br><br>  Et puis une autre id√©e est venue. <a name="habracut"></a><br><br>  J'ai d√©j√† une biblioth√®que GUI, HwGUI for Harbor, qui est assez fonctionnelle, multi-plateforme, que j'utilise r√©guli√®rement pour mes applications.  Tout ce dont j'ai besoin y est d√©j√† impl√©ment√©.  Pourquoi ne pas √©crire sur sa base un programme qui fonctionne comme une sorte de serveur GUI.  Apr√®s avoir d√©marr√© ce serveur, il √©coutera silencieusement un port sp√©cifique et, apr√®s avoir re√ßu une connexion de mon programme Golang, il cr√©era des fen√™tres, des widgets en r√©ponse √† ses demandes, les manipulera et fournira des commentaires lorsque des √©v√©nements de widgets apparaissent - en un mot, impl√©menter une interface graphique pour cela.  Tous les d√©tails de bas niveau de l'impl√©mentation GUI sont d√©j√† dans la biblioth√®que, pour Windows - via des appels directs √† WinAPI, pour Linux / Unix et, probablement, macOs - via GTK.  De plus, je n'ai pas l'intention de cr√©er un serveur au sens plein du terme, il n'acceptera pas les connexions de diff√©rents programmes - cela introduirait des difficult√©s suppl√©mentaires inutiles.  Pour chaque instance du programme Golang, une instance distincte du serveur GUI sera lanc√©e, ce qui simplifie encore la t√¢che.  En g√©n√©ral, le programme se composera donc de deux processus, dont l'un ex√©cute la t√¢che principale, l'autre est responsable de l'interface. <br><br>  Le package correspondant pour Go doit inclure la proc√©dure Init, qui d√©marre le serveur GUI et le joint, ainsi qu'un ensemble de structures, m√©thodes, fonctions pour cr√©er des fen√™tres et des widgets et les manipuler.  Le contenu principal de toutes ces fonctions est d'envoyer des messages d'un certain format (bas√© sur JSON) au serveur et d'en recevoir des messages.  La communication est prise en charge √† l'aide de deux ports TCP / IP, l'un est responsable de l'envoi des demandes au serveur, l'autre est responsable de la r√©ception des signaux du serveur pour le traitement des √©v√©nements (cliquer sur un bouton, fermer une fen√™tre, etc.).  La t√¢che est relativement simple, le package lui-m√™me est petit.  Pas besoin d'utiliser cgo, pas besoin de se lier √† des biblioth√®ques tierces, tout le code en pur Go.  Le fichier ex√©cutable du programme lui-m√™me et le fichier ex√©cutable du serveur GUI sont tous. <br><br>  Le choix de Harbor + HwGUI pour l'impl√©mentation du serveur GUI pour moi est principalement d√ª au fait que ce sont mes outils ¬´natifs¬ª, la solution la plus simple et la plus rapide.  Mais c'est un bon choix √† d'autres points de vue.  Voici, √† mon avis, les principaux avantages: <br><br><ul><li>  multiplateforme ¬´dans la bo√Æte¬ª; </li><li>  ce qu'on appelle l'aspect et la convivialit√© natifs, car sous Windows, il s'agit exclusivement d'appels WinAPI, sous Linux / Unix - GTK;  combien le GTK ¬´natif¬ª pour macOs je ne sais vraiment pas; </li><li>  la possibilit√© d'utiliser Harbor comme langage de script int√©gr√©, des fragments de code pour l'ex√©cution peuvent √™tre transf√©r√©s au serveur - des gestionnaires d'√©v√©nements, par exemple, qui peuvent d√©charger le programme principal de certains d√©tails d'impl√©mentation.  De plus, Harbor est bon pour beaucoup de choses, pour travailler avec dbf et certaines bases de donn√©es, par exemple; </li><li>  mise en ≈ìuvre de l'impression; </li><li>  la possibilit√© d'utiliser des formulaires d'√©cran cr√©√©s par le concepteur (utilitaire HwGUI).  Ces formulaires sont stock√©s au format XML et peuvent √™tre utilis√©s sans modification dans n'importe quel syst√®me d'exploitation dans lequel le serveur fonctionne; </li><li>  la possibilit√© d'utiliser des formulaires de rapport cr√©√©s par le m√™me concepteur pour l'impression (√©galement en XML). </li></ul><br>  Bref, j'ai commenc√© √† le faire et une partie importante du travail est d√©j√† termin√©e.  Les deux projets, GuiServer et le framework GUI externe de Golang sont sur Github, tous les liens sont √† la fin de l'article.  Voici quelques captures d'√©cran.  Rien de sp√©cial, juste des tests. <br><br>  Il s'agit d'une simple bo√Æte de dialogue: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hg/h9/mf/hgh9mfnyucglzqk2ewbsfpjfpxo.png"></div><br>  Et cela se fait sur la base d'un exemple tir√© du livre de Kernigan et Donovan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sa/o-/la/sao-lanfo07b3lpgqvsxxpsvr_m.png"></div><br>  D√©sormais, l'objectif principal des projets est de faire en sorte que ce joli couple, External et GuiServer, puisse faire tout ce que HwGUI peut faire.  Eh bien, dans le processus de cr√©ation de vraies applications √† l'aide d'Externe, il sera clair ce qui est le plus n√©cessaire. <br><br>  Cela pourrait √™tre la fin, j'ai report√© la description du paquet Golang pour une autre fois.  Mais l'essentiel de cet article ne fait que commencer.  Apr√®s tout, la m√©thode d√©crite pour impl√©menter un framework GUI avec le m√™me serveur GUI peut √™tre utilis√©e pour d'autres langues.  C, Python, Java, ..., m√™me Perl et PHP (et pourquoi pas?) - voir le titre de l'article.  Co√ªts minimaux - et une solution graphique assez fonctionnelle est pr√™te.  La chose la plus difficile pour chaque langue sp√©cifique n'est pas la mise en place d'un √©change avec le serveur, mais que cette solution s'inscrit organiquement dans son paradigme, dans sa logique interne.  Si quelqu'un veut cr√©er un tel cadre pour sa langue, j'essaierai de fournir toute l'assistance possible pour obtenir les informations n√©cessaires et, √©ventuellement, pour ajouter certaines fonctionnalit√©s au serveur GUI. <br><br>  En parall√®le avec le package Golang, j'ai fait un analogue pour Harbor, principalement √† des fins de v√©rification / d√©bogage.  Il est peu probable que je fasse un framework pour Perl, mais pour C ou C ++ c'est tr√®s probable.  Et voici pourquoi: apr√®s tout, il existe une autre fonctionnalit√© int√©ressante li√©e √† l'utilisation d'un serveur GUI, il peut √™tre ex√©cut√© sur un autre ordinateur.  Le programme principal s'ex√©cute sur un ordinateur et son interface sur un autre.  Imm√©diatement vu ici sont des options pour utiliser ce cas: <br><br><ul><li>  le programme principal s'ex√©cute sur un serveur Linux / Unix sur lequel le shell graphique n'est pas install√© du tout; </li><li>  le programme principal s'ex√©cute sur l'ordinateur de quelqu'un d'autre (avec un comptable conditionnel dans votre entreprise) et vous, sans interf√©rer avec lui, le g√©rez par vous-m√™me; </li><li>  le programme principal s'ex√©cute sur un smartphone, et vous creusez dans ses entrailles √† partir d'un ordinateur normal; </li><li>  le programme principal s'ex√©cute sur le contr√¥leur, sur certains Arduino, Raspberry ou leurs homologues, o√π il peut n'y avoir aucun moniteur normal.  Connectez-vous avec votre ordinateur portable - et c'est parti. </li></ul><br>  Eh bien, pour cette derni√®re option, un framework C pour un serveur GUI serait probablement utile, je pense que cette possibilit√© est tr√®s prometteuse. <br><br>  Et enfin, les liens: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/alkresin/guiserver</a> - GuiServer sur Github <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/alkresin/external</a> - Externe (package Go) sur Github <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.kresin.ru/guisrv.html</a> - la page <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GuiServer</a> sur mon site, ici vous pouvez t√©l√©charger des binaires pr√™ts √† l'emploi <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/post/198618</a> - mon article sur Harbour est ici sur Habr√© <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en.wikipedia.org/wiki/Harbor</a> - Harbour sur Wikip√©dia <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.kresin.ru/harbour.html</a> - page Harbour sur mon site Web <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.kresin.ru/hwgui.html</a> - la page HwGUI sur mon site Web <br><br>  PS: Il est clair que peu de gens installeront Harbour et HwGUI pour construire GuiServer √† partir des sources, donc je poste r√©guli√®rement les binaires collect√©s sur la page GuiServer sur mon site - pour Windows, Debian 8 32 bits, Ubuntu 18.04 64 bits.  Je peux assembler pour Fedora, mais sous macOs - h√©las, je ne l'ai pas √† distance de marche. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427429/">https://habr.com/ru/post/fr427429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427417/index.html">Avec de l'humour sur des disquettes de 8 pouces (dans les ann√©es 70, il n'y en avait que)</a></li>
<li><a href="../fr427419/index.html">Que faire lorsque le processeur n'a rien √† faire?</a></li>
<li><a href="../fr427421/index.html">Comment les sites de g√©n√©alogie facilitent la capture des tueurs</a></li>
<li><a href="../fr427423/index.html">City2Share: voitures √©lectriques et autonomes dans les p√¥les logistiques de Munich</a></li>
<li><a href="../fr427427/index.html">Comment ils arrivent √† l'informatique: √† propos des stagiaires et des joons (r√©sultat du sondage ¬´My Circle¬ª)</a></li>
<li><a href="../fr427431/index.html">Fonctionnement d'Android, partie 4</a></li>
<li><a href="../fr427433/index.html">√âquilibrage du trafic dans les r√©seaux IP de l'op√©rateur</a></li>
<li><a href="../fr427435/index.html">STM32H7 - r√©glage de l'horloge sans HAL</a></li>
<li><a href="../fr427437/index.html">Configuration des serveurs li√©s: serveur sql ms et teradata</a></li>
<li><a href="../fr427439/index.html">Toute la v√©rit√© sur RTOS. Article # 16. Signaux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>