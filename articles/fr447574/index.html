<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎿 🧑🏿 👨‍✈️ Notes du pigiste: Développement de la première application native React 🤙 👲 👨🏿‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur du matériel, dont nous publions la traduction, a récemment publié sa première application mobile écrite en React Native. Il se trouve que cet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Notes du pigiste: Développement de la première application native React</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/447574/">  L'auteur du matériel, dont nous publions la traduction, a récemment publié sa première application mobile écrite en React Native.  Il se trouve que cette application était également son premier projet, qu'il a créé en tant que programmeur indépendant.  Ici, il parlera de ce à quoi il a dû faire face pendant le travail - de l'initialisation du projet à sa publication sur l'App Store et Google Play. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/y8/0n/cf/y80ncfpjzzebavsfo8s2ehrotss.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Pourquoi ai-je choisi le freelance?</font> </h2><br>  En mai dernier, j'ai présenté un merveilleux projet indépendant.  À cette époque, j'étais développeur full-stack dans une startup à Stockholm.  C'était mon premier travail de programmation, j'y suis arrivé il y a tout juste un an ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> j'en parle plus en détail). <br><br>  L'été approchait rapidement, le rythme de travail, avant ce fou, jour après jour, il devenait plus calme.  Une fois, il y a eu une semaine où, par ordre de priorité, j'ai dû m'occuper du support technique.  J'ai dû faire face à quelques erreurs, je m'ennuyais un peu, le travail ne m'a pas plu. <br><br>  C'est lorsque j'étais d'humeur si sombre que mon père m'a informé de son intention de créer une application mobile pour les clients de son entreprise.  Bien qu'il sache que j'étais très occupé au travail et ne s'attendait pas à ce que je donne tout mon temps pour mettre en œuvre son idée, il a quand même demandé si je voulais devenir une sorte de consultant dans ce nouveau projet.  J'ai alors senti que j'avais faim d'un travail mental intéressant et j'ai donc répondu positivement à sa question.  Même si je n'avais pas prévu cela au départ, du consultant, je suis devenu un développeur d'applications de premier plan. <br><br>  Ici, vous vous demandez peut-être pourquoi quelqu'un pourrait même essayer de faire du développement mobile après ne pas avoir travaillé comme développeur Web professionnel pendant un an?  Ne serait-il pas plus sage de continuer à acquérir de l'expérience dans un créneau choisi, de grandir professionnellement et de créer un CV impressionnant? <br><br>  Je suis tout à fait d'accord que ce serait beaucoup plus raisonnable.  Mais je suis un "travailleur multipostes" sans espoir qui a décidé il y a plusieurs années de prendre des décisions de carrière basées non pas sur une certaine stratégie, mais sur mes propres préférences.  J'ai décidé de faire ce qui m'apporte de la joie.  En d'autres termes, mon CV semble maintenant tel qu'il peut difficilement être amené dans un état encore plus erratique. <br><br>  Bien sûr, faire ce que vous aimez et suivre une stratégie de carrière ne sont pas nécessairement des phénomènes mutuellement exclusifs.  En fait, j'ai beaucoup aimé mon travail précédent et l'employeur.  Il se trouve que je suis tombé sur un autre projet, dont l'envie s'est avérée plus forte que le désir de faire ce que je faisais auparavant. <br><br>  Qu'est-ce qui a rendu ce projet si attrayant pour moi?  Qu'est-ce qui l'a rendu plus intéressant que de travailler sur un produit en développement rapide utilisé par des milliers d'entreprises, au sein d'une équipe composée des meilleures personnes que j'ai rencontrées?  On peut répondre à cette question de cette façon: c'est la liberté, c'est le défi qui m'a donné le besoin de résoudre un problème difficile, et c'est le désir de s'épanouir. <br><br><h2>  <font color="#3AC1EF">Pourquoi a-t-il été décidé d'utiliser React Native?</font> </h2><br>  Au moment où j'ai rejoint le projet, mon client avait déjà reçu plusieurs offres d'agences numériques locales.  Avant même d'envisager la possibilité de développer l'application de manière indépendante, on m'a demandé de manière amicale d'évaluer ces propositions.  Quand je les ai regardés, j'ai été simplement étonné de leur faible qualité. <br><br>  L’une des agences a envoyé un aperçu de la conception de l’application qui, en plus d’être désordonnée, ne correspondait pas non plus à l’identité de l’entreprise reflétée sur le site du client.  Un autre a suggéré des prix exorbitants - à la fois pour le développement et pour le soutien de projet.  Le troisième, semble-t-il, a envoyé la proposition, sans même avoir vraiment étudié les exigences du client.  Toutes les agences qui ont soumis les propositions avaient un point commun: elles allaient créer une application en utilisant le cadre hybride Cordova. <br><br>  Mais ce n'est pas tout.  Bien que Cordova soit un outil entièrement gratuit et open source, l'une des agences a même tenté de cacher des informations sur la technologie spécifique qu'elle utilise.  Au lieu de cela, les représentants des agences ont parlé d'une plate-forme de développement d'applications mobiles «interne» créée en interne.  Il semble que nous parlions d'un petit add-on sur Cordova, conçu uniquement pour garantir fermement les droits exclusifs de cette agence pour le service de l'application et rendre la transition future possible du client vers un autre développeur difficile et coûteuse.  D'une manière générale, les propositions en question n'étaient pas particulièrement impressionnantes. <br><br>  Il convient de noter que je n'ai rien contre les cadres hybrides.  J'utilise constamment des applications basées sur eux.  Cela, par exemple, Gmail, Slack, Atom, Figma.  Cependant, j'avais entendu parler de React Native pendant un certain temps, de la façon dont cette bibliothèque vous permet de créer des applications mobiles multiplateformes en utilisant JavaScript qui n'étaient pas hybrides! <br><br>  Et maintenant quoi?  Est-il nécessaire, d'une manière délicate, de prendre en charge iOS et Android lors du développement d'applications JavaScript natives?  Cette question s'est posée du fait que lorsque j'étais intéressé par de telles applications, il s'est avéré que les applications iOS étaient écrites en utilisant Objective-C ou Swift, et Java ou Kotlin étaient utilisées pour développer des applications Android. <br><br>  Bien sûr, il n'y a pas de trucs spéciaux ici.  J'avais donc encore une question.  Comment les applications React Native peuvent-elles être appelées de véritables applications natives?  Si vous répondez à cette question en un mot, il s'avère que le tout est dans l'API.  Il m'a fallu plus de temps pour comprendre cela que je ne voudrais le reconnaître, mais la façon dont les applications React Native, dites natives, fonctionnent avec des plates-formes mobiles, ne consiste pas à lancer du code JavaScript ou à compiler ce code dans code natif.  Le fait est que ces applications exécutent des requêtes API qui affichent des composants natifs à l'aide d'Objective-C sur iPhone et Java sur Android. <br><br>  Si vous voulez avoir une compréhension plus approfondie des bases de React Native - je recommande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette</a> réponse à Quora, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ceci est une</a> présentation avec React Conf, et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> matériel, qui raconte la sortie de React Native. <br><br>  Bien qu'à cette époque, je ne savais pas exactement ce qui se passait dans les entrailles des applications natives de React, je savais que le travail de ces applications était réduit à l'exécution de code natif.  C'était mon principal argument contre le choix d'une des solutions basées sur Cordoue proposées par les agences.  Je pensais que si une entreprise avait besoin d'une application mobile, cette application devrait être native.  Si quelqu'un a besoin d'une application basée sur HTML / CSS / JS, il serait préférable de dépenser de l'argent simplement pour améliorer les capacités mobiles de son application Web. <br><br>  Lorsque j'ai partagé ce raisonnement avec un client, il m'a demandé si je connaissais quelqu'un qui pouvait créer une telle application.  J'ai répondu que je ne savais pas.  Ensuite, ils m'ont demandé si je pouvais le faire moi-même.  "Je ne peux pas," répondis-je.  Cependant, à ce moment-là, j'étais déjà intéressé par tout cela et je ne pouvais tout simplement pas m'empêcher d'expérimenter avec React Native, en prenant les spécifications de l'application comme base de mes expériences. <br><br>  Avant de m'en rendre compte moi-même, j'ai pu créer la base de l'application.  Par conséquent, quelques semaines seulement après cette conversation, le client et moi avons convenu de développer l'application pour lui. <br><br><h2>  <font color="#3AC1EF">Spécifications d'application</font> </h2><br>  Avant de nous plonger dans les détails techniques, je voudrais parler un peu du type d'application avec laquelle nous avons affaire. <br><br>  Le client pour lequel l'application est développée est une entreprise de Stockholm, qui s'occupe de la gestion du coworking, des bureaux collectifs.  En d'autres termes, nous parlons d'espaces de bureaux qui peuvent être loués par différentes entreprises.  À l'heure actuelle, mon client possède environ 10 de ces bureaux existants dans lesquels environ 400 entreprises de 1 400 employés louent des locaux.  Ce sont les locataires des bureaux et le public cible de l'application. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/664/8e2/b6b/6648e2b6b9a65f42334a4c7999c2ce88.jpg"></div><br>  <i><font color="#999999">Zone de loisirs dans l'un des coworking</font></i> <br><br>  Après avoir discuté de la future application avec le chef de projet, j'ai réussi à découvrir certaines exigences pour le projet: <br><br><ul><li>  La possibilité de se connecter, de se déconnecter et de réinitialiser le mot de passe.  Veuillez noter que tous les comptes d'utilisateurs sont créés par des administrateurs et que l'application ne prend pas en charge l'enregistrement dans le système.  Par conséquent, si vous décidez de télécharger cette application, vous ne pourrez pas travailler avec. </li><li>  Affichez et modifiez le profil utilisateur: nom, adresse e-mail, mot de passe, avatar. </li><li>  Prise en charge des notifications push. </li><li>  La rubrique Accueil, avec laquelle l'utilisateur peut prendre connaissance des actualités de l'entreprise dans son ensemble, et notamment des actualités concernant le coworking loué par l'entreprise. </li><li>  Section communautaire, avec laquelle l'utilisateur peut afficher des informations sur divers coworking, contacter leurs responsables et voir quelles entreprises sont engagées dans un certain coworking. </li><li>  Section de conférence, avec laquelle vous pouvez réserver des salles de réunion et gérer les réservations. </li><li>  Sélection de section, dans laquelle l'utilisateur peut trouver des remises et des offres exclusives. </li><li>  Vous devez d'abord créer une version iOS, puis ajouter le support Android. </li><li>  Application Web pour l'administrateur, qui vous permet de gérer les informations affichées dans l'application React Native.  Bien que je parlerai ici principalement du développement frontal, je pense qu'il serait approprié de mentionner que la partie serveur de l'application pour l'administrateur est basée sur Ruby on Rails, Postgres et Heroku. </li></ul><br>  Vous remarquerez peut-être que ce projet a des exigences plutôt modestes.  Peut-être que quelque chose dans cet esprit peut être appelé un bon exemple de la première application que quelqu'un va développer en utilisant un nouvel ensemble de technologies.  Si vous êtes intéressé à jeter un coup d'œil à ce que j'ai fini par (et, en passant, à décider de passer du temps à lire l'histoire sur la façon dont tout cela a fonctionné pour moi), voici un aperçu de la première version de l'application. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f2/8c6/8b4/4f28c68b485bf637135e88b184e3e0b5.png"></div><br>  <i><font color="#999999">Première version de l'application</font></i> <br><br>  Toujours en train de lire?  Super, alors passons. <br><br><h2>  <font color="#3AC1EF">Apprendre des meilleurs</font> </h2><br>  Imaginez que vous avez promis à vos amis de leur construire une maison.  Mais vous ne savez pas comment faire.  Vous ne savez vraiment pas par où commencer.  Que faut-il faire en premier dans une telle situation?  La réponse est évidente: trouver quelqu'un qui peut construire des maisons et apprendre de lui. <br><br>  À strictement parler, c'est exactement ce que j'ai essayé de faire.  Et j'ai eu beaucoup de chance de trouver exactement ce dont vous avez besoin.  Donc, après seulement quelques heures de recherche de matériel de formation React Native, j'ai trouvé sur YouTube un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cours vidéo</a> Harvard React Native en 13 parties.  Chaque conférence, d'une durée de 90 à 120 minutes, était consacrée à un sujet distinct.  En conséquence, j'ai été confronté à environ 23 heures de matériel de formation de haute qualité. <br><br>  Ayant trouvé ce cours, je me mis immédiatement, comme un obsédé, à étudier.  En conséquence, après plusieurs semaines de cours sur lesquels je pouvais passer des soirées et des week-ends, j'ai terminé ce cours et créé une bonne base pour l'application. <br><br>  Maintenant, je peux dire que ce cours, sans aucun doute, est le meilleur que j'ai réussi à trouver.  Les cours concis et bien préparés ont bien sûr joué un rôle positif énorme à l'école, mais je ne peux que noter les compétences de l'enseignant.  Je décrirais le style de conduite de ces cours avec les mots suivants: vitesse, extrême praticité, concentration.  Pas d'eau, pas de blagues ou d'histoires hors de propos.  Contrairement à ce que votre humble serviteur écrit ici ... <br><br>  D'une manière ou d'une autre, il y avait le sentiment que tant d'informations utiles étaient contenues dans chaque conférence qu'il faudrait deux fois plus de temps pour les présenter à de nombreux autres enseignants.  En d'autres termes, ce cours est très similaire au célèbre Harvard CS50. <br><br>  Par conséquent, si vous souhaitez trouver un point d'ancrage pour votre première application React Native, je recommande définitivement ce cours pour vous.  Bien qu'ici, il convient de noter une caractéristique.  Ce cours utilise la boîte à outils <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Expo</a> .  Il s'agit d'un excellent outil adapté à la plupart des applications simples, qui prend toutes sortes de subtilités concernant le travail avec les plates-formes mobiles.  Mais si vous, comme moi, souhaitez créer la base d'un projet qui, tôt ou tard, peut se transformer en une application assez grande et complexe, et que vous souhaitez en même temps une totale liberté d'action, vous feriez probablement mieux d'initialiser le projet en React Native. <br><br>  La deuxième «ressource de formation» que j'ai pu utiliser était mes collègues.  Heureusement, l'entreprise où j'ai travaillé a également commencé à développer le projet React Native.  Bien que je ne sois pas moi-même impliqué dans ce projet, j'ai beaucoup appris, juste parler à ceux qui ont travaillé sur ce projet et analyser leur code. <br><br>  Maintenant que nous avons discuté de tout ce qui va avec le développement d'applications React Native, il est temps de passer aux problèmes techniques. <br><br><h2>  <font color="#3AC1EF">Environnement de développement</font> </h2><br>  Après avoir utilisé une équipe de la forme <code>react-native init MyApp</code> , j'ai créé la base de l'application, l'une des premières tâches à laquelle j'ai été confrontée a été le développement d'un nouvel environnement de développement. <br><br>  Si vous êtes arrivé à l'environnement React Native à partir du développement Web habituel, il convient de noter que beaucoup de choses vous sembleront familières.  Pour moi, cela signifiait que je continuais à utiliser Atom comme éditeur de code, iTerm comme terminal et GitUp comme interface pour travailler avec git.  (Si les fans de Vim lisent ceci en ce moment, je suggère que tout le monde ne soit pas convaincu.) Mais, en plus des outils ci-dessus, j'avais besoin d'autre chose pour développer des applications React Native. <br><br>  Par exemple, je devais m'habituer à l'émulateur iOS.  Bien que l'exécution, par les outils de ligne de commande, de la commande <code>react-native run-ios</code> , semble d'une simplicité trompeuse, au tout début d'un simple appel à cette commande n'était pas suffisant pour que l'émulateur fonctionne correctement.  Étant donné que de nouveaux packages npm ont été ajoutés au projet presque tous les jours (et plus tard, un certain nombre de modules CocoaPod natifs), j'ai, beaucoup plus près que je le souhaitais, été obligé de me familiariser avec le rituel désagréable d'effacement des ressources Watchman et du cache Haste, en supprimant le dossier node_modules, réinstallation des modules et réinitialisation du cache Metro Bundler.  Heureusement, toutes ces tâches peuvent être résolues à l'aide de la commande suivante: <br><br><pre> <code class="javascript hljs">watchman watch-del-all &amp;&amp; rm -rf tmp/haste-map-react-native-packager &amp;&amp; rm -rf node_modules &amp;&amp; yarn &amp;&amp; npm start --reset-cache</code> </pre> <br>  Dans 9 cas sur 10, une telle "danse avec un tambourin" a permis à l'émulateur de reprendre vie.  Parfois, cependant, même cela ne suffisait pas.  Ensuite, j'ai dû me plonger dans la description des messages d'erreur sur GitHub et lire les discussions sur StackOverflow. <br><br>  La racine de certains autres problèmes était le fait que pendant longtemps j'ai pensé que pour résoudre certains problèmes, il était nécessaire d'exécuter Xcode.  Et croyez-moi, vous vous efforcerez de rester dans cette maison d'horreur IDE le moins de temps possible. <br><br>  Une histoire similaire a été avec le lancement de l'émulateur avec une certaine version de l'iPhone.  Si quelqu'un m'avait dit plus tôt que la commande ci-dessous résout ce problème directement à partir de la ligne de commande, alors j'aurais peut-être vécu un peu plus facilement dans mes premiers mois de développement de React. <br><br><pre> <code class="javascript hljs">react-native run-ios --simulator=<span class="hljs-string"><span class="hljs-string">'iPhone X'</span></span></code> </pre> <br>  D'autres exemples des difficultés à s'habituer au nouvel environnement de développement comprennent le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">processus en trois étapes de</a> préparation de la version finale de l'application (pour le placement sur l'App Store ou dans un environnement d'intégration continue, comme Visual Studio App Center ou Firebase) et le processus de transition de la version finale à la version, destiné au débogage (en mode développement).  Beaucoup trouveront peut-être évident que les modifications nécessaires au projet peuvent être apportées à l'aide de n'importe quel éditeur de texte.  En tout cas, ce n'est qu'un exemple de quelques petites choses qui ont eu un impact inattendu sur mon flux de travail lorsque je travaillais en mode développement. <br><br>  Et enfin, il a fallu un certain temps pour s'habituer à la nécessité de basculer constamment entre les différentes applications macOS nécessaires pour résoudre les tâches que je, lors du développement d'applications Web, généralement résolues en utilisant Chrome seul. <br><br>  Afin de regarder ce que le code JavaScript écrit sur la console et d'analyser, à des fins de débogage, la sortie HTML / CSS, je me suis tourné vers le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">débogueur natif React</a> .  Afin de suivre l'état de la demande, les actions soumises, les demandes d'API et les réponses reçues, j'ai utilisé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Reactotron</a> .  Bien que j'ai trouvé ces deux applications extrêmement utiles, je n'ai pas pu m'empêcher de penser à mon flux de travail habituel utilisé pour créer des applications Ember.js, quand je pouvais résoudre toutes ces tâches dans le même environnement dans lequel mes applications étaient exécutées (en utilisant le plugin Inspecteur Ember pour Chrome). <br><br><h2>  <font color="#3AC1EF">La navigation</font> </h2><br>  L'organisation de la navigation / du routage semble être une tâche très difficile pour React Native.  Au cours de l'existence de ce cadre, de nombreuses solutions différentes à ce problème sont apparues, mais il existe encore quelque chose que l'on pourrait appeler une norme universellement reconnue.  J'ai décidé d'utiliser la bibliothèque React-Navigation, mon choix a été principalement influencé par le fait qu'ils ont parlé de cette bibliothèque dans le cours React Native que j'ai suivi, ainsi que par le fait que mes collègues l'aient utilisée. <br><br>  Si j'ai investi un peu de temps dans une étude suffisamment approfondie de cette question, je pourrais découvrir ce qui suit: <br><br><ul><li>  Le projet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React-Navigation</a> compte environ 15 000 étoiles sur GitHub et 86 problèmes non résolus.  Il est entièrement basé sur JavaScript et propose la documentation la plus détaillée parmi les solutions de navigation que j'ai vues. </li><li>  La bibliothèque de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">navigation native de réaction a</a> marqué environ 10 000 étoiles, il s'est avéré avoir 162 problèmes non résolus.  Cependant, il utilise non seulement JavaScript.  Pour travailler avec, vous devez modifier des fichiers natifs. </li><li>  Le référentiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-router</a> possède environ 35 000 étoiles et une liste de 55 problèmes en suspens sur GitHub.  Certes, ces indicateurs ne peuvent pas être directement comparés aux autres projets décrits ici, car ce référentiel comprend des packages conçus non seulement pour React Native, mais aussi pour React. </li><li>  Le projet de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">navigation native</a> compte environ 3 000 étoiles et 55 problèmes non résolus.  Ceux qui vont l'étudier et l'utiliser devraient tenir compte du fait qu'il est toujours en version bêta, qu'il utilise non seulement JavaScript, et qu'Airbnb est engagé dans son support (cette société a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">décidé d'abandonner</a> React Native ) </li></ul><br>  Mais, même compte tenu de ce qui précède, j'aurais probablement choisi React-Navigation de toute façon, car je n'avais pas le temps d'essayer toutes ces bibliothèques, comme, par exemple, l'auteur de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce</a> rapport.  Enfin, comme cela a été dit dans ce rapport, le choix d'un outil d'organisation de la navigation est une question dont la solution ne dépend pas de laquelle de ces outils peut être qualifiée de meilleure, mais de laquelle est la mieux adaptée aux besoins d'un projet particulier. <br><br>  Après avoir travaillé avec react-navigation pendant environ 9 mois, je dois dire que je n'ai vraiment rien à redire.  Si vous comparez cette bibliothèque avec la bibliothèque <a href="">router.js</a> familière utilisée dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ember.js</a> , je peux dire que c'est quelque chose de complètement nouveau. <br><br>  Il m'a été très facile de gérer les trois principaux types d'outils de navigation React-Navigation.  Ce sont <code>StackNavigator</code> , <code>TabNavigator</code> et <code>DrawerNavigator</code> .  Il était beaucoup plus difficile de comprendre comment combiner ces outils afin de créer le système de navigation d'application dont j'avais besoin. <br><br>  Par exemple, le fait que le composant <code>DrawerNavigator</code> devrait être l'élément racine du système de navigation (une étape au-dessus du composant principal <code>TabNavigation</code> ) n'était absolument pas évident pour moi.  Si c'est difficile à imaginer, <code>DrawerNavigator</code> quoi ressemble <code>DrawerNavigator</code> en action (dans une application réelle, tout fonctionne beaucoup plus facilement). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/592/c1b/ef2/592c1bef296cfa6b46a6e3fb82ee03b6.gif"></div><br>  <i><font color="#999999">DrawerNavigator de react-navigation en action</font></i> <br><br>  Comme vous pouvez le voir, je devais ouvrir la barre de navigation latérale d'un coup, en étant sur n'importe quel écran d'application. <br><br>  J'ai perçu la barre latérale comme quelque chose de secondaire par rapport à la barre de navigation principale située en bas de l'application.  Par conséquent, il m'a semblé que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DrawerNavigator</a> devait être placé dans l'arborescence de l'itinéraire (il est illustré ci-dessous) soit sous le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BottomTabNavigator</a> principal, soit au même niveau que cet élément. <br><br>  Cependant, après avoir beaucoup souffert, essayant de forcer la barre latérale à l'endroit où cela s'est révélé inapproprié, j'ai réalisé que, conformément aux caractéristiques de <code>DrawerNavigator</code> -Navigation, <code>DrawerNavigator</code> devrait être placé un cran au-dessus du <code>BottomTabNavigator</code> , c'est-à-dire dans racine de l'arborescence de navigation.  J'espère que ma découverte aidera l'un des lecteurs de ce matériel à gagner du temps qui serait autrement consacré à la lecture de la documentation et des documents sur GitHub. <br><br>  Voici à quoi ressemble l'arborescence de navigation de l'application.  Ici, en tant qu'élément racine, <code>MainDraverNavigation</code> utilisé. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/567/7f3/e7d/5677f3e7d38ff88e7c3b9db7865a96c0.png"></div><br>  <i><font color="#999999">L'arborescence de navigation finale de la première version de l'application</font></i> <br><br>  Ici, vous vous demandez peut-être pourquoi, pour les sections Communauté et Conférence, vous avez besoin de <code>StackNavigator</code> et <code>TabNavigator</code> .  Ne pouvez-vous pas simplement déposer la couche <code>StackNavigator</code> et aller directement à <code>TabNavigator</code> ? <br><br>  Le fait est que j'avais besoin de chacun des deux éléments <code>TabNavigator</code> pour avoir un titre.  Les voici. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc4/602/dd6/dc4602dd6122f63d13ec162de4f72a9c.png"></div><br>  <i><font color="#999999">TabNavigator, titre</font></i> <br><br>  Ici encore, mes suppositions ne correspondaient pas à l'appareil de navigation React.  Je pensais que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MaterialTopTabNavigator</a> devrait être un composant de navigation tout à fait normal, j'ai donc décidé qu'il devrait y avoir une option intégrée dans ses paramètres qui vous permet de définir un titre.  Il s'est avéré que rien de tel n'était là, et c'est pourquoi j'ai dû utiliser <code>StackNavigator</code> comme couche intermédiaire, ajoutant, par conséquent, un niveau de complexité supplémentaire à l'infrastructure d'application et guidé par des considérations assez «cosmétiques». <br><br>  Ce manque de réaction-navigation, en plus, m'a causé beaucoup plus de problèmes.  Ils ont notamment consisté à organiser le pliage et la disparition de l’image d’en-tête lors du défilement de l’utilisateur dans la liste des éléments organisés par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FlatList</a> .  Étant donné que les titres des sections Accueil et Sélection étaient affichés dans le même <code>StackNavigator</code> que les listes de leurs éléments, ce problème ne serait pas difficile à résoudre en laissant simplement le titre défiler avec le reste de la liste. <br><br>  Mais dans le cas des sections Communauté et Conférence, je n'ai pas trouvé de moyen d'appliquer la même solution, car les en-têtes sont affichés à l'aide des éléments <code>StackNavigator</code> et les listes sont affichées à l'aide des éléments <code>StackNavigator</code> , un cran plus haut dans l'arborescence de navigation.  En conséquence, j'ai refusé de faire défiler le titre, ce qui a introduit une hétérogénéité désagréable dans l'application. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/12c/32d/323/12c32d323e8cc657fcb79db8fe8c36dc.gif"></div><br>  <i><font color="#999999">Défilement dans TabNavigator et StackNavigator</font></i> <br><br>  Bien que le problème décrit avec le titre dans l'émulateur simulant Iphone X ne semble pas sérieux, sur le petit écran, le titre peut occuper environ 20% de l'espace d'écran disponible.  Si quelqu'un sait comment résoudre ce problème, faites-le moi savoir. <br><br>  Le même problème avec <code>TabNavigator</code> a également été ressenti dans la section Destination.  Comme le montre la figure suivante, à droite, je voulais placer un autre élément <code>TabNavigator</code> sur l'onglet <code>TabNavigator</code> Spaces afin d'afficher les trois premiers onglets Info, Members et Contact. <br><br>  Lorsque vous travaillez avec <code>TabNavigator</code> il était difficile de placer un diaporama en haut de l'élément sans avoir à compliquer la décision et à ne pas causer beaucoup de problèmes de navigation (principalement liés aux options de navigation).  J'ai donc dû recourir à un package JS appelé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-swiper</a> afin de travailler avec ces trois onglets.  Il est à noter que cette solution me conviendrait parfaitement si son application ne conduisait pas à une animation abrupte de lignes mettant en valeur les en-têtes de tabulation.  Dans tous les cas, j'ai considéré cet inconvénient comme un paiement équitable pour la possibilité d'éviter les problèmes avec un système de navigation alternatif. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e4/980/e20/0e4980e20485e339e8f0ce13ea634db4.gif"></div><br>  <i><font color="#999999">Comparez TabNavigator de react-navigation avec react-native-swiper (notez la différence dans l'animation des lignes dorées sous les noms des onglets)</font></i> <br><br>  Voici les conclusions que j'ai tirées après la mise en œuvre du sous-système de navigation d'application: <br><br><ul><li>  Il existe de nombreuses solutions bien documentées pour organiser la navigation dans les applications React Native, parmi lesquelles j'ai choisi react-navigation.  Cela correspond le mieux à mes besoins. </li><li>  La bibliothèque react-navigation simplifie considérablement le démarrage d'un projet si le développeur ne sait pas grand-chose sur le fonctionnement des systèmes de navigation des plates-formes mobiles. </li><li>  La bibliothèque React-Navigation possède des fonctionnalités qui ne sont pas intuitives (du moins pour un développeur Web), mais il n'y a rien qui ne puisse être contourné, mais pas de la manière la plus efficace. </li></ul><br><h2>  <font color="#3AC1EF">Écran d'accueil</font> </h2><br>  En lançant une nouvelle application dans l'émulateur créé à l'aide de la commande <code>react-native init</code> , en la rechargeant constamment au fur et à mesure que vous y apportez des modifications, vous vous rendez très vite compte que l'application a besoin d'un joli écran de démarrage (on les appelle aussi «écrans de démarrage»). <br><br>  Comment faire un écran de démarrage est bien écrit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , donc je ne répéterai pas les mots de l'auteur de ce matériel.  Je ne parlerai que du problème que j'ai rencontré, et sur lequel il n'y a rien dans ce guide.  Voici à quoi ressemble ce problème: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d81/45d/91a/d8145d91a9f279584dd9985ad6503abe.jpg"></div><br>  <i><font color="#999999">L'écran de démarrage avec un problème</font></i> <br><br>  Ce problème apparaît dans de rares cas sur iOS, mais certains utilisateurs de l'application le rencontreront probablement.  J'ai découvert ce problème pour la première fois lorsque je travaillais à un endroit, où je ne pouvais pas utiliser le WiFi et que je connectais mon ordinateur portable à Internet 4G via un téléphone.  Les utilisateurs d'iPhone savent que lorsque le téléphone distribue Internet, sa barre d'état devient bleue et augmente.  Cela a "cassé" l'image sur mon écran de démarrage lorsque j'ai lancé l'application sur le téléphone.  Le même problème s'est posé lors de l'appel. <br><br>  En conséquence, après avoir fouillé pendant un certain temps dans le référentiel d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">écran de réaction natif</a> et n'y trouvant rien d'utile, j'ai décidé de contourner ce problème en masquant complètement la barre d'état tout en affichant l'écran de démarrage. <br><br>  C'est très simple - ajoutez simplement la clé <code>UIStatusBarHidden</code> , en lui affectant la valeur logique, puis, après avoir appelé <code>SplashScreen.hide()</code> , définissez la propriété <code>hidden</code> du composant React Native <code>StatusBar</code> sur <code>StatusBar</code> . <br><br><h2>  <font color="#3AC1EF">Gestion de l'État</font> </h2><br>  J'ai le sentiment que depuis deux ans j'entends chaque jour parler de la priorité de l'accord sur la configuration, le principe de la Convention sur la Configuration (CoC).  C'était donc à mon travail précédent.  Et ce n'est pas surprenant, car là, sur le serveur, nous avons utilisé Ruby on Rails, et sur le client - Ember.js - deux frameworks, dont l'essence correspond au mieux au principe CoC.  Je pensais savoir ce que cela signifiait, mais le processus d'exploration de la gestion des états dans React Native m'a donné une toute nouvelle compréhension de ce principe. <br><br>  Bien que j'aie, dans plusieurs applications très simples, expérimenté la bibliothèque React influencée par ce principe, je n'ai jamais créé quelque chose d'assez grand basé sur cela qui me permettrait d'apprécier les avantages de l'utilisation de conteneurs d'état comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Redux</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MobX</a> .  La plupart de mon expérience dans la gestion de l'état des applications JS concerne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ember Data</a> (il s'agit du système intégré Ember pour gérer l'état et organiser le stockage de données persistantes). <br><br>  Étant donné que la bibliothèque Redux me semblait être l'une des meilleures solutions au problème de gestion de l'État dont j'avais entendu parler pendant de nombreuses années (et qui a été discuté dans le cours React Native que j'ai couvert), en général, je n'ai pas regardé vers ses concurrents .  Je voulais juste équiper mon application du meilleur des systèmes de gestion d'état existants et le faire sans trop d'effort. <br><br>  Dans Ember, 90% de l'infrastructure de données est entre les mains du programmeur prêt à l'emploi.  Je ne soupçonnais pas que dans mon projet actuel, tout serait exactement le contraire.  En fait, non seulement React, mais Redux, la bibliothèque de gestion d’état la plus populaire, ne donne rien d’utile pour maintenir l’état global.  Cette bibliothèque est si légère que le programmeur doit assumer 90% des soucis de travailler avec des données à l'intérieur de l'application afin de créer un système de gestion d'état décent. <br><br>  Après avoir découvert un développeur beaucoup moins expérimenté que maintenant, la chose la plus difficile pour moi a été de m'habituer aux nouvelles fonctionnalités et aux principes de l'immunité.  Après avoir supporté le volume de travail étonnamment important qui doit être fait pour télécharger simplement les données du serveur ou les envoyer au serveur, tout cela s'est réuni sous la forme de 7 étapes assez simples: <br><br><ol><li>  Ajoutez trois constantes au fichier avec des constantes: <code>SOME_ACTION_REQUEST</code> , <code>SOME_ACTION_FAILED</code> , <code>SOME_ACTION_SUCCEEDED</code> . </li><li>  Ajoutez le créateur d'action au fichier d'action. </li><li>  Traitez trois actions dans un réducteur approprié et, si nécessaire, ajoutez un nouveau réducteur au système et incluez-le dans le réducteur racine. </li><li>  Ajoutez des travailleurs à une saga appropriée et, si nécessaire, ajoutez une nouvelle saga au système et incluez-la dans la saga racine (j'utilise la bibliothèque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">redux-saga</a> pour traiter les actions asynchrones). </li><li>  Ajoutez une fonction pour gérer toutes les demandes d'API possibles. </li><li>  Mappez les données nécessaires de l'état aux propriétés dans le composant React correspondant. </li><li>  Soumettez l'action <code>SOME_ACTION_REQUEST</code> partir du composant React correspondant. </li></ol><br>  Redux et redux-saga, bien sûr, ont des fonctionnalités beaucoup plus étendues, mais compte tenu de ce qui m'intéresse actuellement, les 7 étapes ci-dessus sont ce que Redux est pour moi. <br><br><h2>  <font color="#3AC1EF">Séances</font> </h2><br>  Nous avons donc mis en place l'environnement de développement pour les applications natives React, créé une arborescence de navigation, préparé l'infrastructure de gestion des états.  Que sera-t-il bon de faire dans la prochaine étape du projet?  Pour moi, la création d'un système d'authentification des utilisateurs était une réponse tout à fait naturelle à cette question.  Alors maintenant, nous allons parler des sessions. <br><br>  Si vous êtes venu dans la sphère React Native à partir du développement Web, vous allez gérer les sessions sans trop de difficulté.  Si vous êtes même un peu familier avec les concepts sur lesquels le stockage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LocalStorage</a> est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">basé</a> , alors il vous suffit de savoir que lorsque vous travaillez avec React Native, l'accès à ce stockage doit être remplacé par un appel à <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">AsyncStorage</a> .  Il s'agit du niveau d'abstraction qui vous permet de stocker des données au format clé-valeur entre les sessions.  En d'autres termes, vous pouvez ici stocker le jeton d'authentification généré sur le serveur, transmis au client après que l'utilisateur s'est correctement connecté au système. <br><br><h2>  <font color="#3AC1EF">Listes</font> </h2><br>  Si nous parlons de travailler avec des listes, j'ai le sentiment que dans React Native, ce problème a été assez bien résolu.  En général, on peut noter que le développeur a trois possibilités.  Si cela fonctionne avec des listes statiques, les données présentées dans lesquelles ne change pas, alors <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ScrollView en</a> aura probablement assez.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous devez travailler avec des listes plus longues, qui sont d'ailleurs dynamiques, alors il vaut la peine de regarder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FlatList</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si nous parlons de listes encore plus grandes, qui, en outre, peuvent être divisées en sections, il sera utile de recourir aux capacités de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SectionList</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les listes dynamiques, j'utilise exclusivement </font></font><code>FlatList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Et bien que moi, à un niveau intuitif, comme ces listes et la possibilité de les configurer, j'ai, en travaillant avec elles, rencontré plusieurs problèmes. </font><font style="vertical-align: inherit;">Je vais maintenant en parler.</font></font><br><br><h3> <font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Dessiner la liste pour mettre à jour son contenu</font></font></font> </h3><br>   <code>FlatList</code>  ,   <code>refreshControl</code> .        ,       ,    ,    ,     .    ,  React Native  ,      .  — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RefreshControl</a> . ,          . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ce/4ce/cd2/3ce4cecd286b9c56011091d2bad71fd4.gif"></div><br> <i><font color="#999999"> RefreshControl  </font></i> <br><br>       ,   ,  ,    <code>refreshControl</code> ,   <code>RefreshControl</code> ,    ,  . ,  ,           : <br><br><ul><li>       ,     ,      .      ,    <code>handleRefresh()</code> . </li><li>         ,      ,       « » (    ). </li></ul><br>   —       . <br><br>    ,        ,          ,       ,   .        ,    ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   GitHub. <br><br>    ,   <code>refreshControl</code>  <code>onEndReached</code> (      )        <code>fetching</code> . ,  -  ,      <code>false</code>  <code>true</code> ,   —  ,   ,   250 ,  <code>RefreshControl</code>   ,     . <br><br>      ,      <code>setTimeout()</code>         <code>fetching</code>  350 .    .   ,   ,     <code>setTimeout</code> —   ,      ,          <code>handleRefresh()</code>  <code>handleLoadMore()</code> —   <code>refreshing</code>  <code>loadingMore</code> .  ,    , , , -      . <br><br>    ,      <code>onRefresh</code>  <code>refreshing</code>   <code>refreshControl</code> . ,      <code>refreshControl</code> ,   ,       ,         ,   . <br><br><h3> <font color="#3AC1EF">▍ </font> </h3><br>    ,            .   —  ,    ,        Load More    ,          ,    ,     ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d9/828/d06/6d9828d065a9839c0473f41e96f2b881.gif"></div><br> <i><font color="#999999">    FlatList.    , ,     2, onEndReached    ,     2-    </font></i> <br><br> ,             <code>onEndReached</code> .         . <br><br>      <code>onEndReachedThreshold</code> ,    <code>FlatList</code>  ,    ,  <code>onEndReached</code> .            . <br><br>   100 ,   ,        10 ,  1,   <code>onEndReachedThreshold</code> , ,   <code>onEndReached</code>   ,        ,   90-.    2,       ,     2-    ,   —     80- ,   . <br><br>   ,       , , ,    <code>FlatList</code> .  ,    , ,        ,  <code>handleLoadMore()</code> ,    <code>onEndReached</code> ,  ,  —  10  . <br><br>  ,  ,        <code>loadingMore</code> ,  ,     <code>handleLoadMore()</code> ,            ,   ,   <code>!loadingMore</code> . ,   ,                 . <br><br><h3> <font color="#3AC1EF">▍ </font> </h3><br>   <code>ListLoadingComponent</code>  <code>FlatList</code> ,  ,   <code>ListHeaderComponent</code> , <code>ListEmptyComponent</code>  <code>ListFooterComponent</code> ,  ,   -     , , ,    . <br><br>      ,                <code>render()</code> . <br><br><h3> <font color="#3AC1EF">▍    </font> </h3><br> ,     ,   ,           .        ,      ,     . <br><br>      ,    <code>scrollToOffset</code>  <code>FlatList</code> ,    ,  .       ,       .       <code>ref</code>   <code>FlatList</code> : <br><br><pre> <code class="javascript hljs">&lt;FlatList ref={(ref) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.newsListRef = ref; }} ... /&gt;</code> </pre> <br>       ,      .         <code>ScrollToOffset</code>    <code>handleScrollToTop()</code> , , ,        react-navigation,       ,    : <br><br><pre> <code class="javascript hljs">componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.navigation.setParams({   <span class="hljs-attr"><span class="hljs-attr">scrollToTop</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleScrollToTop, }); } handleScrollToTop = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.newsListRef.ScrollToOffset({   <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">animated</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }); };</code> </pre> <br>    ,    react-navigation  3  <code>ref</code>   ,    <code>BottomTabNavigator</code>         . <br><br><h2> <font color="#3AC1EF"></font> </h2><br>    ,     ,         . ,       ,         4G- ( ,  , 3G),            , ,   ,    ,      . <br><br> ,  , ,  ,       , ,   ,      .              .     ,  ,       ,     ,      . <br><br>   ,  ,    .    7 ,      <code>image</code> ,        ,           (   ,   ). <br><br><h3> <font color="#3AC1EF">▍ </font> </h3><br>   ,       ,    .        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-image-picker</a> ,    Cloudinary  Carrierwawe  Rails-. <br><br>          ,  Node-API Cloudinary   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-fetch-blob</a> .    ,    ,         ,   ,         ,      . <br><br>  ,  ,        react-native-fetch-blob,    .   ,       react-native-fetch-blob   ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API JS FormData</a> .     ,    react-native-fetch-blob        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rn-fetch-blob</a> ,        . <br><br><h3> <font color="#3AC1EF">▍ </font> </h3><br>  ,    React Native <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Image</a>    <code>style</code> , <code>source</code>  <code>resizeMode</code>        .      ,  ,      -  ,  , ,        . <br><br> , ,    ,       .      ,      ,    ,    .             .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avatar</a>   react-native-elements. <br><br>       ,           <code>Image</code> .  ,          - ,            . <br><br>   ,      ,       .      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c59/c8b/d70/c59c8bd709b25a8154b5d08a19f0aa7b.gif"></div><br> <i><font color="#999999"> react-native-slideshow  </font></i> <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-slideshow</a> ,     ,    .  ,     , ,     ,           ,       ,     . <br><br><h3> <font color="#3AC1EF">▍ </font> </h3><br>    7    ,  ,           .    ,  —  ,     ,    .        ,         - .      . <br><br>    ,  ,      -,        ,  ,   ,    -     (   —       ),   ,       ,  ,      Facebook    .    ,         . <br><br>  ,   ,        React Native-.        ,          .  —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-loading-placeholder</a> ,  , ,   .  —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-linear-gradient</a> ,    . ,      ,   ,   ,   ,   ,      , ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a45/58c/4c1/a4558c4c10eec80c56f53df7cc41e78e.gif"></div><br> <i><font color="#999999">    react-native-loading-placeholder      react-native-linear-gradient</font></i> <br><br><h3> <font color="#3AC1EF">▍</font> </h3><br>       —   .   ,     React Native <code>Image</code>      .     ,   -   <code>CachedImage</code>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-cached-image</a> . <br><br>       npm-      <code>Image</code> ,    ,   ,   <code>CachedImage</code> .        Reactotron  ,  ,    . <br><br>  ,   ,      ,      .  ,    ,        Cloudinary,   95%  ,   ,    4%.     . <br><br> ,   .    <code>CachedImage</code>   <code>activityIndicatorProps={{ animating: false }}</code>        ,    . <br><br><h2> <font color="#3AC1EF">  </font> </h2><br><h3> <font color="#3AC1EF">▍   </font> </h3><br>  React Native  -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Picker</a> .  - ,       ( -  ),    JS-,          .  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-picker-select</a> ,     <code>&lt;select&gt;</code>  iOS  Android     . <br><br>       JS-,   React Native- (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lodash</a> ,         ),        ,   ,       ,       .            ,     ,       -  .    ,     . <br><br><h3> <font color="#3AC1EF">▍   </font> </h3><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-calendars</a>  Wix.      : <br><br><ul><li>       iOS   ,          . ,     ,  ,     -,   —  . </li><li> React Native               — <code>DatePickerIOS</code>  <code>DatePickerAndroid</code> ,           ,      . </li><li>  ,           ,      ,    Apple  Google. </li></ul><br>  ,    . ,   ,  — . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c96/819/c98/c96819c980c9aaaa05a78d9f7a65cec3.gif"></div><br> <i><font color="#999999">  react-native-calendars  react-native-picker-select  </font></i> <br><br><h3> <font color="#3AC1EF">▍ </font> </h3><br>       —   ,      . <br>           SaaS-,        .           SOAP,      API    Conference.       ,   ,   ,  ,   . <br><br>     ,     ,   ,           5  .  - ,     JavaScript <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Date</a>  UTC,       ,    .   ,    ,           , ,   ,   - . «     », —   . <br><br>   ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">moment-js</a> ,       React Native,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">timezone</a> ,        : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> timeSthlmAfterFive = moment().isAfter(moment.tz(<span class="hljs-string"><span class="hljs-string">'17:00:00'</span></span>, <span class="hljs-string"><span class="hljs-string">'HH:mm:ss'</span></span>, <span class="hljs-string"><span class="hljs-string">'Europe/Stockholm'</span></span>), <span class="hljs-string"><span class="hljs-string">'second'</span></span>);</code> </pre> <br><h2> <font color="#3AC1EF">   </font> </h2><br>     ,  , ,             .       React Native  -,  ,        , ,  ,    ,             <code>font-face</code>  CSS. <br><br>          .    ,   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> ,    10      -.         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">react-native-vector-icons</a>      . <br><br><h2> <font color="#3AC1EF"> , , </font> </h2><br>      CI/CD,   DevOps-     -,   . <br><br>     (   )    , -          .        ,         .             GitHub-        .   ,         : <br><br><ul><li>       .    ,  ,       . </li><li>            ,  -  ,      ,    . </li></ul><br>            .      ,           ,  ,          ,     ,     ,  push-.  ,     ,    ,   ,         . <br><br>    Visual Studio App Center (VSAC). <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   Chain React 2017    . ,     ,   ,      DevOps-,       .  ,      ,    ,  ,  push-,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Codepush</a> .             -. ,   ,     ,   ,    iOS,    Android.  ,  -  ,      ,   ,   ,      ,         -    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72c/584/e42/72c584e420d6ee722b22342c97a5daf4.gif"></div><br> <i><font color="#999999">Visual Studio App Center ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> )</font></i> <br><br> «     », —   ,   .       ,      (API —   ).  ,       ,   ,   ,   -,      (,   ,    ). <br><br>   ?  Microsoft,  ,   VSAC  «  ».       ,   ,        Codepush (  React Native-)  HockeyApp (    ),          - .   ,         «developers, developers, developers, developers»  . <br><br> ,      VSAC  ,               -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fastlane</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">BuddyBuild</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Firebase</a> ?   ,          ,       ,   VSAC     ,       ,  ,    .   ,      ,   ?    ,  VSAC,   ,  . <br><br>            VSAC.     , ,   ,                . <br><br>   ,     ,  ,  VSAC        Apple Developers     (Apple,  ,         ,     ).    ,       ,     ,      . <br><br>   ,       VSAC,     ,           ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>   CI/CD-   . <br><br><h2> <font color="#3AC1EF">  Android</font> </h2><br>  ,  iOS-   ,     Android    .   Android Studio      Android        React Native <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Platform</a> .       ,   <code>Platform.select()</code> .   - ,   ,    ,   <code>Platform.OS</code> . <br><br>  ,  ,      Google Play        ,     App Store.  Pourquoi?    ,    App Store     Apple. <br><br><h2> <font color="#3AC1EF">   Apple</font> </h2><br>  ,  -,       React Native,    .            ,  Apple. ,  ,     ,          ,     ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/313/331/5ff/3133315ff1d9b76ec68963be79256d9d.jpg"></div><br> <i><font color="#999999">Apple  </font></i> <br><br>   ,    —    « ».    -,     ,    iOS-,   ,  ,     ,    . <br><br>  —     Apple.       ,  ,    ,  .        Dun &amp; Bradstreet,    Apple,      .   ,         ,      ,   Apple (,     , Apple  ,      —  ). <br><br>            ,   Apple       , ,   —  ,     -.      .   ,   —   ? <br><br>   ,     . <br><br> , ,    Apple Developer     .            . <br><br>      .      .   provisioning-, iOS-, ,  Apple .p12    push-,    dSym-.  ,        ,  ,     . <br><br>   Apple,        50%     24 ,  90%  —   48 .   ,    ,      — , ,     Apple-. <br><br>  ,       .       «Metadata Rejected».       ,      - .  ,           5    (      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">App Store Review Guidelines</a> ),  . <br><br>    ,      ,       ,   — .  ,             , ,   ,      ,        . ,          — ,   ()   . <br><br>       iOS,      .        ,  ,   ,         .      ,  ,    .     . ,   ,      . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>    ,  React Native-     .             React Native-.     -.   ,     :        .       . <br><br>      , ,  ,  ,    .    ,  ,    — ,         . <br><br>    ,     -     ,    .         . , ,    ,   8   .      .              . <br><br>     ,      .        ,       ,  -   . <br><br>  ,       ,  ,       6-7    ,             .   ,  ,     ,  : <br><br><ul><li>        ,      (iOS  Android),   ,      ,  . </li><li>     JavaScript.     ,     ,         Ember.js. </li><li>             React.js,    ,           React-,     .  ,     JS-/. </li><li>        ,      Redux. </li><li>     DevOps    . </li><li>      ,     . </li><li>     UI/UX. </li><li> ,   ,    ,  ,   ,      ,    ,     ,       . </li></ul><br>            JS-     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Flutter</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NativeScript</a> ,       Objective-C, Swift, Java  Kotlin,     React Native   . <br><br> ,  -,     ,   React Native  ,   ,    ,      .    ,  React Native —  ,   .       React Native . <br><br>  <b>Chers lecteurs!</b>        ? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447574/">https://habr.com/ru/post/fr447574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447564/index.html">Modifications de l'autorisation de référentiel sur GitLab.com</a></li>
<li><a href="../fr447566/index.html">Les scientifiques ont d'abord montré une véritable "photo" d'un trou noir</a></li>
<li><a href="../fr447568/index.html">Entretien avec l'astronaute Alexander Laveikin sur le cinéma spatial, les surcharges de 20 unités et l'atterrissage en douceur</a></li>
<li><a href="../fr447570/index.html">GoLand 2019.1: analyse des performances du code, Smart Step Into, refactoring Extract Interface, Nilness Analyzer et plus</a></li>
<li><a href="../fr447572/index.html">Énergie, chaleur et eau: deuxième partie</a></li>
<li><a href="../fr447576/index.html">Développement JavaScript responsable Partie 1</a></li>
<li><a href="../fr447578/index.html">Accélération de JavaScript à l'aide de la définition du type de données</a></li>
<li><a href="../fr447580/index.html">Chasse aux menaces ou comment se défendre contre 5% des menaces</a></li>
<li><a href="../fr447582/index.html">Rusatom: impression 3D de métaux en Russie</a></li>
<li><a href="../fr447584/index.html">Anatomie du "Space Data Center". Serveur céleste: regardez sous le capot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>