<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ”¬ ğŸ“¦ ğŸ¤µğŸ¼ æ’­æ”¾â€œ osuï¼â€ï¼Œä¸è¦å¿˜è®°é”™è¯¯ ğŸ“¦ ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ¿ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰çƒ­è¡·äºå¼‚å›½æƒ…è°ƒçš„äººï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­æ²¡æœ‰é”™è¯¯ã€‚ å¦‚ä»Šï¼Œåœ¨æµ‹è¯•å°ä¸Šï¼ŒPVS-Studioç¡®å®æ˜¯ä¸€ä¸ªéš¾å¾—çš„æ¥å®¾-Cï¼ƒæ¸¸æˆã€‚ å³å¤§é¡»ï¼ å’Œå¾€å¸¸ä¸€æ ·ï¼šå¯»æ‰¾é”™è¯¯ï¼Œæ€è€ƒï¼Œç©è€ã€‚ 

 æ¸¸æˆ 
 å¤§é¡»ï¼ -å¼€æºéŸ³ä¹èŠ‚å¥æ¸¸æˆã€‚ ä»æ¸¸æˆç½‘ç«™ä¸Šçš„ä¿¡æ¯æ¥çœ‹ï¼Œå®ƒéå¸¸å—æ¬¢è¿ï¼Œå› ä¸ºæ‹¥æœ‰1500ä¸‡æ³¨å†Œç©å®¶ã€‚ è¯¥é¡¹ç›®çš„ç‰¹ç‚¹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ’­æ”¾â€œ osuï¼â€ï¼Œä¸è¦å¿˜è®°é”™è¯¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/483438/"><p><img src="https://habrastorage.org/getpro/habr/post_images/3ac/9da/a12/3ac9daa12b519fc14e45f7f65abdd204.png" alt="å›¾ç‰‡1" align="left"></p> æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰çƒ­è¡·äºå¼‚å›½æƒ…è°ƒçš„äººï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­æ²¡æœ‰é”™è¯¯ã€‚ å¦‚ä»Šï¼Œåœ¨æµ‹è¯•å°ä¸Šï¼ŒPVS-Studioç¡®å®æ˜¯ä¸€ä¸ªéš¾å¾—çš„æ¥å®¾-Cï¼ƒæ¸¸æˆã€‚ å³å¤§é¡»ï¼ å’Œå¾€å¸¸ä¸€æ ·ï¼šå¯»æ‰¾é”™è¯¯ï¼Œæ€è€ƒï¼Œç©è€ã€‚ <br><a name="habracut"></a><br><h2> æ¸¸æˆ </h2><br> å¤§é¡»ï¼  -å¼€æºéŸ³ä¹èŠ‚å¥æ¸¸æˆã€‚ ä»<a href="https://osu.ppy.sh/home">æ¸¸æˆç½‘ç«™ä¸Š</a>çš„ä¿¡æ¯æ¥çœ‹ï¼Œå®ƒéå¸¸å—æ¬¢è¿ï¼Œå› ä¸ºæ‹¥æœ‰1500ä¸‡æ³¨å†Œç©å®¶ã€‚ è¯¥é¡¹ç›®çš„ç‰¹ç‚¹æ˜¯å…è´¹ç©æ³•ï¼Œå…·æœ‰è‡ªå®šä¹‰å¡ç‰‡åŠŸèƒ½çš„å¤šå½©è®¾è®¡ï¼Œç”¨äºç¼–åˆ¶ç©å®¶åœ¨çº¿æ’åçš„é«˜çº§åŠŸèƒ½ï¼Œå¤šäººæ¸¸æˆçš„å­˜åœ¨ä»¥åŠå¤§é‡éŸ³ä¹ä½œå“ã€‚ æˆ‘ä¸ä¼šè¯¦ç»†æè¿°æ¸¸æˆï¼Œæœ‰å…´è¶£çš„äººå°†å¾ˆå®¹æ˜“åœ¨ç½‘ç»œä¸Šæ‰¾åˆ°æ‰€æœ‰ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œ <a href="https://en.wikipedia.org/wiki/Osu!">è¿™é‡Œ</a> ã€‚ <br><br> æˆ‘å¯¹é¡¹ç›®çš„æºä»£ç æ›´æ„Ÿå…´è¶£ï¼Œå¯ä»¥ä»<a href="https://github.com/ppy/osu">GitHub</a>ä¸‹è½½è¯¥æºä»£ç ã€‚ å¯¹å­˜å‚¨åº“çš„å¤§é‡æäº¤ï¼ˆè¶…è¿‡24000æ¬¡æäº¤ï¼‰ç«‹å³å¼•èµ·å…³æ³¨ï¼Œè¿™è¡¨æ˜è¯¥é¡¹ç›®çš„ç§¯æå¼€å‘ä¸€ç›´æŒç»­åˆ°ä»Šå¤©ï¼ˆæ¸¸æˆäº2007å¹´å‘å¸ƒï¼Œä½†å·¥ä½œå¯èƒ½è¾ƒæ—©å¼€å§‹ï¼‰ã€‚ åŒæ—¶ï¼Œæ²¡æœ‰å¤ªå¤šæºä»£ç -1813 .csæ–‡ä»¶åŒ…å«13.5ä¸‡è¡Œä»£ç ï¼Œä¸åŒ…æ‹¬ç©ºè¡Œã€‚ è¿™æ®µä»£ç åŒ…å«äº†æˆ‘é€šå¸¸åœ¨æ£€æŸ¥ä¸­æ²¡æœ‰è€ƒè™‘åˆ°çš„æµ‹è¯•ã€‚ æµ‹è¯•ä»£ç åŒ…å«åœ¨306ä¸ª.csæ–‡ä»¶ä¸­ï¼Œå› æ­¤ï¼ŒåŒ…å«2.5ä¸‡è¡Œä»£ç ï¼Œä¸åŒ…æ‹¬ç©ºè¡Œã€‚ è¿™æ˜¯ä¸€ä¸ªå°é¡¹ç›®ï¼šä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼ŒPVS-Studioåˆ†æä»ªçš„Cï¼ƒæ ¸å¿ƒåŒ…å«å¤§çº¦30ä¸‡è¡Œä»£ç ã€‚ <br><br> æ€»ä½“è€Œè¨€ï¼Œä¸ºäº†æ£€æŸ¥æ¸¸æˆä¸­çš„é”™è¯¯ï¼Œæˆ‘ä½¿ç”¨äº†åŒ…å«1507ä¸ªæºä»£ç æ–‡ä»¶å’Œ11ä¸‡è¡Œçš„éæµ‹è¯•é¡¹ç›®ã€‚ ä½†æ˜¯ï¼Œç»“æœä½¿æˆ‘æ„Ÿåˆ°æœ‰äº›æ»¡æ„ï¼Œå› ä¸ºæˆ‘ä¸å¾—ä¸å‘Šè¯‰æ‚¨ä¸€äº›æœ‰è¶£çš„é”™è¯¯ã€‚ <br><br><h2> å¤±è¯¯ </h2><br>  <a href="https://www.viva64.com/ru/w/v3001/">V3001</a>åœ¨'||'çš„å·¦ä¾§å’Œå³ä¾§æœ‰ç›¸åŒçš„å­è¡¨è¾¾å¼'result == HitResult.Perfect' æ“ä½œå‘˜ã€‚  DrawableHoldNote.cs 266 <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CheckForResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... ApplyResult(r =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (holdNote.hasBroken &amp;&amp; (result == HitResult.Perfect || result == HitResult.Perfect)) result = HitResult.Good; .... }); }</code> </pre> <br> é¢å‘å¤åˆ¶ç²˜è´´çš„ç¼–ç¨‹çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ æˆ‘çš„åŒäº‹Valâ€‹â€‹ery Komarovæœ€è¿‘åœ¨ä»–çš„æ–‡ç« â€œ <a href="https://www.viva64.com/ru/b/0699/">2019å¹´Javaé¡¹ç›®ä¸­çš„åå¤§é”™è¯¯</a> â€ä¸­ä½¿ç”¨ï¼ˆå¼•å…¥ï¼‰äº†ä¸€ä¸ªæ¼«ç”»æœ¯è¯­ã€‚ <br><br> å› æ­¤ï¼Œä¸¤ä¸ªç›¸åŒçš„æ£€æŸ¥æ¥è¿è¿›è¡Œã€‚ å…¶ä¸­ä¸€é¡¹æ£€æŸ¥æœ€æœ‰å¯èƒ½åŒ…å«å¦ä¸€ä¸ª<i>HitResult</i>æšä¸¾<i>å¸¸é‡</i> ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> HitResult { None, Miss, Meh, Ok, Good, Great, Perfect, }</code> </pre> <br> éœ€è¦ä½¿ç”¨å“ªä¸ªç‰¹å®šå¸¸æ•°ï¼Œæˆ–è€…æ ¹æœ¬ä¸éœ€è¦ç¬¬äºŒæ£€æŸ¥ï¼Ÿ åªæœ‰å¼€å‘äººå‘˜æ‰èƒ½å›ç­”çš„é—®é¢˜ã€‚ æ— è®ºå¦‚ä½•ï¼Œéƒ½ä¼šäº§ç”Ÿé”™è¯¯ï¼Œä½¿ç¨‹åºçš„é€»è¾‘å¤±çœŸã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3001/">V3001</a>åœ¨'&amp;&amp;'è¿ç®—ç¬¦çš„å·¦ä¾§å’Œå³ä¾§æœ‰ç›¸åŒçš„å­è¡¨è¾¾å¼'familyï¼= GetFamilyStringï¼ˆTournamentTypeface.Aquaticoï¼‰'ã€‚  TournamentFont.cs 64 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetWeightString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> family, FontWeight weight</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weight == FontWeight.Regular &amp;&amp; family != GetFamilyString(TournamentTypeface.Aquatico) &amp;&amp; family != GetFamilyString(TournamentTypeface.Aquatico)) weightString = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; .... }</code> </pre> <br> å¹¶å†æ¬¡å¤åˆ¶ç²˜è´´ã€‚ æˆ‘æ ¼å¼åŒ–äº†ä»£ç ï¼Œå› æ­¤é”™è¯¯å¾ˆå®¹æ˜“å¼•èµ·æ³¨æ„ã€‚ åœ¨åŸå§‹ç‰ˆæœ¬ä¸­ï¼Œæ•´ä¸ªæ¡ä»¶å†™åœ¨ä¸€è¡Œä¸­ã€‚ å¾ˆéš¾è¯´å¦‚ä½•å›ºå®šä»£ç ã€‚  <i>TournamentTypeface</i>æšä¸¾åŒ…å«å•ä¸ªå¸¸é‡ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TournamentTypeface { Aquatico }</code> </pre> <br> è¯¥æ¡ä»¶å¯èƒ½é”™è¯¯åœ°ä½¿ç”¨äº†ä¸¤æ¬¡<i>å®¶åº­</i>å˜é‡ï¼Œä½†è¿™å¹¶ä¸å‡†ç¡®ã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3009/">V3009</a> [CWE-393]å¥‡æ€ªçš„æ˜¯ï¼Œæ­¤æ–¹æ³•å§‹ç»ˆè¿”å›ä¸€ä¸ªç›¸åŒçš„'false'å€¼ã€‚  KeyCounterAction.cs 19 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPressed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T action, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> forwards</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!EqualityComparer&lt;T&gt;.Default.Equals(action, Action)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; IsLit = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (forwards) Increment(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br> è¯¥æ–¹æ³•å°†å§‹ç»ˆè¿”å›<i>false</i> ã€‚ å¯¹äºæ­¤ç±»é”™è¯¯ï¼Œæˆ‘é€šå¸¸æ£€æŸ¥è°ƒç”¨ä»£ç ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸åªæ˜¯åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸ä½¿ç”¨è¿”å›å€¼ï¼Œæ‰€ä»¥æ²¡æœ‰é”™è¯¯ï¼ˆä¸‘é™‹çš„ç¼–ç¨‹é£æ ¼é™¤å¤–ï¼‰ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘é‡åˆ°äº†ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPressed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T action</span></span></span><span class="hljs-function">)</span></span> =&gt; Target.Children .OfType&lt;KeyCounterAction&lt;T&gt;&gt;() .Any(c =&gt; c.OnPressed(action, Clock.Rate &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>));</code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œä½¿ç”¨äº†<i>OnPressed</i>æ–¹æ³•è¿”å›çš„ç»“æœã€‚ å¹¶ä¸”ç”±äºå®ƒå§‹ç»ˆä¸º<i>false</i> ï¼Œæ‰€ä»¥è°ƒç”¨<i>OnPressed</i>çš„ç»“æœä¹Ÿå°†å§‹ç»ˆä¸º<i>false</i> ã€‚ æˆ‘è®¤ä¸ºæ‚¨åº”è¯¥å†æ¬¡ä»”ç»†æ£€æŸ¥æ­¤ä»£ç ï¼Œå› ä¸ºå‘ç”Ÿé”™è¯¯çš„å¯èƒ½æ€§å¾ˆé«˜ã€‚ <br><br> å¦ä¸€ä¸ªç±»ä¼¼çš„é”™è¯¯ï¼š <br><br><ul><li>  V3009 [CWE-393]å¥‡æ€ªçš„æ˜¯ï¼Œæ­¤æ–¹æ³•å§‹ç»ˆè¿”å›ä¸€ä¸ªç›¸åŒçš„'false'å€¼ã€‚  KeyCounterAction.cs 30 </li></ul><br>  <a href="https://www.viva64.com/ru/w/v3042/">V3042</a> [CWE-476]å¯èƒ½ä¸ºNullReferenceExceptionã€‚  'ï¼Ÿã€‚' å’Œâ€œã€‚â€ è¿ç®—ç¬¦ç”¨äºè®¿é—®â€œ val.NewValueâ€å¯¹è±¡TournamentTeam.csçš„æˆå‘˜41 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TournamentTeam</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Acronym.ValueChanged += val =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) FlagName.Value = val.NewValue.Length &gt;= <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-comment"><span class="hljs-comment">// &lt;= ? val.NewValue?.Substring(0, 2).ToUpper() : string.Empty; }; .... }</span></span></code> </pre> <br> åœ¨<i>ï¼Ÿï¼š</i>è¿ç®—ç¬¦çš„æ¡ä»¶ä¸‹ï¼Œå˜é‡<i>val.NewValue</i>ä¸å®‰å…¨ã€‚ åˆ†æå™¨å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼Œä»é‚£æ—¶èµ·ï¼Œåœ¨éšåçš„åˆ†æ”¯ä¸­ï¼Œä½¿ç”¨å®‰å…¨é€‰é¡¹é€šè¿‡æ¡ä»¶è®¿é—®<i>è¯­å¥val.NewValueï¼Ÿ.Substringï¼ˆ....ï¼‰</i>æ¥è®¿é—®å˜é‡ã€‚ <br><br> å¦ä¸€ä¸ªç±»ä¼¼çš„é”™è¯¯ï¼š <br><br><ul><li>  V3042 [CWE-476]å¯èƒ½ä¸ºNullReferenceExceptionã€‚  'ï¼Ÿã€‚' å’Œâ€œã€‚â€ è¿ç®—ç¬¦ç”¨äºè®¿é—®â€œ val.NewValueâ€å¯¹è±¡TournamentTeam.csçš„æˆå‘˜48 </li></ul><br>  <a href="https://www.viva64.com/ru/w/v3042/">V3042</a> [CWE-476]å¯èƒ½ä¸ºNullReferenceExceptionã€‚  'ï¼Ÿã€‚' å’Œâ€œã€‚â€ è¿ç®—ç¬¦ç”¨äºè®¿é—®â€œ apiâ€å¯¹è±¡SetupScreen.csçš„æˆå‘˜77 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reload</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActionableInfo { Label = <span class="hljs-string"><span class="hljs-string">"Current User"</span></span>, ButtonText = <span class="hljs-string"><span class="hljs-string">"Change Login"</span></span>, Action = () =&gt; { api.Logout(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... }, Value = api?.LocalUser.Value.Username, .... }, .... } private class ActionableInfo : LabelledDrawable&lt;Drawable&gt; { .... public Action Action; .... }</span></span></code> </pre> <br> è¿™æ®µä»£ç ä¸å¤ªæ¸…æ¥šï¼Œä½†æˆ‘è®¤ä¸ºé”™è¯¯ä»ç„¶å­˜â€‹â€‹åœ¨ã€‚ åˆ›å»ºç±»å‹ä¸º<i>ActionableInfo</i>çš„å¯¹è±¡ã€‚  <i>Action</i>å­—æ®µä½¿ç”¨lambdaåˆå§‹åŒ–ï¼Œåœ¨è¯¥lambdaçš„æ­£æ–‡ä¸­ï¼Œä½¿ç”¨å¯èƒ½ä¸ºç©ºçš„å¼•ç”¨<i>api</i>æ˜¯ä¸å®‰å…¨çš„ã€‚ åˆ†æå™¨è®¤ä¸ºæ­¤æ¨¡å¼æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæ­¤åï¼Œåœ¨åˆå§‹åŒ–<i>Value</i>å‚æ•°æ—¶ï¼Œ <i>api</i>å˜é‡å¯ä»¥å®‰å…¨è¿è¡Œã€‚ æˆ‘ç§°è¯¥é”™è¯¯ä¸ºæ¨¡æ£±ä¸¤å¯ï¼Œå› ä¸ºlambdaä»£ç å‡å®šæ‰§è¡Œå»¶è¿Ÿï¼Œç„¶åï¼Œä¹Ÿè®¸å¼€å‘äººå‘˜ä»¥æŸç§æ–¹å¼ä¿è¯<i>api</i>é“¾æ¥çš„å€¼ä¸ä¸ºé›¶ã€‚ ä½†è¿™åªæ˜¯ä¸€ä¸ªå‡è®¾ï¼Œå› ä¸ºlambdaä¸»ä½“ä¸åŒ…å«ä»»ä½•å®‰å…¨é“¾æ¥çš„è¿¹è±¡ï¼ˆä¾‹å¦‚ï¼Œåˆæ­¥æ£€æŸ¥ï¼‰ã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3066/">V3066</a> [CWE-683]ä¼ é€’ç»™â€œ Atan2â€æ–¹æ³•çš„å‚æ•°çš„å¯èƒ½é”™è¯¯é¡ºåºï¼šâ€œ diff.Xâ€å’Œâ€œ diff.Yâ€ã€‚  SliderBall.cs 182 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateProgress</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> completionProgress</span></span></span><span class="hljs-function">)</span></span> { .... Rotation = <span class="hljs-number"><span class="hljs-number">-90</span></span> + (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(-Math.Atan2(diff.X, diff.Y) * <span class="hljs-number"><span class="hljs-number">180</span></span> / Math.PI); .... }</code> </pre> <br> åˆ†æå™¨æ€€ç–‘ä½¿ç”¨<i>Math</i>ç±»çš„<i>Atan2</i>æ–¹æ³•æ—¶ï¼Œå¼€å‘äººå‘˜ä¼šæ··æ·†å‚æ•°çš„é¡ºåºã€‚  <i>Atan2å¹¿å‘Š</i> ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Parameters: // y: // The y coordinate of a point. // // x: // The x coordinate of a point. public static double Atan2(double y, double x);</span></span></code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œè¿™äº›å€¼ä»¥ç›¸åçš„é¡ºåºä¼ è¾“ã€‚ æˆ‘æ— æ³•åˆ¤æ–­è¿™æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º<i>UpdateProgress</i>æ–¹æ³•åŒ…å«è®¸å¤šéå¹³å‡¡çš„è®¡ç®—ã€‚ æˆ‘åªæ˜¯æ³¨æ„åˆ°ä»£ç ä¸­å¯èƒ½å­˜åœ¨é—®é¢˜çš„äº‹å®ã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3080/">V3080</a> [CWE-476]å¯èƒ½çš„ç©ºè§£é™¤å¼•ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥â€œ Beatmapâ€ã€‚  WorkingBeatmap.cs 57 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> Track </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetVirtualTrack</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastObject = Beatmap.HitObjects.LastOrDefault(); .... }</code> </pre> <br> åˆ†æå™¨æŒ‡å‡ºäº†é€šè¿‡<i>Beatmap</i>ç©ºé“¾æ¥è®¿é—®çš„å±é™©ã€‚ è¿™æ˜¯ä»€ä¹ˆï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IBeatmap Beatmap { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> LoadBeatmapAsync().Result; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (TaskCanceledException) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } } }</code> </pre> <br> å¥½å§ï¼Œåˆ†æä»ªæ˜¯æ­£ç¡®çš„ã€‚ <br><br> æœ‰å…³PVS-Studioå¦‚ä½•å‘ç°æ­¤ç±»é”™è¯¯ä»¥åŠä¸ç±»ä¼¼ä¸»é¢˜ç›¸å…³çš„Cï¼ƒ8.0åˆ›æ–°ï¼ˆä½¿ç”¨æ½œåœ¨çš„ç©ºå¼•ç”¨ï¼‰çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§æ–‡ç« â€œ <a href="https://www.viva64.com/ru/b/0631/">Cï¼ƒ8.0å’Œé™æ€åˆ†æä¸­çš„å¯ç©ºå¼•ç”¨ç±»å‹</a> â€ã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3083/">V3083</a> [CWE-367]äº‹ä»¶'ObjectConverted'çš„ä¸å®‰å…¨è°ƒç”¨ï¼Œå¯èƒ½ä¼šå‘ç”ŸNullReferenceExceptionã€‚ è¯·è€ƒè™‘åœ¨è°ƒç”¨äº‹ä»¶ä¹‹å‰å°†äº‹ä»¶åˆ†é…ç»™å±€éƒ¨å˜é‡ã€‚  BeatmapConverter.cs 82 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convertHitObjects</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ObjectConverted != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { converted = converted.ToList(); ObjectConverted.Invoke(obj, converted); } .... }</code> </pre> <br> éå…³é”®ä¸”å¾ˆå¸¸è§çš„é”™è¯¯ã€‚ åœ¨æ£€æŸ¥äº‹ä»¶æ˜¯å¦ä¸º<i>ç©º</i>åŠå…¶è°ƒç”¨ä¹‹é—´ï¼Œä»–ä»¬å¯ä»¥å–æ¶ˆè®¢é˜…è¯¥äº‹ä»¶ï¼Œè¿™å°†å¯¼è‡´ç¨‹åºå´©æºƒã€‚ <br> è§£å†³æ–¹æ³•ä¹‹ä¸€ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convertHitObjects</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... converted = converted.ToList(); ObjectConverted?.Invoke(obj, converted); .... }</code> </pre> <br>  <a href="https://www.viva64.com/ru/w/v3095/">V3095</a> [CWE-476]åœ¨éªŒè¯æ˜¯å¦ä¸ºnullä¹‹å‰ï¼Œå·²ä½¿ç”¨â€œåˆ—â€å¯¹è±¡ã€‚ æ£€æŸ¥çº¿ï¼š141ï¼Œ142ã€‚SquareGraph.cs 141 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">redrawProgress</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; ColumnCount; i++) columns[i].State = i &lt;= progress ? ColumnState.Lit : ColumnState.Dimmed; columns?.ForceRedraw(); }</code> </pre> <br> åœ¨å¾ªç¯ä¸­ç»•è¿‡<i>åˆ—</i>é›†åˆæ˜¯ä¸å®‰å…¨çš„ã€‚ åŒæ—¶ï¼Œå¼€å‘äººå‘˜å‡å®š<i>column</i>é“¾æ¥å¯èƒ½ä¸ºnullï¼Œå› ä¸ºåœ¨ä»£ç çš„åé¢ï¼Œä½¿ç”¨äº†æ¡ä»¶è®¿é—®è¿ç®—ç¬¦æ¥è®¿é—®é›†åˆã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3119/">V3119</a>è°ƒç”¨é‡å†™çš„äº‹ä»¶'OnNewResult'å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚ è€ƒè™‘æ˜¾å¼å®ç°äº‹ä»¶è®¿é—®å™¨æˆ–ä½¿ç”¨â€œ sealedâ€å…³é”®å­—ã€‚  DrawableRuleset.cs 256 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addHitObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TObject hitObject</span></span></span><span class="hljs-function">)</span></span> { .... drawableObject.OnNewResult += (_, r) =&gt; OnNewResult?.Invoke(r); .... } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action&lt;JudgementResult&gt; OnNewResult;</code> </pre> <br> åˆ†æä»ªè­¦å‘Šä½¿ç”¨è¦†ç›–äº‹ä»¶æˆ–è™šæ‹Ÿäº‹ä»¶çš„å±é™©ã€‚ ç¡®åˆ‡çš„å±é™©æ˜¯ä»€ä¹ˆ-æˆ‘å»ºè®®é˜…è¯»<a href="https://www.viva64.com/ru/w/v3119/">è¯´æ˜ä¹¦ä¸­</a>è¿›è¡Œè¯Šæ–­ã€‚ å¦å¤–ï¼Œæœ‰ä¸€æ¬¡æˆ‘å†™äº†ä¸€ç¯‡å…³äºè¯¥ä¸»é¢˜çš„æ–‡ç« ï¼Œâ€œ <a href="https://www.viva64.com/ru/b/0453/">Cï¼ƒä¸­çš„è™šæ‹Ÿäº‹ä»¶ï¼šå‡ºäº†ç‚¹é—®é¢˜â€</a> ã€‚ <br><br> ä»£ç ä¸­çš„å¦ä¸€ä¸ªç±»ä¼¼çš„ä¸å®‰å…¨æ„é€ ï¼š <br><br><ul><li>  V3119è°ƒç”¨é‡å†™çš„äº‹ä»¶å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚ è€ƒè™‘æ˜¾å¼å®ç°äº‹ä»¶è®¿é—®å™¨æˆ–ä½¿ç”¨â€œ sealedâ€å…³é”®å­—ã€‚  DrawableRuleset.cs 257 </li></ul><br>  <a href="https://www.viva64.com/ru/w/v3123/">V3123</a> [CWE-783]ä¹Ÿè®¸æ˜¯â€œ ??â€ æ“ä½œå‘˜çš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸä¸åŒã€‚ å®ƒçš„ä¼˜å…ˆçº§ä½äºå…¶å·¦ä¾§çš„å…¶ä»–è¿è¥å•†çš„ä¼˜å…ˆçº§ã€‚  OsuScreenStack.cs 45 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onScreenChange</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IScreen prev, IScreen next</span></span></span><span class="hljs-function">)</span></span> { parallaxContainer.ParallaxAmount = ParallaxContainer.DEFAULT_PARALLAX_AMOUNT * ((IOsuScreen)next)?.BackgroundParallaxAmount ?? <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; }</code> </pre> <br> ä¸ºäº†æ›´å¥½åœ°ç†è§£é—®é¢˜ï¼Œæˆ‘å°†ç»™å‡ºä¸€ä¸ªä»£ç ç¤ºä¾‹çš„ç»¼åˆç¤ºä¾‹ï¼š <br><br><pre> <code class="cs hljs">x = (c * a) ?? b;</code> </pre> <br> ç”±äº*è¿ç®—ç¬¦å…·æœ‰æ¯”??è¿ç®—ç¬¦æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤äº§ç”Ÿäº†é”™è¯¯ã€‚ æ›´æ­£çš„ä»£ç ç‰ˆæœ¬ï¼ˆæ·»åŠ äº†æ‹¬å·ï¼‰ï¼š <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onScreenChange</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IScreen prev, IScreen next</span></span></span><span class="hljs-function">)</span></span> { parallaxContainer.ParallaxAmount = ParallaxContainer.DEFAULT_PARALLAX_AMOUNT * (((IOsuScreen)next)?.BackgroundParallaxAmount ?? <span class="hljs-number"><span class="hljs-number">1.0f</span></span>); }</code> </pre> <br> ä»£ç ä¸­çš„å¦ä¸€ä¸ªç±»ä¼¼é”™è¯¯ï¼š <br><br>  <a href="https://www.viva64.com/ru/w/v3123/">V3123</a> [CWE-783]ä¹Ÿè®¸æ˜¯â€œ ??â€ æ“ä½œå‘˜çš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸä¸åŒã€‚ å®ƒçš„ä¼˜å…ˆçº§ä½äºå…¶å·¦ä¾§çš„å…¶ä»–è¿è¥å•†çš„ä¼˜å…ˆçº§ã€‚  FramedReplayInputHandler.cs 103 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> inImportantSection { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IsImportant(frame) &amp;&amp; Math.Abs(CurrentTime - NextFrame?.Time ?? <span class="hljs-number"><span class="hljs-number">0</span></span>) &lt;= AllowedImportantTimeSpan; } }</code> </pre> <br> åœ¨è¿™é‡Œï¼Œä¸å‰é¢çš„ä»£ç ç‰‡æ®µä¸€æ ·ï¼Œæ²¡æœ‰è€ƒè™‘è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚ ç°åœ¨ï¼Œä¼ é€’ç»™<i>Math.Abs</i>æ–¹æ³•çš„è¡¨è¾¾å¼çš„è®¡ç®—å¦‚ä¸‹ï¼š <br><br><pre> <code class="cs hljs">(a â€“ b) ?? <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br> æ›´æ­£çš„ä»£ç ï¼š <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> inImportantSection { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> IsImportant(frame) &amp;&amp; Math.Abs(CurrentTime â€“ (NextFrame?.Time ?? <span class="hljs-number"><span class="hljs-number">0</span></span>)) &lt;= AllowedImportantTimeSpan; } }</code> </pre> <br>  <a href="https://www.viva64.com/ru/w/v3142/">V3142</a> [CWE-561]æœªæ£€æµ‹åˆ°ä»£ç ã€‚ å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚  DrawableHoldNote.cs 214 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPressed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ManiaAction action</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnPressed(action)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Result.Type == HitResult.Miss) <span class="hljs-comment"><span class="hljs-comment">// &lt;= holdNote.hasBroken = true; .... }</span></span></code> </pre> <br> åˆ†æå™¨å£°ç§°ä»ç¬¬äºŒä¸ª<i>ifè¯­å¥</i>å¼€å§‹çš„<i>OnPressed</i>å¤„ç†ç¨‹åº<i>ä»£ç </i>ä¸å¯è®¿é—®ã€‚ è¿™æ˜¯åŸºäºç¬¬ä¸€ä¸ªæ¡ä»¶å§‹ç»ˆä¸ºtrueçš„å‡è®¾ï¼Œå³<i>base.OnPressed</i>æ–¹æ³•<i>å°†</i>å§‹ç»ˆè¿”å›<i>false</i> ã€‚ çœ‹ä¸€ä¸‹<i>base.OnPressed</i>æ–¹æ³•ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPressed</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ManiaAction action</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action != Action.Value) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UpdateResult(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); }</code> </pre> <br> æˆ‘ä»¬ç»§ç»­æ‰§è¡Œ<i>UpdateResult</i>æ–¹æ³•ï¼š <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> userTriggered</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Time.Elapsed &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Judged) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Judged; }</code> </pre> <br> è¯·æ³¨æ„ï¼Œæ­¤å¤„çš„<i>Judged</i>å±æ€§çš„å®ç°å¹¶ä¸é‡è¦ï¼Œå› ä¸º<i>UpdateResult</i>æ–¹æ³•çš„é€»è¾‘æ„å‘³ç€æœ€åçš„<i>returnè¯­å¥</i>ä¸æ­¤ç­‰æ•ˆï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br> å› æ­¤ï¼Œ <i>UpdateResult</i>æ–¹æ³•<i>å°†</i>å§‹ç»ˆè¿”å›<i>false</i> ï¼Œè¿™å°†å¯¼è‡´å †æ ˆä¸Šæ–¹ä»£ç ä¸­çš„ä»£ç æ— æ³•åˆ°è¾¾çš„é”™è¯¯ã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v3146/">V3146</a> [CWE-476]å¯èƒ½å¯¹'è§„åˆ™é›†'è¿›è¡Œç©ºå¼•ç”¨ã€‚  â€œ FirstOrDefaultâ€å¯ä»¥è¿”å›é»˜è®¤çš„ç©ºå€¼ã€‚  APILegacyScoreInfo.cs 24 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ScoreInfo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateScoreInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RulesetStore rulesets</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ruleset = rulesets.GetRuleset(OnlineRulesetID); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mods = Mods != <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? ruleset.CreateInstance() <span class="hljs-comment"><span class="hljs-comment">// &lt;= .GetAllMods().Where(....) .ToArray() : Array.Empty&lt;Mod&gt;(); .... }</span></span></code> </pre> <br> åˆ†æå™¨è®¤ä¸º<i>ruleset.CreateInstanceï¼ˆï¼‰</i>è°ƒç”¨ä¸å®‰å…¨ã€‚  <i>è§„åˆ™é›†</i>å˜é‡å…ˆå‰é€šè¿‡è°ƒç”¨<i>GetRulesetæ¥</i>è·å–å€¼ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> RulesetInfo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRuleset</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id</span></span></span><span class="hljs-function">)</span></span> =&gt; AvailableRulesets.FirstOrDefault(....);</code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œåˆ†æå™¨è­¦å‘Šæ˜¯åˆç†çš„ï¼Œå› ä¸ºè°ƒç”¨é“¾åŒ…å«<i>FirstOrDefault</i> ï¼Œå®ƒå¯ä»¥è¿”å›<i>null</i> ã€‚ <br><br><h2> ç»“è®º </h2><br> é€šå¸¸ï¼Œæ¸¸æˆé¡¹ç›®â€œ osuï¼â€å¯¹å°‘é‡é”™è¯¯æ„Ÿåˆ°æ»¡æ„ã€‚ ä¸è¿‡ï¼Œæˆ‘å»ºè®®å¼€å‘äººå‘˜æ³¨æ„å‘ç°çš„é—®é¢˜ã€‚ å¹¶è®©æ¸¸æˆç»§ç»­å–æ‚¦å…¶ç²‰ä¸ã€‚ <br><br> å¯¹äºæƒ³æ·±å…¥ç ”ç©¶ä»£ç çš„äººï¼Œæˆ‘æƒ³æé†’æ‚¨ï¼Œ <a href="https://www.viva64.com/ru/pvs-studio-download/">å¯ä»¥</a>ä»å®˜æ–¹ç½‘ç«™ä¸Šè½»æ¾<a href="https://www.viva64.com/ru/pvs-studio-download/">ä¸‹è½½</a>çš„PVS-Studioåˆ†æä»ªå°†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¸®åŠ©ã€‚ æˆ‘è¿˜æ³¨æ„åˆ°ï¼Œå¦‚ä¸Šæ‰€è¿°çš„ä¸€æ¬¡æ€§é¡¹ç›®æ£€æŸ¥ä¸åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨é™æ€åˆ†æå™¨æ— å…³ã€‚ åªæœ‰åœ¨æ„å»ºæœåŠ¡å™¨ä¸Šå’Œç›´æ¥åœ¨å¼€å‘äººå‘˜çš„è®¡ç®—æœºä¸Šå®šæœŸä½¿ç”¨è¯¥å·¥å…·ï¼ˆå¢é‡åˆ†æï¼‰ï¼Œæ‰èƒ½å®ç°æœ€å¤§çš„æŠ—é”™è¯¯æ•ˆç‡ã€‚ æœ€å¤§çš„ç›®æ ‡æ˜¯é˜²æ­¢é”™è¯¯è¿›å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¿®å¤åœ¨ç¼–å†™ä»£ç é˜¶æ®µå·²ç»å­˜åœ¨çš„ç¼ºé™·ã€‚ <br><br> ç¥ä½ å¥½è¿ï¼ŒæˆåŠŸï¼ <br><br><h2> å‚è€ƒæ–‡çŒ® </h2><br> è¿™æ˜¯2020å¹´çš„ç¬¬ä¸€æœ¬å‡ºç‰ˆç‰©ã€‚ å€Ÿæ­¤æœºä¼šï¼Œæˆ‘å°†æä¾›æœ‰å…³å»å¹´æ£€æŸ¥Cï¼ƒé¡¹ç›®çš„æ–‡ç« çš„é“¾æ¥ï¼š <br><br><ul><li>  <a href="https://www.viva64.com/ru/b/0605/">åœ¨Amazon Web Services SDK for .NETæºä»£ç ä¸­å¯»æ‰¾é”™è¯¯</a> </li><li>  <a href="https://www.viva64.com/ru/b/0622/">æ£€æŸ¥Roslynçš„æºä»£ç </a> </li><li>  <a href="https://www.viva64.com/ru/b/0631/">Cï¼ƒ8.0ä¸­çš„å¯ç©ºå¼•ç”¨ç±»å‹å’Œé™æ€åˆ†æ</a> </li><li>  <a href="https://www.viva64.com/ru/b/0653/">WinFormsï¼šé”™è¯¯ï¼Œç¦å°”æ‘©æ–¯</a> </li><li>  <a href="https://www.viva64.com/ru/b/0654/">æœ‰å…³PVS-Studioå¦‚ä½•åœ¨... PVS-Studioä¸­ä½¿ç”¨çš„åº“ä¸­å‘ç°é”™è¯¯çš„æ•…äº‹</a> </li><li>  <a href="https://www.viva64.com/ru/b/0656/">é€šè¿‡PVS-Studioé™æ€åˆ†æå™¨éªŒè¯.NET Coreåº“çš„æºä»£ç </a> </li><li>  <a href="https://www.viva64.com/ru/b/0664/">æ£€æŸ¥ç½—æ–¯æ—åˆ†æä»ª</a> </li><li>  <a href="https://www.viva64.com/ru/b/0677/">æ£€æŸ¥Telerik UIä»¥è·å–UWPä»¥äº†è§£PVS-Studio</a> </li><li>  <a href="https://www.viva64.com/ru/b/0678/">Azure PowerShellï¼šâ€œå‡ ä¹æ— å®³â€</a> </li><li>  <a href="https://www.viva64.com/ru/b/0681/">æˆ‘ä»¬æœç´¢å¹¶åˆ†æOrchard CMSä»£ç ä¸­çš„é”™è¯¯</a> </li><li>  <a href="https://www.viva64.com/ru/b/0683/">ä½¿ç”¨PVS-Studioé€šè¿‡OpenCVæ£€æŸ¥OpenCvSharpåŒ…è£…å™¨</a> </li><li>  <a href="https://www.viva64.com/ru/b/0692/">.NETçš„Azure SDKï¼šå›°éš¾çš„é”™è¯¯æŸ¥æ‰¾å™¨çš„æ•…äº‹</a> </li><li>  <a href="https://www.viva64.com/ru/b/0694/">SARIF SDKåŠå…¶é”™è¯¯</a> </li><li>  <a href="https://www.viva64.com/ru/b/0698/">2019å¹´Cï¼ƒé¡¹ç›®ä¸­çš„åå¤§bug</a> </li></ul><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/483436/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br> å¦‚æœæ‚¨æƒ³ä¸è®²è‹±è¯­çš„è¯»è€…åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é“¾æ¥ï¼šSergey Khrenovã€‚  <a href="https://habr.com/en/company/pvs-studio/blog/483436/">æ’­æ”¾â€œ osuï¼â€ï¼Œä½†è¯·æ³¨æ„é”™è¯¯</a> ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN483438/">https://habr.com/ru/post/zh-CN483438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN483418/index.html">ç¥¨åŠ¡ç³»ç»Ÿï¼šæ‚¨å¦‚ä½•è·å¾—ä¸‰ç¬”å…è´¹çš„OTRSä»˜æ¬¾ï¼Ÿ</a></li>
<li><a href="../zh-CN483424/index.html">DBAï¼šåœ¨PostgreSQLæ•°æ®åº“ä¹‹é—´ä¼ è¾“SEQUENCEå€¼</a></li>
<li><a href="../zh-CN483426/index.html">æ˜ŸæœŸäº”æ ‡ç­¾è°ƒæŸ¥</a></li>
<li><a href="../zh-CN483428/index.html">ç”µå­ç­¾åæ³•ä¿®æ­£æ¡ˆç”Ÿæ•ˆåï¼Œç”µå­æ–‡æ¡£ç®¡ç†å°†å¦‚ä½•ï¼Ÿ</a></li>
<li><a href="../zh-CN483436/index.html">æ’­æ”¾â€œ osuï¼â€ï¼Œä½†è¯·æ³¨æ„é”™è¯¯</a></li>
<li><a href="../zh-CN483440/index.html">æœ€æ–°çš„Dç¼–è¯‘å™¨</a></li>
<li><a href="../zh-CN483444/index.html">DORAæŠ¥å‘Š2019ï¼šå¦‚ä½•æé«˜DevOpsæ€§èƒ½</a></li>
<li><a href="../zh-CN483446/index.html">ç§‘å­¦å®¶å‘ç°äº†ä¸€ç§é™ä½é¥®ç”¨æ°´ä¸­é“å«é‡çš„æ–°æ–¹æ³•</a></li>
<li><a href="../zh-CN483448/index.html">è¿ªå£«å°¼-äººç±»å†å²ä¸Šæœ€ä¼Ÿå¤§çš„åŒå‘</a></li>
<li><a href="../zh-CN483454/index.html">åœ¨Atlassian Bitbucketä¸­ä»Mercurialåˆ‡æ¢åˆ°GITï¼Œå¹¶ç”¨è¥¿é‡Œå°”æ–‡ä¿å­˜æ–‡ä»¶</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>