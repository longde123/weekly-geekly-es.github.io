<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÇ üçó ‚ùé Developer Cookbook: DDD Recipes (Part 4, Structures) ü§µüèæ üà≤ üèà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduccion 


 Entonces, ya hemos decidido el alcance , la metodolog√≠a y la arquitectura . Pasemos de la teor√≠a a la pr√°ctica, a escribir c√≥digo. Me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Developer Cookbook: DDD Recipes (Part 4, Structures)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435920/"><h1 id="vvedenie">  Introduccion </h1><br><p> Entonces, ya hemos decidido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el alcance</a> , la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">metodolog√≠a</a> y la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">arquitectura</a> .  Pasemos de la teor√≠a a la pr√°ctica, a escribir c√≥digo.  Me gustar√≠a comenzar con patrones de dise√±o que describan la l√≥gica de negocios: <em>Servicio</em> e <em>Interactor</em> .  Pero antes de embarcarnos en ellos, examinaremos los patrones estructurales: <em>ValueObject</em> y <em>Entity</em> .  Nos desarrollaremos en lenguaje <em>rub√≠</em> .  En otros art√≠culos, analizaremos todos los patrones necesarios para el desarrollo utilizando la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Arquitectura Variable</a> .  Todos los desarrollos que son aplicaciones para esta serie de art√≠culos se recopilar√°n en un marco separado. </p><br><p><img src="https://habrastorage.org/webt/uc/iz/ea/ucizea6-xkpivfyv18q9fvds9wm.jpeg" alt="Blacjack y hockers"></p><br><p>  Y ya hemos elegido un nombre adecuado: <strong>LunaPark</strong> . <br>  Desarrollos actuales <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicados en Github</a> . <br>  Habiendo examinado todas las plantillas, ensamblaremos un microservicio completo. </p><a name="habracut"></a><br><h1 id="tak-istoricheski-slozhilos">  Tan hist√≥ricamente </h1><br><p>  Era necesario refactorizar una aplicaci√≥n empresarial compleja escrita en Ruby on Rails.  Hab√≠a un equipo de desarrolladores de rub√≠es listo para usar.  La metodolog√≠a de Desarrollo Dirigido por Dominio fue perfecta para estas tareas, pero no hab√≠a una soluci√≥n llave en mano en el lenguaje utilizado.  A pesar de que la elecci√≥n del idioma estuvo determinada principalmente por nuestra especializaci√≥n, result√≥ ser bastante exitosa.  Entre todos los idiomas que se usan com√∫nmente para aplicaciones web, ruby, en mi opini√≥n, es el m√°s expresivo.  Y por lo tanto, m√°s que otros adecuados para modelar objetos reales.  Esta no es solo mi opini√≥n. </p><br><blockquote>  Ese es el mundo de Java.  Luego tienes a los reci√©n llegados como Ruby.  Ruby tiene una sintaxis muy expresiva, y en este nivel b√°sico deber√≠a ser un muy buen lenguaje para DDD (aunque a√∫n no he o√≠do hablar de mucho uso real en ese tipo de aplicaciones).  Rails ha generado mucha emoci√≥n porque finalmente parece hacer que la creaci√≥n de interfaces de usuario web sea tan f√°cil como lo fueron a principios de la d√©cada de 1990, antes de la web.  En este momento, esta capacidad se ha aplicado principalmente a la creaci√≥n de una gran cantidad de aplicaciones web que no tienen mucha riqueza de dominio detr√°s de ellas, ya que incluso estas han sido dolorosamente dif√≠ciles en el pasado.  Pero mi esperanza es que, a medida que se reduce la parte de la implementaci√≥n de la interfaz de usuario del problema, la gente vea esto como una oportunidad para enfocar m√°s su atenci√≥n en el dominio.  Si el uso de Ruby comienza a ir en esa direcci√≥n, creo que podr√≠a proporcionar una excelente plataforma para DDD.  (Algunas piezas de infraestructura probablemente tendr√≠an que rellenarse). <br><br>  Eric Evans 2006 </blockquote><p>  Desafortunadamente, en los √∫ltimos 13 a√±os, nada ha cambiado mucho.  En Internet puedes encontrar intentos de adaptar Rails para esto, pero todos parecen terribles.  El marco de Rails es pesado, lento y no S√ìLIDO.  Es muy dif√≠cil ver sin l√°grimas c√≥mo alguien est√° tratando de representar la implementaci√≥n del patr√≥n del <em>Repositorio</em> sobre la base de <em>ActiveRecord</em> .  Decidimos adoptar un microframework y modificarlo seg√∫n nuestras necesidades.  Intentamos con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Grape</a> , la idea con documentaci√≥n autom√°tica parec√≠a exitosa, pero por lo dem√°s fue abandonada y r√°pidamente abandonamos la idea de usarla.  Y casi de inmediato comenzaron a usar otra soluci√≥n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sinatra</a> .  Seguimos us√°ndolo para <em>controladores</em> REST y <em>puntos finales</em> . </p><br><div class="spoiler">  <b class="spoiler_title">DESCANSO?</b> <div class="spoiler_text"><p>  Si desarroll√≥ aplicaciones web, entonces ya tiene una idea sobre la tecnolog√≠a.  Tiene sus pros y sus contras, una lista completa de los cuales est√° m√°s all√° del alcance de este art√≠culo.  Pero para nosotros, como desarrolladores de aplicaciones empresariales, el inconveniente m√°s importante ser√° que REST (esto est√° claro incluso por el nombre) no refleja el proceso, sino su estado.  Y la ventaja es su comprensibilidad: la tecnolog√≠a es clara tanto para los desarrolladores back-end como para los front-end. <br>  ¬øPero entonces quiz√°s no se centre en REST, sino que implemente su soluci√≥n http + json?  Incluso si logra desarrollar su API de servicio, luego de proporcionar su descripci√≥n a terceros, recibir√° muchas preguntas.  Mucho m√°s que si proporciona el REST familiar. <br>  Consideraremos el uso de REST como una soluci√≥n de compromiso.  Utilizamos JSON por concisi√≥n y el est√°ndar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">jsonapi</a> para no perder el tiempo de los desarrolladores en guerras santas con respecto al formato de solicitud. <br>  En el futuro, cuando analicemos <em>Endpoint</em> , veremos que para deshacerse del descanso, es suficiente reescribir solo una clase.  Por lo tanto, REST no deber√≠a molestar en absoluto si hay dudas al respecto. </p></div></div><br><p>  En el curso de la escritura de varios microservicios, hemos ganado una base: un conjunto de clases abstractas.  Cada clase se puede escribir en media hora, su c√≥digo es f√°cil de entender si sabe para qu√© sirve este c√≥digo. </p><br><p>  Aqu√≠ surgieron las principales dificultades.  Los nuevos empleados que no se ocuparon de las pr√°cticas DDD y la arquitectura limpia no pudieron entender el c√≥digo y su prop√≥sito.  Si yo mismo viera este c√≥digo por primera vez antes de leer Evans, lo tomar√≠a como legado, sobre ingenier√≠a. </p><br><p>  Para superar este obst√°culo, se decidi√≥ escribir una documentaci√≥n (gu√≠a) que describa la filosof√≠a de los enfoques utilizados.  Los esquemas de esta documentaci√≥n parec√≠an exitosos y se decidi√≥ ponerlos en Habr√©.  Clases abstractas que se repitieron de proyecto a proyecto, se decidi√≥ poner en una gema separada. </p><br><h1 id="filosofiya">  Filosof√≠a </h1><br><p><img src="https://habrastorage.org/webt/eg/zm/c8/egzmc89jktbwuobb67mh-stoijc.png" alt="camino heredado"><br>  Si recuerdas alguna pel√≠cula cl√°sica sobre artes marciales, habr√° un tipo genial que maneja muy h√°bilmente un palo.  Un sexto es esencialmente un palo, una herramienta muy primitiva, una de las primeras que cay√≥ en manos humanas.  Pero en manos del maestro, se convierte en un arma formidable. <br>  Puedes pasar tiempo creando una pistola que no te dispare en la pierna, o puedes pasar tiempo aprendiendo la t√©cnica de tiro.  Hemos identificado 4 principios b√°sicos: </p><br><ul><li>  Necesitas simplificar las cosas complejas. </li><li>  El conocimiento es m√°s importante que la tecnolog√≠a.  La documentaci√≥n es m√°s comprensible para una persona que el c√≥digo; uno no debe reemplazar uno por otro. </li><li>  El pragmatismo es m√°s importante que el dogmatismo.  Las normas deben guiar el camino, no establecer un cuadro delimitador. </li><li>  Estructuralidad en arquitectura, flexibilidad en la elecci√≥n de soluciones. </li></ul><br><p>  Se puede rastrear una filosof√≠a similar, por ejemplo, en ArchLinux OS - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">The Arch Way</a> .  En mi computadora port√°til, Linux no se arraig√≥ durante mucho tiempo, tarde o temprano se rompi√≥ y tuve que reinstalarlo constantemente.  Esto caus√≥ una serie de problemas, a veces graves, como la interrupci√≥n del plazo para el trabajo.  Pero despu√©s de pasar 2-3 d√≠as una vez que instal√© Arch, descubr√≠ c√≥mo funciona mi sistema operativo.  Despu√©s de eso, ella comenz√≥ a trabajar m√°s estable, sin fallas.  Mis notas me ayudaron a instalarlo en nuevas PC en un par de horas.  Una abundante documentaci√≥n me ayud√≥ a resolver nuevos problemas. </p><br><p>  El marco tiene un car√°cter absolutamente de alto nivel.  Las clases que lo describen son responsables de la estructura de la aplicaci√≥n.  Las soluciones de terceros se utilizan para interactuar con bases de datos, implementar el protocolo http y otras cosas de bajo nivel.  Nos gustar√≠a que el programador eche un vistazo al c√≥digo y entienda c√≥mo funciona esta o aquella clase, y la documentaci√≥n nos permitir√° comprender c√≥mo administrarlos.  Comprender el dise√±o del motor no le permitir√° conducir un autom√≥vil. </p><br><h1 id="freymvork">  Marco </h1><br><p>  Es dif√≠cil llamar a LunaPark un marco en el sentido habitual.  Marco - marco, Trabajo - trabajo.  Instamos a no limitarnos al alcance.  El √∫nico marco que declaramos es el que le dice a la clase en la que se debe describir esta o aquella l√≥gica.  Es m√°s bien un conjunto de herramientas con extensas instrucciones para ellos. <br>  Cada clase es abstracta y tiene tres niveles: </p><br><pre><code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LunaPark</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#  module Forms #  class Single # / end end end</span></span></span></span></code> </pre> <br><p>  Si desea implementar un formulario que crea un √∫nico elemento, hereda de esta clase: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Forms</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Create</span></span></span><span class="hljs-class"> &lt; LunaPark::Forms::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Single</span></span></span></span></code> </pre> <br><p>  Si hay varios elementos, utilizaremos otra <em>implementaci√≥n</em> . </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Forms</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Create</span></span></span><span class="hljs-class"> &lt; LunaPark::Forms::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Multiple</span></span></span></span></code> </pre> <br><p>  Por el momento, no todos los desarrollos se han puesto en perfecto orden y la gema est√° en estado alfa.  Lo citaremos por etapas, de acuerdo con la publicaci√≥n de art√≠culos.  Es decir  Si ve un art√≠culo sobre <code>ValueObject</code> y <code>Entity</code> , estas dos plantillas ya est√°n implementadas.  Al final del ciclo, todos ser√°n adecuados para su uso en el proyecto.  Dado que el marco en s√≠ es de poca utilidad sin un enlace a sinatra \ roda, se crear√° un repositorio separado que muestra c√≥mo "arruinar todo" para comenzar r√°pidamente su proyecto. </p><br><p>  El marco es principalmente una aplicaci√≥n a la documentaci√≥n.  No perciba estos art√≠culos como documentaci√≥n para el marco. </p><br><p>  Entonces, vamos al grano. </p><br><h1 id="obekt-znachenie-value">  Objeto de valor </h1><br><blockquote>  - ¬øQu√© altura tiene tu novia? <br>  - 151 <br>  - ¬øComenzaste a encontrarte con la estatua de la libertad? </blockquote><p>  Algo como esto podr√≠a haber sucedido en Indiana.  El crecimiento humano no es solo un n√∫mero, sino tambi√©n una unidad de medida.  No siempre los atributos de un objeto se pueden describir solo mediante primitivas (Entero, Cadena, Booleano, etc.), a veces se requieren combinaciones de ellos: </p><br><ul><li>  El dinero no es solo un n√∫mero, es un n√∫mero (cantidad) + moneda. </li><li>  Una fecha consta de un d√≠a, un mes y un a√±o. </li><li>  Para medir el peso, un solo n√∫mero no es suficiente para nosotros, tambi√©n requiere una unidad de medida. </li><li>  El n√∫mero de pasaporte consta de una serie y, de hecho, del n√∫mero. </li></ul><br><p>  Por otro lado, esto no siempre es una combinaci√≥n, quiz√°s es una especie de extensi√≥n de lo primitivo. <br>  Un n√∫mero de tel√©fono a menudo se toma como un n√∫mero.  Por otro lado, es poco probable que tenga un m√©todo de adici√≥n o divisi√≥n.  Quiz√°s haya un m√©todo que emita un c√≥digo de pa√≠s y un m√©todo que defina un c√≥digo de ciudad.  Quiz√°s haya un cierto m√©todo decorativo que lo presente no solo como una cadena de n√∫meros <code>79001231212</code> , sino como una cadena legible: <code>7-900-123-12-12</code> . </p><br><div class="spoiler">  <b class="spoiler_title">tal vez un decorador?</b> <div class="spoiler_text"><p>  Basado en el dogma, es indiscutible, s√≠.  Si abordamos este dilema por parte del sentido com√∫n, cuando decidamos llamar a este n√∫mero, transferiremos el objeto al tel√©fono: </p><br><pre> <code class="ruby hljs">phone.call Values::PhoneNumber.new(<span class="hljs-number"><span class="hljs-number">79001231212</span></span>)</code> </pre> <br><p>  Y si decidimos presentarlo como una cadena, entonces esto se hace claramente para una persona.  Entonces, ¬øpor qu√© no hacemos que esta l√≠nea sea legible para una persona de inmediato? </p><br><pre> <code class="ruby hljs">Values::PhoneNumber.new(<span class="hljs-number"><span class="hljs-number">79001231212</span></span>).to_s</code> </pre> </div></div><br><p>  Imagine que estamos creando el sitio de casino en l√≠nea Three Axes y vendiendo juegos de cartas.  Necesitaremos la clase de 'naipes'. </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayingCard</span></span></span><span class="hljs-class"> &lt; Lunapark::Values::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Compound</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_reader</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">suit</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rank</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Entonces, nuestra clase tiene dos atributos de solo lectura: </p><br><ul><li>  traje - traje de tarjeta </li><li>  rango - dignidad de la tarjeta </li></ul><br><p>  Estos atributos se establecen solo cuando se crea un mapa y no pueden cambiar cuando se usa.  Por supuesto, puede tomar una tarjeta de juego y tachar <s>8</s> , escribir Q, pero esto es inaceptable.  En una sociedad decente, lo m√°s probable es que te disparen.  La imposibilidad de cambiar los atributos despu√©s de crear el objeto determina la primera propiedad del <em>Objeto de valor</em> : la inmutabilidad. <br>  La segunda propiedad importante del <em>objeto de valor</em> ser√° c√≥mo los comparamos. </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RSpec</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">describe</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayingCard</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">let</span></span></span><span class="hljs-class">(:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">card</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">described_class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">suit</span></span></span><span class="hljs-class">: :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">clubs</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rank</span></span></span><span class="hljs-class">: 10 } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">let</span></span></span><span class="hljs-class">(:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">other</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">described_class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">suit</span></span></span><span class="hljs-class">: :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">clubs</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rank</span></span></span><span class="hljs-class">: 10 } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">it</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">should</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">be</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eql</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">expect</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">card</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eq</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">other</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Tal prueba fallar√°, ya que se comparar√°n en la direcci√≥n.  Para que la prueba pase, debemos comparar <em>Value-Obects</em> por valor, para esto agregaremos un m√©todo de comparaci√≥n: </p><br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">==</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(other)</span></span></span></span> suit == other.suit &amp;&amp; rank == other.rank <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  Ahora nuestra prueba pasar√°.  Tambi√©n podemos agregar m√©todos que son responsables de la comparaci√≥n, pero ¬øc√≥mo comparamos 10 y K?  Como probablemente ya haya adivinado, tambi√©n los presentaremos en forma <em>de objetos de valor</em> .  Ok, ahora tendremos que iniciar los diez mejores clubes como este: </p><br><pre> <code class="ruby hljs">ten = Values::Rank.new(<span class="hljs-string"><span class="hljs-string">'10'</span></span>) clubs = Values::Suits.new(<span class="hljs-symbol"><span class="hljs-symbol">:clubs</span></span>) ten_clubs = Values::PlayingCards.new(<span class="hljs-symbol"><span class="hljs-symbol">rank:</span></span> ten, <span class="hljs-symbol"><span class="hljs-symbol">clubs:</span></span> clubs)</code> </pre> <br><p>  Tres l√≠neas son suficientes para el rub√≠.  Para evitar esta limitaci√≥n, introducimos la tercera propiedad del <em>Objeto-Valor</em> : la rotaci√≥n.  Tengamos un m√©todo especial de la clase <code>.wrap</code> , que puede tomar valores de varios tipos y convertirlos al correcto. </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayingCard</span></span></span><span class="hljs-class"> &lt; Lunapark::Values::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Compound</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">obj</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">case</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">obj</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_a?</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#      PlayingCard obj #      case obj.is_a? Hash #    ,      new(obj) #    case obj.is_a String #    ,     new rank: obj[0..-2], suit:[-1] # ,  -  . else #       raise ArgumentError #  . end end def initialize(suit:, rank:) #     </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@suit</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = Suit.wrap(suit) #      </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@rank</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = Rank.wrap(rank) end end</span></span></span></span></code> </pre> <br><p>  Este enfoque ofrece una gran ventaja: </p><br><pre> <code class="ruby hljs">ten = Values::Rank.new(<span class="hljs-string"><span class="hljs-string">'10'</span></span>) clubs = Values::Suits.new(<span class="hljs-symbol"><span class="hljs-symbol">:clubs</span></span>) from_values = Values::PlayingCard.wrap <span class="hljs-symbol"><span class="hljs-symbol">rank:</span></span> ten, <span class="hljs-symbol"><span class="hljs-symbol">suit:</span></span> clubs from_hash = Values::PlayingCard.wrap <span class="hljs-symbol"><span class="hljs-symbol">rank:</span></span> <span class="hljs-string"><span class="hljs-string">'10'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">suit:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:clubs</span></span> from_obj = Values::PlayingCard.wrap from_values from_str = Values::PlayingCard.wrap <span class="hljs-string"><span class="hljs-string">'10C'</span></span> <span class="hljs-comment"><span class="hljs-comment">#        utf ,  ,  .</span></span></code> </pre> <br><p>  Todas estas cartas ser√°n iguales entre s√≠.  Si el m√©todo de <code>wrap</code> se expande a una buena pr√°ctica, se colocar√° en una clase separada.  Desde el punto de vista del enfoque dogm√°tico, una clase separada tambi√©n ser√° obligatoria. <br>  Hmm, ¬øqu√© pasa con el espacio en la cubierta?  ¬øC√≥mo saber si esta carta es una carta de triunfo?  Esta no es una carta de juego.  Este es el <em>valor de la</em> tarjeta de juego.  Esta es exactamente la inscripci√≥n 10 que llevas en la esquina del cart√≥n. <br>  Es necesario relacionarse tanto con el <em>Objeto-Valor</em> como con el primitivo, que por alguna raz√≥n no se implement√≥ en ruby.  De aqu√≠ surge la √∫ltima propiedad: <em>Object-Value</em> no <em>est√°</em> vinculado a ning√∫n dominio. </p><br><h2 id="rekomendacii">  Recomendaciones </h2><br><blockquote>  Entre toda la variedad de m√©todos y herramientas utilizados en cada momento de cada proceso, siempre hay un m√©todo y herramienta que funciona m√°s r√°pido y mejor que otros. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Frederick Taylor</a> 1914 </blockquote><br><h5 id="arifmeticheskie-operacii-dolzhny-vozvraschat-novyy-obekt">  Las operaciones aritm√©ticas deben devolver un nuevo objeto. </h5><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># GOOD class Money &lt; LunaPark::Values::Compound def +(other) other = self.class.wrap(other) raise ArgumentError unless same_currency? other self.class.new( amount: amount + other.amount, currency: currency ) end end</span></span></code> </pre> <br><h5 id="atributy-_obekta-znacheniya_-mogu-byt-tolko-primitivami-ili-drugimi-_obektami-znacheniya_">  Los atributos <em>de un objeto de valor</em> solo pueden ser primitivos u otros <em>objetos de valor</em> </h5><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># GOOD class Weight &lt; LunaPark::Values::Compound def intialize(value:, unit:) </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@value</span></span></span><span class="hljs-comment"> = value </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@unit</span></span></span><span class="hljs-comment"> = Unit.wrap(unit) end end # BAD class PlaingCard &lt; LunaPark::Value def initialize(rank:, suit:, deck:) ... </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@deck</span></span></span><span class="hljs-comment"> = Entity::Deck.wrap(deck) #    end end</span></span></code> </pre> <br><h5 id="prostye-operacii-derzhite-vnutri-metodov-klassa">  Mantenga operaciones simples dentro de los m√©todos de clase. </h5><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># GOOD class Weight &lt; LunaPark::Values::Compound def &gt;(other) value &gt; other.convert_to(unit).value end end</span></span></code> </pre> <br><h5 id="esli-operaciya-konvertaciya-bolshaya-to-vozmozhno-est-smysl-vynesti-ee-v-otdelnyy-klass">  Si la operaci√≥n de "conversi√≥n" es grande, entonces quiz√°s tenga sentido moverla a una clase separada </h5><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># UGLY class Weight &lt; LunaPark::Values::Compound def convert_to(unit) unit = Unit.wrap(unit) case { self.unit.to_sym =&gt; unit.to_sym } when { :kg =&gt; :ft } Weight.new(value: 2.2046 * value, unit.to_sym) when # ... end end end # GOOD #./lib/values/weight/converter.rb class Weight class Converter &lt; LunaPark::Services::Simple def initialize(weight, to:) ... end end end #./lib/values/weight.rb class Weight &lt; LunaPark::Values::Compound def convert_to(unit) Converter.call! self, to: unit end end</span></span></code> </pre> <br><p>  Tal eliminaci√≥n de la l√≥gica en un <em>Servicio</em> separado <strong>solo</strong> <em>es</em> posible con la condici√≥n de que el <em>Servicio est√©</em> aislado: no utiliza datos de ninguna fuente externa.  Este servicio debe estar limitado por el contexto del <em>objeto de valor en</em> s√≠. </p><br><h5 id="obekt-znachenie-ne-mozhet-nichego-znat-o-domennoy-logike">  El valor del objeto no puede saber nada sobre la l√≥gica del dominio </h5><br><p>  Supongamos que estamos escribiendo una tienda en l√≠nea y tenemos una calificaci√≥n de productos.  Para obtenerlo, debe realizar una solicitud a la base de datos a trav√©s del <em>Repositorio</em> . </p><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># DEADLY BAD class Rate &lt; LunaPark::Values::Single def top?(10) Repository::Rates.top(first: 10).include? self end end</span></span></code> </pre> <br><h1 id="suschnost-entity">  Entidad </h1><br><p>  La clase de <em>entidad</em> es responsable de alg√∫n objeto real.  Puede ser un contrato, una silla, un agente de bienes ra√≠ces, un pastel, una plancha, un gato, un refrigerador, cualquier cosa.  Cualquier objeto que pueda necesitar para modelar sus procesos comerciales es una <em>Entidad</em> . <br>  El concepto de <em>entidad es</em> diferente para Evans y para Martin.  Desde el punto de vista de Evans, una entidad es un objeto caracterizado por algo que enfatiza su individualidad. </p><br><div class="spoiler">  <b class="spoiler_title">Esencia de Zvans</b> <div class="spoiler_text"><blockquote>  Si un objeto est√° determinado por una existencia individual √∫nica, y no por un conjunto de atributos, esta propiedad debe leerse como la principal al definir un objeto en un modelo.  La definici√≥n de la clase debe ser simple y construida alrededor de la continuidad y unicidad del ciclo de la existencia del objeto.  Encuentre una manera de distinguir cada objeto independientemente de su forma o historia de existencia.  Preste especial atenci√≥n a los requisitos t√©cnicos asociados con la comparaci√≥n de objetos de acuerdo con sus atributos.  Defina una operaci√≥n que necesariamente d√© un resultado √∫nico para cada objeto; puede ser necesario asociar un cierto s√≠mbolo con unicidad garantizada para esto.  Tal medio de identificaci√≥n puede tener un origen externo, pero tambi√©n puede ser un identificador arbitrario generado por el sistema para su propia conveniencia.  Sin embargo, dicha herramienta debe cumplir con las reglas para distinguir objetos en el modelo.  El modelo debe dar una definici√≥n exacta de lo que son los objetos id√©nticos. </blockquote></div></div><br><p>  Desde el punto de vista de Martin, <em>Entity</em> no es un objeto, sino una capa.  Esta capa combinar√° tanto el objeto como la l√≥gica empresarial para cambiarlo. </p><br><div class="spoiler">  <b class="spoiler_title">Desolaci√≥n de Martin</b> <div class="spoiler_text"><blockquote>  Mi opini√≥n sobre las Entidades es que contienen reglas de Aplicaci√≥n Independiente de Negocios.  No son simplemente objetos de datos.  Pueden contener referencias a objetos de datos;  pero su prop√≥sito es implementar m√©todos de reglas de negocio que pueden ser utilizados por muchas aplicaciones diferentes. <br><br>  Las puertas de enlace devuelven las entidades.  La implementaci√≥n (debajo de la l√≠nea) obtiene los datos de la base de datos y los usa para construir estructuras de datos que luego se pasan a las Entidades.  Esto se puede hacer con contenci√≥n o herencia. <br><br>  Por ejemplo: <br><br>  clase p√∫blica MyEntity {datos privados de MyDataStructure;} <br><br>  o <br><br>  clase p√∫blica MyEntity extiende MyDataStructure {...} <br><br>  Y recuerda, todos somos piratas por naturaleza;  y las reglas de las que estoy hablando aqu√≠ son realmente m√°s como pautas ... </blockquote></div></div><br><p>  Por <em>esencia,</em> nos referiremos solo a la estructura.  En su forma m√°s simple, la clase <em>Entidad</em> se ver√° as√≠: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entities</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeatBag</span></span></span><span class="hljs-class"> &lt; LunaPark::Entities::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Simple</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">hegiht</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">weight</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">birthday</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Un objeto mutable que describe la estructura de un modelo de negocio puede contener tipos y <em>valores</em> primitivos. <br>  La <code>LunaPark::Entites::Simple</code> es incre√≠blemente simple, puedes ver su c√≥digo, solo nos da una cosa: f√°cil inicializaci√≥n. </p><br><div class="spoiler">  <b class="spoiler_title">LunaPark :: Entites :: Simple</b> <div class="spoiler_text"><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LunaPark</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entities</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Simple</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initialize</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set_attributes</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">params</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">private</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">set_attributes</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">hash</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">hash</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">each</span></span></span><span class="hljs-class"> { |</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">v</span></span></span><span class="hljs-class">| </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">send</span></span></span><span class="hljs-class">(:"</span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#{k}=", v) } end end end end</span></span></span></span></code> </pre> </div></div><br><p>  Puedes escribir: </p><br><pre> <code class="ruby hljs">john_doe = Entity::MeatBag.new( <span class="hljs-symbol"><span class="hljs-symbol">id:</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> <span class="hljs-string"><span class="hljs-string">'John Doe'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">height:</span></span> <span class="hljs-string"><span class="hljs-string">'180cm'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">weight:</span></span> <span class="hljs-string"><span class="hljs-string">'80kg'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">birthday:</span></span> <span class="hljs-string"><span class="hljs-string">'01-01-1970'</span></span> )</code> </pre> <br><p>  Como probablemente ya haya adivinado, queremos incluir el peso, la altura y la fecha de nacimiento en <em>Value Objects</em> . </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entities</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeatBag</span></span></span><span class="hljs-class"> &lt; LunaPark::Entites::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Simple</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_reader</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">heiht</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wight</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">birthday</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">height</span></span></span><span class="hljs-class">=(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">height</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">height</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values::Height</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">height</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">weight</span></span></span><span class="hljs-class">=(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">height</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">height</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values::Weight</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">weight</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">birthday</span></span></span><span class="hljs-class">=(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">day</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">birthday</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">parse</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">day</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Para no perder el tiempo con tales constructores, hemos preparado una <em>implementaci√≥n</em> m√°s compleja <em>de</em> <a href=""><code>LunaPark::Entites::Nested</code></a> : </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entities</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeatBag</span></span></span><span class="hljs-class"> &lt; LunaPark::Entities::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Nested</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">heiht</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values::Height</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">weight</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values::Weight</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">birthday</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Values::Date</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">parse</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Como su nombre indica, esta <em>implementaci√≥n le</em> permite crear estructuras de √°rbol. </p><br><p>  Satisfagamos mi pasi√≥n por los electrodom√©sticos voluminosos.  En un art√≠culo anterior, dibujamos una analog√≠a entre el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"giro" de una lavadora y la arquitectura</a> .  Y ahora describiremos un objeto comercial tan importante como un refrigerador: </p><br><p><img src="https://habrastorage.org/webt/xl/65/pj/xl65pjsr5ou5a4nurhdm9qxbo50.png" alt="Refregerator"></p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Refregerator</span></span></span><span class="hljs-class"> &lt; LunaPark::Entites::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Nested</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">brand</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">namespace</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fridge</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">namespace</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">door</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">upper</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lower</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">upper</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lower</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">namespace</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">main</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">namespace</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">door</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">first</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">second</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">third</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">namespace</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">boxes</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">left</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Box</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">right</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Box</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">first</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">second</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">third</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fourth</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shelf</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wrap</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">last_open_at</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">comparable</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">false</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  Este enfoque nos evita crear <em>Entidades</em> innecesarias, como la puerta del refrigerador.  Sin un refrigerador, deber√≠a ser parte del refrigerador.  Este enfoque es conveniente para compilar documentos relativamente grandes, por ejemplo, una solicitud para la compra de un seguro. </p><br><p>  La <code>LunaPark::Entites::Nested</code> tiene 2 propiedades m√°s importantes: </p><br><p>  Comparabilidad: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entites</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; LunaPark::Entites::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Nested</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">email</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">registred_at</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">u1</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entites::User</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">email</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">john</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">doe</span></span></span><span class="hljs-class">@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mail</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">com</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">registred_at</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Time</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">now</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">u2</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entites::User</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">email</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">john</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">doe</span></span></span><span class="hljs-class">@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mail</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">com</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">registred_at</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Time</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">now</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">u1</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">u2</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment"># =&gt; false</span></span></span></span></code> </pre> <br><p>  Los dos usuarios especificados no son equivalentes, porque  fueron creados en diferentes momentos y, por lo tanto, el valor del atributo <code>registred_at</code> ser√° diferente.  Pero si tachamos el atributo de la lista de comparados: </p><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Entites</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; LunaPark::Entites::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Nested</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">email</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">registred_at</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">comparable</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">false</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><p>  entonces obtenemos dos objetos comparables. </p><br><p>  Esta <em>implementaci√≥n</em> tambi√©n tiene la propiedad de rotaci√≥n: podemos usar el m√©todo de clase </p><br><pre> <code class="ruby hljs">Entites::User.wrap(<span class="hljs-symbol"><span class="hljs-symbol">email:</span></span> <span class="hljs-string"><span class="hljs-string">'john.doe@mail.com'</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">registred_at:</span></span> Time.now)</code> </pre> <br><p>  Puedes usar Hash, OpenStruct o cualquier gema que te guste como <em>entidad</em> , lo que te ayudar√° a comprender la estructura de tu entidad. </p><br><p>  <em>Una entidad</em> es un modelo de un objeto comercial, d√©jelo simple.  Si su empresa no utiliza alguna propiedad, no la describa. </p><br><h1 id="izmeneniya-suschnosti">  Cambios de entidad </h1><br><p>  Como not√≥, la clase <em>Entity</em> no tiene m√©todos de cambio propios.  Todos los cambios se realizan desde el exterior.  <em>El objeto de valor</em> tambi√©n <em>es</em> inmutable.  Todas esas funciones que est√°n presentes en ella, en general, decoran la esencia o crean nuevos objetos.  La esencia misma permanece sin cambios.  Para un desarrollador de Ruby on Rails, este enfoque ser√° inusual.  Desde el exterior puede parecer que generalmente usamos el lenguaje OOP para otra cosa.  Pero si miras un poco m√°s profundo, esto no es as√≠.  ¬øSe puede abrir una ventana sola?  ¬øConseguir un auto para trabajar, reservar un hotel, lindo gato, obtener un nuevo suscriptor?  Estas son todas las influencias externas.  Algo sucede en el mundo real, y lo reflejamos en nosotros mismos.  Para cada solicitud, realizamos cambios en nuestro modelo.  Y as√≠ lo mantenemos actualizado, suficiente para nuestras tareas comerciales.  Es necesario separar el estado del modelo y los procesos que causan cambios en este estado.  C√≥mo hacer esto, lo consideraremos en el pr√≥ximo art√≠culo. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es435920/">https://habr.com/ru/post/es435920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es435908/index.html">Web asc√©tica: prototipo de mercados de pulgas en go and js</a></li>
<li><a href="../es435910/index.html">¬øPor qu√© BSD perdi√≥ la batalla con GNU / Linux?</a></li>
<li><a href="../es435912/index.html">Los principales problemas del desarrollo de interfaces modernas.</a></li>
<li><a href="../es435914/index.html">Empaquetado de aplicaciones principales de ASP.NET con Docker</a></li>
<li><a href="../es435916/index.html">Hackear VK, la autenticaci√≥n de dos factores no guardar√°</a></li>
<li><a href="../es435922/index.html">Java, Spring, Kurento y servicios de medios. Parte 2</a></li>
<li><a href="../es435924/index.html">La red neuronal genera im√°genes de platos seg√∫n recetas para su preparaci√≥n.</a></li>
<li><a href="../es435926/index.html">La red neuronal recoge fragmentos de hallazgos arqueol√≥gicos.</a></li>
<li><a href="../es435928/index.html">Nevera en lugar de Bruce Willis: la Tierra golpea primero</a></li>
<li><a href="../es435930/index.html">El origen de la termoac√∫stica. La llama del canto de Higgins. Tubo de Rijke</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>