<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫üèΩ üìù üéÖüèº El d√≠a que Dodo se detuvo. Script sincr√≥nico ‚öíÔ∏è üë©üèæ ‚òùüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dodo IS es un sistema global que lo ayuda a administrar eficazmente su negocio en Dodo Pizza. Cierra los problemas de pedidos de pizza, ayuda al franq...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El d√≠a que Dodo se detuvo. Script sincr√≥nico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/440676/">  Dodo IS es un sistema global que lo ayuda a administrar eficazmente su negocio en Dodo Pizza.  Cierra los problemas de pedidos de pizza, ayuda al franquiciado a realizar un seguimiento del negocio, mejora la eficiencia de los empleados y, a veces, cae.  Lo √∫ltimo es lo peor para nosotros.  Cada minuto de tales ca√≠das conduce a la p√©rdida de ganancias, la insatisfacci√≥n del usuario y las noches de insomnio de los desarrolladores. <br><br>  Pero ahora dormimos mejor.  Aprendimos a reconocer escenarios de apocalipsis sist√©micos y procesarlos.  A continuaci√≥n, le dir√© c√≥mo brindamos estabilidad al sistema. <br><img src="https://habrastorage.org/webt/cj/_g/bz/cj_gbzxwy6ky8m_qqomj46f4nf4.png"><br><a name="habracut"></a><blockquote> <b>Una serie de art√≠culos sobre el colapso del sistema Dodo IS *</b> : <br>  1. El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">d√≠a que Dodo se detuvo.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Script sincr√≥nico.</a> <br>  2. El <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">d√≠a en que Dodo se detuvo.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Script asincr√≥nico</a> <br><br>  * Los <i>materiales fueron escritos en base a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mi desempe√±o en DotNext 2018 en Mosc√∫</a></i> . </blockquote><br><h2>  Dodo es </h2><br>  El sistema es una gran ventaja competitiva de nuestra franquicia, porque los franquiciados obtienen un modelo de negocio listo para usar.  Estos son ERP, HRM y CRM, todo en uno. <br><br>  El sistema apareci√≥ un par de meses despu√©s de la apertura de la primera pizzer√≠a.  Es utilizado por gerentes, clientes, cajeros, cocineros, compradores misteriosos, empleados de centros de atenci√≥n telef√≥nica, eso es todo.  Convencionalmente, Dodo IS se divide en dos partes.  El primero es para clientes.  Esto incluye un sitio web, una aplicaci√≥n m√≥vil, un centro de contacto.  El segundo para los socios franquiciados, ayuda a administrar pizzer√≠as.  A trav√©s del sistema, las facturas de los proveedores, la gesti√≥n del personal, las personas que toman turnos, la contabilidad autom√°tica de la n√≥mina, la capacitaci√≥n en l√≠nea para el personal, la certificaci√≥n de gerentes, un sistema de control de calidad y compradores misteriosos pasan por el sistema. <br><br><h2>  Rendimiento del sistema </h2><br>  Rendimiento del sistema Dodo IS = Confiabilidad = Tolerancia a fallas / Recuperaci√≥n.  Deteng√°monos en cada uno de los puntos. <br><br><h4>  Fiabilidad </h4><br>  No tenemos grandes c√°lculos matem√°ticos: necesitamos atender un cierto n√∫mero de pedidos, hay ciertas zonas de entrega.  El n√∫mero de clientes no var√≠a particularmente.  Por supuesto, seremos felices cuando crezca, pero esto rara vez ocurre en grandes explosiones.  Para nosotros, el rendimiento se reduce a la cantidad de fallas que se producen, a la confiabilidad del sistema. <br><br><h4>  Tolerancia a fallas </h4><br>  Un componente puede depender de otro componente.  Si se produce un error en un sistema, el otro subsistema no debe caerse. <br><br><h4>  Resiliencia </h4><br>  Las fallas de los componentes individuales ocurren todos los d√≠as.  Esto es normal  Es importante cu√°n r√°pido podemos recuperarnos de una falla. <br><br><h2>  Escenario de falla del sistema s√≠ncrono </h2><br><h4>  Que es esto </h4><br>  El instinto de una gran empresa es servir a muchos clientes al mismo tiempo.  Del mismo modo que es imposible trabajar para una pizzer√≠a de cocina que trabaja para la entrega de la misma manera que una ama de casa en una cocina en casa, un c√≥digo dise√±ado para la ejecuci√≥n sincr√≥nica no puede funcionar con √©xito para el servicio al cliente en masa en un servidor. <br><br>  Hay una diferencia fundamental entre ejecutar el algoritmo en una sola instancia y ejecutar el mismo algoritmo que un servidor en el marco del servicio masivo. <br><br>  Echa un vistazo a la imagen de abajo.  A la izquierda, vemos c√≥mo ocurren las solicitudes entre dos servicios.  Estas son llamadas RPC.  La siguiente solicitud finaliza despu√©s de la anterior.  Obviamente, este enfoque no escala: se alinean pedidos adicionales. <br><br>  Para atender muchos pedidos, necesitamos la opci√≥n correcta: <br><br><img src="https://habrastorage.org/webt/ce/ux/u0/ceuxu0aoqpmcgvnuvj0oboctjdm.png"><br><br>  El funcionamiento del c√≥digo de bloqueo en una aplicaci√≥n s√≠ncrona se ve muy afectado por el modelo de subprocesamiento m√∫ltiple utilizado, es decir, la multitarea preventiva.  Solo puede conducir a fracasos. <br><br>  La multitarea simplificada y preventiva podr√≠a ilustrarse de la siguiente manera: <br><br><img src="https://habrastorage.org/webt/k_/i3/pi/k_i3piihcieztws0hjgt-l6jw1q.png"><br><br>  Los bloques de color son el trabajo real que hace la CPU, y vemos que el trabajo √∫til indicado por el verde en el diagrama es bastante peque√±o en el contexto general.  Necesitamos despertar el flujo, ponerlo a dormir, y esto est√° por encima.  Tal sue√±o / vigilia ocurre durante la sincronizaci√≥n en cualquier primitiva de sincronizaci√≥n. <br><br>  Obviamente, el rendimiento de la CPU disminuir√° si diluye el trabajo √∫til con una gran cantidad de sincronizaciones.  ¬øQu√© tan fuerte puede afectar la multitarea preventiva al rendimiento? <br><br>  Considere los resultados de una prueba sint√©tica: <br><br><img src="https://habrastorage.org/webt/k5/vo/bh/k5vobhcdjza0tu5-gz5nkmxb2yu.png"><br><br>  Si el intervalo de flujo entre sincronizaciones es de aproximadamente 1000 nanosegundos, la eficiencia es bastante peque√±a, incluso si el n√∫mero de subprocesos es igual al n√∫mero de n√∫cleos.  En este caso, la eficiencia es de aproximadamente el 25%.  Si el n√∫mero de subprocesos es 4 veces mayor, la eficiencia cae dr√°sticamente, al 0,5%. <br><br>  Pi√©nselo, en la nube orden√≥ una m√°quina virtual con 72 n√∫cleos.  Cuesta dinero y usa menos de la mitad de un n√∫cleo.  Esto es exactamente lo que puede suceder en una aplicaci√≥n multiproceso. <br><br>  Si hay menos tareas, pero su duraci√≥n es mayor, la eficiencia aumenta.  Vemos que a 5,000 operaciones por segundo, en ambos casos la eficiencia es del 80-90%.  Para un sistema multiprocesador, esto es muy bueno. <br><br><img src="https://habrastorage.org/webt/mk/h0/ku/mkh0kui8a2xqylkxs4obdexrpms.png"><br><br>  En nuestras aplicaciones reales, la duraci√≥n de una operaci√≥n entre sincronizaciones se encuentra en alg√∫n punto intermedio, por lo que el problema es urgente. <br><br><h4>  Que esta pasando </h4><br>  Presta atenci√≥n al resultado de las pruebas de estr√©s.  En este caso, fue la llamada "prueba de extrusi√≥n". <br><br><img src="https://habrastorage.org/webt/bs/cc/pu/bsccpuz17k6921f54mhkjzg3p_k.png"><br><br>  La esencia de la prueba es que al usar un soporte de carga, enviamos m√°s y m√°s solicitudes artificiales al sistema, tratamos de hacer tantos pedidos como sea posible por minuto.  Intentamos encontrar el l√≠mite despu√©s del cual la aplicaci√≥n se negar√° a atender solicitudes m√°s all√° de sus capacidades.  Intuitivamente, esperamos que el sistema se ejecute al l√≠mite, descartando solicitudes adicionales.  Esto es exactamente lo que suceder√≠a en la vida real, por ejemplo, cuando se sirve en un restaurante que est√° lleno de clientes.  Pero algo m√°s sucede.  Los clientes hicieron m√°s pedidos y el sistema comenz√≥ a servir menos.  El sistema comenz√≥ a servir tan pocas √≥rdenes que puede considerarse un fallo completo, un colapso.  Esto sucede con muchas aplicaciones, pero ¬ødeber√≠a ser? <br><br>  En el segundo gr√°fico, el tiempo para procesar una solicitud aumenta, durante este intervalo se atienden menos solicitudes.  Las solicitudes que llegaron antes se atienden mucho m√°s tarde. <br><br><img src="https://habrastorage.org/webt/au/ho/9y/auho9yjcdbtb8gqqbjytppvyuc0.png"><br><br>  ¬øPor qu√© se detiene la aplicaci√≥n?  Hab√≠a un algoritmo, funcion√≥.  Lo iniciamos desde nuestra m√°quina local, funciona muy r√°pido.  Creemos que si tomamos una m√°quina cien veces m√°s potente y ejecutamos cien solicitudes id√©nticas, entonces deber√≠an ejecutarse al mismo tiempo.  Resulta que las solicitudes de diferentes clientes chocan.  Entre ellos, surge la Contenci√≥n y este es un problema fundamental en las aplicaciones distribuidas.  Las solicitudes separadas luchan por los recursos. <br><br><h2>  Formas de encontrar un problema </h2><br>  Si el servidor no funciona, primero intentaremos encontrar y solucionar los problemas triviales de los bloqueos dentro de la aplicaci√≥n, en la base de datos y durante la E / S de archivo.  Todav√≠a hay toda una clase de problemas en las redes, pero hasta ahora nos limitaremos a estos tres, esto es suficiente para aprender a reconocer problemas similares, y estamos interesados ‚Äã‚Äãprincipalmente en los problemas que causan contenci√≥n: la lucha por los recursos. <br><br><h4>  Cerraduras en proceso </h4><br>  Aqu√≠ hay una solicitud t√≠pica en una aplicaci√≥n de bloqueo. <br><img src="https://habrastorage.org/webt/xn/za/vw/xnzavw3w6riwwwnd9tblut9pj0m.png"><br>  Esta es una variaci√≥n del diagrama de secuencia que describe el algoritmo para la interacci√≥n del c√≥digo de la aplicaci√≥n y la base de datos como resultado de alguna operaci√≥n condicional.  Vemos que se est√° realizando una llamada a la red, luego ocurre algo en la base de datos: la base de datos se usa ligeramente.  Luego se hace otra solicitud.  Para todo el per√≠odo, se utiliza una transacci√≥n en la base de datos y una clave com√∫n a todas las solicitudes.  Pueden ser dos clientes diferentes o dos pedidos diferentes, pero un mismo objeto de men√∫ de restaurante, almacenado en la misma base de datos que los pedidos de los clientes.  Trabajamos utilizando una transacci√≥n para mantener la coherencia; dos consultas tienen contenci√≥n en la clave del objeto com√∫n. <br><br>  Veamos c√≥mo se escala. <br><img src="https://habrastorage.org/webt/ej/wl/s1/ejwls1dfpfr0hzq-ysxsvakwm9m.png"><br>  El hilo duerme la mayor parte del tiempo.  √âl, de hecho, no hace nada.  Tenemos una cerradura que interfiere con otros procesos.  Lo m√°s molesto es que la operaci√≥n menos √∫til en una transacci√≥n que ha bloqueado una clave se produce desde el principio.  Alarga las transacciones de alcance en el tiempo. <br><br>  Lucharemos de esta manera. <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fallback = FallbackPolicy&lt;OptionalData&gt; .Handle&lt;OperationCancelledException&gt;() .FallbackAsync&lt;OptionalData&gt;(OptionalData.Default); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> optionalDataTask = fallback .ExecuteAsync(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> CalculateOptionalDataAsync()); <span class="hljs-comment"><span class="hljs-comment">//‚Ä¶ var required = await CalculateRequiredData(); var optional = await optionalDataTask; var price = CalculatePriceAsync(optional, required);</span></span></code> </pre> <br>  Esta es la consistencia eventual.  Asumimos que algunos de nuestros datos pueden ser menos recientes.  Para hacer esto, necesitamos trabajar con el c√≥digo de manera diferente.  Debemos aceptar que los datos son de diferente calidad.  No veremos lo que sucedi√≥ antes: el gerente cambi√≥ algo en el men√∫ o el cliente hizo clic en el bot√≥n "pagar".  Para nosotros, no importa cu√°l de ellos presion√≥ el bot√≥n dos segundos antes.  Y para los negocios no hay diferencia. <br><br>  No hay diferencia, podemos hacer tal cosa.  Condicionalmente ll√°melo opcionalData.  Es decir, alg√∫n valor que podemos prescindir.  Tenemos una reserva: el valor que tomamos del cach√© o pasamos alg√∫n valor predeterminado.  Y para la operaci√≥n m√°s importante (la variable requerida) haremos esperar.  Lo esperaremos firmemente, y solo entonces esperaremos una respuesta a las solicitudes de datos opcionales.  Esto nos permitir√° acelerar el trabajo.  Hay otro punto importante: esta operaci√≥n puede no realizarse en absoluto por alguna raz√≥n.  Suponga que el c√≥digo para esta operaci√≥n no es √≥ptimo, y en este momento hay un error.  Si la operaci√≥n fall√≥, haga una reserva.  Y luego trabajamos con esto como con el significado habitual. <br><br><h4>  DB Locks </h4><br>  Obtenemos aproximadamente el mismo dise√±o cuando reescribimos en as√≠ncrono y cambiamos el modelo de consistencia. <br><img src="https://habrastorage.org/webt/aw/lq/xv/awlqxvspzylkqut1gklosn6pooi.png"><br>  Lo que importa aqu√≠ no es que la solicitud se haya vuelto m√°s r√°pida en el tiempo.  Lo importante es que no tenemos contenci√≥n.  Si agregamos solicitudes, solo el lado izquierdo de la imagen est√° saturado con nosotros. <br><img src="https://habrastorage.org/webt/_y/to/gz/_ytogzwl2pvkvzuxjy6mt365xnm.png"><br><br>  Esta es una solicitud de bloqueo.  Aqu√≠ los hilos se superponen y las teclas en las que se produce la contenci√≥n.  A la derecha, no tenemos ninguna transacci√≥n en la base de datos y se ejecutan en silencio.  El caso correcto puede funcionar en este modo indefinidamente.  Izquierda har√° que el servidor se bloquee. <br><br><h4>  Sincronizar io </h4><br>  A veces necesitamos registros de archivos.  Sorprendentemente, el sistema de registro puede dar fallas tan desagradables.  Latencia en disco en Azure: 5 milisegundos.  Si escribimos un archivo en una fila, son solo 200 solicitudes por segundo.  Eso es todo, la aplicaci√≥n se ha detenido. <br><img src="https://habrastorage.org/webt/4f/ye/oz/4fyeozpwhurta8vmpo6qelgvot4.png"><br><br>  Es solo que tu cabello se pone de punta cuando ves esto: m√°s de 2000 hilos se han creado en la aplicaci√≥n.  El 78% de todos los hilos son la misma pila de llamadas.  Se detuvieron en el mismo lugar e intentan ingresar al monitor.  Este monitor delimita el acceso al archivo donde todos iniciamos sesi√≥n.  Por supuesto, esto debe ser cortado. <br><img src="https://habrastorage.org/webt/ga/7f/27/ga7f27rhtreou-lssvsrcfjcvzo.png"><br>  Esto es lo que debe hacer en NLog para configurarlo.  Hacemos un objetivo asincr√≥nico y le escribimos.  Y el objetivo asincr√≥nico escribe en el archivo real.  Por supuesto, podemos perder una cierta cantidad de mensajes en el registro, pero ¬øqu√© es m√°s importante para las empresas?  Cuando el sistema cay√≥ durante 10 minutos, perdimos un mill√≥n de rublos.  Probablemente sea mejor perder varios mensajes en el registro del servicio, que fallaron y se reiniciaron. <br><br><h2>  Todo es muy malo </h2><br>  La contenci√≥n es un gran problema en las aplicaciones de subprocesos m√∫ltiples, lo que no le permite escalar simplemente una aplicaci√≥n de subprocesos √∫nicos.  Las fuentes de contenci√≥n deben ser capaces de identificar y eliminar.  Una gran cantidad de subprocesos son desastrosos para las aplicaciones, y las llamadas de bloqueo deben reescribirse para sincronizarse. <br><br>  Tuve que reescribir una gran cantidad de legado del bloqueo de llamadas en as√≠ncrono, a menudo yo mismo inici√© dicha actualizaci√≥n.  Muy a menudo, alguien aparece y pregunta: "Escucha, hemos estado reescribiendo durante dos semanas, casi todo as√≠ncrono.  ¬øY cu√°nto funcionar√° m√°s r√°pido?  Chicos, los molestar√©, no funcionar√° m√°s r√°pido.  Se volver√° a√∫n m√°s lento.  Despu√©s de todo, TPL es un modelo competitivo por encima de otro: multitarea cooperativa sobre multitarea preventiva, y esto es una sobrecarga.  En uno de nuestros proyectos, aproximadamente + 5% al ‚Äã‚Äãuso de CPU y carga en GC. <br><br>  Hay una mala noticia m√°s: la aplicaci√≥n puede funcionar mucho peor despu√©s de reescribir en as√≠ncrono, sin darse cuenta de las caracter√≠sticas del modelo competitivo.  Hablar√© de estas caracter√≠sticas con gran detalle en el pr√≥ximo art√≠culo. <br><br>  Esto plantea la pregunta: ¬øes necesario reescribir? <br><br>  El c√≥digo s√≠ncrono se reescribe en as√≠ncrono para desbloquear el modelo de concurrencia y deshacerse del modelo multitarea preventivo.  Vimos que la cantidad de subprocesos puede afectar negativamente el rendimiento, por lo que debe liberarse de la necesidad de aumentar la cantidad de subprocesos para aumentar la concurrencia.  Incluso si tenemos Legacy, y no queremos reescribir este c√≥digo, esta es la raz√≥n principal para reescribirlo. <br><br>  La buena noticia al final es que ahora sabemos algo sobre c√≥mo deshacerse de los problemas triviales de la contenci√≥n del c√≥digo de bloqueo.  Si encuentra tales problemas en su aplicaci√≥n de bloqueo, es hora de deshacerse de ellos antes de reescribirlos a as√≠ncrono, porque all√≠ no desaparecer√°n por s√≠ solos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/440676/">https://habr.com/ru/post/440676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../440662/index.html">Tutorial React Parte 18: La sexta fase de trabajar en una aplicaci√≥n TODO</a></li>
<li><a href="../440666/index.html">Clasificaci√≥n de dibujos escritos a mano. Informar en Yandex</a></li>
<li><a href="../440670/index.html">El Banco Central public√≥ recomendaciones sobre la protecci√≥n criptogr√°fica de EBS</a></li>
<li><a href="../440672/index.html">M√©todos de racionalidad y el tapete de oraci√≥n del Magreb</a></li>
<li><a href="../440674/index.html">Usando gr√°ficos de dispersi√≥n para visualizar datos</a></li>
<li><a href="../440678/index.html">DIY hobby enrutador CNC. Humanidades para las humanidades. Parte 2</a></li>
<li><a href="../440680/index.html">C√≥mo mirar ma√±ana igrofikuyuchi</a></li>
<li><a href="../440682/index.html">- Y haces gas all√≠ en la industria petroqu√≠mica, ¬øverdad?</a></li>
<li><a href="../440688/index.html">Relaciones p√∫blicas en TI: ¬øc√≥mo vivir, a d√≥nde ir?</a></li>
<li><a href="../440690/index.html">Caracter√≠sticas de trabajar con Mesh en Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>