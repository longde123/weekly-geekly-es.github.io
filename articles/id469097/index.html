<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘  ğŸ™ğŸ¼ ğŸŒ Server web CentOS 8 dengan php7, node.js dan redis ğŸ‘¡ ğŸ ğŸ‘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Sudah 2 hari sejak versi baru sistem operasi CentOS keluar, yaitu, CentOS 8. Dan sejauh ini ada beberapa artikel di Internet tentang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Server web CentOS 8 dengan php7, node.js dan redis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469097/"><h2>  Kata Pengantar </h2><br>  Sudah 2 hari sejak versi baru sistem operasi CentOS keluar, yaitu, CentOS 8. Dan sejauh ini ada beberapa artikel di Internet tentang bagaimana melakukan sesuatu di dalamnya, jadi saya memutuskan untuk mengisi celah ini.  Selain itu, saya akan memberi tahu Anda tidak hanya tentang cara menginstal pasangan program ini, tetapi juga tentang bagaimana saya biasanya melihat instalasi Linux di lingkungan virtual di dunia modern untuk tugas-tugas umum, termasuk partisi disk dan banyak lagi. <br><br>  Tetapi pada awalnya saya ingin berbicara secara singkat tentang mengapa Anda harus beralih ke versi ini dari semua yang sebelumnya, dan ada dua alasan untuk ini: <br><a name="habracut"></a><br><ol><li>  php7!  Dalam versi CentOS sebelumnya, "Orthodox" php5.4 diinstal ... <br><br>  Nah, jika sedikit lebih serius, maka banyak paket melompati beberapa versi secara massal.  Kami (penggemar OS redhat-like) akhirnya masuk, jika bukan masa depan, maka setidaknya sekarang.  Dan pendukung Ubuntu tidak akan lagi menertawakan kami dan menusuk kami, ya ... setidaknya untuk sementara waktu;). </li><li>  Transisi dari yum ke dnf.  Perbedaan utama adalah bahwa sekarang berfungsi dengan beberapa versi paket yang didukung secara resmi.  Di sini, di angka delapan ini belum pernah berguna bagi saya, tetapi kedengarannya menjanjikan. </li></ol><br><h2>  Menciptakan mesin virtual </h2><br>  Hypervisor berbeda dan saya tidak memiliki tujuan untuk mempertajam pembaca untuk pembaca tertentu, saya akan memberi tahu Anda tentang prinsip-prinsip umum. <br><br><h3>  Memori </h3><br>  Pertama ... Untuk menginstal sistem CentOS mulai dari 7 pasti, dan menurut saya pada 6 itu sama ("tapi itu tidak akurat"), <i>setidaknya diperlukan</i> 2 GB RAM.  Karena itu, saya menyarankan Anda untuk memulai dan memberi begitu banyak. <br><br>  Tetapi jika itu, setelah instalasi, jumlah memori dapat dikurangi.  Pada 1 GB, sistem telanjang bekerja dengan cukup baik, saya memeriksa. <br><br><h3>  Berkendara </h3><br>  Untuk instalasi normal, buat disk virtual 20-30 GB.  Ini cukup untuk sistem.  Dan disk kedua untuk data.  Itu dapat ditambahkan pada tahap menciptakan mesin virtual, dan setelahnya.  Saya biasanya menambahkan nanti. <br><br><h3>  CPU </h3><br>  Pada satu inti, sistem telanjang tidak melambat.  Dan karena sumber daya dapat diskalakan secara bebas, saya tidak melihat gunanya memberi lebih banyak pada tahap pemasangan (kecuali Anda idealnya mengetahui persyaratannya dan terlalu malas untuk masuk ke konfigurator sekali lagi) <br><br>  Sisanya biasanya dapat dibiarkan secara default. <br><br><h2>  Instalasi itu sendiri </h2><br>  Jadi ... Kami meluncurkan penginstal ... Secara pribadi, saya telah menempatkan layanan ini untuk waktu yang lama hanya dalam bentuk mesin virtual, jadi saya tidak akan menjelaskan semua jenis catatan distribusi pada USB flash drive - Saya hanya memasang ISO sebagai CD di hypervisor favorit saya, saya mengunduhnya dan mengendarainya. <br><br>  Instalasi dasar cukup khas, saya hanya akan fokus pada beberapa poin. <br><br><h3>  Pemilihan sumber </h3><br>  Sejak rilis versi kedelapan, mirror dari Yandex telah berbohong sepanjang hari.  Yaitu, itu naik secara berkala, dan sekali lagi mulai menunjukkan kesalahan.  Saya yakin masalahnya adalah beban berlebihan pada layanan.  Oleh karena itu, untuk menunjukkan sumbernya, saya pribadi harus, alih-alih memasukkan alamat yang biasa, buka di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> , pilih cermin yang saya suka di sana dan masukkan alamat secara manual di jendela pemasang.  Penting untuk diingat bahwa Anda harus menentukan jalur ke folder tempat <b>direktori repodata berada</b> .  Misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mirror.corbina.net/pub/Linux/centos/8/BaseOS/x86_64/os</a> . <br><br><h3>  Disk rusak </h3><br>  Pertanyaan ini agak religius menurut saya.  Setiap admin memiliki posisinya sendiri dalam hal ini.  Tapi saya masih berbagi pandangan saya tentang pertanyaan itu. <br><br>  Ya, pada prinsipnya, Anda dapat mengalokasikan seluruh tempat ke root dan bekerja, paling sering bahkan cukup bagus.  Lalu mengapa pagar di taman dengan bagian yang berbeda?  - Alasan utama untuk ini, menurut saya 2: kuota dan portabilitas. <br><br>  Sebagai contoh, jika ada kesalahan dan terjadi kesalahan pada bagian data utama, saya ingin dapat memuat sistem dan melakukan langkah-langkah resusitasi.  Oleh karena itu, saya pribadi mengalokasikan partisi terpisah di bawah / boot.  Disinilah letak kernel dan bootloader.  Biasanya, 500 megabyte sudah cukup, tetapi dalam kasus yang jarang terjadi mungkin membutuhkan lebih banyak, dan mengingat bahwa kita sudah terbiasa mengukur ruang dengan terabyte, saya mengalokasikan 2GB untuk bagian ini.  Dan di sini penting bahwa itu tidak dapat dilakukan lvm. <br><br>  Selanjutnya adalah root dari sistem.  Untuk pemasangan normal, saya tidak pernah membutuhkan lebih dari 4 GB per sistem, tetapi selama acara yang dijadwalkan saya sering menggunakan direktori / tmp untuk membongkar distribusi, dan saya tidak melihat titik menyorotnya sebagai bagian terpisah - itu membersihkan secara otomatis dalam sistem modern, sehingga tidak mengisi penuh .  Jadi di bawah root saya mengalokasikan 8GB. <br><br>  Tukar ... Secara umum, ada sedikit manfaat praktis dari itu.  Jika Anda mulai menggunakan swap di server, hari ini di dunia nyata ini hanya berarti bahwa server perlu menambah lebih banyak RAM.  Jika tidak, masalah kinerja dijamin (atau beberapa program mengalami kebocoran memori).  Oleh karena itu, bagian ini hanya untuk tujuan diagnostik.  Oleh karena itu, 2 GB adalah angka yang bagus.  Ya, tidak peduli berapa banyak memori yang dimiliki server.  Ya, saya membaca semua artikel di mana ada tertulis tentang rasio memori dengan volume swap ... IMHO, mereka sudah ketinggalan zaman.  Selama 10 tahun latihan, ini tidak pernah berguna bagi saya.  15 tahun yang lalu saya menggunakannya, ya. <br><br>  Setiap orang dapat memutuskan apakah akan mengalokasikan / rumah di bagian terpisah IMHO.  Jika seseorang secara aktif menggunakan direktori ini di server, lebih baik untuk menyorot.  Jika tidak ada - tidak ada alasan. <br><br>  Selanjutnya, / var.  Menurut pendapat saya, perlu untuk memilihnya.  Sebagai permulaan, Anda dapat membatasi diri hingga 4 GB, dan lalu bagaimana hasilnya.  Dan ya, dengan "bagaimana kelanjutannya," maksud saya itu <br><br><ol><li>  Pertama, Anda selalu dapat me-mount disk lain di subdirektori / var (yang akan saya tunjukkan nanti dengan sebuah contoh) </li><li>  Kedua, kami memiliki lvm - Anda selalu dapat menambahkan.  Dan biasanya Anda harus menambahkan ketika terlalu banyak log mulai tuangkan di sana.  Tapi saya tidak pernah bisa memprediksi angka ini sebelumnya, jadi saya mulai dengan 2 GB, dan kemudian melihat. </li></ol><br>  Ruang yang tidak terisi akan tetap bebas di grup volume, maka Anda selalu dapat menggunakannya nanti. <br><br><h4>  LVM </h4><br>  Masuk akal untuk membuat <b>semua</b> partisi kecuali / boot di LVM.  Ya, termasuk swap.  Ya, tukar untuk semua tips harus di awal disk, dan dalam kasus LVM lokasinya tidak dapat ditentukan secara prinsip.  Tetapi seperti yang saya tulis di atas, sistem Anda <i>seharusnya tidak</i> menggunakan swap sama sekali.  Karena itu, tidak masalah di mana dia berada.  Ya, tidak di tahun '95 kita hidup, jujur! <br><br>  Selanjutnya, dalam LVM ada beberapa entitas dasar yang Anda harus dapat hidup: <br><br><ul><li>  volume fisik </li><li>  grup volume </li><li>  volume logis </li></ul><br>  Volume fisik dikelompokkan bersama, dengan masing-masing volume fisik berada hanya dalam satu kelompok, dan grup dapat berada di beberapa volume fisik sekaligus. <br>  Dan volume logis masing-masing dalam kelompok yang sama. <br><br>  Tapi ... Kami, sekali lagi, adalah abad ke-21 di halaman.  Dan servernya virtual.  Tidak masuk akal untuk menerapkan kepada mereka mekanisme yang sama yang diterapkan pada yang fisik.  Dan untuk virtual, penting untuk memiliki data yang terpisah dari sistem!  Ini sangat penting khususnya untuk kemampuan untuk dengan cepat mengalihkan data ke mesin virtual lain (misalnya, ketika beralih ke OS baru) dan secara umum semua jenis plus bermanfaat (pisahkan cadangan dengan bagian menggunakan hypervisor misalnya).  Oleh karena itu, satu grup volume digunakan untuk sistem, dan yang lainnya digunakan untuk data!  Pemisahan yang logis ini sangat membantu dalam kehidupan! <br><br>  Jika Anda hanya membuat satu hard disk virtual saat membuat mesin virtual, ini adalah akhir dari konfigurasi.  Dan jika dua, maka jangan menandai yang kedua. <br><br>  <b>Kami memulai instalasi.</b> <br><br><h2>  Instalasi pos </h2><br>  Jadi, sistem yang baru saja diinstal akhirnya boot.  Hal pertama yang perlu diperiksa adalah Internet. <br><br><pre><code class="bash hljs">ping ya.ru</code> </pre> <br>  Apakah ada jawaban?  - Baik, tekan Ctrl-C. <br>  Jika tidak, pergi mengatur jaringan, tidak ada kehidupan tanpa ini, tetapi artikel saya bukan tentang itu. <br><br>  Sekarang, jika kita belum berada di bawah root, kita pergi di bawah root, karena untuk mengetik <i>begitu</i> banyak perintah dengan sudo saya pribadi vlom (dan admin paranoid maafkan aku): <br><br><pre> <code class="bash hljs">sudo -i</code> </pre> <br>  Sekarang hal pertama yang kita ketikkan <br><br><pre> <code class="bash hljs">dnf -y update</code> </pre> <br>  Dan jika Anda membaca artikel ini pada 2019, kemungkinan besar tidak akan terjadi apa-apa, tetapi patut dicoba. <br><br><h3>  Sekarang konfigurasikan drive yang tersisa </h3><br>  Misalkan kita memiliki partisi xvda dengan sistem, maka disk data akan menjadi xvdb.  Ok <br><br>  Sebagian besar tip akan dimulai dengan kata-kata "Luncurkan fdisk dan buat partisi ..." <br><br>  Jadi, ini <i>tidak benar</i> ! <br><br>  Saya akan mengulangi pancake lagi, karena ini penting!  Dalam hal ini, bekerja dengan LVM, yang menempati satu keseluruhan, bahkan jika itu adalah disk virtual, membuat partisi di dalamnya berbahaya!  Setiap kata penting dalam frasa ini.  Jika kita bekerja tanpa LVM - itu perlu.  Jika kita katakan pada sistem disk dan data - itu perlu.  Jika karena alasan tertentu kita perlu membiarkan setengah dari disk kosong - juga diperlukan.  Tetapi biasanya semua asumsi ini murni teoretis.  Karena jika kita memutuskan untuk menambahkan tempat ke bagian yang ada, maka cara termudah untuk melakukannya adalah dengan konfigurasi ini.  Dan kemudahan administrasi lebih besar daripada itu sehingga kami dengan sengaja bergerak menuju konfigurasi ini. <br><br>  Dan kemudahannya adalah jika Anda ingin memperluas bagian data, Anda cukup menambahkan ruang ke bagian virtual, kemudian perluas grup dengan vgextend dan hanya itu!  Dalam kasus yang jarang terjadi, sesuatu yang lain mungkin diperlukan, tetapi setidaknya Anda tidak perlu memperluas pada awalnya yang logis, yang sudah bagus.  Dan kemudian, untuk memperluas volume ini sendiri, disarankan untuk menghapus yang sudah ada di awal, dan kemudian membuat yang baru di atas ... Yang tidak terlihat sangat bagus dan tidak dapat dilakukan secara langsung, dan ekspansi sesuai dengan skenario yang saya tentukan dapat dilakukan dengan cepat tanpa harus melepas partisi. <br><br>  Secara total, kami membuat volume fisik, lalu sekelompok volume, termasuk volume lalu bagian untuk server kami: <br><br><pre> <code class="bash hljs">pvcreate /dev/xvdb vgcreate data /dev/xvdb lvcreate -n www -L40G data mke2fs -t ext4 /dev/mapper/data-www</code> </pre><br>  Di sini, alih-alih huruf kapital "L" (dan ukuran dalam GB), Anda dapat menentukan yang kecil dan kemudian menunjukkan ukuran relatif alih-alih ukuran absolut, misalnya, untuk menggunakan setengah ruang yang saat ini tersedia dalam grup volume, Anda harus menentukan "-l + 50% GRATIS" <br><br>  Dan perintah terakhir memformat partisi dalam sistem file ext4 (yang sejauh ini, dalam praktik saya, menunjukkan stabilitas terbesar jika semuanya rusak, jadi saya lebih suka itu). <br><br>  Sekarang pasang partisi di tempat yang tepat.  Untuk melakukan ini, tambahkan baris yang benar ke / etc / fstab: <br><br><pre> <code class="bash hljs">/dev/mapper/data-www /var/www ext4 defaults 1 2</code> </pre> <br>  Dan kami mengetik <br><br><pre> <code class="bash hljs">mount /var/www</code> </pre> <br>  Jika kesalahan muncul - kami membunyikan alarm!  Karena itu berarti kita memiliki kesalahan di / etc / fstab.  Dan bahwa pada reboot berikutnya kita akan memiliki masalah yang sangat besar.  Sistem mungkin tidak bisa boot sama sekali, yang seringkali sangat menyedihkan untuk layanan cloud.  Karena itu, Anda harus segera memperbaiki baris yang ditambahkan terakhir, atau menghapusnya sama sekali!  Itu sebabnya kami tidak mulai menulis perintah mount secara manual - maka kami tidak akan mendapat kesempatan yang sangat baik untuk memeriksa konfigurasi peralatan direct-to-home. <br><br>  Sekarang kita benar-benar meletakkan semua yang kita inginkan dan membuka porta di bawah web: <br><br><pre> <code class="bash hljs">dnf groupinstall <span class="hljs-string"><span class="hljs-string">"Development Tools"</span></span> dnf -y install httpd @nodejs @redis php firewall-cmd --add-service http --permanent firewall-cmd --add-service https --permanent</code> </pre><br>  Secara opsional, Anda juga dapat meletakkan basis data di sini, tetapi secara pribadi, saya mencoba membuatnya terpisah dari server web.  Meskipun membuatnya dekat lebih cepat, ya.  Kecepatan adapter jaringan virtual biasanya di wilayah gigabit, dan ketika bekerja pada mesin yang sama, akses terjadi hampir secara instan.  Namun kurang aman.  Di sini untuk siapa lebih penting. <br><br>  Sekarang tambahkan parameter ke file konfigurasi (buat ideologi CentOS baru dan modern seperti ini) <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"vm.overcommit_memory = 1"</span></span>&gt; /etc/sysctl.d/98-sysctl.conf</code> </pre> <br>  Nyalakan ulang server. <br>  Dalam komentar, saya dimarahi karena menyarankan Anda untuk mematikan SeLinux, jadi saya akan memperbaikinya dan menulis tentang fakta bahwa setelah itu Anda harus ingat untuk mengonfigurasi SeLinux. <br>  <b>Sebenarnya untung!</b>  <b>:)</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id469097/">https://habr.com/ru/post/id469097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id469079/index.html">Python dalam Visual Studio Code: September Extension Extension</a></li>
<li><a href="../id469085/index.html">Kami mengeluarkan perangkat lunak dari mikrokontroler yang dilindungi kata sandi Renesas M16C</a></li>
<li><a href="../id469087/index.html">MVCC di PostgreSQL-2. Fork, file, halaman</a></li>
<li><a href="../id469093/index.html">Perbandingan perpustakaan CLI yang kurang populer dan tidak terlalu: cliff, plac, plumbum, dan lain-lain (bagian 2)</a></li>
<li><a href="../id469095/index.html">ML.NET dan Pembaruan Model Builder Dirilis: Apa yang Baru</a></li>
<li><a href="../id469099/index.html">Menguji tugas saat wawancara dengan pengembang - apakah masuk akal?</a></li>
<li><a href="../id469101/index.html">Belajar Bahasa Inggris: cara belajar berbicara sebagai penutur asli</a></li>
<li><a href="../id469109/index.html">Mainan Kayu, Bagian Tiga - 1989</a></li>
<li><a href="../id469111/index.html">Ganti Obyek dengan var: apa yang bisa salah?</a></li>
<li><a href="../id469115/index.html">Panduan Discovery.js: Mulai Cepat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>