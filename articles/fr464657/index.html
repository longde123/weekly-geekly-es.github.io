<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöò üòë üì∞ Corniche √©lectrique d'ing√©nierie inverse AM82TV üóùÔ∏è üõÄüèº üë®‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai quelques tringles √† rideaux √©lectriques Akko - AM82TV. Ce mod√®le se d√©marque de ses fr√®res avec l'ensemble d'interfaces de gestion le plus comple...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Corniche √©lectrique d'ing√©nierie inverse AM82TV</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464657/"> J'ai quelques tringles √† rideaux √©lectriques Akko - AM82TV.  Ce mod√®le se d√©marque de ses fr√®res avec l'ensemble d'interfaces de gestion le plus complet.  Les rideaux peuvent √™tre command√©s par radio, il y a des ¬´contacts secs¬ª, un contr√¥le phase par phase (en court-circuitant les fils de commande au r√©seau).  Il y a une interface RS485 - c'est si vous voulez connecter les rideaux √† la ¬´maison intelligente¬ª.  Vous pouvez √©galement ouvrir / fermer les rideaux simplement en les tirant avec votre main dans la direction souhait√©e.  ¬´Out of the box¬ª ne manque, peut-√™tre, que l'interface Web, eh bien, et MQTT. <br><br>  J'ai longtemps eu des tringles √† rideaux √©lectriques fonctionnant de mani√®re fiable, mais de temps en temps un d√©sir a commenc√© √† appara√Ætre pour les d√©monter - par curiosit√© pour voir ce qu'il y a √† l'int√©rieur et s'il est possible de mettre un ESP8266 (ou ESP32) dedans afin d'ajouter le manquant.  Vous pouvez bien s√ªr tout connecter de l'ext√©rieur, mais il vaut mieux que l'apparence reste la m√™me et que tout soit cach√© √† l'int√©rieur. <br><br>  Ne r√©parez pas ce qui n'est pas cass√© - ce n'est pas de moi.  Au d√©but, j'ai essay√© de me chasser des mauvaises id√©es, mais avec le temps, les d√©mangeaisons se sont intensifi√©es et maintenant, le moment est venu o√π il √©tait d√©j√† impossible de les combattre.  J'ai enlev√© le moteur de l'avant-toit et l'ai d√©mont√©.  L'inspection initiale devait donner des r√©ponses √† deux questions: y a-t-il de la place pour l'ESP8266 et est-il possible d'utiliser l'alimentation int√©gr√©e.  Tout a √©t√© r√©gl√© simplement.  Il suffit de d√©visser quelques vis des extr√©mit√©s du moteur.  La seule chose est que les fentes des vis ne sont pas faites avec un tournevis, mais avec une cl√© hexagonale torx.  Apr√®s cela, vous pouvez extraire le contenu - un moteur collecteur dans un bo√Ætier avec une bo√Æte de vitesses et un capteur d'arbre moteur, une alimentation 24 volts et une carte de commande. <br><a name="habracut"></a><br>  Il y a une place pour l'ESP, l'alimentation est con√ßue pour un moteur puissant et ne remarquera pas une petite charge suppl√©mentaire.  J'ai commenc√© √† consid√©rer la carte de contr√¥le et les pens√©es √† propos de l'ESP ont commenc√© √† fondre en arri√®re-plan - le microcontr√¥leur atmega168 √©tait le c≈ìur de la carte.  S'il n'y avait pas de contacts sur la carte pour installer le connecteur ISP (interface de programmation en circuit du microcontr√¥leur), cela ne m'arr√™terait pas, mais ils √©taient l√†.  Pour que vous me compreniez bien, je ne suis pas du tout fan de avr.  Je n'ai pas de programmeur et je n'ai pas √©crit une seule ligne de code pour les microcontr√¥leurs atmega.  J'avais un besoin urgent d'un programmeur pour essayer de lire le firmware, mais c'√©tait le soir et il n'y avait aucun moyen d'acheter quelque chose dans le magasin pour le moment.  Afin de ne pas attendre jusqu'au matin, j'ai assembl√© le programmeur Gromov.  Puis il a soud√© le connecteur ISP sur la carte de contr√¥le, connect√© le programmateur et essay√© de lire le firmware - et cela a √©t√© compt√©. <br><br>  Il est impossible d'essayer de comprendre quelque chose dans le firmware du microcontr√¥leur sans comprendre le sch√©ma de circuit.  Par cons√©quent, sur une carte de circuit imprim√©, j'ai restaur√© le circuit.  Je n'ai pas souvent √† dessiner de diagrammes.  Afin de ne pas dessiner les √©l√©ments qui se trouvent sur le tableau, mais pas dans la biblioth√®que standard, j'ai dessin√© un sch√©ma dans easyeda.  Oui, cela ne se r√©v√®le pas selon GOST (mais le microcontr√¥leur est dessin√© comme dans la documentation, ce qui est pratique).  Un fragment suffit pour comprendre: <br><br> <a href=""><img src="https://habrastorage.org/webt/wi/ir/m7/wiirm7nkx-rp1gz5smrd9ojrvqu.png"></a> <br><br>  Ci-apr√®s, la plupart des images sont cliquables. <br><br>  Si vous le souhaitez, vous pouvez vous familiariser avec le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sch√©ma complet</a> . <br><br>  Apr√®s cela, j'√©tais pr√™t √† rechercher le firmware.  La simple traduction de codes machine en mn√©moniques d'assembleur ne suffit pas pour l'analyse.  Vous devez voir l'√©tat des registres et de la m√©moire √† tout moment du programme.  Malheureusement, le d√©bogage sur le microcontr√¥leur lui-m√™me n'est pas possible avec atmega168, mais vous pouvez charger le firmware dans le simulateur.  Ce n'est pas tr√®s pratique si vous voulez "sentir" le vrai fer du cerclage du microcontr√¥leur, mais passons √† ce que nous avons.  Je n'ai pas install√© Atmel Studio 7. J'ai d√©cid√© qu'un AVR Studio 4 plus compact serait suffisant.En principe, un Studio suffit pour l'analyse, mais il est possible de transf√©rer certaines des op√©rations de routine vers d'autres logiciels.  En mars, l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">outil de</a> r√©tro-ing√©nierie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">, Ghidra, a</a> √©t√© publi√©.  J'avais besoin d'une raison, d'une t√¢che pratique, pour le conna√Ætre.  Ce n'est qu'une opportunit√©.  Chaque outil individuellement - AVR Studio 4 et Ghidra, j'ai eu un petit buggy.  AVR Studio, avec plusieurs transitions de sous-programme imbriqu√©es, pourrait soudainement cesser d'afficher les adresses de transition correctes dans les commandes (l'adresse est devenue z√©ro).  Ghidra s'est parfois √©gar√© dans son analyse d'indexation.  Mais l'utilisation simultan√©e des deux outils a permis d'identifier rapidement la cause de ces bizarreries. <br><br>  Creuser sans but dans le firmware n'est pas trop int√©ressant.  C'est mieux s'il y a une t√¢che sp√©cifique.  Sur le coup, curieux peut √™tre l'analyse du protocole d'√©change pour RS485 et le protocole de contr√¥le sur l'air.  J'ai d√©cid√© de me plonger dans le protocole radio. <br><br>  Il √©tait une fois, j'avais d√©j√† pris un signal transmis par une t√©l√©commande radio et l'ai analys√©. <br><br>  La cha√Æne radio est √† sens unique.  Le moteur ne peut recevoir qu'un signal et ne confirme pas la r√©ception d'une commande.  Il est impossible d'interroger l'√©tat de la corniche √©lectrique dans l'air.  Au niveau physique, il n'y a qu'un r√©cepteur de signal radio.  Il n'y a pas d'√©metteur dans le moteur.  Le signal est transmis par la t√©l√©commande radio √† une fr√©quence de 433,92 MHz.  Cod√© par manipulation d'amplitude.  La commande se compose d'un bit de d√©marrage de forme sp√©ciale, d'une adresse + canal et de la commande elle-m√™me.  Graphiquement, l'ensemble du signal peut √™tre repr√©sent√© comme suit: <br><br><img src="https://habrastorage.org/webt/ca/6g/mg/ca6gmgjm3gdp9dkji_5elztulks.png"><br><br>  Un canal peut √™tre consid√©r√© comme faisant partie d'une adresse.  Si vous transmettez une commande sur le canal z√©ro, elle sera ex√©cut√©e par tous les appareils avec une adresse donn√©e, mais avec des canaux diff√©rents.  Il est pratique si vous devez transf√©rer imm√©diatement la commande au groupe de tringles √† rideaux √©lectriques. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">En savoir plus sur le protocole radio</a> . <br><br>  Analysant comment la t√©l√©commande transmet les commandes, je connaissais d√©j√† les codes des quatre √©quipes.  Pas trop, par rapport aux possibilit√©s de contr√¥le du rideau √©lectrique via RS485.  Je voulais m'assurer que toutes les √©quipes √©taient identifi√©es et qu'il n'y avait ni ¬´≈ìufs de P√¢ques¬ª ni √©quipes de service. <br><br>  L'approche d'analyse est simple.  Le sch√©ma de circuit montre quels ports du microcontr√¥leur sont connect√©s aux p√©riph√©riques physiques.  Le fichier du firmware est analys√© dans Ghidra.  C'est pratique - de nombreuses op√©rations de routine sont effectu√©es automatiquement.  Apr√®s avoir analys√© le fonctionnement d'un morceau de code ou d'un sous-programme particulier, on lui attribue un nom significatif.  De plus, des extraits de code et des captures d'√©cran que je vais apporter de Ghidra.  Une fois terne, ex√©cutez le code dans le simulateur.  Dans des situations particuli√®rement compliqu√©es, vous devez dessiner des images. <br><br>  Afin de garantir que les noms des registres p√©riph√©riques atmega168 s'affichent correctement lors du d√©montage, j'ai corrig√© le fichier avr8.pspec.  Dans le bon sens, il faudrait cr√©er un fichier avec un nom diff√©rent, mais je n'avais pas besoin de ce fichier dans sa forme originale et j'ai corrig√© celui qui √©tait. <br>  Le micrologiciel commence par des vecteurs d'interruption.  Le premier est le vecteur de transition vers le d√©but du programme.  Cela ressemble √† ceci: <br><br> <a href=""><img src="https://habrastorage.org/webt/wd/xm/sj/wdxmsj86gebhtuz_wpne3yamgyc.png"></a> <br><br>  La plupart des interruptions ne sont pas utilis√©es.  Si pour une raison quelconque une telle interruption se produit, une commande de retour sera ex√©cut√©e imm√©diatement.  Outre le traitement des interruptions pour r√©initialisation, les interruptions pour d√©passement du temporisateur 0, l'ach√®vement de la r√©ception et la disponibilit√© √† transmettre l'octet de donn√©es suivant √† USART sont √©galement trait√©es.  L'√©change RS485 ne nous int√©resse plus maintenant, mais le d√©bordement du temporisateur doit √™tre revu. <br><br>  Bien s√ªr, avant que l'interruption du temporisateur ne soit activ√©e, le temporisateur lui-m√™me doit √™tre configur√©.  Je n'ai pas commenc√© √† chercher dans le code d√©mont√© le lieu o√π l'initialisation a lieu.  Dans le simulateur, j'ai d√©fini un point d'arr√™t √† l'adresse 0x1fc - c'est l'adresse enregistr√©e dans le gestionnaire d'interruption.  J'ai commenc√© le programme, j'ai eu un pic et j'ai juste regard√© ce qui √©tait √©crit dans les registres.  lock select for timr0 est r√©gl√© sur clk / 8.  Avec du quartz sur une carte de 8 MHz, des impulsions d'une fr√©quence de 1 MHz arrivent au temporisateur. <br><br>  D√©but du gestionnaire d'interruption: <br><br> <a href=""><img src="https://habrastorage.org/webt/mp/ag/-k/mpag-kzg9d5owsklnddy4smfhwe.png"></a> <br><br><div class="spoiler">  <b class="spoiler_title">Graphique des fonctions du gestionnaire d'interruption ornithologique</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vt/o0/nc/vto0ncy5nmggxhbccz-3hw-slm4.png" alt="image"><br></div></div><br>  La minuterie d√©borde toutes les 107 Œºs.  Entre autres choses, le gestionnaire d'interruption traite le signal de la sortie du r√©cepteur de signal radio.  Si le signal r√©ussit le test, les donn√©es re√ßues sont √©crites dans le tampon √† 0x4af.  La taille du tampon est de 6 octets.  C'est un octet de plus que n√©cessaire pour recevoir quatre octets de l'adresse + canal et de l'octet de commande.  Peut-√™tre que le sixi√®me octet du protocole radio √©tait destin√© √† la somme de contr√¥le, mais atrophi√©.  Cela arrive parfois.  Peut-√™tre destin√© √† des donn√©es compl√©tant certaines des commandes.  Dans le protocole de contr√¥le de la corniche √©lectrique RS485, il y a une commande pour fermer partiellement les rideaux.  Dans ce cas, un octet suppl√©mentaire est transmis avec des donn√©es sur le montant de la fermeture en pourcentage.  Une √©quipe similaire pourrait exister dans le protocole radio.  Le programme principal est inform√© de l'√©tat de pr√©paration des donn√©es en d√©finissant un indicateur - une unit√© est √©crite √† l'adresse 0x4bd. <br><br>  Ceci termine l'analyse des interruptions et passe au programme principal. <br><br>  Le graphique des fonctions lors de la navigation vers l'adresse 0x1304 est concis et simple: <br><br><img src="https://habrastorage.org/webt/an/5s/m9/an5sm9h8f8cpzqgbrmnd4degjr4.png" alt="image"><br><br>  Nous devons dans le "principal".  Nous avons d√©j√† analys√© les interruptions et comprenons que si, pour une raison quelconque, nous revenons soudainement du r√©seau principal et entrons dans ¬´go_to_sleep¬ª, ce r√™ve sera l√©thargique - le rideau √©lectrique cessera de faire quelque chose d'utile.  Probablement, lors de l'√©criture du micrologiciel, un mod√®le pr√™t √† l'emploi a √©t√© utilis√© et des artefacts sont rest√©s apr√®s. <br><br>  En g√©n√©ral, nous devons trouver l'endroit o√π le tampon 0x4af est acc√©d√©.  Vous n'aurez pas √† chercher longtemps.  Litt√©ralement apr√®s quelques commandes, un sous-programme est appel√©, en commen√ßant par l'adresse 0x11b3, o√π ce tampon est copi√© et trait√©. <br><br>  Graphique des fonctions de la proc√©dure rf_signal_buffer_processing (0x11b3): <br><br> <a href=""><img src="https://habrastorage.org/webt/iy/nk/iu/iynkiuxnofmxm32ouji-qfbfzdy.png"></a> <br><br>  C'est exactement l'endroit dont nous avons besoin, mais cela semble un peu compliqu√©.  Pour comprendre, j'ai commenc√© √† dessiner des images.  Quelque chose comme un organigramme. <br><br>  La premi√®re chose qui se produit ici est que les donn√©es du tampon 0x4af sont copi√©es vers la nouvelle adresse - 0x49f et l'indicateur 0x4bd est r√©initialis√©: <br><br> <a href=""><img src="https://habrastorage.org/webt/op/bh/lj/opbhljbg5zjnsxr4_pqriv6zk0s.png"></a> <br><br>  L'extrait suivant est le plus int√©ressant: <br><br> <a href=""><img src="https://habrastorage.org/webt/-u/03/uf/-u03ufrcwodmxwpiyp6u0p-xzya.png"></a> <br><br>  En fait, il s'agit de la v√©rification compl√®te de la commande re√ßue en direct.  Bien que cela ne soit pas √©vident, mais une analyse plus approfondie a montr√© que la transition vers les branches suivantes est le traitement des commandes radio suivantes si la commande 0xcc a √©t√© re√ßue avant cela - passer en mode param√®tres.  J'√©tais int√©ress√© par les nouveaux codes des √©quipes elles-m√™mes.  Y a-t-il autre chose que les codes de commande 0x11, 0x33, 0x55 et 0xcc. <br><br>  Ni ici ni plus loin je n'ai pu trouver le traitement du dernier - sixi√®me octet de la commande.  Sur la figure, il est barr√© en rouge.  Ainsi, toutes les √©quipes se composent de cinq octets.  Au moins dans le firmware de l'AM82TV. <br><br>  La premi√®re chose que nous voyons est de v√©rifier le cinqui√®me octet du tampon - le code de la commande elle-m√™me.  Ici, il semble qu'il y ait eu de nouveaux codes de commande - 0xad et 0xda.  La commande du tampon r√©ussit le test si le champ d'adresse correspond √† l'une des adresses d√©j√† enregistr√©es dans eeprom, ou si le code de commande est 0xad, ou 0xda et le champ d'adresse == 0xaaaaaaaa. <br><br><div class="spoiler">  <b class="spoiler_title">Photos restantes</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/of/6n/yd/of6nydabymjwd0-ysfdbwkyfcxk.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/-9/00/tp/-900tp2w_m-zrbzpagx5okojagq.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/zb/fq/uj/zbfqujb6gxqybjtotgbkws3as_q.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/jw/dp/1l/jwdp1lmpmdf97sikdteuuauxovc.png"></a> <br><br><img src="https://habrastorage.org/webt/so/nx/u5/sonxu5zkskxkpw_c_mgultqp7ic.png" alt="image"><br></div></div><br>  Eh bien, nous consid√©rerons que nous avons r√©ussi le prochain test.  Maintenant, le code de commande se trouve √† 0x4bf.  Nous devons trouver comment le contenu de cet octet est trait√©.  Il existe plusieurs fa√ßons de proc√©der.  La plus simple est une recherche de texte sur du code d√©sassembl√© dans Ghidra.  Il reste √† voir exactement o√π le contenu de cet octet est lu.  Ce n'est pas un moyen garanti de trouver tous les appels, mais dans ce cas particulier, cela fonctionnera.  Donc, tout d'abord, nous verrons une lecture d'octets dans la proc√©dure commen√ßant √† 0x1262: <br><br><img src="https://habrastorage.org/webt/cz/pf/in/czpfinnhxrqxoghowvdcrkamj8i.png" alt="image"><br><br>  L'acc√®s √† celui-ci provient d'un seul endroit - une √©quipe situ√©e √† 0x5e0. <br><br>  Graphique de fonction: <br><br><img src="https://habrastorage.org/webt/d_/mi/wy/d_miwyhmpmtxxuktt97yhnlvh6o.png" alt="image"><br><br>  C'est dommage, mais tous les codes de commande, √† l'exception de ceux d√©j√† connus: 0x11, 0x33, 0x55 et 0xcc sont ignor√©s dans cette proc√©dure.  M√™me les codes 0xad et 0xda trouv√©s √† l'√©tape pr√©c√©dente.  Au moins je n'ai pas r√©ussi √† trouver de nouveaux codes de commandes radio dans le firmware de la corniche √©lectrique AM82TV. <br><br>  N√©anmoins, il y a acc√®s au firmware, il peut √™tre d√©mont√©, voir comment les fonctions sp√©cifiques sont impl√©ment√©es et changer quelque chose par vous-m√™me.  Ou m√™me ajouter quelque chose. <br><br>  Le firmware et le fichier avr8.pspec modifi√©s pour atmega168 sont publi√©s sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464657/">https://habr.com/ru/post/fr464657/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464645/index.html">Comment configurer PVS-Studio dans Travis CI en utilisant l'√©mulateur de console de jeu PSP comme exemple</a></li>
<li><a href="../fr464647/index.html">Journal Harry Potter</a></li>
<li><a href="../fr464649/index.html">Syst√®me de collaboration de documents pour Zimbra Open-Source Edition</a></li>
<li><a href="../fr464651/index.html">Biblioth√®que de g√©n√©rateur de code assembleur pour microcontr√¥leurs AVR. Partie 5</a></li>
<li><a href="../fr464655/index.html">Comment les salaires et la popularit√© des langages de programmation ont chang√© au cours des 2 derni√®res ann√©es</a></li>
<li><a href="../fr464659/index.html">S√©curit√© des applications ou Comment int√©grer la s√©curit√© dans le d√©veloppement personnalis√©. Exp√©rience personnelle chez AGIMA</a></li>
<li><a href="../fr464661/index.html">A qui confier la conception des √©quipements techniques de r√©√©quipement et de reconstruction</a></li>
<li><a href="../fr464665/index.html">Partitionnement dans SQL Server</a></li>
<li><a href="../fr464671/index.html">Recevez des SMS r√©guliers vers les messageries instantan√©es Viber et Telegram (en utilisant les passerelles GoIP)</a></li>
<li><a href="../fr464673/index.html">TinyFL - pilote de lampe de poche pour microcontr√¥leur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>