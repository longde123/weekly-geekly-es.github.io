<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔇 🏗️ ☠️ اختبار واجهة المستخدم: فحص النظام بدرجات دقة مختلفة 🙏🏼 👳 👨‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="إن اختبار نماذج الويب الطويلة في متصفحات مختلفة ودرجات دقة ليس ضروريًا للغاية فحسب ، بل أيضًا للمرة الثالثة أو الرابعة - وهي عملية مملة للغاية ومكثفة ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>اختبار واجهة المستخدم: فحص النظام بدرجات دقة مختلفة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/425647/" style=";text-align:right;direction:rtl">  إن اختبار نماذج الويب الطويلة في متصفحات مختلفة ودرجات دقة ليس ضروريًا للغاية فحسب ، بل أيضًا للمرة الثالثة أو الرابعة - وهي عملية مملة للغاية ومكثفة التركيز.  لذا ، هذه هي بالضبط المنطقة التي تطلب الأتمتة.  هذا ما فعلناه. <br><br>  في هذه المقالة عن هبر ، سنخبرنا عن تجربتنا في اختبار الشاشات الكبيرة باستخدام أدوات الشبكة المنقلة ، والزناليوم ، والسيلينيوم.  كيف أدخلنا هذه الأدوات تدريجيًا للاختبار التلقائي لواجهة المستخدم وما هي الصعوبات التي واجهتنا. <br><br><img src="https://habrastorage.org/webt/t0/ik/pi/t0ikpibqtt5stc-vmd8mm5ap7p0.jpeg"><br><a name="habracut"></a><br>  ننشئ ونحافظ على نظام فيه 7 آلاف مستخدم نشط.  غالبًا ما يستخدمون هذه المتصفحات: <br><br><img src="https://habrastorage.org/webt/du/8h/qg/du8hqgm1ywysjlq_jnwovnu636m.png"><br><br>  ودقة الشاشة التالية: <br><br><img src="https://habrastorage.org/webt/yh/qo/65/yhqo65fklkp6alt-rooirdebj0c.png"><br><br>  في كل مرة بعد إصدار نسخة جديدة ، تحتاج إلى التحقق من الأداء في هذه المتصفحات والأذونات. <br><br>  لفهم أفضل لكيفية عمل اختبارات واجهة المستخدم عادة في حالتنا ، ضع في اعتبارك حالة بسيطة: اختبار وظيفة تطبيق لاستعادة كلمة المرور.  تبعا لذلك ، هناك صفحتان.  على أحد ، تحتاج إلى تحديد اسم مستخدم أو بريد حيث سيأتي خطاب مع رابط لتغيير كلمة المرور.  بعد إرسال التطبيق ، ينتقل المستخدم إلى الصفحة مع التأكيد على أن كل شيء سار على ما يرام. <br><br><img src="https://habrastorage.org/webt/ji/p2/1o/jip21ov8vewbempmrtgogko3lx4.png"><br>  <i>نموذج استعادة كلمة المرور</i> <br><br><img src="https://habrastorage.org/webt/1d/ce/-e/1dce-e0_bdinsyr_hlwidjceo6k.png"><br>  <i>الصفحة التي تتم فيها إعادة التوجيه بعد تقديم الطلب بنجاح</i> <br><br>  يبدو اختبار هذه الآلية في شكل مبسط كما يلي: <br><br><img src="https://habrastorage.org/webt/io/yh/zn/ioyhzno2ibl6ijdwxszbszy0qrk.png"><br><br>  نفس البرنامج النصي للرمز: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Promise</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">boolean</span></span></span><span class="hljs-function"> | </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">void</span></span></span><span class="hljs-function">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> browser.get(browser.baseUrl); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> element(by.name(<span class="hljs-string"><span class="hljs-string">'EmailOrLogin'</span></span>)).sendKeys(userLogin); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> element(by.buttonText(<span class="hljs-string"><span class="hljs-string">''</span></span>)).click(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> screenshot = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> browser.takeScreenshot(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> canonicalScreenshotPath = <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span><span class="xml"><span class="hljs-tag">   &gt;</span></span></span><span class="xml">; await compareScreenshot(screenshot, canonicalScreenshotPath); });</span></span></code> </pre> <br>  كما ترى ، يبدو رمز الاختبار بسيطًا جدًا ، فهو يكرر حرفياً ما تم عرضه في مخطط الكتلة. <br><br>  نعرض الآن ما هي الأدوات التي أصبحت مفيدة في تنفيذ هذا المخطط بدقة شاشة مختلفة ، وما هي الصعوبات التي واجهناها. <br><br><h2 style=";text-align:right;direction:rtl">  صندوق الأدوات المحدد </h2><br><h3 style=";text-align:right;direction:rtl">  بدأ بالكروم </h3><br>  لأتمتة الاختبار ، اخترنا Protractor ، إطار عمل e2e لاختبار التطبيقات الزاويّة.  طلبنا فقط على الزاوي.  مع منقلة ، قمنا بإجراء نوعين من الاختبارات: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  فيما يتعلق بالوظيفة العامة: يتم فتح نموذج تقديم الطلب ، وملئه بالبيانات وإرسال الطلب ، وبعد ذلك نتحقق من حدوث إعادة توجيه إلى تسجيل جميع التطبيقات. </li><li style=";text-align:right;direction:rtl">  اختبارات لقطة الشاشة: يسمح لك المنقلة بأخذ لقطة شاشة في أي وقت.  باستخدام مكتبة منفصلة للحصاد الأزرق ، قارنا بين لقطتي شاشة: مرجع وأخرى حقيقية.  إذا لم تتطابق ، يتم إنشاء لقطة شاشة على الفور تظهر فيها جميع الاختلافات ، تمامًا كما هو الحال في Git. </li></ol><br>  على سبيل المثال ، إذا واصلت تحليل المثال الموضح أعلاه. <br><br><img src="https://habrastorage.org/webt/-k/op/c_/-kopc_riwo8xa6qsajn_ld-ynrk.png"><br>  <i>لقطة شاشة مع رسالة ارتباط غير صالحة</i> <br><br><img src="https://habrastorage.org/webt/gb/lp/uh/gblpuhvntxizhca6g1i0dk5ciqs.png"><br>  <i>يتم تمييز الاختلافات (النص وتخطيط الزر) في المرجع ولقطات الشاشة الحالية باللون الأرجواني</i> <br><br>  إذا كانت الصفحة تحتوي على بيانات متغيرة ديناميكيًا (على سبيل المثال ، التاريخ أو رقم الطلب) ، فأنت بحاجة إلى إخفائها - فهذه الوظيفة موجودة في مكتبة الحصاد الأزرق.  خلاف ذلك ، ستؤدي مقارنة لقطات الشاشة إلى نتيجة سلبية. <br><br><h3 style=";text-align:right;direction:rtl">  إضافة FF وأذونات مختلفة </h3><br>  مع مرور الوقت ، نمت متطلباتنا لنظام اختبار واجهة المستخدم الحالي: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  إجراء الاختبارات ليس فقط في Chrome ، ولكن أيضًا في FF ، </li><li style=";text-align:right;direction:rtl">  إجراء اختبار لقطة الشاشة ليس على دقة واحدة ، ولكن على الأكثر شيوعًا ، </li><li style=";text-align:right;direction:rtl">  إجراء الاختبارات بالتوازي. </li></ul><br>  لذا ، دعنا نجعل اختباراتنا تعمل بالتوازي في كل من Chrome و FF. <br><br>  للقيام بذلك ، في تكوين قدرات Protractor'a ، استبدلها بما يلي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">multiCapabilities: [ { <span class="hljs-type"><span class="hljs-type">shardTestFiles</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span>, <span class="hljs-type"><span class="hljs-type">maxInstances</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-type"><span class="hljs-type">browserName</span></span>: <span class="hljs-string"><span class="hljs-string">'chrome'</span></span> }, { <span class="hljs-type"><span class="hljs-type">shardTestFiles</span></span>: <span class="hljs-type"><span class="hljs-type">true</span></span>, <span class="hljs-type"><span class="hljs-type">maxInstances</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-type"><span class="hljs-type">browserName</span></span>: <span class="hljs-string"><span class="hljs-string">'firefox'</span></span> } ]</code> </pre> <br>  كل شيء واضح هنا ، حيث يكون كل إعداد مسؤولاً عنه.  فقط يستحق الاهتمام <br> <code>shardTestFiles: true</code> <br> <code>/** * If this is set to be true, specs will be shared by file (ie all files to be run by this set of capabilities will run in parallel). * Default is false. */</code> <br> <br>  من خلال هذه العلامة ، نقدم إطلاقًا موازًا لجميع المواصفات في جميع المتصفحات المحددة في القدرات المتعددة. <br><br>  يتم إخفاء المعلمة specs تحت كلمة specs ، والتي تحدد القالب الذي سيتم البحث فيه عن الملفات التي تحتوي على اختبارات. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">exports.config = { ... specs: [<span class="hljs-string"><span class="hljs-string">'./e2e/**/*.spec.ts'</span></span>], ... }</code> </pre> <br>  تبدو نظرية تقسيم جميع الاختبارات إلى العديد من ملفات المواصفات منطقية تمامًا.  يعمل التزامن عليها (على سبيل المثال ، قم بإنشاء ملف مواصفات لكل ميزة من ميزات التطبيق). <br><br>  بالإضافة إلى ذلك ، في Protractor'e هناك القدرة على إبراز الأجنحة. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">exports.config = { ... suites: { <span class="hljs-attr"><span class="hljs-attr">suite01</span></span>: <span class="hljs-string"><span class="hljs-string">'./e2e/**/suite01.*.spec.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">suite02</span></span>: <span class="hljs-string"><span class="hljs-string">'./e2e/**/suite02.spec.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">suite03</span></span>: <span class="hljs-string"><span class="hljs-string">'./e2e/**/suite03.spec.ts'</span></span> }, ... }</code> </pre> <br>  كما ترى من هذا الجزء من التكوين ، عند بدء تشغيل مجموعة واحدة ، يتم تشغيل الاختبارات من ملف مواصفات واحد فقط.  ربما يكون هذا مفيدًا إذا كنت ترغب في تشغيل الاختبارات لجزء واحد فقط من التطبيق. <br><br>  أما بالنسبة لاختبار التطبيق بقرارات مختلفة ، فقد اتبعنا الطريقة التالية.  كأذونات تجريبية ، تم اختيار أحد أكثرها شيوعًا: 1920x1080 ، 1366x768 ، 1440x10900 ، 768x1024.  عند تشغيل كل اختبار ، تم تنفيذ جميع الإجراءات اللازمة في البداية ، ثم يتم تنفيذ سلسلة من عمليات فحص لقطة الشاشة. <br><br><img src="https://habrastorage.org/webt/ht/fe/w4/htfew43t0zeewg0cg-odih_s_yq.png"><br><br><h3 style=";text-align:right;direction:rtl">  نحن نربط IE ولقطات الشاشة بالحجم الكامل </h3><br>  اختبارات اللقطة التي حصلنا عليها ، للأسف ، عملت فقط على أساس الجزء المرئي في البداية من الصفحة.  وإذا كان التمرير موجودًا على الصفحة ، فإن كل شيء أدناه لم يتم استكشافه للتخطيط الذي ذهب. <br><br>  بالإضافة إلى ذلك ، نحتاج أيضًا إلى دعم IE ، الذي لم يتم تصميم اختباراتنا له حتى الآن.  بدأنا في البحث عن فرصة مناسبة لإجراء الاختبارات في IE والتقاط لقطات شاشة كاملة الحجم. <br><br><img src="https://habrastorage.org/webt/v7/ul/le/v7ulle2bbjnxzfyqc5vv_ps7due.png"><br><br>  توصلنا إلى حلين: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Zalenium</a> و <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Selenium-Grid</a> .  نحن نحذف الوصف الذي يتباهى أحدهم بما ، ونخبر عما وجدوه / لم يجدوه في أي من الحلين. <br><br>  <b>Zalenium</b> : يعمل هذا الحل في حاوية Docker وترتفع N حاويات أخرى بعد الحاوية الرئيسية - <b>لتشغيل</b> المتصفحات.  يتيح لك تحديد screenWidth و screenHeight أثناء <code>docker run</code> والحصول على حجم الشاشة ، على سبيل المثال ، 1920x6000.  لا يوجد دعم لـ IE. <br><br><img src="https://habrastorage.org/webt/kz/wr/de/kzwrdeodk_9rbejq0srhhk5d3zq.png"><br>  <i>متصفحان بحجم شاشة 1920 × 6000</i> <br><br>  <b>شبكة السيلينيوم:</b> بدأت الاختبارات في IE بسهولة بالغة. <br>  من السلبيات: لا توجد طريقة لتعيين حجم نافذة المتصفح بأي حجم. <br><br>  <b>الإجمالي: شبكة زالينيوم + شبكة سيلينيوم</b> <br>  استقرنا على مجموعة من شبكة Zalenium + Selenium-network: من خلال Zalenium ، تقرر تشغيل الاختبارات في Chrome و FF ، ومن خلال Selenium-network للتحقق من الحد الأدنى من أداء التطبيق في IE. <br><br><h2 style=";text-align:right;direction:rtl">  ما كان مثيرا للاهتمام في الاجتماع </h2><br>  <b>1. استخدام formControlName كمحدد عنصر</b> <br><br>  باستخدام البحث في formControlName ، يمكنك البحث بسهولة عن الحقول المطلوبة في النموذج وتعبئتها ببيانات الاختبار.  محدد الموقع بواسطة formControlName غير مضمن ، ولكن من السهل إضافته: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">exports.config = { ... onPrepare() { <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ts-node'</span></span>).register({ <span class="hljs-attr"><span class="hljs-attr">project</span></span>: <span class="hljs-string"><span class="hljs-string">'e2e/tsconfig.e2e.json'</span></span> }); jasmine.getEnv().addReporter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> specReporter({ <span class="hljs-attr"><span class="hljs-attr">spec</span></span>: { <span class="hljs-attr"><span class="hljs-attr">displayStacktrace</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } })); addFormControlNameLocator(protractor); } ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFormControlNameLocator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">protractor</span></span></span><span class="hljs-function">) </span></span>{ protractor.by.addLocator(<span class="hljs-string"><span class="hljs-string">'formControlName'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value, optParentElement</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> using = optParentElement || <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> using.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'[formControlName="'</span></span> + value + <span class="hljs-string"><span class="hljs-string">'"]'</span></span>); }); }</code> </pre> <br>  <b>2. الفرق في عمل مدير webdriver المثبت عالميًا ومحليًا في Protractor</b> <br><br>  عند تثبيت Protractor في النظام (تنصح الوثائق الرسمية بتثبيت Protractor عالميًا) ، بالإضافة إلى إطار الاختبار نفسه ، نحصل على مدير webdriver المثبت ، والذي يوفر برامج تشغيل للمتصفحات لتشغيل الاختبارات التي تم اكتشاف إحدى المشاكل بها. <br><br>  بعد الانتقال إلى مجلد المشروع وتنفيذ تحديث مدير webdriver ، يتم تنزيل برامج تشغيل Chrome و FF و IE.  بعد ذلك ، عند بدء الاختبارات ، اكتشفوا الخطأ: <br><br> <code>No update-config.json found. Run 'webdriver-manager update' to download binaries.</code> <br> <br>  لقد أدركنا أن الخطأ يختفي إذا قمنا بتضمين تحديث مدير webdriver في برنامج npm النصي: <br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">{ ... scripts:{ “webdriver<span class="hljs-literal"><span class="hljs-literal">-update</span></span>”: “webdriver<span class="hljs-literal"><span class="hljs-literal">-manager</span></span> update” } ... }</code> </pre> <br>  وتشغيلها من خلال <code>npm run webdriver-update</code> ، تدخل كل من مصادر برنامج التشغيل والتحديث أعلاه config.json في مجلد المشروع. <br><br>  <b>3. تشغيل Zalenium من خلال تكوين عامل الميناء</b> <br><br>  يرافق وثائق Zalenium أمثلة على أمر <code>docker run</code> docker وملف إنشاء docker.  كل شيء ينطلق كما لو كان بالسحر.  حدثت المشكلة الوحيدة التي واجهناها عند البدء من خلال ملف إنشاء عامل الميناء <br>  <code>/var/run/docker.sock is not a valid windows path</code> .  الحل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هنا</a> . <br><br>  <b>4. وضوح العناصر منقلة</b> <br><br>  في سياق تجاربنا ، واجهنا في لحظة واحدة مهمة ثقب بعض القائمة على الصفحة ، أي  انتقل إلى كل صفحة من القائمة والتقط لقطة شاشة. <br><br><img src="https://habrastorage.org/webt/6u/sy/ol/6usyoljearsoj0ok6kgburgd_7e.png"><br><br>  بعد معالجة العنصر الأول من القائمة ، بدأت الاختبارات في الهبوط ، مما أدى إلى خطأ أنه لا يوجد شيء للنقر على بعض الإحداثيات.  كما اتضح ، بغض النظر عن حقيقة أن جميع عناصر القائمة تم اختيارها في البداية ، بعد أن أصبحت غير مرئية حقًا لأعيننا ، اختفت لعيني المنقلة. <br><br>  لقد قمنا بحل المشكلة عن طريق تعيين عرض شاشة كافٍ بحيث تظهر القائمة مرة أخرى قبل النقر فوق العنصر التالي. <br><br>  <b>5. تغيير القرار في IE (شبكة السيلينيوم)</b> <br><br>  كما تتذكر ، في Chrome و FF قمنا بضبط التغيير في دقة الشاشة.  عندما يتعلق الأمر بهذا في IE ، اكتشفنا ببساطة الخطأ: <code>Failed: java.io.IOException: Server returned HTTP response code: 405 for URL: http://localhost:21800/session/8d14426d-6483-4bbf-90b3-2a3ed46ebe9b/window/size</code> . <br><br>  من خلال تصحيح طويل ، كان من الممكن معرفة أن الخطأ يطير تمامًا في اللحظة التي يحاول فيها تنفيذ الشفرة: <code>browser.driver.manage().window().setSize(x, y)</code> .  إذا حاولت تنفيذ <code>browser.driver.manage().window().setPosition(x, y)</code> ، ثم <code>browser.driver.manage().window().setPosition(x, y)</code> الخطأ نفسه ، سيتغير الحجم فقط إلى الموضع.  هذا يقودنا إلى حقيقة أنه من المستحيل التحكم في دقة الشاشة عند تشغيل الاختبارات في IE.  حل المشكلة هو العكازات التي يجب أن تراكب بها الكود الخاص بك حتى لا تغير الدقة \ الموضع عند تشغيل IE. <br><br>  <b>6. Zalenium و WebSocket</b> <br><br>  بعد جمع كل المطبات محليًا ، تقرر اتخاذ Zalenium في البنية التحتية للشركة.  الحاوية مفتوحة ، نظام أسماء النطاقات مسجل ، الآن يمكن للجميع إجراء اختبارات في Zalenium'e ، ببساطة عن طريق تحديد المسار إليها في تكوين Protractor'a.  الجمال ، هاه؟  ولكن كان هناك. <br><br>  في هذه الحالة ، تم نشر كل شيء بالفعل على جهاز Linux ، تم استخدام Nginx كخادم.  ارتفعت الحاوية مع Zalenium دون مشاكل ، تليها حاويات N أخرى لتشغيل المتصفحات ، ولكن ... لم يتمكن من إنشاء اتصالات معهم.  كان من السهل العثور على أن الحاوية الرئيسية كانت تحاول الاتصال بحاويات المتصفحات عبر بروتوكول WebSocket ، ولم تتمكن Nginx من القيام بذلك افتراضيًا.  العلاج بسيط للغاية. <br><br><pre style=";text-align:right;direction:rtl"> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> / { <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> some_url; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Upgrade <span class="hljs-variable"><span class="hljs-variable">$http_upgrade</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Connection “upgrade”; }</code> </pre> <br>  <b>9. إطلاق شبكة السيلينيوم</b> <br><br>  لتشغيل شبكة السيلينيوم ، نحتاج إلى: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="">خادم السيلينيوم</a> ، </li><li style=";text-align:right;direction:rtl">  برنامج تشغيل IE ، الذي يسهل الحصول عليه من خلال تحديث مدير webdriver --ie32. </li></ul><br>  إطلاق الخادم: <br><br> <code>java -jar selenium-server-standalone.jar -role hub -hubConfig selenium-server-config.json</code> <br> <br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">selenium-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span>-config.json { "host": "127.0.0.1", "maxSessions": <span class="hljs-number"><span class="hljs-number">5</span></span>, "port": <span class="hljs-number"><span class="hljs-number">4445</span></span>, "cleanupCycle": <span class="hljs-number"><span class="hljs-number">5000</span></span>, "timeout": <span class="hljs-number"><span class="hljs-number">300000</span></span>, "newSessionWaitTimeout": <span class="hljs-number"><span class="hljs-number">-1</span></span>, "servlets": [], "prioritizer": <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "capabilityMatcher": "org.openqa.grid.internal.utils.DefaultCapabilityMatcher", "throwOnCapabilityNotPresent": <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, "nodePolling": <span class="hljs-number"><span class="hljs-number">180000</span></span>, "platform": "WINDOWS" }</code> </pre> <br>  إطلاق برنامج تشغيل IE: <br><br> <code>java -Dwebdriver.ie.driver=&lt;  &gt; -jar selenium-server-standalone.jar -role node -nodeConfig .\\ie-driver-config.json</code> <br> <br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell">ie<span class="hljs-literal"><span class="hljs-literal">-driver</span></span><span class="hljs-literal"><span class="hljs-literal">-config</span></span>.json { <span class="hljs-string"><span class="hljs-string">"capabilities"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"browserName"</span></span>: <span class="hljs-string"><span class="hljs-string">"internet explorer"</span></span>, <span class="hljs-string"><span class="hljs-string">"maxInstances"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"platform"</span></span>: <span class="hljs-string"><span class="hljs-string">"WINDOWS"</span></span>, <span class="hljs-string"><span class="hljs-string">"webdriver.ie.driver"</span></span>: <span class="hljs-string"><span class="hljs-string">"C:/Program Files (x86)/Internet Explorer/iexplore.exe"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"cleanUpCycle"</span></span>: <span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-string"><span class="hljs-string">"timeout"</span></span>: <span class="hljs-number"><span class="hljs-number">30000</span></span>, <span class="hljs-string"><span class="hljs-string">"port"</span></span>: <span class="hljs-literal"><span class="hljs-literal">-1</span></span>, <span class="hljs-string"><span class="hljs-string">"role"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-string"><span class="hljs-string">"hub"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:4445/grid/register/"</span></span>, <span class="hljs-string"><span class="hljs-string">"register"</span></span>: true, <span class="hljs-string"><span class="hljs-string">"maxSessions"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }</code> </pre> <br>  انتبه لاستخدام المنافذ نفسها عند بدء تشغيل الخادم وفي عنوان URL الخاص بمحور برنامج التشغيل.  كما seleniumAddress في التكوين منقلة نستخدم <code>http://127.0.0.1:4445/wd/hub</code> . <br><br><h2 style=";text-align:right;direction:rtl">  الاستنتاجات </h2><br>  لذلك قمنا بحل مهمتنا وفي كل مرة بعد إصدار نسخة جديدة ، يمكننا التحقق من الأداء في هذه المتصفحات والدقة. <br><br><h3 style=";text-align:right;direction:rtl">  كيفية دمج الاختبارات في سير العمل </h3><br>  من المهم أن نفهم أنه لا يكفي فقط رفع البنية التحتية بالكامل لإجراء الاختبارات وكتابتها.  عليك التفكير في كيفية استخدامها في حياتك اليومية. <br><br>  نحن لم ننفذ اختبارات واجهة المستخدم في CI ، لأنه  يتم إعدامهم لفترة كافية للسماح لأنفسهم بانتظار التنفيذ لكل بناء. <br><br>  لاختبار الإصدار المحلي من التطبيق أو تثبيته على إحدى بيئات الاختبار (الداخلية أو العميل) ، ما عليك سوى تغيير baseUrl في تكوين المنقلة.  لذلك ، يمكن تشغيل الاختبارات بواسطة كل من المطور والمختبر. <br>  المطور - عندما تكون هناك حاجة لتشغيل الاختبارات ، على سبيل المثال ، للإصدار المحلي من التطبيق في عملية تطوير ميزة جديدة.  أخصائي QA - على سبيل المثال ، اختبار الدخان بعد الانتشار في المنتج ، أو كاختبار في الأعلى بعد مجموعة من إعادة البناء. <br><br>  <b>في الختام ، نود التأكيد على:</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تذكر أن اختبارات واجهة المستخدم لن توفر عليك من الحاجة إلى إجراء اختبار يدوي مفصل.  الأتمتة تساعد فقط على تغطية المناطق. </li><li style=";text-align:right;direction:rtl">  استخدم الأتمتة بحكمة ، في المقام الأول لاختبار الدخان.  تغطية كل شيء وكل شيء لا معنى له - إنه مكلف ويصعب تحديثه </li><li style=";text-align:right;direction:rtl">  اكتب ببساطة.  إذا كانت اختبارات واجهة المستخدم تبدو معقدة ، فأنت تفعل شيئًا خاطئًا.  تغلب على البساطة واستخدم حسب التوجيهات (انظر النقطة 2) </li></ul><br>  نعتقد أن أتمتة اختبار واجهة المستخدم جيدة عندما يتم ذلك بسهولة.  لذا شاركنا ملاحظاتك وأدواتك الناجحة في التعليقات. <br><br><h2 style=";text-align:right;direction:rtl">  روابط مفيدة منا: </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">منقلة: أمل جديد - مايكل جيامبالفو ، كريج نيشينا</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Zalenium مقابل selenoid</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">حالة اختبار المنقلة في Selenium Gird في Docker</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar425647/">https://habr.com/ru/post/ar425647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar425635/index.html">ملخص المواد الطازجة من عالم الواجهة الأمامية للأسبوع الماضي رقم 333 (1-7 أكتوبر 2018)</a></li>
<li><a href="../ar425637/index.html">خوارزمية إنشاء اتصال SSH</a></li>
<li><a href="../ar425641/index.html">طور سكان المدينة الكندية "خدمة أوبر" بالحافلات وليس السيارات</a></li>
<li><a href="../ar425643/index.html">الأحداث الرقمية في موسكو 8-14 أكتوبر</a></li>
<li><a href="../ar425645/index.html">SpaceX و SAOCOM - 1A مهمة جديدة. تم</a></li>
<li><a href="../ar425649/index.html">BDSM و Gore و Drupal Developer Pursuit</a></li>
<li><a href="../ar425653/index.html">بناء بنية Microservice على Golang و gRPC ، الجزء 1</a></li>
<li><a href="../ar425657/index.html">حتمية العقاب وفعالية الشيكات المفاجئة</a></li>
<li><a href="../ar425659/index.html">لا يجب أن يكون التصميم التفاعلي معقدًا.</a></li>
<li><a href="../ar425661/index.html">22 نصيحة لمطور Angular. الجزء الأول</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>