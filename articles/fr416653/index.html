<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüîß ü§≤üèæ üïß Tri de biblioth√®que üßëüèª‚Äçü§ù‚Äçüßëüèª üì± üôÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prenez un tableau en ordre inverse et appliquez-lui un tri avec de simples insertions . 



 Voyez avec quel grincement l'√©l√©ment suivant est ins√©r√© a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tri de biblioth√®que</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416653/"><div style="text-align:center;"><img width="700" height="394" src="https://habrastorage.org/webt/8i/bj/do/8ibjdoxetlxsby3qiaj5seokxxa.jpeg"></div><br><br><a name="habracut"></a><br>  Prenez un tableau en ordre inverse et appliquez-lui un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tri avec de simples insertions</a> . <br><br><img width="684" height="95" src="https://habrastorage.org/webt/il/qa/vz/ilqavzmmhgxwuhcityv7wuqqqig.gif"><br><br>  Voyez avec quel grincement l'√©l√©ment suivant est ins√©r√© au bon endroit.  Pour cela, vous devez lib√©rer le lieu d'insertion, √† cause duquel vous devez d√©placer tous les √©l√©ments pr√©c√©demment ins√©r√©s. <br><br>  Et comme ce serait bien s'il y avait des espaces vides entre les √©l√©ments ins√©r√©s plus t√¥t!  Ensuite, il ne faudrait pas faire glisser les rang√©es d'√©l√©ments juste pour en ins√©rer un. <br><br>  En 2004, trois experts en informatique - Michael Bender, Martin Farah-Colton et Miguel Mostiro - ont d√©cid√© de modifier le tri avec de simples encarts de cette mani√®re.  Ils ont sugg√©r√© de former une partie ordonn√©e du r√©seau, en laissant des espaces entre les √©l√©ments ins√©r√©s. <br><blockquote>  Le biblioth√©caire a besoin que les livres soient class√©s par ordre alphab√©tique sur une longue √©tag√®re: en commen√ßant √† gauche de la lettre "A", les livres sont juste √† c√¥t√© les uns des autres jusqu'au "I" m√™me.  Si la biblioth√®que a re√ßu un nouveau livre li√© √† la section "B", alors pour le mettre sur l'√©tag√®re au bon endroit, vous devez d√©placer chaque livre, en commen√ßant quelque part du milieu de la section "B" jusqu'au dernier "I".  Il s'agit d'un tri par insertions simples.  Cependant, si le biblioth√©caire r√©servait l'espace libre dans chaque section, il lui suffisait de ne d√©placer que quelques livres pour faire de la place aux nouveaut√©s.  C'est le principe de base du tri des biblioth√®ques. </blockquote><h2>  Algorithme </h2><br><img width="693" height="168" src="https://habrastorage.org/webt/jl/-l/wc/jl-lwclcowy6aohvc82uksordtg.gif"><br><br><ul><li>  <strong>1. Cr√©ez un tableau auxiliaire vide, plusieurs fois plus grand que le tableau principal.</strong> </li><li>  <strong>2. Pour l'√©l√©ment suivant, nous recherchons l'emplacement d'insertion dans le tableau auxiliaire.</strong> <ul><li>  <strong>2.1.</strong>  <strong>Si vous trouvez un endroit √† ins√©rer, transf√©rez l'√©l√©ment et revenez √† l'√©tape 2.</strong> </li><li>  <strong>2.2.</strong>  <strong>S'il n'y a pas de place pour l'insertion, r√©√©quilibrez le r√©seau auxiliaire et revenez au point 2.</strong> </li></ul></li><li>  <strong>3. Apr√®s avoir trait√© tous les √©l√©ments, transf√©rez-les √† nouveau dans le tableau principal.</strong> </li></ul><br>  √Ä premi√®re vue, il semble que le tri soit facile et simple.  Pour dissiper cette illusion, nous consid√©rons plus en d√©tail les points cl√©s de l'algorithme. <br><br><h2>  Taille de la baie auxiliaire </h2><br>  Bien qu'il n'y ait pas d'opinion √©tablie, combien de fois le r√©seau auxiliaire doit √™tre plus grand que le r√©seau principal. <br><br>  Si vous en prenez trop, il y aura beaucoup d'espace entre les √©l√©ments, cependant, la recherche du site d'insertion et le r√©√©quilibrage seront plus lents, en raison des grandes distances entre les √©l√©ments.  Le r√©√©quilibrage se produira moins souvent, mais ils devront y consacrer plus de ressources.  Si vous en prenez trop peu, la recherche et le r√©√©quilibrage seront moins chers, mais vous devrez reformater le tableau plus souvent.  En g√©n√©ral, il doit encore √™tre test√© avec diff√©rentes valeurs et la m√©thode de piquer scientifique d√©termine la meilleure option. <br><br>  Si nous d√©cidons combien de fois le tableau auxiliaire est plus grand que le tableau principal, alors la formule pour d√©terminer le nombre exact d'√©l√©ments pour lui ressemble √† ceci: <br><br>  <b>NewSize = Œµ √ó (Taille + 1) - 1</b> <br><br>  <i>NewSize - le nombre d'√©l√©ments dans le tableau auxiliaire</i> <i><br></i>  <i>Œµ - combien de fois le tableau auxiliaire est plus grand que le tableau principal</i> <i><br></i>  <i>Taille - le nombre d'√©l√©ments dans le tableau principal</i> <br><br>  Si nous multiplions simplement la taille par un facteur: <b>NewSize = Size √ó Œµ</b> , alors pour une distribution uniforme, nous n'aurons pas assez de cellules dans la quantit√© de <b>Œµ - 1</b> pi√®ces.  Autrement dit, il est possible de les organiser uniform√©ment, mais la premi√®re cellule remplie ou la derni√®re sera situ√©e pr√®s du bord du r√©seau auxiliaire.  Et nous avons besoin que les espaces vides dans les cellules remplies soient r√©serv√©s de tous les c√¥t√©s - y compris avant le premier √©l√©ment et apr√®s le dernier. <br><br><img width="692" height="312" src="https://habrastorage.org/webt/am/np/py/amnppyndj34-6az2hiyjakiakbk.png"><br><br>  Cela semble √™tre une bagatelle, mais en fait, il est important pour le r√©√©quilibrage, pour garantir des emplacements libres pour l'insertion n'importe o√π, y compris lors du traitement des derniers √©l√©ments du tableau principal. <br><br><h2>  Rechercher le lieu d'insertion dans le r√©seau auxiliaire </h2><br>  Bien s√ªr, ici, vous avez besoin d'une recherche binaire.  Cependant, l'impl√©mentation classique ne fonctionnera pas pour nous. <br><br>  Premi√®rement, le r√©seau auxiliaire se compose principalement de vide.  Par cons√©quent, en dichotomisant r√©cursivement la structure, nous rencontrerons pour la plupart des cellules non remplies.  Dans ces cas, vous devez aller un peu √† gauche ou √† droite, jusqu'√† la cellule non vide la plus proche.  Ensuite, aux extr√©mit√©s du segment, il y aura des √©l√©ments significatifs qui vous permettront de calculer la moyenne arithm√©tique et de poursuivre la recherche binaire en profondeur. <br><br>  Deuxi√®mement, n'oubliez pas les bords.  Si vous devez ins√©rer un √©l√©ment minimum ou maximum, une recherche binaire parmi les √©l√©ments ins√©r√©s pr√©c√©demment ne m√®nera √† rien.  Par cons√©quent, il vaut la peine de consid√©rer les cas limites - v√©rifiez d'abord s'il est n√©cessaire de placer un √©l√©ment pr√®s de la bordure gauche ou droite du tableau et sinon, utilisez la recherche binaire. <br><br>  Troisi√®mement, compte tenu des sp√©cificit√©s de l'application, il convient de proc√©der √† des modifications suppl√©mentaires afin de minimiser le nombre de r√©√©quilibrages de tableaux.  Si l'√©l√©ment ins√©r√© est √©gal √† la valeur √† l'une des extr√©mit√©s du segment, vous ne devriez peut-√™tre pas l'ins√©rer au milieu du segment.  Il est plus logique de placer √† c√¥t√© d'un √©l√©ment de valeur √©gale √† celui-ci.  Cela remplira plus efficacement l'espace vide du tableau auxiliaire. <br><br>  Quatri√®mement, cinqui√®me et ainsi de suite.  La qualit√© de la recherche de l'emplacement d'insertion affecte directement la vitesse de tri, car la s√©lection des emplacements infructueux pour l'insertion entra√Æne un r√©√©quilibrage inutile.  Par exemple, il peut √™tre utile de diviser les segments non pas exactement au milieu, mais plus pr√®s du bord gauche ou droit du segment, en fonction du bord auquel l'√©l√©ment d'insertion est le plus proche en valeur? <br><br>  L'algorithme de recherche binaire lui-m√™me est sem√© d'emb√ªches, et compte tenu des nuances suppl√©mentaires susmentionn√©es, il ne devient finalement en aucun cas une t√¢che non triviale. <br><br><h2>  R√©√©quilibrage des baies </h2><br>  La recherche binaire n'est pas la chose la plus difficile √† impl√©menter dans ce tri.  Il y a toujours un r√©√©quilibrage. <br><br>  Lorsqu'il n'y a pas de place pour l'insertion (des √©l√©ments similaires ont √©t√© trouv√©s, mais il n'y avait pas de cellules libres entre eux), vous devez secouer le tableau auxiliaire pour lib√©rer la place d'insertion.  Cette secousse du tableau est un r√©√©quilibrage. <br><br>  De plus, le r√©√©quilibrage est <i>local</i> ou <i>complet</i> . <br><br><h3>  R√©√©quilibrage local </h3><br>  Nous d√©calons autant d'√©l√©ments que n√©cessaire pour lib√©rer le point d'insertion.  La mise en ≈ìuvre d'un tel √©quilibrage est tr√®s simple, il vous suffit de trouver la cellule vide la plus proche du point d'insertion et de l'utiliser pour d√©placer plusieurs √©l√©ments. <br><br>  Il y a des nuances possibles.  Par exemple, de quelle mani√®re chercher la place vacante la plus proche?  Afin d'√©viter la situation o√π un d√©calage est impossible (c'est-√†-dire si, d'un c√¥t√©, toutes les cellules sont occup√©es jusqu'au bord du tableau), vous pouvez vous concentrer sur la position du point d'insertion par rapport au milieu du tableau.  Si vous avez besoin d'ins√©rer sur le c√¥t√© gauche de la matrice, puis d√©placez vers la droite, si √† droite - vers la gauche.  Si <b>Œµ</b> ‚â• 2, cette approche √©limine la situation dans laquelle un d√©calage est impossible (car dans la moiti√© du r√©seau auxiliaire, il y a plus qu'assez d'espace pour tous les √©l√©ments). <br><br>  Dans l'interpr√©tation de l'auteur de l'algorithme, un r√©√©quilibrage local est implicite. <br><br><h3>  R√©√©quilibrage complet </h3><br>  Une alternative int√©ressante au local est un r√©√©quilibrage complet.  Autrement dit, dans le tableau auxiliaire, d√©caler tous les √©l√©ments disponibles afin qu'il y ait (presque) les m√™mes espaces entre eux. <br><br><img width="693" height="168" src="https://habrastorage.org/webt/xg/yi/nr/xgyinrhnartyvwhdgqvmucrmx7m.gif"><br><br>  J'ai essay√© les deux options et jusqu'√† pr√©sent, j'observe qu'avec le r√©√©quilibrage local, l'algorithme fonctionne 1,5 √† 2 fois plus rapidement qu'avec une version compl√®te.  Cependant, un r√©√©quilibrage complet peut toujours √™tre utile.  Par exemple, si vous devez effectuer un r√©√©quilibrage local trop souvent, cela signifie que dans le r√©seau dans certaines r√©gions, de nombreux ¬´caillots de sang¬ª se sont accumul√©s, ce qui inhibe l'ensemble du processus.  Un r√©√©quilibrage complet effectu√© une seule fois, vous permet de vous d√©barrasser de toute congestion locale d'un seul coup. <br><br>  Voyons comment r√©√©quilibrer compl√®tement. <br><br>  Vous devez d'abord calculer le nombre maximal de cellules que nous pouvons allouer pour chaque √©l√©ment du tableau auxiliaire.  Il ne faut pas oublier que les cellules vides doivent se trouver √† la fois avant la premi√®re et apr√®s la derni√®re cellule remplie.  La formule est: <br><br><img width="186" height="52" src="https://habrastorage.org/webt/9n/he/da/9nhedamesorkojp6daccahjow2q.png"><br><br>  <i>M - le nombre de cellules pouvant √™tre allou√©es √† chaque √©l√©ment</i> <i><br></i>  <i>NewSize - taille du tableau auxiliaire</i> <i><br></i>  <i>Count - le nombre actuel d'√©l√©ments non vides dans le tableau auxiliaire</i> <br><br>  Cette fraction doit √™tre r√©duite √† une valeur enti√®re (c'est-√†-dire arrondie vers le bas).  Il est √©vident d'apr√®s la formule que plus il y a d'√©l√©ments transf√©r√©s dans le r√©seau auxiliaire, moins nous pouvons s√©lectionner de cellules pour le voisinage de chaque √©l√©ment. <br><br>  Connaissant <b>M</b> , nous obtenons facilement la position exacte de chaque √©l√©ment non vide dans le r√©seau auxiliaire sur lequel il devrait √™tre situ√© une fois le r√©√©quilibrage termin√©. <br><br>  <b>NewPos = Nombre √ó M</b> <br><br>  <i>NewPos - nouvelle position d'article apr√®s r√©√©quilibrage</i> <i><br></i>  <i>Number - quel est l'√©l√©ment non vide dans le tableau auxiliaire <nobr>(1 ‚â§ Number ‚â§ Count)</nobr></i> <i><br></i>  <i>M - le nombre de cellules allou√©es √† chaque √©l√©ment</i> <br><br>  De nouvelles positions sont connues, pouvez-vous simplement trier les √©l√©ments non vides dans le tableau auxiliaire et les transf√©rer vers d'autres endroits?  Oh non, ne vous pr√©cipitez pas.  Il n'est pas seulement n√©cessaire de transf√©rer des √©l√©ments, il est important de maintenir leur ordre.  Et √† la suite de la recherche et de l'insertion binaires, les √©l√©ments peuvent s'av√©rer beaucoup √† gauche et √† droite de la position dans laquelle ils devraient √™tre apr√®s le r√©√©quilibrage.  Et √† l'endroit o√π vous souhaitez vous d√©placer, il peut y avoir un autre √©l√©ment qui doit √©galement √™tre attach√© quelque part.  De plus, vous ne pouvez pas transf√©rer un √©l√©ment s'il y a d'autres √©l√©ments entre ses anciennes et nouvelles positions dans le tableau auxiliaire - sinon les √©l√©ments se m√©langeront, et il est extr√™mement important pour nous de ne pas m√©langer l'ordre. <br><br>  Par cons√©quent, pour r√©√©quilibrer, il ne suffira pas de passer par le cycle habituel et de simplement d√©placer chaque √©l√©ment d'une poche √† l'autre.  Il faut toujours utiliser la r√©cursivit√©.  Si un √©l√©ment ne peut pas √™tre d√©plac√© vers un nouvel endroit (d'autres √©l√©ments sont apparus entre ses anciennes et nouvelles positions), alors vous devez d'abord comprendre (r√©cursivement) ces invit√©s non invit√©s.  Et puis tout sera arrang√© correctement. <br><br><h2>  Cas d√©g√©n√©r√© </h2><br>  Pour la plupart des tri par insertions, un tableau en ordre inverse est la pire situation.  Et le tri d'un biblioth√©caire, h√©las, ne fait pas exception. <br><br><img width="693" height="168" src="https://habrastorage.org/webt/mm/zm/_c/mmzm_cvt2fvcawbrkkswtav0huo.gif"><br><br>  Les √©l√©ments tendent vers le bord gauche du r√©seau auxiliaire, ce qui fait que les espaces vides s'√©puisent rapidement.  Vous devez r√©√©quilibrer le tableau tr√®s souvent. <br><br>  Soit dit en passant, si nous prenons un tableau presque ordonn√© (le meilleur cas pour le tri par de simples insertions), alors nous obtenons le m√™me probl√®me.  Les √©l√©ments nouvellement arriv√©s n'obstrueront pas la gauche, mais le c√¥t√© droit du r√©seau auxiliaire, ce qui entra√Ænera √©galement un r√©√©quilibrage trop fr√©quent. <br><br>  Le tri de biblioth√®que g√®re efficacement les ensembles de donn√©es al√©atoires.  La commande partielle (directe et inverse) nuit aux performances de vitesse. <br><br><h2>  Complexit√© algorithmique </h2><br>  Sur de grands ensembles de donn√©es al√©atoires, l'algorithme donne la complexit√© temporelle O ( <b>n</b> log <b>n</b> ).  Pas mal du tout! <br><br>  Sur des ensembles de donn√©es al√©atoires uniques (ou principalement uniques) avec la s√©lection correcte du coefficient <strong>Œµ</strong> et la mise en ≈ìuvre r√©ussie de la recherche binaire, le nombre de r√©√©quilibres peut √™tre minimis√©, voire √©vit√©.  On peut faire valoir que l'algorithme a la meilleure complexit√© temporelle O ( <b>n</b> ). <br><br>  Un pourcentage important de donn√©es se r√©p√©tant en valeur, ainsi que la pr√©sence dans le tableau de sous-s√©quences ordonn√©es (dans l'ordre direct ou inverse) conduit √† un r√©√©quilibrage fr√©quent du tableau auxiliaire et, par cons√©quent, √† une d√©gradation de la complexit√© temporelle en O <b>(n <sup>2</sup></b> ) dans les cas les plus d√©favorables. <br><br>  Le moins de l'algorithme, bien s√ªr, est que le r√©seau auxiliaire n√©cessite O ( <b>n</b> ) de m√©moire suppl√©mentaire. <br><br><h2>  Possibilit√©s d'am√©lioration </h2><br>  Bien que l'algorithme lui-m√™me soit instructif et efficace sur des donn√©es al√©atoires, en une d√©cennie et demie, peu s'y sont int√©ress√©s. <br><br>  Si vous recherchez sur Google la ¬´tri par biblioth√®que¬ª, vous trouverez un article superficiel sur Wikipedia anglais, le PDF de l‚Äôauteur (dont on comprend peu) et une rare r√©-publication de ces maigres informations.  De plus, il existe une bonne visualisation sur YouTube, o√π les tableaux principal et auxiliaire ont √©t√© initialement combin√©s.  Tous les liens se trouvent √† la fin de l'article. <br><br>  La recherche de ¬´tri de biblioth√®que¬ª est encore plus amusante - dans l'exemple, vous d√©couvrirez les diff√©rents tri inclus dans diff√©rentes biblioth√®ques, cependant, ces algorithmes ne seront pas li√©s au <i>tri de biblioth√®que authentique</i> . <br><br>  Et il y a quelque chose √† am√©liorer: <br><br><ol><li>  S√©lection empirique du coefficient optimal <strong>Œµ</strong> . </li><li>  Modification (en tenant compte des sp√©cificit√©s de l'algorithme g√©n√©ral) de la recherche binaire pour la d√©termination la plus efficace du point d'insertion. </li><li>  Minimiser les co√ªts de r√©√©quilibrage. </li></ol><br>  Si vous polissez ces endroits, alors peut-√™tre que le tri de la biblioth√®que en vitesse est √©gal au tri rapide? <br><br><h2>  Code source </h2><br>  Je n'ai pas r√©ussi √† pr√©parer l'impl√©mentation en Python, il existe une version fonctionnelle en PHP. <br><br><div class="spoiler">  <b class="spoiler_title">Algorithme de base</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LibrarySort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($arr)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> $arr_new;<span class="hljs-comment"><span class="hljs-comment">//  $e = 3;//     $rebalance_local = true;// (true)   (false)  //   $newSize = $e * (count($arr) + 1) - 1; $arr_new = array_fill(0, $newSize, null); //       $arr_new[LibrarySort_Pos(1, 1, $newSize)] = $arr[0]; //    -    //     $start = 0; $finish = $newSize - 1; $i = 1; //      while($i &lt; count($arr)) { //        $pos = LibrarySort_BinarySearch($arr[$i], $start, $finish, $newSize); if($pos === false) {//        //    LibrarySort_Rebalance_Total($i, $newSize); } else {//  ,   ,    if($arr_new[$pos] !== null) {//   if($rebalance_local) {//  (+ ) LibrarySort_Rebalance_Local($arr[$i++], $pos, $newSize); } else {//  LibrarySort_Rebalance_Total($i, $newSize); } } else {//   ,   $arr_new[$pos] = $arr[$i++]; } } } //      $pos = 0; for($i = 0; $i &lt;= $newSize - 1; $i++) { if($arr_new[$i] !== null) $arr[$pos++] = $arr_new[$i]; } return $arr; }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">La nouvelle position de l'√©l√©ment dans le tableau suppl√©mentaire apr√®s un r√©√©quilibrage complet</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// $number-    $count //     //$number -      ( )  //$count -       //$newSize -     //$number &lt;= $count &lt;= count($arr) &lt;= $newSize) function LibrarySort_Pos($number, $count, $newSize) { return $number * floor(($newSize + 1) / ($count + 1)) - 1; }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Recherche binaire du lieu d'insertion dans le tableau auxiliaire</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//       //$search -     ,      //($start, $finish) -   ,     //$newSize -     function LibrarySort_BinarySearch($search, $start, $finish, $newSize) { global $arr_new;//  //      //      ,     //  ,       while($arr_new[$start] === null &amp;&amp; $start &lt; $newSize - 1) { ++$start; } //         , //         if($search == $arr_new[$start]) { return LibrarySort_PosNearby($start, $newSize); //  ,        } elseif($search &lt; $arr_new[$start]) { //      //     if($start &gt; 0) {// $start    $finish = $start; $start = 0; return floor(($start + $finish) / 2); } else {//$start == 0,      return $start;//    ,    } } //      ,     //  ,       while($arr_new[$finish] === null &amp;&amp; $finish &gt; 0) { --$finish; } //         , //         if($search == $arr_new[$finish]) { return LibrarySort_PosNearby($finish, $newSize); //  ,        } elseif($search &gt; $arr_new[$finish]) { //      //     if($finish &lt; $newSize - 1) {// $finish    $start = $finish; $finish = $newSize - 1; return ceil(($start + $finish) / 2); } else {//$finish == $newSize - 1,      return $finish;//    ,    } } //     , //,    -   //   ,       If($finish - $start &gt; 1) {//   ,    3  $middle = ceil(($start + $finish) / 2); //   $middle_Pos = 0; // ""     $offset = 0; //         //,    /,      while($middle - $offset &gt; $start &amp;&amp; $middle_Pos == 0){ if($arr_new[$middle - $offset] !== null) { $middle_Pos = $middle - $offset; } elseif($middle + $offset &lt; $finish &amp;&amp; $arr_new[$middle + $offset] !== null) { $middle_Pos = $middle + $offset; } ++$offset; } //    , ,     , //              If($middle_Pos) { if($arr_new[$middle_Pos] == $search) { return LibrarySort_PosNearby($middle_Pos, $newSize); } else { if($arr_new[$middle_Pos] &gt; $search) { $finish = $middle_Pos; } else {//$arr_new[$middle_Pos] &lt; $search $start = $middle_Pos; } return LibrarySort_BinarySearch($search, $start, $finish, $newSize); } } else {//$middle_Pos == 0 -   (   )     return $middle;//   - ,     } } else {//  ,       return floor(($start + $finish) / 2); } return false;//  ,       }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Si pendant la recherche l'√©l√©ment est √©gal √† l'une des extr√©mit√©s du segment</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    ,        //$start - ,        //$newSize -     function LibrarySort_PosNearby($start, $newSize) { global $arr_new;//  //       for($left = $start - 1; $left &gt;= 0; $left--) { if($arr_new[$left] === null) {//  return $left;//   } elseif($arr_new[$left] &lt;&gt; $arr_new[$start]) {//     break; //   ,      } } //     ,    for($right = $start + 1; $right &lt;= $newSize - 1; $right++) { if($arr_new[$right] === null) {//  return $right; //   } elseif($arr_new[$right] &lt;&gt; $arr_new[$start]) {//     break; //   ,      } } return $start; //          .      ,     }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">R√©√©quilibrage local d'une baie suppl√©mentaire</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    //$insert - ,    //$pos -            //$newSize -     function LibrarySort_Rebalance_Local($insert, $pos, $newSize) { global $arr_new;//  // $pos  $insert,       while($pos - 1 &gt;= 0 &amp;&amp; $arr_new[$pos - 1] !== null &amp;&amp; $arr_new[$pos - 1] &gt; $insert) {--$pos;} while($pos + 1 &lt;= $newSize - 1 &amp;&amp; $arr_new[$pos + 1] !== null &amp;&amp; $arr_new[$pos + 1] &lt; $insert) {++$pos;} $middle = (integer) $newSize / 2;//  if($pos &lt;= $middle) {//      if($arr_new[$pos] !== null &amp;&amp; $arr_new[$pos] &lt; $insert) ++$pos; //  $right = $pos; while($arr_new[++$right] !== null) {} for($i = $right; $i &gt; $pos; $i--) { $arr_new[$i] = $arr_new[$i - 1]; } } else {//      if($arr_new[$pos] !== null &amp;&amp; $insert &lt; $arr_new[$pos]) --$pos; //  $left = $pos; while($arr_new[--$left] !== null) {} for($i = $left; $i &lt; $pos; $i++) { $arr_new[$i] = $arr_new[$i + 1]; } } $arr_new[$pos] = $insert; }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">R√©√©quilibrage complet de la baie suppl√©mentaire</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    //$count -        //$newSize -     function LibrarySort_Rebalance_Total($count, $newSize) { global $arr_new;//  global $library_Number;//     global $library_LeftPos;//        $library_Number = $count; //        $library_LeftPos = $newSize - 1;// ,     //         $i = $newSize - 1; while($i &gt;= 0) { if($arr_new[$i] !== null) {//   $pos = LibrarySort_Pos($library_Number, $count, $newSize);//   newSize=$newSize"); if($i == $pos) {//      --$i;//      } elseif($i &lt; $pos) {//    $arr_new[$pos] = $arr_new[$i]; $arr_new[$i] = null; --$i;//      } else {//$i &gt; $pos -     //      LibrarySort_RemoveLeft($i, $pos, $count, $newSize); $i = ($i &gt; $library_LeftPos) ? $library_LeftPos - 1 : --$i; } --$library_Number;//      } else {// ,   --$i;//      } } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">D√©placement de l'√©l√©ment vers la gauche avec un r√©√©quilibrage complet</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//     . //    ,   //$i -     ,    //$pos -       //$count -        //$newSize -     function LibrarySort_RemoveLeft($i, $pos, $count, $newSize) { global $arr_new;//  global $library_Number;//     global $library_LeftPos;//        $left = false; $left_Pos = false;//      $j = $i;//      //     while($j &gt; 0 &amp;&amp; $left === false) {//            --$j; //     if($arr_new[$j] !== null) $left = $j;//    } if($left === false || $left &lt; $pos) {//   (  )    //     } else { //$left &gt;= $pos,     --$library_Number;//,       $left_Pos = LibrarySort_Pos($library_Number, $count, $newSize);//     //        LibrarySort_RemoveLeft($left, $left_Pos, $count, $newSize); //  ,     } //    ,   $arr_new[$pos] = $arr_new[$i]; $arr_new[$i] = null; //,         if($pos &lt; $library_LeftPos) $library_LeftPos = $pos; }</span></span></code> </pre> </div></div><br>  J'ai d√ª coder moi-m√™me √† partir de z√©ro, sur la base d'une description g√©n√©rale de la m√©thode.  Je n'ai pas vu de vitesse proche du tri rapide; mon option de tri de biblioth√®que trie 10 √† 20 fois plus lentement que le tri rapide.  Mais la raison, bien s√ªr, est que ma mise en ≈ìuvre est trop grossi√®re, beaucoup n'a pas √©t√© prise en compte. <br><br>  J'aimerais voir une version des cr√©ateurs de l'algorithme.  J'√©crirai aujourd'hui aux auteurs (et leur jetterai un lien vers cet habrastatu), ils vont tout √† coup r√©pondre.  Bien que ... je me souviens, j'ai essay√© de contacter Allen Beachich ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tri ABC</a> ) et Jason Morrison ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tri J</a> ), mais le r√©sultat √©tait le m√™me que si j'√©crivais dans Sportloto. <br><br>  <b>UPD</b>  <b>Martin Farah-Colton m'a r√©pondu qu'ils n'avaient jamais fait l'impl√©mentation:</b> <blockquote>  Je crains que nous n'ayons jamais impl√©ment√© ces algorithmes. </blockquote>  <b>L'essentiel est l'id√©e :)</b> <br><br><h2>  Caract√©ristiques de l'algorithme </h2><div class="scrollable-table"><table><tbody><tr><th align="left">  Le titre </th><td align="left" colspan="2">  Tri de biblioth√®que, Tri de biblioth√®que </td></tr><tr><th align="left">  Autre nom </th><td align="left" colspan="2">  Tri par insertion espac√©e </td></tr><tr><th align="left">  Les auteurs </th><td align="left" colspan="2">  Michael A. Bender, Mart√≠n Farach-Colton, Miguel Mosteiro </td></tr><tr><th align="left">  Ann√©e </th><td align="left" colspan="2">  2004 </td></tr><tr><th align="left">  Classe </th><td align="left" colspan="2">  Tri d'insertion </td></tr><tr><th align="left">  Comparaisons </th><td align="left" colspan="2">  Il y a </td></tr><tr><th align="left" rowspan="3">  Complexit√© temporelle </th><th align="left">  le meilleur </th><td align="left">  O ( <b>n</b> ) </td></tr><tr><th align="left">  moyenne </th><td align="left">  O ( <b>n</b> log <b>n</b> ) </td></tr><tr><th align="left">  le pire </th><td align="left">  O ( <b>n <sup>2</sup></b> ) </td></tr><tr><th align="left">  Complexit√© m√©moire suppl√©mentaire </th><td align="left" colspan="2">  O ( <b>n</b> ) </td></tr></tbody></table></div><br><h2>  Les r√©f√©rences </h2><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img width="30" height="30" src="https://habrastorage.org/webt/3y/wq/mh/3ywqmhuo7fv68jggkc416kbzuw4.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Tri de biblioth√®que</a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img width="30" height="30" src="https://habrastorage.org/webt/sb/ln/dw/sblndwenhewoyoas_n3xp7tyuuu.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Visualisation de l'algorithme de tri de biblioth√®que</a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img width="84" height="30" src="https://habrastorage.org/webt/yv/lm/2t/yvlm2t2kl5affkpm0hzqh7qw5ly.png"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Le tri par insertion est O (n log n)</a> <br><br><h3>  Auteurs de l'algorithme: </h3><br><img align="right" width="392" height="120" src="https://habrastorage.org/webt/il/dh/l9/ildhl9tnc4alqaexulf-kw2rmt0.png"><br clear="left"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Michael A. Bender</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Martin Farah-Colton</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Miguel Mostiro</a> </p><br><br><h3>  Articles de s√©rie: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Application Excel AlgoLab.xlsm</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exchange Sorts</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tri d'insertion</a> <ul><li>  <b>Tri biblioth√©caire</b> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tri solitaire</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Trier "Tour de Hanoi"</a> </li><li>  Tri des jeunes tables </li><li>  Inverser le tri </li><li>  Ins√©rer une comparaison de tri </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Trier par s√©lection</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Fusionner les tris</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Trier par distribution</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tri hybride</a> </li></ul><br><br><img align="right" width="364" height="192" src="https://habrastorage.org/webt/9y/1b/d5/9y1bd57yvcw4rt65o3ztjb59xum.png"><br clear="left"><p>  Tri ajout√© √† AlgoLab.  Vous pouvez donc exp√©rimenter avec de petits ensembles de donn√©es. <br><br>  Dans ce cas, vous pouvez d√©cider combien de fois le tableau auxiliaire est plus grand que le tableau principal.  Pour s√©lectionner le coefficient <strong>Œµ,</strong> vous pouvez cliquer avec le bouton droit sur la cellule avec ¬´Tri de biblioth√®que¬ª et s√©lectionner ¬´Modifier la note¬ª.  Et dans la note, d√©finissez soigneusement la valeur enti√®re pour <b>e</b> de 2 √† 5. Si vous entrez autre chose √† la place de ces nombres, la valeur par d√©faut = 2 sera utilis√©e. <br><br>  Vous pouvez √©galement s√©lectionner le type de r√©√©quilibrage.  Si vous d√©finissez local = 1, le r√©√©quilibrage local sera utilis√©.  Si local = 0 - complet. <br><br>  Et n'oubliez pas de d√©finir l'√©chelle optimale pour la feuille de processus avant de commencer la visualisation, sinon la matrice auxiliaire ne rentrera pas sur l'√©cran. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416653/">https://habr.com/ru/post/fr416653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416641/index.html">8 √©tapes du processus de d√©veloppement d'une interface d'application mobile</a></li>
<li><a href="../fr416643/index.html">D√©ploiement d'Elasticsearch sur AWS avec Kubernetes en 10 √©tapes</a></li>
<li><a href="../fr416645/index.html">MIS. Mod√®les de recherche</a></li>
<li><a href="../fr416647/index.html">Les agences gouvernementales r√™vent-elles des risques √©lectriques?</a></li>
<li><a href="../fr416651/index.html">1M HTTP rps sur 1 c≈ìur de processeur. DPDK au lieu de nginx + noyau Linux TCP / IP</a></li>
<li><a href="../fr416657/index.html">Les deux tiers des cartes m√©moire utilis√©es contiennent des donn√©es personnelles d'anciens propri√©taires</a></li>
<li><a href="../fr416659/index.html">En raison de ce que le volume des paiements num√©riques pour l'√©conomie des concerts atteindra 1,2 billion de dollars</a></li>
<li><a href="../fr416661/index.html">Quelles tendances devraient √™tre prises en compte par les utilisateurs et les fournisseurs de services bancaires mobiles</a></li>
<li><a href="../fr416665/index.html">R√©utilisation des biblioth√®ques Android priv√©es avec Sonatype Nexus Repository OSS</a></li>
<li><a href="../fr416667/index.html">Insonoriser la poussi√®re et le bruit de l'ancienne unit√© centrale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>