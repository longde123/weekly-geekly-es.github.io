<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø ü¶è üêö 5 √©tapes simples pour cr√©er un serveur pour tester les demandes Android REST üö∂üèΩ üö• üêè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bon apr√®s-midi 

 Il n'y a pas si longtemps, il √©tait n√©cessaire d'impl√©menter dans une application Android une communication avec l'API du serveur vi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>5 √©tapes simples pour cr√©er un serveur pour tester les demandes Android REST</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420993/"> Bon apr√®s-midi <br><br>  Il n'y a pas si longtemps, il √©tait n√©cessaire d'impl√©menter dans une application Android une communication avec l'API du serveur via <b>des requ√™tes REST</b> .  La mise en ≈ìuvre de la partie logicielle sur Android n'a pas √©t√© difficile, en raison de la pr√©sence d'une biblioth√®que <b>Retrofit</b> pratique et simple.  Cependant, apr√®s avoir √©crit quelques demandes GET / POST dans les API ouvertes existantes (par exemple, Github et d'autres exemples de mise √† niveau standard), il est devenu n√©cessaire de commencer √† tester la logique d'application.  Dans ce cas, bien s√ªr, je voudrais avoir mon propre serveur, qui contient ses mod√®les de donn√©es et a des interconnexions entre les mod√®les, ainsi que diff√©rents niveaux d'acc√®s √† des mod√®les de donn√©es sp√©cifiques.  Dans cet article, je voudrais vous expliquer comment cr√©er un serveur local en quelques petites √©tapes, ajouter les mod√®les n√©cessaires, configurer les relations entre eux et fournir un acc√®s distant √† ce serveur. <br><a name="habracut"></a><br>  Je voudrais imm√©diatement clarifier afin d'√©viter tout malentendu de la part des lecteurs: <br>  Moi, ainsi que ceux √† qui cet article est destin√©, je suis un novice dans la mise en ≈ìuvre de la partie serveur, qui, par hasard, est entr√© dans une situation dans laquelle j'ai √©t√© oblig√© de lever l'api le plus rapidement possible pour moi-m√™me pour tester l'application Android.  Toutes les informations pr√©sent√©es dans l'article peu √† peu peuvent √™tre trouv√©es sur les espaces ouverts de google et youtube et les trouver et les assembler en un seul ensemble ne sera pas difficile si vous savez quoi chercher.  Cependant, cela prend du temps pour prendre des d√©cisions sur la mise en ≈ìuvre technologique, ainsi que pour rechercher des informations pour chaque d√©cision sp√©cifique. <br><br><h2>  1. NodeJS et Loopback </h2><br>  La premi√®re chose que vous devez clarifier imm√©diatement est que le serveur sera impl√©ment√© en utilisant le framework Lodeback Node.js.  Tout d'abord, installez Node.js. lui-m√™me.  La derni√®re version de Node.js est sur le site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">nodejs.org/en/download</a> , t√©l√©chargez-la et installez-la. <br>  Apr√®s cela, ex√©cutez la ligne de commande et entrez la commande suivante et attendez la fin du processus: <br><br><pre><code class="javascript hljs">npm install -g loopback-cli</code> </pre> <br><br><h2>  2. Cr√©ez une application </h2><br>  Pour cr√©er une nouvelle application (votre serveur) pour le cadre <b>Loopback</b> , acc√©dez au r√©pertoire o√π votre serveur sera situ√© sur la ligne de commande, entrez la commande <i>lb</i> et r√©pondez √† un certain nombre de questions sur l'application, notamment: <br><br><ul><li>  nom de l'application <i>(dans mon cas, test_server)</i> </li><li>  nom du r√©pertoire pour le projet <i>(laissez vide, puis un dossier avec le nom du projet sera cr√©√© dans ce r√©pertoire)</i> </li><li>  Version LoopBack <i>(s√©lectionnez la version actuelle)</i> </li><li>  type d'application <i>(officiellement parlant - un mod√®le d'application. Choisissez api-server)</i> </li></ul><br><img src="https://habrastorage.org/webt/co/qy/qr/coqyqr_vgacqvh6nmrinnv4pioa.jpeg"><br><br>  Apr√®s avoir termin√© le processus de cr√©ation de l'application, acc√©dez au dossier cr√©√© avec les fichiers d'application et essayez de l'ex√©cuter avec la commande suivante: <br><br><pre> <code class="javascript hljs">node .</code> </pre> <br>  L'application s'ex√©cute √† l'adresse locale: <i>localhost: 3000 / explorer</i> .  De plus, l'application poss√®de d√©j√† un mod√®le utilisateur et un certain nombre de fonctions REST. <br><br><img src="https://habrastorage.org/webt/-3/au/t8/-3aut8q4xvvg6bqmyahusnbkeae.jpeg"><br><br>  Formellement, votre serveur est pr√™t et traite avec succ√®s les requ√™tes locales.  Vous pouvez v√©rifier la disponibilit√© et le fonctionnement du serveur √† l'aide de l'application <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Postman</a> ou de votre application Android. <br><br><h2>  3. Mod√®les et relations </h2><br>  Ensuite, vous devez cr√©er des mod√®les avec des donn√©es et les relations entre eux.  Prenons un exemple simple de mod√®le et de relations: imaginez que notre application donne un retour sur les films.  Vous entrez le nom du film et vous devriez recevoir toutes les critiques de ce film en particulier.  Ainsi, dans le cas le plus primitif, deux mod√®les doivent √™tre stock√©s dans la base de donn√©es: <b>Movie</b> (a champs: nom, ann√©e) et <b>Review</b> (autor, description).  La relation entre les mod√®les est la suivante, un film peut avoir de nombreuses critiques. <br><br>  Ainsi, une demande REST aux films aura un tel lien <i>localhost: 3000 / api / Movies</i> , et un <i>localhost: 3000 / api / Movies / {id} / Reviews</i> √† la liste des critiques <br><br>  Cr√©ez ces deux mod√®les sur le serveur: <br><br><pre> <code class="javascript hljs">lb model</code> </pre> <br>  Nous r√©pondrons aux questions suivantes sur le mod√®le: <br><br><ul><li>  nom du mod√®le <i>(par exemple, Movie)</i> </li><li>  source de donn√©es pour la connexion <i>(s√©lectionnez db (m√©moire))</i> </li><li>  classe de base du mod√®le <i>(s√©lectionnez PersistedModel)</i> </li><li>  afficher le mod√®le √† l'aide de l'API REST <i>(Oui)</i> </li><li>  forme plurielle personnalis√©e <i>(laisser vide)</i> </li><li>  mod√®le g√©n√©ral ou serveur uniquement <i>(s√©lectionnez commun)</i> </li></ul><br>  Maintenant, le mod√®le est cr√©√© et vous devez lui ajouter des champs (pour Movie, par exemple, le nom et l'ann√©e): <br><br><ul><li>  nom de la propri√©t√© <i>(par exemple nom)</i> </li><li>  type de propri√©t√© <i>(par exemple cha√Æne)</i> </li><li>  est obligatoire <i>(Oui)</i> </li><li>  afficher le mod√®le √† l'aide de l'API REST <i>(Oui)</i> </li><li>  valeur par d√©faut <i>(laisser vide)</i> </li></ul><br><img src="https://habrastorage.org/webt/zj/9o/03/zj9o032h7zssunqjuy6ai4oecdy.jpeg"><br><br>  Apr√®s avoir ajout√© toutes les propri√©t√©s, vu l'offre d'en ajouter une de plus, appuyez simplement sur ¬´Entr√©e¬ª.  Ajoutez √©galement le deuxi√®me mod√®le. <br>  Vous devez maintenant configurer la relation entre eux.  Nous √©crivons une √©quipe et r√©pondons aux questions: <br><br><pre> <code class="javascript hljs">lb relation</code> </pre> <br><ul><li>  s√©lectionner un mod√®le pour cr√©er une relation <i>(par ex. film)</i> </li><li>  type de connexion <i>(choisissez a plusieurs (un √† plusieurs), car un film a de nombreuses critiques)</i> </li><li>  choisissez un mod√®le pour la relation <i>(dans notre cas, Review)</i> </li><li>  nom de la communication <i>(tout, j'√©crirai des critiques)</i> </li><li>  cl√© utilisateur <i>(laisser vide)</i> </li><li>  mod√®le interm√©diaire <i>(Non)</i> </li><li>  Autoriser l'imbrication <i>(non)</i> </li><li>  d√©connecter la communication des objets connect√©s suivants <i>(Non)</i> </li></ul><br><img src="https://habrastorage.org/webt/v8/b8/2b/v8b82b8vx0mdq0zneqddcsj-u2e.jpeg"><br><br>  C‚Äôest tout.  Maintenant, d√©marrez le serveur avec la m√™me commande que pr√©c√©demment et regardez <i>localhost: 3000 / explorer</i> .  Nous voyons que nous avons nos mod√®les et nous pouvons voir la relation entre eux √† travers <b>id</b> . <br><br><img src="https://habrastorage.org/webt/hu/lr/e-/hulre-bxdtc3m2uas8zivlvlk2c.jpeg"><br><br><h2>  4. Acc√®s √† distance au serveur </h2><br>  Maintenant, l'acc√®s au serveur est limit√© au r√©seau domestique, ce qui n'est pas tr√®s pratique lors des tests √† partir du t√©l√©phone.  Essayons de rendre votre serveur distant.  Pour ce faire, t√©l√©chargez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ngrok</a> , d√©ballez-le √† n'importe quel endroit appropri√© et lancez-le.  Ce programme est con√ßu pour cr√©er un tunnel pour votre <i>localhost: 3000</i> , pour cr√©er un acc√®s distant pour lui en utilisant le lien g√©n√©r√©.  Entrez la commande suivante dans ngrok: <br><br><pre> <code class="javascript hljs">npm install ngrok -g ngrok http <span class="hljs-number"><span class="hljs-number">3000</span></span></code> </pre><br><br><img src="https://habrastorage.org/webt/uy/n3/ug/uyn3ugqcpnte1iihykt6mepdnr0.jpeg"><br><br>  Nous voyons que le programme a cr√©√© un tunnel et maintenant votre serveur est disponible sur le lien fourni.  Gardez √† l'esprit que chaque fois que vous red√©marrez le PC, le lien dans ngrok change. <br><br><h2>  Conclusion </h2><br>  Il a √©t√© pr√©sent√© ci-dessus une description assez approximative et s√®che du processus de cr√©ation d'un simple serveur NodeJs pour tester votre application Android.  Naturellement, il existe de nombreuses nuances associ√©es m√™me aux 4 √©tapes que j'ai d√©crites. <br><br>  En plus de ce que j'ai d√©j√† d√©crit, avec une seule commande, vous pouvez changer le niveau d'acc√®s √† l'API et organiser l'authentification des utilisateurs.  Si quelqu'un est int√©ress√© - posez des questions dans les commentaires - je r√©pondrai.  Le cadre lui-m√™me a une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation</a> assez d√©taill√©e, y compris les chapitres de d√©marrage traduits en russe (bien que pour la version 2.0 avec un ensemble de commandes diff√©rent) <br><br>  Oui, c'est primitif, quelque part techniquement stupide, quelque part trop simple, mais pour une personne qui n'est pas impliqu√©e dans les technologies de serveur et qui a besoin d'une solution rapide pour tester ses principales t√¢ches, cette solution est aussi simple et rapide que possible. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420993/">https://habr.com/ru/post/fr420993/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es436926/index.html">H√©roes de la autenticaci√≥n de dos factores, o c√≥mo "caminar en la piel de los dem√°s"</a></li>
<li><a href="../es436928/index.html">WebRTC: a√∫n m√°s f√°cil (EasyRTC)</a></li>
<li><a href="../es436934/index.html">Matem√°ticas ingenuas: el motor de Mendocino y el teorema de Earnshaw</a></li>
<li><a href="../es436936/index.html">Dep√≥sito nuclear japon√©s en Primorye o el sitio de disposici√≥n de los submarinos nucleares de la Flota del Pac√≠fico</a></li>
<li><a href="../es436938/index.html">Guix es el sistema operativo m√°s avanzado.</a></li>
<li><a href="../fr420995/index.html">Nous s√©lectionnons le mot de passe pour le TIN indien en deux secondes, ou pourquoi les math√©matiques de force brute</a></li>
<li><a href="../fr420997/index.html">KDD 2018, Day Four, Nobel Laureate Performs</a></li>
<li><a href="../fr420999/index.html">Kivy. Xamarin React Native. Trois cadres - une exp√©rience (partie 2)</a></li>
<li><a href="../fr421001/index.html">RPC - une occasion d'essayer de nouveaux en C ++ 14/17</a></li>
<li><a href="../fr421005/index.html">Assur√© REST: Conseils utiles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>