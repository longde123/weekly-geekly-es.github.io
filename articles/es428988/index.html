<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§öüèø üå∏ üë©‚Äçüë©‚Äçüëß‚Äçüëß Consejos de la naturaleza: luz nocturna nublada ‚öæÔ∏è üéÖüèº üéß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola comunidad! 

 Presento mi propia implementaci√≥n de una l√°mpara de noche en forma de nube. La idea principal es hacer una luz nocturna con simulac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Consejos de la naturaleza: luz nocturna nublada</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428988/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/66/st/mr66stql1kimlmtxmkt2ycjyfue.jpeg" alt="imagen" width="75%"></div><br><br>  Hola comunidad! <br><br>  Presento mi propia implementaci√≥n de una l√°mpara de noche en forma de nube.  La idea principal es hacer una luz nocturna con simulaciones de procesos naturales y alg√∫n tipo de interactividad.  ¬°La naturaleza es la mejor inspiradora! <br><br>  Basado en el microcontrolador econ√≥mico ATmega8-16PU.  El c√≥digo est√° escrito en C sin Arduino e implementa varios efectos de iluminaci√≥n con control desde la iluminaci√≥n general del espacio y con control de sonido. <br><br>  Detalles y fotos - m√°s ... <br><a name="habracut"></a><br><h3>  Detalles electronicos </h3><br>  El circuito, adem√°s del microcontrolador, tiene 6 LED de un solo color, un LED RGB, un sensor de luz (fotorresistencia) y un micr√≥fono con un amplificador y un filtro de RF. <br><br>  Para cambiar suavemente el brillo de los LED, <abbr title="Modulaci√≥n de ancho de pulso">se</abbr> utiliza <abbr title="Modulaci√≥n de ancho de pulso">PWM</abbr> .  La frecuencia PWM es de 244 Hz a 64 niveles, sucede que algunas personas lo ven.  Es imposible aumentar la frecuencia: a√∫n necesita tiempo de procesador para trabajar.  Por lo tanto, para suavizar los pulsos PWM, se utiliza un circuito repetidor de transistor con un condensador de suavizado.  El transistor se toma con una gran ganancia para aumentar la resistencia de entrada y reducir la capacitancia requerida.  Como resultado, 1 ŒºF result√≥ ser suficiente, los pulsos se suavizan casi por completo.  Los beneficios son m√°s baratos que el DAC y tiene una gran corriente de salida.  La desventaja de este esquema es la dependencia no lineal del brillo en el nivel PWM a niveles bajos (hasta 15%). <br><br><div class="spoiler">  <b class="spoiler_title">Circuito Micro-Cap 9</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/9h/jx/m-/9hjxm-paag2rkjz7osorqlr_8ke.png" alt="imagen"><br>  <i>Esquema de suavizado PWM.</i>  <i>4 diodos aproximadamente = 1 LED blanco seg√∫n la caracter√≠stica I-V</i> <br><br><img src="https://habrastorage.org/webt/af/6f/g4/af6fg4lbpq8fxaenzaepivxw-ps.png" alt="imagen"><br>  <i>Gr√°fico de corriente y voltaje en el LED a 56% PWM.</i> <br></div></div><br>  Un micr√≥fono electret en miniatura a trav√©s de un amplificador en dos transistores con extracci√≥n de pulso (filtro de paso alto) est√° conectado a la entrada discreta del MK, capta con seguridad sonidos agudos: aplausos. <br><br>  Dibuj√≥ y extendi√≥ el tablero en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DipTrace</a> , lo hizo LUT, los detalles son principalmente smd.  El grabado se realiz√≥ en el "asesino de cloruro f√©rrico": per√≥xido de hidr√≥geno + sal + √°cido c√≠trico, result√≥ la primera vez, lo recomiendo.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Todas las formas de aficionado est√°n escritas aqu√≠.</a> <br><br><img src="https://habrastorage.org/webt/6g/m-/05/6gm-05vizzaj1ew1l63b-b6kh5o.jpeg" alt="imagen"><br>  <i>La tarifa realizada por LUT</i> <br><br>  Hice la alimentaci√≥n a trav√©s de un conector USB, que le permite conectarse a cualquier puerto USB.  Consumo m√°ximo 78 mA. <br><br>  En versiones anteriores, el cable ten√≠a un micro bot√≥n para configurar los modos, pero luego se quit√≥, ya que no se pod√≠a alcanzar si la nube estaba debajo del techo. <br><br>  No hay conexi√≥n USB, el MK no tiene USB y parece que no es necesario en el producto terminado.  Para la depuraci√≥n, utilic√© el controlador UART, el c√≥digo implementa un intercambio con una computadora, pero all√≠ est√° cursi <s>escrito en la rodilla</s> . <br><br><img src="https://habrastorage.org/webt/7u/fy/h5/7ufyh5cpydbcvzj50ojtwibyeik.jpeg" width="75%"><br>  <i>En el proceso de soldar</i> <br><br>  LUT, soldar, escribir un programa, pruebas y alteraciones, temporizadores de ajuste y coeficientes tomaron 3 semanas. <br><br><img src="https://habrastorage.org/webt/zk/t8/g9/zkt8g9wjyn7ujuyihfg32mn-bc0.jpeg" alt="imagen"><br>  <i>Vista general</i> <br><br>  Como resultado, se dio cuenta de 3 modos de efectos de brillo e iluminaci√≥n.  Trat√© de hacerlo m√°s interesante que una l√°mpara de lava, pero tampoco me convert√≠ en una m√∫sica disco-color con silbatos. <br><br><h3>  Modos: </h3><br>  <b>La principal</b> es una l√°mpara de noche en forma de nube.  Las diferentes partes de la nube cambian aleatoriamente el brillo, el per√≠odo de cambio tambi√©n es aleatorio (4 ... 25 segundos), el tipo de cambio es un suavizado exponencial de la tarea (puedo decirle m√°s en los comentarios).  Se ve como un todo, con una fracci√≥n de la imaginaci√≥n, como desbordamientos de luz en una nube real cuando cubre el Sol.  El nivel de brillo m√°ximo depende del nivel de iluminaci√≥n seg√∫n el horario.  Recog√≠ diferentes dependencias, hab√≠a una opci√≥n con la elecci√≥n de dependencias en el bot√≥n, pero me decid√≠ por esta sola. <br><br><img src="https://habrastorage.org/webt/hw/hp/xo/hwhpxotfo5gyf9njb_64kkvdtps.png" alt="imagen"><br>  <i>El gr√°fico de la dependencia del brillo de la nube de la iluminaci√≥n externa.</i> <br><br>  Dado que la nube casi no brilla durante la oscuridad externa (noche), y puede ser necesaria una luz brillante a corto plazo (por ejemplo, para levantarse por la noche), para esto se me ocurri√≥ el modo secundario Bright Cloud.  Se enciende con dos aplausos, aqu√≠ y usa un micr√≥fono, ya que los botones generalmente est√°n fuera del alcance.  La nube brilla a pleno brillo durante un minuto, tambi√©n con desbordamiento, luego vuelve suavemente al modo de nube principal de acuerdo con la iluminaci√≥n. <br><br><img src="https://habrastorage.org/webt/cg/ha/dx/cghadxfnhu9zgmk0x-u3rx9xsp8.gif" alt="imagen"><br>  <i>Modo nube, primeras muestras.</i>  <i>Video acelerado 5 veces</i> <br><br>  <b>Tormenta el√©ctrica</b> : se enciende con una fuerte disminuci√≥n de la luz ambiental (pero no hasta la oscuridad completa, para no golpear los ojos en la oscuridad) o tres estallidos.  Los LED aleatorios parpadean (de uno a 4x), con una pausa aleatoria entre flashes.  Me confund√≠ un poco e hice "corridas" de rayos en la nube cuando los LED parpadean a lo largo de la cadena de tiempo.  Tambi√©n se parece bastante a una tormenta el√©ctrica.  Debido al r√©gimen de tormentas el√©ctricas, se tuvo que encontrar un compromiso de filtrado PWM para que los destellos fueran n√≠tidos (77 ms).  La duraci√≥n de la "tormenta el√©ctrica" ‚Äã‚Äãdepende de la luz ambiental: cuanto m√°s oscura, m√°s larga, de 4 a 12 destellos. <br><br>  <b>Amanecer</b> : se enciende con un fuerte aumento de la luz ambiental.  El modo m√°s dif√≠cil de configurar, obtener "un cambio natural en los colores del sol al amanecer en una ligera neblina" no fue f√°cil.  Era necesario equilibrar el LED RGB manualmente en casi todos los niveles de PWM y seleccionar dependencias.  Pero al final, recib√≠ una f√≥rmula de interpolaci√≥n m√°s o menos.  El amanecer dura 40 segundos, luego cambia al modo normal. <br><br><img src="https://habrastorage.org/webt/c_/fl/6b/c_fl6baslbfbbxsagw5bpnou39c.jpeg" alt="imagen" width="75%"><br>  <i>Amanecer</i> <br><br>  Electr√≥nica y software para los interesados: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Archivo con fuente</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Esquema en pdf</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dise√±o de tablero, un lado</a> <br><br><h3>  Constructivo </h3><br>  El dise√±o de la nube es bastante simple, estoy hecho de sintepuha (una almohada de 40x40 cm), el tablero se encuentra dentro de las suspensiones de hilos.  Los LED est√°n dispuestos de la manera m√°s uniforme posible en volumen, bueno, el LED RGB est√° en la parte inferior y el fotosensor en la parte superior. <br><br><img src="https://habrastorage.org/webt/n8/yf/qm/n8yfqmg3dbmhm9oqpelqvnt4xxa.jpeg" width="75%"><br>  <i>En el proceso de fuzzing</i> <br><br>  Hubo dificultades en la fijaci√≥n del sintetizador, ya que est√° recubierto con silicona para evitar el apelmazamiento.  La parte inferior de la nube est√° soportada por tiras estrechas de cinta en el marco de alambre. <br><br>  Preguntas, comentarios, sugerencias escriben en los comentarios. <br><br>  ¬°Que tengas un buen clima! <br><br><img src="https://habrastorage.org/webt/k2/jp/ia/k2jpiamrczanxcsod6-l-rh-nmi.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es428988/">https://habr.com/ru/post/es428988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es428976/index.html">Hormiguero o fortaleza? Estoy construyendo una casa por el precio de un apartamento. Parte 2: calentamiento</a></li>
<li><a href="../es428980/index.html">JavaScript Offline Broker</a></li>
<li><a href="../es428982/index.html">C√≥mo escribir D en ARM</a></li>
<li><a href="../es428984/index.html">Julia y retratos de fase de sistemas din√°micos</a></li>
<li><a href="../es428986/index.html">Conferencia ThinkJava # 8 en Jarkov</a></li>
<li><a href="../es428990/index.html">Ejemplos de configuraci√≥n de UIViewControllers que utilizan RouteComposer</a></li>
<li><a href="../es428992/index.html">Bypass selectivo de bloqueos en enrutadores con firmware Padavan y Keenetic OS</a></li>
<li><a href="../es428994/index.html">Redes en Android usando Corutin y Retrofit</a></li>
<li><a href="../es428996/index.html">Club de An√≥nimos Pap√° Noel 2018-2019 en Habrahabr</a></li>
<li><a href="../es428998/index.html">C√≥mo usar la nueva funci√≥n experimental Profiler en React</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>