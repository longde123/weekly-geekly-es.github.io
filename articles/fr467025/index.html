<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëä ü§¥üèª üëåüèΩ √Ä propos du mod√®le de r√©seau dans les jeux pour d√©butants üì§ üë©üèæ‚Äçü§ù‚Äçüë©üèΩ üåÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depuis deux semaines, je travaille sur un moteur r√©seau pour mon jeu. Avant cela, je ne connaissais rien aux technologies r√©seau dans les jeux, j'ai d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Ä propos du mod√®le de r√©seau dans les jeux pour d√©butants</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467025/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/69e/de3/6bb/69ede36bb7e48411280ffad409751c0d.png" alt="image"></div><br>  Depuis deux semaines, je travaille sur un moteur r√©seau pour mon jeu.  Avant cela, je ne connaissais rien aux technologies r√©seau dans les jeux, j'ai donc lu de nombreux articles et men√© de nombreuses exp√©riences pour comprendre tous les concepts et pouvoir √©crire mon propre moteur r√©seau. <br><br>  Dans ce guide, je voudrais partager avec vous divers concepts que vous devez apprendre avant d'√©crire votre propre moteur de jeu, ainsi que les meilleures ressources et articles pour les apprendre. <br><br>  En g√©n√©ral, il existe deux principaux types d'architectures de r√©seau: peer-to-peer et client-serveur.  Dans l'architecture peer-to-peer (p2p), les donn√©es sont transf√©r√©es entre n'importe quelle paire de joueurs connect√©s, et dans l'architecture client-serveur, les donn√©es sont transmises uniquement entre les joueurs et le serveur. <br><br>  Bien que l'architecture peer-to-peer soit encore utilis√©e dans certains jeux, la norme est client-serveur: elle est plus facile √† impl√©menter, n√©cessite une largeur de canal plus petite et facilite la protection contre la triche.  Par cons√©quent, dans ce guide, nous nous concentrerons sur l'architecture client-serveur. <br><a name="habracut"></a><br>  En particulier, nous nous int√©ressons surtout aux serveurs autoritaires: dans de tels syst√®mes, le serveur a toujours raison.  Par exemple, si un joueur pense qu'il est en coordonn√©es (10, 5) et que le serveur lui dit qu'il est en (5, 3), alors le client doit remplacer sa position par celle transmise par le serveur, et non l'inverse.  L'utilisation de serveurs autoritaires facilite la reconnaissance des tricheurs. <br><br>  Les syst√®mes de r√©seaux de jeux comportent trois composants principaux: <br><br><ul><li>  Protocole de transport: comment les donn√©es sont transf√©r√©es entre les clients et le serveur. </li><li>  Protocole d'application: ce qui est transf√©r√© des clients au serveur et du serveur aux clients et dans quel format. </li><li>  Logique d'application: comment les donn√©es transmises sont utilis√©es pour mettre √† jour l'√©tat des clients et du serveur. </li></ul><br>  Il est tr√®s important de comprendre le r√¥le de chaque pi√®ce et les difficult√©s qui y sont associ√©es. <br><br><h1>  Protocole de transport </h1><br>  La premi√®re √©tape consiste √† choisir un protocole de transport de donn√©es entre le serveur et les clients.  Il existe deux protocoles Internet pour cela: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TCP</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UDP</a> .  Mais vous pouvez cr√©er votre propre protocole de transport bas√© sur l'un d'eux ou utiliser la biblioth√®que dans laquelle ils sont utilis√©s. <br><br><h2>  Comparaison de TCP et UDP </h2><br>  TCP et UDP sont tous deux bas√©s sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IP</a> .  IP vous permet de transf√©rer un paquet de la source au destinataire, mais ne garantit pas que le paquet envoy√© atteindra t√¥t ou tard le destinataire, qu'il l'atteindra au moins une fois et que la s√©quence de paquets arrivera dans le bon ordre.  De plus, un paquet ne peut contenir qu'une taille de donn√©es limit√©e sp√©cifi√©e par la valeur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MTU</a> . <br><br>  UDP n'est qu'une fine couche sur IP.  Par cons√©quent, il a les m√™mes limitations.  En revanche, TCP poss√®de de nombreuses fonctionnalit√©s.  Il fournit une connexion ordonn√©e fiable entre deux n≈ìuds avec v√©rification des erreurs.  Par cons√©quent, TCP est tr√®s pratique et est utilis√© dans de nombreux autres protocoles, par exemple en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HTTP</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FTP</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SMTP</a> .  Mais toutes ces fonctionnalit√©s ont un prix: le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>retard</em></a> . <br><br>  Pour comprendre pourquoi ces fonctions peuvent provoquer un retard, vous devez comprendre le fonctionnement de TCP.  Lorsque le n≈ìud √©metteur transmet le paquet au n≈ìud r√©cepteur, il s'attend √† recevoir un accus√© de r√©ception (ACK).  Si apr√®s un certain temps, il ne le re√ßoit pas (parce que le paquet ou la confirmation a √©t√© perdu, ou pour d'autres raisons), il renvoie le paquet.  De plus, TCP garantit que les paquets sont re√ßus dans le bon ordre. Par cons√©quent, jusqu'√† ce qu'un paquet perdu soit re√ßu, tous les autres paquets ne peuvent pas √™tre trait√©s, m√™me s'ils ont d√©j√† √©t√© re√ßus par le n≈ìud r√©cepteur. <br><br>  Mais comme vous le savez probablement, le retard dans les jeux multijoueurs est tr√®s important, en particulier dans des genres actifs tels que FPS.  C'est pourquoi de nombreux jeux utilisent UDP avec leur propre protocole. <br><br>  Un protocole natif bas√© sur UDP peut √™tre plus efficace que TCP pour diverses raisons.  Par exemple, il peut marquer certains packages comme approuv√©s et d'autres comme non approuv√©s.  Par cons√©quent, il ne se soucie pas si le paquet non approuv√© a atteint le r√©cepteur.  Ou il peut traiter plusieurs flux de donn√©es afin qu'un paquet perdu dans un flux ne ralentisse pas les flux restants.  Par exemple, il peut y avoir un flux pour l'entr√©e du lecteur et un autre flux pour les messages de discussion.  Si un message de chat qui n'est pas des donn√©es urgentes est perdu, cela ne ralentira pas l'entr√©e, qui est urgente.  Ou, un protocole propri√©taire peut impl√©menter la fiabilit√© diff√©remment de TCP afin d'√™tre plus efficace dans les jeux vid√©o. <br><br>  Donc, si TCP est tellement nul, alors nous allons cr√©er notre propre protocole de transport bas√© sur UDP? <br><br>  Tout est un peu plus compliqu√©.  M√™me si TCP est presque sous-optimal pour les syst√®mes de jeu en r√©seau, il peut tr√®s bien fonctionner dans votre jeu et vous faire gagner un temps pr√©cieux.  Par exemple, le retard peut ne pas √™tre un probl√®me pour un jeu au tour par tour ou un jeu qui ne peut √™tre jou√© que sur des r√©seaux locaux, o√π il y a beaucoup moins de retards et de pertes de paquets que sur Internet. <br><br>  De nombreux jeux √† succ√®s, notamment World of Warcraft, Minecraft et Terraria, utilisent TCP.  Cependant, la plupart des FPS utilisent des protocoles propri√©taires bas√©s sur UDP, nous en parlerons donc ci-dessous. <br><br>  Si vous d√©cidez d'utiliser TCP, assurez-vous que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'algorithme Nagle est</a> d√©sactiv√©, car il met en m√©moire tampon les paquets avant l'envoi, ce qui signifie qu'il augmente le d√©lai. <br><br>  Pour en savoir plus sur les diff√©rences entre UDP et TCP dans le contexte des jeux multijoueurs, vous pouvez lire l'article de Glenn Fiedler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823015049/"><em>UDP vs.</em></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823015049/"><em>TCP</em></a> <br><br><h2>  Protocole propre </h2><br>  Vous souhaitez donc cr√©er votre propre protocole de transport, mais vous ne savez pas par o√π commencer?  Vous avez de la chance, car Glenn Fiedler a √©crit deux articles incroyables √† ce sujet.  Vous y trouverez de nombreuses pens√©es intelligentes. <br><br>  Le premier article, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823012240/"><em>Networking for Game Programmers</em></a> 2008, est plus simple que le second, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823014904/"><em>Building A Game Network Protocol</em></a> 2016.  Je vous recommande de commencer avec un ancien. <br><br>  Gardez √† l'esprit que Glenn Fiedler est un grand partisan de l'utilisation de son propre protocole UDP.  Et apr√®s avoir lu ses articles, vous allez s√ªrement vous remettre de son opinion que TCP a de s√©rieux inconv√©nients dans les jeux vid√©o, et vous voulez mettre en ≈ìuvre votre propre protocole. <br><br>  Mais si vous d√©butez en r√©seau, faites-vous plaisir et utilisez TCP ou une biblioth√®que.  Pour r√©ussir √† impl√©menter votre propre protocole de transport, vous devez d'abord en apprendre beaucoup. <br><br><h2>  Biblioth√®ques r√©seau </h2><br>  Si vous avez besoin de quelque chose de plus efficace que TCP, mais que vous ne voulez pas vous soucier de mettre en ≈ìuvre votre propre protocole et entrer dans de nombreux d√©tails, vous pouvez utiliser la biblioth√®que r√©seau.  Il y en a beaucoup: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">yojimbo</a> Glenn Fiedler </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RakNet</a> , qui n'est plus pris en charge, mais sa fourchette de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SLikeNet</a> semble √™tre toujours active. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ENet</a> est une biblioth√®que cr√©√©e pour le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cube</a> FPS multi-utilisateurs </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GameNetworkingSockets de Valve</a> </li></ul><br>  Je ne les ai pas tous essay√©s, mais je pr√©f√®re ENet, car il est facile √† utiliser et fiable.  De plus, elle dispose d'une documentation claire et d'un tutoriel pour les d√©butants. <br><br><h2>  Protocole de transport: conclusion </h2><br>  Pour r√©sumer: il existe deux protocoles de transport principaux: TCP et UDP.  TCP a de nombreuses fonctionnalit√©s utiles: fiabilit√©, commande de paquets, d√©tection d'erreurs.  UDP n'a pas tout cela, mais TCP, par sa nature, a augment√© les retards qui sont inacceptables pour certains jeux.  Autrement dit, pour garantir de faibles latences, vous pouvez cr√©er votre propre protocole bas√© sur UDP ou utiliser une biblioth√®que qui impl√©mente le protocole de transport UDP et est adapt√©e aux jeux vid√©o multi-joueurs. <br><br>  Le choix entre TCP, UDP et la biblioth√®que d√©pend de plusieurs facteurs.  Tout d'abord, par rapport aux besoins du jeu: a-t-il besoin de faibles latences?  Deuxi√®mement, √† partir des exigences du protocole d'application: a-t-il besoin d'un protocole fiable?  Comme nous le verrons dans la partie suivante, vous pouvez cr√©er un protocole d'application pour lequel un protocole peu fiable est tout √† fait appropri√©.  Enfin, vous devez √©galement prendre en compte l'exp√©rience du d√©veloppeur du moteur r√©seau. <br><br>  J'ai deux conseils: <br><br><ul><li>  Maximisez le protocole de transport √† partir du reste de l'application afin qu'il puisse √™tre facilement remplac√© sans r√©√©crire tout le code. </li><li>  Ne faites pas d'optimisation pr√©matur√©e.  Si vous n'√™tes pas un sp√©cialiste du r√©seau et ne savez pas si vous avez besoin de votre propre protocole de transport bas√© sur UDP, vous pouvez commencer avec TCP ou une biblioth√®que qui fournit la fiabilit√©, puis tester et mesurer les performances.  Si vous avez des probl√®mes et que vous √™tes s√ªr que la raison r√©side dans le protocole de transport, le moment est peut-√™tre venu de cr√©er votre propre protocole de transport. </li></ul><br>  √Ä la fin de cette partie, je vous recommande de lire l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20190519135537/"><em>introduction de</em></a> Brian Hook <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20190519135537/"><em>√† la programmation de jeux multijoueurs</em></a> , qui couvre de nombreux sujets abord√©s ici. <br><br><h1>  Protocole d'application </h1><br>  Maintenant que nous pouvons √©changer des donn√©es entre les clients et le serveur, nous devons d√©cider quelles donn√©es transf√©rer et dans quel format. <br><br>  Le sch√©ma classique est que les clients envoient des entr√©es ou des actions au serveur et que le serveur envoie l'√©tat actuel du jeu aux clients. <br><br>  Le serveur n'envoie pas un √©tat complet mais filtr√© avec des entit√©s situ√©es √† c√¥t√© du lecteur.  Il le fait pour trois raisons.  Premi√®rement, l'√©tat global peut √™tre trop grand pour une transmission √† haute fr√©quence.  Deuxi√®mement, les clients sont principalement int√©ress√©s par les donn√©es visuelles et audio, car la majeure partie de la logique du jeu est simul√©e sur le serveur de jeu.  Troisi√®mement, dans certains jeux, le joueur n'a pas besoin de conna√Ætre certaines donn√©es, par exemple la position de l'adversaire √† l'autre bout de la carte, car sinon il peut renifler des paquets et savoir exactement o√π se d√©placer pour le tuer. <br><br><h2>  S√©rialisation </h2><br>  La premi√®re √©tape consiste √† convertir les donn√©es que nous voulons envoyer (√©tat d'entr√©e ou de jeu) dans un format adapt√© √† la transmission.  Ce processus est appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>s√©rialisation</em></a> . <br><br>  L'id√©e vient imm√©diatement √† l'esprit d'utiliser un format lisible par l'homme, tel que JSON ou XML.  Mais il sera totalement inefficace et occupera en vain l'essentiel du canal. <br><br>  Au lieu de cela, il est recommand√© d'utiliser un format binaire beaucoup plus compact.  Autrement dit, les paquets ne contiendront que quelques octets.  Ici, vous devez consid√©rer le probl√®me <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>de l'ordre des octets</em></a> , qui peut diff√©rer sur diff√©rents ordinateurs. <br><br>  Vous pouvez utiliser une biblioth√®que pour s√©rialiser des donn√©es, par exemple: <br><br><ul><li>  Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FlatBuffers</a> </li><li>  Sandstorm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cap'n Proto</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">c√©r√©ales par</a> Shane Grant et Randolph Voorhees </li></ul><br>  Assurez-vous simplement que la biblioth√®que cr√©e des archives portables et prend en charge l'ordre des octets. <br><br>  Une solution ind√©pendante peut √™tre une impl√©mentation ind√©pendante, ce n'est pas particuli√®rement compliqu√©, surtout si vous utilisez une approche orient√©e donn√©es dans le code.  De plus, il vous permettra d'effectuer des optimisations qui ne sont pas toujours possibles lors de l'utilisation de la biblioth√®que. <br><br>  Glenn Fiedler a √©crit deux articles sur la s√©rialisation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823004533/"><em>lecture et √©criture de paquets</em></a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823015044/"><em>strat√©gies de s√©rialisation</em></a> . <br><br><h2>  La compression </h2><br>  La quantit√© de donn√©es transf√©r√©es entre les clients et le serveur est limit√©e par la bande passante du canal.  La compression des donn√©es vous permet de transf√©rer plus de donn√©es dans chaque instantan√©, d'augmenter le taux de rafra√Æchissement ou simplement de r√©duire les exigences de canal. <br><br><h3>  Emballage de bits </h3><br>  La premi√®re technique est le compactage des bits.  Elle consiste √† utiliser exactement le nombre de bits n√©cessaire pour d√©crire la valeur souhait√©e.  Par exemple, si vous avez une √©num√©ration qui peut avoir 16 valeurs diff√©rentes, alors au lieu d'un octet entier (8 bits), vous ne pouvez utiliser que 4 bits. <br><br>  Glenn Fiedler explique comment impl√©menter cela dans la deuxi√®me partie de l'article sur les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823004533/"><em>paquets de lecture et d'√©criture</em></a> . <br><br>  L'emballage de bits fonctionne particuli√®rement bien avec l'√©chantillonnage, qui sera le sujet de la section suivante. <br><br><h3>  Discr√©tisation </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>La discr√©tisation</em></a> est une technique de compression avec perte qui n'utilise qu'un sous-ensemble des valeurs possibles pour coder une valeur.  La fa√ßon la plus simple de mettre en ≈ìuvre la discr√©tisation consiste √† arrondir les nombres √† virgule flottante. <br><br>  Glenn Fiedler (encore!) Montre comment appliquer l'√©chantillonnage dans la pratique dans son article sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823021121/">compression d'instantan√©</a> . <br><br><h3>  Algorithmes de compression </h3><br>  La prochaine technique sera les algorithmes de compression sans perte. <br><br>  Voici, √† mon avis, les trois algorithmes les plus int√©ressants que vous devez conna√Ætre: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Codage Huffman</a> avec du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">code</a> pr√©-calcul√© extr√™mement rapide et pouvant donner de bons r√©sultats.  Il a √©t√© utilis√© pour compresser les paquets dans le moteur r√©seau Quake3. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">zlib</a> est un algorithme de compression √† usage g√©n√©ral qui n'augmente jamais la quantit√© de donn√©es.  Comme on peut le voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , il a √©t√© utilis√© dans de nombreuses applications.  Il peut √™tre redondant de mettre √† jour les √©tats.  Mais cela peut √™tre utile si vous devez envoyer des actifs, des textes longs ou des secours aux clients √† partir du serveur. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La copie de longueurs de s√©ries</a> est probablement l'algorithme de compression le plus simple, mais il est tr√®s efficace pour certains types de donn√©es et peut √™tre utilis√© comme √©tape de pr√©traitement avant zlib.  Il est particuli√®rement adapt√© √† la compression de terrains constitu√©s de tuiles ou de voxels, dans lesquels de nombreux √©l√©ments voisins se r√©p√®tent. </li></ul><br><h3>  Compression delta </h3><br>  La derni√®re technique de compression est la compression delta.  Elle r√©side dans le fait que seules les diff√©rences entre l'√©tat actuel du jeu et le dernier √©tat re√ßu par le client sont transmises. <br><br>  Il a d'abord √©t√© utilis√© dans le moteur de r√©seau Quake3.  Voici deux articles expliquant comment l'utiliser: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20190628180906/"><em>Le mod√®le de mise en r√©seau Quake3 par</em></a> Brian Hook </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>Examen du code source de Quake 3: mod√®le de r√©seau</em></a> Fabien Sanglar [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">traduction de l'</a> article sur Habr√©, voir la section "Mod√®le de r√©seau"] </li></ul><br>  Glenn Fiedler l'a √©galement utilis√© dans la deuxi√®me partie de son article sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823021121/"><em>compression d'images</em></a> . <br><br><h2>  Cryptage </h2><br>  En outre, vous devrez peut-√™tre crypter le transfert d'informations entre les clients et le serveur.  Il y a plusieurs raisons √† cela: <br><br><ul><li>  confidentialit√© / confidentialit√©: les messages ne peuvent √™tre lus que par le destinataire, et aucune autre personne reniflant le r√©seau ne peut les lire. </li><li>  authentification: une personne qui veut jouer le r√¥le d'un joueur doit conna√Ætre sa cl√©. </li><li>  pr√©vention de la triche: il sera beaucoup plus difficile pour les joueurs malveillants de cr√©er leurs propres paquets de triche, ils devront reproduire le sch√©ma de cryptage et trouver la cl√© (qui change √† chaque connexion). </li></ul><br>  Je recommande fortement d'utiliser la biblioth√®que pour cela.  Je sugg√®re d'utiliser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">libsodium</a> car il est particuli√®rement simple et propose d'excellents tutoriels.  Le didacticiel d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©change de cl√©s</a> est particuli√®rement int√©ressant. Il vous permet de g√©n√©rer de nouvelles cl√©s √† chaque nouvelle connexion. <br><br><h2>  Protocole d'application: conclusion </h2><br>  Nous terminerons avec le protocole d'application.  Je pense que la compression est compl√®tement facultative et la d√©cision de l'utiliser ne d√©pend que du jeu et de la bande passante requise.  Le cryptage, √† mon avis, est obligatoire, mais dans le premier prototype, vous pouvez vous en passer. <br><br><h1>  Logique d'application </h1><br>  Nous pouvons maintenant mettre √† jour l'√©tat du client, mais nous pouvons rencontrer des probl√®mes de retard.  Une fois entr√©, le joueur doit attendre la mise √† jour de l'√©tat du jeu depuis le serveur pour voir quel impact il a eu sur le monde. <br><br>  De plus, entre deux mises √† jour d'√©tat, le monde est compl√®tement statique.  Si le taux de rafra√Æchissement des √©tats est faible, les mouvements seront tr√®s saccad√©s. <br><br>  Il existe plusieurs techniques pour r√©duire l'impact de ce probl√®me, et dans la section suivante, j'en parlerai. <br><br><h2>  Techniques de lissage diff√©r√© </h2><br>  Toutes les techniques d√©crites dans cette section sont discut√©es en d√©tail dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>s√©rie multijoueur √† rythme rapide de</em></a> Gabriel Gambetta.  Je recommande fortement de lire cette grande s√©rie d'articles.  Il dispose √©galement d'une d√©monstration interactive qui vous permet de voir comment ces techniques fonctionnent dans la pratique. <br><br>  La premi√®re technique consiste √† appliquer directement l'entr√©e, sans attendre de r√©ponse du serveur.  C'est ce qu'on appelle la <em>pr√©diction c√¥t√© client</em> .  Cependant, lorsque le client re√ßoit la mise √† jour du serveur, il doit s'assurer que sa pr√©vision √©tait correcte.  Si ce n'est pas le cas, il lui suffit de changer son √©tat en fonction de celui re√ßu du serveur, car le serveur est autoritaire.  Cette technique a √©t√© utilis√©e pour la premi√®re fois √† Quake.  Vous pouvez en savoir plus √† ce sujet dans l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em>Revue du code Quake Engine par</em></a> Fabien Sanglar. <br><br>  Le deuxi√®me ensemble de techniques est utilis√© pour faciliter le mouvement d'autres entit√©s entre deux mises √† jour d'√©tat.  Il existe deux fa√ßons de r√©soudre ce probl√®me: l'interpolation et l'extrapolation.  En cas d'interpolation, les deux derniers √©tats sont pris et la transition de l'un √† l'autre est affich√©e.  Son inconv√©nient est qu'il cause une petite fraction du retard, car le client voit toujours ce qui s'est pass√© dans le pass√©.  L'extrapolation pr√©dit o√π les entit√©s devraient d√©sormais √™tre bas√©es sur le dernier √©tat re√ßu par le client.  Son inconv√©nient est que si l'entit√© change compl√®tement la direction du mouvement, alors il y aura une grande erreur entre la pr√©vision et la position r√©elle. <br><br>  La derni√®re technique, la plus avanc√©e, utile uniquement en FPS est la <em>compensation de d√©calage</em> .  Lors de l'utilisation de la compensation de d√©calage, le serveur prend en compte les retards du client lorsqu'il tire sur une cible.  Par exemple, si un joueur a effectu√© un tir √† la t√™te sur son √©cran, mais en r√©alit√© son objectif √©tait situ√© ailleurs en raison du retard, il serait alors malhonn√™te de refuser au joueur le droit de tuer en raison du retard.  Par cons√©quent, le serveur rembobine le temps jusqu'au moment o√π le joueur a tir√© pour simuler ce que le joueur a vu sur son √©cran et v√©rifier la collision entre son tir et la cible. <br><br>  Glenn Fiedler (comme toujours!) A √©crit un article de 2004 dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823005028/"><em>Network Physics (2004)</em></a> , qui a jet√© les bases de la synchronisation des simulations physiques entre un serveur et un client.  En 2014, il a √©crit une nouvelle s√©rie d'articles sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823004853/"><em>physique</em></a> des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823004853/"><em>r√©seaux</em></a> qui d√©crivaient d'autres techniques de synchronisation des simulations physiques. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a √©galement deux articles sur le wiki Valve, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Source Multiplayer Networking</font></font></em></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Latency Compensating Methods in Client / Server In-game Protocol Design and Optimization</font></font></em></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui traitent de la compensation des retards.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pr√©vention de la triche </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe deux techniques principales pour √©viter la tricherie. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premi√®rement: compliquer l'envoi de colis malveillants par des tricheurs. </font><font style="vertical-align: inherit;">Comme indiqu√© ci-dessus, le cryptage est un bon moyen de le mettre en ≈ìuvre. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deuxi√®mement: un serveur autoritaire ne devrait recevoir que des commandes / entr√©es / actions. </font><font style="vertical-align: inherit;">Le client ne doit pas pouvoir modifier l'√©tat sur le serveur, sauf en envoyant des entr√©es. </font><font style="vertical-align: inherit;">Ensuite, chaque fois que l'entr√©e est re√ßue, le serveur doit en v√©rifier la validit√© avant de l'appliquer.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Logique d'application: conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je vous recommande d'impl√©menter une m√©thode de simulation de retards importants et de faibles taux de rafra√Æchissement afin de pouvoir tester le comportement de votre jeu dans de mauvaises conditions, m√™me lorsque le client et le serveur fonctionnent sur le m√™me ordinateur. </font><font style="vertical-align: inherit;">Cela simplifiera consid√©rablement la mise en ≈ìuvre des techniques de lissage des retards.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Autres ressources utiles </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Si vous souhaitez explorer d'autres ressources sur les mod√®les de r√©seau, vous pouvez les trouver ici: </font></font><br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20190328001900/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le blog de Glenn Fiedler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - il vaut la peine de lire l'int√©gralit√© de son blog, il contient de nombreux excellents articles. </font><font style="vertical-align: inherit;">Tous les articles sur les technologies r√©seau </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823014743/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sont</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> collect√©s </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20180823014743/"><font style="vertical-align: inherit;">ici</font></a><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Awesome Game Networking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par M. Fatih MAR est une liste d√©taill√©e d'articles et de vid√©os sur les moteurs de r√©seaux de jeux vid√©o.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wiki r / gamedev subreddit contient</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©galement de nombreux liens utiles.</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467025/">https://habr.com/ru/post/fr467025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467015/index.html">JWT: attaque de signature num√©rique contre attaque MAC</a></li>
<li><a href="../fr467017/index.html">Qu'est-ce que HED / MRSD et √† quoi sert-il?</a></li>
<li><a href="../fr467019/index.html">Conception de tableaux de bord pour un site de commerce √©lectronique d'analyse Web. Partie 3: Cha√Æne SEO</a></li>
<li><a href="../fr467021/index.html">Comment le robot Conscience communique avec les clients</a></li>
<li><a href="../fr467023/index.html">Nous avons cr√©√© un plugin dans Grafana pour surveiller les k8: d√©j√† dans la boutique officielle Grafana</a></li>
<li><a href="../fr467029/index.html">Grigory Petrov: travailler avec un r√©seau √† Ruby</a></li>
<li><a href="../fr467033/index.html">Une s√©lection de papiers techniques sympas du Chaos Communication Camp 2019</a></li>
<li><a href="../fr467035/index.html">Conception de tableaux de bord pour un site de commerce √©lectronique d'analyse Web. Partie 4: Cha√Æne Youtube</a></li>
<li><a href="../fr467037/index.html">Affacturage: comment obtenir de l'argent pour des chaises</a></li>
<li><a href="../fr467039/index.html">Comment effectuer une r√©vision du code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>