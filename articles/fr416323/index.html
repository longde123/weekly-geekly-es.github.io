<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçç üïó üèõÔ∏è La possibilit√© d'acc√©der de mani√®re al√©atoire aux param√®tres et enregistrements du registraire automobile depuis n'importe o√π sur Internet üîÅ ‚õàÔ∏è ‚úä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les DVR de voiture sont depuis longtemps l'un des attributs obligatoires de tout automobiliste. Personnellement, je peux conclure sans exag√©ration que...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La possibilit√© d'acc√©der de mani√®re al√©atoire aux param√®tres et enregistrements du registraire automobile depuis n'importe o√π sur Internet</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416323/">  Les DVR de voiture sont depuis longtemps l'un des attributs obligatoires de tout automobiliste.  Personnellement, je peux conclure sans exag√©ration que je ne peux pas me sentir en s√©curit√© au volant sans un gadget aussi simple.  Bien s√ªr, au cours des 10 derni√®res ann√©es, les progr√®s ont fait des progr√®s significatifs: aujourd'hui, il y a d√©j√† beaucoup de fabricants sur le march√© qui produisent des mod√®les d√©cents, et nous, les pilotes, avons d√©j√† l'embarras du choix. <br><br>  Mon choix s'est port√© sur le registraire Neoline G-Tech X53, et il y avait plusieurs raisons √† cela: <br><br><ul><li>  il est √©quip√© de deux cam√©ras, dont l'une donne une vraie image FullHD, </li><li>  Il est con√ßu sp√©cifiquement pour une installation secr√®te, </li><li>  il est enti√®rement contr√¥l√© via WiFi via l'application sur le smartphone, ce qui est important dans le cadre de cet article, et entre autres, il permet une installation vraiment secr√®te sans avoir besoin de grimper ou de supprimer p√©riodiquement le bloc (par exemple, pour copier un enregistrement √† partir d'une cl√© USB). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h8/33/zt/h833ztw2p-hqt3krlhf7jnhekac.png"></div><br>  Puis, comme cela arrive souvent, l'app√©tit est venu en mangeant.  Apr√®s avoir install√© l'enregistreur dans la voiture, j'ai appr√©ci√© sa commodit√©, j'ai go√ªt√© et je voulais avoir acc√®s √† ses enregistrements non seulement pr√®s de la machine, o√π son signal WiFi est capt√©, mais <b>g√©n√©ralement partout</b> .  Eh bien, ou du moins √† la maison, pour commencer. <br><br>  Bien s√ªr, dans la nature, il existe des mod√®les de registraire qui fusionnent les enregistrements dans le cloud sur commande, mais ils lient l'utilisateur √† ce cloud et le forcent √† payer, mais ce n'est pas mon option.  De plus, ma liste de souhaits se chevauchait bien avec les plans d'installer un routeur WiFi avec un modem dans la voiture, donc la t√¢che semblait tout √† fait faisable. <br><a name="habracut"></a><br>  Certes, il est rapidement devenu clair que le registraire ne poss√®de pas d'API document√©e et que l'acc√®s √† celle-ci ne peut √™tre obtenu qu'en utilisant l'application native pour smartphone.  √Ä son tour, l'application s'est av√©r√©e tr√®s fantaisiste - elle ne fonctionne que lorsque le t√©l√©phone est connect√© au registraire WiFi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mr/yt/_3/mryt_3qkaoesppgkbdgl3ts8m88.png"></div><br>  Autrement dit, je devais comprendre ce que l'application veut du WiFi, et lui faire ¬´voir¬ª le registraire, situ√© dans un endroit compl√®tement diff√©rent, avec la solution √† tous les probl√®mes techniques connexes - en g√©n√©ral, c'est comme √ßa que je l'aime. <br><br>  En tant que routeur qui distribue Internet via WiFi dans la voiture, j'ai utilis√© Mikrotik RBmAP2nD (mAP) avec un modem Huawei e3372h (si vous connaissez d'autres options budg√©taires sur lesquelles vous pouvez impl√©menter les configurations d√©crites ci-dessous - √©crivez dans les commentaires).  √âtant donn√© que le registraire ne peut distribuer que son WiFi et ne peut pas se connecter √† un AP existant, j'ai d√ª configurer l'AP-Client, qui devrait s'y connecter.  Et puis il est rapidement devenu clair que le travail de Mikrotik en tant qu'AP et AP-Client (sur l'interface esclave) conduit √† une distribution instable du WiFi, il a donc √©t√© d√©cid√© de coupler avec le routeur principal un autre - Mikrotik RBmAPL-2nD (mAP lite). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/ol/xj/3wolxjn7mc3dbuxbnpnwrqf73zi.jpeg"></div><br><h3>  Application de triche </h3><br>  Pour commencer, j'ai fait travailler l'application avec le registraire via un r√©seau WiFi compl√®tement diff√©rent fonctionnant sur la m√™me machine.  En cours de route, j'ai r√©ussi √† r√©pondre √† des questions - comment l'application identifie le r√©seau du registraire et comment le tromper.  De plus, en cours de route, il a √©t√© possible d'atteindre un confort encore plus grand - maintenant, pour travailler avec le registraire dans la voiture, vous n'avez pas besoin de passer √† son WiFi, sur lequel il n'y a pas Internet. <br><br>  Je ne d√©crirai pas en d√©tail des dizaines d'exp√©riences au cours desquelles je suis arriv√© √† une solution de travail, je viens de d√©crire cette solution.  Donc, ce qui est n√©cessaire pour que l'application reconnaisse le registraire WiFi: <br><br><ol><li>  Le SSID devrait ressembler √† " <i>G-Tech X5X-120 ...</i> ", o√π au lieu des derniers points, il y a des chiffres arbitraires (petites lettres) dans le syst√®me de nombres hexad√©cimal.  Par exemple, j'ai install√© " <i>G-Tech X5X-120aaa</i> " et ainsi de suite.  Peut-√™tre qu'au lieu de ¬´120¬ª vous pouvez aussi mettre quelque chose de vous-m√™me, je ne l'ai pas essay√©. </li><li>  L'adresse client doit √™tre obtenue via DHCP, doit √™tre dans le sous-r√©seau 192.168.100.0/24, l'adresse du serveur (registraire) = 192.168.100.1. </li></ol><br>  Le reste n'est pas important.  Je n'ai pas essay√© beaucoup d'autres choses, mais je suis s√ªr que: <br><br><ol><li>  L'adresse MAC de l'AP et du serveur n'a pas d'importance. </li><li>  S'il existe des sections avec un MTU r√©duit (par exemple, des tunnels) le long de la route de trafic, la connexion fonctionne correctement. </li><li>  La fen√™tre TCP est suffisamment large pour que le t√©l√©chargement des enregistrements ne ralentisse pas aux pings, m√™me √† 300 ms et plus. </li></ol><br>  Alors, quel est le r√©sultat? <br><br><ul><li>  L'application souhaite avoir une adresse sur le r√©seau 192.168.100.0/24 et se connecter √† l'adresse 192.168.100.1. </li><li>  L'adresse du registraire est √©galement 192.168.100.1 et il souhaite que le client soit sur le r√©seau 192.168.100.0/24 (il n'a tout simplement pas de routes vers les autres). </li></ul><br>  Cela ne doit pas changer, mais nous voulons apprendre √† distribuer l'application et le registraire.  Vous devez donc attribuer l'adresse 192.168.100.1 au routeur qui distribue le WiFi, et pour r√©soudre les probl√®mes de routage du trafic, vous devez entrer un sous-r√©seau de connexion et ajouter un peu de magie r√©seau.  Par exemple, comme ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-4/tn/z4/-4tnz4vvp_c9z71-t13dh357x9s.png"></div><br>  Description: <br><br><ul><li>  L'application s'ex√©cute sur un smartphone connect√© au routeur R1.  Le smartphone re√ßoit l'adresse via DHCP, dans notre exemple c'est 192.168.100.100. </li><li>  L'adresse IP de R1 sur l'interface WiFi est 192.168.100.1 (comme l'application le souhaite), sur l'interface Ethernet c'est 192.168.99.1 (c'est un sous-r√©seau d'accueil). </li><li>  L'adresse IP R2 sur l'interface Ethernet est 192.168.99.2, sur l'interface WiFi, elle est obtenue via DHCP aupr√®s du registraire, dans notre exemple, elle est 192.168.100.150. </li><li>  Chaque routeur ex√©cute DNAT √† l'entr√©e et SNAT √† la sortie, de sorte que les paquets sur chaque sous-r√©seau ont des adresses source et de destination qui correspondent aux adresses des routeurs p√©riph√©riques de ce r√©seau. </li></ul><br>  Comment est la connexion: <br><br><ol><li>  L'application s'assure qu'elle est connect√©e au WiFi du bureau d'enregistrement et √©tablit une connexion avec l'adresse 192.168.100.1, en supposant qu'il s'agit de l'adresse du bureau d'enregistrement. </li><li>  R1 accepte la demande de connexion, s'ex√©cutant sur l'interface DNAT entrante avec la substitution de l'adresse de destination √† 192.168.99.2, et sur l'interface sortante - SNAT avec la substitution de l'adresse source √† 192.168.99.1. </li><li>  R2 accepte la demande de connexion, s'ex√©cutant sur l'interface DNAT entrante avec la substitution de l'adresse de destination √† 192.168.100.1, et sur l'interface sortante - mascarade avec la substitution de l'adresse source √† l'adresse re√ßue via DHCP du registraire. </li><li>  Le bureau d'enregistrement accepte et traite la demande de connexion provenant de l'adresse qu'il a pr√©c√©demment √©mise via DHCP.  Ce qui √©tait n√©cessaire. </li></ol><br>  Un lecteur r√©fl√©chi a d√©j√† une question: pour quel type de trafic dois-je rediriger?  En commen√ßant par ¬´tout le trafic sauf ssh¬ª et en activant la journalisation, j'ai r√©alis√© qu'il <b>suffisait de rediriger les ports TCP 7777, 7778 et 7779</b> .  L'application n'a besoin de rien d'autre pour fonctionner avec le registraire. <br><br><h3>  Nous transmettons le trafic via Internet </h3><br>  Apprenant √† tromper l'application, j'ai supprim√© l'obstacle le plus difficile √† l'objectif principal - organiser l'acc√®s aux enregistrements de n'importe o√π sur Internet.  Mais pour que l'application s'ex√©cutant sur le t√©l√©phone √† ce ¬´tout moment¬ª puisse se connecter au bureau d'enregistrement, pour ¬´tromper¬ª, il est n√©cessaire de remplir toutes les conditions ci-dessus, et cela impose certaines restrictions.  Cependant, √† une seule adresse, les enregistrements sont n√©cessaires surtout souvent - ils sont √† la maison.  Ici, nous commen√ßons avec un routeur domestique. <br><br>  Chez moi, comme vous l'avez probablement d√©j√† devin√©, j'ai aussi Mikrotik.  Le routeur externe a une adresse IP ¬´blanche¬ª, et je l'ai utilis√©e pour cr√©er un tunnel L2TP entre les routeurs automobile et domestique et organiser un autre sous-r√©seau d'accueil entre eux.  Un autre routeur a √©t√© ajout√© au circuit que j'ai d√©crit ci-dessus, et maintenant il semble simplifi√© comme ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ji/mu/zb/jimuzbzw8kdjeetkljvp3aqt-bu.png"></div><br>  Description: <br><br><ul><li>  L'application s'ex√©cute sur un smartphone connect√© au routeur domestique R0.  Le smartphone re√ßoit l'adresse via DHCP, dans notre exemple c'est 192.168.100.100. </li><li>  L'adresse IP de R0 sur l'interface WiFi est 192.168.100.1 (comme l'application le souhaite), sur l'interface L2TP, elle est 192.168.98.1 (sous-r√©seau d'accueil 0). </li><li>  L'adresse IP R1 sur l'interface L2TP est 192.168.98.2, sur l'interface Ethernet c'est 192.168.99.1 (sous-r√©seau de connexion 1). </li><li>  L'adresse IP R2 sur l'interface Ethernet est 192.168.99.2, sur l'interface WiFi, elle est obtenue via DHCP aupr√®s du registraire, dans notre exemple, elle est 192.168.100.150. </li><li>  Chaque routeur ex√©cute DNAT √† l'entr√©e et SNAT √† la sortie, de sorte que les paquets sur chaque sous-r√©seau ont des adresses source et de destination qui correspondent aux adresses des routeurs p√©riph√©riques de ce r√©seau. </li></ul><br>  Comment est la connexion: <br><br><ol><li>  L'application s'assure qu'elle est connect√©e au WiFi du bureau d'enregistrement et √©tablit une connexion avec l'adresse 192.168.100.1, en supposant qu'il s'agit de l'adresse du bureau d'enregistrement. </li><li>  R0 accepte la demande de connexion, s'ex√©cutant sur l'interface DNAT entrante avec la substitution de l'adresse de destination √† 192.168.98.2, et sur l'interface sortante - SNAT avec la substitution de l'adresse source √† 192.168.98.1. </li><li>  R1 accepte la demande de connexion, s'ex√©cutant sur l'interface DNAT entrante avec la substitution de l'adresse de destination √† 192.168.99.2, et sur l'interface sortante - SNAT avec la substitution de l'adresse source √† 192.168.99.1. </li><li>  R2 accepte la demande de connexion, s'ex√©cutant sur l'interface DNAT entrante avec la substitution de l'adresse de destination √† 192.168.100.1, et sur l'interface sortante - mascarade avec la substitution de l'adresse source √† l'adresse re√ßue via DHCP du registraire. </li><li>  Le bureau d'enregistrement accepte et traite la demande de connexion provenant de l'adresse qu'il a pr√©c√©demment √©mise via DHCP.  Ce qui √©tait n√©cessaire. </li></ol><br><div class="spoiler">  <b class="spoiler_title">PS.</b> <div class="spoiler_text">  Avec le point 2, vous pouvez faire un peu plus facilement si vous effectuez DNAT imm√©diatement sur le 99e, plut√¥t que sur le 98e sous-r√©seau, et ajoutez la route au 99e sous-r√©seau via R1.  Mais je viens de d√©crire l'id√©e g√©n√©rale et un exemple de sa mise en ≈ìuvre, et il existe de nombreuses fa√ßons d'int√©grer tout cela dans un r√©seau existant. <br></div></div><br><h3>  D'o√π trouvons-nous la nourriture? </h3><br>  Les routeurs et un modem consomment un peu, mais suffisamment pour d√©charger la batterie de la voiture √† z√©ro en 3-4 jours.  Par cons√©quent, il est pr√©f√©rable de les inclure sur demande.  Et pour entrer dans le concept d '¬´acc√®s √† tout moment¬ª, j'ai profit√© du fait que l'alarme Starline A96 install√©e dans ma voiture dispose, entre autres, d'un module GSM, programm√© l'inclusion d'un canal suppl√©mentaire sur commande depuis une t√©l√©commande ou une application smartphone et aliment√© le routeur mAP √† partir d'un canal suppl√©mentaire, et mAP lite - via PoE √† partir du premier.  Je ne parlerai pas de cela en d√©tail ici, tout cela est facilement google, mais si vous √™tes int√©ress√©, √©crivez dans les commentaires. <br><br><h3>  R√©sum√© </h3><br>  Apr√®s avoir fait tout cela, j'ai eu l'occasion non seulement de copier les enregistrements de l'enregistreur en √©tant assis √† la maison, mais aussi de regarder des photos de cam√©ras en temps r√©el.  Et tout cela, peu importe o√π se trouve la voiture, l'essentiel est que son routeur dispose d'une connexion Internet.  N'est-ce pas parfait? <br><br>  Et avec un bonus agr√©able, j'ai obtenu une vitesse de copie des vid√©os plus √©lev√©e que d'√™tre assis dans la voiture: 1,2-1,5 mb / s contre 1 mb / s.  Je ne sais pas pourquoi. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yi/ro/js/yirojsw0zniqglhireevkolxiuk.png"></div><br><h3>  Y aura-t-il des configurations? </h3><br>  Honn√™tement, je ne pense pas que quiconque pense √† faire exactement ce qui est d√©crit.  Dans tous les cas, il y aura une certaine adaptation de la solution √† ce qui est d√©j√† disponible.  Mais si vous en avez vraiment besoin - vous trouverez ci-dessous les r√®gles nat, sur lesquelles 99% de tout ce qui a √©t√© discut√© ci-dessus est impl√©ment√©. <br><br><div class="spoiler">  <b class="spoiler_title">R0</b> <div class="spoiler_text"><pre><code class="hljs sql">/ip firewall nat add action=src-nat chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> src-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.98</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R1</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=masquerade chain=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether2 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=l2tp-<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=dst-nat <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">R2</b> <div class="spoiler_text"><pre> <code class="hljs sql">/ip firewall nat add action=dst-nat chain=dstnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR dst-address=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> dst-port=<span class="hljs-number"><span class="hljs-number">7777</span></span>,<span class="hljs-number"><span class="hljs-number">7778</span></span>,<span class="hljs-number"><span class="hljs-number">7779</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=ether1 protocol=tcp <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-addresses=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">action</span></span>=masquerade <span class="hljs-keyword"><span class="hljs-keyword">chain</span></span>=srcnat <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span>=AVR <span class="hljs-keyword"><span class="hljs-keyword">out</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>=wlan1</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr416323/">https://habr.com/ru/post/fr416323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr416309/index.html">Comment utiliser les fichiers HDF5 en Python</a></li>
<li><a href="../fr416313/index.html">Liste de contr√¥le d'analyse du journal des √©v√©nements de s√©curit√©</a></li>
<li><a href="../fr416315/index.html">Rasoir ASP.NET: r√©solution de certains probl√®mes d'architecture pour le mod√®le d'affichage</a></li>
<li><a href="../fr416319/index.html">Contexte: listes blanches IMEI et Rossvyaz</a></li>
<li><a href="../fr416321/index.html">Comment devenir conf√©rencier de conf√©rences informatiques internationales</a></li>
<li><a href="../fr416327/index.html">Le nouveau standard 802.11ax (High Efficiency WLAN), quoi de neuf et quand l'attendre?</a></li>
<li><a href="../fr416329/index.html">Le retour de la station interplan√©taire sovi√©tique. Pr√©vision pr√©liminaire</a></li>
<li><a href="../fr416331/index.html">L'histoire de la refactorisation de l'application Citimobil</a></li>
<li><a href="../fr416333/index.html">Nouvelle vague: pourquoi le refroidissement par eau gagne en popularit√©</a></li>
<li><a href="../fr416335/index.html">Une petite revue de QCon 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>