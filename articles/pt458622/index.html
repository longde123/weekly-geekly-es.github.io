<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ñ∂Ô∏è ‚èèÔ∏è üíå Automa√ß√£o para os mais pequenos. Parte um (que √© depois de zero). Virtualiza√ß√£o de rede ‚úãüèæ üíè ü§Ωüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na vers√£o anterior, descrevi a estrutura de automa√ß√£o de rede. De acordo com an√°lises de algumas pessoas, mesmo essa primeira abordagem do problema j√°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automa√ß√£o para os mais pequenos. Parte um (que √© depois de zero). Virtualiza√ß√£o de rede</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458622/">  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vers√£o anterior,</a> descrevi a estrutura de automa√ß√£o de rede.  De acordo com an√°lises de algumas pessoas, mesmo essa primeira abordagem do problema j√° colocou algumas perguntas nas prateleiras.  E isso me deixa muito feliz, porque nosso objetivo no ciclo n√£o √© cobrir o ansible com scripts Python, mas criar um sistema. <br><br>  A mesma estrutura define a ordem pela qual lidaremos com a quest√£o. <br>  E a virtualiza√ß√£o de rede, √† qual esse problema √© dedicado, n√£o se encaixa realmente no tema ADSM, onde analisamos a automa√ß√£o. <br><br>  Mas vamos olhar de um √¢ngulo diferente. <br><br>  J√° h√° muito tempo, muitos servi√ßos usam uma rede.  No caso de uma operadora, s√£o 2G, 3G, LTE, banda larga e B2B, por exemplo.  No caso do DC: conectividade para diferentes clientes, a Internet, armazenamento em bloco, armazenamento de objetos. <br><br>  E todos os servi√ßos exigem isolamento um do outro.  Ent√£o apareceu redes de sobreposi√ß√£o. <br><br>  E todos os servi√ßos n√£o querem esperar que uma pessoa os configure manualmente.  Ent√£o apareceram orquestradores e SDN. <br><br>  A primeira abordagem para a automa√ß√£o sistem√°tica da rede, ou melhor, partes dela, j√° foi adotada h√° muito tempo e implementada em muitos lugares: VMWare, OpenStack, Google Compute Cloud, AWS, Facebook. <br><br>  Aqui lidamos com ele hoje. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/b14/278/742/b142787424b1da02432df0291faaca95.jpg" width="800"></a> <br><a name="habracut"></a><br><h1>  Conte√∫do </h1><br><ul><li>  <b>Raz√µes</b> </li><li>  <b>Terminologia</b> </li><li>  <b>Underlay - Rede f√≠sica</b> </li><li>  <b>Sobreposi√ß√£o - rede virtual</b> <br><br><ul><li>  Sobreposi√ß√£o com ToR </li><li>  Sobreposi√ß√£o do host </li><li>  Estudo de caso de tecido de tungst√™nio <br><br><ul><li>  Comunica√ß√£o dentro de uma m√°quina f√≠sica </li><li>  Comunica√ß√£o entre VMs localizadas em diferentes m√°quinas f√≠sicas </li><li>  Sair para o mundo exterior </li></ul><br></li></ul><br></li><li>  <b>Perguntas frequentes</b> </li><li>  <b>Conclus√£o</b> </li><li>  <b>Links √∫teis</b> </li></ul><br><hr><br><br><h1>  Raz√µes </h1><br>  E como falamos sobre isso, vale a pena mencionar os pr√©-requisitos para virtualiza√ß√£o de rede.  De fato, esse processo n√£o come√ßou ontem. <br><br>  Voc√™ provavelmente j√° ouviu mais de uma vez que a rede sempre foi a parte mais inerte de qualquer sistema.  E isso √© verdade em todos os sentidos.  Uma rede √© a base sobre a qual tudo se baseia, e √© muito dif√≠cil fazer altera√ß√µes - os servi√ßos n√£o toleram quando a rede se encontra.  Freq√ºentemente, a desativa√ß√£o de um √∫nico n√≥ pode adicionar a maioria dos aplicativos e afetar muitos clientes.  √â em parte por isso que a equipe de rede pode resistir a qualquer mudan√ßa - porque agora de alguma forma funciona ( <i>talvez nem saibamos como</i> ), mas aqui precisamos configurar algo novo e n√£o se sabe como isso afetar√° a rede. <br><br>  Para n√£o esperar que os provedores de rede passem pelas VLANs e n√£o registrem nenhum servi√ßo em cada n√≥ da rede, as pessoas decidiram usar sobreposi√ß√µes - redes sobrepostas - das quais h√° uma grande variedade: GRE, IPinIP, MPLS, MPLS L2 / L3VPN, VXLAN, GENEVE, MPLSoverUDP, MPLSoverGRE etc. <br><br>  Seu apelo est√° em duas coisas simples: <br><br><ul><li>  Somente n√≥s finais est√£o configurados - voc√™ n√£o precisa tocar em n√≥s de tr√¢nsito.  Isso acelera significativamente o processo e, √†s vezes, at√© permite excluir o departamento de infraestrutura de rede do processo de introdu√ß√£o de novos servi√ßos. </li><li>  A carga est√° oculta no interior dos cabe√ßalhos - os n√≥s de tr√¢nsito n√£o precisam saber nada sobre isso, sobre endere√ßamento em hosts, rotas da rede imposta.  E isso significa que voc√™ precisa armazenar menos informa√ß√µes nas tabelas, portanto, adote um dispositivo mais simples / mais barato. </li></ul><br>  Nesta quest√£o n√£o totalmente desenvolvida, n√£o pretendo analisar todas as tecnologias poss√≠veis, mas descrever a estrutura para a opera√ß√£o de redes de sobreposi√ß√£o em controladores de dom√≠nio. <br><br>  A s√©rie inteira descrever√° um data center, consistindo em linhas de racks semelhantes nos quais o mesmo equipamento de servidor est√° instalado. <br><br>  Este equipamento executa m√°quinas virtuais / cont√™ineres / sem servidor que implementam servi√ßos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f03/525/54b/f0352554b58d82955bd7c08f3034cd4f.jpg" width="600" title="Dataline nord dc"><br><br><hr><br><br><h1>  Terminologia </h1><br>  No loop, chamarei o <b>servidor de um</b> programa que implementa o lado do servidor da comunica√ß√£o cliente-servidor. <br><br>  M√°quinas f√≠sicas em racks <b>n√£o</b> ser√£o chamadas de servidores. <br><br>  <b>A m√°quina f√≠sica</b> √© um computador montado em rack x86.  Na maioria das vezes, usamos o termo <b>host</b> .  Ent√£o, chamaremos de " <b>m√°quina</b> " ou <b>host</b> . <br><br>  <b>Um hypervisor</b> √© um aplicativo em execu√ß√£o em uma m√°quina f√≠sica que emula os recursos f√≠sicos nos quais as M√°quinas Virtuais s√£o executadas.  √Äs vezes, na literatura e na rede, a palavra "hypervisor" √© usada como sin√¥nimo de "host". <br><br>  <b>Uma m√°quina virtual</b> √© um sistema operacional em execu√ß√£o em uma m√°quina f√≠sica sobre um hipervisor.  Para n√≥s, dentro da estrutura deste ciclo, n√£o √© t√£o importante se √© realmente uma m√°quina virtual ou apenas um cont√™iner.  Vamos cham√°-lo de " <b>VM</b> " <br><br>  <b>Inquilino</b> √© um conceito amplo que definirei neste artigo como um servi√ßo separado ou um cliente separado. <br><br>  <b>Multiloca√ß√£o</b> ou multiloca√ß√£o - o uso do mesmo aplicativo por diferentes clientes / servi√ßos.  Ao mesmo tempo, o isolamento dos clientes √© alcan√ßado devido √† arquitetura do aplicativo e n√£o √†s inst√¢ncias em execu√ß√£o separadamente. <br><br>  <b>ToR - Switch superior do rack</b> - um switch montado em rack ao qual todas as m√°quinas f√≠sicas est√£o conectadas. <br><blockquote>  Al√©m da topologia de ToR, diferentes provedores praticam End of Row (EoR) ou Middle of Row (embora este √∫ltimo seja uma raridade desprez√≠vel e eu n√£o tenha visto as abreviaturas MoR). <br></blockquote>  <b>Rede</b> subjacente ou <b>rede</b> subjacente ou subjacente - infraestrutura de rede f√≠sica: comutadores, roteadores, cabos. <br><br>  <b>Sobrepor rede</b> ou sobrepor rede ou sobrepor - uma rede virtual de t√∫neis que √© executada em cima de uma rede f√≠sica. <br><br>  <b>A f√°brica L3 ou IP</b> √© uma tremenda inven√ß√£o da humanidade, que permite entrevistas para n√£o repetir STP e n√£o aprender TRILL.  Um conceito em que toda a rede at√© o n√≠vel de acesso √© exclusivamente L3, sem VLANs e dom√≠nios de transmiss√£o estendidos correspondentemente enormes.  De onde vem a palavra "f√°brica" ‚Äã‚Äãna pr√≥xima parte. <br><br>  <b>SDN</b> - Rede definida por software.  Dificilmente precisa de uma introdu√ß√£o.  Uma abordagem ao gerenciamento de rede quando altera√ß√µes na rede n√£o s√£o executadas por uma pessoa, mas por um programa.  Geralmente significa mover o plano de controle al√©m dos dispositivos de rede finais para o controlador. <br><br>  <b>NFV</b> - Virtualiza√ß√£o de Fun√ß√µes de Rede - virtualiza√ß√£o de dispositivos de rede, que pressup√µe que parte das fun√ß√µes de rede possa ser lan√ßada na forma de m√°quinas virtuais ou cont√™ineres para acelerar a implementa√ß√£o de novos servi√ßos, organizar o Encadeamento de Servi√ßos e escalabilidade horizontal mais simples. <br><br>  <b>VNF</b> - Fun√ß√£o de Rede Virtual.  Dispositivo virtual espec√≠fico: roteador, switch, firewall, NAT, IPS / IDS, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca9/501/33c/ca950133ca98bd1e2ca613342432c535.png" width="700"><br><blockquote>  Agora estou deliberadamente simplificando a descri√ß√£o para uma implementa√ß√£o espec√≠fica para n√£o confundir muito o leitor.  Para uma leitura mais criteriosa, envie-a para a se√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Links</a> .  Al√©m disso, Roma Gorge, que critica este artigo por imprecis√µes, promete escrever um problema separado sobre as tecnologias de virtualiza√ß√£o de servidor e rede, mais profundas e mais atentas aos detalhes. </blockquote><br><hr><br>  Hoje, a maioria das redes pode ser claramente dividida em duas partes: <br><br>  <b>Underlay</b> - uma rede f√≠sica com uma configura√ß√£o est√°vel. <br>  <b>Overlay</b> - Abstra√ß√£o sobre Underlay para isolar inquilinos. <br><br>  Isso √© verdade tanto para o caso do DC (que analisaremos neste artigo) quanto para o ISP (que n√£o analisaremos, porque j√° estava no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SDSM</a> ).  Com as redes empresariais, √© claro, a situa√ß√£o √© um pouco diferente. <br><br>  Imagem de foco da rede: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/133/b41/5f8/133b415f8b32264e2fa877f4a4139267.png" width="800"><br><br><hr><br><br><h1>  Underlay </h1><br>  Underlay √© uma rede f√≠sica: comutadores e cabos de hardware.  Os dispositivos na base sabem como chegar √†s m√°quinas f√≠sicas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/117/d04/880/117d04880232fa2c00ef303cf5f059a0.png" width="800"><br><br>  Ele se baseia em protocolos e tecnologias padr√£o.  Al√©m disso, como os dispositivos de hardware ainda funcionam em software propriet√°rio que n√£o permite a programa√ß√£o de chips ou a implementa√ß√£o de seus protocolos, respectivamente, s√£o necess√°rias compatibilidade com outros fornecedores e padroniza√ß√£o. <br><blockquote>  Mas algu√©m como o Google pode se dar ao luxo de desenvolver seus pr√≥prios switches e abandonar os protocolos geralmente aceitos.  Mas LAN_DC n√£o √© o Google. <br></blockquote>  O underlay √© alterado raramente, porque sua tarefa √© a conectividade IP b√°sica entre m√°quinas f√≠sicas.  O Underlay n√£o sabe nada sobre servi√ßos em execu√ß√£o, clientes, inquilinos - ele s√≥ precisa entregar um pacote de uma m√°quina para outra. <br>  Underlay pode ser assim: <br><br><ul><li>  IPv4 + OSPF </li><li>  IPv6 + ISIS + BGP + L3VPN </li><li>  L2 + TRILL </li><li>  L2 + STP </li></ul><br>  A rede Underlay √© configurada da maneira cl√°ssica: CLI / GUI / NETCONF. <br><br>  Manualmente, scripts, utilit√°rios propriet√°rios. <br><br>  Em mais detalhes, o pr√≥ximo artigo da s√©rie ser√° dedicado √† base. <br><br><hr><br><h1>  Sobreposi√ß√£o </h1><br>  Overlay - uma rede de t√∫nel virtual estendida sobre o Underlay, permite que as VMs de um cliente se comuniquem, proporcionando isolamento de outros clientes. <br><br>  Os dados do cliente s√£o encapsulados em qualquer cabe√ßalho de encapsulamento para transmiss√£o em uma rede compartilhada. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c1/3ed/8d2/9c13ed8d2e6cec8f1b9fe500660f1c47.png" width="800"><br><br>  Portanto, as VMs de um cliente (um servi√ßo) podem se comunicar atrav√©s da Overlay, sem nem mesmo saber o que o pacote realmente faz. <br><br>  A sobreposi√ß√£o pode ser, por exemplo, a mesma que mencionei acima: <br><br><ul><li>  T√∫nel GRE </li><li>  VXLAN </li><li>  EVPN </li><li>  L3VPN </li><li>  GENEVE </li></ul><br>  Uma rede de sobreposi√ß√£o geralmente √© configurada e mantida atrav√©s de um controlador central.  A partir dele, a configura√ß√£o, o Plano de controle e o Plano de dados s√£o entregues aos dispositivos que direcionam e encapsulam o tr√°fego do cliente.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Abaixo</a> , analisaremos isso com exemplos. <br><br>  <b>Sim, isso √© puro SDN.</b> <br><br>  Existem duas abordagens fundamentalmente diferentes para organizar uma rede Overlay: <br><br><ol><li>  Sobreposi√ß√£o com ToR </li><li>  Sobreposi√ß√£o do host </li></ol><br><br><h2>  Sobreposi√ß√£o com ToR </h2><br>  A sobreposi√ß√£o pode come√ßar em um ToR (switch de acesso montado em rack), como √© o caso, por exemplo, no caso de uma f√°brica de VXLAN. <br><br>  Este √© um mecanismo testado pelo tempo nas redes ISP e todos os fornecedores de equipamentos de rede o suportam. <br><br>  No entanto, nesse caso, o switch ToR deve poder compartilhar servi√ßos diferentes, respectivamente, e o administrador da rede deve, em certa medida, cooperar com os administradores de m√°quinas virtuais e fazer altera√ß√µes (ainda que automaticamente) na configura√ß√£o do dispositivo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e3/0a1/87d/5e30a187dd5796e2a4232cb4e9db0b97.png" width="600"><br><br>  Aqui, remeterei o leitor para um artigo sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VxLAN no hub do</a> nosso velho amigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@bormoglotx</a> . <br>  Nesta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">apresenta√ß√£o com a ENOG</a> , abordagens para a constru√ß√£o de uma rede DC com uma f√°brica EVPN VXLAN s√£o descritas em detalhes. <br><br>  E para uma imers√£o mais completa nas realidades, voc√™ pode ler o livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um tecido moderno, aberto e escal√°vel: VXLAN EVPN</a> . <br><blockquote>  Observo que o VXLAN √© apenas um m√©todo de encapsulamento e a termina√ß√£o do t√∫nel pode ocorrer n√£o no ToR, mas no host, como √© o caso do OpenStack, por exemplo. <br><br>  No entanto, a f√°brica da VXLAN onde a sobreposi√ß√£o come√ßa no ToR √© um dos projetos de rede de sobreposi√ß√£o bem estabelecidos. <br></blockquote><br><h2>  Sobreposi√ß√£o do host </h2><br>  Outra abordagem √© iniciar e finalizar t√∫neis nos hosts finais. <br>  Nesse caso, a rede (Underlay) permanece o mais simples e est√°tica poss√≠vel. <br>  E o pr√≥prio host faz todo o encapsulamento necess√°rio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d7/400/c60/5d7400c60036ba0b6666bb0f733c172f.png" width="600"><br><br>  Para fazer isso, voc√™ certamente precisar√° executar um aplicativo especial nos hosts, mas vale a pena. <br><br>  Em primeiro lugar, executar um cliente em uma m√°quina Linux √© mais simples, ou, digamos, geralmente poss√≠vel, enquanto estiver no switch, voc√™ provavelmente ter√° que recorrer a solu√ß√µes SDN propriet√°rias por enquanto, o que mata a ideia de v√°rios fornecedores. <br><br>  Em segundo lugar, a chave ToR neste caso pode ser deixada o mais simples poss√≠vel, tanto do ponto de vista do plano de controle quanto do plano de dados.  De fato - ele n√£o precisa se comunicar com o controlador SDN e armazenar as redes / ARPs de todos os clientes conectados - tamb√©m - apenas sabe o endere√ßo IP da m√°quina f√≠sica, o que simplifica bastante as tabelas de comuta√ß√£o / roteamento. <br><br><hr><br>  Na s√©rie ADSM, escolho a abordagem de sobreposi√ß√£o do host - ent√£o apenas falamos sobre isso e n√£o retornaremos √† f√°brica do VXLAN. <br><br><hr><br>  A maneira mais f√°cil de considerar os exemplos.  E, como assunto de teste, usaremos a plataforma OpenSource SDN OpenContrail, agora conhecida como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tungsten Fabric</a> . <br><blockquote>  No final do artigo, darei algumas reflex√µes sobre a analogia com o OpenFlow e o OpenvSwitch. <br></blockquote><br><h2>  Estudo de caso de tecido de tungst√™nio </h2><br>  Cada m√°quina f√≠sica possui um <b>vRouter</b> - um roteador virtual que conhece as redes conectadas a ele e a quais clientes eles pertencem - de fato - a um roteador PE.  Para cada cliente, ele mant√©m uma tabela de roteamento isolada (leia VRF).  E, na verdade, o vRouter faz o tunelamento de sobreposi√ß√£o. <br><br>  Um pouco mais sobre o vRouter est√° no final do artigo. <br><br>  Cada VM localizada no hipervisor √© conectada ao vRouter desta m√°quina por meio da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">interface TAP</a> . <br><br>  <b>TAP</b> - Terminal Access Point - uma interface virtual no kernel do Linux que permite a conex√£o em rede. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a2/fc4/20f/7a2fc420f086b1588236ddc7d4f1c97e.png" width="500"><br><br>  Se houver v√°rias redes por tr√°s do vRouter, uma interface virtual ser√° criada para cada uma delas, √† qual um endere√ßo IP est√° atribu√≠do - ser√° o endere√ßo de gateway padr√£o. <br>  Todas as redes de um cliente s√£o colocadas em um <b>VRF</b> (uma tabela), diferente - em diferente. <br>  <i>Farei uma reserva aqui que n√£o √© t√£o simples e enviarei o curioso leitor para o final do artigo</i> . <br><br>  Para que o vRouter'y se comunique e, consequentemente, as VMs localizadas atr√°s deles, eles trocam informa√ß√µes de roteamento por meio de um <b>controlador SDN</b> . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/3cd/6c5/c73/3cd6c5c7399e314b779a4b9ecf18e17e.png" width="900"></a> <br><br>  Para entrar no mundo exterior, h√° um ponto de sa√≠da da matriz - o gateway de rede virtual <b>VNGW</b> - Virtual Network GateWay ( <i>meu termo</i> ). <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/4d8/75f/a55/4d875fa552a4f144fb9338fa0093235c.png" width="900"></a> <br><br><hr><br>  Agora considere os exemplos de comunica√ß√£o - e haver√° clareza. <br><br><br><h3>  Comunica√ß√£o dentro de uma m√°quina f√≠sica </h3><br>  VM0 deseja enviar um pacote para VM2.  Por enquanto, suponha que essa seja uma VM de cliente √∫nico. <br><br><h4>  Plano de dados </h4><br><ol><li>  VM-0 tem uma rota padr√£o em sua interface eth0.  O pacote √© enviado para l√°. <br>  Essa interface eth0 est√° praticamente conectada ao roteador virtual vRouter por meio da interface tap0 TAP. </li><li>  O vRouter analisa a qual interface o pacote chegou, ou seja, a qual cliente (VRF) ele pertence, verifica o endere√ßo do destinat√°rio com a tabela de roteamento desse cliente. </li><li>  Depois de descobrir que o receptor na mesma m√°quina est√° atr√°s de uma porta diferente, o vRouter simplesmente envia o pacote para ele sem nenhum cabe√ßalho adicional - nesse caso, o vRouter j√° possui um registro ARP. </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/6be/2e5/1f0/6be2e51f0530a6fc7e9f2c6370c6e0d2.png" width="700"><br><br>  O pacote, neste caso, n√£o entra na rede f√≠sica - √© roteado dentro do vRouter. <br><br><br><h4>  Plano de controle </h4><br>  Quando a m√°quina virtual inicia, o hipervisor diz a ela: <br><br><ul><li>  O seu pr√≥prio endere√ßo IP. </li><li>  A rota padr√£o √© atrav√©s do endere√ßo IP do vRouter nesta rede. </li></ul><br>  Por meio de uma API especial, o hypervisor se reporta ao vRouter: <br><br><ul><li>  O que voc√™ precisa para criar uma interface virtual. </li><li>  Qual (VM) precisa criar uma rede virtual. </li><li>  Para qual VRF vincul√°-lo (VN). </li><li>  O registro ARP est√°tico para esta VM √© qual interface possui seu endere√ßo IP e qual endere√ßo MAC est√° anexado. </li></ul><br><blockquote>  E, novamente, o procedimento de intera√ß√£o real √© simplificado para entender o conceito. <br></blockquote><img src="https://habrastorage.org/getpro/habr/post_images/e14/f52/d49/e14f52d4935eb6d5fd5213c1bd3baeec.png" width="800"><br><br>  Assim, todas as VMs de um cliente em uma determinada m√°quina, o vRouter, v√™ como redes diretamente conectadas e pode rotear entre elas. <br><br><hr><br>  Mas VM0 e VM1 pertencem a clientes diferentes, respectivamente, est√£o em tabelas diferentes vRouter'a. <br><br>  Se eles podem se comunicar diretamente depende das configura√ß√µes do vRouter e do design da rede. <br>  Por exemplo, se as VMs de ambos os clientes usam endere√ßos p√∫blicos, ou o NAT ocorre no pr√≥prio vRouter, o roteamento direto para o vRouter tamb√©m pode ser feito. <br><br>  Na situa√ß√£o oposta, √© poss√≠vel atravessar espa√ßos de endere√ßo - voc√™ precisa passar por um servidor NAT para obter um endere√ßo p√∫blico - isso √© semelhante ao acesso a redes externas, descritas abaixo. <br><br><hr><br><br><h3>  Comunica√ß√£o entre VMs localizadas em diferentes m√°quinas f√≠sicas </h3><br><h4>  Plano de dados </h4><br><ol><li>  O in√≠cio √© exatamente o mesmo: a VM-0 envia um pacote com a VM-7 de destino (172.17.3.2) por padr√£o. </li><li>  O vRouter o recebe e, desta vez, v√™ que o destino est√° em outra m√°quina e √© acess√≠vel atrav√©s do t√∫nel Tunnel0. </li><li>  Primeiro, ele desliga a etiqueta MPLS que identifica a interface remota, para que na parte traseira do vRouter possa determinar onde colocar esse pacote sem ganchos adicionais. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/322/f94/328/322f943287f0e8956acc02654bdae580.png" width="1000"></a> <br></li><li>  Tunnel0 tem uma fonte 10.0.0.2, o receptor: 10.0.1.2. <br>  O vRouter adiciona cabe√ßalhos GRE (ou UDP) e um novo IP ao pacote original. </li><li>  A tabela de roteamento do vRouter possui uma rota padr√£o atrav√©s do endere√ßo ToR1 10.0.0.1.  L√° e envia. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9a/696/b8a/b9a696b8a0e97aba81107a3ad112f001.png" width="700"><br><br></li><li>  O ToR1 como membro da rede Underlay sabe (por exemplo, via OSPF) como chegar √† 10.0.1.2 e envia um pacote ao longo da rota.  Observe que o ECMP est√° inclu√≠do aqui.  Na ilustra√ß√£o, h√° duas pr√≥ximas etapas, e diferentes fluxos ser√£o dispostos neles por hash.  No caso de uma f√°brica real, provavelmente haver√° 4 nextops. <br><br>  Ao mesmo tempo, ele n√£o precisa saber o que est√° sob o cabe√ßalho IP externo.  De fato, sob IP, pode haver um sandu√≠che do IPv6 sobre MPLS sobre Ethernet sobre MPLS sobre GRE sobre sobre grego. </li><li>  Por conseguinte, no lado receptor, o vRouter remove o GRE e, usando o r√≥tulo MPLS, entende para qual interface esse pacote deve ser transmitido, retira-o e envia-o ao destinat√°rio em sua forma original. </li></ol><br><br><h4>  Plano de controle </h4><br>  Quando voc√™ inicia a m√°quina, tudo o que acontece √© descrito acima. <br><br>  E mais o seguinte: <br><br><ul><li>  Para cada cliente, o vRouter aloca uma tag MPLS.  Essa √© a etiqueta de servi√ßo L3VPN, na qual os clientes ser√£o divididos na mesma m√°quina f√≠sica. <br><blockquote>  De fato, a tag MPLS sempre √© alocada pelo vRouter'om sempre - porque n√£o se sabe antecipadamente que a m√°quina s√≥ interage com outras m√°quinas atr√°s do mesmo vRouter'om e isso provavelmente n√£o √© o caso. <br></blockquote></li><li>  O vRouter estabelece uma conex√£o com o controlador SDN via BGP (ou similar - no caso de TF, este √© XMPP 0_o). </li><li>  Nesta sess√£o, o vRouter informa ao controlador SDN as rotas para as redes conectadas: <br><br><ul><li>  Endere√ßo de rede </li><li>  M√©todo de encapsulamento (MPLSoGRE, MPLSoUDP, VXLAN) </li><li>  Etiqueta MPLS do cliente </li><li>  Seu endere√ßo IP como nexthop </li></ul><br></li><li>  O controlador SDN recebe essas rotas de todos os vRouter'ov conectados e as reflete para outras pessoas.  Ou seja, ele atua como um refletor de rota. </li></ul><br>  A mesma coisa acontece na dire√ß√£o oposta. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/5aa/e3a/b17/5aae3ab177a4ed58279e4c767618f770.png" width="1000"></a> <br><br>  A sobreposi√ß√£o pode mudar pelo menos a cada minuto.  Algo como isso acontece em nuvens p√∫blicas, quando os clientes iniciam e desligam regularmente suas m√°quinas virtuais. <br><br>  O controlador central assume todas as dificuldades de manter a configura√ß√£o e controlar as tabelas de comuta√ß√£o / roteamento no vRouter. <br><br>  Grosso modo, o controlador √© encerrado com todos os vRouters via BGP (ou um protocolo semelhante a ele) e simplesmente transmite informa√ß√µes de roteamento.  O BGP, por exemplo, j√° possui uma fam√≠lia de endere√ßos para transmitir o m√©todo de encapsulamento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MPLS-in-GRE</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MPLS-in-UDP</a> . <br><br>  Ao mesmo tempo, a configura√ß√£o da rede Underlay n√£o muda de forma alguma, o que, ali√°s, √© muito mais dif√≠cil de automatizar, e √© mais f√°cil interromper um movimento estranho. <br><br><hr><br><br><h3>  Sair para o mundo exterior </h3><br>  Em algum lugar, a simula√ß√£o deve terminar e, do mundo virtual, voc√™ precisa entrar no mundo real.  E voc√™ precisa de um gateway de <s>telefone p√∫blico</s> . <br><br>  Duas abordagens s√£o praticadas: <br><br><ol><li>  Um roteador de hardware est√° instalado. </li><li>  √â lan√ßado um dispositivo que implementa as fun√ß√µes de um roteador (sim, enfrentamos o VNF ap√≥s o SDN).  Vamos cham√°-lo de gateway virtual. </li></ol><br><blockquote>        ‚Äî    ‚Äî      .    ,     , ,  ,   ,  , , , ,         . <br><br>       ,           ,   ,      ,    ( <i></i> ).     ,  -   ,   ,          ‚Äî    . <br></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com um p√©, o gateway analisa a rede virtual Overlay, como uma M√°quina Virtual normal, e pode interagir com todas as outras VMs. </font><font style="vertical-align: inherit;">Ao mesmo tempo, ele pode encerrar em si as redes de todos os clientes e, consequentemente, realizar o roteamento entre eles. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com o outro p√©, o gateway j√° est√° olhando para a rede de backbone e sabe como acessar a Internet.</font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/930/3d2/d1a/9303d2d1a6777510d3bc87bc19349da2.png" width="800"><br><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Plano de dados </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ou seja, o processo fica assim: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A VM-0, tendo padronizado tudo no mesmo vRouter, envia um pacote com um destino no mundo externo (185.147.83.177) para a interface eth0. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O vRouter recebe esse pacote e faz uma pesquisa de endere√ßo de destino na tabela de roteamento - encontra a rota padr√£o atrav√©s do gateway VNGW1 atrav√©s do t√∫nel 1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele tamb√©m v√™ que este √© um t√∫nel GRE com SIP 10.0.0.2 e DIP 10.0.255.2, e tamb√©m desligue primeiro o MPLS- O r√≥tulo deste cliente que o VNGW1 espera.</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O vRouter empacota o pacote original nos cabe√ßalhos MPLS, GRE e novos IP e o envia para o ToR1 10.0.0.1 por padr√£o. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Uma rede subjacente entrega o pacote ao gateway VNGW1. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O gateway VNGW1 remove os cabe√ßalhos de encapsulamento GRE e MPLS, v√™ o endere√ßo de destino, consulta sua tabela de roteamento e entende que √© direcionado para a Internet - ou seja, em Tela cheia ou Padr√£o. </font><font style="vertical-align: inherit;">Se necess√°rio, executa a convers√£o NAT.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do VNGW at√© a fronteira, pode haver uma rede IP regular, o que √© improv√°vel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pode ser uma rede MPLS cl√°ssica (IGP + LDP / RSVP TE), pode ser uma f√°brica de volta com uma LU BGP ou um t√∫nel GRE do VNGW at√© a fronteira atrav√©s da rede IP. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seja como for, o VNGW1 executa os encapsulamentos necess√°rios e envia o pacote original para a borda.</font></font></li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d9e/49b/c01/d9e49bc0141200d07b7dbd6710495c83.png" width="1000"></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O tr√°fego na dire√ß√£o oposta segue as mesmas etapas na ordem oposta. </font></font><br><br><ol><li>     VNGW1 </li><li>   ,      ,      Tunnel1 (MPLSoGRE  MPLSoUDP). </li><li> ,   MPLS,  GRE/UDP   IP     ToR3 10.0.255.1. <br>    ‚Äî IP- vRouter',      ‚Äî 10.0.0.2. </li><li>       vRouter'. </li><li>  vRouter  GRE/UDP,  MPLS-      IP-   TAP-,   eth0 . </li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d4d/f49/892/d4df4989216a42c06343ba883b8f5db2.png" width="1000"></a> <br><br><br><h4> Control Plane </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O VNGW1 estabelece uma vizinhan√ßa BGP com um controlador SDN, do qual recebe todas as informa√ß√µes de roteamento sobre clientes: qual endere√ßo IP (vRouter) √© usado para identificar qual cliente e com qual r√≥tulo MPLS ele se identifica. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da mesma forma, ele pr√≥prio informa ao controlador SDN a rota padr√£o com o r√≥tulo deste cliente, indicando-se como nexthop. E ent√£o esse padr√£o chega ao vRouter'y. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os VNGWs normalmente roteam agrega√ß√£o ou convers√£o NAT. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E na dire√ß√£o oposta, ele fornece exatamente essa rota agregada para uma sess√£o com pensionistas ou refletores de rota. E a partir deles recebe uma rota padr√£o ou Full-View, ou qualquer outra coisa. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em termos de encapsulamento e troca de tr√°fego, o VNGW n√£o √© diferente do vRouter.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ expandir um pouco a √°rea, poder√° adicionar outros dispositivos de rede ao VNGW e ao vRouter, como firewalls, farms de purifica√ß√£o ou enriquecimento de tr√°fego, IPS e assim por diante. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E com a ajuda da cria√ß√£o sucessiva de VRF e o an√∫ncio correto das rotas, voc√™ pode fazer o loop de tr√°fego como desejar, chamado de Service Chaining. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou seja, aqui o controlador SDN atua como um refletor de rota entre o VNGW, o vRouter'ami e outros dispositivos de rede. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas, de fato, o controlador tamb√©m libera informa√ß√µes sobre ACLs e PBRs (Policy Based Routing), for√ßando os fluxos de tr√°fego individuais a serem diferentes do que a rota lhes diz.</font></font><br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/917/7f6/97a/9177f697a1ff4a7560153286ac04f287.png" width="1000"></a> <br><br><hr><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perguntas frequentes </font></font></h1><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que voc√™ est√° sempre fazendo uma observa√ß√£o do GRE / UDP?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bem, em geral, pode-se dizer que √© espec√≠fico do tecido de tungst√™nio - voc√™ pode ignor√°-lo completamente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas se voc√™ aceitar, o pr√≥prio TF, enquanto ainda √© um OpenContrail, suporta os dois encapsulamentos: MPLS no GRE e MPLS no UDP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O UDP √© bom porque na porta de origem em seu cabe√ßalho √© muito f√°cil codificar uma fun√ß√£o de hash da porta IP + Proto + original, o que permitir√° o balanceamento. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No caso do GRE, infelizmente, existem apenas cabe√ßalhos IP e GRE externos iguais para todo o tr√°fego encapsulado e n√£o se fala em balanceamento - poucas pessoas podem olhar t√£o profundamente dentro do pacote.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At√© algum tempo, os roteadores, se soubessem usar t√∫neis din√¢micos, somente no MPLSoGRE, e apenas muito recentemente, aprenderiam no MPLSoUDP. Portanto, voc√™ sempre deve fazer um coment√°rio sobre a possibilidade de dois encapsulamentos diferentes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para ser justo, vale a pena notar que o TF suporta totalmente a conectividade L2 usando VXLAN. </font></font><br><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ prometeu tra√ßar paralelos com o OpenFlow.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eles realmente imploram. O vSwitch no mesmo OpenStack faz coisas muito semelhantes usando o VXLAN, que, ali√°s, tamb√©m possui um cabe√ßalho UDP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No Data Plane, eles funcionam aproximadamente da mesma forma, o Control Plane difere significativamente. O Tungsten Fabric usa o XMPP para fornecer informa√ß√µes de rota ao vRouter, enquanto o Openflow trabalha no OpenStack. </font></font><br><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Posso ter um pouco mais sobre o vRouter?</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele √© dividido em duas partes: vRouter Agent e vRouter Forwarder. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O primeiro √© iniciado no Espa√ßo do Usu√°rio do SO host e se comunica com o controlador SDN, trocando informa√ß√µes sobre rotas, VRF e ACL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O segundo implementa o Data Plane - geralmente no Kernel Space, mas tamb√©m pode ser iniciado em SmartNICs - placas de rede com uma CPU e um chip de comuta√ß√£o program√°vel separado, que permite remover a carga da CPU da m√°quina host e tornar a rede mais r√°pida e previs√≠vel. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro cen√°rio √© poss√≠vel quando o vRouter √© um aplicativo DPDK no Espa√ßo do Usu√°rio. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O vRouter Agent descarta as configura√ß√µes no vRouter Forwarder. </font></font><br><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que √© rede virtual?</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mencionei no in√≠cio do artigo sobre o VRF que cada inquilino est√° anexado ao seu VRF. E se isso foi suficiente para uma compreens√£o superficial do trabalho da rede de sobreposi√ß√£o, j√° na pr√≥xima itera√ß√£o √© necess√°rio fazer esclarecimentos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geralmente, nos mecanismos de virtualiza√ß√£o, a entidade de rede virtual (voc√™ pode usar como nome pr√≥prio) √© apresentada separadamente dos clientes / locat√°rios / m√°quinas virtuais - √© algo bastante independente. E essa rede virtual atrav√©s das interfaces j√° pode ser conectada em um inquilino, no outro, em dois, mas pelo menos onde. Assim, por exemplo, o Service Chaining √© implementado quando o tr√°fego precisa ser passado por determinados n√≥s na sequ√™ncia desejada, simplesmente criando e chamando Redes Virtuais na sequ√™ncia correta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, como tal, n√£o h√° correspond√™ncia direta entre a rede virtual e o inquilino.</font></font><br><br><hr><br><br><h1>  Conclus√£o </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta √© uma descri√ß√£o muito superficial da opera√ß√£o de uma rede virtual com uma sobreposi√ß√£o do host e do controlador SDN. Mas n√£o importa qual plataforma de virtualiza√ß√£o voc√™ adote hoje, ela funcionar√° de maneira semelhante, seja VMWare, ACI, OpenStack, CloudStack, Tungsten Fabric ou Juniper Contrail. Eles diferem nos tipos de encapsulamento e cabe√ßalhos, protocolos para fornecer informa√ß√µes aos dispositivos de rede finais, mas o princ√≠pio de uma rede de sobreposi√ß√£o ajustada por software que trabalha sobre uma rede de subjac√™ncia relativamente simples e est√°tica permanecer√° o mesmo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podemos dizer que, nas √°reas de cria√ß√£o de uma nuvem privada at√© o momento, o SDN baseado na rede de sobreposi√ß√£o venceu. </font><font style="vertical-align: inherit;">No entanto, isso n√£o significa que o Openflow n√£o tenha lugar no mundo moderno - ele √© usado no OpenStacke e no mesmo VMWare NSX, tanto quanto eu sei, o Google o usa para configurar a rede subjacente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abaixo, dei links para materiais mais detalhados, se voc√™ quiser estudar a quest√£o mais profundamente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E qual √© o nosso Underlay? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas, em geral, nada. </font><font style="vertical-align: inherit;">Ele n√£o mudou completamente. </font><font style="vertical-align: inherit;">Tudo o que ele precisa fazer no caso de uma sobreposi√ß√£o do host √© atualizar rotas e ARPs quando o vRouter / VNGW aparecer e desaparecer e arrastar pacotes entre eles. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos formular uma lista de requisitos para uma rede Underlay.</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ser capaz de algum protocolo de roteamento, em nossa situa√ß√£o - BGP. </font></font></li><li>   ,   ,     - . </li><li>  ECMP ‚Äî   . </li><li>   QoS,     ,  ECN. </li><li>  NETCONF ‚Äî   . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dediquei muito pouco tempo ao trabalho da pr√≥pria rede Underlay. </font><font style="vertical-align: inherit;">Isso ocorre porque, mais tarde na s√©rie, focarei nisso e tocaremos em Overlay apenas de passagem. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, limitei severamente a todos n√≥s, usando como exemplo a rede DC constru√≠da na f√°brica de Klose com roteamento IP puro e sobreposi√ß√£o do host. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No entanto, tenho certeza de que qualquer rede que tenha um design pode ser descrita em termos formais e automatizada. </font><font style="vertical-align: inherit;">√â que estou buscando o objetivo de entender as abordagens da automa√ß√£o e n√£o confundir todo mundo, resolvendo o problema de uma maneira geral. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como parte do ADSM, Roman Gorge e eu planejamos publicar um problema separado sobre a virtualiza√ß√£o do poder da computa√ß√£o e sua intera√ß√£o com a virtualiza√ß√£o de rede. </font><font style="vertical-align: inherit;">Fique em contato.</font></font><br><br><br><h1>  Links √∫teis </h1><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura de tecido de tungst√™nio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre: ‚Äã‚Äãnuvem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">6 horas sobre o Yandex.Cloud, onde a rede virtual no TF tamb√©m √© afetada.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O que √© o Open vSwitch?</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Introdu√ß√£o ao VxLAN</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RFC 7348. Rede virtual local extens√≠vel (VXLAN): uma estrutura para sobrepor redes de camada 2 virtualizadas em redes de camada 3.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Abordagem de escalonamento ao VXLAN EVPN Fabric</a> .  Ele fala sobre toda a rede de controladores de dom√≠nio, incluindo Underlay, Overlay, abordagens para hospedagem m√∫ltipla e gerenciamento. </li></ul><br><h5>  Obrigado </h5><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Roman Gorge</a> , ex-principal host do podcast linkmeup e agora especialista no campo de plataformas em nuvem.  Para coment√°rios e edi√ß√µes.  Bem, esperamos um artigo mais aprofundado sobre virtualiza√ß√£o em um futuro pr√≥ximo. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Alexander Shalimov</a> , meu colega e especialista no desenvolvimento de redes virtuais.  Para coment√°rios e edi√ß√µes. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Valentina Sinitsyna</a> , minha colega e especialista em tecidos de tungst√™nio.  Para coment√°rios e edi√ß√µes. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artyom Chernobay</a> - ilustrador linkmeup.  Para KDPV. </li><li>  Alexander Limonov.  Para o meme "automato". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458622/">https://habr.com/ru/post/pt458622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458604/index.html">Por que os dois maiores fabricantes de eletr√¥nicos uniram for√ßas em um novo projeto de GPU</a></li>
<li><a href="../pt458606/index.html">Execute o OpenVPN no Docker em 2 segundos</a></li>
<li><a href="../pt458608/index.html">Ferramentas de desenvolvedor do Node.js. Fila de tarefas</a></li>
<li><a href="../pt458612/index.html">Cosmos. 7 anos</a></li>
<li><a href="../pt458614/index.html">Criando um gancho UsePosition () reativo para obter e rastrear coordenadas do navegador</a></li>
<li><a href="../pt458624/index.html">Como aprendemos a desenhar textos em tela</a></li>
<li><a href="../pt458626/index.html">StealthWatch: conceitos b√°sicos e requisitos m√≠nimos. Parte 1</a></li>
<li><a href="../pt458630/index.html">Um pouco de hist√≥ria do desenvolvimento do seu jogo em Windows Forms + C # puro nos meus 16 anos</a></li>
<li><a href="../pt458632/index.html">Realmente digitando vue</a></li>
<li><a href="../pt458634/index.html">"N√£o seja mau" ou o que o Facebook esconde de n√≥s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>