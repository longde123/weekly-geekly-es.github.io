<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“Š ğŸŒ­ ğŸ‘¨â€ğŸ« Kami bekerja dengan cobot Dobot M1 ğŸŒ¥ï¸ ğŸ‘˜ ğŸ‡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setahun yang lalu di HabrÃ© ulasan tentang robot desktop Dobot Magician keluar. Dalam artikel ini, saya mengusulkan untuk mengevaluasi abangnya, Dobot ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami bekerja dengan cobot Dobot M1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467407/">  Setahun yang lalu di HabrÃ© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ulasan tentang</a> robot desktop Dobot Magician keluar.  Dalam artikel ini, saya mengusulkan untuk mengevaluasi abangnya, Dobot M1, dalam aksinya.  Saya juga akan mencoba menjelaskan mengapa saya memilih model khusus ini untuk proyek saya, saya akan menjelaskan proses pengembangan demo di Qt / c ++, serta beberapa momen tidak menyenangkan yang saya temui selama proses pengembangan. <br><a name="habracut"></a><br><h1>  Pendahuluan </h1><br>  Tahun ini saya bekerja di salah satu institut penelitian paling umum.  Pada awalnya, semuanya cukup santai, dan tahun tidak menjanjikan sesuatu yang menarik, sampai suatu hari di sebuah rapat umum diskusi tentang bagaimana membuat perakitan sel surya (shingled solar cells).  Pendekatan ini bukanlah hal yang baru, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kata mereka</a> , ini adalah salah satu cara pertama untuk merakit panel untuk satelit ruang angkasa. <br><br>  Saya tidak tahu seberapa benar ini karena saya belum melihat artikel atau paten.  Tetapi minat publik terhadap keputusan ini telah memanas, sebagian juga karena beberapa tahun yang lalu SunPower meluncurkan panel baru, yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seri-P</a> .  Kebetulan di dunia fotovoltaik bahwa karena sanpower melakukan sesuatu, maka semua orang harus melakukan hal ini juga.  Itu dia.  Semuanya sederhana: kami menyiapkan substrat, memotongnya menjadi potongan-potongan dan berkumpul.  Pada saat itu, saya mencatat bahwa saya secara pribadi pasti tidak akan mengumpulkan apa pun secara manual, karena tangan saya tidak berbeda secara merata.  Kalau tidak, hasilnya mungkin seperti satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video</a> di YouTube.  Dan kita, bagaimanapun juga, adalah seluruh institusi, jika kita benar-benar melakukan sesuatu, itu bukan pertanian kolektif.  Saya menawarkan untuk membeli robot dan mengkonfigurasinya untuk proses yang diinginkan, dan mereka memberi saya lampu hijau. <br><br>  Perlu dicatat bahwa kami memutuskan untuk memulai yang lebih sederhana dan merakit panel mini.  Mini-panel adalah panel surya yang lebih kecil dari standar.  Kami melakukan ini untuk mengerjakan proses teknologi.  Pertama, saya dipandu oleh panel dengan ukuran 1 sel surya standar dengan rencana penskalaan ke panel 2 x 2. Ukuran sisi satu sel surya adalah 16 cm. Dengan demikian, robot dibutuhkan dengan bidang akses 32 x 32 cm. Saya ingin akurasi yang lebih akurat dan harga lebih murah .  Jadi, dengan dipersenjatai bilah pencarian, saya mulai mempelajari kalimat-kalimat itu.  Saya memutuskan bahwa 6 sumbu tidak diperlukan untuk proyek, 4 sudah cukup, jadi pilihannya dipersempit menjadi robot seperti bekas luka.  Saya menemukan bahwa membeli robot industri disertai dengan biaya tambahan, seperti merancang ruang kerja yang aman dan meninggalkan insinyur aplikasi di lokasi instalasi, yang memprogram robot untuk tugas Anda.  Robot industri yang baik pada prinsipnya mahal, dan layanan insinyur akan meningkatkan harga bahkan lebih, apalagi, itu menarik untuk mengimplementasikan proyek sendiri.  Oleh karena itu, pilihan dipersempit menjadi cobot, robot kolaboratif, dengan persyaratan keamanan yang lebih rendah dan lebih ramah untuk prototipe diri.  Jadi, saya segera menemukan perusahaan Dobot.  Saya segera menjatuhkan Dobot Magician karena ukuran dan ketepatannya, yaitu 100 mikron.  Saya menulis permintaan kepada mereka untuk memberikan spesifikasi dan memberi tahu tempat untuk membeli.  Saya menemukan bahwa dengan API ada API dan mereka dapat diprogram dalam C ++.  Itu cocok untuk saya, tetapi saya tidak bisa membelinya secara langsung.  Untungnya, saya menemukan satu pemasok di Belanda, yang menjual saya 2 buah untuk â‚¬ 8700 dengan PPN, dengan pengiriman dari Cina, dan pada saat yang sama mengambil alih semua bea cukai. <br><br><h1>  Fitur kebaikan </h1><br><img src="https://habrastorage.org/webt/eq/li/v_/eqliv_l21t5_qnph5vis0kjci9m.jpeg"><br><br>  Dobot M1 diposisikan sebagai robot kolaborasi profesional 4-sumbu yang terjangkau.  Itu dapat menahan hingga 1,5 kg beban (tidak diuji), memiliki jangkauan hingga 400 mm (tidak di mana-mana) dan akurasi hingga 20 mikron (dicentang).  Ruang kerja kebaikan terlihat pada gambar di bawah ini.  Tidak sulit untuk memperhatikan bahwa karena fitur desain ada zona buta dengan jari-jari sedikit kurang dari 15 sentimeter di depan.  Selain itu, peta ruang ini tidak memperhitungkan orientasi tangan.  Dobot dapat berupa tangan kanan atau tangan kiri, saya masih belum tahu bagaimana ini bisa diaktifkan saat bepergian tanpa kalibrasi tambahan.  Secara default, Dobot adalah tangan kanan, yang berarti bahwa zona kanan dibatasi oleh area akses dari sendi ke-2, ketika sambungan pertama diarahkan ke kanan.  Jadi area sebenarnya dari ruang kerja adalah sekitar 2/3 dari yang ditunjukkan dalam gambar resmi. <br><br><img src="https://habrastorage.org/webt/qf/bv/dp/qfbvdpisi2sc2pbc62vg38miyko.png"><br><br>  Goodness memiliki port I / O: input dan output digital dengan level 24 V (level default tinggi), serta input analog.  ADC macam apa yang ada di sana saya tidak tahu.  Port tersedia pada panel belakang di dudukan dan di tangan itu sendiri untuk bekerja dengan nozel.  Saya lupa memotret konektor di lengannya sendiri, tetapi ini sejenis CAA.  Ada juga antarmuka ekspansi di mana Anda dapat membeli biaya tambahan.  Dobot terhubung ke PC melalui RS-232 atau melalui jaringan. <br><br><img src="https://habrastorage.org/webt/wx/jp/tx/wxjptxd8lxcgzk7z7orkbmi-hri.png"><br><br>  Bahan perumahan: polikarbonat, tampaknya, ditambah dudukan logam dicat hitam.  Desain ini tidak menimbulkan rasa premium, tetapi juga rasa artisanisme.  Saya membeli satu penuh, dan satu di pangkalan.  Saya tidak menguji nosel laser dan pencetakan 3D. <br><br>  Untuk menguji kebaikan, saya menggunakan program M1Studio untuk Windows, yang diunduh dari situs web perusahaan.  Tapi itu saja.  Selanjutnya, dipersenjatai dengan api, Qt dan sebuah stasiun kerja dengan tawon dasar, saya duduk untuk menulis demo untuk bekerja dengan beberapa pasang surut. <br><br><h1>  Kami sedang menulis demo </h1><br>  Sebenarnya, demo sudah tersedia di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> .  Dokumentasi untuk API dan protokol komunikasi dapat diunduh dari situs web pabrikan. <br><br>  Pertama-tama, kami menggunakan metode SearchDobot () dari api, yang tidak menunjukkan apa pun di Linux, dan hanya bekerja di windows jika dobot terhubung melalui RS-232.  Aneh, karena M1Studiya dengan sempurna mendefinisikan dobotov melalui jaringan.  Dengan alamat ip yang dikenal, metode ConnectDobot () berfungsi dengan baik.  Tidak apa-apa, saya pikir, saya akan mengatur router dan membiarkan alamat ip dilampirkan ke poppy.  Hari berikutnya saya terkejut melihat fakta bahwa kebaikan tidak bereaksi.  Ternyata ketika dinyalakan, dobot memiliki alamat poppy acak.  Ini adalah fitur firmware, yang diperbaiki pada versi baru di bulan Mei, tetapi saya takut menginstalnya. <br><br>  Berbekal sebuah program untuk menganalisis paket jaringan, saya menemukan bahwa Dobot menanggapi permintaan UDP ke port 6000 dengan teks â€œWhoisDobotM1â€ tanggapan UDP dengan teks yang berisi nomor model Dobot.  Berdasarkan ini, metode kustom ditulis yang mengirimkan permintaan di seluruh subnet, dan dalam hal tanggapan, menginisialisasi kebaikan. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MainWindow::on_buttonSearch_clicked() { QHostAddress host; QList&lt;QHostAddress&gt; <span class="hljs-built_in"><span class="hljs-built_in">list</span></span> = QNetworkInterface::allAddresses(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.count(); i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((!<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i).isLoopback()) &amp;&amp; (<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i).protocol() == QAbstractSocket::IPv4Protocol)) host = <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.at(i); } QString subnet = host.toString().section(<span class="hljs-string"><span class="hljs-string">'.'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-string"><span class="hljs-string">"."</span></span>; QByteArray data = <span class="hljs-string"><span class="hljs-string">"WhoisDobotM1"</span></span>; QUdpSocket udpSocketSend; udpSocketSend.writeDatagram(data);<span class="hljs-comment"><span class="hljs-comment">//need tocall it otherwise in Win get socket doesn't open udpSocketSend.bind(host, 54321, QAbstractSocket::ShareAddress); udpSocketGet.bind(host, udpSocketSend.localPort(), QAbstractSocket::ShareAddress); connect(&amp;udpSocketGet, &amp;QUdpSocket::readyRead, this, &amp;MainWindow::readUdpData); for (int i=1; i&lt;255; i++) udpSocketSend.writeDatagram(data, 32, QHostAddress(subnet + QString::number(i)), 6000); }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MainWindow::readUdpData() { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (udpSocketGet.hasPendingDatagrams()) { QNetworkDatagram data = udpSocketGet.receiveDatagram(); QByteArray ip = data.senderAddress().toString().toUtf8(); QString name = QString(data.data()).section(<span class="hljs-string"><span class="hljs-string">'_'</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// cuts "dobotM1" from "dobotM1_Dobot M1_0033\x00" if (name == "dobotM1") { MyDobot* a = new MyDobot(); dobot-&gt;push_back(a); dobot-&gt;last()-&gt;initDobot(ip); ui-&gt;listDobots-&gt;addItem(ip); on_listDobots_activated(ui-&gt;listDobots-&gt;currentIndex()); } } }</span></span></code> </pre><br>  Antarmuka demo cukup sederhana dan disajikan dalam gambar di bawah ini. <br><br><img src="https://habrastorage.org/webt/p1/t1/ym/p1t1ym-u5v1th1j0qwacwvrc3w8.png"><br><br>  Untuk menginisialisasi dan mengendalikan kebaikan, saya menulis sebuah kelas di mana saya menyadari fungsi yang saya butuhkan: kontrol sumbu, pergerakan dari titik ke titik dalam garis lurus dan dalam kurva, kembali ke posisi awal, kontrol pompa udara, dan juga pemantauan posisi dan kesalahan.  Mari bergiliran.  Ketika kelas diinisialisasi, alamat ip kebaikan disimpan dalam variabel, koneksi pertama terjadi, seluruh antrian perintah dibersihkan, bahkan jika antrian kosong, dan parameter akselerasi dan kecepatan untuk motor diatur. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyDobot</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QObject { Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">explicit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyDobot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QObject *parent = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">nullptr</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; ~MyDobot(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initDobot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QByteArray IPaddress)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Pose </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCurrentPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goHomeSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goHome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goPositionStraight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goJog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAirPump</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> status, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> direction)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//status 1 off 0 on; direction 0 suck 1 push void setOutput(uint8_t address, uint8_t level); void setMotor(int velocity, int acceleration); alarmState getAlarms(); void clearAlarms(); void clearQueue(); QString getName(); public slots: private: char deviceSN[64]; char deviceName[64]; QByteArray thisDobotIP; Pose currentPosition, futurePosition; };</span></span></code> </pre><br>  Saya memutuskan untuk menggunakan vektor dengan elemen kelas saya untuk mengontrol dobot ketika jumlahnya lebih dari 1. Setiap elemen vektor memiliki variabel yang menyimpan alamat ip dobot.  Karena  perpustakaan adalah satu, dan ada beberapa dobotov, maka di setiap metode kelas Anda harus terlebih dahulu memanggil metode menghubungkan ke dobot tertentu.  Ini mungkin terlihat bengkok, tetapi semuanya ada di bawah tenda, dan kemudian bekerja dengan kelas ini sangat nyaman. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyDobot::setAirPump(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> status, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> direction) { ConnectDobot(thisDobotIP, <span class="hljs-number"><span class="hljs-number">115200</span></span>, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>); ...</code> </pre><br>  Gerakan dari titik ke titik di API Goodness diimplementasikan dengan beberapa metode: dalam garis lurus, dalam kurva, dan dalam beberapa cara lain yang saya tidak ingat.  Pada gambar di bawah ini, dua lintasan pergerakan antara 2 titik terlihat.  Salah satunya adalah garis lurus, yang dengan kalibrasi yang tepat pada perangkat tidak bercabang dua saat bergerak bolak-balik.  Lintasan kedua adalah garis lengkung yang Anda dapatkan, karena firmware kebaikan secara berurutan menyesuaikan motor untuk mencapai koordinat yang diinginkan.  Perlu dicatat bahwa pergerakan dalam garis lurus tidak selalu memungkinkan, beberapa posisi sambungan tidak memungkinkan mencapai dari titik A ke titik B dalam garis lurus. <br><br><img src="https://habrastorage.org/webt/px/i2/ke/pxi2keh8edb25v9jos_b508trha.jpeg"><br><br>  Pemantauan posisi Dobot diimplementasikan menggunakan kelas Qtimer, yang sinyal Qtimer :: timeout-nya terkait dengan metode MainWindow :: on_getPoseTimer saya.  Harus saya akui, ini adalah solusi yang biasa-biasa saja, karena operasi responsif aplikasi dengan up hanya dimungkinkan jika Anda menetapkan batas waktu 1000 ms.  Dengan pengaturan waktu yang lebih singkat, sentakan mulai terasa saat mengatur naik.  Saya perhatikan bahwa kadang-kadang dobot bisa bodoh untuk sementara waktu ketika menerima perintah, dan jika Anda cukup sering mengirim perintah, maka kemungkinan untuk masuk ke dalam bodoh bertambah.  Mungkin ini karena panggilan konstan untuk ConnectDobot, yang mungkin tampak tidak perlu dalam demo ini, tetapi demo ditulis secara paralel dengan proyek utama, dan dalam proyek utama saya benar-benar membutuhkan implementasi seperti itu.  Namun, untuk memonitor koneksi tidak dipanggil setiap waktu, tetapi masalah dengan suspensi tetap ada.  Sayangnya, batas waktu 1 detik tidak memberikan pengukuran posisi kebaikan dalam ruang yang mulus, yang, misalnya, diterapkan di Studio M1, tetapi, di sisi lain, ini tidak penting. <br><br>  Dalam metode yang sama, permintaan untuk kesalahan terjadi.  Dalam kebaikan api, transmisi kode kesalahan dilaksanakan melalui struktur AlarmState. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alarmState</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> value[<span class="hljs-number"><span class="hljs-number">32</span></span>]; };</code> </pre><br>  Struktur ini adalah array elemen 8-bit, dan kode kesalahan dikodekan dalam representasi biner dari salah satu dari beberapa elemen array.  Untuk menghitung kode kesalahan, Anda perlu menemukan "1" di elemen dan menambahkan nomor debit (unit) ke 8 * n elemen (mengandung atau tidak mengandung kesalahan lain) sebelum di array nilai.  Ya, bisa ada lebih dari satu kesalahan sekaligus.  Selanjutnya, kode kesalahan harus ditemukan dalam dokumen, yang tersedia untuk diunduh di situs web pabrikan.  Isi pdfk disalin ke file teks, yang dibaut ke proyek sebagai sumber.  Jika kode kesalahan berbeda dari 8 * 32 (mis. Tidak ada kesalahan), maka kode ini muncul di bidang kesalahan dan dengan mengklik tombol Alarm, uraiannya diuraikan dalam file, dan kemudian ditampilkan di bidang teks.  By the way, kesalahan decoding dan parsing dilakukan di luar kelas untuk mengontrol up.  Bagi saya, itu sekarang sepertinya bukan gagasan yang tepat. <br><br>  Pompa udara termasuk dalam kit, yang dalam manual instruksi menyarankan menghubungkan ke output digital 17 dan 18. Satu output mengontrol on / off pompa, dan yang kedua mengontrol arah pergerakan udara.  Jadi, misalnya, gripper pneumatik diaktifkan, yang juga disediakan. <br><br><h1>  Gulma </h1><br>  Dalam proses mengeksploitasi Dobot, saya mengalami beberapa masalah. <br><br><ol><li>  Lubang-lubang pada dudukan tidak dibuat untuk melubangi lubang pada papan tempat memotong roti optik standar.  Di sisi lain, sekali, ketika secara tidak sengaja kebaikan saya bertabrakan satu sama lain, salah satu dari mereka hanya bergeser di sekitar sumbu baut pemasangan, yang, saya pikir, menghindari kerusakan parah. </li><li>  Dari paragraf pertama ikuti yang kedua.  Setelah tabrakan Dobot, kapak mereka bergeser.  Ini tidak menakutkan pada awalnya, karena saya menulis metode untuk mengkalibrasi sumbu Dobot relatif ke kamera.  Hal yang mengerikan terjadi pada ayat 3. </li><li>  Sumbu vertikal juga telah bergeser dan sekarang normal saya tidak normal.  Ini dapat dideteksi oleh kamera, jika Anda menggambar dua tegak lurus dengan titik-titik.  Anda dapat memastikan bahwa karena miring vertikal, dobot sekarang menggambar dengan pena bukan sumbu X dan Y yang sebenarnya, tetapi proyeksi mereka.  Dan proyeksi ini dapat memiliki sudut kurang dari 90 derajat.  Pada kenyataannya, ini mengarah pada kesalahan penyelarasan kecil.  Di sisi lain, itu tidak begitu menakutkan karena kesalahannya linear. </li><li>  Firmware Dobot, pada prinsipnya, sekitar.  Ada kusen kecil dengan alamat poppy, ada beberapa masalah dengan menunggu tanggapan terhadap permintaan UDP, tetapi jika tidak berfungsi dengan baik. </li><li>  Desainnya menyediakan baterai, yang diperlukan untuk menjaga koordinat terakhir setelah mematikan kebaikan.  Ketika baterai mati, tegangan di dalamnya turun, yang menghapus data ini.  Karena itu, dobot dimuat ke status kesalahan.  Untuk menyimpulkan dari keadaan ini, Anda harus terlebih dahulu memanggil metode untuk menghapus pesan kesalahan, dan kemudian memanggil metode pencarian untuk posisi "home".  Anda dapat mengganti baterai, manfaatnya sudah termasuk.  Namun, baterai tersembunyi di dudukannya, dan untuk mencapainya Anda harus melepaskan 4 baut.  Slot salah satunya ditembak jatuh. </li><li>  Dalam proyek saya, saya menggunakan 3 lembar kaca untuk meningkatkan level meja.  Keputusan begitu-begitu, karena kaca bengkok.  Faktanya adalah bahwa Dobot mulai menghasilkan kesalahan ketika sumbu vertikal memiliki nilai kurang dari 15 mm, dan tampaknya tidak semua fungsi tersedia.  Jadi, perlu bahwa ruang kerja terletak tepat di atas bidang lampiran Dobot. </li></ol><br><h1>  Kesimpulan </h1><br>  Kebaikan memungkinkan saya untuk mengimplementasikan proyek untuk mengumpulkan sel surya dalam soket mini keramik, yang dapat dilihat di video.  Akurasi posisi diperiksa pada wafer silikon yang sama dan berada di batas 1 piksel pada satu sumbu dan 10 piksel pada lainnya.  Kamera dalam proyek ini digunakan dengan resolusi 20 MP, dan bidang pandang kamera sepanjang sisi panjangnya sekitar 17 cm, tidak sulit untuk menghitung bahwa 1 piksel sesuai dengan ukuran linier sekitar 30 mikron.  Kebetulan optik yang digunakan, meskipun berkualitas tinggi, memungkinkan untuk mengamati wafer silikon dengan jelas hanya di pusatnya, sementara tepi wafer menjadi sangat buram, yang mengarah ke ketidakpastian dalam penentuan wajah mereka di sisi pendek, dan sesuai dengan ketidakpastian dalam menentukan pusat wafer.  Setelah mengkalibrasi sumbu, saya mengatur fokus kamera ke sisi pendek pelat.  Perlu dicatat bahwa, pada prinsipnya, tidak mungkin untuk fokus di sana seperti di pusat bidang pandang, tetapi tetap saja.  Karena efek ini, kesalahan posisi di sepanjang sumbu sepanjang sisi panjang sel surya berada pada batas 10 piksel, tetapi hanya 1 piksel pada sisi pendek.  Yang sesuai dengan sekitar 300 dan 30 mikron.  Ini memungkinkan saya untuk memverifikasi integritas spesifikasi untuk akurasi. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/j7SNzEHzecM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467407/">https://habr.com/ru/post/id467407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467395/index.html">Habr Weekly # 18 / New Apple Gadgets, smartphone sepenuhnya modular, desa programmer di Belarus, fenomena XY</a></li>
<li><a href="../id467399/index.html">Anda tidak dapat melarang untuk membawa: bagaimana menerapkan konsep BYOD dan tidak membahayakan keamanan informasi</a></li>
<li><a href="../id467401/index.html">Perbandingan Tesla Model S dan Porsche Taycan</a></li>
<li><a href="../id467403/index.html">Apa yang Anda bisa dan tidak bisa memeras komponen web</a></li>
<li><a href="../id467405/index.html">Lyft meluncurkan kompetisi pengenalan objek 3D</a></li>
<li><a href="../id467409/index.html">Untuk melakukan bisnis di Lembah Silikon, Anda harus berperilaku baik</a></li>
<li><a href="../id467413/index.html">Kerangka kerja microservice PHP - `Halo dunia` dari Swoft</a></li>
<li><a href="../id467415/index.html">Pasar valuta asing modern</a></li>
<li><a href="../id467419/index.html">Rilis Final EE 8 Jakarta Dirilis</a></li>
<li><a href="../id467421/index.html">Buat pointer cerdas ekspresif untuk memori jarak jauh di C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>