<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤ŸğŸ» ğŸ­ ğŸš­ Mon git commit prÃ©fÃ©rÃ© ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğŸ¦• ğŸšŒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Remarque perev. : Cette publication d'un programmeur britannique, qui est devenu un vÃ©ritable succÃ¨s sur Internet anglophone, fait rÃ©fÃ©rence Ã  un enga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mon git commit prÃ©fÃ©rÃ©</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/472278/">  <i><b>Remarque</b></i>  <i><b>perev.</b></i>  <i>: Cette publication d'un programmeur britannique, qui est devenu un vÃ©ritable succÃ¨s sur Internet anglophone, fait rÃ©fÃ©rence Ã  un engagement de Git il y a 6 ans.</i>  <i>Il a Ã©tÃ© enregistrÃ© dans l'un des rÃ©fÃ©rentiels ouverts du service numÃ©rique du gouvernement - un service dÃ©diÃ© au dÃ©veloppement de services numÃ©riques au Royaume-Uni et soutenant le projet GOV.UK.</i>  <i>Le commit lui-mÃªme est intÃ©ressant non pas tant avec les modifications du code qu'avec la description qui les accompagne ...</i> <br><br><img src="https://habrastorage.org/webt/iw/ez/ls/iwezlskublg1rm-81mn2fcdwmx4.png"><br>  <i>Image de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">xkcd # 1296</a></i> <br><br>  J'adore les descriptions de commit dans Git.  Lorsqu'ils sont utilisÃ©s correctement, ils peuvent Ãªtre appelÃ©s l'un des outils les plus puissants pour documenter l'Ã©volution de la base de code au cours de son existence.  Je veux illustrer mon point de vue avec l'exemple de ma description prÃ©fÃ©rÃ©e. <a name="habracut"></a><br><br>  Cet engagement remonte Ã  l'Ã©poque oÃ¹ je travaillais chez Government Digital Service.  Son auteur est un dÃ©veloppeur nommÃ© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dan Carley</a> , et il a un titre plutÃ´t banal: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Converti le modÃ¨le en US-ASCII pour corriger l'erreur</a> ." <br><br><blockquote>  Â«J'ai implÃ©mentÃ© plusieurs tests dans la branche des fonctionnalitÃ©s pour faire correspondre le contenu deÂ« / etc / nginx / router_routes.conf Â».  Ils fonctionnaient bien s'ils Ã©taient exÃ©cutÃ©s avec les commandes `bundle exec rake spec` ou` bundle exec rspec modules / router / spec`.  Mais lors de l'exÃ©cution de `bundle exec rake`, chaque bloc devrait Ã©chouer: <br><br><pre><code class="plaintext hljs">ArgumentError: invalid byte sequence in US-ASCII</code> </pre> <br>  Au final, j'ai trouvÃ© qu'aprÃ¨s l'exception Ã  l'expression `.with_content (//)`, toutes les erreurs disparaissent.  Qu'il n'y a pas de caractÃ¨res Ã©tranges dans le fichier de spÃ©cifications.  Et aussi qu'il peut Ãªtre jouÃ© en appelant Puppet dans le mÃªme interprÃ¨te: <br><br><pre> <code class="plaintext hljs"> rake -E 'require "puppet"' spec</code> </pre> <br>  Ce modÃ¨le semble Ãªtre le seul fichier de notre base de code encodÃ© avec 'utf-8'.  Tous les autres fichiers de 'us-ascii': <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ find modules -type f -exec file --mime {} \+ | grep utf modules/router/templates/routes.conf.erb: text/plain; charset=utf-8</code> </pre> <br>  Une tentative de transcodage en US-ASCII a Ã©chouÃ© en raison d'un seul caractÃ¨re qui ressemble Ã  un espace: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ iconv -f UTF8 -t US-ASCII modules/router/templates/routes.conf.erb 2&gt;&amp;1 | tail -n5 proxy_intercept_errors off; # Set proxy timeout to 50 seconds as a quick fix for problems # iconv: modules/router/templates/routes.conf.erb:458:3: cannot convert</code> </pre> <br>  AprÃ¨s l'avoir remplacÃ© (manuellement), le fichier est redevenu 'US-ASCII': <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ file --mime modules/router/templates/routes.conf.erb modules/router/templates/routes.conf.erb: text/plain; charset=us-ascii</code> </pre> <br>  Maintenant, les tests fonctionnent!  L'heure entiÃ¨re de ma vie ne peut pas Ãªtre restituÃ©e ... " </blockquote><br><div class="spoiler">  <b class="spoiler_title">Dans l'original</b> <div class="spoiler_text"><h2>  Convertir le modÃ¨le en US-ASCII pour corriger l'erreur </h2><br><blockquote>  J'ai introduit quelques tests dans une branche de fonctionnalitÃ© pour faire correspondre le contenu de <br>  `/ etc / nginx / router_routes.conf`.  Ils ont bien fonctionnÃ© lors de l'exÃ©cution avec `bundle exec <br>  rake spec` ou `bundle exec rspec modules / router / spec`.  Mais lorsqu'il est exÃ©cutÃ© en tant que <br>  `bundle exec rake` chacun devrait bloquer a Ã©chouÃ© avec: <br><br><pre> <code class="plaintext hljs"> ArgumentError: invalid byte sequence in US-ASCII</code> </pre> <br>  J'ai finalement trouvÃ© que la suppression des matchers `.with_content (//)` rendait <br>  les erreurs disparaissent.  Qu'il n'y avait pas de caractÃ¨res Ã©tranges dans le fichier de spÃ©cifications.  Et <br>  qu'il pourrait Ãªtre reproduit en exigeant Puppet dans le mÃªme interprÃ¨te avec: <br><br><pre> <code class="plaintext hljs"> rake -E 'require "puppet"' spec</code> </pre> <br>  Ce modÃ¨le particulier semble Ãªtre le seul fichier de notre base de code avec un <br>  codage identifiÃ© de Â«utf-8Â».  Tous les autres sont Â«us-asciiÂ»: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ find modules -type f -exec file --mime {} \+ | grep utf modules/router/templates/routes.conf.erb: text/plain; charset=utf-8</code> </pre> <br>  Tenter de reconvertir ce fichier en US-ASCII a identifiÃ© l'infraction <br>  personnage comme quelque chose qui ressemblait Ã  un espace: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ iconv -f UTF8 -t US-ASCII modules/router/templates/routes.conf.erb 2&gt;&amp;1 | tail -n5 proxy_intercept_errors off; # Set proxy timeout to 50 seconds as a quick fix for problems # iconv: modules/router/templates/routes.conf.erb:458:3: cannot convert</code> </pre> <br>  AprÃ¨s l'avoir remplacÃ© (Ã  la main), le fichier s'identifie Ã  nouveau comme Â«us-asciiÂ»: <br><br><pre> <code class="plaintext hljs"> dcarley-MBA:puppet dcarley$ file --mime modules/router/templates/routes.conf.erb modules/router/templates/routes.conf.erb: text/plain; charset=us-ascii</code> </pre> <br>  Maintenant, les tests fonctionnent!  Une heure de ma vie, je ne reviendrai pas .. </blockquote></div></div><br><img src="https://habrastorage.org/webt/qt/4_/7e/qt4_7esruvjc41if3v41fpgg_kk.png"><br><br>  Une petite digression: l'un des avantages du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dÃ©veloppement open source</a> pratiquÃ© dans GDS est que vous pouvez partager des exemples comme celui-ci en dehors de l'organisation qui les a crÃ©Ã©s.  Je ne sais pas qui a proposÃ© ce concept Ã  GDS pour la premiÃ¨re fois - au moment oÃ¹ j'ai rejoint l'organisation, il Ã©tait dÃ©jÃ  largement utilisÃ© - mais je suis infiniment reconnaissant envers cette personne. <br><br><h2>  Pourquoi j'aime ce commit </h2><br>  D'innombrables fois, je l'ai citÃ© comme un exemple de ce dont les descriptions de commit sont capables.  C'est un peu drÃ´le Ã  cause du ratio de changements dans le code et de la taille de la description, mais je ne l'aime pas du tout. <br><br>  Dans une autre entreprise, avec un autre dÃ©veloppeur, le message entier du commit pourrait Ãªtre rÃ©duit Ã  des phrases comme Â«remplacÃ© l'espaceÂ», Â«corrigÃ© l'erreurÂ» ou (selon la culture de l'Ã©quipe) Ã  des attaques contre l'inventeur d'espaces inextricables.  Au lieu de cela, Dan a pris le temps de crÃ©er une description dÃ©taillÃ©e utile aux autres.  Je voudrais m'attarder sur les raisons pour lesquelles je considÃ¨re cet engagement comme un trÃ¨s bon exemple. <br><br><h3>  Divulgue la raison des changements </h3><br>  Les meilleures descriptions de commits indiquent non seulement <b>ce qui</b> a changÃ©, mais expliquent Ã©galement <b>pourquoi</b> .  Dans notre cas: <br><br><blockquote>  J'ai implÃ©mentÃ© plusieurs tests dans la branche des fonctionnalitÃ©s pour faire correspondre le contenu de `/ etc / nginx / router_routes.conf`.  Ils fonctionnaient bien s'ils Ã©taient exÃ©cutÃ©s avec les commandes `bundle exec rake spec` ou` bundle exec rspec modules / router / spec`.  Mais lors de l'exÃ©cution de `bundle exec rake`, chaque bloc devrait Ã©chouer: <br><br><pre> <code class="plaintext hljs"> ArgumentError: invalid byte sequence in US-ASCII</code> </pre> </blockquote><br>  Sans un tel niveau de dÃ©tail, nous pourrions supposer que la validation a corrigÃ© l'erreur d'analyse dans un outil particulier.  GrÃ¢ce Ã  la description du commit, nous savons de quel type d'outil il s'agissait. <br><br>  Ce type d'informations peut s'avÃ©rer trÃ¨s utile et il est trop facile Ã  perdre, car les gens ont tendance Ã  oublier les subtilitÃ©s de leur travail, Ã  passer Ã  d'autres Ã©quipes et, finalement, Ã  quitter l'entreprise. <br><br><h3>  Bon pour la recherche </h3><br>  L'un des Ã©lÃ©ments clÃ©s de cette description est l'erreur elle-mÃªme, avec laquelle de nouvelles recherches ont commencÃ©: <br><br><blockquote>  ArgumentError: <br>  sÃ©quence d'octets invalide en US-ASCII </blockquote><br>  Quiconque rencontre cette erreur peut rechercher la base de code, soit en exÃ©cutant <code>git log --grep "invalid byte sequence"</code> , soit en utilisant la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recherche de</a> <code>git log --grep "invalid byte sequence"</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> .  En fait, Ã  en juger par les rÃ©sultats de la recherche, beaucoup l'ont dÃ©jÃ  fait et ont dÃ©couvert qui et quand faire face Ã  ce problÃ¨me et comment il a finalement Ã©tÃ© rÃ©solu. <br><br><h3>  Fournit une image complÃ¨te </h3><br>  Le message de validation dÃ©taille l'apparence du problÃ¨me, la maniÃ¨re dont il a Ã©tÃ© Ã©tudiÃ© et rÃ©solu.  Par exemple: <br><br><blockquote>  Au final, j'ai trouvÃ© qu'aprÃ¨s l'exception Ã  l'expression `.with_content (//)`, toutes les erreurs disparaissent.  Qu'il n'y a pas de caractÃ¨res Ã©tranges dans le fichier de spÃ©cifications.  Et aussi qu'il peut Ãªtre jouÃ© en appelant Puppet dans le mÃªme interprÃ¨te. </blockquote><br>  C'est l'un des domaines dans lesquels les messages lors des validations sont vraiment capables de s'afficher, car ils dÃ©crivent le changement lui-mÃªme, et non un fichier, une fonction ou une ligne de code.  Cela en fait un endroit idÃ©al pour stocker ce type d'informations d'aventure de base de code supplÃ©mentaires. <br><br><h3>  Rend tout le monde un peu plus intelligent </h3><br>  Dan a fait une chose ici, que j'apprÃ©cie vraiment: faire venir toutes les Ã©quipes que j'ai exÃ©cutÃ©es Ã  chaque Ã©tape.  Il s'agit d'un excellent moyen abordable de partager des connaissances en Ã©quipe.  En lisant sa description du commit, vous pouvez en apprendre beaucoup sur les outils Unix: <br><br><ul><li>  vous pouvez passer l'argument <code>-exec</code> pour <code>find</code> pour exÃ©cuter une commande avec chaque fichier trouvÃ©; </li><li>  ajouter <code>\+</code> Ã  la fin de la commande fait quelque chose de trÃ¨s intÃ©ressant (transmet plusieurs noms de fichier Ã  la commande <code>file</code> et n'exÃ©cute pas la commande une fois pour chaque fichier); </li><li>  <code>file --mime</code> permet de connaÃ®tre le type MIME du fichier; </li><li>  il y a un utilitaire <code>iconv</code> . </li></ul><br>  Une personne qui regarde une description peut en apprendre davantage sur toutes ces choses.  Quiconque tombe sur ce commit plus tard en apprendra Ã©galement davantage sur ces choses.  Si vous multipliez cette approche pour des engagements sur une longue pÃ©riode et un nombre suffisant d'entre eux, cela peut devenir un puissant stimulant pour l'Ã©quipe. <br><br><h3>  DÃ©veloppe l'empathie et la confiance </h3><br><blockquote>  Maintenant, les tests fonctionnent!  L'heure entiÃ¨re de ma vie ne peut Ãªtre restituÃ©e ... </blockquote><br>  Le dernier paragraphe ajoute un minimum d'humanitÃ©.  En lisant ces mots, il est difficile de ne pas ressentir la dÃ©ception de Dan, qui a dÃ» passer une heure entiÃ¨re Ã  chercher une erreur cachÃ©e, et la satisfaction de la corriger. <br><br>  Imaginez maintenant un message similaire attachÃ© Ã  un hack temporaire ou Ã  un fragment du code prototype qui est entrÃ© en production et Â«a pris racineÂ» (comme c'est souvent le cas avec de tels fragments).  Cette description du commit rappelle Ã  chacun que derriÃ¨re chaque changement se trouve une personne qui prend la meilleure dÃ©cision possible, compte tenu des informations disponibles Ã  ce moment-lÃ . <br><br><h2>  Les bons engagements comptent </h2><br>  J'avoue que c'est un exemple extrÃªme, et je ne m'attends pas Ã  ce que tous les commits (en particulier d'une telle portÃ©e) offrent le mÃªme niveau de dÃ©tail.  Cependant, je pense toujours que c'est un excellent exemple pour expliquer la raison du changement, aider les autres Ã  apprendre de nouvelles choses et contribuer au modÃ¨le mental collectif associÃ© Ã  la base de code. <br><br>  Si vous voulez en savoir un peu plus sur les avantages d'une bonne description des validations et sur certains outils qui facilitent la structuration des modifications, je peux recommander les matÃ©riaux suivants: <br><br><ul><li>  Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Raconter des histoires Ã  travers vos commits</a> Â» par Joel Chippindale; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une branche dans le temps</a> " par Tekin SÃ¼leyman. </li></ul><br><h2>  PS du traducteur </h2><br>  Lisez aussi dans notre blog: <br><br><ul><li>  Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Git arrive!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">6 erreurs Git typiques et comment les corriger</a> "; </li><li>  Â«Une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">merveilleuse astuce pour faire un mainteneur de projet open source par jour</a> Â»; </li><li>  Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Qu'ont en commun les grands projets Open Source rÃ©ussis?</a>  ". </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr472278/">https://habr.com/ru/post/fr472278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr472264/index.html">ArchÃ©ologie numÃ©rique et rÃ©alitÃ© virtuelle ou comment j'ai essayÃ© de me faire des amis avec le BIM et la VR</a></li>
<li><a href="../fr472268/index.html">AmÃ©lioration des contrÃ´les Microsoft Edge sur Chromium</a></li>
<li><a href="../fr472270/index.html">Â«Vous n'avez pas accÃ¨s Ã  la priÃ¨re actuelleÂ»: des perles hi-tech du Vatican ont Ã©tÃ© piratÃ©es en 15 minutes</a></li>
<li><a href="../fr472272/index.html">Un nouveau jeu avec une vieille ambiance sur Three.js. 2e partie</a></li>
<li><a href="../fr472274/index.html">SSH Ã  distance: conseils et astuces</a></li>
<li><a href="../fr472280/index.html">La tÃ¢che de dÃ©terminer la prÃ©sence d'une paume sur un scanner veineux</a></li>
<li><a href="../fr472288/index.html">9 extensions de navigateur utiles pour les dÃ©veloppeurs (liste pour 2020)</a></li>
<li><a href="../fr472290/index.html">Structures vs classes</a></li>
<li><a href="../fr472292/index.html">Blocage de contenu: la scÃ¨ne mondiale</a></li>
<li><a href="../fr472294/index.html">CrÃ©ez des jeux et des vidÃ©os sur YouTube. Mon expÃ©rience d'interaction et les revenus de cette</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>