<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤑 🎍 ⌚️ 为“ OnAir”游戏创建角色的头像 👩🏿‍🤝‍👩🏽 🔯 🕊️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="下午好 我叫Daria，我是RainStyle制作工作室的3D艺术家。 我们目前正在开发一款名为“直播”的科幻恐怖游戏。 



 游戏讲述了主人公意外发生的神秘事件，后者意外地留在了美国旅馆Algol。 这件事将彻底改变他的生活，使他面对未知的事物。 

 这是我们的第一个游戏项目，我们在其中尝试...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>为“ OnAir”游戏创建角色的头像</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471288/"> 下午好 我叫Daria，我是RainStyle制作工作室的3D艺术家。 我们目前正在开发一款名为<b>“</b>直播”的科幻恐怖游戏。 <br><br><img src="https://habrastorage.org/webt/kx/a4/x0/kxa4x0nk1p-invxwlnmddbywfkm.png" alt="图片"><br><br> 游戏讲述了主人公意外发生的神秘事件，后者意外地留在了美国旅馆Algol。 这件事将彻底改变他的生活，使他面对未知的事物。 <br><a name="habracut"></a><br> 这是我们的第一个游戏项目，我们在其中尝试实现角色的最大真实感，传达他们的情感和角色。 因此，为了创建它们，决定使用面部扫描技术。 作为项目目标的一部分，我们需要为角色提供两个详细程度的信息：渲染（用于电影）和低多边形（用于游戏本身）。 <br><br> 游戏是在Unreal Engine 4上开发的。我们计划编写几篇文章，其中将详细描述角色准备的阶段。 <br><br> 目前，我们正在创建游戏的演示版本，该版本将很快出现在Steam中。 在本文中，我将讨论创建游戏主角面孔的初始阶段。 <br><br><img src="https://habrastorage.org/webt/-e/ce/rh/-ecerhoq3v8iuxdyublvhwuwfd8.png" alt="图片"><br><br><h4> 第一部分 </h4><br> 下图显示了我们在处理扫描后收到的一些情绪。 <br><br><img src="https://habrastorage.org/webt/fd/tc/wt/fdtcwtsvrpdodfwomu8r6_np_g4.png" alt="图片"><br><br> 基本上，它们是夸张的，似乎并不现实。 这是有目的的。 事实是，这种创建面的方法的基础是混合“混合形状”形式的原理。 也就是说，这些情感中的每一种都不会以“纯粹”的形式应用，而是会与其他情感组合使用。 我将在文章的最后详细讨论。 首先，您需要弄清楚如何处理扫描头以及如何使用它。 显然，扫描的拓扑不允许将其用作模型，但是通过烘焙法线贴图，我们可以获得脸部，皱纹，毛孔，肿块或疤痕的主要特征。 同样从扫描中，我们可以提取基色的纹理。 <br><br><img src="https://habrastorage.org/webt/4l/ex/lr/4lexlrzmipmxepu4d2uqhs1ocgw.png" alt="图片"><br><br>  Wrap 3.3程序将为我们提供帮助。 它被广泛用于处理扫描的模型。 在其帮助下，我们将把未来的头部模型投影到扫描仪上。 <br><br><h4> 第二部分 </h4><br> 首先，您需要创建所谓的基础网格。 也就是说，中性的面部表情将成为所有情感的基础。 我们的中性情绪扫描如下所示： <br><br><img src="https://habrastorage.org/webt/bf/zm/9r/bfzm9rnkwmw7whotrzfbolxmcym.png" alt="图片"><br><br>  Wrap 3.3程序具有一个节点系统，即所有功能均以通过链链接在一起的节点（节点）的形式呈现。 <br><br> 使用Tab键执行节点选择。 使用LoadGeom和LoadImage节点，加载带有中性情绪的扫描及其对应的纹理。 为此，请在“文件名”窗口中指定路径。 在“ LoadGeom”节点的设置中，可以选择各种显示几何的模式（下图禁用了线框功能）。 在这里，您还可以更改几何图形的颜色（如果连接了纹理，则不起作用），坐标和比例。 <br><br><img src="https://habrastorage.org/webt/jj/sa/ck/jjsacktagmrzkvs25xuhzuq0fos.png" alt="图片"><br><br> 接下来，您需要加载基础网格物体，该网格物体将投影到此扫描中。 您可以在“画廊”选项卡上找到它。 这里有许多现成的情绪。 在这种情况下，我选择Basemesh。 <br><br><img src="https://habrastorage.org/webt/-v/lc/b7/-vlcb7otf7kgk5o4zzbnwhdkvq4.png" alt="图片"><br><br>  Basemesh应该与扫描大致匹配。 为此，可以使用坐标轴。 <br><br> 要将基础网格物体投影到扫描中，我使用“包裹”节点。 当您将鼠标悬停在节点的节点上时，将显示提示：第一个节点“浮动几何”（用于投影的几何形状），第二个节点“ Fixet几何”（用于在其上投影几何的固定对象）（在我们的示例中，这是一种带有中性情绪的扫描）。 <br><br><img src="https://habrastorage.org/webt/xd/y0/mc/xdy0mcmzi9irpyydokryacbctla.png" alt="图片"><br><br> 要开始计算，必须在两个模型上标记彼此对应的点。 为此，使用了“选择点”节点，该节点连接到模型的相应节点。 选择此节点后，转到“可视编辑器”选项卡。 随附的“同步视图”功能可让您同步左右窗口的摄像机。 <br><br><img src="https://habrastorage.org/webt/8f/ow/uc/8fowucelwz7738je5jm2xp9gkxc.png" alt="图片"><br><br> 如果投影模型包含应保留的多边形，则必须使用“选择多边形”功能选择它们。 否则，可能会出现与网格的内部细节相关的伪影。 <br><br><img src="https://habrastorage.org/webt/jr/zv/dz/jrzvdzuikyktk64wpo_cs4n62yi.png" alt="图片"><br><br> 要使用“选择多边形”节点，请使用“可视编辑器”选项卡。 在这里，您可以选择将图库中的模型分为多个多边形组的多边形，这简化了任务：可以在顶部面板上选择或取消选择它们。 <br><br> 我强调了喉咙，鼻孔，极端的眼睑和下颈的内部。 <br><br><img src="https://habrastorage.org/webt/2v/nj/97/2vnj97z73izx0zdbnvvlefk4aja.png" alt="图片"><br><br><img src="https://habrastorage.org/webt/so/ps/rc/sopsrc9xofh9bcneqnj8grhh2lm.png" alt="图片"><br><br> 之后，将正确投影模型。 <br><br><img src="https://habrastorage.org/webt/i2/52/78/i25278qwzpx0x0a-s13wj4vn8wk.png" alt="图片"><br><br> 另外，为了获得更细粒度的信息，可以使用“细分”节点。 它连接到基础网格物体，下面的所有节点都连接到其下部节点（输出）。 <br><br><img src="https://habrastorage.org/webt/u7/s-/dd/u7s-ddnr9ctkghve6wicg-x7qic.png" alt="图片"><br><br> 接下来，将纹理从扫描烘焙到基础网格。 为此，使用了“传输纹理”节点。 源几何节点连接到将要烘焙纹理的模型。 在我们的情况下，这是一次扫描。 因为我们将使用已经修改的投影几何体，所以目标几何体节点将连接到基础网格物体，但不连接到LoadGeom节点，而是连接到包装节点。 <br><br><img src="https://habrastorage.org/webt/em/vj/ra/emvjrap3jv0drbe42u8lxjspjn8.png" alt="图片"><br><br> 在此节点的设置中，可以选择烘焙纹理的质量。 之后，值得添加“外推图像”节点以填充透明位置，并使用“保存图像”节点并按“计算当前帧”按钮保存生成的纹理。 使用“保存几何体”节点以相同的方式保存几何。 <br><br><img src="https://habrastorage.org/webt/q8/ol/xq/q8olxqwsxreywugalgqd5gfh1ek.png" alt="图片"><br><br><h4> 第三部分 </h4><br> 获得中性的情感和质感后，我们可以继续获取其他情感的几何形状。 为此，请向扫描模型和Basemesh加载纹理。 <br><br><img src="https://habrastorage.org/webt/sd/ey/nx/sdeynxlfx4nmbc9hefsxeq_y-v4.png" alt="图片"><br><br> 接下来，您需要根据扫描对齐Basemesh。 对于初学者，您可以使用坐标轴近似比较模型。 <br><br><img src="https://habrastorage.org/webt/oh/ka/7x/ohka7x47eywbrue0da6kbhgc9e4.png" alt="图片"><br><br> 允许您更准确地将模型彼此相对对齐的节点-刚性对齐。 浮动几何节点连接需要对齐的几何。 分别在“固定几何”节点中，将存在静态几何（在我们的示例中，这是一次扫描）。 <br><br><img src="https://habrastorage.org/webt/-1/8f/an/-18fanskyoz3mzz3ispdjlsgt9k.png" alt="图片"><br><br> 使用“刚性路线”节点时，必须使用“选择点”节点： <br><br><img src="https://habrastorage.org/webt/yx/nk/yz/yxnkyzv8vfifpocy9rezqo77sbq.png" alt="图片"><br><br> 我的模型具有控制标记，可以简化选择点的任务。 为了使模型彼此对齐，必须将点放置在描绘特定情绪时会稍有变化的面部部分上。 对于这种情绪，这是前额，鼻子的上部，脖子等。 另外，建议将点放置在模型的所有侧面（例如，不仅在脸部，而且在头和耳朵的后部）。 <br><br><img src="https://habrastorage.org/webt/qy/88/yf/qy88yf5dndsigcayzn7cruu1m-4.png" alt="图片"><br><br> 结果，我们使模型相对于彼此对齐： <br><br><img src="https://habrastorage.org/webt/bx/l9/ao/bxl9aog0pbuv2bap92i0sysyi9g.png" alt="图片"><br><br> 在“刚性路线”节点的设置中，有一个“匹配错位”功能。 如果模型也需要缩放，则使用它。 <br><br> 之后，您可以开始将基础网格物体投影到扫描中。 为此，我们将使用“光流包裹”节点。 它使您可以根据扫描的纹理对齐几何。 同时，除皱纹，皱纹和其他变化外，最终的情绪纹理将与基本网格的纹理完全重合。 使用此方法时，皮肤和毛孔的所有不规则之处均会保留。 <br><br><img src="https://habrastorage.org/webt/mb/7m/iv/mb7mivt59e9su6kjmrpk1hnugwa.png" alt="图片"><br><br> 与第一种情况一样，在使用光流之前，请使用“选择多边形”节点： <br><br><img src="https://habrastorage.org/webt/ju/4v/to/ju4vto3ddusr5jsvugf6odd_qbi.png" alt="图片"><br><br> 因此，头部的固定部分将保持在原位。 <br><br> 您也可以使用“选择点”节点。 以下是面部运动部分上的点： <br><br><img src="https://habrastorage.org/webt/ph/3h/gw/ph3hgwcigqpzp7k8phlpe-n-d78.png" alt="图片"><br><br> 接下来，转到光流设置。 可以调整的摄像机出现在模型周围的“可视编辑器”窗口中。 <br><br><img src="https://habrastorage.org/webt/kf/lk/gs/kflkgszewb1rqqb5mruaw2fpo38.png" alt="图片"><br><br> 顶部有一个下拉菜单，您可以使用它从相机查看视图。 默认情况下有13个，您需要进行设置以使脸部完全适合框架。 <br><br><img src="https://habrastorage.org/webt/nk/rz/da/nkrzdal-nf0bmdccxubbr2jfgnk.png" alt="图片"><br><br> 根据开发人员的建议，除“最终分辨率”和“光流平滑度”最终参数外，我几乎保留了几乎所有设置： <br><br><img src="https://habrastorage.org/webt/rs/og/t3/rsogt301d29-fmdkw3-w_ikb4f8.png" alt="图片"><br><br> 之后，您可以单击“计算”并查看结果： <br><br><img src="https://habrastorage.org/webt/oq/sh/wv/oqshwvwqspwpktcdmrtcdaan0ru.png" alt="图片"><br><br> 将网格精确投影到扫描后，您需要烘焙纹理。 这是根据与本文第一部分相同的原则完成的： <br><br><img src="https://habrastorage.org/webt/5q/i3/ua/5qi3uariv6ry89ideprjf9yonmo.png" alt="图片"><br><br> 因此，如果将结果纹理与基础网格物体的纹理相结合，将添加一些细节，但同时，控制点将重合： <br><br><img src="https://habrastorage.org/webt/fs/ws/tk/fswstkeyd2cmmu2xdzdja_3ffbg.png" alt="图片"><br><br> 之后，可以保存纹理和生成的几何图形。 <br><br><img src="https://habrastorage.org/webt/fg/o1/sz/fgo1szpef_fqluip7uf4uqgehko.png" alt="图片"><br><br> 结果，我们得到了一种带有纹理的新情感网格。 <br><br><h4> 第4部分 </h4><br> 混合形状方法可让您“混合情绪”。 为此，请在“混合形状”节点中加载已经接收的网格。 <br><br><img src="https://habrastorage.org/webt/jl/fi/i2/jlfii24nzvg4ptcyfl7bawhwbbc.png" alt="图片"><br><br> 我把中性的情绪带入了第一个结。 在节点设置中移动滑块，您可以选择表达这种情感的强度。 为了使该方法起作用，模型必须具有相同的拓扑。 <br><br><img src="https://habrastorage.org/webt/zx/0k/o5/zx0ko5teguiqiogh4qcsc8cyw_u.png" alt="图片"><br><br><img src="https://habrastorage.org/webt/vi/ld/uq/vilduqi1jwtzgr662xx4nsyh85q.png" alt="图片"><br><br><h4> 结果 </h4><br> 上述过程只是大量工作的一小部分。 收到LowPoly头部模型后，有必要创建法线贴图，粗糙度，次表面等，并配置着色器（在我们的示例中，我们为渲染和引擎配置了着色器）。 眼睛，衣服和头发也分别创建。 还值得注意的是，只有三个人执行了此任务。 这是我们第一次创建高度详细的角色。 我们对结果感到满意，但我们将继续努力。 <br><br><img src="https://habrastorage.org/webt/25/wo/-m/25wo-m_68qxmzq4wtff-2px721u.jpeg" alt="图片"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN471288/">https://habr.com/ru/post/zh-CN471288/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN471268/index.html">了解消息代理。 通过ActiveMQ和Kafka学习消息传递的机制。 第2章ActiveMQ</a></li>
<li><a href="../zh-CN471270/index.html">自动从Google PageSpeed Insights [模板]接收有关网站加载速度的数据</a></li>
<li><a href="../zh-CN471272/index.html">C ++中强类型键入的好处：亲身体验</a></li>
<li><a href="../zh-CN471278/index.html">通过模板以俄语生成文本</a></li>
<li><a href="../zh-CN471282/index.html">使用Fast.ai在X光片中寻找肺炎</a></li>
<li><a href="../zh-CN471294/index.html">关于Haskell，C ++和程序员的诗</a></li>
<li><a href="../zh-CN471296/index.html">精益制造-效率工具</a></li>
<li><a href="../zh-CN471298/index.html">比伯和碧兰挥笔。 AI现在正在唱歌</a></li>
<li><a href="../zh-CN471300/index.html">反应：提升状态将杀死您的应用程序</a></li>
<li><a href="../zh-CN471302/index.html">中国的用户验证和社会信用</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>