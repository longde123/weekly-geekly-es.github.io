<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöó ‚Ü™Ô∏è ‚òòÔ∏è Mehrseitiges SPA in Python üö¶ üÖæÔ∏è üò¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Br√ºcke zwischen Python und React 

 Eine Eule ist ein Nano-Framework, das in andere Frameworks integriert werden kann. 
 Bild von sova.online, auf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mehrseitiges SPA in Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424779/">  <b>Die Br√ºcke zwischen Python und React</b> <br><br>  Eine Eule ist ein Nano-Framework, das in andere Frameworks integriert werden kann. <br>  Bild von sova.online, auf dem 3 http-Server laufen: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://sova.online/</a> - nur Falcon <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://sova.online:8000/</a> - nur Django <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://sova.online:8001/</a> - nur Python (Login: 1, Passwort: 1) <br>  Es gibt Quellcodes und Installationsanweisungen.  Es gibt dort keine Werbung. <br><br><img src="https://habrastorage.org/webt/gx/yn/h9/gxynh9nwwhuq9ik8ius_k7lvjgo.jpeg"><br><a name="habracut"></a><br>  Die Idee, Websites in Python mit Rendering in React zu erstellen, ist nicht neu.  Es gibt ein wunderbares Framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://plot.ly/products/dash/</a> , warum etwas anderes tun? <br>  Erkl√§ren Sie: Owl ist nicht f√ºr die Entwicklung von Websites konzipiert.  Dies ist ein Tool zum Ersetzen von Thick Clients durch Anwendungen, die √ºber den Browser ausgef√ºhrt werden (Desktopanwendungen). <br><br>  - Was ist ein Webclient? <br>  - Nein.  Dies ist kein Webclient.  Dies ist eine Browser-Anwendung. <br>  - Verstehe nicht. <br>  - Leider verstehen viele Entwickler nicht. <br><br>  Im Allgemeinen habe ich aktiv mit mehreren Internetanwendungen gearbeitet. <br><br>  <b>Online-Kunde der Ugra Bank (die Bank ist geschlossen).</b> <br>  Es war eine gute Anwendung, aber es war ein Java-Applet, d.h.  Thick Client √ºber den Browser gestartet.  Und die Bank von Ugra und Applets in der Vergangenheit. <br><br>  <b>Online-Client der VTB-24 Bank (die Bank ist geschlossen).</b> <br>  Ich bin ein Humanist, aber nachdem ich mit diesem Wunder gearbeitet hatte, tauchten grausame Gedanken auf wie: "Zwinge den Entwickler, 1000 Gehaltsschecks darin zu registrieren". <br>  Dar√ºber hinaus ist er als Web-Client wundersch√∂n.  Die Animation wird auf einem Mobiltelefon ge√∂ffnet.  Wow!  Cool! <br>  Ich fragte einen Freund Buchhalter: Wie arbeiten Sie mit ihm? <br>  Sie sagt: gro√üartig!  Ich lade die Daten in 1s, in 1s arbeite ich, ich lade die Ergebnisse zur√ºck. <br><br>  <b>Sberbank Online-Client</b> <br>  Zufriedenstellender Kunde, Sie k√∂nnen arbeiten.  Als ich gebeten wurde, ihn zu bewerten, gab ich ihm 3 von 5 Punkten und gab ihm eine Liste mit Kommentaren.  Dies ist mit meinen 10 Zahlungen pro Monat.  Diejenigen, die 100 Rechnungen pro Tag machen, laden wahrscheinlich Informationen hoch. <br><br>  Zahlung ausf√ºllen. <br><img src="https://habrastorage.org/webt/kx/0a/h2/kx0ah27hdkvgc6ob0-16ifdx5oq.jpeg"><br>  Der gr√ºne Bereich, der 20% des Bildschirms einnimmt, ist das Men√º.  Es st√∂rt nicht nur (Position: fest), es sagt, dass der Entwickler kein Profi ist.  Wenn ich eine Zahlung erstellt habe, sollte der Bildschirm angezeigt werden.  3 Schaltfl√§chen: "Erstellen", "Als Vorlage speichern", "Abbrechen".  Diese Schaltfl√§chen sind (aus irgendeinem Grund unten).  Dies ist kein mehrseitiges SPA: Wenn Sie auf den Men√ºpunkt klicken, gehen die Daten im Formular verloren. <br>  Derjenige, der dies getan hat, wird nicht einmal verstehen, was das Schlagen ist: "Normalerweise macht es jeder, eine solche Bibliothek, Leute arbeiten ...".  Und er hat recht.  Sie m√ºssen den Projektmanager fragen, und f√ºr den Manager sind die Datenbanken und Ebenen im konzeptionellen Modell die Hauptsache.  Und Formen - wir werden Jungen einstellen, sie werden zeichnen.  Und sie sind wahrscheinlich stolz auf diesen Hack. <br><br>  <b>Handelsetagen (5 St√ºck, 44 Bundesgesetze)</b> <br>  Dies sind wirklich Anwendungen (keine Web-Clients).  Aber ich mag die Feldsteuerungen nicht. <br>  Beispiele: <br><img src="https://habrastorage.org/webt/ap/wl/in/apwlinkughplv39l_m4qsopioza.jpeg"><br><br>  Es ist seltsam ausgerichtet, die Breite des Feldes ist eindeutig unzureichend, es gibt keine automatische H√∂he im Eingabefeld. <br><br>  Ein weiteres Beispiel.  Es gibt keine dd.mm.yyyy-Vorlage im Feld "Ver√∂ffentlichungsdatum", der Kalender ist fehlerhaft, das Kalendersymbol ist be√§ngstigend: <br><img src="https://habrastorage.org/webt/zl/lk/6z/zllk6zxsfvaoxyq9qk7p9unosjw.jpeg"><br><br>  Liste im rts-Angebot: Der aktuelle Eintrag ist farblich hervorgehoben, die Pfeile k√∂nnen sich in der Liste bewegen, es erfolgt jedoch kein automatisches Scrollen (Sie k√∂nnen vom Bildschirmrand weglaufen). Weder die Eingabetaste noch die Leertaste √∂ffnen den Link. Die Registerkarte ist nicht an den aktuellen Datensatz angeh√§ngt.  Obwohl Sie den Link nur mit der Maus √∂ffnen k√∂nnen, bewerte ich das Steuerelement mit einem Pluszeichen.  Eine solche Funktionalit√§t (das aktuelle Dokument merken und hervorheben) reicht mir in mail.ru nicht aus <br><br>  Es scheint wie kleine Dinge.  Die professionelle Anwendung unterscheidet sich jedoch in Details von der semiprofessionellen.  Dem Endbenutzer ist es egal, welche Datenbank Sie haben und wie viele Ebenen im konzeptionellen Modell vorhanden sind.  Es funktioniert mit Bildschirmformularen und hat drei Anforderungen: funktional, bequem, schnell. <br>  Leider wird die Wahl des Systems von IT-Spezialisten und Vorgesetzten bestimmt, die selbst nicht mit dem System gearbeitet haben und nicht funktionieren werden.  Sie werden die Geschwindigkeit sch√§tzen, sie werden die Funktionalit√§t sch√§tzen, wie sie sie verstehen, und sie k√ºmmern sich nicht um die Bequemlichkeit, vor allem sch√∂n zu sein. <br>  Pavel Valeryevich Durov hat weder ein soziales Netzwerk noch einen Boten erfunden.  Er tat, was die Benutzer brauchten, bequem und sch√∂n.  Und die Leute sch√§tzten dies, auch finanziell. <br><br>  Owl ist ein Tool zum Erstellen einer professionellen Benutzeroberfl√§che. <br>  Was bedeutet das zum Beispiel EDMS? <br><br>  Es gibt ein EDMS, es hat 3 Benutzergruppen: <br>  Vorgesetzte <br>  Spezialisten f√ºr Dokumentenvorbereitung <br>  B√ºroangestellte. <br><br>  Chefs, sie sind wie Kinder.  Sie m√ºssen einfach und sch√∂n sein.  Idealerweise 1 Taste und 1 Feld.  Und um ein bisschen mehr zu zeigen.  Ein Web-Client und nat√ºrlich ein mobiler Client zum Vorf√ºhren. <br><br>  Spezialisten.  Web-Client, Cross Social Network / Mailer.  Vergessen Sie nicht, dass es viele Spezialisten gibt, die geschult werden m√ºssen.  Je vertrauter die Umgebung f√ºr sie ist, desto besser.  Der mobile Client ist auch n√ºtzlich, wenn der Sicherheitsdienst dies zul√§sst. <br><br>  B√ºroangestellte.  Hier kommt die Eule zum Einsatz.  B√ºroangestellte sind eine systembildende Gruppe von Benutzern.  Alle anderen k√∂nnen krank werden / Urlaub machen / aufh√∂ren, es zu benutzen - das EDMS wird funktionieren.  Wenn die Registrierung stoppt, ist alles aktiv. <br>  B√ºroarbeit ist ein F√∂rderer, und hier ist alles wichtig, alles: Schriftarten, Halbt√∂ne, automatisches Ausf√ºllen, √úberpr√ºfen von Werten, einfache Eingabe usw. <br>  EDS "Fall".  Die B√ºros der Darsteller werden auf dem Web-Client erstellt, das B√ºro ist ein fetter Client.  Alles ist in Ordnung, aber es wird funktionieren, bis die Regierung Windows von Regierungsbeh√∂rden verbietet.  Ich liebe Win 7, aber wenn ich der Herrscher w√§re, w√ºrde der IT-Markt mit neuen Auftr√§gen belebt, und MS blieb in hellem Ged√§chtnis.  √úbrigens hat Anton Siluanov am 6. Dezember eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Richtlinie</a> zum √úbergang zu inl√§ndischer Software unterzeichnet. <br><br>  <b>Sova.online</b> <br><br>  Wie eine Eule ein Formular √∂ffnet. <br>  Ohne mehrseitig. <br>  Das zentrale Element der Eule ist die Dokumentkomponente.  Wenn Sie auf der Startseite Strg-U dr√ºcken, wird alles angezeigt, was Sie zum Erstellen eines Objekts der Document-Klasse ben√∂tigen: <br>  - Datenfelder der Datenbank; <br>  - URL des anzuzeigenden Formulars; <br>  - dbAlias, unid - f√ºr die Arbeit mit der Datenbank; <br>  - da noch etwas. <br><br>  In gewissem Ma√üe ist Document ein Analogon der Redux-Form. <br>  Das Formular wird als JSON-Zeichenfolge geladen. Das vorherige W√∂rterbuch wird dann zu einem Objekt mit Stil, Klassenname und einem Array (Liste) von Elementen.  Das Array wird mit id = root im Formular in das Element eingef√ºgt <pre><code class="plaintext hljs">&lt;div style className&gt;‚Ä¶‚Ä¶&lt;/div&gt;</code> </pre> <br>  Array-Elemente sind Objekte, die Tags beschreiben. <pre> <code class="plaintext hljs">&lt;div&gt;, &lt;a&gt;, &lt;img&gt;, &lt;button&gt;</code> </pre>  oder ein Array oder Komponenten. <br>  Die Boxfunktion ist f√ºr das Parsen des Arrays verantwortlich.  Wenn ein Element gefunden wird, das ein Array enth√§lt, ruft es sich selbst rekursiv auf. <br>  Der Nabel der Erde ist nat√ºrlich ein Div. <br>  Im einfachsten Fall ist dies eine Zeile: dict (div = 'Hallo', className = 'h2') <br>  Es kann jedoch ein Array (Array von Arrays) geben: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">style</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(**par)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-string"><span class="hljs-string">'style'</span></span>: {**par}} dict( <span class="hljs-comment"><span class="hljs-comment">#     sova.online style(position='relative'), readOnly = 1, div = [ dict( style(width=1000, margin='auto', paddingTop=20), div=[ { 'div': subFormTop.panel() }, { 'div': [subFormLeft.panel(), subFormRight.panel()], 'className': 'row' }, # { 'div': [subFormDown.panel()] }, ]), ] )</span></span></code> </pre> <br><br>  Es gibt 3 Bereiche (jeweils in einer separaten Datei: subFormTop.py usw.). <br>  subFormTop.panel () gibt ein Array zur√ºck, um das obere Bedienfeld zu erstellen. <br>  subFormLeft.panel () und subFormRight.panel () werden zu einer Zeichenfolge ('className': 'row') kombiniert und beschreiben das linke und rechte Bedienfeld. <br>  subFormDown.panel () ist auskommentiert (nicht n√ºtzlich). <br><br>  Es mag kompliziert erscheinen.  Aber das ist Python: Alles kann vereinfacht werden. <br>  Ein Beispiel f√ºr ein Formular aus der Zeitschrift ‚ÄûBerichte‚Äú.  Die labField-Funktion (label, DB_field_name) gibt ein Array von zwei W√∂rterb√ºchern (Tabellenzeile) zur√ºck: Das erste W√∂rterbuch ist {'div': label}, das zweite {'field': [DB_field_name, 'tx']}. <br><pre> <code class="python hljs">div = [ docTitle(<span class="hljs-string"><span class="hljs-string">''</span></span>), dict ( wl=<span class="hljs-string"><span class="hljs-string">'40mm'</span></span>, className=<span class="hljs-string"><span class="hljs-string">'cellbg-green'</span></span>, div=_table( labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'nodafd'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'_STARTINGTIME'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'_ENDTIME'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'CREATOR'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'REPORTCAT'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'REPORTNAME'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'REPORTTITLE'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'dt1'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'dt2'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">'  2'</span></span>, <span class="hljs-string"><span class="hljs-string">'dt3'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">'  2'</span></span>, <span class="hljs-string"><span class="hljs-string">'dt4'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'LBYEARS'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'GRGROUP'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'QUERYMAIN'</span></span>), labField(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'NOTES'</span></span>), )), sent(), ]</code> </pre><br><br><img src="https://habrastorage.org/webt/7u/ah/tw/7uahtweb5axodfbphubw5v3-okw.jpeg"><br><br>  Beispiele aus sova / api / forms / home / top.py (ab sova.online): <br><br>  Python-W√∂rterbuch <br>  {'a': 'React v16', 'href': 'https://reactjs.org'} <br>  Erzeugt eine klare Reaktionskomponente <br><pre> <code class="plaintext hljs">&lt;a href={'https://reactjs.org'}&gt;React v16&lt;/a&gt;</code> </pre> <br><br>  Img ist schlauer als der Standard - in Requisiten k√∂nnen Sie href und target angeben: <br><br>  Python: <br>  dict (img = 'image? react.ico', style = {'width': 16}, href = 'https: //reactjs.org') <br><br>  Ein Fragment eines Parsers, der ein Array von Objekten in Komponenten konvertiert (boxing.js): <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( td.img ) { <span class="hljs-comment"><span class="hljs-comment">// td ‚Äì    let img = &lt;img src={td.img} _/&gt;; return td.href ? &lt;a href={td.href} key={i} target={td.target}&gt;{img}&lt;/a&gt; : img; }</span></span></code> </pre><br><br>  Geben Sie in die Suchmaschine "React Component Library" ein.  Das Ergebnis ist vorhersehbar - sehr viel.  Aber all diese F√ºlle gilt f√ºr Websites, nicht f√ºr Anwendungen: <br>  Smart-Textarea ist vielleicht die einzige Steuerung, die zu mir passt. <br>  React-Select - Vereinfacht und √ºberarbeitet die Dropdown-Liste <br>  Datenauswahl / Kalender - fand nichts Passendes.  Er schrieb sein eigenes und nahm das eingebaute G.Chrome als Beispiel. <br>  Upload / Download - nichts passendes, schrieb mein eigenes. <br><br>  Imho: Websites haben eine traurige Zukunft.  Die √ºberwiegende Mehrheit der Benutzer wird in naher Zukunft keine Browser mehr verwenden (oder bereits gestoppt).  Das Telefon w√§chst mit dem Tablet zusammen und 1 Schuss von 10 Anwendungen wird die Anforderungen vollst√§ndig erf√ºllen. <br>  Ich habe bereits zweimal Programmierer getroffen, die nicht wissen, wie man eine E-Mail-Adresse richtig schreibt.  Warum sollten sie sich daran erinnern, was sie nicht benutzen?  Die Welt ver√§ndert sich. <br><br>  In Owl sind die Controller nicht perfekt, aber sie wurden f√ºr den Bediener und nicht f√ºr den Webbenutzer entwickelt. <br>  Als Beispiel das Formular ‚ÄûTransfer Mark‚Äú.  Eine ziemlich universelle Form, die verwendet wird, wenn es einen Chef gibt.  Felder, die das Verstecken steuern, sind im Screenshot rot eingekreist.  Zus√§tzliche Aufl√∂sungen werden automatisch ge√∂ffnet, sobald sie ausgef√ºllt werden, wenn im operativen Teil mehrere Anweisungen f√ºr verschiedene Gruppen von Interpreten mit unterschiedlichen Begriffen vorhanden sind.  Zwei Amtszeiten pro Gruppe: 1. Amtszeit bis 1. Darsteller, 2. Amtszeit f√ºr Mitausf√ºhrende. <br><img src="https://habrastorage.org/webt/yg/2q/f4/yg2qf4g9p3umqggkpduhnv4rgis.jpeg"><br><br>  Sie k√∂nnen das Formular <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HIER</a> ber√ºhren <br><br>  Ein Controller ist eine React-Komponente, die einem Datenbankfeld zugeordnet ist. <br>  Eine detaillierte Beschreibung der Steuerungen mit der M√∂glichkeit, ihre Funktion zu √ºberpr√ºfen, finden Sie auf Sova.online. <br>  Achten Sie auf die Typen rtf und json.  Rtf wird als Text angezeigt, aber wenn der Text ein {_ {object} _} -Konstrukt enth√§lt, f√ºhrt Owl json.parse f√ºr dieses Konstrukt aus und f√ºgt das Ergebnis dem Formular hinzu.  In einem Feld vom Typ json sollte eine Beschreibung des Arrays von Markup-Elementen gespeichert werden: [{ele1}, {ele2}, ...].  json.parse wird vor dem Rendern ausgef√ºhrt. <br>  In Feldern mit diesen Typen k√∂nnen Sie Markups in der Datenbank oder in Dateien speichern.  N√ºtzlich zum Berichten und Schreiben von Dokumentationen. <br><br>  Die Liste der Controller f√ºr alle Arten von Feldern (controller.js): <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> controller = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prop</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (prop.type) { <span class="hljs-comment"><span class="hljs-comment">//  case 'chb': return &lt;Checkbox {...prop}/&gt;; case 'lbse': // listbox single enable (    ) case 'lbme': // listbox multivalue enable // lbse/lbme -     ,   case 'tx': return &lt;Text {...prop}/&gt;; // smart-textarea case 'lbsd': // listbox single disables (    ) case 'lbmd': return &lt;ListBox {...prop}/&gt;; case 'dt': return (prop.readOnly ? &lt;Text {...prop} xValue={Util.dtRus(prop.xValue)} /&gt; : &lt;Datepicker {...prop}/&gt;); case 'fd': return &lt;ForDisplayOnly {...prop}/&gt;; case 'table': case 'gr': return &lt;Table {...prop}/&gt;; case 'rtf': return &lt;RTF {...prop}/&gt;; case 'json': return &lt;JsonArea {...prop}/&gt;; case 'list': return &lt;List {...prop}/&gt;; case 'view': return &lt;View {...prop}/&gt;; default: console.warn('  ', prop.xName, prop.type); return &lt;Text {...prop}/&gt;; }; };</span></span></code> </pre><br><br>  Eine Anwendung erfordert einen Mechanismus zum Manipulieren von Controllern. <br>  In einer Eule werden alle Dokumentencontroller in einer Dokumentvariablen gespeichert <br>  this.register <br>  Ich wagte es nicht, Refs zu verwenden, weil Ger√ºchte laut wurden, dass die Redaktion dies stornieren w√ºrde. <br>  Der Controller kann die folgenden Schnittstellen haben: <br>  getValue (param) <br>  setValue (Wert, Parameter) <br>  setFocus () <br>  changeDropList () <br><br>  Um auf das gew√ºnschte Feld zugreifen zu k√∂nnen, gibt es Dokumentmethoden <br>  getField (fieldName, param) <br>  setField (Feldname, Wert, Parameter) <br>  changeDropList (fieldName, param) <br>  setFocus (fieldName) <br>  F√ºr Felder vom Typ FileShow gibt es eine Methode fileShow ['FILES1 _']. HasAtt (), wobei FILES1_ der Name des Dateibereichs ist.  Gibt true zur√ºck, wenn Anh√§nge vorhanden sind.  In der √úbertragungsmarke solcher Bereiche 2. <br><br>  Controller k√∂nnen ein Neuberechnungsereignis generieren.  Wenn ein Handler f√ºr dieses Feld registriert ist, wird er ausgef√ºhrt.  Handler befinden sich in ladbaren JS-Dateien. <br>  Ein Beispiel und eine etwas vereinfachte Beschreibung: <br>  Es gibt ein Formular ‚ÄûTransfer Mark‚Äú (o.py).  Es enth√§lt die geladene o.js-Datei <br>  In o.js sind Handler registriert <br><pre> <code class="javascript hljs">recalc: { <span class="hljs-attr"><span class="hljs-attr">PROJECTO</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">doc</span></span></span><span class="hljs-function"> =&gt;</span></span> doc.forceUpdate(), <span class="hljs-attr"><span class="hljs-attr">WHOPRJ2</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">doc</span></span></span><span class="hljs-function"> =&gt;</span></span> doc.forceUpdate(), <span class="hljs-attr"><span class="hljs-attr">WHOPRJ3</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">doc</span></span></span><span class="hljs-function"> =&gt;</span></span> doc.forceUpdate(), ‚Ä¶   }</code> </pre> <br>  und auch Versteckbedingungen werden angegeben (project, op, prj1, prj2 ... prj5 ist die Eigenschaft "name" in der Beschreibung von divs): <br><pre> <code class="javascript hljs">hide: { <span class="hljs-attr"><span class="hljs-attr">project</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">doc</span></span></span><span class="hljs-function"> =&gt;</span></span> !doc.getField(<span class="hljs-string"><span class="hljs-string">'projectO'</span></span>), <span class="hljs-comment"><span class="hljs-comment">// ,   PROJECTO  op: doc =&gt; doc.getField('projectO'), // ,   PROJECTO   prj1: doc =&gt; !doc.getField('projectO'), prj2: doc =&gt; !doc.getField('projectO'), prj3: doc =&gt; !doc.getField('projectO') || (!doc.getField('whoPrj2') &amp;&amp; !doc.getField('whoPrj3')), prj4: doc =&gt; !doc.getField('projectO') || (!doc.getField('whoPrj3') &amp;&amp; !doc.getField('whoPrj4')), prj5: doc =&gt; !doc.getField('projectO') || (!doc.getField('whoPrj4') &amp;&amp; !doc.getField('whoPrj5')), },</span></span></code> </pre> <br><br>  So funktioniert es: Das Feld PROJECTO ist ein Kontrollk√§stchen. Wenn der Wert ge√§ndert wird, generiert der Controller ein Ereignis zum erneuten Berechnen. Das Dokument ruft den Handler recalc.PROJECTO (this) auf. <br>  Der Handler ruft einfach forceUpdate () auf, um das Dokument neu zu zeichnen. <br>  Beim Neuzeichnen wird gepr√ºft, ob die Komponente in den Requisiten einen Namen hat, ob f√ºr diesen Namen eine Funktion zum Verstecken [props.name] vorhanden ist und ob sie true zur√ºckgibt. <br>  prj3: doc =&gt;! doc.getField ('projectO') ||  (! doc.getField ('whoPrj2') &amp;&amp;! doc.getField ('whoPrj3')) <br>  Blenden Sie die dritte Aufl√∂sung aus (Bereich mit props.name === 'prj3'), wenn das Kontrollk√§stchen 'projectO' deaktiviert ist oder die Ausf√ºhrenden nicht in die Aufl√∂sungsfelder 2 und 3 eingegeben wurden (beide Felder 'whoPrj2' und 'whoPrj3' sind leer). <br>  Der Feldname beim Aufrufen von Funktionen unterscheidet nicht zwischen Gro√ü- und Kleinschreibung. <br>  WHOPRJ2 ist ein Kombinationsfeld. Wenn Sie einen Wert ausw√§hlen, generiert der Controller auch ein Neuberechnungsereignis, das auch ein erneutes Zeichnen verursacht.  Wenn Sie einen K√ºnstler in der zweiten Aufl√∂sung ausw√§hlen, √∂ffnen Sie die dritte. <br><br>  In den geladenen js-Dateien k√∂nnen Sie: <br>  - das Verstecken verwalten; <br>  - nur lesen verwalten; <br>  - auf Feld√§nderungen reagieren; <br>  - Tastenbefehle ausf√ºhren; <br>  - Validierung von Feldern und Formularen vor dem Speichern durchf√ºhren; <br><br>  Datei f√ºr Formular 'fo' herunterladen: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.sovaActions = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.sovaActions || {}; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.sovaActions.fo = { <span class="hljs-comment"><span class="hljs-comment">// fo ‚Äì      recalc: { //           PROJECTO: doc =&gt; doc.forceUpdate(), }, hide: { //   ,  true project: doc =&gt; !doc.getField('projectO'), }, readOnly: { //     ,  true who: doc =&gt; doc.getField('SENTFROMDB'), }, validate: { //         who: doc =&gt; doc.getField('who') ? '' : '   " "', form: doc =&gt; new Promise( (yes, no) =&gt; { let disableAutoOrder = false; for (let i = 1; i &lt;= 5; i++) { let val = doc.getField('RESPRJ' + i); disableAutoOrder |= /  /.test(val); } disableAutoOrder &amp;&amp; doc.setField('AUTOORDER', ''); yes(); }), }, cmd: { //    logoff: doc =&gt; { window.location.href = '/logoff' }, }, }</span></span></code> </pre> <br><br>  Validierung von Feldern - eine Funktion, die leer zur√ºckgibt, wenn alles in Ordnung ist, oder eine Meldung dar√ºber, was falsch ist.  Eine Eule konzentriert sich auf ein ung√ºltiges Feld. <br>  Validierung des Formulars - Versprechen.  Im Beispiel gibt es keine √úberpr√ºfungen (ja wird immer aufgerufen), nur etwas wird vor dem Senden an den Server getan. <br>  In der Redux-Form erfolgt die Validierung durch Trow - eine Art Wildheit. <br><br>  <i>F√ºr diejenigen, die mit Versprechungen nicht vertraut sind, ein Beispiel f√ºr das Einfachste:</i> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> confirmDlg = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ok, cancel</span></span></span><span class="hljs-function">) =&gt;</span></span> confirm(msg) ? ok(<span class="hljs-string"><span class="hljs-string">'  '</span></span>) : cancel(<span class="hljs-string"><span class="hljs-string">'  cancel'</span></span>)); confirmDlg(<span class="hljs-string"><span class="hljs-string">'  '</span></span>) .then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(s)) .catch( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(s));</code> </pre> <br><br>  Die Document-Klasse verf√ºgt √ºber mehrere vordefinierte Befehle, die in Schaltfl√§chen verwendet werden k√∂nnen: <br><br>  Bearbeiten: Wechseln Sie in den Formularbearbeitungsmodus <br>  Speichern: Formular speichern <br>  Schlie√üen: Schlie√üen Sie das Formular <br>  saveClose: Speichern und schlie√üen Sie das Formular <br><br>  prn: Drucken Sie ein Formular mit einer Auswahl einer Vorlage zum Drucken <br>  docOpen: Dokument √∂ffnen <br>  dbOpen: Protokoll √∂ffnen <br>  xopen: URL √∂ffnen <br>  newDoc: Erstellen Sie ein neues Dokument mit dem gew√ºnschten Formular <br><br>  Die Redux-Form API ist reicher - in der Eule nur das Notwendige. <br><br>  <b>Mehrseitig.</b> <br><br>  Die Document-Klasse erstellt ein Objekt (Formular), das in ein Element eingebettet ist. <pre> <code class="plaintext hljs">&lt;div id="root"&gt;&lt;/div&gt;</code> </pre>  . <br>  Wir werden es das "Stammdokument" nennen.  Wenn Sie dem Stammdokument ein Element hinzuf√ºgen <br>  &lt;div style = {{position: 'absolute', zIndex: 999}} /&gt; k√∂nnen Sie auch ein anderes Dokumentobjekt einf√ºgen. <br>  Was tun mit ladbaren Befehlshandlern?  Es ist ganz einfach: Jedes Formular verf√ºgt √ºber einen eigenen Handler (ein eigenes js), und das Stammdokument sollte die m√∂glicherweise erforderlichen laden. <br>  Beispiel f√ºr die Startseite sova.online (home.py) <br>  Das Formular home.py √∂ffnet Dokumente mit den Formularen "rkckg", "outlet", "outlet.gru", "o", um die Mehrseitigkeit zu demonstrieren. <br>  Damit alle Formulare ordnungsgem√§√ü funktionieren, m√ºssen Sie Skripte f√ºr diese Formulare in home.py registrieren: <br><pre> <code class="python hljs">javaScriptUrl = [<span class="hljs-string"><span class="hljs-string">'jsv?api/forms/rkckg/rkckg.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'jsv?api/forms/outlet_gru/outlet_gru.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'jsv?api/forms/outlet/outlet.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'jsv?api/forms/o/o.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'jsv?api/forms/home/home.js'</span></span>]</code> </pre> <br><br>  Da beim Aufrufen einer Funktion des Handlers der erste Parameter die Verkn√ºpfung zum Dokument √ºbergibt, werden die Aktionen mit dem gew√ºnschten Dokument ausgef√ºhrt. <br><br>  OOP und keine Wunder. <br><br>  Reagieren - nicht reagieren <br>  Ich habe das Berichtsformular bereits beschrieben.  Es wird √ºber den Berichts-Manager ge√∂ffnet (Pfeil "Reagieren") und beschreibt die Parameter zum Sammeln des Berichts. <br><img src="https://habrastorage.org/webt/rp/tb/vj/rptbvjkspfqes5nxti7wfmitbtu.jpeg"><br>  Die Berichte selbst (Pfeil ‚Äûnicht reagieren‚Äú) werden in untergeordneten Dokumenten mit der Form ‚ÄûBericht‚Äú in Form von HTML-Anh√§ngen gespeichert.  Wir waren an der Entwicklung von Berichten beteiligt, als React nicht da war. Das Formular ‚ÄûBericht‚Äú erwies sich als einfach (20 Zeilen HTML und 15 Zeilen Just-Js). Warum sollten wir √§ndern, was 8 Jahre lang funktioniert? <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ñffnen Sie den Berichts-Manager.</a> <br><br>  Das Berichtsformular besteht aus 4 Schaltfl√§chen und einem Iframe.  Die Eule vor dem √ñffnen des Dokuments ersetzt src = "" durch die URL-Zeile zum Herunterladen des HTML-Anhangs im Iframe. Den Rest erledigt der Browser. <br>  Die EXCEL / WORD-Schaltfl√§chen sind √§hnlich: Wir f√ºgen die URL-Schaltfl√§chen zum Herunterladen mit dem Dateinamen "report.html.xls" oder "report.html.doc" und dem entsprechenden MIME-Typ an der richtigen Stelle ein.  Der Rest wird von Excel / Word erledigt (‚Äûdiese intelligenten Tiere verstehen perfekt alles, was sie von ihnen wollen‚Äú). <br>  Von do_get.py: <br><br><pre> <code class="python hljs">downloadUrl = <span class="hljs-string"><span class="hljs-string">'/download/'</span></span> + fn + <span class="hljs-string"><span class="hljs-string">'?'</span></span> + <span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>.join([d.db.alias, d.unid, idbl, fsName, fzip, ctype, flen]) excel = <span class="hljs-string"><span class="hljs-string">'/download/%s.xls?%s'</span></span> % (fn, <span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>.join([d.db.alias, d.unid, idbl, fsName, fzip, <span class="hljs-string"><span class="hljs-string">'application/x-excel'</span></span>, flen])) word = <span class="hljs-string"><span class="hljs-string">'/download/%s.doc?%s'</span></span> % (fn, <span class="hljs-string"><span class="hljs-string">'&amp;'</span></span>.join([d.db.alias, d.unid, idbl, fsName, fzip, <span class="hljs-string"><span class="hljs-string">'application/msword'</span></span>, flen])) html = html.replace(<span class="hljs-string"><span class="hljs-string">'src=""'</span></span>, <span class="hljs-string"><span class="hljs-string">'src="%s"'</span></span> % downloadUrl).replace(<span class="hljs-string"><span class="hljs-string">'openExcel'</span></span>, excel).replace(<span class="hljs-string"><span class="hljs-string">'openWord'</span></span>, word)</code> </pre> <br><br>  Beim √ñffnen von HTML in Excel / Word gibt es Unterschiede zum Browser, diese sind jedoch gering.  Und der Artikel handelt nicht davon. <br><br>  <b>Machen Sie eine Form von Grund auf neu.</b> <br><br>  Ausgangsdaten: <br>  Es gibt 3 Funktionen <br>  def snd (* msg, cat = 'snd'): <br>  def err (* msg, cat = 'all'): <br>  def dbg (* msg, cat = 'snd'): <br>  , die mehr oder weniger gleichm√§√üig im Code verteilt sind und Fehlermeldungen und anderen Mist in die Protokolldatei schreiben. <br>  Das Nachrichtenformat wird an die Protokollierung √ºbergeben. <br>  '% (asctime) s% (levelname) s [% (name) s]% (message) s' <br>  Die Datei ist mit Nachrichten gef√ºllt <br>  ... <br>  09/02/2018 17:50:07 DEBUG [http-server] addr ('127.0.0.1', 49964), "GET / arm HTTP / 1.1" 200 - <br>  09/02/2018 17:54:07 INFO [Freier Speicherplatz] Anh√§nge werden in ". \ DB \ files" gespeichert. Free 68557 Mb <br>  09/02/2018 17:58:07 FEHLER [do_get.py] getScript: [Errno 2] Keine solche Datei oder kein solches Verzeichnis: 'sova / api / forms / o / oo.js' <br>  ... <br>  Datum-Uhrzeit, dann Ebene, dann in eckigen Klammern eine Kategorie innerhalb der Ebene, dann eine Nachricht. <br><br>  Herausforderung: <br>  Erstellen Sie eine Seite, um die Protokolldatei anzuzeigen.  Welcher Typ <br><img src="https://habrastorage.org/webt/du/6e/ni/du6enivag9amyf4ss1lucuf1tm8.jpeg"><br><br>  Wir werden das Formular "lm" nennen, es wird von der Seitenfunktion im Modul api / forms / lm.py gebildet <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">page</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dbAlias, mode, userName, multiPage)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dict( style(background=<span class="hljs-string"><span class="hljs-string">'url(/image?bg51.jpg)'</span></span>, backgroundSize=<span class="hljs-string"><span class="hljs-string">'100% 100%'</span></span>), div=[ dict( style(width=<span class="hljs-string"><span class="hljs-string">'200px'</span></span>, float=<span class="hljs-string"><span class="hljs-string">'left'</span></span>, background=<span class="hljs-string"><span class="hljs-string">'rgba(210,218,203, 0.5)'</span></span>, padding=<span class="hljs-string"><span class="hljs-string">'0 5px'</span></span>), div=[ _field(<span class="hljs-string"><span class="hljs-string">'type'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, [<span class="hljs-string"><span class="hljs-string">' |all'</span></span>, <span class="hljs-string"><span class="hljs-string">'|err'</span></span>, <span class="hljs-string"><span class="hljs-string">'|info'</span></span>, <span class="hljs-string"><span class="hljs-string">'|debug'</span></span>], saveAlias=<span class="hljs-number"><span class="hljs-number">1</span></span>, **style(margin=<span class="hljs-string"><span class="hljs-string">'10px auto'</span></span>, width=<span class="hljs-number"><span class="hljs-number">170</span></span>, height=<span class="hljs-number"><span class="hljs-number">110</span></span>) ), _field(<span class="hljs-string"><span class="hljs-string">'cat'</span></span>, <span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-string"><span class="hljs-string">'TYPE_ALIAS|||api.get?loadDropList&amp;logger|keys_{FIELD}'</span></span>, listItemClassName=<span class="hljs-string"><span class="hljs-string">'repName'</span></span>, listItemSelClassName=<span class="hljs-string"><span class="hljs-string">'repNameSel'</span></span>, **style(height=<span class="hljs-string"><span class="hljs-string">'calc(100vh - 133px)'</span></span>, overflow=<span class="hljs-string"><span class="hljs-string">'auto'</span></span>) ) ], ), _field(<span class="hljs-string"><span class="hljs-string">'msg'</span></span>, <span class="hljs-string"><span class="hljs-string">'fd'</span></span>, br=<span class="hljs-number"><span class="hljs-number">1</span></span>, **style(overflow=<span class="hljs-string"><span class="hljs-string">'auto'</span></span>, height=<span class="hljs-string"><span class="hljs-string">'100vh'</span></span>, font=<span class="hljs-string"><span class="hljs-string">'bold 12px Courier'</span></span>, background=<span class="hljs-string"><span class="hljs-string">'rgba(255,255,255, 0.8)'</span></span>) ), ] )</code> </pre> <br><br>  Auf der linken Seite befinden sich 2 Felder, beide mit dem Listentyp: Typ und Katze (Nachrichtentyp und Kategorie). <br>  Rechts befindet sich ein Nachrichtenfeld vom Typ fd (forDisplayOnly). <br>  Nachrichtentypen werden in die Feldbeschreibung geschrieben (['Alle Protokolle | Alle', 'Fehler | Fehler', ...), <br>  Kategorien werden von xhr mit einem kniffligen URL-Aufruf aus dem globalen W√∂rterbuch abgerufen: <br>  api.get? loadDropList &amp; logger | keys_err gibt im JSON-Format ein Array (eine Liste) von Kategorien aus dem globalen W√∂rterbuch zur√ºck.  So etwas wie gut ('logger', 'keys_err'). <br>  Nachrichten werden generiert, wenn ein Dokument von der Funktion queryOpen in lm.py ge√∂ffnet wird <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">queryOpen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d, mode, ground)</span></span></span><span class="hljs-function">:</span></span> logParser() ls = well(<span class="hljs-string"><span class="hljs-string">'logger_all'</span></span>, <span class="hljs-string"><span class="hljs-string">'AL L'</span></span>) s = <span class="hljs-string"><span class="hljs-string">'\n'</span></span>.join(reversed(ls)) d.msg = s d.type_alias = <span class="hljs-string"><span class="hljs-string">'all'</span></span></code> </pre> <br>  logParser liest und analysiert die Protokolldatei.  Die Ergebnisse werden in mehrere Arrays zerlegt und im globalen W√∂rterbuch gespeichert.  Nichts interessantes: 2 einfache Re- und Iterator-Schleife. <br>  Funktionen zum Arbeiten mit dem globalen W√∂rterbuch: <br>  toWell (o, key1, [key2]) - Speichern Sie das Objekt "o" im globalen W√∂rterbuch <br>  well (key1, [key2]) - Nimm ein Objekt aus dem globalen W√∂rterbuch nach Schl√ºssel (nach zwei Schl√ºsseln). <br>  Dies reicht f√ºr die erste Zeichnung.  Um Nachrichten des gew√ºnschten Typs und der gew√ºnschten Kategorie anzeigen zu k√∂nnen, m√ºssen ladbare js erstellt werden. <br>  F√ºgen Sie in lm.py die Zeile hinzu <br>  javaScriptUrl = 'jsv? api / forms / lm / lm.js' <br>  und erstelle lm.js: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.sovaActions = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.sovaActions || {}; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.sovaActions.lm = { <span class="hljs-comment"><span class="hljs-comment">//   "lm" init: doc =&gt; doc.changeDropList('CAT'), recalc: { TYPE: (doc, label, alias) =&gt; { doc.changeDropList('CAT'); getLogData(doc, alias + '|AL L'); }, CAT: (doc, label) =&gt; getLogData(doc, doc.getField('type_alias') + '|' + label), }, }; // *** *** *** let getLogData = (doc, keys) =&gt; { fetch('api.get?getLogData&amp;' + keys, {method: 'get', credentials: 'include'}) .then( response =&gt; response.text() ) .then( txt =&gt; doc.setField('msg', txt) ) .catch( err =&gt; doc.setField('msg', err.message) ); };</span></span></code> </pre> <br><br>  getLogData ruft Nachrichten vom Server des gew√ºnschten Typs und der gew√ºnschten Kategorie ab: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLogData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(par, un)</span></span></span><span class="hljs-function">:</span></span> lg, _, cat = par.partition(<span class="hljs-string"><span class="hljs-string">'|'</span></span>) msg = well(<span class="hljs-string"><span class="hljs-string">'logger_'</span></span> + lg, cat) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-string"><span class="hljs-string">'text/html; charset=UTF-8'</span></span>, <span class="hljs-string"><span class="hljs-string">'\n'</span></span>.join(reversed(msg))</code> </pre><br><br>  Sie k√∂nnen das Formular <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HIER</a> genie√üen. <br>  Zu Beginn wurde die Protokollierung auf der Grundlage des Standardprotokollierungsmoduls durchgef√ºhrt <br>  Verwenden von logging.FileHandler, .addHandler und anderen getLogger und setFormatter. <br>  Wie man unterrichtet.  Aber gleichzeitig war es fehlerhaft.  Sie k√∂nnen Steine ‚Äã‚Äãwerfen, aber als ich die Protokollierung warf und gerade anfing, in eine Datei zu schreiben, wurde der Code k√ºrzer, verst√§ndlicher und die St√∂rungen verschwanden. <br><br>  Enthalten ist ein selbst geschriebener Multithread-WSGI-Server mit Digest-Berechtigung.  Dies ist nicht f√ºr Websites.  Warum wurde er √ºberhaupt gebraucht? <br>  Der Kunde hat 40 jur.  Personen, in den meisten F√§llen 1-2-3 Personen arbeiten mit dem System.  Das Speichern von Daten im Internet ist verboten.  Alle gewinnen 7. Erfordert eine einfache Installation und Konfiguration. <br>  L√∂sung: Mit cx-Freeze und Inno Setup erstellen wir das Installationsprogramm, f√ºhren es auf dem Computer des Verantwortlichsten aus und erhalten einen Mini-http-Server f√ºr das lokale Netzwerk, der als Windows-Dienst startet.  Nichts √úberfl√ºssiges.  Sie k√∂nnen den in Python integrierten wsgiref.simple_server oder wsgi_Werkzeug nicht verwenden, weil  Sie sind Single-Threaded: W√§hrend eine Anforderung fehlschl√§gt, warten andere. <br>  Es ist unwahrscheinlich, dass ich jemanden √ºberraschen werde, wenn ich berichte, dass der integrierte Django WSGIServer / 0.2 CPython / 3.5.3 um ein Vielfaches schneller ist als der selbstgeschriebene Python.  Nur das spielt keine Rolle - Formulare und Verzeichnisse werden auf dem Client zwischengespeichert, nur Datenbankdaten werden sehr schnell √ºber das lokale Netzwerk √ºbertragen. <br>  Es gibt noch einen weiteren Grund: Die Desktop-Anwendung hat Zugriff auf Computerressourcen (digitale Signatur, Dateien, Scanner ...).  Um den gleichen Zugriff √ºber den Browser zu erhalten, m√ºssen Sie entweder ein Plug-In schreiben oder einen kleinen http-Server in den Diensten auflegen, der vom Hauptserver aus schn√ºffeln und die erforderlichen Aktionen f√ºr den lokalen Bereich ausf√ºhren kann. <br><br>  Die Eule verwendet die Framework-Tools nicht f√ºr die Arbeit mit der Datenbank.  Im Verzeichnis dbToolkit √§hnelt die Struktur MongoDB (oder Lotus Notes) in SQLite3: <br>  Buchklasse - db (in der Terminologie MongoDB und Lotus Notes) <br>  Klasse DocumentCollection - eine Sammlung von Dokumenten aus dem Buch <br>  Die Document-Klasse ist ein Dokument (ein Objekt, das eine beliebige Anzahl von Feldern enth√§lt). <br><br>  <b>Installation:</b> <br>  Laden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">owl.zip</a> von sova.online herunter <br><br>  Das Archiv enth√§lt das Eulenverzeichnis, aus dem Sie die Eule von Django, Falcon oder ohne Frameworks ausf√ºhren k√∂nnen. <br><br>  Herunterladen, entpacken. <br>  Installieren Sie Python3 (3.5+) <br><br>  1. Eule - ohne Rahmen.  Achtung!  Login: 1, Passwort: 1 <br><br>  Linux: <br>  cd ./owl <br>  python3 wsgi_sova.py <br><br>  oder in einem separaten Fenster <br>  screen -Udm python3 wsgi_server.py <br><br>  Windows: <br>  cd ./owl <br>  wsgi_sova.py <br><br>  2. Django <br><br>  Linux: <br>  Installiere django: <br>  pip3 installiere django <br>  cd ./owl <br>  python3 manage.py runserver <br><br>  oder in einem separaten Fenster <br>  screen -Udm python3 manage.py runserver 127.0.0.1:8000 <br><br>  Windows: <br>  Installiere django: <br>  pip install django <br>  cd ./owl <br>  manage.py runserver <br><br>  3. Falke <br><br>  Linux: <br>  pip3 install falcon <br>  cd ./owl <br>  python3 wsgi_sova.py falconApp: api 8001 log_falcon / falcon <br><br>  Windows: <br>  pip install falcon <br>  cd ./owl <br>  wsgi_sova.py falconApp: api 8001 log_falcon / falcon <br><br>  ********************** <br><br>  - Der Titel des Artikels ist seltsam. Haben Sie verstanden, was "Multipage SPA" ist? <br>  - normaler Marketingtrick <br>  - warum ohne Redux?  Jeder benutzt Redux. <br>  - Ich mag das Wort "Reduzierer" nicht <br>  - aber im Ernst?  ombineReducers auf jeder Ebene der Hierarchie ... Es ist so sch√∂n <br>  Ist eine mehrseitige, Baby.  Befehlsf√ºhrer sollten sich innerhalb des Formulars befinden und nicht wie Hirschh√∂rner <br>  - Warum hast du √ºberhaupt einen Artikel geschrieben? <br>  - PR </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de424779/">https://habr.com/ru/post/de424779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de424765/index.html">Zustandsverwaltung in Flatteranwendungen</a></li>
<li><a href="../de424767/index.html">Wir machen einen Kuchen aus Habr. Wieder</a></li>
<li><a href="../de424771/index.html">Pers√∂nliche Erfahrung: von einer Idee und einem leeren Blatt bis zu einer Entwurfsversion einer Website</a></li>
<li><a href="../de424773/index.html">Biopharma und numerische Modellierung: Amgen Erfahrung und Praxis</a></li>
<li><a href="../de424777/index.html">Verwenden von Consul zum Skalieren von Stateful Services</a></li>
<li><a href="../de424781/index.html">Lehren und Testen neuronaler Netze auf PyTorch mit Ignite</a></li>
<li><a href="../de424787/index.html">Interview mit Aaron Patterson, Sprecher der RubyRussia-Konferenz 2018</a></li>
<li><a href="../de424789/index.html">So stellen Sie eine Ruby on Rails-Anwendung mit HAProxy Ingress, Unicorn / Puma und Web-Sockets bereit</a></li>
<li><a href="../de424791/index.html">Erweitern der Netzwerkfunktionen eines programmierbaren Relais mithilfe von WI-FI</a></li>
<li><a href="../de424793/index.html">So drucken Sie einen Elektromotor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>