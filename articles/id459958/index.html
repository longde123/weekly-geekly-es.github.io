<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§” ğŸ§’ğŸ½ ğŸ¥• Mem-parsing tugas-tugas dari konferensi Hydra - menyeimbangkan beban dan penyimpanan dalam memori ğŸ‘¨ğŸ¾â€ğŸ³ ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ ğŸµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beberapa hari yang lalu ada konferensi Hydra . Orang-orang dari Grup JUG.ru mengundang pembicara impian (Leslie Lampport! Cliff Click! Martin Kleppman...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mem-parsing tugas-tugas dari konferensi Hydra - menyeimbangkan beban dan penyimpanan dalam memori</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skbkontur/blog/459958/"><p>  Beberapa hari yang lalu ada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">konferensi Hydra</a> .  Orang-orang dari Grup JUG.ru mengundang pembicara impian (Leslie Lampport! Cliff Click! Martin Kleppmann!) Dan mengabdikan dua hari untuk sistem dan komputasi terdistribusi.  Contour adalah salah satu dari tiga mitra konferensi.  Kami berbicara di stan, berbicara tentang fasilitas penyimpanan terdistribusi, bermain bingo, memecahkan masalah. </p><br><p>  Ini adalah posting dengan analisis tugas di stand Contour dari penulis teks mereka.  Siapa yang menggunakan Hydra adalah alasan Anda untuk mengingat kesan yang menyenangkan, siapa yang tidak - kesempatan untuk meregangkan otak Anda <em>O-</em> notasi besar. </p><br><p>  Bahkan ada peserta yang memisahkan flipchart menjadi slide untuk mencatat keputusan mereka.  Saya tidak bercanda - mereka menyerahkan untuk memeriksa paket kertas ini: </p><br><p><img src="https://habrastorage.org/webt/6k/m8/59/6km859kxtxuu_21czx2sn-l5do0.jpeg"></p><br><p>  Total ada tiga tugas: </p><br><ul><li>  tentang memilih replika untuk bobot untuk penyeimbangan beban </li><li>  tentang menyortir hasil kueri ke database di memori </li><li>  pada transfer negara dalam sistem terdistribusi dengan topologi cincin </li></ul><a name="habracut"></a><br><h1 id="zadacha-1-clusterclient">  Tugas 1. ClusterClient </h1><br><p>  Itu perlu untuk mengusulkan algoritma untuk pemilihan efisien K dari N replika tertimbang dari sistem terdistribusi: </p><br><blockquote>  Tim Anda bertugas mengembangkan perpustakaan klien untuk sekelompok N node yang didistribusikan secara masif.  Perpustakaan akan melacak berbagai metadata yang terkait dengan node (misalnya, latensi mereka, tingkat respons 4xx / 5xx, dll.) Dan menetapkan bobot titik mengambang W <sub>1</sub> ..W <sub>N</sub> kepada mereka.  Untuk mendukung strategi eksekusi bersamaan, perpustakaan harus dapat memilih K dari N node secara acak - kesempatan untuk dipilih harus proporsional dengan bobot node. <br><br>  Usulkan algoritma untuk memilih node secara efisien.  Perkirakan kerumitan komputasinya menggunakan notasi O besar. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Mengapa semuanya berbahasa Inggris?</b> <div class="spoiler_text"><p>  Karena dalam bentuk ini, para peserta konferensi bertarung dengan mereka dan karena bahasa Inggris adalah bahasa resmi Hydra.  Tugasnya terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/to/5s/0a/to5s0amsnoyj1q_hxhl0z3gczzy.png"></p></div></div><br><p>  Ambil kertas dan pensil, pikirkan, jangan buru-buru membuka spoilernya :) </p><br><div class="spoiler">  <b class="spoiler_title">Pembekalan (video)</b> <div class="spoiler_text"><p>  Mulai pukul 5:53, hanya 4 menit: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/HAiQ2llS0bE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Dan inilah bagaimana orang-orang dengan flipchart itu memutuskan keputusan mereka: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U_yfKDwXppg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><br><div class="spoiler">  <b class="spoiler_title">Analisis keputusan (teks)</b> <div class="spoiler_text"><p> Di permukaan, ada solusi seperti itu: jumlah bobot semua replika, hasilkan angka acak dari 0 hingga jumlah semua bobot, lalu pilih replika-i sehingga jumlah bobot replika dari 0 hingga (i-1) kurang dari angka acak, dan jumlah bobot replika dari 0 hingga i-th - lebih dari itu.  Ini akan berubah untuk memilih satu replika, dan untuk memilih yang berikutnya, Anda perlu mengulangi seluruh prosedur tanpa mempertimbangkan replika yang dipilih.  Dengan algoritma seperti itu, kompleksitas memilih satu replika adalah O (N), kompleksitas memilih replika K adalah O (N Â· K) ~ O (N <sup>2</sup> ). </p><br><p><img src="https://habrastorage.org/webt/cq/1w/hg/cq1whgt1skw7dcwo3ck7wh6rbto.png"></p><br><p>  Kompleksitas kuadrat memang buruk, tetapi bisa diperbaiki.  Untuk melakukan ini, buatlah sebuah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pohon segmen</a> untuk jumlah bobot.  Ini akan menghasilkan pohon dengan kedalaman log N, di mana daun akan ada bobot replika, dan di simpul yang tersisa, jumlah parsial, hingga jumlah semua bobot di akar pohon.  Selanjutnya, kami menghasilkan angka acak dari 0 hingga jumlah semua bobot, menemukan replika engan, menghapusnya dari pohon, dan mengulangi prosedur untuk mencari replika yang tersisa.  Dengan algoritma seperti itu, kompleksitas membangun pohon adalah O (N), kompleksitas menemukan replika ith dan menghapusnya dari pohon adalah O (log N), kompleksitas memilih replika K adalah O (N + K log N) ~ O (N log N) . </p><br><p><img src="https://habrastorage.org/webt/u-/23/tx/u-23txhrw-1dl14qilobw3laro4.png"></p><br><p>  Kompleksitas linear-logaritmik lebih bagus daripada kompleksitas kuadratik, terutama untuk K. besar. </p><br><p>  Algoritma ini <a href="">diimplementasikan dalam kode</a> perpustakaan ClusterClient dari proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Vostok</a> . </p></div></div><br><h1 id="zadacha-2-zebra">  Tugas 2. Zebra </h1><br><p>  Itu perlu untuk mengusulkan algoritma untuk penyortiran dokumen yang efisien dalam memori oleh bidang non-indeks sewenang-wenang: </p><br><blockquote>  Tim Anda ditugaskan untuk mengembangkan basis data dokumen dalam memori yang sharded.  Beban kerja yang umum adalah untuk memilih dokumen N atas diurutkan berdasarkan bidang numerik yang sewenang-wenang (tidak diindeks) dari kumpulan ukuran M (biasanya N &lt;100 &lt;&lt; M).  Beban kerja yang sedikit kurang umum adalah memilih N atas setelah melewatkan dokumen S atas (S ~ N). <br><br>  Ajukan algoritme untuk menjalankan kueri tersebut secara efisien.  Perkirakan kerumitan komputasinya menggunakan notasi O besar dalam kasus rata-rata dan skenario kasus terburuk. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Pembekalan (video)</b> <div class="spoiler_text"><p>  Mulai pukul 34:50, hanya 6 menit: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/HAiQ2llS0bE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><br><div class="spoiler">  <b class="spoiler_title">Analisis keputusan (teks)</b> <div class="spoiler_text"><p>  Solusinya ada di permukaan: urutkan semua dokumen (misalnya, menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">quicksort</a> ), lalu ambil dokumen N + S.  Dalam hal ini, kompleksitas pengurutan rata-rata adalah O (M lg M), dalam yang terburuk - O (M <sup>2</sup> ). </p><br><p>  Jelas, menyortir semua dokumen M untuk kemudian hanya mengambil sebagian kecil dari mereka tidak efisien.  Agar tidak mengurutkan semua dokumen, algoritma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pemilihan</a> cepat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cocok</a> , yang memilih N + S dari dokumen yang diperlukan (mereka dapat diurutkan berdasarkan algoritma apa pun).  Dalam hal ini, kompleksitas menurun rata-rata menjadi O (M), dan kasus terburuk tetap sama. </p><br><p>  Namun, Anda dapat melakukannya dengan lebih efisien - gunakan algoritma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">streaming biner tumpukan</a> .  Dalam hal ini, dokumen N + S pertama ditambahkan ke tumpukan minimum atau maksimum (tergantung pada arah penyortiran), dan kemudian setiap dokumen selanjutnya dibandingkan dengan akar pohon, yang berisi dokumen minimum atau maksimum saat ini, dan ditambahkan ke pohon jika perlu .  Dalam hal ini, kompleksitas dalam kasus terburuk adalah ketika Anda harus terus membangun kembali pohon - O (M lg (N + S)), kompleksitas rata-rata adalah O (M), seperti pemilihan cepat. </p><br><p>  Namun, heap streaming lebih efektif karena pada kenyataannya sebagian besar dokumen dapat dibuang tanpa membangun kembali heap, setelah perbandingan tunggal dengan elemen rootnya.  Pemilahan semacam itu diimplementasikan dalam basis data dalam dokumen Zebra yang dikembangkan dan digunakan dalam Sirkuit. </p></div></div><br><h1 id="zadacha-3-state-swaps">  Tugas 3. Swap negara </h1><br><p>  Itu perlu untuk mengusulkan algoritma yang paling efisien untuk shift negara: </p><br><blockquote>  Tim Anda bertugas mengembangkan mekanisme pertukaran keadaan mewah untuk sekelompok N yang didistribusikan.  Keadaan simpul ke-i harus ditransfer ke simpul (ke + 1) ke-ke-ke-ke-ke-simpul, ke-ke-simpul ke-ke-1 harus ditransfer ke simpul pertama.  Satu-satunya operasi yang didukung adalah state swap ketika dua node bertukar statusnya secara atom.  Diketahui bahwa swap negara membutuhkan M milidetik.  Setiap node dapat berpartisipasi dalam satu state swap pada saat tertentu. <br><br>  Berapa lama waktu yang dibutuhkan untuk mentransfer status semua node dalam sebuah cluster? </blockquote><br><div class="spoiler">  <b class="spoiler_title">Analisis keputusan (teks)</b> <div class="spoiler_text"><p>  Solusi di permukaan: bertukar status elemen pertama dan kedua, lalu yang pertama dan ketiga, lalu yang pertama dan keempat, dan seterusnya.  Setelah setiap pertukaran, keadaan satu elemen akan berada pada posisi yang diinginkan.  Anda harus melakukan permutasi O (N) dan menghabiskan waktu O (N Â· M). </p><br><p><img src="https://habrastorage.org/webt/lx/f6/8p/lxf68pgl8xz2tqhhc58r_1m03y4.png"></p><br><p>  Waktu linier adalah waktu yang lama, sehingga Anda dapat bertukar status elemen berpasangan: yang pertama dengan yang kedua, yang ketiga dengan yang keempat, dan seterusnya.  Setelah setiap pertukaran, keadaan setiap elemen kedua akan berada di posisi yang diinginkan.  Kita harus melakukan permutasi O (log N) dan menghabiskan waktu O (M log N N). </p><br><p><img src="https://habrastorage.org/webt/mm/5n/jq/mm5njqmglg6ma2nlrkxsd14coeu.png"></p><br><p>  Namun, Anda dapat membuat perubahan lebih efektif - tidak dalam linier, tetapi dalam waktu yang konstan.  Untuk melakukan ini, pada langkah pertama, Anda perlu bertukar keadaan elemen pertama dengan yang terakhir, yang kedua dengan kedua dari belakang, dan seterusnya.  Keadaan elemen terakhir akan berada pada posisi yang diinginkan.  Dan sekarang Anda perlu menukar status elemen kedua dengan elemen terakhir, ketiga dengan kedua dari belakang, dan seterusnya.  Setelah putaran pertukaran ini, keadaan semua elemen akan berada di posisi yang tepat.  Secara total, permutasi O (2M) ~ O (1) akan dilakukan. </p><br><p><img src="https://habrastorage.org/webt/ul/gz/os/ulgzosuwmplrlvpyxh_1fh7fndg.png"></p><br><p>  Solusi seperti itu tidak akan mengejutkan seorang ahli matematika yang masih ingat bahwa rotasi adalah komposisi dari dua simetri aksial.  Ngomong-ngomong, ini digeneralisasi secara sepele untuk bergeser bukan oleh satu, tetapi oleh posisi K &lt;N.  (Tulis di komentar bagaimana persisnya.) </p></div></div><br><p>  Apakah Anda suka teka-teki?  Apakah Anda tahu solusi lain?  Bagikan komentar Anda. </p><br><p>  Dan inilah beberapa tautan yang bermanfaat pada akhirnya: </p><br><ul><li>  pelajari lebih lanjut tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengembangan infrastruktur</a> di Sirkuit </li><li>  lihat catatan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">selebaran</a> internal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan laporan</a> tentang sistem terdistribusi </li><li>  tonton seri video ceramah â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Algoritma yang tidak biasa untuk orang biasa</a> â€ </li><li>  berlangganan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">saluran</a> kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di Telegram</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459958/">https://habr.com/ru/post/id459958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459936/index.html">9 trik lagi untuk bekerja dengan Visual Studio</a></li>
<li><a href="../id459948/index.html">Menerapkan awan volumetrik yang benar secara fisik seperti di Horizon Zero Dawn</a></li>
<li><a href="../id459952/index.html">Sedikit pengalaman tentang cadangan & penyimpanan</a></li>
<li><a href="../id459954/index.html">Mengapa salah satu perusahaan IT terbesar bergabung dengan CNCF - dana pengembangan infrastruktur cloud</a></li>
<li><a href="../id459956/index.html">Implantasi tanpa adanya gigi sama sekali, sebagai akibat dari kunjungan yang tidak tepat waktu ke dokter gigi</a></li>
<li><a href="../id459960/index.html">Dari ide hingga rilis. Detil Frontend Market</a></li>
<li><a href="../id459964/index.html">8 trik UI sederhana untuk membuat desain prototipe dinamis tanpa menggunakan animasi</a></li>
<li><a href="../id459968/index.html">Apa yang sebenarnya terjadi pada Boeing Malaysia yang hilang (bagian 3/3)</a></li>
<li><a href="../id459970/index.html">Janji. Semua gelisah</a></li>
<li><a href="../id459972/index.html">Pengembangan untuk Docker. Lingkungan lokal. Bagian 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>