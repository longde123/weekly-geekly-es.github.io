<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë®üèΩ ‚õìÔ∏è üë©üèΩ‚Äçüîß Redis Best Practices, Partie 1 üôÖüèø üë• ‚Ü©Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans une s√©rie de plusieurs articles, je pr√©senterai ma traduction adapt√©e de la section Redis Best Practices du site officiel de Redis Labs. 
 Redis ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Redis Best Practices, Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485672/">  Dans une s√©rie de plusieurs articles, je pr√©senterai ma traduction adapt√©e de la section <a href="https://redislabs.com/redis-best-practices/" rel="nofollow">Redis Best Practices</a> du site officiel de Redis Labs. <div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/6y/f5/hr6yf5w1hp0fh-i5vfa0p1pxeuy.png"></div><a name="habracut"></a><br>  Redis peut √™tre utilis√© de nombreuses fa√ßons, cependant, plusieurs mod√®les peuvent √™tre utilis√©s pour r√©soudre des probl√®mes courants.  Nous avons compil√© une collection de mod√®les courants que nous consid√©rons comme les <i>meilleures pratiques</i> pour r√©soudre ces probl√®mes.  Cette collection n'est pas exhaustive et ne semble pas √™tre un ensemble des seules fa√ßons d'utiliser Redis, mais nous esp√©rons qu'elle servira de point de d√©part pour r√©soudre les probl√®mes √† l'aide de Redis. <br><br>  Nous avons divis√© ce guide des meilleures pratiques en chapitres et sous-chapitres selon les besoins (Note du traducteur: certains sous-chapitres sont courts, je vais donc les combiner en un seul): <br><br><ul><li>  dans le chapitre ¬´Mod√®les d'indexation¬ª, nous examinerons les moyens d'aller au-del√† de l'acc√®s aux valeurs-cl√©s habituel avec Redis.  Il comprend des moyens d'utiliser intelligemment les sch√©mas cl√©s en utilisant divers types de donn√©es Redis pour aider non seulement √† trouver des donn√©es, mais aussi √† r√©duire la complexit√© d'acc√®s; </li><li> Le chapitre Mod√®les d'interaction se concentre sur les mod√®les Redis qui d√©placent les donn√©es √† travers l'infrastructure.  Dans ce cas, Redis n'agit pas comme un r√©f√©rentiel, mais plut√¥t comme un guide pour les donn√©es; </li><li>  le chapitre ¬´Mod√®les de stockage des donn√©es¬ª d√©crit les m√©thodes d'enregistrement des repr√©sentations complexes de donn√©es dans Redis.  Nous calculerons des scripts complexes de documents qui peuvent √™tre g√©n√©ralis√©s de mani√®re simple et complexe; </li><li>  les mod√®les concernant les donn√©es stock√©es temporairement sont d√©crits dans le chapitre ¬´Mod√®les de s√©ries temporelles¬ª; </li><li>  la limitation de vitesse est souvent utilis√©e √† Redis.  Dans le chapitre "Mod√®les de base de limitation de vitesse", nous allons passer aux principes de base de ses cas d'utilisation; </li><li>  Le filtre Bloom a longtemps √©t√© vu dans Redis, et dans le chapitre ¬´Patterns with a Bloom Filter¬ª nous examinons les structures de donn√©es probabilistes et comment elles diff√®rent de leurs analogues improbables; </li><li>  le comptoir est une r√©ception √©tonnamment profonde.  Dans un chapitre distinct, nous explorons comment calculer l'activit√© et les √©l√©ments uniques de mani√®re efficace par le calcul; </li><li>  enfin, nous parlerons de la fa√ßon de tirer parti de Lua pour que Redis fasse plus avec moins. </li></ul><br>  Ce guide est incoh√©rent, vous pouvez donc le d√©marrer avec n'importe quel chapitre.  Vous pouvez √©galement utiliser la navigation au d√©but de chaque publication pour trouver quelque chose qui vous convient. <br><br><h2>  Mod√®les d'indexation </h2><br>  Conceptuellement, Redis est une base de donn√©es bas√©e sur le paradigme cl√© / valeur, lorsque chaque √©l√©ment de donn√©es est associ√© √† une certaine cl√©.  Si vous souhaitez obtenir des donn√©es pour autre chose qu'une cl√©, vous devrez impl√©menter un index qui utilise l'un des nombreux types de donn√©es disponibles dans Redis. <br><br>  L'indexation dans Redis est assez diff√©rente de ce qui est pr√©sent√© dans d'autres bases de donn√©es, donc vos propres sc√©narios d'utilisation et donn√©es d√©termineront la meilleure strat√©gie d'indexation.  Dans ce chapitre, nous examinerons quelques strat√©gies g√©n√©rales de r√©cup√©ration de donn√©es en plus de la simple r√©cup√©ration de cl√© / valeur: <br><br><ul><li>  ensembles tri√©s comme indices; </li><li>  indices lexicographiques; </li><li>  indices g√©ospatiaux; </li><li>  G√©olocalisation IP </li><li>  recherche plein texte; </li><li>  index partitionn√©s. </li></ul><br><h3>  Ensembles tri√©s comme indices </h3><br>  Les ensembles tri√©s (ZSET) sont un type de donn√©es standard dans Redis qui repr√©sente de nombreux objets uniques (les r√©p√©titions ne sont pas enregistr√©es), o√π chaque objet est affect√© √† un nombre (appel√© un ¬´d√©compte¬ª), qui agit comme un m√©canisme de tri naturel.  Et bien que les objets ne puissent pas √™tre r√©p√©t√©s, quelques objets peuvent avoir le m√™me nombre.  Avec une complexit√© temporelle relativement faible pour ajouter, supprimer et obtenir une plage de valeurs (par rang ou nombre), les ensembles tri√©s sont tout √† fait appropri√©s pour √™tre des index.  Par exemple, prenons les pays du monde, class√©s par population: <br><br><pre><code class="plaintext hljs">&gt; ZADD countries-by-pop 1409517397 china &gt; ZADD countries-by-pop 146573899 russia &gt; ZADD countries-by-pop 81456724 germany &gt; ZADD countries-by-pop 333016381 usa &gt; ZADD countries-by-pop 1 mars &gt; ZADD countries-by-pop 37290812 afghanistan &gt; ZADD countries-by-pop 1388350202 india</code> </pre> <br>  Obtenir les 5 meilleurs pays sera simple: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE countries-by-pop 0 4 1) "mars" 2) "afghanistan" 3) "germany" 4) "russia" 5) "india"</code> </pre> <br>  Et obtenir des pays avec des populations entre 10 000 000 et 1 000 000 000: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE countries-by-pop 10000000 1000000000 1) "afghanistan" 2) "germany" 3) "russia"</code> </pre> <br>  Vous pouvez cr√©er plusieurs index pour illustrer diff√©rentes m√©thodes de tri des donn√©es.  Dans notre exemple, nous pourrions utiliser les m√™mes objets, mais au lieu du nombre de personnes, prendre la densit√© de population, la taille g√©ographique, le nombre d'internautes, etc.  Cela cr√©era des index hautes performances pour divers aspects.  De plus, en divisant le nom d'un objet par des donn√©es le concernant stock√©es soit dans Redis (dans Hash, par exemple) ou dans un autre magasin de donn√©es, le processus secondaire pourrait obtenir des informations suppl√©mentaires sur chaque √©l√©ment si n√©cessaire. <br><br><h3>  Indices lexicographiques </h3><br>  Les ensembles tri√©s (ZSET) avec classement par nombre ont une propri√©t√© int√©ressante qui peut √™tre utilis√©e pour cr√©er un m√©canisme de tri alphab√©tique approximatif.  La propri√©t√© est que les objets avec le m√™me score peuvent √™tre retourn√©s dans l'ordre lexicographique et par des valeurs limites.  Prenez les donn√©es suivantes: <br><br><pre> <code class="plaintext hljs">&gt; ZADD animal-list 0 bison 0 boa 0 dog 0 emu 0 falcon 0 alligator 0 chipmunk</code> </pre> <br>  Cette commande ajoutera plusieurs animaux √† la cl√© de la liste des animaux.  Chaque objet a un score de 0. Apr√®s avoir ex√©cut√© la commande ZRANGE avec les arguments 0 et -1, nous voyons un ordre curieux: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE animal-list 0 -1 1) "alligator" 2) "bison" 3) "boa" 4) "chipmunk" 5) "dog" 6) "emu" 7) "falcon"</code> </pre> <br>  Bien que les √©l√©ments n'aient pas √©t√© ajout√©s par ordre alphab√©tique, ils ont √©t√© renvoy√©s tri√©s par ordre alphab√©tique.  Cet ordre est le r√©sultat d'une comparaison de cha√Ænes binaires, octet par bit.  Cela signifie que les caract√®res ASCII seront retourn√©s dans l'ordre alphab√©tique.  Cela sugg√®re ce qui suit: <br><br><ul><li>  les caract√®res en minuscule et en majuscule ne seront pas reconnus comme identiques; </li><li>  les caract√®res multi-octets ne seront pas tri√©s comme pr√©vu. </li></ul><br>  Redis fournit √©galement des fonctionnalit√©s avanc√©es pour affiner davantage les recherches lexicographiques.  Par exemple, nous voulons renvoyer les animaux commen√ßant par <i>b</i> et se terminant par <i>e</i> .  Nous pouvons utiliser la commande suivante: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f 1) "bison" 2) "boa" 3) "chipmunk" 4) "dog" 5) "emu"</code> </pre> <br>  L'argument <i>(f</i> peut √™tre un peu d√©routant. C'est un point important, car Redis n'a aucune id√©e de la compr√©hension litt√©rale des lettres de l'alphabet. Cela signifie que nous devons tenir compte du fait que tout ce qui commence par <i>e</i> restera toujours devant tout ce qui commence par <i>f</i> , quelles que soient les lettres suivantes Une autre remarque est que le crochet carr√© indique la recherche avec inclusion et le crochet rond indique la recherche sans inclusion. Dans notre cas, si nous interrogeons avec <i>b</i> , cela sera inclus dans la liste, tandis que <i>f</i> n'appara√Ætra pas dans la s√©lection. Si vous avez besoin tous les √©l√©ments jusqu'√† la fin, utilisez  le dernier symbole cod√© (255 ou 0xFF): <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [c "[\xff" 1) "chipmunk" 2) "dog" 3) "emu" 4) "falcon"</code> </pre> <br>  Cette commande peut √©galement √™tre limit√©e, assurant ainsi la pagination: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f LIMIT 0 2 1) "bison" 2) "boa" &gt; ZRANGEBYLEX animal-list [b (f LIMIT 2 2 1) "chipmunk" 2) "dog"</code> </pre> <br>  Le seul √©cueil est que la complexit√© temporelle augmentera √† mesure que l'indentation augmente (premier argument apr√®s LIMIT).  Par cons√©quent, si vous avez 1 million d'objets et que vous essayez d'obtenir les deux derniers, cela n√©cessitera une analyse d'un million seulement. <br><br><h3>  Index g√©ospatiaux </h3><br>  Redis poss√®de plusieurs √©quipes d'indexation g√©ospatiale (√©quipes GEO), mais contrairement √† d'autres √©quipes, ces √©quipes n'ont pas leurs propres types de donn√©es.  Ces commandes compl√®tent en fait le type d'ensemble tri√©.  Ceci est r√©alis√© en encodant la latitude et la longitude dans le score de l'ensemble tri√© en utilisant l'algorithme geohash. <br>  L'ajout d'√©l√©ments √† un g√©o-index est facile.  Supposons que vous suivez un groupe de voitures qui roulent le long d'une route.  Nous appelons cet ensemble de voitures simplement des ¬´voitures¬ª.  Disons que votre machine particuli√®re peut √™tre identifi√©e comme un objet ¬´ma voiture¬ª (nous utilisons le terme ¬´objet¬ª parce que le g√©o-index est simplement une forme de l'ensemble).  Pour ajouter une machine √† l'ensemble, nous pouvons ex√©cuter la commande: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17087 36.12306 my-car</code> </pre> <br>  Le premier argument est l'ensemble auquel nous ajoutons, le second est la latitude, le troisi√®me est la longitude et le quatri√®me est le nom de l'objet. <br><br>  Pour mettre √† jour l'emplacement de la machine, il vous suffit d'ex√©cuter √† nouveau la commande avec les nouvelles coordonn√©es.  Cela fonctionne car un g√©o-index est simplement un ensemble o√π les √©l√©ments en double ne sont pas autoris√©s. <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17172 36.12196 my-car</code> </pre> <br>  Ajoutez une deuxi√®me voiture aux ¬´voitures¬ª.  Cette fois, Volodya la conduit: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.171971 36.120609 volodias-car</code> </pre> <br>  En regardant les coordonn√©es, vous pouvez dire que ces voitures sont assez proches les unes des autres, mais combien?  Vous pouvez le d√©finir avec la commande GEODIST: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car volodias-car "151.9653"</code> </pre> <br>  Cela signifie que deux v√©hicules sont distants d'environ 151 m√®tres.  Vous pouvez √©galement calculer dans d'autres unit√©s: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car robins-car ft "498.5737"</code> </pre> <br>  Cela a renvoy√© la m√™me distance par √©tapes.  Vous pouvez √©galement utiliser des miles (ml) ou des kilom√®tres (km). <br><br>  Voyons maintenant qui se trouve dans le rayon d'un certain point: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUS cars -115.17258 36.11996 100 m 1) "volodias-car"</code> </pre> <br>  Cela a renvoy√© tout le monde dans un rayon de 100 m√®tres autour du point sp√©cifi√©.  Vous pouvez √©galement demander √† tout le monde dans le rayon de n'importe quel objet de l'ensemble: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m 1) "volodias-car" 2) "my-car"</code> </pre> <br>  Nous pouvons √©galement activer la distance en ajoutant l'argument optionnel WITHDIST (cela fonctionne pour GEORADIUS ou GEORADIUSBYMEMBER): <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST 1) 1) "volodias-car" 2) "0.0000" 2) 1) "my-car" 2) "151.9653"</code> </pre> <br>  Un autre argument facultatif pour GEORADIUS et GEORADIUSBYMEMBER est WITHCOORD, qui renvoie les coordonn√©es de chaque objet.  WITHDIST et WITHCOORD peuvent √™tre utilis√©s ensemble ou s√©par√©ment: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST WITHCOORD 1) 1) "volodias-car" 2) "0.0000" 3) 1) "-115.17197102308273315" 2) "36.12060917648089031" 2) 1) "my-car" 2) "151.9653" 3) 1) "-115.17171889543533325" 2) "36.12196018285882104"</code> </pre> <br>  √âtant donn√© que les index g√©ospatiaux ne sont qu'une alternative aux ensembles tri√©s, certains op√©rateurs de ces derniers peuvent √™tre utilis√©s.  Si nous voulons supprimer "ma-voiture" de l'ensemble des "voitures", nous pouvons utiliser la commande de l'ensemble tri√© de ZREM: <br><br><pre> <code class="plaintext hljs">&gt; ZREM cars my-car</code> </pre> <br>  Redis fournit un riche ensemble d'outils pour travailler avec les donn√©es g√©ospatiales, et dans cette section, nous n'avons examin√© que les outils de base. <br><br><h3>  G√©olocalisation IP </h3><br>  Trouver l'emplacement r√©el du service connect√© peut √™tre tr√®s utile.  Les tables de g√©olocalisation IP sont g√©n√©ralement assez volumineuses et difficiles √† g√©rer efficacement.  Nous pouvons utiliser des ensembles tri√©s pour impl√©menter des services de g√©olocalisation IP rapides et efficaces. <br><br>  IPv4 est le plus souvent r√©f√©renc√© en notation d√©cimale (74.125.43.99, par exemple).  Cependant, les services r√©seau voient cette m√™me adresse comme un nombre 32 bits, chaque octet repr√©sentant l'un des quatre nombres sous forme d√©cimale.  L'exemple ci-dessus serait 0x4A7D2B63 en hexad√©cimal ou 1249717091 en d√©cimal. <br><br>  Les jeux de donn√©es de g√©olocalisation IP sont largement disponibles et prennent g√©n√©ralement la forme d'un simple tableau √† trois colonnes (d√©but, fin, emplacement).  Le d√©but et la fin sont la repr√©sentation d√©cimale d'IPv4.  Dans Redis, nous pouvons adapter des ensembles tri√©s √† ce format, car il n'y a pas de ¬´trous¬ª dans les plages IP, par cons√©quent, nous pouvons sans risque supposer que la fin d'une plage est le d√©but d'une autre. <br><br>  Pour un exemple simple, ajoutez quelques plages aux ensembles tri√©s: <br><br><pre> <code class="plaintext hljs">&gt; ZADD ip-loc 1249716479 us:1 &gt; ZADD ip-loc 1249716735 taiwan:1 &gt; ZADD ip-loc 1249717759 us:2 &gt; ZADD ip-loc 1249718015 finland:1</code> </pre> <br>  Le premier argument est la cl√© de notre ensemble, le second est la repr√©sentation d√©cimale de la fin de la plage IP et le dernier est l'objet lui-m√™me.  Notez que l'objet set a un nombre apr√®s les deux points.  C'est juste pour faciliter un exemple.  Les vraies tables IP ont des identifiants uniques pour chaque plage (et plus d'informations suppl√©mentaires que le nom du pays). <br><br>  Pour interroger la table pour une adresse IP donn√©e, nous pouvons utiliser la commande ZRANGEBYSCORE avec quelques arguments suppl√©mentaires.  Prenez l'adresse IP et convertissez-la en d√©cimale.  Cela peut √™tre fait en utilisant votre langage de programmation.  Tout d'abord, utilisez l'adresse de l'exemple d'origine 74.125.43.99 (1249717091).  Si nous prenons ce nombre comme point de r√©f√©rence et ne sp√©cifions pas de maximum, puis limitons le r√©sultat uniquement au premier objet, nous trouverons sa g√©olocalisation: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE ip-loc 1249717091 +inf LIMIT 0 1 1) "us:2"</code> </pre> <br>  Le premier argument est la cl√© de notre ensemble tri√©, le second est la repr√©sentation d√©cimale de l'adresse IP, le troisi√®me (+ inf) indique √† Redis de demander sans limite sup√©rieure, et les trois derniers arguments indiquent simplement que nous voulons obtenir uniquement le tout premier r√©sultat. <br><br><h3>  Recherche plein texte </h3><br>  Avant l'av√®nement des modules, la recherche en texte int√©gral √©tait impl√©ment√©e √† l'aide des commandes natives de Redis.  Le module RedisSearch est beaucoup plus productif que ce mod√®le, cependant, dans certains environnements, il n'est pas disponible.  De plus, ce mod√®le est tr√®s int√©ressant et peut √™tre g√©n√©ralis√© √† d'autres charges de travail dans lesquelles RedisSearch ne sera pas id√©al. <br>  Supposons que nous ayons plusieurs documents texte √† rechercher.  Ce n'est peut-√™tre pas le cas d'utilisation √©vident pour Redis, car il fournit un acc√®s cl√©, mais d'un autre c√¥t√©, Redis peut √™tre utilis√© comme un moteur de recherche en texte int√©gral enti√®rement nouveau. <br><br>  Tout d'abord, prenons quelques exemples de textes dans les documents: <br><br>  <i>"Redis est tr√®s rapide"</i> <br>  <i>"Les gu√©pards sont rapides"</i> <br>  <i>"Les gu√©pards ont des taches"</i> <br><br>  Nous les divisons en ensembles de mots, s√©par√©s par un espace de simplicit√©: <br><br><pre> <code class="plaintext hljs">&gt; SADD ex1 redis is very fast &gt; SADD ex2 cheetahs are very fast &gt; SADD ex3 cheetahs have spots</code> </pre> <br>  Notez que nous mettons chaque ligne dans son propre ensemble.  Il peut sembler que nous ajoutons simplement la ligne enti√®re - SADD est variable et prend plusieurs √©l√©ments √† la fois comme arguments.  Nous avons √©galement converti tous les mots en minuscules. <br>  Ensuite, nous devons inverser cet index et montrer quel mot est contenu dans quel document.  Pour ce faire, nous allons cr√©er un ensemble pour chaque mot et mettre le nom du document en tant qu'objet: <br><br><pre> <code class="plaintext hljs">&gt; SADD redis ex1 &gt; SADD is ex1 &gt; SADD very ex1 ex2 &gt; SADD fast ex1 ex2 &gt; SADD cheetahs ex2 ex3 &gt; SADD have ex3 &gt; SADD spots ex3</code> </pre> <br>  Pour plus de clart√©, nous avons divis√© cela en diff√©rentes commandes, mais toutes les commandes sont g√©n√©ralement ex√©cut√©es atomiquement dans le bloc MULTI / EXEC. <br><br>  Pour interroger notre petit index de texte int√©gral, nous utilisons la commande SINTER (intersection d'ensembles).  Trouvez des documents avec ¬´tr√®s¬ª et ¬´rapide¬ª: <br><br><pre> <code class="plaintext hljs">&gt; SINTER very fast 1) "ex2" 2) "ex1"</code> </pre> <br>  Dans le cas o√π aucun document ne correspond √† la demande, nous obtiendrons un r√©sultat vide: <br><br><pre> <code class="plaintext hljs">&gt; SINTER cheetahs redis (empty list or set)</code> </pre> <br>  Par souci de coh√©rence, il est pr√©f√©rable d'utiliser SUNION au lieu de SINTER: <br><br><pre> <code class="plaintext hljs">&gt; SUNION cheetahs redis 1) "ex2" 2) "ex1" 3) "ex3"</code> </pre> <br>  La suppression d'un objet de l'index est un peu plus compliqu√©e.  Tout d'abord, r√©cup√©rez les mots index√©s du document, puis supprimez l'identifiant du document de chaque mot: <br><br><pre> <code class="plaintext hljs">&gt; SMEMBERS ex3 1) "spots" 2) "have" 3) "cheetahs" &gt; SREM have ex3 &gt; SREM cheetahs ex3 &gt; SREM spots ex3</code> </pre> <br>  Redis n'a pas d'op√©rateur s√©par√© pour effectuer toutes ces √©tapes avec une seule commande, vous devez donc d'abord interroger avec la commande SMEMBERS, puis supprimer chaque objet s√©quentiellement √† l'aide de SREM. <br><br>  Bien s√ªr, il s'agit d'une recherche en texte int√©gral tr√®s simplifi√©e.  Vous pouvez faire plus avanc√© en utilisant des ensembles tri√©s au lieu des ensembles habituels.  Dans ce cas, si un mot appara√Æt plusieurs fois dans un document, vous pouvez le classer plus haut que le document dans lequel il appara√Æt une fois.  Les sch√©mas d√©crits ci-dessus sont plus ou moins les m√™mes, √† l'exception des types d'ensembles utilis√©s. <br><br><h3>  Index partitionn√©s </h3><br>  Une seule instance (ou fragment) de Redis est tr√®s viable, mais il peut arriver que vous ayez besoin d'un index r√©parti sur plusieurs instances.  Par exemple, pour augmenter le d√©bit en parall√©lisant des index plus grands que l'espace libre d'une instance.  Supposons que vous souhaitiez effectuer une op√©ration sur plusieurs touches.  Un moyen efficace de s√©parer (partitionner) ces cl√©s est d'assurer une distribution uniforme des cl√©s sur chaque partition, d'effectuer toutes les op√©rations en parall√®le sur chaque partition, puis de combiner les r√©sultats √† la fin. <br><br>  Pour obtenir une distribution uniforme des cl√©s, nous utiliserons un algorithme de hachage non cryptographique.  N'importe quelle fonction de hachage rapide fera l'affaire, mais nous utilisons le c√©l√®bre CRC-32 comme exemple.  Dans la plupart des cas, ces algorithmes renvoient le r√©sultat en hexad√©cimal (pour ¬´my-cool-document¬ª CRC-32 renverra F9FDB2C9).  La repr√©sentation hexad√©cimale est plus simple pour la machine, mais ce n'est qu'une autre repr√©sentation d'entiers d√©cimaux, ce qui signifie que vous pouvez effectuer des calculs sur ces valeurs. <br>  Ensuite, vous devez d√©terminer le nombre de partitions - cela devrait √™tre au moins x2 du nombre de copies.  Cela contribue en outre √† la mise √† l'√©chelle. <br><br>  Disons que nous avons 3 copies et 6 partitions.  La partition √† laquelle le document est envoy√© peut √™tre calcul√©e par l'op√©ration suivante: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&amp;#xA0;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>e</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="60.941ex" height="2.78ex" viewBox="0 -832 26238.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-68" x="1575" y="0"></use><g transform="translate(2152,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-66" x="353" y="-219"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-75" x="2891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6E" x="3463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-63" x="4064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-74" x="4497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-69" x="4859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6F" x="5204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6E" x="5690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMAIN-28" x="6290" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-69" x="6680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-64" x="7025" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-65" x="7549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6E" x="8015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-74" x="8616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-69" x="8977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-66" x="9323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-69" x="9873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-65" x="10219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-72" x="10685" y="0"></use><g transform="translate(11137,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-64" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6F" x="11857" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-63" x="12342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-75" x="12776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6D" x="13348" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-65" x="14227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6E" x="14693" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-74" x="15294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMAIN-29" x="15655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6D" x="16295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6F" x="17173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-64" x="17659" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6E" x="18182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-75" x="18783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6D" x="19355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-62" x="20234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-65" x="20663" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-72" x="21130" y="0"></use><g transform="translate(21581,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-70" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-61" x="22287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-72" x="22817" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-74" x="23268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-69" x="23630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-74" x="23975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-69" x="24337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6F" x="24682" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-6E" x="25168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700186,15700190,15700256,15700259,15700262,15700265,15700271,15700302&amp;usg=ALkJrhgzp6WQWe9YqA33oMgzE5rs_-cPtg#MJMATHI-73" x="25768" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&nbsp;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>e</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mtext>&nbsp;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> hash \ _function (identifier \ _document) \ mod number \ _partitions </script></p><br><br><pre> <code class="plaintext hljs">CRC32(‚Äúmy-cool-document‚Äù) = F9FDB2C9 (16)  4194153161 (10) 4194153161 mod 6 = 5</code> </pre> <br>  Dans Redis Enterprise, vous pouvez contr√¥ler la partition √† laquelle appartient la cl√©, en utilisant des expressions r√©guli√®res pr√©d√©finies ou en enveloppant une partie de la cl√© avec des accolades.  Donc, pour notre exemple, nous pouvons d√©finir la cl√© du document comme suit: <br><br>  <i>idx: my-cool-document {5}</i> <br><br>  Ensuite, nous avons un autre document qui √©met une partition avec le num√©ro 3, par cons√©quent, la cl√© ressemblera √† ceci: <br><br>  <i>idx: mon-autre-document {3}</i> <br><br>  Si vous avez des cl√©s auxiliaires suppl√©mentaires avec lesquelles vous devrez travailler et qui sont associ√©es √† ce document, vous devez √™tre sur la m√™me partition afin de pouvoir effectuer des op√©rations avec les deux cl√©s en m√™me temps sans rencontrer un tas d'erreurs.  Pour ce faire, vous devez ajouter le m√™me num√©ro de partition √† la cl√© que le document. <br><br>  En regardant vos donn√©es √† distance, vous verrez que votre index est r√©parti assez uniform√©ment sur les partitions.  Vous pouvez parall√©liser la t√¢che qui doit √™tre effectu√©e pour chaque partition.  Lorsque vous avez une t√¢che qui doit √™tre effectu√©e √† travers l'index entier, votre application devra effectuer la m√™me logique pour chaque partition, retourner le r√©sultat et combiner comme requis dans l'application. <br><br>  Sur ce point, le premier article prend fin.  La prochaine sera une traduction des sous-titres ¬´Mod√®les d'interaction¬ª et ¬´Mod√®les de stockage de donn√©es¬ª. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485672/">https://habr.com/ru/post/fr485672/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485650/index.html">Docker Image Reduction Techniques</a></li>
<li><a href="../fr485652/index.html">Statistiques des commentaires en ligne Confluence</a></li>
<li><a href="../fr485654/index.html">Une id√©e tir√©e de la physique aide l'IA √† travailler dans des dimensions plus √©lev√©es.</a></li>
<li><a href="../fr485660/index.html">La soci√©t√© de protection DDoS a elle-m√™me lanc√© des attaques DDoS, a reconnu son fondateur</a></li>
<li><a href="../fr485664/index.html">Cr√©ation de param√®tres dynamiques dans un travail Jenkins, ou comment rendre votre t√¢che conviviale</a></li>
<li><a href="../fr485682/index.html">La gestion du temps n'aidera pas: la procrastination est le probl√®me de la r√©gulation des √©motions, pas du temps</a></li>
<li><a href="../fr485688/index.html">Myapp prolonge ses vacances</a></li>
<li><a href="../fr485692/index.html">Conseils d'un sp√©cialiste informatique au client, ou comment automatiser le d√©sordre</a></li>
<li><a href="../fr485694/index.html">Embox sur processeur Elbrus. Ou n'oublie jamais ce que tu as en intelligence</a></li>
<li><a href="../fr485702/index.html">FunCorp iOS Meetup # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>