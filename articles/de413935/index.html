<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍦 🚂 🖐🏽 Wie gut kennst du Bash? 😢 👩🏿‍🌾 🐪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Benutzt du die Muschel jeden Tag? Bereit, einige logische Probleme zu lösen und etwas Neues zu lernen? Willkommen bei Katze. 

 Einige der hier vorges...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie gut kennst du Bash?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413935/"><img src="https://habrastorage.org/webt/hv/j_/81/hvj_81nnk7sst8bq3eclmlzkfec.png"><br>  Benutzt du die Muschel jeden Tag?  Bereit, einige logische Probleme zu lösen und etwas Neues zu lernen?  Willkommen bei Katze. <br><a name="habracut"></a><br>  Einige der hier vorgestellten Aufgaben bringen keine wirklichen Vorteile, da sie einige komplexe Grenzfälle betreffen.  Der andere Teil ist nützlich für diejenigen, die ständig die Shell verwenden und die Skripte anderer lesen. <br><br>  <b>Hinweis:</b> Zum Zeitpunkt des Schreibens verwendete der Autor bash 4.4.12 (1) -release im Linux-Subsystem unter Windows 10. Die Komplexität der Aufgaben ist unterschiedlich. <br><br><h1>  Eingabe- / Ausgabestreams </h1><br>  <b>Aufgabe 1</b> <br><br><pre><code class="bash hljs">$ cat 1 The cake is a lie! Wanted! Cake or alive $ cat 1 | head | tail | sed -e <span class="hljs-string"><span class="hljs-string">'s/alive/dead/g'</span></span> | tee | wc -l &gt; 1</code> </pre> <br>  Wie viele Zeilen befinden sich nach dem Befehl in Datei 1? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  1 <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Nach der Interpretation des Befehls, aber vor dem Ausführen aller Programme, arbeitet bash mit den angegebenen Eingabe- / Ausgabestreams.  Somit wird Datei <code>1</code> gelöscht, bevor das erste Programm gestartet wird, und <code>cat</code> öffnet die bereits gelöschte Datei. <br></div></div><br>  <b>Aufgabe 2</b> <br><br><pre> <code class="bash hljs">$ cat file1 I love UNIX! $ cat file2 I don<span class="hljs-string"><span class="hljs-string">'t like UNIX $ cat file1 &lt;file2</span></span></code> </pre><br>  Was wird auf dem Bildschirm angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text"> <code>I love UNIX!</code> <br> </div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Einige Programme hämmern auf stdin, wenn Dateien angegeben werden. <br></div></div><br>  <b>Aufgabe 3</b> <br><br><pre> <code class="bash hljs">$ cat file Just <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> fun $ cat file 1&gt;&amp;2 2&gt;/dev/null</code> </pre><br>  Was wird auf dem Bildschirm angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text"> <code>Just for fun</code> <br> </div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Es besteht ein Missverständnis, dass die Sequenz <code>1&gt;&amp;2</code> den ersten Thread zum zweiten umleitet, dies ist jedoch nicht der Fall.  Betrachten Sie das Team aus der Aufgabe.  Zu Beginn der Interpretation des eingegebenen Befehls sieht die Flusstabelle folgendermaßen aus: <br><table><tbody><tr><td>  0 </td><td>  1 </td><td>  2 </td></tr><tr><td>  stdin </td><td>  stdout </td><td>  stderr </td></tr></tbody></table><br>  bash erkennt die Sequenz <code>1&gt;&amp;2</code> und kopiert den Inhalt von Zelle 2 in Zelle 1: <br><table><tbody><tr><td>  0 </td><td>  1 </td><td>  2 </td></tr><tr><td>  stdin </td><td>  <b>stderr</b> </td><td>  stderr </td></tr></tbody></table><br>  Nach dem Erkennen der Sequenz <code>2&gt;/dev/null</code> schreibt der Interpreter den Wert in Zelle 2, wobei die anderen Zellen intakt bleiben: <br><table><tbody><tr><td>  0 </td><td>  1 </td><td>  2 </td></tr><tr><td>  stdin </td><td>  stderr </td><td>  <b>/ dev / null</b> </td></tr></tbody></table><br>  bash zeigt auch einen Strom von Fehlern an, so dass wir den Text der Datei auf dem Bildschirm finden. <br></div></div><br>  <b>Aufgabe 4</b> <br>  Wie sende ich eine stdout-Ausgabe an stderr und eine stderr-Ausgabe im Gegenteil an stdout? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text"> <code>4&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;4</code> <br> </div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Das Prinzip ist genau das gleiche wie in der vorherigen Aufgabe.  Deshalb benötigen wir einen zusätzlichen Stream für die temporäre Speicherung. <br></div></div><br><h1>  Ausführbare Dateien </h1><br>  <b>Aufgabe 5</b> <br><br>  Gegebene Datei test.sh <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ls $* ls $@ ls "$*" ls "$@"</span></span></code> </pre><br>  Folgende Befehle werden ausgeführt: <br><br><pre> <code class="bash hljs">$ ls 1 2 3 test.sh $ ./test.sh 1 2 3</code> </pre><br>  Was wird das Skript ausgeben? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text"> <code>1 2 3 <br> 1 2 3 <br> ls: cannot access '1 2 3': No such file or directory <br> 1 2 3 <br></code> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Ohne Anführungszeichen unterscheiden sich die Variablen $ * und $ @ nicht und werden in alle angegebenen Positionsargumente des Skripts erweitert, die durch ein Leerzeichen getrennt sind.  In Anführungszeichen ändert sich die Offenlegungsmethode: $ * wird zu "$ 1 $ 2 $ 3" ​​und $ @ wird wiederum zu "$ 1" "$ 2" "$ 3".  Da sich die Datei „1 2 3“ nicht im Verzeichnis befindet, zeigt ls einen Fehler an <br></div></div><br>  <b>Aufgabe 6</b> <br><br>  Erstellen Sie im aktuellen Verzeichnis eine <code>-c</code> Datei mit Berechtigungen von 755 und den folgenden Inhalten: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash echo $1</span></span></code> </pre><br>  Setzen Sie die Variable $ PATH auf Null und versuchen Sie Folgendes auszuführen: <br><br><pre> <code class="bash hljs">$ PATH= $ -c <span class="hljs-string"><span class="hljs-string">"echo SURPRISE"</span></span></code> </pre><br>  Was wird auf dem Bildschirm angezeigt?  Was passiert, wenn Sie den letzten Befehl erneut eingeben? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  Das erste Mal wird <code>SURPRISE</code> angezeigt, das zweite Mal <code>echo SURPRISE</code> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Wenn PATH leer ist, beginnt die Shell mit der Suche nach Dateien im aktuellen Verzeichnis.  -c ist gerade gefunden.  Da es sich bei der ausführbaren Datei um eine Textdatei handelt, wird die erste Zeile zum Thema Shebang gelesen.  Das Team wird gemäß der Vorlage zusammengestellt: <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">shebang</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filename</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">args</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Daher sieht unser Befehl vor der Ausführung folgendermaßen aus: <br><br><pre> <code class="hljs swift">/bin/bash -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-string"><span class="hljs-string">"echo SURPRISE"</span></span></code> </pre> <br>  Infolgedessen ist es absolut nicht das, was wir tun wollten. <br><br>  Wenn Sie es ein zweites Mal ausführen, nimmt die Shell Informationen zu -c aus dem Cache auf und führt sie bereits korrekt aus.  Die einzige Möglichkeit, sich vor einem solchen unerwarteten Effekt zu schützen, besteht darin, dem Shebang zwei Minuspunkte hinzuzufügen. <br></div></div><br><h1>  Variablen </h1><br>  <b>Aufgabe 7</b> <br><br><pre> <code class="bash hljs">$ ls file $ cat &lt;$(ls) $ cat &lt;(ls)</code> </pre><br>  Was wird im ersten und zweiten Fall angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  Die erste zeigt den Inhalt der Datei an, die zweite den Dateinamen. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Im ersten Fall wird die Substitution durchgeführt <br><br><pre> <code class="hljs matlab"><span class="hljs-built_in"><span class="hljs-built_in">cat</span></span> &lt;file</code> </pre> <br>  Im zweiten Fall wird <code>&lt;(ls)</code> durch eine Named Pipe ersetzt, die durch die Eingabe mit stdout ls und die Ausgabe von stdin cat verbunden ist. <br><br>  Nach dem Ersetzen hat der Befehl die Form: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">cat</span></span> /dev/fd/xx</code> </pre> <br></div></div><br>  <b>Aufgabe 8</b> <br><br><pre> <code class="bash hljs">$ TEST=123456 $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">${TEST%56}</span></span></code> </pre><br>  Was wird auf dem Bildschirm angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  1234 <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Bei einem solchen Datensatz stimmt das Muster überein (# - vom Anfang der Variablen; ## - gierig vom Anfang der Variablen;% - vom Ende der Variablen; %% - gierig vom Ende der Variablen) und wird beim Ersetzen gelöscht.  Der Inhalt der Variablen bleibt erhalten.  So ist es beispielsweise zweckmäßig, den Dateinamen ohne die Erweiterung abzurufen. <br><br><pre> <code class="bash hljs">$ TEST=file.ext $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">${TEST%.ext}</span></span> file</code> </pre><br></div></div><br>  <b>Aufgabe 9</b> <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">${friendship:-magic}</span></span></code> </pre><br>  Was wird auf dem Bildschirm angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  Wenn die Freundschaftsvariable definiert ist, dann der Inhalt der Variablen.  Ansonsten Magie. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  In der Dokumentation wird diese Magie als "nicht gesetzt oder null" bezeichnet und ermöglicht es Ihnen, den angegebenen Standardwert einer Variablen in einer Zeile zu verwenden. <br></div></div><br><h1>  Ausführungsreihenfolge </h1><br>  <b>Aufgabe 10</b> <br><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Success <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre><br>  Was wird auf dem Bildschirm angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  Nichts <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Mit den while- und if-Anweisungen können Sie eine ganze Folge von Aktionen in die Bedingung packen, aber das Ergebnis (Rückkehrcode) wird nur im letzten Befehl berücksichtigt.  Da es falsch ist, beginnt die Schleife nicht einmal. <br></div></div><br>  <b>Aufgabe 11</b> <br><br><pre> <code class="bash hljs">$ <span class="hljs-literal"><span class="hljs-literal">false</span></span> &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">true</span></span> || <span class="hljs-literal"><span class="hljs-literal">true</span></span> &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">false</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2</code> </pre><br>  Was wird auf dem Bildschirm angezeigt? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  2 <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Erklärung</b> <div class="spoiler_text">  Fügen Sie Klammern für die explizite Reihenfolge hinzu und vereinfachen Sie den Befehl, wobei berücksichtigt wird, dass nur der Rückkehrcode des letzten Befehls berücksichtigt wird: <br><br><pre> <code class="bash hljs">((((<span class="hljs-literal"><span class="hljs-literal">false</span></span> &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">true</span></span>) || <span class="hljs-literal"><span class="hljs-literal">true</span></span>) &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">false</span></span>) &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1) || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2 (((<span class="hljs-literal"><span class="hljs-literal">false</span></span> || <span class="hljs-literal"><span class="hljs-literal">true</span></span>) &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">false</span></span>) &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1) || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2 ((<span class="hljs-literal"><span class="hljs-literal">true</span></span> &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">false</span></span>) &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1) || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2 (<span class="hljs-literal"><span class="hljs-literal">false</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1) || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2 <span class="hljs-literal"><span class="hljs-literal">false</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2</code> </pre><br></div></div><br>  Kommentare, Vorschläge und zusätzliche Aufgaben werden in Kommentaren oder PM begrüßt. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413935/">https://habr.com/ru/post/de413935/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413925/index.html">CVT für Moskvich</a></li>
<li><a href="../de413927/index.html">Digispark on Attiny85 - Verbindung unter Windows 10 herstellen</a></li>
<li><a href="../de413929/index.html">Sotschi. Kamera: Funktionen zum Erstellen eines Projekts im Allgemeinen, vollständig, vollständig von Grund auf neu, ohne dass bereits Standards und Beispiele implementiert wurden</a></li>
<li><a href="../de413931/index.html">Linux Kernel 4.17 Release: Was Sie darüber wissen müssen</a></li>
<li><a href="../de413933/index.html">[FALL] Wie wir das Hangar-Layout für die Boeing 747 erstellt haben</a></li>
<li><a href="../de413937/index.html">Programmierer falsche Vorstellungen über Beschäftigung</a></li>
<li><a href="../de413939/index.html">Reduktion des neuronalen Netzes durch Variationsoptimierung</a></li>
<li><a href="../de413941/index.html">Was ich nach vielen Interviews in Unternehmen und Startups aus dem Bereich KI gelernt habe</a></li>
<li><a href="../de413943/index.html">Das frühe Universum 4. Kinematik eines homogen expandierenden Universums</a></li>
<li><a href="../de413945/index.html">Einfacher als es klingt. Kapitel 4-5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>