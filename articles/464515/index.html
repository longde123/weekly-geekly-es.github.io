<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öìÔ∏è üôÜüèæ ü¶ä C√≥mo hacer correos electr√≥nicos y no desordenar: consejos pr√°cticos üå∑ üë©üèº‚ÄçüöÄ ‚ôªÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un desarrollador, que se encontr√≥ por primera vez generando correos electr√≥nicos, casi no tiene oportunidad de escribir una aplicaci√≥n, que lo har√° co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo hacer correos electr√≥nicos y no desordenar: consejos pr√°cticos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/464515/"><img src="https://habrastorage.org/webt/s8/cx/7x/s8cx7xzo0rsuk0xw3z25hbfcjke.png"><br><br>  Un desarrollador, que se encontr√≥ por primera vez generando correos electr√≥nicos, casi no tiene oportunidad de escribir una aplicaci√≥n, que lo har√° correctamente.  Alrededor del 40% de los correos electr√≥nicos, generados por aplicaciones corporativas, est√°n violando alguna forma de est√°ndar, y debido a esto, hay problemas con la entrega y la visualizaci√≥n.  Hay razones para esto: los correos electr√≥nicos son t√©cnicamente m√°s dif√≠ciles que la web, y el funcionamiento de los correos electr√≥nicos est√° regulado por unos cientos de est√°ndares, as√≠ como por un n√∫mero incontable de pr√°cticas generalmente aceptadas (y no tanto), mientras que los clientes de correo electr√≥nico son m√°s variados e impredecible que los navegadores.  Las pruebas pueden mejorar significativamente la situaci√≥n, pero los materiales que se dedican a probar el sistema de correo electr√≥nico son pr√°cticamente inexistentes. <br><br>  Mail.ru interact√∫a regularmente con sus usuarios por correo electr√≥nico.  En nuestros proyectos, todos los componentes responsables de generar correos electr√≥nicos e incluso correos individuales est√°n sujetos a pruebas obligatorias.  En este art√≠culo, compartiremos nuestra experiencia (aprender de nuestros errores). <br><a name="habracut"></a><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQu√© tipo de correos electr√≥nicos hay?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¬øQui√©n participa en el proceso de prueba y control?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Correo y transporte de correo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La interfaz de la infraestructura de correo electr√≥nico y los l√≠mites de la aplicaci√≥n probada.</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Definici√≥n de par√°metros de prueba</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Estructura t√≠pica de una aplicaci√≥n generadora.</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Qu√© y cu√°ndo probar</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Infraestructura de entrega</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Aplicaci√≥n de generaci√≥n</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Plantillas de correo electr√≥nico estructurales y tipogr√°ficas</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos b√°sicos para verificar la infraestructura</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos de autenticaci√≥n</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Verificaci√≥n de la aplicaci√≥n generadora</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos para direcciones de correo electr√≥nico</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Direcciones de sobres</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Direcciones de encabezado de correo electr√≥nico</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos para encabezados</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos para la estructura del correo electr√≥nico.</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos de URI</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Requisitos de dise√±o de correo electr√≥nico</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Realizar pruebas divididas</a> <br></li></ul><br><a name="1"></a><h2>  ¬øQu√© tipo de correos electr√≥nicos hay? </h2><br>  La aplicaci√≥n puede generar varios tipos de correos electr√≥nicos.  Se pueden clasificar en varias categor√≠as.  Por el m√©todo de selecci√≥n de destinatarios - personal / activado - selectivo-grupal.  Con cita previa: transacciones- comercializaci√≥n- servicio.  Puede establecer diferentes requisitos para diferentes tipos de correo electr√≥nico y aplicar varios escenarios de prueba. <br><br>  Los correos electr√≥nicos personales activados se generan en respuesta a cualquier evento, por ejemplo, acciones del usuario o cambios de estado de los objetos del sistema.  Son generados por la aplicaci√≥n y, por lo tanto, son los m√°s interesantes en lo que respecta a las pruebas.  Los correos electr√≥nicos activados pueden ser transaccionales, de marketing y para uso del servicio.  Los correos electr√≥nicos selectivos se env√≠an a una selecci√≥n din√°mica de usuarios que cumplen alg√∫n tipo de criterio.  Los correos electr√≥nicos grupales se env√≠an a un grupo permanente de destinatarios, por ejemplo, a todos los usuarios o socios.  Los correos electr√≥nicos selectivos y grupales son a menudo para fines de marketing, y el env√≠o de dichos correos electr√≥nicos se inicia manualmente o de manera programada. <br><br>  Los correos electr√≥nicos transaccionales se generan en el proceso de un usuario que completa alguna forma de acci√≥n.  Dichos correos electr√≥nicos incluyen, por ejemplo, facturas, tickets o notificaciones de estado de entrega.  Los correos electr√≥nicos transaccionales siempre se activan y est√°n destinados a transportar informaci√≥n importante.  Deben ser lo m√°s simples y compatibles posible, y las pruebas deben realizarse en una gran cantidad de clientes de correo. <br><br>  Los correos electr√≥nicos de marketing alientan al usuario a tomar medidas, por ejemplo, esta puede ser una oferta de un descuento personal basado en compras anteriores.  Los datos transaccionales se pueden utilizar en estos correos electr√≥nicos, y se pueden activar correos electr√≥nicos o de forma masiva, peri√≥dica o una sola vez.  Para estos correos electr√≥nicos, la eficiencia es m√°s importante, y los resultados de la prueba dividida generalmente lo determinan.  Algunos aspectos de compatibilidad pueden ser sacrificados por la eficiencia. <br><br>  Los correos electr√≥nicos de marketing grupales, por ejemplo, mensajes sobre ofertas de temporada, promociones y ventas, a menudo se env√≠an 'manualmente' y no son parte de su aplicaci√≥n, pero tambi√©n puede (y debe) aplicarles principios de prueba generales. <br><br>  Adem√°s, puede haber correos electr√≥nicos de servicio: notificaciones generadas para el personal, para sistemas CRM automatizados, registro en diario, auditor√≠a o DWH.  Dichos correos electr√≥nicos generalmente son correos electr√≥nicos activados, lo que significa que tambi√©n son parte de la aplicaci√≥n y deben ser probados. <br><br><a name="2"></a><h2>  ¬øQui√©n participa en el proceso de prueba y control? </h2><br><ol><li> Ingeniero de control de calidad: participa en todas las etapas del proceso. <br></li><li>  Ingeniero de redes: responsable de configurar la infraestructura de red y la infraestructura de entrega de mensajes.  El ingeniero de redes debe participar en la planificaci√≥n y las pruebas de infraestructura. <br></li><li>  Especialista en entrega: persona que monitorea la capacidad de entrega de los correos electr√≥nicos, que tambi√©n participa en el monitoreo de los par√°metros t√©cnicos y administrativos de todos los correos electr√≥nicos enviados, y monitorea el progreso del proceso de env√≠o de correos.  Es responsable de garantizar que los correos electr√≥nicos enviados lleguen al mayor porcentaje de usuarios y no terminen en spam.  Para este prop√≥sito, el especialista debe tener conocimiento y contactos espec√≠ficos.  Si hay alg√∫n problema con la entrega de correos electr√≥nicos, √©l es quien debe comprender la causa probable y eliminarla;  ya sea eliminando obst√°culos t√©cnicos;  o cambiar algo en el contenido de los correos electr√≥nicos;  o intente resolver el problema con el servicio de soporte del proveedor de correo, al que no llegan los correos electr√≥nicos.  Dicho especialista (si lo hay) tambi√©n debe participar en la elaboraci√≥n de la lista de verificaci√≥n y en la prueba de infraestructura que genera aplicaciones y correos electr√≥nicos.  Sin embargo, el proceso de prueba en s√≠ mismo debe estar bajo el control del servicio de control de calidad. <br></li><li>  Email-marketer: determina la efectividad de los boletines de marketing.  Bajo su control, se realizan las pruebas divididas para la distribuci√≥n de marketing a la audiencia.  Email-marketer tambi√©n controla la segmentaci√≥n de la base de usuarios, la composici√≥n y la frecuencia de los correos electr√≥nicos enviados, la 'presentaci√≥n' visual del correo electr√≥nico al usuario. <br></li></ol><br>  Todos estos roles no son necesariamente realizados por un empleado dedicado;  El rol del vendedor puede ser realizado por uno de los gerentes de producto, y el rol del especialista en entrega, por ejemplo, puede ser realizado por un empleado de soporte o un ingeniero de redes.  En las empresas de nueva creaci√≥n, es muy probable que todo esto tenga que ser tratado por una sola persona, y pueden llegar a ser un especialista de calidad. <br><br><a name="3"></a><h2>  Correo y transporte de correo </h2><br>  La estructura del correo electr√≥nico es como un iceberg masivo, y tiene dos niveles.  Existen m√°s de cien est√°ndares diferentes que rigen los correos electr√≥nicos, pero casi todos pertenecen a uno de estos dos niveles: <br><br>  <b>La parte submarina de un</b> servicio de red <b>iceberg</b> , cuyo protocolo b√°sico es el protocolo de aplicaci√≥n SMTP definido por RFC 5321. Es responsable de la entrega de correos electr√≥nicos.  Se forma un sobre denominado SMTP para la entrega del correo electr√≥nico, que incluye las direcciones del remitente y el destinatario del nivel SMTP.  Otros servicios de red, como DNS, tambi√©n son responsables de entregar el correo electr√≥nico.  El componente principal de la infraestructura de red es el Agente de transferencia de correo (MTA).  El MTA es responsable de entregar la cola de entrega de mensajes y el proceso de entrega a los servidores receptores.  Los ejemplos de MTA incluyen Postfix, Sendmail, Exim, servicio SMTP de Microsoft. <br><br>  A esta parte submarina del iceberg, que incluye el MTA, los par√°metros de DNS y otros par√°metros de red, llamaremos infraestructura de correo electr√≥nico o infraestructura de entrega de mensajes. <br><br>  <b>La punta del iceberg</b> : el correo electr√≥nico en s√≠.  La estructura b√°sica del correo electr√≥nico est√° definida por el RFC 5322 est√°ndar. El correo electr√≥nico consta de encabezados de servicio y una o m√°s partes de datos.  Los datos pueden estar en formato de texto plano y / o HTML o incluso AMP, con im√°genes en l√≠nea o archivos adjuntos de casi cualquier tipo. <br><br><a name="4"></a><h2>  La interfaz de la infraestructura de correo electr√≥nico y los l√≠mites de la aplicaci√≥n probada. </h2><br>  La infraestructura de correo electr√≥nico, como regla, tiene una o varias interfaces a trav√©s de las cuales se env√≠a un correo electr√≥nico (cuando ingresa a la cola de entrega del MTA).  Por ejemplo, el servicio de env√≠o SMTP, la funci√≥n <code>mail()</code> en PHP, transferencia de datos a una aplicaci√≥n de correo externo o sendmail, API para servicio interno o externo (como GetResponse, SendPulse o Amazon SES).  Consideraremos estas interfaces como parte de la infraestructura.  A menudo sucede que la Aplicaci√≥n A prepara los datos para un correo electr√≥nico y una lista de destinatarios, y luego los env√≠a a la Aplicaci√≥n B a trav√©s de su API (para los correos masivos de marketing, esto se puede hacer manualmente a trav√©s de la interfaz de usuario-UI), y la aplicaci√≥n B genera un mensaje de correo en RFC 5322 y lo entrega al MTA.  Para la aplicaci√≥n A (y al probarla), la aplicaci√≥n B ser√° parte de la infraestructura de correo electr√≥nico.  La API o IU de la aplicaci√≥n B ser√° para la interfaz de la aplicaci√≥n A de la infraestructura de correo.  Aunque para la Aplicaci√≥n B, la situaci√≥n ser√° diferente, y la infraestructura de correo para ella ser√° aplicaciones o protocolos de red de nivel inferior. <br><br><a name="5"></a><h2>  Definici√≥n de par√°metros de prueba </h2><br>  Al probar cada aplicaci√≥n, es importante seleccionar todas las infraestructuras de correo utilizadas (puede haber varias de ellas) y para cada infraestructura seleccionar las interfaces utilizadas (tambi√©n puede haber varias para cada infraestructura).  Para cada interfaz, la composici√≥n y el formato de los datos que se le transmiten se determina con la mayor precisi√≥n posible, por ejemplo, texto de correo electr√≥nico en TEXTO / HTML, texto de correo electr√≥nico en TEXTO / NORMAL, asunto del correo electr√≥nico, nombre del destinatario, direcci√≥n del destinatario, nombre del remitente, direcci√≥n del remitente (RFC5321.From), la direcci√≥n del remitente del convector SMTP (RFC5322.mailfrom).  A continuaci√≥n, se desarrolla un conjunto de requisitos para cada par√°metro (representaciones, codificaciones, valores l√≠mite, etc.), se determinan m√©todos para monitorear cada uno de los par√°metros (c√≥mo comparar el resultado real con el esperado). <br><br><a name="6"></a><h2>  Estructura t√≠pica de una aplicaci√≥n generadora. </h2><br>  Como regla general, el mismo producto que estamos probando es responsable de la generaci√≥n de correos electr√≥nicos y datos en √©l.  Esta suele ser una aplicaci√≥n de servidor (pero a veces cliente).  Define la estructura del correo electr√≥nico, parte de los encabezados del servicio, formatos de encapsulaci√≥n de datos, representaciones de cadenas y codificaci√≥n de texto.  Un ejemplo simple de tal aplicaci√≥n es el script que forma el correo electr√≥nico y llama a la funci√≥n <code>mail()</code> .  Los principales elementos de la aplicaci√≥n que deben controlarse son: <br><br><ul><li>  el c√≥digo responsable de generar encabezados y / o estructura de correo electr√≥nico, si la estructura de correo electr√≥nico se genera din√°micamente, y / o plantillas de correo electr√≥nico est√°ticas que describen su estructura; <br></li><li>  Dise√±o HTML del correo electr√≥nico (idealmente, es una entidad separada o parte de la plantilla / dise√±o del correo electr√≥nico, pero se puede incrustar en el c√≥digo de la aplicaci√≥n); <br></li><li>  sustituci√≥n de datos de la aplicaci√≥n en un correo electr√≥nico (o en una plantilla de correo electr√≥nico); <br></li><li>  integraci√≥n de la aplicaci√≥n con la infraestructura de entrega de correo electr√≥nico, la correcci√≥n de los par√°metros pasados ‚Äã‚Äãa la interfaz de la infraestructura. <br></li></ul><br><a name="7"></a><h2>  Qu√© y cu√°ndo probar </h2><br>  Nos guste o no, todo el iceberg debe ser probado.  Hay varios componentes principales que requieren pruebas: <br><br><a name="8"></a><h4>  Infraestructura de entrega </h4><br>  El √©nfasis en las pruebas debe hacerse en: entregabilidad del correo electr√≥nico;  registros DNS correctos, incluidos registros PTR / FCrDNS, MX y A;  Par√°metros del protocolo SMTP (HELO, use TLS);  autorizaci√≥n por correo electr√≥nico (SPF / DKIM / DMARC);  Direcciones de sobres SMTP (si la aplicaci√≥n no las administra);  correcci√≥n del procesamiento de los par√°metros de entrada de la interfaz de infraestructura;  seguimiento, grabaci√≥n y procesamiento de correos electr√≥nicos no entregados. <br><br>  Es necesario probar la infraestructura durante la implementaci√≥n inicial y cada vez que se realizan cambios en la infraestructura misma (la configuraci√≥n del MTA, DNS o cambios de red) o la interfaz para enviar un correo electr√≥nico;  utilizando un nuevo dominio, red o API;  se requieren pruebas adicionales si las caracter√≠sticas de los correos electr√≥nicos enviados, como su idioma, tama√±o o n√∫meros, cambian significativamente.  Seg√∫n la experiencia, la infraestructura tiende a cambiar "por s√≠ misma", por lo que las pruebas b√°sicas deben realizarse peri√≥dicamente, incluso si no hay informaci√≥n sobre los cambios. <br><br>  Es posible y necesario involucrar al ingeniero de redes y al especialista en entregabilidad en la elaboraci√≥n del plan y las listas de verificaci√≥n para probar la infraestructura. <br><br><a name="9"></a><h4>  Aplicaci√≥n de generaci√≥n </h4><br>  Las direcciones del sobre SMTP deben ser monitoreadas (si la aplicaci√≥n las controla, es decir, se transfieren a la interfaz - desde-sobre, sobre-hasta), los valores de los encabezados de servicio del correo electr√≥nico (Fecha, Mensaje -ID, Lista-Darse de baja, Autoenviado, etc.).  Cl√°usula), autorizaci√≥n de correo electr√≥nico (DKIM / DMARC), codificaci√≥n MIME (base64, entre comillas), correcci√≥n general del formato de correo electr√≥nico, por ejemplo, la ausencia de caracteres no ASCII en los encabezados, la composici√≥n de los datos que se inyectan , la activaci√≥n correcta de los desencadenantes, los mecanismos de cancelaci√≥n de suscripci√≥n, los mecanismos de seguimiento para escribir y recopilar estad√≠sticas (encabezados de administrador de correo, por ejemplo, Feedback-ID o X-Mailru-Msgtype, as√≠ como p√≠xeles de seguimiento). <br><br>  Es necesario probar una aplicaci√≥n durante su desarrollo, cuando todos sus componentes relacionados que son responsables de generar y almacenar datos cambian, con cambios significativos en las plantillas de correo electr√≥nico, al cambiar la infraestructura o interfaz utilizada, as√≠ como en el marco de regresiones generales <br><br><a name="10"></a><h4>  Plantillas de correo electr√≥nico estructurales y tipogr√°ficas (pueden ser parte de una aplicaci√≥n generadora o se desarrollan por separado) </h4><br>  Se verifica la estructura del correo electr√≥nico (Tipo de contenido, Disposici√≥n de contenido, anidamiento de partes multiparte del correo electr√≥nico, codificaci√≥n de texto, par√°metros de cadena), el valor del destino y los encabezados mostrados (De, Para, Responder a, Asunto ), la forma en que se muestra el correo electr√≥nico en la lista de correos electr√≥nicos y cuando se lee en varias interfaces, microformatos (por ejemplo, que un evento de calendario se reconoce como un evento de calendario o un boleto a√©reo como boleto a√©reo), marca. <br><br>  Las plantillas de correo electr√≥nico deben probarse cada vez que realice al menos los m√°s m√≠nimos cambios, as√≠ como por separado, por ejemplo, en una situaci√≥n en la que los correos electr√≥nicos ingresan a la aplicaci√≥n antes de que la parte del servidor est√© lista. <br><br>  Se recomienda involucrar a un especialista en marketing por correo electr√≥nico y a un especialista en capacidad de entrega para compilar una lista de verificaci√≥n para probar una plantilla de correo electr√≥nico. <br><br><a name="11"></a><h4>  Requisitos b√°sicos para verificar la infraestructura </h4><br>  La direcci√≥n IP seleccionada para el servidor de correo debe estar lo m√°s cerca posible de la direcci√≥n IP del servidor de correo.  Se recomienda verificarlo utilizando la utilidad whois.  En particular, la direcci√≥n del remitente no debe pertenecer a la red, que puede percibirse como din√°mica;  la red seleccionada debe tener contactos activos a los cuales se pueden enviar quejas;  se debe usar la red (tener el estado ASIGNADO en RIPE) La direcci√≥n IP debe tener un registro PTR configurado correctamente.  Se puede configurar de forma independiente a trav√©s del panel de control de hosting o con la ayuda del proveedor de servicios.  Un registro PTR debe apuntar al nombre de host real y a√∫n ser significativo, resuelto de nuevo a la misma direcci√≥n IP (llamada verificaci√≥n FCrDNS), no recordar el nombre del host din√°mico y no incluir un gran grupo de n√∫meros o caracteres.  Un buen ejemplo es mailserver.example.com. <br><br>  Cada dominio utilizado en direcciones de sobres o encabezados de correo electr√≥nico debe tener un registro MX v√°lido que apunte a un registro de host A, que, como m√≠nimo, pueda manejar mensajes no entregados.  MX no puede hacer referencia directa a una direcci√≥n IP. <br><br>  Controla el paso de SPF, DKIM, DMARC.  SPF permite al propietario del dominio especificar en los registros TXT una lista de servidores que est√°n autorizados a enviar correos electr√≥nicos con direcciones de retorno en este dominio.  Est√° configurado para la direcci√≥n utilizada en el sobre desde (sobre SMTP) en la secci√≥n de gesti√≥n de zonas DNS del dominio.  DKIM proporciona la verificaci√≥n de la autor√≠a de un mensaje o de su creador a un dominio espec√≠fico utilizando tecnolog√≠as de firma digital, que se agrega al correo electr√≥nico en s√≠ (en su encabezado DKIM-Signature).  Normalmente, una firma DKIM se configura en el nivel MTA (infraestructura).  DMARC establece la pol√≠tica de verificar el correo entrante en un dominio espec√≠fico y acciones en correos electr√≥nicos que no pasan la autenticaci√≥n SPF o DKIM.  Al intentar infringir esta pol√≠tica, aparece un informe estructurado junto con informaci√≥n sobre dicho intento.  DMARC, as√≠ como SPF, se publica como un registro TXT en la zona de dominio. <br><br>  Compruebe la capacidad de entrega de los correos electr√≥nicos a los principales servicios postales: para Rusia Mail.Ru, Yandex, Gmail, Microsoft (Hotmail / Outlook.com / Office365), Rambler, nic.ru.  En los correos electr√≥nicos recibidos, debe verificar la correcci√≥n de HELO;  la presencia y aprobaci√≥n de cheques PTR / FCrDNS, SPF, DKIM y DMARC;  la validez de los encabezados y datos en ellos, en particular, el sincronismo del reloj en las fechas y la correcci√≥n de las zonas horarias. <br><br><img src="https://habrastorage.org/webt/dg/kr/ml/dgkrmlpmq_rsds5zu40kwxuqz1o.png"><br>  (El correo de registro ha roto la autenticaci√≥n debido a la direcci√≥n de correo electr√≥nico utilizada) <br><br>  La formaci√≥n de algunos par√°metros, por ejemplo, la autorizaci√≥n, la capacidad de entrega y el correo no deseado, est√°n influenciados integralmente por todos los componentes, pero para su control, generalmente existen herramientas operativas separadas: informes DMARC y FBL, API de servicios de postmaster, herramientas de seguimiento de correo electr√≥nico, estad√≠sticas de entrega.  Las pruebas deben tener en cuenta el nivel de implementaci√≥n de las herramientas de monitoreo operativo en la empresa; por ejemplo, en ausencia de control operativo de los informes DMARC, la autorizaci√≥n de los correos electr√≥nicos se debe probar regularmente, mientras que en ausencia de control operativo de la capacidad de entrega, donde y c√≥mo van los correos electr√≥nicos, incluso si no hay desarrollo relacionado con el env√≠o de correos electr√≥nicos. <br><br>  Para probar la infraestructura, puede utilizar servicios especializados, por ejemplo, mail-tester.com, mxtoolbox.com.  Los requisitos detallados de infraestructura se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pueden encontrar en este art√≠culo</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dab/868/c01/dab868c01fb1de36df5259aba785e92f.png"><br>  (un ejemplo del registro SPF roto) <br><br><a name="12"></a><h2>  Requisitos de autenticaci√≥n </h2><br>  Por lo general, es posible verificar el paso de SPF, DKIM, DMARC utilizando el encabezado Authentication-Results en el servidor del destinatario. <br><br>  Verifique la validez del registro SPF para la sintaxis, el l√≠mite para consultas DNS (por ejemplo, usando mxtoolbox.com).  Al formar un SPF, se deben tener en cuenta todas las fuentes de correo (no olvide los sistemas CRM, todas las infraestructuras de entrega utilizadas actualmente, incluidas aquellas a trav√©s de las cuales se realizan campa√±as de marketing √∫nicas).  Se recomienda configurar los servidores permitidos para el dominio a trav√©s de la lista de redes ('ip4' / 'ip6').  SPF se verifica para la direcci√≥n del remitente desde el sobre SMTP.  Verifique que el dominio del sobre SMTP (sobre-de) coincida con el dominio del encabezado De.  Los errores comunes de SPF se enumeran en este art√≠culo (https://medium.com/hackernoon/myths-and-legends-of-spf-d17919a9e817). <br><br>  Verifique el registro DNS de DKIM, la validez y la composici√≥n de la firma DKIM.  Verifique que est√° utilizando una clave DKIM de al menos 1024 bits.  Modo hash recomendado de la firma DKIM: relajado / relajado.  Aseg√∫rese de que todos los encabezados importantes est√©n firmados (De, Para, Asunto, Fecha, ID de mensaje, Versi√≥n MIME, Tipo de contenido), que los encabezados de seguimiento (Recibido, Entregado a, Ruta de retorno) no est√©n firmados y DKIM est√° validado para servicios de correo b√°sicos.  Configure el reenv√≠o a uno de los servicios de correo a otro;  DKIM no debe "vencer" en los correos electr√≥nicos reenviados.  Verifique que el dominio de firma DKIM coincida con el dominio del remitente del encabezado 'De'. <br><br>  Verifique DMARC para servicios b√°sicos de correo electr√≥nico.  Verifique los informes DMARC, identifique y solucione problemas de SPF y DKIM para todas las direcciones IP de su infraestructura. <br><br>  Verifique que los mensajes se entreguen a servidores externos mediante cifrado (TLS).  A veces puede verificar TLS mediante el encabezado Recibido en el servidor del destinatario: por ejemplo, especificando el protocolo ESMTPS o teniendo par√°metros de la forma (versi√≥n = cifrado TLS1_2 = ECDHE-RSA-AES128-GCM-SHA256 bits = 128/128);  indica la presencia de TLS. <br><br><a name="13"></a><h2>  Verificaci√≥n de la aplicaci√≥n generadora </h2><br><a name="14"></a><h3>  Requisitos de direcci√≥n de correo electr√≥nico </h3><br><a name="15"></a><h4>  Direcciones de sobres </h4><br>  Comenzamos la verificaci√≥n de la aplicaci√≥n generadora con las direcciones en el sobre SMTP. <br>  Las direcciones de sobre son direcciones del nivel de infraestructura de correo electr√≥nico.  No son visibles para el usuario, pero son importantes para la entrega porque la direcci√≥n del sobre determina en qu√© buz√≥n ingresa el correo electr√≥nico. <br><br>  <i>La direcci√≥n del destinatario en el sobre</i> ( <code>envelope-to</code> , tambi√©n conocido como <code>RCPT TO:</code> es la direcci√≥n a la que realmente se entregar√° el correo electr√≥nico. <br><br><ul><li>  Para todos los correos electr√≥nicos, excepto para el registro, la direcci√≥n debe estar legalmente firmada y validada para su env√≠o de acuerdo con los requisitos administrativos. <br></li><li>  para los boletines, la direcci√≥n debe ser "en vivo", las direcciones a las que el correo electr√≥nico no se puede entregar regularmente deben marcarse como inactivas, no se deben enviar correos a ellos.  Pero algunas categor√≠as de correos electr√≥nicos (por ejemplo, recuperaci√≥n de acceso) tambi√©n pueden necesitar enviarse a direcciones previamente marcadas como inactivas. <br></li></ul><br>  <i>Direcci√≥n del remitente en un sobre SMTP</i> (generalmente llamado <code>envelope-from</code> , <code>smtp.mailfrom</code> , <code>MAIL FROM:</code> o <code>Return-Path</code> ): se enviar√°n mensajes a esta direcci√≥n sobre la imposibilidad de entregar un correo electr√≥nico y respuestas autom√°ticas.  Esta direcci√≥n no es visible para el usuario.  Esta direcci√≥n tambi√©n se utiliza para la autorizaci√≥n SPF.  Verificamos que: <br><br><ul><li>  La direcci√≥n est√° disponible; <br></li><li>  No es la direcci√≥n del empleado y no se redirige a √©l para excluir respuestas autom√°ticas, mensajes sobre inaccesibilidad, etc. <br></li><li>  Es procesado por un script que marcar√° las direcciones de usuarios inaccesibles como inactivas; <br></li><li>  La direcci√≥n se puede generar autom√°ticamente, es decir, exclusiva de cada correo electr√≥nico; <br></li><li>  Un correo electr√≥nico a esta direcci√≥n no debe generar la generaci√≥n de ning√∫n correo electr√≥nico de respuesta, por ejemplo, un mensaje sobre el desbordamiento de un buz√≥n. <br></li></ul><br><a name="16"></a><h4>  Direcciones de encabezado de correo electr√≥nico </h4><br>  Estas direcciones son directamente visibles para el usuario o se utilizan al responder a un correo electr√≥nico. <br>  Direcci√≥n del remitente (el encabezado <code>From:</code> es la direcci√≥n y el nombre del remitente que se muestran en la lista de correos electr√≥nicos y al leer un correo electr√≥nico.  Verificamos que: <br><br><ul><li>  Esta es una direcci√≥n amigable y legible que identifica a la empresa. <br></li><li>  Contiene no solo una direcci√≥n de correo electr√≥nico, sino tambi√©n el nombre del remitente. <br></li><li>  Noreply @ es posible, pero solo si queremos enfatizar que no esperamos recibir una respuesta al correo electr√≥nico y que no se leer√°.  Es mejor duplicar esta idea en el texto del correo electr√≥nico. <br></li><li>  En presencia de caracteres no ASCII (por ejemplo, cir√≠lico), el nombre del remitente debe codificarse de acuerdo con MIME, el dominio en presencia de caracteres no ASCII debe codificarse en Punycode <br></li><li>  Los correos electr√≥nicos de la misma categor√≠a deben tener la misma direcci√≥n;  Se debe evitar el uso de direcciones autogeneradas.  Esto se debe al hecho de que "De:" se usa con mayor frecuencia por las personas para ordenar los correos electr√≥nicos por carpetas mediante filtros. <br></li><li>  La direcci√≥n debe ser diferente (preferiblemente en diferentes subdominios) para correos electr√≥nicos transaccionales, de marketing y urgentes (como correos electr√≥nicos del servicio de soporte).  Esto tambi√©n se debe al hecho de que el usuario puede marcar los correos electr√≥nicos de marketing como spam o filtrarlos en una carpeta ilegible. <br></li><li>  La direcci√≥n <code>From:</code> y la direcci√≥n del sobre SMTP deben estar en el mismo dominio o en subdominios del mismo dominio organizacional para pasar el SPF dentro del DMARC. <br></li><li>  La direcci√≥n debe ser del dominio de la organizaci√≥n.  Es inaceptable utilizar servicios de correo gratuitos y otros dominios de correo p√∫blico en <code>From:</code> ya que dichos correos no pasar√°n la autenticaci√≥n SPF y DKIM en el marco de DMARC. <br></li></ul><br>  La direcci√≥n <code>Reply-to</code> - las respuestas 'manuales' se enviar√°n a esta direcci√≥n cuando un usuario responda un correo electr√≥nico.  Es opcional.  Si est√° ausente, la direcci√≥n de 'De:' se usa para la respuesta.  Compruebe que 'Responder a': <br><br><ul><li>  Se puede generar autom√°ticamente, es decir, exclusivo del correo electr√≥nico (le permite averiguar a qu√© correo electr√≥nico lleg√≥ la respuesta). <br></li><li>  No debe caer en el buz√≥n del empleado para evitar la respuesta autom√°tica, sino que idealmente debe estar "envuelto" en CRM. <br></li><li>  Puede generar una respuesta autom√°tica CRM est√°ndar, pero no debe generar nada superfluo, por ejemplo, desbordamiento de buz√≥n o mensajes "en vocaci√≥n".  Cuando se generan respuestas autom√°ticas, se deben tomar medidas para evitar bucles, se enumeran en RFC 3834. <br></li><li>  Puede ser de cualquier dominio que no necesariamente coincida con 'De:', pero a veces esto asusta a los usuarios cuando responden. <br></li><li>  Puede estar ausente, entonces la direcci√≥n <code>From:</code> realiza sus funciones. <br></li><li>  Adem√°s de la direcci√≥n, se indica el nombre del remitente. <br></li></ul><br>  La direcci√≥n <code>To:</code> <br><br><ul><li>  Debe contener el correo electr√≥nico del destinatario (de lo contrario, asusta al destinatario del mensaje y molesta al antispam). <br></li><li>  Idealmente, debe contener el nombre del destinatario.  Pero si el nombre es desconocido o dudoso (por ejemplo, la direcci√≥n a√∫n no se ha confirmado), es mejor no indicarlo (alguien puede ingresar la direcci√≥n de otra persona con un nombre incorrecto y el destinatario puede ofenderse). <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/aab/7da/212/aab7da2120c8351588fcd4ea0e126a6c.png"><br><br><a name="17"></a><h3>  Requisitos de encabezado de correo electr√≥nico </h3><br>  La codificaci√≥n real del texto debe coincidir con la indicada en el encabezado.  Es recomendable utilizar una codificaci√≥n en todos los encabezados y partes del correo electr√≥nico.  Se recomienda que use UTF-8 como uno ampliamente compatible.  La codificaci√≥n se indica en los encabezados de tipo de contenido y en la etiqueta de la parte HTML. <br><br>  Los encabezados From:, Message-ID: y Date: deben formarse directamente en el script para enviar el correo electr√≥nico (y seg√∫n los est√°ndares, junto con el texto del correo electr√≥nico) y siempre en el formato correcto.  Si est√°n ausentes o se formaron incorrectamente, uno de los servidores de tr√°nsito puede agregar estos encabezados, lo que lleva a una violaci√≥n de la integridad de la firma DKIM. <br><br>  Los caracteres de 8 bits en los encabezados, incluida la l√≠nea de asunto (Asunto) y los nombres de los archivos adjuntos (Tipo de contenido y Disposici√≥n de contenido), deben estar ausentes;  Todos los caracteres no ASCII, incluidos los cir√≠licos, deben codificarse en comillas imprimibles o en base64. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e25/bc4/a54/e25bc4a54a84fffce6f28d01cf3542f9.png"><br>  (confirmaci√≥n de registro en codificaci√≥n extra√±a) <br><br><a name="18"></a><h3>  Requisitos para la estructura del correo electr√≥nico. </h3><br>  Para la parte HTML del correo electr√≥nico, es deseable formar una parte alternativa: texto (sin formato).  Tambi√©n es necesario verificar la conformidad y la legibilidad de la parte de texto sin formato del correo electr√≥nico (si corresponde) y la estructura general del correo electr√≥nico. <br><br>  Seg√∫n RFC 5322, la longitud de una l√≠nea en un correo electr√≥nico no debe exceder los 998 caracteres de 8 bits.  Tenga en cuenta que en UTF-8, un personaje puede ocupar varios octetos.  El terminador de l√≠neas en un correo electr√≥nico es un par de CRLF (ascii 13, ascii 10), que toma 2 octetos.  Debe verificar la exactitud del terminador de cadena, ya que los correos electr√≥nicos a menudo se env√≠an utilizando un script Unix, y en Unix, el terminador de cadena es un solo car√°cter; este es un error para el correo electr√≥nico.  Tambi√©n debe verificar si los terminadores de cadena rompen caracteres codificados UTF-8: no puede permitir la presencia de un terminador de cadena entre dos octetos del mismo car√°cter, por ejemplo, s√≠mbolo cir√≠lico.  Para evitar tales situaciones, es necesario romper el texto antes de formar el correo electr√≥nico o codificar el texto en base64, base64 generalmente tiene una longitud de l√≠nea fija. <br><br>  Es necesario verificar el marcado correcto de los archivos adjuntos e inlines, es decir, la correcci√≥n de la formaci√≥n de los encabezados "Content-Disposition: inline", si se trata de una imagen que se muestra dentro del correo electr√≥nico, o "Content-Disposition: adjunto" si el archivo adjunto est√° destinado a la descarga. <br><br>  La estructura del correo electr√≥nico debe ser lo m√°s simple posible: en particular, no debe haber m√°s de una parte multiparte de cada tipo (mixta, alternativa, relacionada), y multiparte / mixta se usa solo si el correo electr√≥nico contiene archivos adjuntos, multiparte / relacionado - si HTML viene con im√°genes en l√≠nea, multiparte / alternativa - en presencia de texto sin formato y partes HTML.  En general, la estructura del correo electr√≥nico, en ausencia de archivos adjuntos e im√°genes en l√≠nea, deber√≠a verse as√≠: <br><br>  multiparte / alternativa <br>  - texto / sin formato <br>  - texto / html <br><br>  El orden de las partes es importante, text / plain debe ir ANTES de text / html o multipart / related.  Esto es necesario para que la parte HTML se muestre de manera predeterminada, y solo si su visualizaci√≥n no est√° disponible por alguna raz√≥n, se muestra la parte simple. <br><br>  Si hay im√°genes en l√≠nea en el correo electr√≥nico, su estructura deber√≠a verse as√≠: <br><br>  multiparte / alternativa <br>  - texto / sin formato <br>  - multiparte / relacionado <br>  ‚Äî‚Äî texto / html <br>  ‚Äî‚Äî imagen / ... (imagen en l√≠nea) <br>  ‚Äî‚Äî imagen / ... (imagen en l√≠nea) <br><br>  Las im√°genes en l√≠nea deben tener Content-Disposition: en l√≠nea y estar estrictamente dentro de la parte multiparte / relacionada. <br>  En el caso m√°s dif√≠cil, cuando hay im√°genes en l√≠nea y archivos adjuntos, el correo electr√≥nico tiene la siguiente estructura: <br><br>  multiparte / mixto <br>  - multiparte / alternativa <br>  ‚Äî‚Äî texto / sin formato <br>  ‚Äî‚Äî multiparte / relacionado <br>  ‚Äî‚Äî‚Äî texto / html <br>  ‚Äî‚Äî‚Äî image / png <br>  ‚Äî‚Äî‚Äî image / png <br>  ... <br>  - application / octet-string (disposici√≥n de contenido: archivo adjunto) <br>  - application / octet-string (disposici√≥n de contenido: archivo adjunto) <br>  ... <br>  las partes relacionadas con varias partes y las partes alternativas deben estar cerradas antes de los archivos adjuntos, los archivos adjuntos pertenecen a la parte externa de partes m√∫ltiples y mixtas) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/944/23a/506/94423a506f8f81b02314ff4dc8d76385.png"><br>  (mensaje de registro con estructura de piezas incorrecta) <br><br><a name="19"></a><h2>  Requisitos de URI </h2><br><br>  Cualquier URI (en src, atributos href, estilos, etc.) debe contener el protocolo y el nombre de host (https://example.com/somepath).  Los errores t√≠picos son el uso de enlaces relativos (/ somepath) y la falta de un protocolo (//example.com/somepath), que es inaceptable para los correos electr√≥nicos, porque en ellos, el protocolo predeterminado puede ser <code>file://</code> . <br><br><ul><li>  Cualquier servicio y caracteres no ASCII (en particular, cir√≠lico) en el URI deben codificarse utilizando codificaci√≥n porcentual. <br></li><li>  Un enlace insertado como texto (es decir, visible para el usuario como una URL, y no como un texto) a√∫n debe estar marcado con la etiqueta <code>&lt;&gt;</code> , de lo contrario, el usuario no podr√° hacer clic en √©l.  Algunos correos web marcan dichos enlaces por s√≠ mismos, pero este no es un comportamiento est√°ndar.  En este caso, la direcci√≥n href dentro de A debe coincidir con el texto del enlace, de lo contrario, el filtro de contenido puede reaccionar a dicho enlace como un intento de enga√±ar al usuario.  Vale la pena prestar especial atenci√≥n a esto cuando hay "clickers" que rastrean las transiciones del usuario desde el correo electr√≥nico. <br></li><li>  Es mejor limitarse al uso de los protocolos <code>http://</code> , <code>https://</code> y <code>mailto:</code> <br></li><li>  Con requisitos de alta seguridad, debe abandonar por completo el uso de <code>http://</code> en favor de <code>https://</code> . <br></li><li>  No se deben utilizar puertos no est√°ndar (por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">example.com</a> : 8080 / somepath), ya que es posible que el usuario no pueda acceder a ellos. <br></li><li>  Al hacer clic en el enlace dentro de la parte HTML no se deben realizar cambios en el estado de la aplicaci√≥n (suscripci√≥n, cancelaci√≥n de la suscripci√≥n, cancelaci√≥n del pedido, etc.) sin la confirmaci√≥n adicional del usuario en la p√°gina, ya que algunos sistemas de filtrado de contenido pueden verificar la seguridad de tal transici√≥n solicitando una p√°gina por referencia;  la aplicaci√≥n de correo puede mostrar la vista previa de la p√°gina mediante el enlace al pasar el mouse, y los navegadores modernos pueden cargar la p√°gina antes de que el usuario haga clic en el enlace para reducir el tiempo de carga (en la aplicaci√≥n web generalmente no se recomienda realizar ninguna acci√≥n de modificaci√≥n en el Solicitud GET, todas las solicitudes de modificaci√≥n deben pasar por POST o PUT). <br></li><li>  Al hacer clic en el enlace en el encabezado List-Unsubscribe, por el contrario, no deber√≠a requerir ninguna acci√≥n adicional del usuario, ya que la cancelaci√≥n de la suscripci√≥n por este enlace generalmente se realiza por correo electr√≥nico o webmail en nombre del usuario.  Adem√°s, hay un nuevo encabezado List-Unsubscribe-Post introducido por RFC 8058. <br></li><li>  No debe esperar que el usuario lea el correo electr√≥nico y siga el enlace en el mismo navegador en el que inicia la acci√≥n que conduce al env√≠o del correo electr√≥nico (por ejemplo, registra una cuenta).  El enlace deber√≠a funcionar en cualquier otro navegador o dispositivo m√≥vil.  En particular, el usuario puede abrir el enlace sin estar autorizado, o autorizado en una cuenta diferente a la que se envi√≥ el correo electr√≥nico. <br></li><li>  Porque la longitud del URI puede ser limitada;  no debe usar URI del tipo 'datos:' para objetos grandes.  Por la misma raz√≥n, no use URI que sean demasiado largos en hiperv√≠nculos. <br></li><li>  No debe usar acortadores de enlaces externos, esto afecta negativamente la entrega de correos electr√≥nicos.  Es mejor si todos los enlaces apuntan a su dominio, esto reducir√° el impacto negativo potencial de la reputaci√≥n de otra persona en la entrega de correos electr√≥nicos. <br></li><li>  No coloque im√°genes externas en algunos servicios p√∫blicos o alojamiento gratuito, utilice un servicio de alojamiento confiable o CDN con buen rendimiento y reputaci√≥n. <br></li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/05a/afd/4b3/05aafd4b3ef1a07a9654a92fc0419b32.png"><br>  (imagen no v√°lida y URI de anclaje debido a la falta de especificaci√≥n de protocolo) <br><br><a name="20"></a><h2>  Requisitos de dise√±o de correo electr√≥nico </h2><br>  ¬øPor qu√© es tan dif√≠cil inventar correos electr√≥nicos? <br><br>  Los clientes de correo electr√≥nico de una forma u otra muestran el contenido del usuario dentro de su interfaz.  Potencialmente, esto puede conducir a varios problemas de seguridad: scripting entre sitios (XSS, scripts Crossite), suplantaci√≥n de interfaz, clobber DOM, desanonimizaci√≥n del usuario / fuga de informaci√≥n (por ejemplo, la direcci√≥n IP del usuario o cookies a trav√©s de solicitudes externas), etc.  ., por lo tanto, cualquier servicio de correo y aplicaci√≥n de correo tiene alguna forma de protecci√≥n contra cada clase de ataques.  Desafortunadamente, no existe un enfoque √∫nico para organizar esta protecci√≥n.  Se puede organizar a trav√©s de: <br><br><ul><li>  marcos limitados aislados, <br></li><li>  filtrado de etiquetas y / o atributos, <br></li><li>  restricciones en el posicionamiento absoluto, <br></li><li>  prohibici√≥n o restricci√≥n en el uso de estilos de bloque (que es cr√≠tico para el dise√±o adaptativo), <br></li><li>  prohibir elementos externos de forma predeterminada (es decir, descargar im√°genes externas requiere permiso del usuario) o usar un proxy para acceder a ellos, <br></li><li>  convertir correos electr√≥nicos HTML a otro formato intermedio (por ejemplo, Microsoft Exchange / Outlook usa RTF, lo que puede hacer que sea extremadamente dif√≠cil mostrar elementos correctamente en Outlook usando m√©todos convencionales), <br></li><li>  prohibici√≥n o restricci√≥n en el uso de formularios o sus elementos individuales. <br></li></ul><br>  Los correos electr√≥nicos tambi√©n usan elementos espec√≠ficos, como im√°genes en l√≠nea y URI <code>cid://</code> , cuyo soporte puede ser limitado.  Por ejemplo, Mozilla Thunderbird no admite <code>cid://</code> para im√°genes de fondo. <br><br>  Incluso un correo electr√≥nico formado correctamente se puede mostrar de manera diferente en diferentes interfaces debido a las peculiaridades de su implementaci√≥n y filtrado de los contenidos del correo electr√≥nico. <br><br>  Si hay errores en el formato del correo electr√≥nico, el comportamiento se vuelve completamente impredecible.  Por ejemplo, los clientes de correo electr√≥nico pueden tener un comportamiento diferente con URI incorrectos, o ese formato de encabezado incorrecto se maneja de manera diferente.  Adem√°s, la detecci√≥n autom√°tica de codificaci√≥n de texto funciona de manera diferente si no se especifica o se especifica incorrectamente.  Por lo tanto, el correo electr√≥nico debe verse en diferentes interfaces: la visualizaci√≥n correcta del correo electr√≥nico en una interfaz no significa que est√© compuesto correctamente (de hecho, incluso la visualizaci√≥n correcta del correo electr√≥nico en todas las interfaces no garantiza que no habr√° problemas con la pantalla en el futuro). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b5/127/114/9b512711407c1cac545a57fd629d6b1a.png"><br><br>  Es necesario prestar atenci√≥n a los siguientes puntos: <br><br><ul><li>  Verifique el texto del correo electr√≥nico en busca de contenido sem√°ntico, visualizaci√≥n, ausencia de errores tipogr√°ficos, errores sint√°cticos, ortogr√°ficos y l√©xicos. <br></li><li>  Verifique la correcci√≥n de la sustituci√≥n de los datos de la aplicaci√≥n en la plantilla o el dise√±o del correo electr√≥nico. <br></li><li>  Verifique la exactitud de las cantidades, fechas, n√∫meros, art√≠culos de bienes y otra informaci√≥n, teniendo en cuenta las condiciones l√≠mite permitidas.  Las fechas deben tener un a√±o (algunos usuarios ingresan al cuadro muy raramente).  Una zona horaria debe estar presente en el tiempo.  La direcci√≥n debe contener una ciudad y, en algunos casos, es necesario indicar el pa√≠s. <br></li><li>  Verifique el estado operativo de todos los enlaces en el correo electr√≥nico, si corresponde. <br></li><li>  En correos electr√≥nicos enviados antes de la confirmaci√≥n de la direcci√≥n, incl.  correos electr√≥nicos con un enlace de confirmaci√≥n, no debe haber ning√∫n texto controlado desde el exterior, ni siquiera el nombre de usuario, de lo contrario, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">se pueden usar para correo no deseado</a> (en el campo que se muestra en el correo electr√≥nico, por ejemplo, en el nombre, se inserta el texto de correo no deseado y la direcci√≥n es la direcci√≥n indicada de la v√≠ctima).  Por ejemplo, si puede enviar un texto obsceno en la direcci√≥n del desarrollador en nombre de su servicio, entonces hay un problema. <br></li><li>  Verifique la ausencia de im√°genes externas en servicios de terceros.  Puede afectar la entrega y la filtraci√≥n de informaci√≥n sobre sus clientes. <br></li><li>  Verifique la disponibilidad de contadores para env√≠o, entrega, lectura de correo electr√≥nico, transiciones.  Algunos de ellos se encuentran en el propio correo electr√≥nico (por ejemplo, el contrap√≠xel de la lectura del correo electr√≥nico), algunos son rastreados por el correo, pero, por regla general, todos est√°n disponibles en el panel de administraci√≥n del correo. <br></li><li>  Verifique la correcci√≥n de la categor√≠a de suscripci√≥n y la cancelaci√≥n de la suscripci√≥n del usuario para esta categor√≠a a trav√©s del enlace en el correo electr√≥nico. <br></li><li>  Comprueba c√≥mo se ve el correo electr√≥nico a: <br><ul><li>  Versiones web populares de correo para un pa√≠s objetivo: los "tres grandes" para Rusia son Mail.Ru, Yandex, Gmail.  Tambi√©n puede agregar Rambler y Outlook.com; <br></li><li>  Aplicaciones m√≥viles de los proveedores de correo electr√≥nico anteriores; <br></li><li>  Aplicaciones m√≥viles est√°ndar que utilizan IMAP, teniendo en cuenta las plataformas m√≥viles populares, al menos para iPhone, Pixel (plataforma de referencia de Android), Samsung (la m√°s com√∫n para Android), MIUI (ocupa el segundo lugar en Rusia para las plataformas de Android); <br></li><li>  Varios navegadores de escritorio: Chrome, Firefox, Edge, Internet Explorer, Opera, etc. <br></li><li>  Aplicaciones de escritorio (programas de correo electr√≥nico), especialmente Thunderbird, Outlook y Apple Mail, opcionalmente The Bat!  y Opera Mail; <br></li><li>  Soluciones corporativas populares con una interfaz web (Exchange, quiz√°s Roundcube, Communigate, Zimbra, SquirrelMail) - para soluciones B2B; <br></li><li>  No olvide comprobar el dise√±o tanto en los monitores Retina como en los monitores con una resoluci√≥n m√°s baja. <br></li></ul></li><li>  Durante el control en cada caso, debe prestar atenci√≥n a: <br><ul><li>  Pasando los encabezados de autorizaci√≥n, SPF / DKIM / DMARC. <br></li><li>  Velocidad de descarga del correo electr√≥nico: debe cargarse r√°pidamente y no tomarse su tiempo. <br></li><li>  Mostrar un correo electr√≥nico en la lista de correos electr√≥nicos: avatar, nombre del remitente y el asunto que pertenece al fragmento del mensaje, si su categor√≠a se defini√≥ correctamente (por ejemplo, si el pedido no se incluy√≥ en la categor√≠a de "redes sociales"). <br></li><li>  El dise√±o del correo electr√≥nico en su conjunto: si el dise√±o se mantuvo constante, ¬øhubo saltos de palabra incorrectos, etc., incluso al escalar y cambiar el tama√±o de la ventana? <br></li><li>  Las fuentes no deben ser peque√±as o dif√≠ciles de leer. <br></li><li>  Im√°genes de fondo y colores de fondo. <br></li><li>  A juego con el libro de la marca. <br></li><li>  Facilidad de realizar las acciones que implica el correo electr√≥nico.  Por ejemplo, si el correo electr√≥nico contiene un c√≥digo de confirmaci√≥n u otra informaci√≥n que deba almacenarse en alg√∫n lugar, entonces no solo debe leerse bien, tambi√©n debe ser conveniente seleccionarlo y copiarlo incluso en la interfaz m√≥vil. <br></li></ul><br></li><li>  Mantenga un registro del tama√±o general del correo electr√≥nico (incluidas las im√°genes externas) y de que no exceda los valores razonables.  Cuanto m√°s pesado sea el tiempo de carga, m√°s probable es que una persona tenga una reacci√≥n negativa. <br></li><li>  Incluso los correos electr√≥nicos que no se han modificado deben revisarse peri√≥dicamente, ya que los cambios pueden ocurrir en el lado del servicio postal y, por ejemplo, "revelar" un problema previamente invisible. <br></li><li>  Algunos par√°metros deben controlarse en todas las pruebas.  Por ejemplo, los problemas al pasar la autenticaci√≥n DKIM pueden deberse a problemas en la infraestructura (problemas con el DNS o la formaci√≥n de una firma DKIM, errores de sincronizaci√≥n de tiempo), debido a errores en el programa generador (la direcci√≥n del remitente est√° formada incorrectamente, caracteres incorrectos en faltan los encabezados o los encabezados obligatorios From, Date o Message-ID se han duplicado) y debido a errores de contenido (terminadores de l√≠nea incorrectos, las l√≠neas son demasiado largas, direcciones incorrectas).  Al mismo tiempo, el correo electr√≥nico no puede "vencer" y el problema puede no aparecer en ning√∫n servicio. <br></li></ul><br><a name="21"></a><h2>  Realizaci√≥n de pruebas divididas </h2><br>  La investigaci√≥n de mercado est√° m√°s all√° del alcance de este art√≠culo, pero se deben mencionar algunos puntos clave que afectan significativamente la calidad de los correos electr√≥nicos. <br><br> The newsletter has a purpose, so it should entail through its quality, not quantity (which is the opposite for spammers). The newsletter must be segmented. When conducting an advertising campaign, you need to know exactly who gets into the segment sample, why they need the offered product and what they want to convey. <br><br> For each mailing list, it is necessary to calculate the CTR of the list of emails ‚Äî this is the ratio of the number of emails read to the total number that has been sent out. In postmaster.mail.ru, you can see indicators for unique users. If the measurement goes through the counter in the email (pixel), then the absolute number of openings is estimated. CTR &lt;10% is a very low indicator, it is undesirable to carry out such mailing. It should strive for a CTR&gt; 30%. For marketing emails, the clickthrough rate of clickthroughs and the percentage of completed actions (¬´sales¬ª) on these links are also of great importance. Be sure to monitor complaints (marking the email as spam). Typically, for one-time mailings, a tenth of a percent is a good indicator, for regular ones, a hundredth of a percent. The critical values, after which the mailing is always interpreted as spam, are indicated here: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://help.mail.ru/developers/mailing_rules/technical</a> . <br><br> It is necessary to conduct split testing of various distribution options to obtain optimal performance. Just changing the name of the sender and the subject of the email can increase the CTR by several times and significantly reduce the number of complaints. The number of emails should be statistically significant for evaluating the results (for large projects, usually a few thousand). The final version of the email is sent in several stages for additional measurement of indicators and ¬´warming up¬ª ‚Äî starting with about 10,000 recipients, with an increase of about an order of the day. <br><br> The main idea: emails are part of your application, perhaps one of the most complex and problematic. At the same time, this is often a ¬´blind spot¬ª in terms of testing. I hope that I was able to draw your attention to this issue. <br><br> I would like to thank Vladimir Dubrovin ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">z3apa3a</a> ) and Alena Likhacheva ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">s4ever</a> ) for helping me with this article. As well as that, the article utilised sources of Eduard Tyantov ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">edT</a> ) and Alexander Purtov ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">4Alexander</a> ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/464515/">https://habr.com/ru/post/464515/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../464499/index.html">"Mat. Modelo de Wall Street "o un intento de optimizar el costo de la infraestructura de TI en la nube</a></li>
<li><a href="../464503/index.html">Contrase√±a de Wi-Fi que coincida con aircrack-ng</a></li>
<li><a href="../464509/index.html">El libro "Grok Deep Learning"</a></li>
<li><a href="../464511/index.html">C√≥mo recopilar cohortes de usuarios en forma de gr√°ficos en Grafana [+ imagen acoplable con un ejemplo]</a></li>
<li><a href="../464513/index.html">Duffle: transformador de XD Design</a></li>
<li><a href="../464517/index.html">Nuevas tarjetas CUBA</a></li>
<li><a href="../464523/index.html">Sistemas de pago (PSP) para negocios de TI: jugamos a lo grande</a></li>
<li><a href="../464525/index.html">Su propio convertidor JSON o un poco m√°s sobre ExpressionTrees</a></li>
<li><a href="../464529/index.html">Para publicidad contextual por los nombres de los competidores ahora se puede multar con 500,000 rublos</a></li>
<li><a href="../464535/index.html">Detalles sobre el dispositivo y las funciones del scooter el√©ctrico KickScooter T60</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>