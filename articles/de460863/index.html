<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóª üóø üò∂ Details zum Cloudflare-Absturz 2. Juli 2019 üõãÔ∏è üë®üèΩ‚Äç‚öïÔ∏è üò≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor fast 9 Jahren war Cloudflare ein winziges Unternehmen, aber ich habe nicht darin gearbeitet, ich war nur ein Kunde. Einen Monat nach dem Start von...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Details zum Cloudflare-Absturz 2. Juli 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/460863/"><p><img src="https://habrastorage.org/webt/dx/yb/5r/dxyb5rids6_8tahyhactypl4rwm.png"></p><br><p>  Vor fast 9 Jahren war Cloudflare ein winziges Unternehmen, aber ich habe nicht darin gearbeitet, ich war nur ein Kunde.  Einen Monat nach dem Start von Cloudflare erhielt ich eine Benachrichtigung, dass DNS auf meiner jgc.org- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website</a> anscheinend nicht funktioniert.  Cloudflare hat eine √Ñnderung an den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Protokollpuffern vorgenommen</a> , und es gab einen defekten DNS. </p><a name="habracut"></a><br><p>  Ich schrieb sofort an Matthew Prince mit der √úberschrift ‚ÄûWo ist mein DNS?‚Äú Und er schickte eine lange Antwort voller technischer Details ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lesen Sie die gesamte Korrespondenz hier</a> ), auf die ich antwortete: </p><br><blockquote>  Von: John Graham Cumming <br>  Datum: 7. Oktober 2010, 9:14 Uhr <br>  Betreff: Re: Wo ist mein DNS? <br>  An: Matthew Prince <br><br>  Cooler Bericht, danke.  Ich werde auf jeden Fall anrufen, wenn es Probleme gibt.  Es lohnt sich wahrscheinlich, einen Beitrag dar√ºber zu schreiben, wenn Sie alle technischen Informationen gesammelt haben.  Ich denke, die Leute werden eine offene und ehrliche Geschichte m√∂gen.  Vor allem, wenn Sie Grafiken anh√§ngen, um zu zeigen, wie der Datenverkehr nach dem Start gewachsen ist. <br><br>  Ich habe eine gute √úberwachung auf der Website und erhalte eine SMS √ºber jeden Fehler.  Die √úberwachung zeigt, dass der Fehler von 13:03:07 bis 14:04:12 war.  Tests werden alle f√ºnf Minuten durchgef√ºhrt. <br><br>  Ich bin sicher, Sie werden es herausfinden.  Sie brauchen definitiv keine eigene Person in Europa?  :-) </blockquote><p>  Und er antwortete: </p><br><blockquote>  Von: Matthew Prince <br>  Datum: 7. Oktober 2010, 9:57 Uhr <br>  Betreff: Re: Wo ist mein DNS? <br>  An: John Graham Cumming <br><br>  Vielen Dank.  Wir haben allen geantwortet, die geschrieben haben.  Ich gehe jetzt ins B√ºro und wir werden etwas auf dem Blog schreiben oder einen offiziellen Beitrag in unserem Bulletin Board ver√∂ffentlichen.  Ich stimme vollkommen zu, Ehrlichkeit ist unser Alles. </blockquote><p>  Jetzt ist Cloudflare ein wirklich gro√ües Unternehmen, ich arbeite darin und jetzt muss ich offen √ºber unseren Fehler, seine Folgen und unser Handeln schreiben. </p><br><h3 id="sobytiya-2-iyulya">  2. Juli Veranstaltungen </h3><br><p>  Am 2. Juli haben wir eine neue Regel in verwalteten Regeln f√ºr WAF bereitgestellt, aufgrund derer die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Prozessorressourcen</a> auf jedem Prozessorkern, der HTTP / HTTPS-Verkehr im Cloudflare-Netzwerk auf der ganzen Welt verarbeitet, aufgebraucht sind.  Wir verbessern st√§ndig die verwalteten Regeln f√ºr WAF als Reaktion auf neue Schwachstellen und Bedrohungen.  Im Mai haben wir beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine Regel hinzugef√ºgt</a> , um uns vor einer schwerwiegenden Sicherheitsanf√§lligkeit in SharePoint zu sch√ºtzen.  Der springende Punkt unserer WAF ist die F√§higkeit, Regeln schnell und global bereitzustellen. </p><br><p>  Leider enthielt das Update vom letzten Donnerstag einen regul√§ren Ausdruck, der f√ºr das Zur√ºckverfolgen zu vieler Prozessorressourcen aufgewendet wurde, die f√ºr HTTP / HTTPS zugewiesen wurden.  Dies betraf unsere Kernfunktionen f√ºr Proxy, CDN und WAF.  Die Grafik zeigt, dass die Prozessorressourcen f√ºr die Bereitstellung von HTTP / HTTPS-Verkehr auf Servern in unserem Netzwerk fast 100% erreichen. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/au/xp/dz/auxpdz0pbethhc_hka-nvzmmsmo.png"></a> <br>  <em>Verwenden von Prozessorressourcen an einem der Anwesenheitspunkte w√§hrend eines Vorfalls</em> </p><br><p>  Infolgedessen stie√üen unsere Kunden (und die Kunden unserer Kunden) auf eine Seite mit einem 502-Fehler in den Cloudflare-Dom√§nen.  502 Fehler wurden von Cloudflare-Front-End-Webservern generiert, die noch freie Kernel hatten, aber nicht mit Prozessen kommunizieren konnten, die HTTP / HTTPS-Verkehr verarbeiten. </p><br><p><img src="https://habrastorage.org/webt/mn/36/v_/mn36v_x1bbtqofu8l9lzpjty-pm.png"></p><br><p>  Wir wissen, wie viele Unannehmlichkeiten dies unseren Kunden verursacht hat.  Wir sch√§men uns schrecklich.  Und dieses Versagen hat uns daran gehindert, den Vorfall effektiv zu behandeln. </p><br><p> Wenn Sie einer dieser Kunden waren, hat es Sie wahrscheinlich erschreckt, ver√§rgert und ver√§rgert.  Dar√ºber hinaus haben wir seit 6 Jahren keine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">globalen Ausf√§lle mehr</a> .  Der hohe CPU-Verbrauch war auf eine WAF-Regel mit einem schlecht formulierten regul√§ren Ausdruck zur√ºckzuf√ºhren, die zu √ºberm√§√üigem Backtracking f√ºhrte.  Hier ist der schuldige Ausdruck: <code>(?:(?:\"|'|\]|\}|\\|\d|(?:nan|infinity|true|false|null|undefined|symbol|math)|\`|\-|\+)+[)]*;?((?:\s|-|~|!|{}|\|\||\+)*.*(?:.*=.*)))</code> </p><br><p>  Obwohl es an sich interessant ist (und ich werde Ihnen weiter unten mehr dar√ºber erz√§hlen), wurde der Cloudflare-Dienst f√ºr 27 Minuten unterbrochen, nicht nur wegen unpassender regul√§rer Ausdr√ºcke.  Wir haben eine Weile gebraucht, um die Abfolge der Ereignisse zu beschreiben, die zum Ausfall gef√ºhrt haben, sodass wir nicht schnell reagiert haben.  Am Ende des Beitrags werde ich das Backtracking in regul√§ren Ausdr√ºcken beschreiben und Ihnen sagen, was Sie dagegen tun sollen. </p><br><h3 id="chto-sluchilos">  Was ist passiert </h3><br><p>  Beginnen wir in der richtigen Reihenfolge.  Alle Zeiten werden hier in UTC angezeigt. </p><br><p>  Um 13:42 Uhr nahm ein Techniker des Firewall-Teams eine kleine √Ñnderung an den Regeln f√ºr die Erkennung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">XSS</a> mithilfe eines automatischen Prozesses vor.  Dementsprechend wurde ein Ticket f√ºr eine √Ñnderungsanforderung erstellt.  Wir verwalten diese Tickets √ºber Jira (Screenshot unten). </p><br><p>  Nach 3 Minuten wurde die erste PagerDuty-Seite angezeigt, auf der ein Problem mit WAF gemeldet wurde.  Es war ein synthetischer Test, der die Funktionalit√§t von WAF (wir haben Hunderte davon) au√üerhalb von Cloudflare √ºberpr√ºft, um den normalen Betrieb zu √ºberwachen.  Dann gab es sofort Seiten mit Benachrichtigungen √ºber Fehler anderer End-to-End-Tests von Cloudflare-Diensten, globale Verkehrsprobleme, weit verbreitete 502-Fehler und eine Reihe von Berichten von unseren Points of Presence (PoP) in St√§dten auf der ganzen Welt, die auf einen Mangel an Prozessorressourcen hinwiesen. </p><br><p><img src="https://habrastorage.org/webt/fh/iw/ja/fhiwjas8c3-qfcwo-11nks3lld4.png"></p><br><p><img src="https://habrastorage.org/webt/fs/g7/xo/fsg7xokybw-svzn8tn-uyhuj7dm.jpeg"></p><br><p>  Ich erhielt mehrere solcher Benachrichtigungen, fiel von der Besprechung ab und ging bereits zum Tisch, als der Leiter unserer Abteilung f√ºr L√∂sungsentwicklung sagte, dass wir 80% des Datenverkehrs verloren haben.  Ich lief zu unseren SRE-Ingenieuren, die bereits an dem Problem arbeiteten.  Zuerst dachten wir, es sei eine Art unbekannter Angriff. </p><br><p><img src="https://habrastorage.org/webt/-r/ox/mw/-roxmwj33bvn_n-xyww8xhfwpmw.jpeg"></p><br><p>  Cloudflare SRE-Ingenieure sind auf der ganzen Welt verstreut und √ºberwachen die Situation rund um die Uhr.  In der Regel werden Sie durch solche Warnungen √ºber bestimmte lokale Probleme mit begrenztem Umfang informiert, in internen Dashboards √ºberwacht und mehrmals t√§glich behoben.  Solche Seiten und Benachrichtigungen wiesen jedoch auf etwas wirklich Ernstes hin, und die SRE-Ingenieure k√ºndigten sofort den Schweregrad P0 an und wandten sich an die Management- und Systemingenieure. </p><br><p>  Unsere Londoner Ingenieure h√∂rten gerade einen Vortrag in der Haupthalle.  Der Vortrag musste unterbrochen werden, alle versammelten sich in einem gro√üen Konferenzraum und weitere Experten wurden eingeladen.  Dies war kein h√§ufiges Problem, das SRE selbst herausfinden konnte.  Es war dringend notwendig, die richtigen Spezialisten zusammenzubringen. </p><br><p>  Um 14:00 Uhr stellten wir fest, dass es ein Problem mit WAF gab und es keinen Angriff gab.  Die Leistungsabteilung rief Prozessordaten ab, und es wurde offensichtlich, dass WAF schuld war.  Ein anderer Mitarbeiter best√§tigte diese Theorie mit aller Kraft.  Jemand anderes sah in den Protokollen, dass das Problem mit WAF.  Um 14:02 Uhr kam das gesamte Team zu mir, als vorgeschlagen wurde, Global Kill zu verwenden - einen in Cloudflare integrierten Mechanismus, der eine Komponente auf der ganzen Welt deaktiviert. </p><br><p>  Wie wir f√ºr WAF weltweit get√∂tet haben, ist eine andere Geschichte.  So einfach ist das nicht.  Wir verwenden unsere eigenen Produkte, und da unser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Access-</a> Service nicht funktioniert hat, konnten wir uns nicht authentifizieren und das interne Kontrollfeld nicht betreten (als alles repariert wurde, haben wir erfahren, dass einige Mitglieder des Teams den Zugriff aufgrund einer Sicherheitsfunktion verloren haben, die Anmeldeinformationen deaktiviert, wenn Verwenden Sie das interne Bedienfeld nicht f√ºr l√§ngere Zeit. </p><br><p>  Und wir konnten nicht zu unseren internen Diensten wie Jira oder dem Build-System gelangen.  Wir brauchten eine Problemumgehung, die wir selten verwendeten (dies m√ºsste auch ausgearbeitet werden).  Schlie√ülich konnte ein Ingenieur um 14:07 Uhr die WAF abhacken, und um 14:09 Uhr normalisierten sich das Verkehrsaufkommen und der Prozessor √ºberall wieder.  Der Rest der Abwehrmechanismen von Cloudflare funktionierte wie erwartet. </p><br><p>  Dann machten wir uns daran, WAF wiederherzustellen.  Die Situation war ungew√∂hnlich, daher f√ºhrten wir negative Tests (bei denen wir uns fragten, ob das Problem wirklich diese √Ñnderung war) und positive Tests (um sicherzustellen, dass der Rollback funktionierte) in einer Stadt mit separatem Verkehr durch und transferierten bezahlte Kunden von dort. </p><br><p>  Um 14.52 Uhr waren wir √ºberzeugt, dass wir den Grund verstanden und eine Korrektur vorgenommen hatten, und schalteten die WAF wieder ein. </p><br><h3 id="kak-rabotaet-cloudflare">  Wie Cloudflare funktioniert </h3><br><p>  Cloudflare verf√ºgt √ºber ein Team von Ingenieuren, die verwaltete Regeln f√ºr WAF verwalten.  Sie versuchen, die Erkennungsrate zu erh√∂hen, die Anzahl der Fehlalarme zu verringern und schnell auf neue Bedrohungen zu reagieren, sobald sie auftreten.  In den letzten 60 Tagen wurden 476 √Ñnderungsanforderungen f√ºr von WAF verwaltete Regeln verarbeitet (durchschnittlich eine alle 3 Stunden). </p><br><p>  Diese spezielle √Ñnderung musste im Simulationsmodus bereitgestellt werden, in dem der reale Clientverkehr die Regel durchl√§uft, aber nichts blockiert wird.  Wir verwenden diesen Modus, um die Wirksamkeit der Regeln zu √ºberpr√ºfen und den Anteil falsch positiver und falsch negativer Ergebnisse zu messen.  Aber auch im Simulationsmodus m√ºssen die Regeln tats√§chlich ausgef√ºhrt werden. In diesem Fall enthielt die Regel einen regul√§ren Ausdruck, der zu viele Prozessorressourcen verbrauchte. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/1p/sc/90/1psc90ccs9enwxvdyvu4thq30eo.png"></a> </p><br><p>  Wie Sie der obigen √Ñnderungsanforderung entnehmen k√∂nnen, verf√ºgen wir √ºber einen Bereitstellungsplan, einen Rollback-Plan und einen Link zur internen Standardarbeitsanweisung (SOP) f√ºr diese Art der Bereitstellung.  Mit SOP zum √Ñndern der Regel k√∂nnen Sie sie global ver√∂ffentlichen.  Tats√§chlich ist in Cloudflare alles v√∂llig anders angeordnet, und SOP erfordert, dass die Software zum Testen und f√ºr den internen Gebrauch zuerst an einen internen Point of Presence (PoP) (den unsere Mitarbeiter verwenden), dann an eine kleine Anzahl von Clients an einem isolierten Ort, dann an eine gro√üe Anzahl von Clients und nur dann gesendet wird f√ºr die ganze Welt. </p><br><p>  So sieht es aus.  Wir verwenden Git im internen System √ºber BitBucket.  Die √Ñnderungsingenieure senden den von ihnen erstellten Code an TeamCity, und wenn der Build erfolgreich ist, werden Pr√ºfer zugewiesen.  Wenn die Poolanforderung genehmigt wird, wird der Code gesammelt und eine Reihe von Tests (erneut) durchgef√ºhrt. </p><br><p>  Wenn die Montage und die Tests erfolgreich sind, wird in Jira eine √Ñnderungsanforderung erstellt, und die √Ñnderung muss vom entsprechenden Vorgesetzten oder leitenden Spezialisten genehmigt werden.  Nach der Genehmigung wird es in der sogenannten ‚ÄûPoP-Menagerie‚Äú eingesetzt: HUND, SCHWEIN und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kanarienvogel</a> (Hund, Mumps und Kanarienvogel). </p><br><p>  DOG PoP ist Cloudflare PoP (wie jede andere unserer St√§dte), das nur von Cloudflare-Mitarbeitern verwendet wird.  Mit PoP f√ºr den internen Gebrauch k√∂nnen Sie Probleme erkennen, noch bevor die L√∂sung Kundenverkehr empf√§ngt.  N√ºtzliche Sache. </p><br><p>  Wenn der DOG-Test erfolgreich ist, geht der Code zum PIG-Stadium (Meerschweinchen) √ºber.  Dies ist Cloudflare PoP, bei dem ein kleiner Teil des freien Clientverkehrs durch den neuen Code flie√üt. <br>  Wenn alles in Ordnung ist, geht der Code an Canary.  Wir haben drei kanarische PoPs in verschiedenen Teilen der Welt.  Der Datenverkehr von bezahlten und kostenlosen Kunden durchl√§uft den neuen Code in ihnen, und dies ist die letzte Fehlerpr√ºfung. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ew/d_/0h/ewd_0hfzquucy07y15qbgbckaao.png"></a> <br>  <em>Release-Prozess f√ºr Cloudflare-Software</em> </p><br><p>  Wenn der Code in Canary in Ordnung ist, geben wir ihn frei.  Das Durchlaufen aller Phasen - DOG, PIG, Canary, die ganze Welt - dauert je nach Code√§nderung mehrere Stunden oder Tage.  Aufgrund der Vielfalt des Cloudflare-Netzwerks und der Kunden testen wir den Code vor einer globalen Ver√∂ffentlichung f√ºr alle Kunden gr√ºndlich.  WAF folgt diesem Prozess jedoch nicht speziell, da auf Bedrohungen schnell reagiert werden muss. </p><br><p>  Bedrohungen WAF <br>  In den letzten Jahren gab es bei herk√∂mmlichen Anwendungen erheblich mehr Bedrohungen.  Dies ist auf die h√∂here Verf√ºgbarkeit von Softwaretest-Tools zur√ºckzuf√ºhren.  Zum Beispiel haben wir k√ºrzlich √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fuzzing geschrieben</a> . </p><br><p><img src="https://habrastorage.org/webt/br/lu/mp/brlumpkugkwhpdfq3zb0fb5vixm.png"><br>  <em>Quelle: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://cvedetails.com/</a></em> </p><br><p>  Sehr oft wird eine Best√§tigung des Konzepts erstellt und sofort auf Github ver√∂ffentlicht, damit die Teams, die die Anwendung warten, sie schnell testen und sicherstellen k√∂nnen, dass sie angemessen gesch√ºtzt ist.  Daher muss Cloudflare in der Lage sein, so schnell wie m√∂glich auf neue Angriffe zu reagieren, damit Kunden die M√∂glichkeit haben, ihre Software zu reparieren. </p><br><p>  Ein gutes Beispiel f√ºr die schnelle Reaktion von Cloudflare ist die Bereitstellung des SharePoint-Schwachstellenschutzes im Mai ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">siehe hier</a> ).  Fast unmittelbar nach der Ver√∂ffentlichung der Anzeigen haben wir eine Vielzahl von Versuchen festgestellt, die Sicherheitsanf√§lligkeit in den SharePoint-Installationen unserer Kunden auszunutzen.  Unsere Mitarbeiter √ºberwachen st√§ndig neue Bedrohungen und schreiben Regeln, um unsere Kunden zu sch√ºtzen. </p><br><p>  Die Regel, die das Problem am Donnerstag verursachte, war der Schutz vor Cross-Site-Scripting (XSS).  In den letzten Jahren gab es auch viele weitere derartige Angriffe. </p><br><p><img src="https://habrastorage.org/webt/tr/jy/oz/trjyozwk_k4raviofhzgeskwf2s.png"><br>  <em>Quelle: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://cvedetails.com/</a></em> </p><br><p>  Das Standardverfahren zum √Ñndern einer verwalteten Regel f√ºr WAF erfordert kontinuierliche Integrationstests (CI) vor der globalen Bereitstellung.  Letzten Donnerstag haben wir es geschafft und die Regeln erweitert.  Um 13:31 Uhr schickte ein Ingenieur eine genehmigte Poolanfrage mit einer √Ñnderung. </p><br><p><img src="https://habrastorage.org/webt/uz/xj/jo/uzxjjo5648f52t8x-tnu66tuvku.png"></p><br><p>  Um 13:37 Uhr sammelte TeamCity die Regeln, f√ºhrte die Tests durch und gab den Startschuss.  Die WAF-Testsuite testet die WAF-Kernfunktionalit√§t und besteht aus einer Vielzahl von Komponententests f√ºr einzelne Funktionen.  Nach Unit-Tests haben wir die Regeln f√ºr WAF mit einer gro√üen Anzahl von HTTP-Anfragen √ºberpr√ºft.  HTTP-Anforderungen pr√ºfen, welche Anforderungen von WAF blockiert werden sollen (um den Angriff abzufangen) und welche √ºbersprungen werden k√∂nnen (um nicht alles zu blockieren und Fehlalarme zu vermeiden).  Wir haben jedoch keine Tests f√ºr die √ºberm√§√üige Verwendung von Prozessorressourcen durchgef√ºhrt. Die Untersuchung der Protokolle fr√ºherer WAF-Assemblys zeigt, dass sich die Testausf√ºhrungszeit mit der Regel nicht erh√∂ht hat und es schwierig war zu vermuten, dass nicht gen√ºgend Ressourcen vorhanden waren. </p><br><p>  Die Tests wurden bestanden und TeamCity begann um 13:42 Uhr, die √Ñnderung automatisch bereitzustellen. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/8-/s2/gd/8-s2gd8pw8j5zhxukadhwh77xr4.png"></a> </p><br><h3 id="quicksilver">  Quecksilber </h3><br><p>  WAF-Regeln befassen sich mit der dringenden Beseitigung von Bedrohungen. Daher stellen wir sie mithilfe der verteilten Schl√ºssel-Wert-Paare Quicksilver bereit, mit denen √Ñnderungen innerhalb von Sekunden global verteilt werden.  Alle unsere Kunden verwenden diese Technologie, wenn sie die Konfiguration im Dashboard oder √ºber die API √§ndern. Dank dieser Reaktion reagieren wir blitzschnell auf √Ñnderungen. </p><br><p>  Wir haben ein wenig √ºber Quecksilber gesprochen.  Fr√ºher haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kyoto Tycoon</a> als global verteiltes Repository f√ºr Schl√ºssel-Wert-Paare verwendet, aber es gab Betriebsprobleme, und wir haben unser Repository in mehr als 180 St√§dten repliziert.  Mit Quicksilver senden wir jetzt √Ñnderungen an der Clientkonfiguration, aktualisieren WAF-Regeln und verteilen JavaScript-Code, der von Clients in Cloudflare Workers geschrieben wurde. </p><br><p>  Es dauert nur wenige Sekunden, bis eine Konfiguration weltweit funktioniert, vom Dr√ºcken einer Taste auf einem Dashboard √ºber das Aufrufen einer API bis hin zum Vornehmen von Konfigurations√§nderungen.  Kunden lieben diese Geschwindigkeitseinstellung.  Und Workers bietet ihnen eine fast sofortige globale Softwarebereitstellung.  Im Durchschnitt verteilt Quicksilver etwa 350 √Ñnderungen pro Sekunde. </p><br><p>  Und Quecksilber ist sehr schnell.  Im Durchschnitt haben wir das 99. Perzentil von 2,29 Sekunden erreicht, um √Ñnderungen auf jeden Computer auf der ganzen Welt zu √ºbertragen.  Normalerweise ist die Geschwindigkeit gut.  Wenn Sie eine Funktion aktivieren oder den Cache leeren, geschieht dies schlie√ülich fast sofort und √ºberall.  Das Senden von Code √ºber Cloudflare Workers erfolgt mit derselben Geschwindigkeit.  Cloudflare verspricht seinen Kunden schnelle Updates zum richtigen Zeitpunkt. </p><br><p>  Aber in diesem Fall hat uns die Geschwindigkeit einen Streich gespielt, und die Regeln haben sich innerhalb von Sekunden √ºberall ge√§ndert.  Sie haben wahrscheinlich bemerkt, dass der WAF-Code Lua verwendet.  Cloudflare verwendet Lua in gro√üem Umfang in der Produktionsumgebung, und wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">haben die</a> Details von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lua bereits in WAF</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">besprochen</a> .  Lua WAF verwendet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PCRE</a> intern und wendet das Back-Tracking f√ºr den Abgleich an.  Es gibt keine Abwehrmechanismen gegen au√üer Kontrolle geratene Ausdr√ºcke.  Im Folgenden werde ich mehr dar√ºber und dar√ºber sprechen, was wir damit machen. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zd/qq/yo/zdqqyof00zszstm3indwngi26_8.png"></a> </p><br><p>  Bevor die Regeln bereitgestellt wurden, verlief alles reibungslos: Die Poolanforderung wurde erstellt und genehmigt, die CI / CD-Pipeline hat den Code kompiliert und getestet, die √Ñnderungsanforderung wurde gem√§√ü der SOP gesendet, die die Bereitstellung und das Rollback regelt, und die Bereitstellung wurde abgeschlossen. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/5t/47/ar/5t47art0hduaaxywv3io5_71z8a.png"></a> <br>  <em>CloudFare WAF-Bereitstellungsprozess</em> </p><br><p>  Was ist schief gelaufen? <br>  Wie ich bereits sagte, stellen wir jede Woche Dutzende neuer WAF-Regeln bereit, und wir haben viele Schutzsysteme gegen die negativen Folgen einer solchen Bereitstellung.  Und wenn etwas schief geht, ist es normalerweise eine Kombination mehrerer Umst√§nde.  Wenn Sie nur einen Grund finden, ist dies nat√ºrlich beruhigend, aber nicht immer wahr.  Hier sind die Gr√ºnde, die zusammen zum Ausfall unseres HTTP / HTTPS-Dienstes gef√ºhrt haben. </p><br><ol><li>  Der Ingenieur schrieb einen regul√§ren Ausdruck, der zu √ºberm√§√üigem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Backtracking</a> f√ºhren k√∂nnte. </li><li>  Ein Tool, das eine √ºberm√§√üige Verwendung der vom regul√§ren Ausdruck verwendeten Prozessorressourcen verhindern konnte, wurde einige Wochen zuvor f√§lschlicherweise w√§hrend des WAF-Refactorings entfernt. Das Refactoring war erforderlich, damit WAF weniger Ressourcen verbrauchte. </li><li>  Die Regex-Engine hatte keine Garantie f√ºr Komplexit√§t. </li><li>  Die Testsuite konnte keinen √ºberm√§√üigen CPU-Verbrauch feststellen. </li><li>  Das SOP-Verfahren erm√∂glicht die globale Bereitstellung nicht dringender Regel√§nderungen ohne einen mehrstufigen Prozess. </li><li>  Der Rollback-Plan erforderte zweimal eine vollst√§ndige WAF-Montage, was lange dauerte. </li><li>  Der erste globale Verkehrsalarm war zu sp√§t. </li><li>  Wir haben die Aktualisierung der Statusseite verz√∂gert. </li><li>  Wir hatten aufgrund eines Absturzes Probleme beim Zugriff auf Systeme, und die Problemumgehung wurde nicht gut genug ausgearbeitet. </li><li>  SRE-Ingenieure haben den Zugriff auf einige Systeme verloren, weil ihre Anmeldeinformationen aus Sicherheitsgr√ºnden abgelaufen sind. </li><li>  Unsere Kunden hatten keinen Zugriff auf das Cloudflare-Dashboard oder die API, da sie die Cloudflare-Region durchlaufen haben. </li></ol><br><h3 id="chto-izmenilos-s-proshlogo-chetverga">  Was hat sich seit letztem Donnerstag ge√§ndert? </h3><br><p>  Erstens haben wir alle Arbeiten an Releases f√ºr WAF vollst√§ndig eingestellt und gehen wie folgt vor: </p><br><ol><li>  Wiedereinf√ºhrung des Schutzes vor √ºberm√§√üigen Prozessorressourcen, die wir entfernt haben.  (Fertig) </li><li>  √úberpr√ºfen Sie alle 3868-Regeln in den verwalteten Regeln manuell, damit WAF andere potenzielle F√§lle von √ºberm√§√üigem Backtracking findet und behebt.  (√úberpr√ºfung abgeschlossen) </li><li>  Wir enthalten Leistungsprofile f√ºr alle Regeln in der Testsuite.  (Voraussichtlich: 19. Juli) </li><li>  Wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wechseln</a> zur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">re2-</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rust-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Regex-</a> Engine - beide bieten Garantien zur Laufzeit.  (Voraussichtlich: 31. Juli) </li><li>  Wir schreiben SOP neu, um die Regeln wie andere Software in Cloudflare schrittweise bereitzustellen, haben aber gleichzeitig die M√∂glichkeit, eine globale Notfallbereitstellung durchzuf√ºhren, wenn die Angriffe bereits begonnen haben. </li><li>  Wir entwickeln die M√∂glichkeit eines dringenden R√ºckzugs des Cloudflare-Dashboards und der API aus der Cloudflare-Region. </li><li>  Wir automatisieren die Aktualisierung der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cloudflare-Statusseite</a> . </li></ol><br><p>  Auf lange Sicht geben wir Lua WAF auf, das ich vor einigen Jahren geschrieben habe.  Wir migrieren WAF auf das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">neue Firewall-System</a> .  So wird WAF schneller und erh√§lt ein zus√§tzliches Schutzniveau. </p><br><h3 id="zaklyuchenie">  Fazit </h3><br><p>  Dieser Fehler verursachte Probleme f√ºr uns und unsere Kunden.  Wir haben schnell reagiert, um die Situation zu korrigieren, und jetzt arbeiten wir an Fehlern in den Prozessen, die den Fehler verursacht haben, und wir graben noch tiefer, um uns durch die Umstellung auf eine neue Technologie vor potenziellen Problemen mit regul√§ren Ausdr√ºcken in der Zukunft zu sch√ºtzen. </p><br><p>  Wir sch√§men uns sehr f√ºr diesen Fehler und entschuldigen uns bei unseren Kunden.  Wir hoffen, dass diese √Ñnderungen sicherstellen, dass dies nicht erneut geschieht. </p><br><h3 id="prilozhenie-bektreking-regulyarnyh-vyrazheniy">  Anwendung.  Backtracking f√ºr regul√§re Ausdr√ºcke </h3><br><p>  Um zu verstehen, wie der Ausdruck: </p><br><pre> <code class="plaintext hljs">(?:(?:\"|'|\]|\}|\\|\d (?:nan|infinity|true|false|null|undefined|symbol|math)|\`|\- |\+)+[)]*;?((?:\s|-|~|!|{}|\|\||\+)*.*(?:.*=.*)))</code> </pre> <br><p>  Wenn Sie alle Prozessorressourcen verbraucht haben, m√ºssen Sie ein wenig √ºber die Funktionsweise der Standard-Regex-Engine wissen.  Das Problem hier ist das Muster <code>.*(?:.*=.*)</code> .  <code>(?:</code> und die entsprechende <code>)</code> ist keine aufregende Gruppe (dh der Ausdruck in Klammern wird als ein Ausdruck gruppiert). </p><br><p>  Im Zusammenhang mit einem √ºberm√§√üigen Verbrauch von Prozessorressourcen kann dieses Muster als <code>.*.*=.*</code> Bezeichnet werden.  Als solches sieht das Muster unn√∂tig komplex aus.  Noch wichtiger ist jedoch, dass in der realen Welt solche Ausdr√ºcke (√§hnlich wie komplexe Ausdr√ºcke in den WAF-Regeln), die die Engine auffordern, einem Fragment gefolgt von einem anderen Fragment zu entsprechen, zu einem katastrophalen Backtracking f√ºhren k√∂nnen.  Und hier ist warum. </p><br><p><img src="https://habrastorage.org/webt/wr/7g/ec/wr7gec__o2lld5uwyz5ir6vfolm.png"></p><br><p>  Im regul√§ren Ausdruck <code>.</code>  bedeutet, dass Sie mit einem Zeichen √ºbereinstimmen m√ºssen. <code>.*</code> - Null oder mehr Zeichen "gierig" abgleichen, dh maximal ein Zeichen erfassen, also <code>.*.*=.*</code> bedeutet, dass Sie mit null oder mehr Zeichen √ºbereinstimmen und dann mit null oder mehr Zeichen √ºbereinstimmen Literalzeichen =, entspricht null oder mehr Zeichen. </p><br><p>  Nehmen Sie die Testlinie <code>x=x</code> .  Es entspricht dem Ausdruck <code>.*.*=.*. .*.*</code>  <code>.*.*=.*. .*.*</code> bis zum Gleichheitszeichen entspricht dem ersten <code>x</code> (eine der Gruppen <code>.*</code> entspricht <code>x</code> und das zweite bis null Zeichen).  <code>.*</code> after = entspricht dem letzten <code>x</code> . </p><br><p>  F√ºr einen solchen Vergleich sind 23 Schritte erforderlich.  Die erste Gruppe <code>.*</code> <code>.*.*=.*</code> Handelt "gierig" und entspricht der gesamten Zeile <code>x=x</code> .  Der Motor f√§hrt zur n√§chsten Gruppe <code>.*</code> .  Wir haben keine √ºbereinstimmenden Zeichen mehr, also die zweite Gruppe <code>.*</code> Entspricht null Zeichen (dies ist zul√§ssig).  Dann geht der Motor zum <code>=</code> -Zeichen.  Es gibt keine weiteren Zeichen (die erste Gruppe <code>.*</code> Verwendet den gesamten Ausdruck <code>x=x</code> ), es findet keine √úbereinstimmung statt. </p><br><p>  Und hier kehrt die Engine f√ºr regul√§re Ausdr√ºcke zum Anfang zur√ºck.  Er geht zur ersten Gruppe <code>.*</code> Und vergleicht sie <code> x=</code> (anstelle von <code>x=x</code> ) und √ºbernimmt dann die zweite Gruppe <code>.*</code> .  Die zweite Gruppe <code>.*</code> Wird dem zweiten <code>x</code> , und wir haben wieder keine Zeichen mehr.  Und wenn der Motor <code>=</code> v <code>.*.*=.*</code> Erreicht, passiert wieder nichts.  Und er macht wieder einen Backtrack. </p><br><p>  Diesmal die Gruppe <code>.*</code> immer noch mit <code>x=</code> √ºberein, aber mit der zweiten Gruppe <code>.*</code> nicht mehr <code>x</code> , sondern null Zeichen.  Die Engine versucht, das Literalsymbol <code>=</code> im Muster zu finden <code>.*.*=.*</code> , Wird jedoch nicht beendet (schlie√ülich hat die erste Gruppe es bereits belegt <code>.*</code> ).  Und er macht wieder einen Backtrack. </p><br><p>  Diesmal die erste Gruppe <code>.*</code> Nimmt nur das erste x.  Aber die zweite Gruppe <code>.*</code> "Gierig" erfasst <code>=x</code> .  Schon erraten, was passieren wird?  Die Engine versucht, mit literal <code>=</code> √ºbereinzustimmen, schl√§gt fehl und f√ºhrt das n√§chste Backtracking durch. </p><br><p>   <code>.*</code>     <code>x</code> .  <code>.*</code>   <code>=</code> . ,      <code>=</code> ,       <code>.*</code> .   .         ! </p><br><p>     <code>.*</code>     <code>x</code> ,  <code>.*</code> ‚Äî   ,      <code>=</code>   <code> =</code>  .    <code>.*</code>    <code>x</code> . </p><br><p> 23    <code>x=x</code> .      Perl <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Regexp::Debugger</a> ,  ,     . </p><br><p><img src="https://habrastorage.org/webt/a7/do/2n/a7do2nizluizhm1h2q2shajnvgs.gif"></p><br><p>    ,     <code>x=x</code>    <code>x=xx</code> ?  33 .   <code>x=xxx</code> ? 45.   .      <code>x=x</code>  <code>x=xxxxxxxxxxxxxxxxxxxx</code> (20 <code>x</code>  <code>=</code> ).    20 x  <code>=</code> ,     555 ! ( ,     <code>x=</code>      20 <code>x</code> ,   4067 ,  ,   ). </p><br><p><img src="https://habrastorage.org/webt/t-/1m/l4/t-1ml4up0y5w262eye_cyjmlik4.png"></p><br><p>         <code>x=xxxxxxxxxxxxxxxxxxxx</code> : </p><br><p><img src="https://habrastorage.org/webt/t8/oz/wq/t8ozwqwv1otujwl5_bebeglitpe.gif"></p><br><p>   ,         .      ,     . ,     <code>.*.*=.*</code> ; (         ). ,     ,  <code>foo=bar;</code>  . </p><br><p>       .   <code>x=x</code>  90 ,   23.     .   <code>x=</code>  20 <code>x</code> ,  5353 .  .      <code>Y</code>     . </p><br><p><img src="https://habrastorage.org/webt/kn/n9/ex/knn9exewj9a48-fkxyayefzexeu.png"></p><br><p>  ,   5353    <code>x=xxxxxxxxxxxxxxxxxxxx</code>  <code>.*.*=.*;</code> </p><br><p><img src="https://habrastorage.org/webt/d3/gg/ra/d3ggrayopot2-l7vivzm0fqfnmq.gif"></p><br><p>   ¬´¬ª,   ¬´¬ª ,    .      <code>.*?.*?=.*?</code> ,   <code>x=x</code>  11  (  23).    <code>x=xxxxxxxxxxxxxxxxxxxx</code> .  ,  <code>?</code>  <code>.*</code>      ,    . </p><br><p>  ¬´¬ª      .     <code>.*.*=.*;</code>  <code>.*?.*?=.*?;</code> ,    . <code>x=x</code>    555 ,  <code>x=</code>  20 <code>x</code> ‚Äî 5353. </p><br><p> ,    (      ) ‚Äî         .        . </p><br><p>       1968 ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Programming Techniques: Regular expression search algorithm</a> (¬´ :    ¬ª).    ,         ,          ,        . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/fd/nn/ri/fdnnril2lmr0udityqylanfzahk.png"></a> </p><br><blockquote> <strong>  <br>     <br>   (Ken Thompson)</strong> <br> Bell Telephone Laboratories, Inc., -,  - <br><br>                 .             IBM 7094    .               ,         .    ,   . <br><br> <strong></strong> <br>      ,       . <br><br>        .      .     ‚Äî                  . <br>              . ,        . ,           . <br> ,           IBM 7094. <br><br> <strong></strong> <br>       .   ‚Äî   ,       .       ¬´¬∑¬ª    .         .      .  2  ,       . </blockquote><p>         ,           ALGOL-60,       IBM 7094.  ,     . </p><br><p> <a href=""><img src="https://habrastorage.org/webt/fx/se/9x/fxse9xv8le3pgp2quvsrufznvb8.png"></a> </p><br><blockquote>   .    ‚äï      . <br>   1          .      ‚Äî a, b, c,      S[i]   NNODE. <br><br> NNODE   ,          (. . 5) </blockquote><p>       <code>.*.*=.*</code> ,   ,      . </p><br><p><img src="https://habrastorage.org/webt/mt/_5/lc/mt_5lcklo-jw2x6zmt8nwjg8hpy.png"></p><br><p>  . 0   ,   0,  3 ,     1, 2  3.      <code>.*</code>   . 3      .    <code>=</code>    <code>=</code> .  4  .    ,    . </p><br><p>  ,           <code>.*.*=.*</code> ,     <code>x=x</code> .     0,    .  1. </p><br><p><img src="https://habrastorage.org/webt/tx/a6/cl/txa6cltpurcbwxzrxk1v9ypkec4.png"></p><br><p>    ,        .        . </p><br><p>      ,       (1  2),    .  2. </p><br><p><img src="https://habrastorage.org/webt/ve/pb/nj/vepbnjljx-0cinc-eapaz17mths.png"></p><br><p>  . 2 ,  ,     <code>x</code>  <code>x=x</code> . <code>x</code>     ,    1     1.  <code>x</code>     ,    2     2. </p><br><p>    <code>x</code>  <code>x=x</code>  -   1  2.      3  4,       <code>=</code> . </p><br><p>    <code>=</code>  <code>x=x</code> .   x  ,              1    1    2   2,        <code>=</code>     2   3 (  4).    .  3. </p><br><p><img src="https://habrastorage.org/webt/0b/x8/7f/0bx87fp1aquszmn-wjp7ta3b4i0.png"></p><br><p>      <code>x</code>  <code>x=x</code> .   1  2        1  2.   3 <code>x</code>           3. </p><br><p>      <code>x=x</code> ,      4,     .     ,          .   . </p><br><p> ,     4 (   <code>x=</code> )    ,    ,    <code>x</code> . </p><br><p>        . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460863/">https://habr.com/ru/post/de460863/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460851/index.html">SamsPcbGuide, Teil 10: Technologie - L√∂ten bleifreier Komponenten</a></li>
<li><a href="../de460855/index.html">Wie verwende ich PHP zur Implementierung von Microservices?</a></li>
<li><a href="../de460857/index.html">Wie Namecoin Blockchain Research RTM-Cyber-Angriffe vorhersagte</a></li>
<li><a href="../de460859/index.html">IThink # 3 Konferenz in Kharkov - basierend auf WWDC 2019</a></li>
<li><a href="../de460861/index.html">JavaScript lexikalischer Umfang und Abschluss</a></li>
<li><a href="../de460865/index.html">Menschen auf dem Mond. Quellen</a></li>
<li><a href="../de460867/index.html">Sourcery zur automatischen Konvertierung in Realm-Objektstrukturen</a></li>
<li><a href="../de460869/index.html">Echtzeit-Objekterkennung unter iOS mit YOLOv3</a></li>
<li><a href="../de460873/index.html">Warum Turok: Dinosaur Hunter f√ºr N64 seiner Zeit um Jahre voraus ist</a></li>
<li><a href="../de460875/index.html">Wie wir bei QIWI zu einem gemeinsamen Interaktionsstil zwischen View und ViewModel innerhalb von MVVM gekommen sind</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>