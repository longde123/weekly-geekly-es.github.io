<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàöÔ∏è ü§π üëåüèæ Compreendendo o Protocolo de Consenso Estelar üèöÔ∏è üóø üö∂üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O protocolo de consenso estelar foi descrito pela primeira vez em um artigo cient√≠fico de 2015 de David Mazier. Este √© um "sistema federal do acordo b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Compreendendo o Protocolo de Consenso Estelar</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444710/"><img src="https://habrastorage.org/getpro/habr/post_images/d61/191/bb6/d61191bb66df2fb90fda24b86afb49b2.gif"><br><br>  O protocolo de consenso estelar foi descrito pela primeira vez em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo cient√≠fico de</a> 2015 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de</a> David Mazier.  Este √© um "sistema federal do acordo bizantino", que permite que redes de computa√ß√£o descentralizadas sem l√≠deres cheguem a um consenso sobre qualquer decis√£o.  A rede de cobran√ßa Stellar usa o Stellar Consensus Protocol (SCP) para manter um hist√≥rico de transa√ß√µes consistente que todos os participantes veem. <br><br>  Protocolos de consenso s√£o considerados dif√≠ceis de entender.  O SCP √© mais simples do que a maioria deles, mas ainda compartilha essa reputa√ß√£o - em parte devido √† id√©ia err√¥nea de que o ‚Äúvoto federal‚Äù, ao qual √© dedicada a primeira metade do artigo cient√≠fico, √© o SCP.  Mas isso n√£o √© verdade!  Esse √© apenas um componente importante, que na segunda metade do artigo √© usado para criar o <i>atual</i> protocolo de consenso estelar. <br><a name="habracut"></a><br>  Neste artigo, descrevemos brevemente o que √© um "sistema de acordos", o que pode torn√°-lo "bizantino" e por que tornar o sistema bizantino "federal".  Depois, explicamos o procedimento de vota√ß√£o federada descrito no artigo do SCP e, finalmente, o pr√≥prio protocolo do SCP. <br><br><h1>  Sistemas de acordo </h1><br>  O sistema de acordos permite que um grupo de participantes chegue a um consenso sobre um t√≥pico, por exemplo, o que pedir para o almo√ßo. <br><br>  N√≥s da Interstellar implementamos nosso pr√≥prio sistema de organiza√ß√£o de refei√ß√µes: pedimos o que John, nosso gerente de opera√ß√µes, diz.  Este √© um sistema de contrato simples e eficaz.  Todos n√≥s confiamos em John e acreditamos que todos os dias ele encontrar√° algo interessante e nutritivo. <br><br>  Mas e se Jo√£o abusar de nossa confian√ßa?  Ele pode decidir sozinho que todos devemos nos tornar veganos.  Em uma ou duas semanas, √© prov√°vel que o derrubemos e o entregemos a Elizabeth.  Mas de repente ela adora abacates com anchovas e acha que todo mundo deveria ficar assim.  O poder corrompe.  Portanto, √© melhor encontrar um m√©todo mais democr√°tico: alguma maneira de garantir que diferentes prefer√™ncias sejam levadas em conta, garantindo um resultado oportuno e inequ√≠voco, para que ningu√©m fa√ßa pedidos de almo√ßo ou cinco pessoas fa√ßam pedidos diferentes, ou a discuss√£o se prolongar√° at√© a noite. <br><br>  Parece que a solu√ß√£o √© simples: vote!  Mas essa √© uma impress√£o enganosa.  Quem coletar√° as c√©dulas e reportar√° os resultados?  E por que o resto deveria acreditar no que ele diz?  Talvez possamos votar <i>primeiro</i> no l√≠der em quem confiamos para liderar a vota√ß√£o - mas quem liderar√° essa <i>primeira</i> vota√ß√£o?  E se n√£o pudermos concordar com um l√≠der?  Ou, se concordarmos, e esse l√≠der ficar preso em uma reuni√£o ou sair para licen√ßa m√©dica? <br><br>  Problemas semelhantes s√£o encontrados em redes de computadores distribu√≠das.  Todos os participantes ou n√≥s devem concordar com alguma solu√ß√£o, por exemplo, de quem √© a vez de atualizar o arquivo compartilhado ou executar a tarefa da fila de processamento.  Em uma rede de criptomoedas, os n√≥s precisam escolher repetidamente como a hist√≥ria completa se parece entre v√°rias vers√µes poss√≠veis que √†s vezes entram em conflito.  Este contrato de rede d√° ao destinat√°rio a garantia de que a moeda √© (a) v√°lida (n√£o falsificada) e (b) ainda n√£o foi gasta em outro lugar.  Tamb√©m garante que ele possa gastar moedas no futuro porque o novo destinat√°rio ter√° as mesmas garantias pelos mesmos motivos. <br><br>  Qualquer sistema correspondente em uma rede de computadores distribu√≠da deve ser tolerante a falhas: deve fornecer resultados consistentes, apesar de erros, como linhas de comunica√ß√£o lentas, n√≥s n√£o responsivos e ordem incorreta de mensagens.  <i>O</i> sistema de acordos <i>bizantino</i> √© adicionalmente resistente a erros ‚Äúbizantinos‚Äù: n√≥s que fornecem informa√ß√µes falsas, devido a um erro ou em uma tentativa deliberada de prejudicar o sistema ou obter alguma vantagem.  A resili√™ncia ‚Äúbizantina‚Äù - a capacidade de confiar em uma decis√£o do grupo, mesmo quando alguns membros do grupo podem mentir ou n√£o seguir as regras da tomada de decis√£o - √© chamada de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">par√°bola dos generais do Imp√©rio Bizantino</a> que tentaram coordenar o ataque.  Anthony Stevens tem uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">boa descri√ß√£o</a> . <br><br>  Considere o dono da moeda criptogr√°fica Alice, que deve escolher entre comprar um sorvete delicioso de Bob e pagar a d√≠vida de Carol.  Talvez Alice queira pagar os dois ao mesmo tempo, gastando fraudulentamente a mesma moeda.  Para fazer isso, ela deve convencer o computador de Bob que a moeda nunca foi paga a Carol e convencer o computador de Carol que a moeda nunca foi paga a Bob.  O sistema bizantino de conven√ß√µes torna isso praticamente imposs√≠vel usando uma forma de regra majorit√°ria chamada <i>quorum</i> .  Um n√≥ dessa rede se recusa a mudar para uma determinada vers√£o do hist√≥rico at√© ver que um n√∫mero suficiente de n√≥s de mesmo n√≠vel - um quorum - concorda com essa transi√ß√£o.  Assim que isso acontecer, eles formar√£o um bloco eleitoral suficientemente grande para for√ßar os demais n√≥s da rede a concordar com sua decis√£o.  Alice pode fazer com que alguns n√≥s fiquem em seu nome, mas se a rede for grande o suficiente, sua tentativa ser√° reprimida pelas vozes de n√≥s honestos. <br><br>  Quantos n√≥s s√£o necess√°rios para um quorum?  No m√≠nimo, uma maioria, ou melhor, uma maioria qualificada, para combater erros e fraudes.  Mas, para calcular a maioria, voc√™ precisa saber o n√∫mero total de participantes.  No escrit√≥rio da Interstellar ou nas elei√ß√µes distritais, esses n√∫meros s√£o f√°ceis de reconhecer.  Mas se o seu grupo √© uma rede mal definida na qual os n√≥s podem entrar e sair como desejado sem coordena√ß√£o com o centro, voc√™ precisa de um sistema <i>federal de</i> acordos bizantinos que possa determinar qu√≥runs n√£o a partir de uma lista predeterminada de n√≥s, mas dinamicamente, a partir de uma constante mudan√ßa e inevitavelmente incompleta instant√¢neo de n√≥s em um determinado ponto no tempo. <br><br>  Pode n√£o parecer poss√≠vel criar um quorum em termos de um √∫nico n√≥ em uma rede extensa, mas √© poss√≠vel.  Esse quorum pode at√© garantir os resultados de uma vota√ß√£o descentralizada.  O white paper do SCP mostra como fazer isso usando um procedimento chamado <i>vota√ß√£o federada</i> . <br><br><h1>  Para os impacientes </h1><br>  O restante do artigo detalha a vota√ß√£o federal e o protocolo de consenso estelar.  Se voc√™ n√£o est√° interessado nos detalhes, aqui est√° uma vis√£o geral do processo. <br><br><ol><li>  Os n√≥s conduzem rodadas de vota√ß√£o federal sobre os "nomeados".  Uma rodada de vota√ß√£o federal significa: <br><ul><li>  O n√≥ vota em qualquer declara√ß√£o, por exemplo, "proponho o valor de V"; <br></li><li>  O n√≥ ouve as vozes das festas at√© encontrar uma que possa "receber"; <br></li><li>  O n√≥ est√° procurando um "quorum" para esta declara√ß√£o.  O quorum "confirma" o candidato. </li></ul></li><li>  Assim que um n√≥ pode confirmar um ou mais candidatos, ele tenta "preparar" uma "vota√ß√£o" atrav√©s de v√°rias rodadas de vota√ß√£o federal. <br></li><li>  Assim que o n√≥ √© capaz de verificar a prontid√£o da vota√ß√£o, ele tenta aliment√°-lo com ainda mais rodadas de vota√ß√£o federada. <br></li><li>  Quando um site pode confirmar a confirma√ß√£o de um boletim, ele pode "externalizar" o valor desse boletim, usando-o como resultado de consenso. </li></ol><br>  Essas etapas incluem v√°rias rodadas de vota√ß√£o federada, que juntas formam uma rodada do SCP.  Examinaremos mais detalhadamente o que acontece a cada passo. <br><br><h1>  Voto Federado </h1><br>  A vota√ß√£o federada √© o processo de determinar se uma rede pode concordar com uma proposta.  Em uma rodada de vota√ß√£o, cada n√≥ deve selecionar um dos muitos valores poss√≠veis.  Ele n√£o pode fazer isso at√© ter certeza de que outros n√≥s na rede n√£o escolher√£o um resultado diferente.  Para ter certeza disso, os n√≥s trocam uma enxurrada de mensagens para frente e para tr√°s, para que todos <i>confirmem</i> que o <i>quorum de</i> n√≥s <i>toma</i> a mesma <i>decis√£o</i> .  O restante desta se√ß√£o explica os termos desta senten√ßa e como todo o procedimento ocorre. <br><br><h1>  Qu√≥runs e fatias de qu√≥rum </h1><br>  Vamos come√ßar definindo um quorum.  Como discutimos acima, em uma rede descentralizada com associa√ß√£o din√¢mica, √© imposs√≠vel saber antecipadamente o n√∫mero de n√≥s e, portanto, quanto √© necess√°rio para a maioria.  A vota√ß√£o federada resolve esse problema, introduzindo uma nova id√©ia para a fatia de quorum: um pequeno conjunto de n√≥s de pares nos quais o n√≥ confia para transmitir informa√ß√µes de status de vota√ß√£o no restante da rede.  Cada n√≥ define sua pr√≥pria fatia de quorum (da qual ele se torna um membro de fato). <br><br>  A forma√ß√£o de quorum come√ßa com um corte de quorum.  Para cada n√≥, n√≥s da sua fatia s√£o adicionados.  Em seguida, membros slicer <i>desses n√≥s</i> s√£o adicionados e assim por diante.  √Ä medida que voc√™ continua, mais e mais n√≥s aparecem e n√£o podem ser adicionados, porque eles j√° est√£o inclu√≠dos na fatia.  Quando n√£o h√° mais novos n√≥s a serem adicionados, o processo √© interrompido: formamos um quorum por "fechamento transitivo" cortando o quorum do n√≥ inicial. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/24f/13f/a42/24f13fa423c0f748a8a18a6451a50815.png"><br>  <i><font color="gray">Para encontrar o quorum desse n√≥ ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/746/820/ead/746820ead5d2d898a333851fef565965.png"><br>  <i><font color="gray">... adicione membros √† sua fatia ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ad/198/03f/2ad19803ff449504de13bb60f6e14212.png"><br>  <i><font color="gray">... adicione membros slicer a esses n√≥s.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/709/d25/521/709d2552176aa897f933421ca4410661.png"><br>  <i><font color="gray">Continue at√© que n√£o haja n√≥s a serem adicionados.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b1/8b0/662/4b18b0662787f3a6d8420c2992113afa.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/138/d6c/11d/138d6c11deb2d32589eee523663d2682.png"><br>  <i><font color="gray">Nenhum n√≥ a ser adicionado √† esquerda.</font></i>  <i><font color="gray">Este √© um quorum.</font></i> <br><br>  De fato, cada n√≥ pode entrar em mais de uma fatia.  Para formar um quorum, selecione apenas uma das fatias e adicione membros;  selecione qualquer fatia para cada membro e adicione membros a <i>essa</i> fatia e assim por diante.  Isso significa que cada n√≥ √© membro de muitos qu√≥runs poss√≠veis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e7/f3d/e1a/8e7f3de1a529c59cb486ebd67f3bf8ec.png"><br>  <i><font color="gray">Selecione apenas uma fatia de quorum em cada etapa.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e34/14f/370/e3414f370b9ae824bf894069b547bf36.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4a/cb6/6e7/e4acb66e79e18c72db3c0839c1e76e25.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cb/cca/c69/0cbccac69b859093788ea2a37e6c3aed.png"><br>  <i><font color="gray">Um quorum poss√≠vel.</font></i>  <i><font color="gray">Ou uma alternativa ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c26/7cc/911/c267cc911e0b6bbb6f1729c5a5003704.png"><br>  <i><font color="gray">... selecione outras fatias ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f35/0a5/8fb/f350a58fba9d8b9c640edd7d273d6f15.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf4/73c/3fe/bf473c3fedaa8c8d98820485b24f3034.png"><br>  <i><font color="gray">... (quando poss√≠vel) ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0b/b61/fc1/c0bb61fc1ed34f0ad6fb57711820dc83.png"><br>  <i><font color="gray">... cria outro quorum.</font></i> <br><br>  Como um n√≥ sabe em quais fatias os outros n√≥s est√£o?  Da mesma maneira que outras informa√ß√µes sobre outros n√≥s: das transmiss√µes que cada n√≥ transmite para a rede quando seu status de vota√ß√£o √© alterado.  Cada transmiss√£o inclui informa√ß√µes sobre fatias do n√≥ de envio.  O documento t√©cnico do SCP n√£o especifica um mecanismo de comunica√ß√£o.  As implementa√ß√µes geralmente usam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o protocolo de fofocas</a> para garantir a transmiss√£o de mensagens pela rede. <br><br>  Lembre-se de que em um sistema bizantino n√£o federal de acordos, um quorum √© definido como a maioria de todos os n√≥s.  O sistema bizantino de acordos foi desenvolvido do ponto de vista da pergunta: quantos n√≥s desonestos o sistema pode suportar?  Em um sistema de N n√≥s projetado para sobreviver com falhas de f (truques), o n√≥ deve poder progredir recebendo uma resposta dos pares de N - f, pois f deles pode n√£o funcionar.  Por√©m, tendo recebido uma resposta de N - f pares, podemos assumir que todos os pares (dos quais o n√≥ n√£o recebeu uma resposta) s√£o realmente honestos.  Assim, f de N - f pares (dos quais uma resposta √© recebida) s√£o maliciosos.  Para que os n√≥s cheguem ao mesmo consenso, a maioria dos n√≥s restantes deve ser honesta, ou seja, precisamos que N - f seja maior que 2f ou N&gt; 3f.  Portanto, geralmente um sistema projetado para sobreviver a falhas f ter√° um total de N = 3f + 1 n√≥s e um tamanho de quorum de 2f + 1.  Assim que a proposta ultrapassa o limiar do quorum, o restante da rede est√° convencido de que qualquer proposta concorrente falhar√°.  Ent√£o a rede converge para o resultado. <br><br>  Mas em um sistema bizantino federal de acordos, n√£o s√≥ n√£o pode haver uma maioria (porque ningu√©m sabe o tamanho total da rede), mas o conceito de maioria √© geralmente in√∫til!  Se a associa√ß√£o ao sistema estiver aberta, algu√©m poder√° obter a maioria simplesmente conduzindo o chamado ataque Sibyl: ingressando na rede repetidamente atrav√©s de v√°rios n√≥s.  Ent√£o, por que o fechamento transitivo de uma fatia pode ser chamado de <i>quorum</i> e como √© capaz de suprimir ofertas concorrentes? <br><br>  Tecnicamente, de jeito nenhum!  Imagine uma rede de seis n√≥s, onde dois triplos s√£o isolados em fatias do quorum um do outro.  O primeiro subgrupo pode tomar uma decis√£o sobre a qual o segundo nunca ouvir√° e vice-versa.  N√£o h√° como esta rede alcan√ßar consenso (exceto por acaso). <br><br>  Portanto, o SCP exige que a rede tenha uma propriedade chamada <i>cruzamento de quorum</i> para vota√ß√£o federada (e para aplicar importantes teoremas de artigos).  Em uma rede com essa propriedade, quaisquer dois qu√≥runs que podem ser criados sempre se sobrep√µem em pelo menos um n√≥.  Determinar o clima predominante da rede √© t√£o bom quanto ter a maioria.  Intuitivamente, isso significa que, se um quorum concordar com a afirma√ß√£o X, nenhum outro quorum poder√° concordar com outra coisa, porque incluir√° necessariamente algum n√≥ do primeiro quorum que j√° votou em X. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/399/d79/c47/399d79c473bba703f30e370d8dbd3832.png"><br>  <i><font color="gray">Se a rede tiver uma interse√ß√£o de qu√≥runs ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56b/04f/e6d/56b04fe6de47463d12959711a1c02de0.png"><br>  <i><font color="gray">... ent√£o quaisquer dois qu√≥runs que voc√™ possa construir ...</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e65/090/30b/e6509030b1532429b806b521c3009d2b.png"><br>  <i><font color="gray">... sempre se cruzam.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e25/a00/b4f/e25a00b4fe739f7930dccd184be76302.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/06c/13b/e5e/06c13be5e94fc380e2b49f17de2e33e1.png"><br><br>  (√â claro que os n√≥s sobrepostos podem se tornar mentirosos bizantinos ou ruins em outros aspectos. Nesse caso, a interse√ß√£o de qu√≥runs n√£o ajuda a rede a concordar. Por esse motivo, muitos dos resultados no documento t√©cnico do SCP s√£o baseados em suposi√ß√µes expl√≠citas, como o que permanece na rede interse√ß√£o de qu√≥runs, <i>mesmo ap√≥s a remo√ß√£o de n√≥s ruins</i> . Para simplificar, deixamos essas suposi√ß√µes <i>impl√≠citas</i> no restante do artigo). <br><br>  Pode parecer irracional esperar que em uma rede de n√≥s independentes seja poss√≠vel uma interse√ß√£o confi√°vel de qu√≥runs.  Mas h√° duas raz√µes pelas quais isso √© verdade. <br><br>  A primeira raz√£o √© a exist√™ncia da pr√≥pria Internet.  A Internet √© um exemplo ideal de uma rede de n√≥s independentes com interse√ß√£o de qu√≥runs.  A maioria dos sites na Internet se conecta a apenas alguns outros sites locais, mas esses pequenos conjuntos se sobrep√µem o suficiente para tornar cada site acess√≠vel a partir de qualquer outro site em uma rota espec√≠fica. <br><br>  O segundo motivo √© espec√≠fico da rede de pagamento estelar (o uso mais comum do SCP).  Cada ativo na rede Stellar possui um emissor, e as recomenda√ß√µes Stellar exigem que cada emissor designe um ou mais n√≥s na rede para processar solicita√ß√µes de pagamento.  √â do seu interesse incluir direta ou indiretamente esses n√≥s nas fatias de quorum para cada ativo no qual voc√™ est√° interessado.  Em seguida, os qu√≥runs de todos os n√≥s interessados ‚Äã‚Äãneste ativo se sobrepor√£o pelo menos nesses n√≥s de reembolso.  Os n√≥s interessados ‚Äã‚Äãem v√°rios ativos incluir√£o em suas fatias de quorum todos os n√≥s de pagamento dos respectivos emissores e procurar√£o combinar todos os ativos.  Al√©m disso, todos os ativos que n√£o est√£o conectados de maneira a outros na rede e <i>n√£o devem estar conectados</i> - ele se destina a que n√£o haja cruzamento de quorum para essa rede (por exemplo, bancos da zona do d√≥lar √†s vezes desejam negociar com bancos da zona do euro e bancos da zona do peso, para que estejam na mesma rede, mas nenhum deles se preocupa com uma rede separada de crian√ßas que vendem cart√µes de beisebol). <br><br>  Obviamente, <i>esperar pela</i> interse√ß√£o de qu√≥runs n√£o √© uma <i>garantia</i> .  Outros sistemas de acordos bizantinos devem grande parte de sua complexidade √† garantia de qu√≥runs.  Uma inova√ß√£o importante do SCP √© que ele remove a responsabilidade de criar qu√≥runs do pr√≥prio algoritmo de consenso e o leva ao n√≠vel do aplicativo.  Assim, embora uma vota√ß√£o federada seja suficientemente geral para votar em qualquer quest√£o, de fato sua confiabilidade depende criticamente do significado mais amplo desses valores.  Alguns usos hipot√©ticos podem n√£o ser t√£o convenientes para a constru√ß√£o de redes bem conectadas quanto outros. <br><br><h1>  Vota√ß√£o, aceita√ß√£o e confirma√ß√£o </h1><br>  Na rodada de vota√ß√£o federal, o n√≥ opcionalmente come√ßa a votar por algum valor de V. Isso significa que a mensagem √© enviada √† rede: "Eu sou o n√≥ N, minhas fatias de quorum s√£o Q e eu voto em V".  Quando um n√≥ vota dessa maneira, ele promete que nunca votou contra V e nunca votar√°. <br><br>  Nas transmiss√µes de n√≥s ponto a ponto, cada n√≥ v√™ como os outros votam.  Assim que o n√≥ coleta um n√∫mero suficiente dessas mensagens, ele pode rastrear fatias de quorum e tentar encontrar quorums.  Se ele vir um quorum de colegas que tamb√©m votam em V, ele poder√° <i>aceitar</i> V e transmitir esta nova mensagem para a rede: ‚ÄúEu sou o n√≥ N, minhas fatias s√£o o quorum Q e eu aceito V‚Äù.  A aceita√ß√£o oferece uma garantia mais forte do que uma simples vota√ß√£o.  Quando um n√≥ vota em V, nunca pode votar em outras op√ß√µes.  Mas se um n√≥ aceitar V, nenhum n√≥ na Web aceitar√° outra op√ß√£o (o Teorema 8 no white paper t√©cnico SCP prova isso). <br><br>  Obviamente, √© altamente prov√°vel que n√£o exista imediatamente um quorum de n√≥s que concordem com V. Outros n√≥s podem votar em outros valores.  Mas, para o site, existe outra maneira de passar da vota√ß√£o simples √† aceita√ß√£o.  N pode assumir um valor diferente de W, mesmo que n√£o tenha votado nele e mesmo que n√£o veja um quorum para ele.  Para decidir mudar sua voz, basta ver um <i>conjunto de</i> n√≥s <i>de bloqueio</i> que aceitaram W. Um conjunto de bloqueio √© um n√≥ em cada uma das fatias dos qu√≥runs de N. Como o nome indica, ele pode <i>bloquear</i> qualquer outro valor.  Se todos os n√≥s nesse conjunto adotarem W, ent√£o (pelo Teorema 8) nunca ser√° poss√≠vel formar um quorum assumindo um valor diferente e, portanto, tamb√©m √© seguro aceitar W. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc2/b0f/6db/dc2b0f6db96bc646f9c13eed191934d9.png"><br>  <i><font color="gray">N√≥ N com tr√™s fatias de quorums.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b12/544/25a/b1254425aec3dde64f6c0025ea6e7c41.png"><br>  <i><font color="gray">BDF √© um conjunto de bloqueio para N: inclui um n√≥ de cada uma das N fatias.</font></i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee2/051/c90/ee2051c903689ee5ad2f0c4239e6c574.png"><br> <i><font color="gray">BE      N,   E     N.</font></i> <br><br>    ‚Äî   .       N,     ,           N.    ‚Äî     .   N   ,     ,  .     , ,     SCP (  11),           ,  N         . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6eb/682/405/6eb682405d056f88c1eb2b272875e269.png"><br> <i><font color="gray"> .</font></i> <br><br>  ,         .   Stellar         . <br><br><h1>   Stellar </h1><br>       ‚Äî <i></i>  <i></i> .   ¬´¬ª,          (       ). ¬´¬ª ,     ,    . <br><br>     <i></i>   ,      V,        .  ¬´   ¬ª ‚Äî   ,    - .         ,      .  ,      <i></i> . <br><br>   Stellar     ,    ,  . (    SCP   .      ,    ,    ,      ).   ,    ,        ,            SCP,  . <br><br> ,   SCP   ,        ,  - ,   ,     ,    .       <i>   </i> . <br><br>       <i> </i> (nomination phase),     ¬´  V¬ª, ,     V.   ‚Äî     ,      . <br><br>     SCP    ,     ,    <i></i> (     )  ,    <i></i>   (commit).     ,      .         ,     <i></i>      .   ‚Äî  ,   ,      ‚Äî            . <br><br>         . <br><br><h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No in√≠cio do est√°gio de nomea√ß√£o, cada n√≥ pode selecionar espontaneamente o valor V e votar na declara√ß√£o "Estou nomeando V". O objetivo nesta fase √© confirmar a nomea√ß√£o de um determinado valor atrav√©s de uma vota√ß√£o federal.</font></font><br><br> ,        ,        .      ,  ¬´¬ª   .  (echo) ,       V,     ,    W,        V,  W. (        ,         . SCP     .  ,     ¬´¬ª     ,      .    ,   ,     ,     .           ,            ,  ). <br><br>     V,  W ‚Äî    ,       .     SCP     . <br><br>     V ‚Äî        V,    ‚Äî    SCP ‚Äî ,   ¬´¬ª. SCP   ,    ¬´  X¬ª,     ¬´   X¬ª,        .         ,             .    ,   <i></i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/65e/c7d/c03/65ec7dc03a79b55877355e653fed6829.png"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nomeando SCP usando vota√ß√£o federada. Pode haver muitos valores "B" pressionados pelos pares e "refletidos" pelo par.</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A nomea√ß√£o de candidatos pode resultar em v√°rios candidatos confirmados. Portanto, o SCP exige que a camada de aplicativo forne√ßa algum m√©todo de combina√ß√£o de candidatos em um</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> composto.</font></font></i> (composite).     . ,     ,         .      ¬´¬ª         . (  :           . ,      ).    Stellar,      ,       ,   ,       . <br><br>   SCP  ( 12),             .   :   ‚Äî    (  SCP).  ,     ,    ,  .     ,  <i></i>  .              ,        ,      ,     ,    . <br><br>   .  ‚Äî  .       ,     <i></i> (balloting). <br><br><h1>  </h1><br>  ‚Äî   &lt;counter,value&gt;,  counter ‚Äî  ,    1,  value ‚Äî    .          ,   .  ,           -   -           .      ,              .   &lt;counter, value&gt; ,   ,    &lt;counter+1, value&gt;. <br><br>   <i></i> (,      :   ), <i></i> ( counter-value)  <i></i>  .  SCP       ,  ,   : <br><br><ul><li> ¬´     B¬ª  <br></li><li> ¬´    B¬ª </li></ul><br>  Do ponto de vista desse n√≥, √© alcan√ßado um consenso ao encontrar o Boletim B para o qual ele pode confirmar (ou seja, encontrar um quorum que aceite) a declara√ß√£o "Declaro compromisso com o Boletim B".  A partir de agora, voc√™ poder√° agir com seguran√ßa no valor especificado em B - por exemplo, fa√ßa esse pedido para o almo√ßo.  Isso √© chamado de <i>externaliza√ß√£o do</i> valor.  Depois de confirmada a aceita√ß√£o da vota√ß√£o, o n√≥ pode ter certeza de que qualquer outro n√≥ externalizou o mesmo valor ou o comprometer√° definitivamente no futuro. <br><br>  Embora conceitualmente muitas c√©dulas federadas sejam mantidas em aplicativos para muitas c√©dulas diferentes, elas n√£o trocam tantas mensagens porque cada mensagem encapsula v√°rias c√©dulas.  Uma mensagem, portanto, promove o estado de muitos votos federados de uma s√≥ vez, por exemplo: "Aceito comiss√µes de c√©dula no intervalo de &lt;min, V&gt; a &lt;max, V&gt;". <br><br>  O que significam os termos "preparado" e "confirmar"? <br><br>  Um n√≥ vota para cometer uma vota√ß√£o quando est√° convencido de que outros n√≥s n√£o ir√£o cometer valores com valores diferentes.  Convencer este √© o objetivo de preparar a declara√ß√£o.  Uma vota√ß√£o que diz "Estou pronto para enviar o boletim B" √© uma promessa de nunca enviar um boletim menor que B, ou seja, com um contador mais baixo (o SCP exige que os valores nos boletins tenham uma certa ordem.) O boletim &lt;N1, V1&gt; √© menor que &lt;N2, V2&gt; se N1 &lt;N2 e tamb√©m se N1 = N2 e V1 &lt;V2).  Essas c√©dulas menores s√£o "abortadas" durante a vota√ß√£o preparat√≥ria, enquanto B √© considerado "preparado". <br><br>  Por que "estou pronto para cometer o boletim B" significa "prometo nunca cometer menos do que B"?  Porque o SCP define abortar como o oposto de confirmar.  Votar na prepara√ß√£o da c√©dula tamb√©m implica votar para cancelar outras c√©dulas e, como discutimos anteriormente, votar em uma coisa √© uma promessa de nunca votar contra. <br><br>  Antes de transmitir o commit, o site deve primeiro encontrar o boletim, que pode ser confirmado conforme preparado.  Em outras palavras, ele realiza uma vota√ß√£o federada sobre "Estou pronto para me comprometer com o Boletim B", talvez para muitas c√©dulas diferentes, at√© encontrar uma que aceite o quorum. <br><br>  De onde v√™m os boletins de voto para votar?  Primeiro, o n√≥ transmite os preparativos para votar em &lt;1, C&gt;, onde C √© o candidato composto produzido no est√°gio de nomea√ß√£o.  No entanto, mesmo ap√≥s o in√≠cio dos preparativos para a vota√ß√£o, a indica√ß√£o pode levar ao aparecimento de candidatos adicionais que se tornar√£o novas c√©dulas.  Enquanto isso, os pares podem ter candidatos diferentes e podem formar um conjunto de bloqueio que aceita "Estou pronto para confirmar o boletim B2", o que convencer√° o n√≥ a aceit√°-lo tamb√©m.  Finalmente, existe um mecanismo de tempo limite que gera novas rodadas de vota√ß√£o federada em novas c√©dulas com contadores mais altos se as c√©dulas atuais estiverem emperradas. <br><br>  Assim que o n√≥ encontra o Boletim B, que pode ser confirmado como preparado, ele transmite uma nova mensagem, "Boletim B Confirmar".  Essa vota√ß√£o diz aos colegas que o n√≥ nunca desistir√° de B. Na verdade, se B for uma vota√ß√£o &lt;N, C&gt;, ent√£o "Commit Bulletin &lt;N, C&gt;" significa consentimento incondicional para votar na prontid√£o de cada vota√ß√£o de &lt;N, C&gt; a &lt;‚àû, s&gt;.  Esse valor adicional ajuda outros n√≥s a acompanhar uma consolida√ß√£o, se eles ainda estiverem nos est√°gios anteriores do protocolo. <br><br>  Nesse est√°gio, vale ressaltar mais uma vez que estes s√£o protocolos ass√≠ncronos.  S√≥ porque um n√≥ envia votos para uma consolida√ß√£o n√£o significa que seus pares tamb√©m o fa√ßam.  Alguns deles ainda podem votar em pedidos de prepara√ß√£o para vota√ß√£o, outros j√° podem ter externalizado o significado.  O SCP explica como um n√≥ deve processar cada tipo de mensagem de pares, independentemente de sua fase. <br><br>  Se a mensagem "Declaro um commit &lt;N, C&gt;" n√£o puder ser aceita ou confirmada, ou seja, a probabilidade de aceita√ß√£o ou confirma√ß√£o da mensagem &lt;N + 1, C&gt; ou &lt;N + 2, C&gt; - ou, em qualquer caso, qualquer boletim com um valor de C, e nenhum outro, pois o n√≥ j√° prometeu nunca cancelar &lt;N, C&gt;.  Quando o n√≥ transmitir os votos para o commit, ele ser√° C ou nada, dependendo da extens√£o do consenso.  No entanto, isso n√£o √© suficiente para o n√≥ externalizar C. Algumas festas bizantinas (menos de um quorum, com base em nossas suposi√ß√µes sobre seguran√ßa) podem estar no n√≥.  A ado√ß√£o e a confirma√ß√£o de uma determinada c√©dula (ou variedade de c√©dulas) √© o que d√° ao n√≥ a confian√ßa para finalmente externalizar C. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0a6/882/059/0a6882059dac957e22a9059c79d1d710.png"><br>  <i><font color="gray">SCP em execu√ß√£o atrav√©s da vota√ß√£o federada.</font></i>  <i><font color="gray">N√£o mostrado: a qualquer momento um cron√¥metro pode funcionar, aumentando o contador na vota√ß√£o (e, possivelmente, produzindo um novo composto a partir de candidatos nomeados adicionais).</font></i> <br><br>  E isso √© tudo!  Uma vez que a rede alcan√ßou consenso, ela est√° pronta para faz√™-lo novamente e novamente.  Na rede de cobran√ßa Stellar, isso acontece aproximadamente a cada 5 segundos: um feito que requer seguran√ßa e capacidade de sobreviv√™ncia, garantido pelo SCP. <br><br>  O SCP pode conseguir isso confiando em v√°rias rodadas de vota√ß√£o federada.  A vota√ß√£o federada foi poss√≠vel gra√ßas ao conceito de fatias de quorum: conjuntos de n√≥s de pares nos quais cada n√≥ decidiu confiar como parte de seu quorum (subjetivo).  Essa configura√ß√£o significa que voc√™ pode obter consenso mesmo em uma rede com associa√ß√£o aberta e engano bizantino. <br><br><h1>  Leitura adicional </h1><br><ul><li>  O documento t√©cnico original do SCP pode ser encontrado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> , e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui est√° o</a> rascunho das especifica√ß√µes para sua implementa√ß√£o. <br></li><li>  O autor original do protocolo SCP, David Mazier, simplifica (mas ainda tecnicamente) explica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br></li><li>  Voc√™ pode se surpreender ao n√£o encontrar os termos "minera√ß√£o" ou "prova de trabalho" neste artigo.  O SCP n√£o usa esses m√©todos, mas alguns outros algoritmos de consenso o fazem.  Zane Witherspoon escreveu uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">revis√£o</a> acess√≠vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de algoritmos de consenso</a> . <br></li><li>  <a href="">Uma descri√ß√£o passo a passo de uma</a> rede simples que alcan√ßa consenso em uma rodada completa de SCP. <br></li><li>  Para leitores interessados ‚Äã‚Äãem implementa√ß√µes de SCP: consulte o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">c√≥digo C ++</a> usado pela rede de pagamentos Stellar ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o c√≥digo Go</a> que escrevi para entender melhor o SCP. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt444710/">https://habr.com/ru/post/pt444710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt444696/index.html">Aumente a densidade do cont√™iner em um n√≥ usando a tecnologia PFCACHE</a></li>
<li><a href="../pt444700/index.html">Bancos de dados aleat√≥rios. Oracle Enterprise Data Quality - Shield e Sword for Enterprise Storage</a></li>
<li><a href="../pt444704/index.html">Oportunidades nanoCAD SPDS Canteiro de obras em projetos de constru√ß√£o e reconstru√ß√£o em condi√ß√µes apertadas</a></li>
<li><a href="../pt444706/index.html">Fotos em 3D do Facebook dentro: Parallax Shaders</a></li>
<li><a href="../pt444708/index.html">Aplicativo PentQL com GraphQL</a></li>
<li><a href="../pt444712/index.html">"Atitude at√≠pica em rela√ß√£o ao financiamento" - e se os pr√≥prios funcion√°rios gerenciarem a receita. Conversa com Flant</a></li>
<li><a href="../pt444714/index.html">Como fizemos o overclock do CAD COMPASS-3D ‚Üí Parte 1</a></li>
<li><a href="../pt444716/index.html">Um telefone Samsung com uma tela dobr√°vel por US $ 2000 exibe um vinco</a></li>
<li><a href="../pt444718/index.html">Holografia amadora - o come√ßo da jornada</a></li>
<li><a href="../pt444720/index.html">O que o autor fumava: adicione a velha escola a esse mundo louco de jogos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>