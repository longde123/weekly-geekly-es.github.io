<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüåæ üëÇüèø üïπÔ∏è Python & Arduino. Einfach, schnell und sch√∂n üõÄ üé≤ ‚èπÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sehr oft haben Anf√§nger und nicht nur Entwickler Fragen. Wie steuere ich mit Arduino von einem Computer aus? Und wenn der Computer kein Raspberry Pi i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python & Arduino. Einfach, schnell und sch√∂n</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443326/">  Sehr oft haben Anf√§nger und nicht nur Entwickler Fragen.  Wie steuere ich mit Arduino von einem Computer aus?  Und wenn der Computer kein Raspberry Pi ist, sondern ein normaler Heimcomputer?  Und wenn Sie nicht mit ESP8266 leiden und √ºber das Webinterface verwalten m√∂chten?  Ist es wirklich notwendig, die Arduino IDE jedes Mal zu √∂ffnen und Befehle √ºber den <b>Port Monitor zu</b> senden?  Ich werde dar√ºber sprechen, wie ich meine eigene GUI-Anwendung zur Steuerung von Arduino erstelle. <br><a name="habracut"></a><br><h3>  Ausr√ºstung </h3><br>  Ich habe k√ºrzlich ein sehr interessantes Board bekommen: <b>Arduino SS Micro</b> .  Dieses Board, das dem Digispark Attiny 85 √§hnelt, ist dennoch eine chinesische Version des Arduino Micro mit USB-Ausgang. <br><br><img src="https://habrastorage.org/webt/aa/wu/2y/aawu2yvapatjuclkye5hfyxkdxs.png"><br><br>  Ich werde nicht im Detail dar√ºber sprechen, da ein YouTube-Nutzer mit dem Spitznamen <b>iomoio</b> dies bereits getan hat und seine Rezension <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> zu finden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ist</a> . <br><br>  Es scheint mir, dass dies ein ziemlich cooles und praktisches Ger√§t f√ºr kleine Heimprojekte ist, da die Dr√§hte eine Super-Eigenschaft haben: Verlieren Sie sich im ung√ºnstigsten Moment. <br><br>  Als Steuerungscomputer wurde ein MacBook Pro mit dem Betriebssystem macOS Mojave verwendet. Schlie√üen Sie den Artikel jedoch nicht, wenn Sie Windows oder Linux verwenden. Alles, was im Artikel beschrieben wird, funktioniert ohne √Ñnderungen unter jedem Betriebssystem. <br><br><h3>  Skizze f√ºr Arduino </h3><br>  Als Beispiel wird eine Skizze verwendet, die die LED auf Befehl der seriellen Schnittstelle ein- und ausschaltet. <br><br>  <b>WARNUNG</b> <br><br>  Die LED im Arduino SS Micro h√§ngt am SS-Anschluss und erlischt daher automatisch.  Trotzdem ist das Standard- <b>Blink-</b> Beispiel eine blinkende LED. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> inChar; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LED_PIN SS void setup() { pinMode(LED_PIN, OUTPUT); </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   Serial.begin(115200); //  Serial -  } void loop() { if (Serial.available() &gt; 0) { inChar = Serial.read(); if (inChar=='e') // e - Enable -  { digitalWrite(LED_PIN,HIGH); } } else if (inChar=='d') // d - Disable -  { digitalWrite(LED_PIN,LOW); } else if (inChar=='b') // b - Blink -    { while (true){ digitalWrite(LED_PIN,HIGH); delay(1000); digitalWrite(LED_PIN,LOW); delay(1000); } } }</span></span></span></span></code> </pre> <br>  Wenn Sie ein anderes Arduino verwenden, vergessen Sie nicht, den Pin der LED zu wechseln. <br><br><h3>  Computercode </h3><br>  Einer der Vorteile von Python neben seiner plattform√ºbergreifenden Nutzung ist das Vorhandensein einer gro√üen Anzahl von Bibliotheken.  Wir werden brauchen: <br><br><ul><li>  <b>PySerial</b> - Bibliothek f√ºr die Arbeit mit serieller Schnittstelle </li><li>  <b>PyQT5</b> - Bibliothek zum Erstellen einer grafischen Oberfl√§che </li></ul><br><h4>  Installation </h4><br>  Verwenden Sie zur Installation den integrierten Paketmanager - pip. <br><br><pre> <code class="bash hljs">pip install pyserial pyqt5</code> </pre> <br>  Zum bequemen Erstellen einer GUI kann QTDesigner installiert werden. <br><br><h4>  Schnittstelle </h4><br>  Da dieses Programm eher die Funktionen demonstrieren soll, kann der Benutzer den Port aus den vorgeschlagenen ausw√§hlen sowie die Geschwindigkeit, mit der die Kommunikation stattfinden wird. <br><br><img src="https://habrastorage.org/webt/iy/ga/62/iyga62zgwjt9p5zbr8ebw-r6xr4.png"><br><br><h4>  Quellcode </h4><br>  Alle Arbeiten mit dem Ger√§t sind der PySerial-Bibliothek zu verdanken.  Aber es gibt ein paar Nuancen.  Woher wissen Sie beispielsweise, an welchen Port das Ger√§t angeschlossen ist? <br><br>  Auf der gesamten bekannten <b>Stackoverflow-</b> Site schlug ein Benutzer mit dem Spitznamen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Thomas</a> eine vorgefertigte L√∂sung vor, die ich verwendete. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serial_ports</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Lists serial port names :raises EnvironmentError: On unsupported or unknown platforms :returns: A list of the serial ports available on the system """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> sys.platform.startswith(<span class="hljs-string"><span class="hljs-string">'win'</span></span>): ports = [<span class="hljs-string"><span class="hljs-string">'COM%s'</span></span> % (i + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">256</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> sys.platform.startswith(<span class="hljs-string"><span class="hljs-string">'linux'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> sys.platform.startswith(<span class="hljs-string"><span class="hljs-string">'cygwin'</span></span>): <span class="hljs-comment"><span class="hljs-comment"># this excludes your current terminal "/dev/tty" ports = glob.glob('/dev/tty[A-Za-z]*') elif sys.platform.startswith('darwin'): ports = glob.glob('/dev/tty.*') else: raise EnvironmentError('Unsupported platform') result = [] for port in ports: try: s = serial.Serial(port) s.close() result.append(port) except (OSError, serial.SerialException): pass return result</span></span></code> </pre><br>  Au√üerdem m√ºssen Sie eine Liste der verf√ºgbaren Geschwindigkeiten f√ºhren: <br><br><pre> <code class="python hljs">speeds = [<span class="hljs-string"><span class="hljs-string">'1200'</span></span>,<span class="hljs-string"><span class="hljs-string">'2400'</span></span>, <span class="hljs-string"><span class="hljs-string">'4800'</span></span>, <span class="hljs-string"><span class="hljs-string">'9600'</span></span>, <span class="hljs-string"><span class="hljs-string">'19200'</span></span>, <span class="hljs-string"><span class="hljs-string">'38400'</span></span>, <span class="hljs-string"><span class="hljs-string">'57600'</span></span>, <span class="hljs-string"><span class="hljs-string">'115200'</span></span>]</code> </pre> <br>  Lassen Sie uns nun das <b>Design</b> (erstellt in QtDesigner und konvertiert mit dem Dienstprogramm pyuic5 in eine .py-Datei), <b>Funktionen zum Scannen von Ports</b> und den <b>Hauptprogrammcode zusammenstellen</b> . <br><br>  Die Hauptklasse, die die gesamte Programmlogik enth√§lt <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LedApp</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(QtWidgets.QMainWindow, design.Ui_Form)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> super().__init__() self.setupUi(self) self.Port.addItems(serial_ports()) self.Speed.addItems(speeds) self.realport = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> self.ConnectButton.clicked.connect(self.connect) self.EnableBtn.clicked.connect(self.send) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: self.realport = serial.Serial(self.Port.currentText(),int(self.Speed.currentText())) self.ConnectButton.setStyleSheet(<span class="hljs-string"><span class="hljs-string">"background-color: green"</span></span>) self.ConnectButton.setText(<span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> e: print(e) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.realport: self.realport.write(<span class="hljs-string"><span class="hljs-string">b'b'</span></span>)</code> </pre><br>  Die Variablen <b>self.Port</b> und <b>self.Speed</b> sind Dropdown-Listen mit den Werten der verf√ºgbaren Ports und Geschwindigkeiten. <br><br>  Wenn Sie auf die Schaltfl√§che <b>self.ConnectButton</b> klicken, wird die <b>Verbindungsfunktion</b> aufgerufen, bei der versucht wird, mit einer bestimmten Geschwindigkeit eine Verbindung zu einem bestimmten Port <b>herzustellen</b> .  Wenn die Verbindung erfolgreich hergestellt wurde, wird die Schaltfl√§che gr√ºn und die Beschriftung √§ndert sich. <br><br><img src="https://habrastorage.org/webt/gk/6y/f2/gk6yf27-ftwz7k_omji4nuxrraw.png"><br><br>  Die <b>Sendefunktion</b> sendet eine Byte-Zeichenfolge an unseren Port und zwingt uns, den Blinkmodus einzuschalten. <br><br>  So k√∂nnen Sie verschiedene an USB angeschlossene Ger√§te steuern. <br><br>  Dieser Artikel ist einf√ºhrend und √ºbersichtlich. Vollst√§ndigere Informationen finden Sie beispielsweise hier: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PySerial</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pyqt</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Serie in Arduino</a> </li></ul><br>  Der vollst√§ndige Quellcode sowohl f√ºr die Skizze f√ºr Arduino als auch f√ºr das Programm wird auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub gehostet</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de443326/">https://habr.com/ru/post/de443326/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de443316/index.html">ReactJS-Test: Wie tief das Kaninchenloch ist</a></li>
<li><a href="../de443318/index.html">Schreiben eines Wasm Loader f√ºr Ghidra. Teil 1: Problemstellung und Einrichtung der Umgebung</a></li>
<li><a href="../de443320/index.html">Elektronisches Dokumentenmanagementsystem "Vizier"</a></li>
<li><a href="../de443322/index.html">GitLab 11.8 ver√∂ffentlicht mit SAST f√ºr JavaScript, GitLab Pages f√ºr Untergruppen und Bug Tracking</a></li>
<li><a href="../de443324/index.html">Python vs. Scala f√ºr Apache Spark - erwarteter Benchmark mit unerwartetem Ergebnis</a></li>
<li><a href="../de443330/index.html">Sicherheitswoche 11: RSA 2019 und eine bessere Zukunft</a></li>
<li><a href="../de443332/index.html">K√ºchenroboter</a></li>
<li><a href="../de443334/index.html">Gelbes Gesicht</a></li>
<li><a href="../de443336/index.html">Arbeiten Sie mit der Kamera in Flutter</a></li>
<li><a href="../de443340/index.html">M√∂glichkeiten, eine kostenlose PVS-Studio-Lizenz zu erhalten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>