<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶í üõë üïé DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de. Parte 1 üë®üèº‚Äçü§ù‚Äçüë®üèª üë®üèª‚Äçüî¨ ü¶é</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Meu nome √© Rob Stackle, sou consultor de seguran√ßa de Phoenix, Arizona e trabalho principalmente como pentester. Estou participando de confer√™ncias da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/430724/"> Meu nome √© Rob Stackle, sou consultor de seguran√ßa de Phoenix, Arizona e trabalho principalmente como pentester.  Estou participando de confer√™ncias da DefCon desde 1996, gosto de fotografia em grandes altitudes e este fim de semana foi o d√©cimo primeiro anivers√°rio de nosso casamento.  Quero agradecer √† minha incr√≠vel e compreensiva esposa Linda, que n√£o esperava que minha participa√ß√£o na DefCon signifique que todos os anos seremos obrigados a celebrar nosso anivers√°rio de casamento em Las Vegas, o que sinto muito. <br><br><img src="https://habrastorage.org/webt/gh/iu/mb/ghiumbdk-zkg1rtasuz93unhkz8.jpeg"><br><br>  Vou falar com voc√™ sobre v√°rias coisas relacionadas √† pesquisa em que venho trabalhando nos √∫ltimos anos.  Eles est√£o unidos por um tema comum - se voc√™ n√£o monitorar seu tr√°fego DNS e n√£o entender o que acontece l√°, quando tudo estiver em ordem, provavelmente n√£o prestar√° aten√ß√£o quando coisas ruins come√ßarem a acontecer.  Eu "estuprei" o DNS por v√°rios anos e esse sempre foi um dos meus vetores de ataque favoritos.  Voc√™ pode gastar uma fortuna em fortalecer o per√≠metro da rede, mas se eu conseguir o controle de um de seus dispositivos, acredite, seu jogo acabou. <a name="habracut"></a><br><br>  A aus√™ncia de vulnerabilidades no mercado para detectar configura√ß√µes incorretas sempre me d√° a oportunidade de "colocar o p√© na porta".  Hoje discutiremos v√°rios t√≥picos nos quais falarei sobre minhas aventuras com o DNS e meus truques com pessoas relacionadas ao DNS. <br><br>  Esses t√≥picos s√£o dedicados a entender mal o comportamento do DNS pelos usu√°rios finais da rede, falarei um pouco sobre pessoas que n√£o registraram seus dom√≠nios e sobre a pr√≥pria invas√£o de dom√≠nios. <br><br>  Nas confer√™ncias da Black Hat e da DefCon em 2011, Artyom Daineberg falou sobre o que ele chamou de agachamento por batida, ou "dar uma batida".  Aqueles que n√£o est√£o familiarizados com este estudo, mas est√£o interessados ‚Äã‚Äãneste problema no DNS de dom√≠nios populares, podem fazer o download dos materiais de sua apresenta√ß√£o usando os links fornecidos neste slide. <br><br><img src="https://habrastorage.org/webt/k6/xn/hb/k6xnhbvdnrhqjf77lhaplvwfq0u.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">P√°gina do Projeto</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apresenta√ß√£o em V√≠deo</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Slides</a> <br><br>  Quando li o an√∫ncio de seu discurso, publicado antes mesmo do relat√≥rio sobre a Black Hat, fiquei imediatamente interessado em como isso pode ser usado para meus pr√≥prios fins.  Sem entrar em detalhes, explicarei o que √© agachamento por batida, por que acontece e o que afeta.  Vou mostrar alguns exemplos do risco de virar acidentalmente um pouco na mem√≥ria quando 1 passar para 0 e vice-versa.  Os slides a seguir mostram como isso se parece com um exemplo de linha na mem√≥ria que exibe um nome de dom√≠nio. <br><br><img src="https://habrastorage.org/webt/2n/po/yp/2npoypk5v5tzpcgbmdsv-usjfne.jpeg"><br><br>  No meio dessa linha, a unidade se transforma em zero.  Artyom investigou o fen√¥meno no qual um erro de bit √∫nico na parte correta da mem√≥ria no momento certo obrigava o cliente a solicitar um nome de dom√≠nio completamente leg√≠timo, por√©m incorreto. <br><br>  Muito se falou sobre a probabilidade e as causas desse erro, mas comecei a estudar todas as maneiras que permitem que esse erro seja usado para fins maliciosos.  Portanto, o agachamento de DNS permite distorcer os nomes de dom√≠nio, registrar esses dom√≠nios ‚Äúerrados‚Äù e enviar solicita√ß√µes de usu√°rios a eles. <br><br>  O slide a seguir mostra que, como resultado do agachamento em bits do nome de dom√≠nio do Google, quando um pr√≥ton de alta energia na mem√≥ria "atinge" 1, que significa a letra g, o transforma em 0, o que significa a letra f e, como resultado, o usu√°rio √© redirecionado para goofle.com . <br><br><img src="https://habrastorage.org/webt/mg/-i/dr/mg-idr_v9xmgo_s4tknxy-tnia0.jpeg"><br><br>  Portanto, seu navegador o redirecionar√° completamente para outro site e ter√° a resposta certa para voc√™.  Ao mesmo tempo, o DNS SEC n√£o poder√° ajud√°-lo de nenhuma maneira e, de fato, existem muito poucas oportunidades para evitar esse erro de uma maneira completamente invis√≠vel, exceto pelo uso de mem√≥ria ECC, que reconhece e corrige erros de bits automaticamente. <br><br>  No entanto, esse tipo de mem√≥ria n√£o √© muito comum e, mesmo que voc√™ tenha usado o ECC, ainda existem muitos locais onde o agachamento de bits pode ocorrer e onde a mem√≥ria do ECC nunca √© usada, por exemplo, em uma placa de rede ou no cache DRAM de um disco r√≠gido. <br><br>  Deineberg descreveu em detalhes as causas do problema, mas, em geral, pode-se dizer que ocorrem erros de mem√≥ria, √†s vezes danificam a mem√≥ria e √†s vezes isso afeta o DNS.  Basicamente, a ‚Äúinvers√£o‚Äù de um bit deve-se a danos f√≠sicos √† mem√≥ria, superaquecimento, problemas el√©tricos, exposi√ß√£o a radia√ß√£o e at√© radia√ß√£o c√≥smica. <br><br>  A apresenta√ß√£o √© interrompida pela apari√ß√£o no palco dos organizadores da DefCon, que felicitam o palestrante e sua esposa Linda, que est√° presente na confer√™ncia pela primeira vez, no d√©cimo primeiro anivers√°rio de casamento.  Robert agradece os parab√©ns e continua a apresenta√ß√£o. <br>  A radia√ß√£o c√≥smica √© um fator extremamente raro que afeta o agachamento de bits, mas o superaquecimento √© uma causa muito comum de erros de mem√≥ria.  Notei que os smartphones s√£o especialmente vulner√°veis ‚Äã‚Äãdevido √†s condi√ß√µes operacionais extremas √†s quais est√£o expostos.  O superaquecimento da bateria do smartphone √© uma ocorr√™ncia bastante comum.  A maioria dos outros dispositivos possui refrigera√ß√£o, mas mesmo eles conseguem criar condi√ß√µes operacionais dif√≠ceis. <br><br><img src="https://habrastorage.org/webt/o6/ji/aa/o6jiaavivezo-k_6racvxt9xdw0.jpeg"><br><br>  H√° pouco tempo, o Google publicou informa√ß√µes sobre o trabalho de seus data centers.  Uma das coisas interessantes que aprendi foi a mensagem de que, para economizar energia, eles operam seus data centers em condi√ß√µes que a maioria de n√≥s consideraria irracionais.  Se os data centers t√≠picos operam a uma temperatura m√°xima de 15 a 20 ¬∞ C (60 a 70 graus Fahrenheit), os especialistas do Google recomendam que as empresas operem os data centers a uma temperatura de pelo menos 80 graus (27 ¬∞ C) e um data center belga Google operava seus servidores a uma temperatura de 95 graus (35 ¬∞ C). <br><br><img src="https://habrastorage.org/webt/du/rg/hn/durghn_gxdk7asow1-e0eqkgsgc.jpeg"><br><br>  Legenda: "Ouvi dizer que economiza dinheiro". <br><br>  A Intel e a Microsoft alegam que seus servidores se comportam bem em altas temperaturas, e a Dell garante que seus servidores funcionem a 46 ¬∞ C (115 graus Fahrenheit).  Acho que √© uma p√©ssima id√©ia, j√° que a temperatura √© o principal fator para garantir uma opera√ß√£o est√°vel da mem√≥ria, e os data centers do Google operam em temperaturas de "fogo". <br><br>  Comecei a estudar quais vantagens isso poderia oferecer e quais dom√≠nios eram mais vulner√°veis ‚Äã‚Äãao agachamento de bits, ou seja, tentei encontrar os nomes solicitados com mais frequ√™ncia para aumentar a probabilidade de encontrar esses erros.  Comecei a coletar logs DNS de grandes empresas para encontrar os nomes de dom√≠nio mais comuns e descobri que o nome mais solicitado era gstatic.com.  Esse √© um dos dom√≠nios em que o Google serve para fornecer informa√ß√µes est√°ticas, como arquivos CSS, imagens, JavaScript e XML. <br><br><img src="https://habrastorage.org/webt/j9/xn/vn/j9xnvn0ht-pgfpoclvyeyf9ru5a.jpeg"><br><br>  Escrevi um script para identificar poss√≠veis "transtornos" de bits nesse nome de dom√≠nio gstatic.com e recebi uma lista de todas as varia√ß√µes desse nome no total de 34 partes.  Cinco deles foram usados ‚Äã‚Äãpara fins legais, os 29 restantes estavam dispon√≠veis, ent√£o eu comprei todos eles. <br><br><img src="https://habrastorage.org/webt/e-/eo/32/e-eo32vi5w_l_cozwqd0rfmkwt0.jpeg"><br><br>  Eu imediatamente acertei o alvo.  Algu√©m estava procurando imagens no Google e o conte√∫do da solicita√ß√£o retornou para eles de alguma forma danificado, porque seu navegador me pediu para exibir uma das imagens na solicita√ß√£o.  Eu vejo o endere√ßo IP, o nome distorcido que eles solicitaram, o recurso que eles tentaram recuperar usando esta imagem, a p√°gina relacionada a esse conte√∫do e o cliente que foi usado como navegador para enviar essa solicita√ß√£o. <br><br><img src="https://habrastorage.org/webt/eu/gm/oi/eugmoimv5zvkdflbtcz4ryp1o_4.jpeg"><br><br>  Na p√°gina, voc√™ pode ver um artefato interessante na forma de uma solicita√ß√£o para um nome espec√≠fico Trisha Jones. <br><br><img src="https://habrastorage.org/webt/fr/sx/ol/frsxolhwqbwawblq6lbbxjrwy3k.jpeg"><br><br>  Al√©m disso, o n√∫mero de solicita√ß√µes aumentou, mais nomes distorcidos apareceram, mais solicita√ß√µes de imagem e mais links para a solicita√ß√£o original, como resultado da coleta de mais de 50.000 solicita√ß√µes exclusivas, e isso, como se viu, era uma ocorr√™ncia comum. <br><br><img src="https://habrastorage.org/webt/ez/o3/gz/ezo3gzhi_-vnofpq9wspmn450bw.jpeg"><br><br>  O slide mostra um pedido de uma imagem "fotografada" da atriz Selena Gomez, que causa risadas no sal√£o. <br><br>  √Äs vezes, o agachamento por batida acontece no momento certo para corresponder a uma de suas solicita√ß√µes e, se isso n√£o acontecer com muita freq√º√™ncia, voc√™ n√£o precisa se preocupar.  Mas √†s vezes isso acontece no exato momento em que h√° uma economia no disco r√≠gido, o que j√° √© mais interessante.  H√° chances de que o agachamento de bits ocorra em condi√ß√µes operacionais normais da mem√≥ria, mas √© muito prov√°vel que isso ocorra principalmente em data centers com temperatura de 95 graus. <br><br>  Agora meus logs est√£o cheios de todo o ru√≠do, recebo solicita√ß√µes distorcidas todos os dias em uma quantidade que n√£o consigo visualiz√°-los manualmente. <br><br><img src="https://habrastorage.org/webt/yh/yp/4j/yhyp4j-qevsxstztuxhg71ynn0m.jpeg"><br><br>  Portanto, escrevo scripts na tentativa de encontrar os mesmos padr√µes de consulta, e a maior que obtive foram muitas consultas da mesma imagem para o mesmo nome de dom√≠nio distorcido, e todas vieram de telefones celulares.  Recebi esses pedidos a cada poucos segundos, pois todos esses telefones tentaram usar a p√°gina de pesquisa do site do Google e pediram para fornecer uma pequena imagem do logotipo da p√°gina original. <br><br>  Encontrei um servidor Web de toda a nuvem do Google que exibia conte√∫do e distorcia constantemente o nome de dom√≠nio, apontando para um dos meus servidores, onde o logotipo com esse nome era acidental e os clientes o usavam. <br><br>  <i>O slide mostra como o logotipo da p√°gina de pesquisa do Google na tela de um dispositivo m√≥vel √© substitu√≠do pelo logotipo Occupy, o que causa uma risada apreciativa no corredor.</i> <br><br>  Por dois anos, centenas de milhares de solicita√ß√µes para esse logotipo chegaram a esse servidor com um nome DNS distorcido, em vez daquele que o Google planejava usar.  Um dia, eles pararam, pois o Google se recusou a alterar o conte√∫do dos sites para celular e esse pedido foi cancelado. <br><br>  Ent√£o, continuei estudando padr√µes de consulta e tentei descobrir outros padr√µes.  Um deles apareceu regularmente e ocorreu obviamente de uma maneira natural, ‚Äúinvertendo um pouco‚Äù na mem√≥ria, e n√£o como resultado de um erro de agachamento de bits salvo. <br><br><img src="https://habrastorage.org/webt/hl/at/-o/hlat-o_vzwxgvkkkvlmz3c7lnpq.jpeg"><br><br>  Recebi as solicita√ß√µes mostradas no pr√≥ximo slide com uma frequ√™ncia de uma por hora.  Eles n√£o pareciam familiares, todos usavam o cliente Google Feedfetcher, todos vinham de dispositivos na mesma rede e todas as solicita√ß√µes estavam relacionadas a arquivos XML.  Pesquisei um pouco e achei o Feedfetcher o mecanismo que o Google usa para capturar conte√∫do atualizado para o iGoogle, e os endere√ßos IP de origem estavam localizados na B√©lgica. <br><br><img src="https://habrastorage.org/webt/al/ql/ar/alqlarm0ctfw4yj8hns-hnyj5zc.jpeg"><br><br>  Essas solicita√ß√µes est√£o relacionadas aos servidores do Google, que s√£o usados ‚Äã‚Äãpara receber conte√∫do atualizado para v√°rios widgets que personalizam a p√°gina inicial do iGoogle, um portal pessoal da Internet. <br><br>  Cada widget √© um arquivo XML que define o conte√∫do, e o Google me pediu para fornecer esse conte√∫do aos meus servidores de apresenta√ß√£o (aplausos e risadas da plat√©ia). <br><br><img src="https://habrastorage.org/webt/wz/lg/im/wzlgim-q0pd6qyjg5fitzgcvjgm.jpeg"><br><br>  Portanto, pensei que, se o Google quisesse acidentalmente conte√∫do meu que pudesse fornecer aos usu√°rios, ele o receber√°.  Peguei os arquivos XML que o Google me perguntou e os dividi em partes.  Como voc√™ pode ver, existem duas se√ß√µes: um cabe√ßalho que descreve o m√≥dulo e um bloco C de dados compactados no c√≥digo HTML e CSS JavaScript que comp√µem o widget. <br><br><img src="https://habrastorage.org/webt/dq/me/oi/dqmeoijhs6fgla_b93rlqtpn34y.jpeg"><br><br>  Ent√£o, mudei o link para a imagem de fundo, mudei o endere√ßo de gstatic.com para grtatic.com e deixei o resto inalterado, coloquei os arquivos XML na linha de onde o Feedfetcher os obteve e esperei um pouco. <br><br><img src="https://habrastorage.org/webt/gh/xd/4b/ghxd4butfk2lis7we9oce-kma6m.jpeg"><br><br>  Quase imediatamente depois disso, o Feedfetcher solicitou arquivos XML, ap√≥s o qual comecei imediatamente a receber solicita√ß√µes de muitos endere√ßos IP do Google para esta imagem de plano de fundo. <br><br><img src="https://habrastorage.org/webt/9u/7d/lf/9u7dlfnnicox9tr7dwigqoasxge.jpeg"><br><br>  Portanto, exclu√≠ os arquivos XML modificados por mim e esperei at√© que as solicita√ß√µes parassem, mas por 35 dias consecutivos, 61 dispositivos continuavam me perguntando sobre esta imagem todos os dias.  E, mais interessante, cada um desses dispositivos era um cliente da Virgin Media no Reino Unido. <br><br><img src="https://habrastorage.org/webt/40/6y/hu/406yhuuqvt3uehxryvrqad34cuy.jpeg"><br><br>  Portanto, esse arquivo XML do Google atendeu 61 pessoas e, no ano passado, 500 IPs √∫nicos do Feedfetcher me pediram para fornecer esses m√≥dulos 15.000 vezes.  Assim, eu poderia fornecer aos meus usu√°rios algo mais prejudicial do que simplesmente substituir a imagem de plano de fundo. <br><br>  Aqui est√£o mais alguns truques que voc√™ pode fazer com o Google.  Se voc√™ n√£o souber, o Postini √© o servi√ßo recente de prote√ß√£o de spam, seguran√ßa e arquivamento de emails do Google. <br><br><img src="https://habrastorage.org/webt/9k/k6/ee/9kk6eeugcyqa86ezoolwhjnb71e.jpeg"><br><br>  Este servi√ßo permite que voc√™ altere seu DNS para indicar seu registro MX em seu dom√≠nio e fa√ßa seu dom√≠nio alterando os 4 caracteres MX antes de psmtp.com.  O mais interessante aqui √© que o dom√≠nio √© t√£o curto que voc√™ pode registrar facilmente todas as vers√µes poss√≠veis do nome com os bits "invertidos".  Outro ponto interessante √© que muitas empresas indicam seus registros MX para um √∫nico dom√≠nio e ningu√©m achou que era uma m√° id√©ia. <br><br>  Portanto, registrei apenas tr√™s poss√≠veis agachamentos para esse dom√≠nio, e o emprego do psmtp.com foi t√£o grande que os 4 slides seguintes mostram os pedidos que recebi em apenas um m√™s. <br><br><img src="https://habrastorage.org/webt/gm/uh/85/gmuh85j-12saxsc-buln1v09ddk.jpeg"><br><br><img src="https://habrastorage.org/webt/fu/lj/dc/fuljdczh5bcckphdfsrostma2lm.jpeg"><br><br>  Portanto, se voc√™ usar o correio do Postini, sua solicita√ß√£o chegar√° ao meu servidor em algum momento.  Acho que ningu√©m pode dizer que o Google n√£o fala s√©rio sobre seguran√ßa na Internet.  Mas se algu√©m se perguntasse a que problemas um superaquecimento que causa erros de mem√≥ria poderia levar, ele seria capaz de levantar a quest√£o de considerar a possibilidade de compensa√ß√£o por essas coisas.  Portanto, n√£o permita que seus nomes de dom√≠nio sejam t√£o curtos, pois isso afeta negativamente seus neg√≥cios, como o Postini, principalmente se o seu dom√≠nio for popular. <br><br>  Eu recomendo fortemente que as pessoas apliquem uma pol√≠tica interna de gerenciamento de nomes de dom√≠nio que permita corrigir erros de distor√ß√£o de nome e entender claramente como essas coisas podem afet√°-lo.  Se voc√™ possui o gstatic.com e um data center operando a uma temperatura de 95 graus, provavelmente deseja garantir que qualquer erro de agachamento de bits n√£o permita que o cliente acesse uma rede externa maliciosa. <br><br>  A prop√≥sito, entre todos os dom√≠nios que investiguei, a √∫nica empresa que registrou todas as poss√≠veis distor√ß√µes em meu pr√≥prio nome foi o Yahoo. <br><br>  Na pr√≥xima parte da apresenta√ß√£o, vou demonstrar o comportamento do DNS, que muitas pessoas, como se v√™, n√£o entendem completamente. <br><br><img src="https://habrastorage.org/webt/5l/id/3u/5lid3udte9qlatu5vhjy7w-qnr0.jpeg"><br><br>  Honestamente, a Microsoft fez um trabalho muito ruim de documenta√ß√£o, especialmente porque o comportamento do DNS geralmente muda.  Isso leva a um mal-entendido do que est√° acontecendo pelos usu√°rios finais, especialmente porque esse comportamento √© muitas vezes contradit√≥rio. <br><br>  Portanto, come√ßarei com o fato de que todos devem entender como os dispositivos devem se comportar ao consultar o DNS e o que esperar deles.  Depois, explicarei como esse comportamento se torna imprevis√≠vel ao usar os caminhos de pesquisa de sufixos DNS, como a documenta√ß√£o insuficiente afeta tudo isso e terminarei com uma breve vis√£o geral das li√ß√µes que podem ser aprendidas com tudo isso.  Mas primeiro, demonstrarei como √© perigoso para um usu√°rio final entender mal o que est√° acontecendo com o DNS. <br><br>  Assim, depois que voc√™ digitou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.google.com</a> na barra de endere√ßos do seu navegador, seu computador envia uma solicita√ß√£o ao servidor DNS local e o trabalho de encontrar o que voc√™ precisa, retornando a solicita√ß√£o e a resposta agora est√° atribu√≠do a ele.  O servidor local chama o servidor raiz para acessar o servidor .com e o servidor raiz envia para o servidor .com.  Ele verifica se o servidor local est√° autorizado para solicita√ß√µes ao google.com e o envia ao servidor ns.google.com.  Por fim, o servidor local recebe uma resposta com o endere√ßo IP do recurso necess√°rio e o envia para voc√™. <br><br><img src="https://habrastorage.org/webt/2o/z-/1s/2oz-1ssggey-ghbnfldymzelauy.jpeg"><br><br>  Esse √© o comportamento normal do DNS que todos esperam dele.  Todo mundo pensa que basta enviar uma solicita√ß√£o do dispositivo para o servidor DNS local para que ele fa√ßa todo o trabalho duro e, em seguida, obter uma resposta para sua solicita√ß√£o.  Mas nem todo mundo imagina que esse processo consiste em muitas etapas importantes. <br><br>  Por exemplo, seu dispositivo est√° tentando encontrar a resposta em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.google.com</a> , mas todo o processo, que levou at√© oito slides, s√≥ acontecer√° se voc√™ digitar exatamente esse endere√ßo na barra de consultas do navegador - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.google .com</a> .  Este √© o nome de dom√≠nio totalmente qualificado associado ao DNS raiz.  Muitas pessoas acreditam que o nome de dom√≠nio totalmente qualificado termina com um per√≠odo, o que n√£o √© verdade.  A presen√ßa de um ponto no final do nome completo ainda √© assumida e, por isso, ocorrem problemas.  Vamos tentar imprimir 4 varia√ß√µes do nome: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.google.com</a> <br>  google.com <br>  www <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.google.com</a> <br><br>  cada um dos quais se comporta de maneira diferente em rela√ß√£o ao comportamento do DNS.  Tudo isso √© personaliz√°vel, mas geralmente ningu√©m o faz. <br><br>  Vejamos o que realmente acontece nessas situa√ß√µes.  Existem v√°rios fatores que influenciam a tomada de decis√£o do cliente antes que eles decidam enviar uma consulta DNS.  Dois deles s√£o caminhos de pesquisa com sufixo e devolu√ß√£o de DNS. <br><br><img src="https://habrastorage.org/webt/qp/2_/eo/qp2_eogxid_o03m5butwxk-ahqo.jpeg"><br><br>  Ambos t√™m muitos par√¢metros personaliz√°veis ‚Äã‚Äãque afetam seu comportamento e se comportam de maneira diferente em diferentes vers√µes do Windows e em diferentes service packs. <br><br>  √â assim que a maioria das pessoas usa o sufixo do caminho de pesquisa.  Se sua empresa se chama foo e voc√™ √© o propriet√°rio do dom√≠nio foo.com, e o nome do diret√≥rio ativo √© ad.foo.com, voc√™ pode usar o sufixo dos caminhos de pesquisa ad.foo.com ou foo.com e "envi√°-lo" para a parte cliente da montagem do sistema ou em pol√≠tica de grupo. <br><br>  Se um de seus clientes tentar resolver o nome abreviado www, o comportamento padr√£o do Windows XP ser√° assim.  Primeiro, ela enviar√° uma consulta DNS pelo caminho <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.ad.foo.com</a> , depois pelo caminho <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.foo.com</a> e no final uma consulta NetBIOS seguir√° - apenas www. <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx</a> ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx</a> ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx.ad.foo.com</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx.foo.com</a> .       15 ,      NetBIOS,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx</a> . <br><br><img src="https://habrastorage.org/webt/no/_e/1b/no_e1b8sp9sson1bcnn_6niyxrq.jpeg"><br><br>    Windows,   XP sp.3,      DNS ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx</a>  NetBIOS ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx</a> ,    ,   . <br><br><img src="https://habrastorage.org/webt/6r/0u/zg/6r0uzg3wsvjgu8tawcy_qsxg7ju.jpeg"><br><br>       ,    ,   ,     ,          ,    .  , ,  Microsoft   DNS. <br><br>  XP   ,  Microsoft    XP,     DNS   Windows   DNS    .   ,    www, Windows    ,  ,    ,    DHCP     Active Directory.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.phx.ad.foo.com</a> ,    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.ad.foo.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.foo.com</a> , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.com</a>     . <br><br><img src="https://habrastorage.org/webt/ee/2q/ps/ee2qpsol_n0puvhe-8ay2ocihzq.jpeg"><br><br> 18:30  <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> DEFCON 21. DNS      .</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9Sgaq6OYLX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> ,    .    ?     ?       , <b>30%        entry-level ,      :</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps  $20     ?</a> (   RAID1  RAID10,  24    40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10 GB DDR4 240 GB SSD de 1 Gbps at√© dezembro de gra√ßa</b> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br> <b>Dell R730xd  2  ?</b>    <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2  Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100   $249</a>    !</b>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   .  c   Dell R730xd 5-2650 v4  9000   ?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430724/">https://habr.com/ru/post/pt430724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430712/index.html">NeurIPS: Como conquistar a melhor confer√™ncia de ML</a></li>
<li><a href="../pt430714/index.html">VMware compra Heptio - o que isso significa para o Kubernetes</a></li>
<li><a href="../pt430718/index.html">Para quais objetos vale a pena usar a vigil√¢ncia por v√≠deo na nuvem?</a></li>
<li><a href="../pt430720/index.html">Intel RealSense D435i: pequena atualiza√ß√£o e breve digress√£o hist√≥rica</a></li>
<li><a href="../pt430722/index.html">Desempenho do PHP: planejamento, cria√ß√£o de perfil, otimiza√ß√£o</a></li>
<li><a href="../pt430728/index.html">Ensine-me a dar feedback</a></li>
<li><a href="../pt430730/index.html">O que a P&D ABBYY faz: Grupo de Pesquisa Avan√ßada em PNL</a></li>
<li><a href="../pt430732/index.html">Para a quest√£o da divis√£o e TI</a></li>
<li><a href="../pt430734/index.html">Atualiza√ß√µes inteligentes x contratos inteligentes</a></li>
<li><a href="../pt430736/index.html">Desenvolva seu navegador a partir do zero. Parte Um: HTML</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>