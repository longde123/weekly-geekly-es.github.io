<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•¢ üåê üìå Fantastic plugins, vol. 2. Pr√°tica üßòüèº üöß üßîüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aqui voc√™ pode ler o primeiro artigo com a teoria da engenharia de plug-in. 


 E nesta parte, mostrarei quais problemas encontramos durante a cria√ß√£o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fantastic plugins, vol. 2. Pr√°tica</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hh/blog/463611/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> voc√™ pode ler o primeiro artigo com a teoria da engenharia de plug-in. </p><br><p>  E nesta parte, mostrarei quais problemas encontramos durante a cria√ß√£o do plug-in e como tentamos resolv√™-los. <br><img src="https://habrastorage.org/webt/db/cn/c-/dbcnc-m5gfz68a0hpvnt2qjdcgw.png" alt="imagem"></p><a name="habracut"></a><br><h1 id="o-chem-budu-govorit">  Sobre o que vou falar? </h1><br><ul><li>  Parte pr√°tica <br><ul><li>  UI de v√°rias p√°ginas </li><li>  DI em plugins </li><li>  Gera√ß√£o de c√≥digo </li><li>  Modifica√ß√£o de c√≥digo </li></ul></li><li>  O que fazer depois? <br><ul><li>  Dicas </li><li>  Perguntas frequentes </li></ul></li></ul><br><h2 id="mnogostranichnyy-ui">  UI de v√°rias p√°ginas </h2><br><p>  A primeira coisa que precisamos fazer foi criar uma interface de usu√°rio com v√°rias p√°ginas.  Criamos o primeiro formul√°rio complexo com v√°rias marcas de sele√ß√£o, campos de entrada.  Um pouco mais tarde, decidimos adicionar a capacidade de selecionar uma lista de m√≥dulos que o usu√°rio pode conectar ao novo m√≥dulo.  E tamb√©m queremos escolher os m√≥dulos de aplicativo aos quais planejamos conectar o m√≥dulo criado. </p><br><p>  Ter tantos controles em um formul√°rio n√£o √© muito conveniente, por isso eles criaram tr√™s p√°ginas separadas, tr√™s cortadores de biscoitos separados.  Em resumo, a caixa de di√°logo do Assistente. </p><br><p><img src="https://habrastorage.org/webt/hd/jw/wf/hdjwwfojlb6w7gj_sacdswi802g.png" alt="imagem"></p><br><p>  Mas como criar interfaces de usu√°rio de v√°rias p√°ginas em plug-ins √© muito doloroso, eu queria encontrar algo pronto.  E nas entranhas da IDEA, descobrimos uma classe chamada <em>WizardDialog</em> . </p><br><p><img src="https://habrastorage.org/webt/tl/gr/6z/tlgr6ztp3yro6-yyyqyhjsd55ky.png" alt="imagem"></p><br><p>  Esta √© uma classe de wrapper em uma caixa de di√°logo regular, monitorando independentemente o progresso do usu√°rio no assistente e mostrando os bot√µes necess√°rios (Anterior, Pr√≥ximo, Concluir etc.).  Um <em>WizardModel</em> especial <em>√©</em> anexado ao <em>WizardDialog</em> , ao qual WizardSteps individuais s√£o adicionados.  Cada <em>WizardStep</em> √© um formul√°rio separado. </p><br><p>  Na sua forma mais simples, a implementa√ß√£o do di√°logo √© a seguinte: </p><br><div class="spoiler">  <b class="spoiler_title">Assistente de di√°logo</b> <div class="spoiler_text"><pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardDialog</span></span></span></span>( model: MyWizardModel, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> onFinishButtonClickedListener: (MyWizardModel) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> ): WizardDialog&lt;MyWizardModel&gt;(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, model) { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onWizardGoalAchieved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onWizardGoalAchieved() onFinishButtonClickedListener.invoke(myModel) } }</code> </pre> </div></div><br><p>  <em>Herdaremos da</em> classe <em>WizardDialog</em> , parametrizaremos com a classe do nosso <em>WizardModel</em> .  Esta classe possui um retorno de chamada especial ( <em>onWizardGoalAchieved</em> ), que informa que o usu√°rio passou pelo assistente at√© o final e clicou no bot√£o "Concluir". <br>  √â importante observar que, dentro desta classe, h√° uma oportunidade de alcan√ßar apenas o <em>WizardModel</em> .  Isso significa que todos os dados que o usu√°rio coletar√° durante a passagem do assistente devem ser adicionados ao <em>WizardModel</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Wizardmodel</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardModel</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WizardModel</span></span></span></span>(<span class="hljs-string"><span class="hljs-string">"Title for my wizard"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep1()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep2()) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add(MyWizardStep3()) } }</code> </pre> </div></div><br><p>  O modelo √© o seguinte: herdamos da classe <em>WizardModel</em> e, usando o m√©todo <em>add</em> incorporado, <em>adicionamos</em> <em>WizardSteps</em> separados √† caixa de di√°logo. </p><br><div class="spoiler">  <b class="spoiler_title">Wizardstep</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyWizardStep1</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WizardStep</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyWizardModel</span></span></span><span class="hljs-class">&gt;</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentPanel: JPanel <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(state: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">WizardNavigationState</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: JComponent { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contentPanel } }</code> </pre> </div></div><br><p>  <em>WizardSteps</em> tamb√©m <em>s√£o</em> simples: herdar da classe <em>WizardStep</em> , parametriz√°-lo com a nossa classe model e, o mais importante, substituir o m√©todo de prepara√ß√£o, que retorna o componente raiz do seu formul√°rio futuro. </p><br><p>  Em termos simples, √© realmente assim.  Mas no mundo real, provavelmente o seu formul√°rio se parecer√° com algo assim: </p><br><p><img src="https://habrastorage.org/webt/as/6d/mc/as6dmcznqssdt7zwhdz7ndebuv8.png" alt="imagem"></p><br><p>  Aqui voc√™ pode se lembrar daqueles momentos em que no mundo Android ainda n√£o sab√≠amos o que o Clean Architecture, MVP e escrevia todo o c√≥digo em uma Atividade.  H√° um novo campo para batalhas arquitet√¥nicas e, se voc√™ quiser se confundir, poder√° implementar sua pr√≥pria arquitetura para plugins. </p><br><h3 id="vyvod">  Conclus√£o </h3><br><p>  Se voc√™ precisar de uma interface de usu√°rio de v√°rias p√°ginas, use o <em>WizardDialog</em> - ser√° mais f√°cil. </p><br><p>  Passamos ao pr√≥ximo t√≥pico - DI em plugins. </p><br><h2 id="di-v-plaginah">  DI em plugins </h2><br><p>  Por que uma inje√ß√£o de depend√™ncia dentro de um plug-in √© necess√°ria? <br>  A primeira raz√£o √© a organiza√ß√£o da arquitetura dentro do plugin. </p><br><p>  Parece, por que geralmente observa algum tipo de arquitetura dentro do plugin?  Um plug-in √© uma coisa de utilidade, uma vez que eu o escrevi, e √© isso, eu esqueci. <br>  Sim mas n√£o <br>  Quando seu plug-in cresce, quando voc√™ escreve muito c√≥digo, a quest√£o do c√≥digo estruturado surge por si s√≥.  Aqui, o DI pode ser √∫til. </p><br><p>  O segundo motivo mais importante - com a ajuda do DI, voc√™ pode acessar os componentes escritos pelos desenvolvedores de outros plugins.  Pode ser √¥nibus de eventos, registradores e muito mais. </p><br><p>  Apesar de voc√™ ser livre para usar qualquer estrutura de DI (Spring, Dagger, etc.), dentro do IntelliJ IDEA, existe sua pr√≥pria estrutura de DI, que se baseia nos tr√™s primeiros n√≠veis de abstra√ß√£o dos quais eu j√° falei: <em>Aplicativo</em> , <em>Projeto</em> e <em>M√≥dulo</em> . </p><br><p><img src="https://habrastorage.org/webt/ix/kh/dk/ixkhdkerqkc0sapkdvgj5qsg_44.png" alt="imagem"></p><br><p>  Cada um desses n√≠veis tem sua pr√≥pria abstra√ß√£o chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>Component</em></a> .  O componente do n√≠vel requerido √© criado por inst√¢ncia do objeto desse n√≠vel.  Portanto, <em>ApplicationComponent</em> √© criado uma vez para cada inst√¢ncia da classe <em>Application</em> , da mesma forma que <em>ProjectComponent</em> para inst√¢ncias do <em>Project</em> , e assim por diante. </p><br><p>  O que precisa ser feito para usar a estrutura de DI? </p><br><p>  Primeiro, crie uma classe que implemente um dos componentes de interface necess√°rios - por exemplo, uma classe que implemente <em>ApplicationComponent</em> , ou <em>ProjectComponent</em> , ou <em>ModuleComponent</em> .  Ao mesmo tempo, temos a oportunidade de injetar um objeto do n√≠vel cuja interface estamos implementando.  Ou seja, por exemplo, no <em>ProjectComponent</em> voc√™ pode injetar um objeto da classe <em>Project</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Criando classes de componentes</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAppComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> application: Application, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherApplicationComponent: AnotherAppComponent ): ApplicationComponent <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyProjectComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherProjectComponent: AnotherProjectComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent: MyAppComponent ): ProjectComponent <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyModuleComponent</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> module: Module, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anotherModuleComponent: AnotherModuleComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myProjectComponent: MyProjectComponent, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent: MyAppComponent ): ModuleComponent</code> </pre> </div></div><br><p>  Em segundo lugar, √© poss√≠vel injetar outros componentes do mesmo n√≠vel ou superior.  Ou seja, no <em>ProjectComponent</em> , por exemplo, voc√™ pode injetar outro <em>ProjectComponent</em> ou <em>ApplicationComponent</em> .  √â aqui que voc√™ pode acessar inst√¢ncias de componentes "alien√≠genas". </p><br><p>  Ao mesmo tempo, o IDEA garante que todo o gr√°fico de depend√™ncia seja montado corretamente, todos os objetos ser√£o criados na ordem correta e inicializados corretamente. </p><br><p>  A pr√≥xima coisa a fazer √© registrar o componente no arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>plugin.xml</em></a> .  Assim que voc√™ implementar uma das interfaces do componente (por exemplo, <em>ApplicationComponent</em> ), o IDEA oferecer√° imediatamente o registro do seu componente no plugin.xml. </p><br><div class="spoiler">  <b class="spoiler_title">Registrar o componente no plugin.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project-components</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">interface-class</span></span></span><span class="hljs-tag">&gt;</span></span> com.experiment.MyProjectComponent <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">interface-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">implementation-class</span></span></span><span class="hljs-tag">&gt;</span></span> com.experiments.MyProjectComponentImpl <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">implementation-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project-components</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Como isso √© feito?  Uma tag especial <em>&lt;componente de projeto&gt;</em> aparece ( <em>&lt;componente de aplicativo&gt;</em> , <em>&lt;componente de m√≥dulo&gt;</em> - dependendo do n√≠vel).  H√° uma tag dentro dela <em>, ela tem mais duas tags: <em>&lt;interface-class&gt;</em> , onde o nome da interface do seu componente √© indicado, e <em>&lt;implementation-class&gt;</em> , onde a classe de implementa√ß√£o √© indicada.</em>  <em>Uma e a mesma classe pode ser uma interface de um componente ou sua implementa√ß√£o, para que voc√™ possa fazer com uma √∫nica <em>tag &lt;implementation-class&gt;</em> .</em> <br></p><p>  A √∫ltima coisa a fazer √© obter o componente do objeto correspondente, ou seja, obtemos o <em>ApplicationComponent</em> da inst√¢ncia do <em>Application</em> , <em>ProjectComponent</em> do <em>Project</em> , etc. </p><br><div class="spoiler">  <b class="spoiler_title">Obter o componente</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myAppComponent = application.getComponent(MyAppComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myProjectComponent</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">project</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getComponent</span></span></span></span>(MyProjectComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">val</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">myModuleComponent</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">module</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getComponent</span></span></span></span>(MyModuleComponent::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">)</span></span></code> </pre> </div></div><br><h3 id="vyvody">  Conclus√µes </h3><br><ol><li>  Existe uma estrutura DI dentro do IDEA - n√£o √© necess√°rio arrastar nada por conta pr√≥pria: nem Dagger nem Spring.  Embora, √© claro, voc√™ possa. </li><li>  Com este DI, voc√™ pode alcan√ßar os componentes prontos, e esse √© o pr√≥prio suco. </li></ol><br><p>  Vamos para a terceira tarefa - gera√ß√£o de c√≥digo. </p><br><h2 id="generaciya-koda">  Gera√ß√£o de c√≥digo </h2><br><p>  Lembre-se, na lista de verifica√ß√£o, tivemos a tarefa de gerar muitos arquivos?  Cada vez que criamos um novo m√≥dulo, criamos um monte de arquivos: interatores, apresentadores, fragmentos.  Ao criar um novo m√≥dulo, esses componentes s√£o muito semelhantes entre si e eu gostaria de aprender como gerar essa estrutura automaticamente. </p><br><h3 id="shablony">  Padr√µes </h3><br><p>  Qual √© a maneira mais f√°cil de gerar uma tonelada de c√≥digo semelhante?  Use padr√µes.  Primeiro, voc√™ precisa examinar seus modelos e entender quais requisitos s√£o apresentados ao gerador de c√≥digo. </p><br><div class="spoiler">  <b class="spoiler_title">Uma parte do modelo de arquivo build.gradle</b> <div class="spoiler_text"><pre> <code class="java hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.library'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isKotlinProject) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-kapt'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModuleWithUI) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> }&gt; }&gt; ... android { ... &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isMoxyEnabled) { kapt { arguments { arg(<span class="hljs-string"><span class="hljs-string">"moxyReflectorPackage"</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;include var="packageName"&gt;'</span></span>) } } }&gt; ... } ... dependencies { <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':common'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">':core-utils'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> &lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(moduleName in enabledModules)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'&lt;include var="moduleName"&gt;'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }&gt; ... }</span></span></code> </pre> </div></div><br><p>  Primeiro: quer√≠amos poder usar condi√ß√µes dentro desses padr√µes.  Dou um exemplo: se o plugin estiver de alguma forma conectado √† interface do usu√°rio, queremos conectar o plugin especial do Gradle, <em>kotlin-android-extensions</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Condi√ß√£o dentro do modelo</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isKotlinProject) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-kapt'</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isModuleWithUI) { apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> }&gt; }&gt;</code> </pre> </div></div><br><p>  A segunda coisa que queremos √© a capacidade de usar uma vari√°vel dentro deste modelo.  Por exemplo, quando configuramos o kapt para Moxy, queremos inserir o nome do pacote como argumento no processador de anota√ß√µes. </p><br><div class="spoiler">  <b class="spoiler_title">Substitua o valor da vari√°vel dentro do modelo</b> <div class="spoiler_text"><pre> <code class="java hljs">kapt { arguments { arg(<span class="hljs-string"><span class="hljs-string">"moxyReflectorPackage"</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;include var="packageName"&gt;'</span></span>) } }</code> </pre> </div></div><br><p>  Outra coisa que precisamos √© a capacidade de lidar com loops dentro do modelo.  Lembra-se do formul√°rio em que selecionamos a lista de m√≥dulos que queremos conectar ao novo m√≥dulo que est√° sendo criado?  Queremos contorn√°-los em loop e adicionar a mesma linha. </p><br><div class="spoiler">  <b class="spoiler_title">Use o loop no modelo.</b> <div class="spoiler_text"><pre> <code class="java hljs">&lt;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (moduleName in enabledModules) { <span class="hljs-function"><span class="hljs-function">compileOnly </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">project</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'&lt;include var="moduleName"&gt;'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> }&gt;</span></span></code> </pre> </div></div><br><p>  Assim, propusemos tr√™s condi√ß√µes para o gerador de c√≥digo: </p><br><ul><li>  Queremos usar as condi√ß√µes </li><li>  Capacidade de substituir valores vari√°veis </li><li>  Precisamos de loops em padr√µes </li></ul><br><h3 id="generatory-koda">  Geradores de c√≥digo </h3><br><p>  Quais s√£o as op√ß√µes para implementar o gerador de c√≥digo?  Voc√™ pode, por exemplo, escrever seu pr√≥prio gerador de c√≥digo.  Por exemplo, os caras do Uber fizeram o seguinte: eles criaram seu pr√≥prio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-in para gerar riblets</a> (as chamadas unidades arquitet√¥nicas).  Eles criaram <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sua pr√≥pria linguagem de modelo</a> , na qual usavam apenas a capacidade de inserir vari√°veis.  Eles trouxeram as condi√ß√µes ao <a href="">n√≠vel do gerador</a> .  Mas pensamos que n√£o far√≠amos isso. </p><br><p>  A segunda op√ß√£o √© usar a classe de utilit√°rio FileTemplateManager incorporada ao IDEA, mas eu n√£o recomendaria isso.  Porque ele tem o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Velocity</a> como um mecanismo, que tem alguns problemas com o encaminhamento de objetos Java para modelos.  Al√©m disso, o <em>FileTemplateManager</em> n√£o pode gerar arquivos diferentes de Java ou XML a partir da caixa.  E precis√°vamos gerar arquivos Groovy, Kotlin, Proguard e outros tipos de arquivos. </p><br><p>  A terceira op√ß√£o foi ... <em>FreeMarker</em> .  Se voc√™ possui modelos <em>FreeMarker</em> prontos, n√£o se apresse em jog√°-los fora - eles podem ser √∫teis para voc√™ dentro do plug-in. </p><br><p>  O que precisa ser feito, o que usar o <em>FreeMarker</em> dentro do plugin?  Primeiro, adicione modelos de arquivo.  Voc√™ pode criar a pasta <em>/ templates</em> dentro da pasta <em>/ resources</em> e adicionar todos os nossos modelos para todos os arquivos - apresentadores, fragmentos etc. </p><br><p><img src="https://habrastorage.org/webt/gk/ww/fe/gkwwfelyl443hdze6vd6a99ecmw.png" alt="imagem"></p><br><p>  Depois disso, voc√™ precisar√° adicionar uma depend√™ncia na biblioteca do FreeMarker.  Como o plug-in usa o Gradle, a adi√ß√£o de uma depend√™ncia √© simples. </p><br><div class="spoiler">  <b class="spoiler_title">Adicionar uma depend√™ncia na biblioteca FreeMarker</b> <div class="spoiler_text"><pre> <code class="java hljs">dependencies { ... compile <span class="hljs-string"><span class="hljs-string">'org.freemarker:freemarker:2.3.28'</span></span> }</code> </pre> </div></div><br><p>  Depois disso, configure o FreeMarker dentro do nosso plugin.  Aconselho que voc√™ simplesmente copie essa configura√ß√£o aqui - ela √© torturada, sofrida, copiada e tudo funciona. </p><br><div class="spoiler">  <b class="spoiler_title">Configura√ß√£o do FreeMarker</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplatesFactory</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project) : ProjectComponent { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> freeMarkerConfig <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> lazy { Configuration(Configuration.VERSION_2_3_28).apply { setClassForTemplateLoading( TemplatesFactory::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">"/templates" ) defaultEncoding = Charsets.UTF_8.name</span></span></span></span>() templateExceptionHandler = TemplateExceptionHandler.RETHROW_HANDLER logTemplateExceptions = <span class="hljs-literal"><span class="hljs-literal">false</span></span> wrapUncheckedExceptions = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } ...</code> </pre> </div></div><br><p>  √â hora de criar arquivos usando o <em>FreeMarker</em> .  Para fazer isso, obtemos um modelo da configura√ß√£o pelo nome e, usando um <em>FileWriter</em> comum, criamos um arquivo com o texto desejado diretamente no disco. </p><br><div class="spoiler">  <b class="spoiler_title">Criando um arquivo atrav√©s do FileWriter</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplatesFactory</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> project: Project) : ProjectComponent { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( pathToFile: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, templateFileName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">data</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Any&gt; )</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = freeMarkerConfig.getTemplate(templateFileName) FileWriter(pathToFile, <span class="hljs-literal"><span class="hljs-literal">false</span></span>).use { writer -&gt; template.process(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>, writer) } } }</code> </pre> </div></div><br><p>  E a tarefa parece estar resolvida, mas n√£o.  Na parte te√≥rica, mencionei que toda a IDEA est√° permeada pela estrutura do PSI, e isso deve ser levado em considera√ß√£o.  Se voc√™ criar arquivos ignorando a estrutura PSI (por exemplo, atrav√©s do FileWriter), o IDEA simplesmente n√£o entender√° que voc√™ criou algo e n√£o exibir√° os arquivos na √°rvore do projeto.  Esperamos cerca de sete minutos antes da IDEA ser indexada e ver os arquivos criados. </p><br><p>  Conclus√£o - fa√ßa certo, crie arquivos, levando em considera√ß√£o a estrutura do PSI. </p><br><h3 id="sozdaem-psi-strukturu-dlya-faylov">  Crie uma estrutura PSI para arquivos </h3><br><p>  Para come√ßar, <a href="">vimos a</a> estrutura de pastas usando o <a href="">PsiDirectory</a> .  O diret√≥rio inicial do projeto pode ser obtido usando as fun√ß√µes de extens√£o <em>guessProjectDir</em> e <em>toPsiDirectory</em> : </p><br><div class="spoiler">  <b class="spoiler_title">Obtenha o projeto PsiDirectory</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> projectPsiDirectory = project.guessProjectDir()?.toPsiDirectory(project)</code> </pre> </div></div><br><p>  Os diret√≥rios subsequentes podem ser encontrados usando o m√©todo da classe <em>PsiDirectory</em> <em>findSubdirectory</em> ou criados usando o m√©todo <em>createSubdirectory</em> . </p><br><div class="spoiler">  <b class="spoiler_title">Encontre e crie PsiDirectory</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> coreModuleDir = projectPsiDirectory.findSubdirectory(<span class="hljs-string"><span class="hljs-string">"core"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newModulePsiDir = coreModuleDir.createSubdirectory(config.mainParams.moduleName)</code> </pre> </div></div><br><p>  Tamb√©m recomendo que voc√™ crie um <em>mapa a</em> partir do qual √© poss√≠vel obter todas as estruturas de pastas do <em>PsiDirectory</em> usando uma chave de cadeia e, em seguida, adicione os arquivos criados a qualquer uma dessas pastas. </p><br><div class="spoiler">  <b class="spoiler_title">Criar um mapa da estrutura de pastas</b> <div class="spoiler_text"><p>  return mutableMapOf &lt;String, PsiDirectory?&gt; (). apply { <br>  this ["root"] = modulePsiDir <br>  this ["src"] = modulePsiDir.createSubdirectory ("src") <br>  this ["main"] = this ["src"]?. createSubdirectory ("main") <br>  this ["java"] = this ["main"]?. createSubdirectory ("java") <br>  this ["res"] = this ["main"]?. createSubdirectory ("res") </p><br><pre> <code class="plaintext hljs">//   PsiDirectory   package name: // ru.hh.feature_worknear ‚Üí ru / hh / feature_worknear createPackageNameFolder(config) // data this["data"] = this["package"]?.createSubdirectory("data") // ...</code> </pre> <br><p>  } </p></div></div><br><p>  Pastas criadas.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Criaremos PsiFiles</a> usando <a href="">PsiFileFactory</a> .  Esta classe possui um m√©todo especial chamado <em>createFileFromText</em> .  O m√©todo aceita tr√™s par√¢metros como entrada: nome (String fileName), texto (String text) e tipo (FileType fileType) do arquivo de sa√≠da.  Dois dos tr√™s par√¢metros s√£o claros onde obt√™-lo: n√≥s sabemos o nome, obtemos o texto do FreeMarker.  E onde conseguir o <em>FileType</em> ?  E o que √© isso tudo? </p><br><h3 id="filetype">  Tipo de arquivo </h3><br><p>  <a href=""><em>FileType</em></a> √© uma classe especial que indica o tipo de arquivo.  Somente dois FileType est√£o dispon√≠veis para n√≥s na "caixa": JavaFileType e XmlFileType, respectivamente para arquivos Java e XML.  Mas surge a pergunta: onde obter os tipos para o arquivo <em>build.gradle</em> , para os arquivos <em>Kotlin</em> , para <em>Proguard</em> , para <em>.gitignore</em> , finalmente ?! </p><br><p>  Primeiro, a maioria desses <em>FileType</em> s pode ser obtida de outros plug-ins que j√° foram escritos por algu√©m.  GroovyFileType pode ser obtido no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-in Groovy</a> , KotlinFileType no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-in Kotlin</a> , Proguard no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plug-in Android</a> . </p><br><p>  Como adicionamos a depend√™ncia de outro plugin ao nosso?  Usamos <em>gradle-intellij-plugin</em> .  Ele adiciona um bloco intellij especial ao arquivo build.gradle do plug-in, dentro do qual h√° uma propriedade especial - <em>plugins</em> .  Nesta propriedade, voc√™ pode listar a lista de identificadores de plug-in dos quais queremos depender. </p><br><div class="spoiler">  <b class="spoiler_title">Adicionar depend√™ncias em outros plugins</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// build.gradle  intellij { ‚Ä¶ plugins = ['android', 'Groovy', 'kotlin'] }</span></span></code> </pre> </div></div><br><p>  Pegamos as chaves do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio</a> oficial do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plugin JetBrains</a> .  Para plug-ins criados no IDEA (que s√£o Groovy, Kotlin e Android), o nome da pasta do plug-in no IDEA √© suficiente.  Quanto ao restante, voc√™ precisa ir para a p√°gina de um plug-in espec√≠fico no reposit√≥rio oficial do plug-in JetBrains, a propriedade <em>ID XML</em> do <em>plug</em> - <em>in</em> ser√° indicada l√°, assim como a vers√£o (por exemplo, aqui est√° a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√°gina do plug-in Docker</a> ).  Leia mais sobre como conectar outros plugins <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">no GitHub</a> . </p><br><p>  Em segundo lugar, voc√™ precisa adicionar uma descri√ß√£o de depend√™ncia ao arquivo <em>plugin.xml</em> .  Isso √© feito usando a tag <br></p><div class="spoiler">  <b class="spoiler_title">Conectamos plugins em plugin.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span>org.intellij.groovy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">depends</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">idea-plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Depois de sincronizar o projeto, restringiremos as depend√™ncias de outros plugins e poderemos us√°-las. </p><br><p>  Mas e se n√£o quisermos depender de outros plugins?  Nesse caso, podemos criar um esbo√ßo para o tipo de arquivo que precisamos.  Para fazer isso, primeiro crie uma classe que herdar√° da classe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><em>Language</em></a> .  O identificador exclusivo da nossa linguagem de programa√ß√£o ser√° passado para esta classe (no nosso caso - <strong>"ru.hh.plugins.Ignore"</strong> ). </p><br><div class="spoiler">  <b class="spoiler_title">Crie um idioma para arquivos GitIgnore</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgnoreLanguage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">private</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">constructor</span></span></span></span>() : Language(<span class="hljs-string"><span class="hljs-string">"ru.hh.plugins.Ignore"</span></span>, <span class="hljs-string"><span class="hljs-string">"ignore"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>), InjectableLanguage { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> INSTANCE = IgnoreLanguage() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDisplayName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Ignore() (</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">)"</span></span> } }</code> </pre> </div></div><br><p>  H√° um recurso aqui: alguns desenvolvedores adicionam uma linha n√£o exclusiva como um identificador.  Por esse motivo, a integra√ß√£o do seu plug-in com outros plug-ins pode ser interrompida.  N√≥s somos √≥timos, temos uma linha √∫nica. </p><br><p>  A pr√≥xima coisa a fazer depois que criamos o <em>idioma</em> √© criar um <em>FileType</em> .  Herdamos da classe <em>LanguageFileType</em> , usamos a inst√¢ncia de idioma que definimos para inicializar, substituindo alguns m√©todos muito simples.  Feito.  Agora podemos usar o <em>FileType</em> rec√©m-criado. </p><br><div class="spoiler">  <b class="spoiler_title">Crie seu pr√≥prio FileType para .gitignore</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IgnoreFileType</span></span></span></span>(language: Language) : LanguageFileType(language) { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> INSTANCE = IgnoreFileType(IgnoreLanguage.INSTANCE) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore file"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDescription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore files"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefaultExtension</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = <span class="hljs-string"><span class="hljs-string">"gitignore"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIcon</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Icon? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre></div></div><br><h3 id="zavershaem-sozdanie-fayla">  Concluir a cria√ß√£o do arquivo </h3><br><p>  Depois de encontrar todos os <em>FileType</em> s necess√°rios, recomendo criar um cont√™iner especial chamado <em>TemplateData</em> - ele conter√° todos os dados sobre o modelo do qual voc√™ deseja gerar c√≥digo.  Ele conter√° o nome do arquivo de modelo, o nome do arquivo de <em>sa√≠da</em> obtido ap√≥s a gera√ß√£o do c√≥digo, o <em>FileType</em> desejado e <em>,</em> finalmente, o <em>PsiDirectory</em> , onde voc√™ adiciona o arquivo criado. </p><br><div class="spoiler">  <b class="spoiler_title">TemplateData</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TemplateData</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> templateFileName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFileName: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFileType: FileType, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> outputFilePsiDirectory: PsiDirectory? )</code> </pre> </div></div><br><p>  Em seguida, retornamos ao <em>FreeMarker</em> - obtemos o arquivo de modelo, usando <em>StringWriter</em> , obtemos o texto; no <em>PsiFileFactory,</em> geramos o <em>PsiFile</em> com o texto e o tipo desejados.  O arquivo criado √© adicionado ao diret√≥rio desejado. </p><br><div class="spoiler">  <b class="spoiler_title">Crie PsiFile na pasta desejada</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createFromTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">data</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">FileTemplateData</span></span></span></span><span class="hljs-function"><span class="hljs-params">, properties: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Any&gt;)</span></span></span></span>: PsiFile { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = freeMarkerConfig.getTemplate(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.templateFileName) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = StringWriter().use { writer -&gt; template.process(properties, writer) writer.buffer.toString() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> psiFileFactory.createFileFromText(<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.outputFileName, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>.outputFileType, text) }</code> </pre> </div></div><br><p>  Assim, a estrutura PSI √© levada em considera√ß√£o e o IDEA, assim como outros plugins, ver√° o que fizemos.  Pode haver lucro com isso: por exemplo, se o plug-in do Git perceber que voc√™ adicionou um novo arquivo, ele exibir√° automaticamente uma caixa de di√°logo perguntando se voc√™ deseja adicionar esses arquivos ao Git? </p><br><h3 id="vyvody-pro-generaciyu-koda">  Conclus√µes da gera√ß√£o de c√≥digo </h3><br><ul><li>  Arquivos de texto podem ser gerados pelo FreeMarker.  Muito confort√°vel </li><li>  Ao gerar arquivos, √© necess√°rio considerar a estrutura PSI; caso contr√°rio, tudo dar√° errado. </li><li>  Se voc√™ deseja gerar arquivos usando o PsiFileFactory, ter√° que encontrar o FileType em algum lugar. </li></ul><br><p>  Bem, agora passamos para a √∫ltima, a parte pr√°tica mais deliciosa - esta √© uma modifica√ß√£o do c√≥digo. </p><br><h2 id="modifikaciya-koda">  Modifica√ß√£o de c√≥digo </h2><br><p>  De fato, criar um plug-in apenas para gerar c√≥digo n√£o faz sentido, porque voc√™ pode gerar c√≥digo com outras ferramentas e com o mesmo <em>FreeMarker</em> .  Mas o que o <em>FreeMarker</em> n√£o pode fazer √© modificar o c√≥digo. </p><br><p>  Nossa lista de verifica√ß√£o possui v√°rias tarefas relacionadas √† modifica√ß√£o do c√≥digo, vamos come√ßar pela mais simples - modificar o arquivo <em>settings.gradle</em> . </p><br><h3 id="modifikaciya-settingsgradle">  Modifica√ß√µes settings.gradle </h3><br><p>  Deixe-me lembr√°-lo do que queremos fazer: precisamos adicionar algumas linhas neste arquivo que descrever√£o o caminho para o m√≥dulo rec√©m-criado: </p><br><div class="spoiler">  <b class="spoiler_title">Descri√ß√£o do caminho para o m√≥dulo</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// settings.gradle include ':analytics project(':analytics').projectDir = new File(settingsDir, 'core/framework-metrics/analytics) ... include ':feature-worknear' project(':feature-worknear').projectDir = new File(settingsDir, 'feature/feature-worknear')</span></span></code> </pre> </div></div><br><p>  Assustei um pouco mais cedo que voc√™ sempre deve levar em conta a estrutura PSI ao trabalhar com arquivos, caso contr√°rio <del>  tudo vai queimar </del>  n√£o vai funcionar.  De fato, em tarefas simples, como adicionar algumas linhas ao final de um arquivo, voc√™ pode fazer isso.  Voc√™ pode adicionar algumas linhas ao arquivo usando o <em>java.io.File</em> usual.  Para fazer isso, localizamos o caminho para o arquivo, criamos a inst√¢ncia <em>java.io.File</em> e, usando as fun√ß√µes de <em>extens√£o</em> Kotlin, adicionamos duas linhas ao final deste arquivo.  Voc√™ pode fazer isso, o IDEA ver√° suas altera√ß√µes. </p><br><div class="spoiler">  <b class="spoiler_title">Adicionando linhas ao arquivo settings.gradle</b> <div class="spoiler_text"><p>  val projectBaseDirPath = project.basePath ?: return <br>  val settingsPathFile = projectBaseDirPath + "/settings.gradle" </p><br><p>  val settingsFile = Arquivo (settingsPathFile) </p><br><p>  settingsFile.appendText ("include ': $ moduleName'") <br>  settingsFile.appendText ( <br>  "project (': $ moduleName'). projectDir = novo arquivo (settingsDir, '$ folderPath')" <br>  ) </p></div></div><br><p>  Bem, idealmente, √© claro, √© melhor atrav√©s da estrutura do PSI - √© mais confi√°vel. </p><br><h3 id="donastroyka-kapt-a-dlya-toothpick">  Ajuste do Kapt para Palito </h3><br><p>  Mais uma vez, lembro o problema: no m√≥dulo do aplicativo, h√° um arquivo <em>build.gradle</em> e, dentro dele, h√° configura√ß√µes para o processador de anota√ß√µes.  E queremos adicionar um pacote do nosso m√≥dulo criado a um local espec√≠fico. </p><br><div class="spoiler">  <b class="spoiler_title">Para onde?</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/jt/hv/1b/jthv1bxuiigvexnvwnrvzs41wh8.png" alt="imagem"></p></div></div><br><p>  Nosso objetivo √© encontrar um <em>PsiElement</em> espec√≠fico, ap√≥s o qual planejamos adicionar nossa linha.  A busca pelo elemento come√ßa com a busca pelo <em>PsiFile</em> , que significa o arquivo <em>build.gradle</em> do m√≥dulo de aplicativo.  E para isso, voc√™ precisa encontrar o m√≥dulo dentro do qual procuraremos o arquivo. </p><br><div class="spoiler">  <b class="spoiler_title">Estamos √† procura de um m√≥dulo por nome</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = ModuleManager.getInstance(project) .modules.toList() .first { it.name == <span class="hljs-string"><span class="hljs-string">"headhunter-applicant"</span></span> }</code> </pre> </div></div><br><p>  Em seguida, usando a classe de utilit√°rio <em>FilenameIndex,</em> voc√™ pode encontrar <em>PsiFile</em> por seu nome, especificando o m√≥dulo encontrado como a √°rea de pesquisa. </p><br><div class="spoiler">  <b class="spoiler_title">Procurando por PsiFile por nome</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> buildGradlePsiFile = FilenameIndex.getFilesByName( appModule.project, <span class="hljs-string"><span class="hljs-string">"build.gradle"</span></span>, appModule.moduleContentScope ).first()</code> </pre> </div></div><br><p>  Depois de encontrarmos o PsiFile, podemos come√ßar a procurar o PsiElement.   ,      ‚Äì <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PSI Viewer</a> .     IDEA  ,    PSI-  . </p><br><p><img src="https://habrastorage.org/webt/sd/nl/ac/sdnlac9nrqcqqt14wtrhohr9pf8.png" alt="imagem"></p><br><p>    -  (, build.gradle)        ,      PSI-   . </p><br><p><img src="https://habrastorage.org/webt/gt/et/xo/gtetxo8_4hbk0gzzfty7p_zmawu.png" alt="imagem"></p><br><p>    ‚Äì   ,        <em>PsiFile</em> -. </p><br><p>    .   <em>PsiFile</em> .            . </p><br><div class="spoiler"> <b class="spoiler_title">  PsiElement</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> toothpickRegistryPsiElement = buildGradlePsiFile.originalFile .collectDescendantsOfType&lt;GrAssignmentExpression&gt;() .firstOrNull { it.text.startsWith(<span class="hljs-string"><span class="hljs-string">"arguments"</span></span>) } ?.lastChild ?.children?.firstOrNull { it.text.startsWith(<span class="hljs-string"><span class="hljs-string">"toothpick_registry_children_package_names"</span></span>) } ?.collectDescendantsOfType&lt;GrListOrMap&gt;() ?.first() ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p><del>  ?.. </del>   ?          PSI-.        <em>GrAssignmentExpression</em> ,   ,    <em>arguments = [ ‚Ä¶ ]</em> .      ,      <em>toothpick_registry_children_package_names = [...]</em> ,       Groovy-. </p><br><p>    <em>PsiElement</em> ,   .            .      . </p><br><p>     PSI- ,       <em>PsiElementFactory</em>   ,    .  Java-?    Java-.   Groovy?  <em>GroovyPsiElementFactory</em> .  E assim por diante </p><br><p>  <em>PsiElementFactory</em>       .       Groovy  Kotlin ,        . </p><br><div class="spoiler"> <b class="spoiler_title"> PsiElement  package name</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> factory = GroovyPsiElementFactory.getInstance(buildGradlePsiFile.project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packageName = config.mainParams.packageName <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newArgumentItem = factory.createStringLiteralForReference(packageName)</code> </pre> </div></div><br><p>         <em>PsiElement</em> . </p><br><div class="spoiler"> <b class="spoiler_title">   Map-</b> <div class="spoiler_text"><pre> <code class="kotlin hljs">targetPsiElement.add(newArgumentItem)</code> </pre> </div></div><br><h3 id="donastroyka-kapt-a-dlya-moxy-v-application-module">  kapt-  Moxy  application  </h3><br><p>    -,    , ‚Äì  kapt-  Moxy  application .  :          <em>@RegisterMoxyReflectorPackages</em> . </p><br><div class="spoiler"> <b class="spoiler_title">-?</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/us/17/in/us17inlvgteb4k9pmegkurtl7y8.png" alt="imagem"></p></div></div><br><p>         ,  :  <em>PsiFile</em> ,  <em>PsiElement</em> ,  ‚Ä¶      ,         <em>PsiElement</em> -. </p><br><p>     :  ,    <em>@RegisterMoxyReflectorPackages</em> ,       <em>value</em>  ,          . </p><br><p>    ,       . ,     <em>PsiManager</em> ,   <em>PsiClass</em>  . </p><br><div class="spoiler"> <b class="spoiler_title"> PsiClass  @RegisterMoxyReflectorPackages</b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> appModule = ModuleManager.getInstance(project) .modules.toList() .first { it.name == <span class="hljs-string"><span class="hljs-string">"headhunter-applicant"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> psiManager = PsiManager.getInstance(appModule.project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotationPsiClass = ClassUtil.findPsiClass( psiManager, <span class="hljs-string"><span class="hljs-string">"com.arellomobile.mvp.RegisterMoxyReflectorPackages"</span></span> ) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p>     <em>AnnotatedMembersSearch</em>   ,      . </p><br><div class="spoiler"> <b class="spoiler_title"> ,  </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotatedPsiClass = AnnotatedMembersSearch.search( annotationPsiClass, appModule.moduleContentScope ).findAll() ?.firstOrNull() ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span></code> </pre> </div></div><br><p>  ,  <em>PsiElement</em>  ,        value.     ,      . </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> annotationPsiElement = (annotatedPsiClass .annotations .first() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> KtLightAnnotationForSourceEntry ).kotlinOrigin <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packagesPsiElements = annotationPsiElement .collectDescendantsOfType&lt;KtValueArgumentList&gt;() .first() .collectDescendantsOfType&lt;KtValueArgument&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> updatedPackagesList = packagesPsiElements .mapTo(mutableListOf()) { it.text } .apply { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> += <span class="hljs-string"><span class="hljs-string">"\"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${config.packageName}</span></span></span><span class="hljs-string">\""</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newAnnotationValue = updatedPackagesList.joinToString(separator = <span class="hljs-string"><span class="hljs-string">",\n"</span></span>)</code> </pre> </div></div><br><p>   <em>KtPsiFactory</em>   <em>PsiElement</em> ‚Äì          . </p><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> kotlinPsiFactory = KtPsiFactory(project) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newAnnotationPsiElement = kotlinPsiFactory.createAnnotationEntry( <span class="hljs-string"><span class="hljs-string">"@RegisterMoxyReflectorPackages(\n</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$newAnnotationValue</span></span></span><span class="hljs-string">\n)"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> replaced = annotationPsiElement.replace(newAnnotationPsiElement)</code> </pre> </div></div><br><p>  . </p><br><p>     ?    code style.  ,      IDEA    : CodeStyleManager. </p><br><div class="spoiler"> <b class="spoiler_title"> code style</b> <div class="spoiler_text"><pre> <code class="kotlin hljs">CodeStyleManager.getInstance(module.project).reformat(replacedElement)</code> </pre> </div></div><br><p>    -  ,     . </p><br><h3 id="vyvody-1">  </h3><br><ul><li>     ,      PSI-,      . </li><li> ,  PSI     ,    ,    PsiElement-. </li></ul><br><h1 id="chto-delat-dalshe">   ? </h1><br><p>   . </p><br><ul><li>      ‚Äì    ,       . </li><li>       .       .   :            . </li><li>     ?      .  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   IDEA</a>   ,   .       ,        . ‚Äî   -  ,    GitHub  .  ,    ,  . </li><li>    -   ‚Äì    IntelliJ IDEA   .  ,   <em>Util</em>  <em>Manager</em> ,  ,    ,    . </li><li>   :     .  ,  <em>runIde</em> ,     IDEA,   .   ,           hh.ru,       . </li></ul><br><p>  S√≥ isso. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a> ,  ,   ‚Äì . </p><br><h2 id="faq">  Perguntas frequentes </h2><br><ul><li>       ? </li></ul><br><p>       ,       .      ,   2  3 . </p><br><ul><li>       IDEA   ,   -  ? </li></ul><br><p> ,    IDEA   IDEA SDK ,   deprecated,   ,  .   SDK-   ,   ,     . </p><br><ul><li>         ? </li></ul><br><p>    ‚Äì    gitignore .   -   . </p><br><ul><li>          ? </li></ul><br><p>      Android Studio  Mac OS,    Ubuntu,   . ,     Windows,    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463611/">https://habr.com/ru/post/pt463611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463599/index.html">‚ÄúIsso √© um pesadelo‚Äù: astronautas compartilham opini√µes sobre os erros de Hollywood ao gravar filmes sobre o espa√ßo</a></li>
<li><a href="../pt463601/index.html">Log de m√©todo separado em Java / logback</a></li>
<li><a href="../pt463605/index.html">A intelligentsia t√©cnica - do espa√ßo profundo</a></li>
<li><a href="../pt463607/index.html">Alternativa interna do Redux com contexto de rea√ß√£o e ganchos</a></li>
<li><a href="../pt463609/index.html">Sistema de recomenda√ß√£o para o Directum Club. Parte Um, Colaborativa</a></li>
<li><a href="../pt463613/index.html">As imagens do Docker tamb√©m podem ser constru√≠das no werf usando o Dockerfile usual</a></li>
<li><a href="../pt463617/index.html">Recursos de teste do MMO m√≥vel</a></li>
<li><a href="../pt463619/index.html">Trabalhe remotamente: nossa experi√™ncia</a></li>
<li><a href="../pt463623/index.html">Somos selecionados na selva de testes: estamos construindo um curto caminho desde os equipamentos at√© os testes</a></li>
<li><a href="../pt463625/index.html">Monitoramento de rede e detec√ß√£o de atividade de rede anormal usando as solu√ß√µes da Flowmon Networks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>