<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§Ωüèø ü§∞üèº üë®üèø‚Äçüíª Reliure DNS en 2k19, ou comment vraiment transpirer en visitant un site porno üöΩ üèòÔ∏è üïµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Aujourd'hui, nous aimerions parler d'une attaque ancienne et presque oubli√©e appel√©e rebinding DNS. La premi√®re discussion √† ce sujet ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reliure DNS en 2k19, ou comment vraiment transpirer en visitant un site porno</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/fbk_cs/blog/439522/"><p><img src="https://habrastorage.org/webt/ro/dg/v9/rodgv9iuu_71gel5eqwpydcaj9m.jpeg"></p><br><p>  Bonjour √† tous!  Aujourd'hui, nous aimerions parler d'une attaque ancienne et presque oubli√©e appel√©e rebinding DNS.  La premi√®re discussion √† ce sujet a commenc√© en 2007, mais les experts du domaine de la s√©curit√© des informations pratiques n'y ont pas pr√™t√© l'attention voulue en ce qui concerne les particularit√©s du fonctionnement de cette attaque, ainsi que peu de cons√©quences tangibles, comme il semblait alors.  Aujourd'hui, nous allons essayer de les convaincre du contraire, et vous, en particulier, en d√©montrant que dans le monde moderne cette attaque a trouv√© un second souffle et ne semble plus si inoffensive. </p><a name="habracut"></a><br><h2 id="chto-takoe-dns-rebinding">  Qu'est-ce que la reliure DNS? </h2><br><p>  Consid√©rez le sch√©ma suivant: </p><br><p><img src="https://habrastorage.org/webt/sr/w6/i8/srw6i8sjgtnecyqfkq6sfndcvrs.png"></p><br><p>  Nous avons un ordinateur de victime avec IP 192.168.0.2 sur le r√©seau local, et il a √©galement un routeur avec l'adresse IP 192.168.0.1.  Le but de l'attaquant g√©rant le serveur avec l'adresse 13.37.13.37 et le nom de domaine hacker.com (√©galement, notre propre serveur DNS contenant des informations sur le domaine tourne sur l'ip-shnik) est d'acc√©der au routeur sur le r√©seau local. </p><br><p>  Pour utiliser la technique de reliure DNS, nous devons attirer la victime sur notre site malveillant.  Supposons que nous ayons r√©ussi. </p><br><p>  Examinons maintenant en d√©tail le fonctionnement de l'attaque. </p><br><p>  Tout d'abord, le navigateur acc√®de aux serveurs DNS avec une demande d'enregistrement A: </p><br><p><img src="https://habrastorage.org/webt/ry/op/4y/ryop4y_9c5m0goj-iygirncutbm.png"></p><br><p>  La cha√Æne de serveurs DNS m√®ne √† notre serveur, qui, √† son tour, donne une r√©ponse standard contenant la v√©ritable adresse IP du site malveillant, et indique √©galement le TTL dont nous avons besoin, dans ce cas 59. </p><br><p><img src="https://habrastorage.org/webt/18/yt/k9/18ytk9njpok5flotf7axbydovpy.png"></p><br><p>  Ensuite, le navigateur fait une requ√™te HTTP standard pour l'IP re√ßue. </p><br><p><img src="https://habrastorage.org/webt/lc/e8/xd/lce8xd7yfinhsyodhqxtpa8yerm.png"></p><br><p>  √Ä l'√©tape suivante, le serveur r√©pond avec une page HTML avec du code javascript acc√©dant √† notre propre domaine. </p><br><p><img src="https://habrastorage.org/webt/ix/r6/h1/ixr6h19bqirekyafut2tlstyfgc.png"></p><br><p>  Maintenant, jusqu'√† ce que le TTL expire et que l'utilisateur soit sur le site, le javascript re√ßu ci-dessus sera ex√©cut√©.  Une fois le TTL termin√©, le navigateur demandera √† nouveau un enregistrement A. </p><br><p><img src="https://habrastorage.org/webt/-n/1b/dx/-n1bdxxgxatewjyou0gdfxkiv1w.png"></p><br><p>  √Ä l'heure actuelle, notre javascript continue de fonctionner et le serveur DNS que nous g√©rons r√©pondra par un enregistrement A avec une adresse IP du r√©seau local o√π l'attaquant souhaite se rendre. </p><br><p><img src="https://habrastorage.org/webt/mw/pg/lc/mwpglcv_8-ydxsitnzv86gugvqo.png"></p><br><p>  √âtant donn√© que le domaine, le port et le protocole restent inchang√©s, le SOP n'est pas viol√© et, par cons√©quent, le navigateur acc√®de au domaine pew.hacker.com, cependant, il frappera d√©j√† le routeur convoit√© et inaccessible. </p><br><p><img src="https://habrastorage.org/webt/-c/df/qk/-cdfqkxy1xyjp6gftrd9wmtg6wy.png"></p><br><p>  En cons√©quence, nous recevons calmement une r√©ponse du routeur et la redirige vers nous-m√™mes en incorporant la fonctionnalit√© correspondante dans le code javascript charg√© plus t√¥t. </p><br><p><img src="https://habrastorage.org/webt/se/5o/wf/se5owf2cq4n0o8kzxdu-d583kno.png"></p><br><p><img src="https://habrastorage.org/webt/f4/s2/br/f4s2brt6sckd8lf6__rlrpdw5me.png"></p><br><p>  Donc, r√©sumons ce qui pr√©c√®de: </p><br><ul><li>  L'utilisateur visite le site, re√ßoit une v√©ritable adresse IP et un court TTL </li><li>  Sur le site, le navigateur appelle le m√™me domaine o√π se trouve l'utilisateur.  D√®s que le cache expire, le navigateur demande √† nouveau l'IP du domaine. </li><li>  De plus, notre serveur DNS √©met au lieu de la vraie adresse, l'adresse IP du service interne (dans notre cas, le routeur) </li><li>  Apr√®s que la demande passe par le domaine au routeur, et le r√©sultat nous est envoy√© par le javascript pr√©charg√© par l'utilisateur √† l'avance. </li></ul><br><p>  Nous l'avons compris!  Beaucoup peuvent avoir une question raisonnable: ¬´Et alors?¬ª, Car pour le fonctionnement, vous devez conna√Ætre les adresses IP internes des services, garder l'utilisateur pendant un certain temps, etc. </p><br><p>  Oui, cependant, avec l'av√®nement des services de streaming, de l'h√©bergement vid√©o, des bons vieux sites pornographiques et d'autres plateformes o√π les gens pendent pendant longtemps, l'attaquant aura assez de temps pour mener l'attaque.  Quant aux adresses, elles sont souvent standard ou facilement pr√©visibles. </p><br><p>  Mais c'est tout en th√©orie, mais qu'en pratique?  Nous avons s√©lectionn√© les 4 domaines les plus pertinents en 2019, o√π il y a eu des incidents li√©s √† l'attaque de reliure DNS, √† savoir: </p><br><ul><li>  IoT </li><li>  Portefeuilles Crypto </li><li>  Applications bureautiques </li><li>  Les nuages </li></ul><br><p>  Examinons chaque sujet dans l'ordre et d√©couvrons si tout est vraiment si inoffensif? </p><br><h2 id="iot">  Iot </h2><br><h3 id="google-home">  Accueil Google </h3><br><p><img src="https://habrastorage.org/webt/xk/uj/oh/xkujohaktco1mi9aau3im3fjk7e.png"></p><br><p>  Google home est un assistant intelligent de Google.  Cet appareil poss√®de (ou avait dans le pass√©) une API qui ne n√©cessite aucune authentification pour contr√¥ler l'appareil.  Il fournit un certain nombre de fonctionnalit√©s, telles que: </p><br><ul><li>  Lecture de contenu </li><li>  Num√©riser </li><li>  Red√©marrer </li><li>  Connexion aux r√©seaux WIFI, etc. </li></ul><br><p>  Exemple de sc√©nario d'attaque: un attaquant peut deanonymiser un utilisateur en obtenant les coordonn√©es des points WIFI les plus proches.  De toute √©vidence, aucun VPN ne peut vous sauver. </p><br><h3 id="sonos-wifi-speakers">  Enceintes Wi-Fi Sonos </h3><br><p><img src="https://habrastorage.org/webt/mw/bo/xr/mwboxrh0zhpjewbcxgrw6kn4krg.png"></p><br><p>  Ces colonnes de Sonos √©l√®vent un serveur Web sur le r√©seau local UPnP, qui donne acc√®s √† un certain nombre de pages int√©ressantes: </p><br><ul><li>  192.168.1.76:1400/support/review - crache la sortie de certaines commandes UNIX </li><li>  192.168.1.76:1400/tools - vous permet d'ex√©cuter certaines commandes UNIX </li></ul><br><p>  Dans ce cas, l'attaquant a la possibilit√© d'ex√©cuter la commande traceroute pour scanner la topologie du r√©seau interne. </p><br><h3 id="radio-thermostat-ct50">  Radio Thermostat CT50 </h3><br><p><img src="https://habrastorage.org/webt/0f/uh/b9/0fuhb9kozjqucxdf9v-qxz1rvgc.png"></p><br><p>  C'est l'un de nos cas pr√©f√©r√©s.  Ce mod√®le de thermostat dispose √©galement d'une API sans aucune autorisation et vous permet de modifier: </p><br><ul><li>  Mode climatique </li><li>  La temp√©rature </li><li>  Mode r√©tro√©clairage et autres param√®tres </li></ul><br><p>  En cons√©quence, un attaquant peut faire transpirer beaucoup sa victime, mais s√©rieusement, une telle attaque sur un thermostat, par exemple dans un √©tablissement m√©dical, peut entra√Æner des cons√©quences plut√¥t d√©sagr√©ables. </p><br><h3 id="roku-tv">  Roku tv </h3><br><p><img src="https://habrastorage.org/webt/h3/7g/2d/h37g2dtzcz-6yiq0wqjuytjl0rw.png"></p><br><p>  Les t√©l√©viseurs Roku ont toujours la m√™me maladie - une API sans authentification. </p><br><p>  L'API vous permet de: </p><br><ul><li>  Ex√©cutez diverses applications </li><li>  Lire le contenu </li><li>  Effectuer des requ√™tes de recherche sur le syst√®me, etc. </li></ul><br><p>  Dans ce cas, le maximum qui menace l'utilisateur est la fuite de donn√©es sensibles, ce qui est √©galement d√©sagr√©able. </p><br><h3 id="lyuboy-wi-fi-router">  Tout routeur WIFI </h3><br><p><img src="https://habrastorage.org/webt/c_/nk/xe/c_nkxekprqwfkc8uzoj1theepz0.png"></p><br><p>  Presque tout le monde a aujourd'hui cet appareil IoT.  Ce n'est un secret pour personne que de nombreux utilisateurs ordinaires ne modifient pas les mots de passe standard √† partir des panneaux d'administration de leurs routeurs.  Avec l'aide de la reliure DNS, rien ne nous emp√™che d'essayer de vous connecter avec des informations d'identification standard et d'acc√©der au panneau d'administration.  Si l'adresse IP locale est introuvable, WebRTC vient √† la rescousse. </p><br><h3 id="itog-po-iot">  R√©sum√© IoT </h3><br><p>  Nous mettons en √©vidence certaines des fonctionnalit√©s fournies par la reliure DNS lorsque vous travaillez avec l'IoT: </p><br><ul><li>  Possibilit√© de deanonymiser l'utilisateur </li><li>  Possibilit√© de scanner un r√©seau local </li><li>  Utilisateur simul√© </li><li>  Tout, selon la fonctionnalit√© de l'appareil IoT </li></ul><br><h2 id="crypto-wallets">  Portefeuilles Crypto </h2><br><h3 id="geth">  Geth </h3><br><p>  Parlons maintenant des portefeuilles de crypto-monnaie.  Le premier cas examin√© est un client de portefeuilles Ethereum appel√© Geth.  Ici, la bo√Æte de Pandore est dans le service JSON-RPC.  Pour commencer, essayons de comprendre ce que c'est.  JSON-RPC est un protocole d'appel de proc√©dure √† distance au format JSON.  Tout ressemble √† ceci: </p><br><p><img src="https://habrastorage.org/webt/5x/lj/0u/5xlj0ui1rjzvur8roy4oflnpsiu.png"></p><br><p> La plupart des clients ex√©cutent ce service sur localhost: 8545, et √† son tour, il fournit un ensemble de fonctions int√©ressantes, telles que <code>eth_sendTransaction</code> et ainsi de suite. </p><br><p>  Maintenant, un exemple de la fa√ßon dont vous pouvez obtenir son solde et son adresse de portefeuille √† l'insu de l'utilisateur et en utilisant l'attaque de reliure DNS: </p><br><p><img src="https://habrastorage.org/webt/je/oj/om/jeojomqmheqktoigqvdzftukgky.png"></p><br><h3 id="eosio-keosd-wallet">  Portefeuille EOSIO Keosd </h3><br><p>  Ensuite, nous avons un client pour les portefeuilles EOSIO.  Keosd lui-m√™me d√©marre sur localhost: 8900 et signe automatiquement toutes les actions d'application pendant 15 minutes apr√®s la saisie des donn√©es d'autorisation.  Apr√®s avoir plong√© dans l'API, vous pouvez √† nouveau trouver des fonctionnalit√©s int√©ressantes.  Pour plus de clart√©, en utilisant la demande ci-dessous, vous pouvez obtenir la cl√© publique de l'utilisateur: </p><br><p><img src="https://habrastorage.org/webt/eu/8o/w0/eu8ow0zlacnzorfnqy_mwf1adpc.png"></p><br><h3 id="itog-po-crypto-wallets">  R√©sum√© des portefeuilles Crypto: </h3><br><ul><li>  un attaquant peut voler de l'argent aux utilisateurs </li><li>  un attaquant peut modifier divers param√®tres utilisateurs </li><li>  la possibilit√© de d√©sanonymiser l'utilisateur </li></ul><br><h2 id="desktop-applications">  Applications bureautiques </h2><br><h3 id="transmission-client">  Client de transmission </h3><br><p>  Je voudrais commencer le bloc d'incidents li√©s aux applications Desktop avec une vuln√©rabilit√© relativement sensationnelle dans le client Transmission torrent. </p><br><p>  Ici, le probl√®me r√©side dans le m√™me JSON-RPC, que nous avons examin√© un peu plus haut.  Dans ce cas, il vous permet de modifier les param√®tres utilisateur, par exemple, de changer le dossier de t√©l√©chargement des fichiers: </p><br><p><img src="https://habrastorage.org/webt/km/ot/fr/kmotfrugolntjfkm9l9s-obaw6g.png"></p><br><p>  D'une part, cela ne semble rien de grave, mais si vous sp√©cifiez le partage smb contr√¥l√© par l'attaquant au lieu du dossier (si le client utilise le client Windows), vous pouvez intercepter le hachage utilisateur, qui pourra √™tre utilis√© √† l'avenir. </p><br><h3 id="utorrent-web-client">  Client Web uTorrent </h3><br><p>  Ce camarade a dans son arsenal le m√™me service JSON-RPC qui vous permet de modifier les fichiers de configuration utilisateur, ainsi que de t√©l√©charger des fichiers. </p><br><p>  L'authentification est requise dans ce cas, mais les informations d'identification sont disponibles sur <code>http://localhost:19575/users.conf</code> .  Comment cela peut-il √™tre utilis√©? </p><br><p>  Tout d'abord, faites la demande suivante: </p><br><p><img src="https://habrastorage.org/webt/zw/hd/c5/zwhdc5xvr-guzsxhnbpddipajck.png"></p><br><p>  Apr√®s avoir re√ßu le jeton, nous modifions le dossier de t√©l√©chargement dans le dossier o√π se trouvent les programmes qui s'ex√©cutent au d√©marrage du syst√®me: </p><br><p><img src="https://habrastorage.org/webt/wm/qm/ds/wmqmdsmi-zd-t4s3jhg-ehs71um.png"></p><br><p>  Et enfin, nous donnons la commande de t√©l√©charger la charge utile n√©cessaire: </p><br><p><img src="https://habrastorage.org/webt/z_/n7/rf/z_n7rfmj1ot8lnyc5op7yukhmn0.png"></p><br><p>  En cons√©quence, <code>evil.exe</code> sera lanc√© apr√®s le prochain red√©marrage. </p><br><h3 id="minikube">  Minikube </h3><br><p>  Minikube est un utilitaire de ligne de commande pour configurer et ex√©cuter un cluster Kubernetes monomode dans une machine virtuelle sur l'ordinateur local. </p><br><p>  Il se bloque toujours sur 192.168.99.100 et l'interface Web est disponible sur le port 3000.  En cons√©quence, un attaquant a la possibilit√© de cr√©er un conteneur illicite avec un dossier partag√© avec le syst√®me principal. </p><br><p>  Tout d'abord, vous devez obtenir le jeton csrf. </p><br><p><img src="https://habrastorage.org/webt/p1/km/nr/p1kmnrq8b3wpp_gvlijlyw-dctg.png"></p><br><p>  Ensuite, vous devez cr√©er un conteneur, et pour cela, envoyez la demande suivante: </p><br><p><img src="https://habrastorage.org/webt/zo/yw/hb/zoywhbt3hwo_prfodgovvznth-e.png"></p><br><p>  Voyons voir ce qu'il fait.  Dans celui-ci, nous indiquons que lors du d√©marrage du conteneur, nous devons transmettre le shell inverse, et √©galement monter le dossier Utilisateurs √† partir du syst√®me principal: </p><br><p><img src="https://habrastorage.org/webt/rr/ll/jl/rrlljlnmmi_0fsb_slpehnzpoh4.png"></p><br><h3 id="ruby-on-rails">  Ruby on Rails </h3><br><p>  Il existe un joyau pour le framework Ruby on Rails qui vous permet d'ex√©cuter du code Ruby directement dans le navigateur. </p><br><p><img src="https://habrastorage.org/webt/hj/ij/yn/hjijync3otkaeg025phetqwedcm.png"></p><br><p>  Essayons de comprendre ce dont nous avons besoin pour cela? </p><br><p>  Nous devons d'abord aller sur une page inexistante: </p><br><p><img src="https://habrastorage.org/webt/kr/tn/xh/krtnxhmsl0ebss-4smhhd2otbzq.png"></p><br><p>  Ensuite, nous essayons d'acc√©der √† la console via le navigateur: </p><br><p><img src="https://habrastorage.org/webt/ou/bg/wp/oubgwpkdiof-enlikzm0sq0djns.png"></p><br><p>  Enfin, nous formons une demande de lancement de l'application calculatrice (dans cet exemple, le vecteur pour MAC OS X): </p><br><p><img src="https://habrastorage.org/webt/hq/kl/eg/hqklegn3xqxh-zgkhk-yv1mrrlw.png"></p><br><h3 id="blizzard-desktop-application">  Application de bureau Blizzard </h3><br><p>  Non seulement les d√©veloppeurs et les utilisateurs r√©guliers sont sensibles √† une attaque comme la reliure DNS, mais aussi les joueurs.  Ici, nous rencontrons √† nouveau un probl√®me de service JSON-RPC qui sort dans ce cas sur localhost sur le port 1120.  Le service permet d'effectuer des mises √† jour, de modifier les param√®tres et d'autres options de maintenance diverses. </p><br><p>  Dans ce cas, l'authentification est prise en charge, mais la transmettre en effectuant des requ√™tes depuis localhost n'est pas difficile: </p><br><p><img src="https://habrastorage.org/webt/j-/vy/my/j-vymyf0n5t-wtfnwwl4azfjptc.png"></p><br><p>  En cons√©quence, vous pouvez r√©aliser quelque chose de similaire: </p><br><p><img src="https://habrastorage.org/webt/o2/iz/wk/o2izwke9cng_-db0zz2chaxpwe8.png"></p><br><p>  Plus de d√©tails peuvent √™tre trouv√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><h3 id="itog-po-desktop-application">  R√©sum√© de l'application de bureau: </h3><br><ul><li>  un attaquant peut obtenir RCE sur le syst√®me principal (n'oubliez pas non plus VM Escape) </li><li>  un attaquant pourrait acc√©der √† des donn√©es sensibles, etc. </li></ul><br><h2 id="clouds">  Les nuages </h2><br><p>  Eh bien, et enfin, la chose la plus int√©ressante reste - les nuages.  L'essentiel est que les services cloud sont souvent utilis√©s pour h√©berger des logiciels qui analysent les utilisateurs qui viennent sur le site.  Par exemple, en cliquant sur le lien de l'en-t√™te Referer avec un navigateur sans t√™te pour analyser la ressource √† partir de laquelle le client est all√© sur le site.  Ce vecteur d'attaque peut √©galement √™tre utilis√©, car en substance, un navigateur sans t√™te est un navigateur Web √† part enti√®re sans interface graphique, mais avec prise en charge de DOM, JS et tout le reste. </p><br><p>  Revenons √† nos b√©liers, que pouvons-nous faire dans ce cas?  En effet, pour une attaque, il faut retarder l'utilisateur (dans ce cas, le bot) sur la page.  Eh bien, pour cela, nous pouvons utiliser une image sur la page qui a une longueur de contenu de plus qu'elle ne l'est r√©ellement.  En cons√©quence, le bot pensera que l'image n'a pas encore √©t√© t√©l√©charg√©e et persistera sur notre page, puis nous utilisons notre technique de reliure DNS standard. </p><br><p>  Par cons√©quent, puisque nous enverrons des demandes √† partir d'un proxy, nous pouvons faire beaucoup de choses amusantes.  Par exemple: </p><br><ul><li>  analyser le r√©seau interne </li><li>  se connecter aux services internes (th√©oriquement) </li><li>  voler les donn√©es d'autorisation d'autres services, etc. </li></ul><br><p>  Allons directement sur Amazon.  AWS EC2 poss√®de des fonctionnalit√©s telles que le service de m√©tadonn√©es d'instance.  Il permet √† toute entit√© EC2 d'utiliser l'API REST situ√©e au 169.254.169.254, qui r√©v√®le des informations sur l'instance. </p><br><p>  Par exemple, voici une courte liste de services similaires pour diff√©rents clouds: </p><br><ul><li>  <strong>AWS</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://169.254.169.254/latest/user-data</a> </li><li>  <strong>Google Cloud</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://169.254.169.254/computeMetadata/v1/</a> </li><li>  <strong>Oc√©an num√©rique</strong> <a href="">http://169.254.169.254/metadata/v1.json</a> </li><li>  <strong>OpenStack / RackSpace</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://169.254.169.254/openstack</a> </li><li>  <strong>Azure</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://169.254.169.254/metadata/instance</a> </li><li>  <strong>Oracle Cloud</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://169.254.169.254/opc/v1/instance/</a> </li></ul><br><p>  Voyons maintenant un cas dans lequel nous nous livrons √† AWS. </p><br><p>  Tout d'abord, laissez le bot faire une demande √† l'API: </p><br><p><img src="https://habrastorage.org/webt/z1/-o/is/z1-ois7mddxwr0p5g5uluv7r8fa.png"></p><br><p>  Dans la r√©ponse, nous pouvons obtenir des informations confidentielles, par exemple, des cr√©dits dans un script qui s'ex√©cute au d√©marrage de la machine: </p><br><p><img src="https://habrastorage.org/webt/7j/hh/9d/7jhh9dzzznnbn6telzsx0thw4aa.png"></p><br><p>  Ensuite, nous pouvons extraire le nom du n≈ìud avec lequel nous continuerons √† travailler: </p><br><p><img src="https://habrastorage.org/webt/e0/30/-w/e030-wpnsjyjtp75xssqozkyreg.png"></p><br><p>  Ensuite, nous ferons l'appel suivant par le nom d√©j√† connu et - bingo! </p><br><p><img src="https://habrastorage.org/webt/cx/c1/x4/cxc1x4gdjj2_zmbws1n7rwmjkas.png"></p><br><p><img src="https://habrastorage.org/webt/re/cb/el/recbelcpwknvcdfx9qqcum90spw.png"></p><br><p>  Nous avons re√ßu diverses informations sur les utilisateurs, telles que AccessKeyId, SecretAccessKey, Token, etc. </p><br><p>  Apr√®s avoir re√ßu ces donn√©es, nous pouvons les utiliser pour autorisation via le client de la console: </p><br><p><img src="https://habrastorage.org/webt/iz/sk/oq/izskoqkfrdvdg0ovbnf578vqhhg.png"></p><br><h3 id="obschiy-itog">  Le r√©sultat total: </h3><br><p>  Soulignons les points faibles communs que nous avons remarqu√©s lors de l'utilisation d'une attaque de reliure DNS: </p><br><ul><li>  API sans authentification </li><li>  Services locaux sans authentification </li><li>  Ignorer le param√®tre Host √† demander </li><li>  Utiliser http au lieu de https </li></ul><br><p>  Ainsi, malgr√© divers arguments d'experts dans le domaine de la s√©curit√© des informations pratiques, une attaque de ce type est n√©e de nouveau √† l'√®re de l'IoT, des services cloud, des crypto-monnaies et ainsi de suite, m√™me malgr√© la n√©cessit√© de retarder le client du c√¥t√© de l'attaquant, car dans le monde des cin√©mas en ligne, l'h√©bergement vid√©o et d'autres services qui fournissent du contenu √† l'utilisateur, il n'est pas difficile de le faire.  Par cons√©quent, soyez prudent lorsque vous voyagez dans le monde en ligne, lors de l'achat d'un autre assistant intelligent et lors du d√©veloppement, bien s√ªr. </p><br><h3 id="istochniki">  Sources: </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://medium.com/@brannondorsey/attacking-private-networks-from-the-internet-with-dns-rebinding-ea7098a2d325</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://blog.hacker.af/how-your-ethereum-can-be-stolen-using-dns-rebinding</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://medium.com/coinmonks/the-call-is-coming-from-inside-the-house-dns-rebinding-in-eosio-keosd-wallet-e11deae05974</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/transmission/transmission/pull/468</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://labs.mwrinfosecurity.com/advisories/minikube-rce/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">http://benmmurphy.github.io/blog/2016/07/11/rails-webconsole-dns-rebinding/</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://bugs.chromium.org/p/project-zero/issues/detail?id=1471&amp;desc=3#maincol</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://labs.mwrinfosecurity.com/blog/from-">https://labs.mwrinfosecurity.com/blog/from-http-referer-to-aws-security-credentials/</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr439522/">https://habr.com/ru/post/fr439522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr439512/index.html">L'√¢ge des dinosaures ou la r√©assurance l√©galement v√©rifi√©e?</a></li>
<li><a href="../fr439514/index.html">R√©plication de Tarantool: configuration et utilisation</a></li>
<li><a href="../fr439516/index.html">00110001 00110100 00101110 00110000 00110010</a></li>
<li><a href="../fr439518/index.html">Programme de formation au d√©veloppement Web mis √† jour par GeekUniversity: plus de pratiques et de cas de club de livraison</a></li>
<li><a href="../fr439520/index.html">Proof-of-Stake: nouveau business model en 2019?</a></li>
<li><a href="../fr439524/index.html">Fortnite est l'avenir, mais pour des raisons plut√¥t inattendues</a></li>
<li><a href="../fr439526/index.html">Les op√©rateurs de t√©l√©communications m√®neront des ¬´essais sur le terrain¬ª de la loi sur la durabilit√© de Runet</a></li>
<li><a href="../fr439528/index.html">Suivi des appels sans frais</a></li>
<li><a href="../fr439532/index.html">Nouveaut√©s de JavaScript ES2019</a></li>
<li><a href="../fr439534/index.html">Programmation des rendements et utilisation de drones dans la production de p√©trole - 10 conf√©rences de la conf√©rence GIS Tech Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>