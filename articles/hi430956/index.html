<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯФП ЁЯУМ ЁЯТВ рд╣рдо рдЕрдкрдиреЗ рдЖрдк рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рдФрд░ рдЙрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП monoids рдкрд░ рдПрдХ рд╕реБрдЕрд░ рд╕рд┐рдЦрд╛рддреЗ рд╣реИрдВ тЖЧя╕П ЁЯНЦ ЁЯдЬЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ, рдореИрдВрдиреЗ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдХрд┐ рдЖрдк рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдФрд░ рднрд╛рд╖рд╛-рдЙрдиреНрдореБрдЦ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрдЯреИрдХ рдорд╢реАрди рдХреЗ рд▓рд┐рдП рдк...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╣рдо рдЕрдкрдиреЗ рдЖрдк рдкрд░ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░рдиреЗ рдФрд░ рдЙрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП monoids рдкрд░ рдПрдХ рд╕реБрдЕрд░ рд╕рд┐рдЦрд╛рддреЗ рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430956/"><p> рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦреЛрдВ рдореЗрдВ рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ</a> рдореЗрдВ, рдореИрдВрдиреЗ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХреА рдХрд┐ рдЖрдк рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдФрд░ рднрд╛рд╖рд╛-рдЙрдиреНрдореБрдЦ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд░реНрдЪреБрдЕрд▓ рд╕реНрдЯреИрдХ рдорд╢реАрди рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЧреНрд░рд╛рдо рдирд┐рд╖реНрдкрд╛рджрдХ рдХреИрд╕реЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рднрд╛рд╖рд╛ рдХреА рдЧрдгрд┐рддреАрдп рд╕рдВрд░рдЪрдирд╛ рдиреЗ рдЕрдкрдиреЗ рдЕрдиреБрд╡рд╛рджрдХ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдореВрд▓ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛, рдЬреЛ рдХрд┐ рдЕрд░реНрдзрд╡реГрддреНрдд рдФрд░ рдореЛрдиреЙрдпрдб рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдиреЗ рдореБрдЭреЗ рдПрдХ рд╕реБрдВрджрд░ рдФрд░ рд╡рд┐рд╕реНрддрд╛рд░ рдпреЛрдЧреНрдп рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рдФрд░ рддрд╛рд▓рд┐рдпреЛрдВ рдХреЛ рддреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА, рд▓реЗрдХрд┐рди рджрд░реНрд╢рдХреЛрдВ рдХреЗ рдкрд╣рд▓реЗ рд╕рд╡рд╛рд▓ рдиреЗ рдореБрдЭреЗ рд░реЛрд╕реНрдЯреНрд░рдо рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдФрд░ рдЗрдореИрдХ рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдЪрдврд╝ рдЧрдпрд╛ред </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/n2/ln/ne/n2lnneohm_d4rsc-qkw_n4cguyw.png" width="80%"></div><br><p>  рдореИрдВрдиреЗ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдФрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд┐рдпрд╛ рдХрд┐ рдХреЗрд╡рд▓ рд╕реНрдЯреИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рд░рд▓ рдХрд╛рд░реНрдпреЛрдВ рдкрд░, рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рд╕реНрдорд╛рд░реНрдЯ рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИ, рдФрд░ "рдореЗрдореЛрд░реА" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп - рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдкрд╣реБрдВрдЪ рд╡рд╛рд▓реА рдПрдХ рд╕рд░рдгреА - рдмрдбрд╝реА рд╕рдорд╕реНрдпрд╛рдПрдВ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИрдВред  рд╣рдо рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рдмреБрдирд┐рдпрд╛рджреА рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рдмрд┐рдирд╛ рдЙрдиреНрд╣реЗрдВ рд╣рд▓ рдХрд░рдиреЗ рдореЗрдВ рдХреИрд╕реЗ рдХрд╛рдордпрд╛рдм рд░рд╣реЗ рдФрд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдПрдХ рд╣рдЬрд╛рд░ рдЧреБрдирд╛ рддреНрд╡рд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рд╣рдо рдЗрд╕ рд▓реЗрдЦ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░реЗрдВрдЧреЗред </p><a name="habracut"></a><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mo>&amp;#x2217;</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.681ex" height="1.335ex" viewBox="0 -520.7 2445.9 574.6" role="img" focusable="false" style="vertical-align: -0.125ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMAIN-2217" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMAIN-2217" x="972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMAIN-2217" x="1945" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo>тИЧ</mo><mtext>&nbsp;</mtext><mo>тИЧ</mo><mtext>&nbsp;</mtext><mo>тИЧ</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> * \ * \ * </script></p><br><p>  рд╣рд╛рд╕реНрдХреЗрд▓ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЖрд▓рд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдЕрдЬреАрдм рднрд╛рд╖рд╛ рд╣реИред  рдЗрд╕рдХреЗ рдирд┐рд░реНрдорд╛рдг рдФрд░ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдореБрдЦреНрдп рд▓рдХреНрд╖реНрдп рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рд╡реНрдпрдХреНрдд рдХрд░рдиреЗ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд┐рдВрдЧреБрдЖ рдлреНрд░реЗрдВрдХрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред  рдпрд╣ рдЗрд╕рдХреА рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд╕рд╣реА рдард╣рд░рд╛рддрд╛ рд╣реИ: рдЖрд▓рд╕реНрдп, рдЕрддреНрдпрдВрдд рдкрд╡рд┐рддреНрд░рддрд╛, рдЙрдирдХреЗ рд╕рд╛рде рдкреНрд░рдХрд╛рд░ рдФрд░ рдЬреЛрдбрд╝рддреЛрдбрд╝ рдкрд░ рдЬреЛрд░ред  рдЗрд╕реЗ рд░реЛрдЬрдорд░реНрд░рд╛ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рдФрджреНрдпреЛрдЧрд┐рдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рди рдХрд┐ рд╡реНрдпрд╛рдкрдХ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдПред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдиреЗрдЯрд╡рд░реНрдХ рдЙрджреНрдпреЛрдЧ рдореЗрдВ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдбреЗрдЯрд╛ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдореЗрдВ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреА рд╕рджреНрднрд╛рд╡рдирд╛ рд╣реИ, рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛ рдкреНрд░рдорд╛рдг, рдпрджрд┐ рдЖрдк рдЪрд╛рд╣реЗрдВред  рд▓реЗрдХрд┐рди рдЕрдм рддрдХ, рд╣рд╛рд╕реНрдХреЗрд▓ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг, рд╡реНрдпрд╛рдкрдХ рд░реВрдк рд╕реЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рдФрд░ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд░реВрдк рд╕реЗ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЙрддреНрдкрд╛рдж рд╣реИ ... ghc рд╕рдВрдХрд▓рдХред  рдФрд░ рдпрд╣ рдЕрдкрдиреЗ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЙрдЪрд┐рдд рд╣реИ - рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬреНрдЮрд╛рди рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЕрдиреБрд╕рдВрдзрд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдХрд░рдг рд╣реЛрдирд╛ред  рд╕рд╛рдЗрдорди рдкрд╛рдпрдЯрди-рдЬреЙрдирд╕рди рджреНрд╡рд╛рд░рд╛ рдШреЛрд╖рд┐рдд рд╕рд┐рджреНрдзрд╛рдВрдд: "рд╣рд░ рдХреАрдордд рдкрд░ рд╕рдлрд▓рддрд╛ рд╕реЗ рдмрдЪреЗрдВ" рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдЙрдкрдХрд░рдг рдмрдиреЗ рд░рд╣рдиреЗ рдХреЗ рд▓рд┐рдП рднрд╛рд╖рд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд╣рд╛рд╕реНрдХреЗрд▓ рдЕрд░реНрдзрдЪрд╛рд▓рдХ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпреЛрдВ рдпрд╛ рдиреИрдиреЛрдореАрдЯрд░реЛрдВ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдПрдХ рдЕрдиреБрд╕рдВрдзрд╛рди рдХреЗрдВрджреНрд░ рдХреА рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛ рдореЗрдВ рдПрдХ рдмрд╛рдБрдЭ рдХрдХреНрд╖ рдХреА рддрд░рд╣ рд╣реИред  рдЗрд╕рдореЗрдВ рдХрд╛рдо рдХрд░рдирд╛ рдмрд╣реБрдд рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдФрд░ рд░реЛрдЬрдорд░реНрд░рд╛ рдХреЗ рдЕрднреНрдпрд╛рд╕ рдХреЗ рд▓рд┐рдП рдпрд╣ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рдХреЛ рднреА рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрди рдЕрд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛, рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд┐рдП рдмрд┐рдирд╛, рд╕реВрдХреНрд╖реНрдо рдкреНрд░рднрд╛рд╡реЛрдВ рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рдФрд░ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдЬреЛ рдмрд╛рдж рдореЗрдВ рдФрджреНрдпреЛрдЧрд┐рдХ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЖрдзрд╛рд░ рдмрди рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕реА рд╕рдордп, рдЙрджреНрдпреЛрдЧ рдореЗрдВ рдмрд╛рдБрдЭрдкрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗрд╡рд▓ рд╕рдмрд╕реЗ рдЖрд╡рд╢реНрдпрдХ рдорд╛рддреНрд░рд╛ рдореЗрдВ рд╣реЛрдЧреА, рдФрд░ рдЗрди рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдЧреИрдЬреЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд╣рдорд╛рд░реА рдЬреЗрдм рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗред  рд╣рдо рд╕рд┐рддрд╛рд░реЛрдВ рдФрд░ рдЖрдХрд╛рд╢рдЧрдВрдЧрд╛рдУрдВ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рддреЗ рд╣реИрдВ рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЙрдирд╕реЗ рдкреНрд░рддреНрдпрдХреНрд╖ рд▓рд╛рдн рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдЗрд╕рд▓рд┐рдП рдХрд┐ рдЗрди рдЕрд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдкреИрдорд╛рдиреЗ рдкрд░, рдХреНрд╡рд╛рдВрдЯрдо рдФрд░ рд╕рд╛рдкреЗрдХреНрд╖рддрд╛рд╡рд╛рджреА рдкреНрд░рднрд╛рд╡ рдЕрд╡рд▓реЛрдХрдиреАрдп рдФрд░ рдЕрдзреНрдпрдпрди рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЗрддрдирд╛ рд╣реА рдирд╣реАрдВ рдХрд┐ рдмрд╛рдж рдореЗрдВ рд╣рдо рдЗрд╕ рдЬреНрдЮрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреБрдЫ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧрд┐рддрд╛рд╡рд╛рджреА рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рддреЛ рд╣рд╛рд╕реНрдХреЗрд▓ рдЕрдкрдиреА "рдЧрд▓рдд" рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рд╕рд╛рде, рдЧрдгрдирд╛рдУрдВ рдХреЗ рдЕрд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЖрд▓рд╕реНрдп, рдПрдХ рдЕрддреНрдпрдВрдд рдЦрдбрд╝реА рдЗрдирдкреБрдЯ рд╡рдХреНрд░ рдХреЗ рд╕рд╛рде рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрд╡рд┐рд╖реНрдХрд╛рд░ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреА рдХрдареЛрд░рддрд╛, рдЖрдЦрд┐рд░рдХрд╛рд░ рдЖрдкрдХреЛ рдШреБрдЯрдиреЗ рдпрд╛ рдПрдХ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реНрдорд╛рд░реНрдЯ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд▓реЗрдВрд╕, рдореЛрдирд╛рдбреНрд╕, рдХреЙрдореНрдмреАрдиреЗрдЯрд░рд┐рдпрд▓ рдкрд╛рд░реНрд╕рд┐рдВрдЧ, рдореЛрдиреЙрдЗрдб рдХрд╛ рд╡реНрдпрд╛рдкрдХ рдЙрдкрдпреЛрдЧ, рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдкреНрд░рдореЗрдп рд╕рд╛рдмрд┐рдд рдХрд░рдиреЗ рдХреЗ рддрд░реАрдХреЗ, рдШреЛрд╖рд┐рдд рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреИрдХреЗрдЬ рдкреНрд░рдмрдВрдзрдХ, рд░реИрдЦрд┐рдХ рдФрд░ рдирд┐рд░реНрднрд░ рдкреНрд░рдХрд╛рд░ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рджреБрдирд┐рдпрд╛ рдХреЗ рдХрд░реАрдм рдкрд╣реБрдВрдЪ рд░рд╣реЗ рд╣реИрдВред  рдпрд╣ рдкрд╛рдпрдерди, рд╕реНрдХрд╛рд▓рд╛, рдХреЛрдЯрд▓рд┐рди, рдПрдл #, рдЬрдВрдЧ, рдФрд░ рдХрдИ рдЕрдиреНрдп рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдХрдо рдмрд╛рдБрдЭ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЖрд╡реЗрджрди рдкрд╛рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдореИрдВ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рд╕рд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рднреА рдЕрджреНрднреБрдд рднрд╛рд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛: рдореИрдВ рдЫрд╛рддреНрд░ рдХреЛ рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛ рдореЗрдВ рд▓реЗ рдЬрд╛рдКрдВрдЧрд╛, рдпрд╣ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдЙрдЬреНрдЬреНрд╡рд▓ рдФрд░ рд╕реНрд╡рдЪреНрдЫ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЖрдк рдЗрди рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХреЛ рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдПрдХ рдмрдбрд╝реА рдФрд░ рд╕рдордЭ рд╕реЗ рдмрд╛рд╣рд░, рд▓реЗрдХрд┐рди рдмрд╣реБрдд рддреЗрдЬрд╝ рдорд╢реАрдиред  рдХрд┐рд╕реА рднреА рдХреАрдордд рдкрд░ рд╕рдлрд▓рддрд╛ рд╕реЗ рдмрдЪрдирд╛ рдПрдХ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрди рдирд┐рд░реНрдорд╛рддрд╛ рдХреЛ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрди рдорд╛рдЗрдХреНрд░реЛрд╕реНрдХреЛрдк рдореЗрдВ рдбрд╛рд▓рдиреЗ рдХреЗ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЗ рдЦрд┐рд▓рд╛рдл рд╕рдВрд░рдХреНрд╖рдг рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред  рдФрд░ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛рдУрдВ рдореЗрдВ рдЬреЛ рднрд╛рд╖рд╛ рдХреВрд▓рд░ рд╣реИ, рд╣рд╛рд╕реНрдХреЗрд▓ рд╣рдореЗрд╢рд╛ рд╕рд╛рдорд╛рдиреНрдп рдирд╛рдорд╛рдВрдХрди рдХреЗ рдмрд╛рд╣рд░ рд╣реЛрдЧрд╛ред </p><br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╡реНрдпрдХреНрддрд┐ рдХрдордЬреЛрд░ рд╣реИ, рдФрд░ рдПрдХ рджрд╛рдирд╡ рднреА рдореБрдЭ рдореЗрдВ рд░рд╣рддрд╛ рд╣реИ, рдЬреЛ рдореБрдЭреЗ рджреВрд╕рд░реЛрдВ рдХреЗ рд╕рд╛рдордиреЗ "рдореЗрд░реА рдкрд╕рдВрджреАрджрд╛ рднрд╛рд╖рд╛" рдХреА рддреБрд▓рдирд╛, рдореВрд▓реНрдпрд╛рдВрдХрди рдФрд░ рдмрдЪрд╛рд╡ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдПрдХ рдЦрдбрд╝реА рдорд╢реАрди рдХреЗ рдПрдХ рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд▓рд┐рдЦрд╛ рд╣реИ, рдПрдХ рдореЛрдиреЛрдбрд▓ рд░рдЪрдирд╛ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ, рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рдПрдХрдорд╛рддреНрд░ рдЙрджреНрджреЗрд╢реНрдп рдХреЗ рд╕рд╛рде рдХрд┐ рдХреНрдпрд╛ рдпрд╣ рд╡рд┐рдЪрд╛рд░ рдореЗрд░реЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдореИрдВ рддреБрд░рдВрдд рдкрд░реЗрд╢рд╛рди рдерд╛ рдХрд┐ рдореБрдЭреЗ рдПрд╣рд╕рд╛рд╕ рд╣реБрдЖ рдХрд┐ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдиреЗ рд╢рд╛рдирджрд╛рд░ рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдмрд╣реБрдд inely!  рдпрд╣ рдРрд╕рд╛ рд╣реИ рдЬреИрд╕реЗ рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЧрдВрднреАрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣рд╛ рд╣реВрдВ, рдпрд╛ рдЕрдкрдиреА рд╕реНрдЯреИрдХреНрдб рдорд╢реАрди рдХреЛ рдЙрд╕реА рдмрд╛рдЬрд╛рд░ рдореЗрдВ рдмреЗрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд╣рд╛рдВ рдкрд╛рдпрдерди рдпрд╛ рдЬрд╛рд╡рд╛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреА рдкреЗрд╢рдХрд╢ рдХреА рдЬрд╛рддреА рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣ рд▓рд╛рдирдд рд╣реИ, рдкрд┐рдЧрд▓реЗрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓реЗрдЦ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдпрд╣ рдкреВрд░реА рдмрд╛рддрдЪреАрдд рд╢реБрд░реВ рд╣реБрдИ рдереА, рдЗрд╕ рддрд░рд╣ рдХреЗ рд╕реНрд╡рд╛рджрд┐рд╖реНрдЯ рдирдВрдмрд░ рджреЗрддрд╛ рд╣реИ: рдкрд┐рдЧрд▓реЗрдЯ рдХреЗ рд▓рд┐рдП рд╕реИрдХрдбрд╝реЛрдВ рдорд┐рд▓реАрд╕реЗрдХрдВрдб, рдкрд╛рдпрдерди рдХреЗ рд▓рд┐рдП рд╕реЗрдХрдВрдб ... рдФрд░ рдореЗрд░рд╛ рд╕реБрдВрджрд░ рдПрдХ рд╣реА рдШрдВрдЯреЗ рдореЗрдВ рдПрдХ рд╣реА рдХрд╛рд░реНрдп рдХреЗ рд╕рд╛рде рд╕рд╛рдордирд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛!  рдореБрдЭреЗ рд╕рдлрд▓ рд╣реЛрдирд╛ рд╣реИ!  рдореЗрд░рд╛ рдорд╛рдЗрдХреНрд░реЛрд╕реНрдХреЛрдк рд╕рдВрд╕реНрдерд╛рди рдХреЗ рджрд╛рд▓рд╛рди рдореЗрдВ рдХреЙрдлреА рдорд╢реАрди рд╕реЗ рднреА рдмрджрддрд░ рдПрд╕реНрдкреНрд░реЗрд╕реЛ рдХрд╛рдврд╝рд╛ рдХрд░реЗрдЧрд╛!  рдХреНрд░рд┐рд╕реНрдЯрд▓ рдкреИрд▓реЗрд╕ рдХреЛ рдлреИрд▓рд╛рдпрд╛ рдФрд░ рдЕрдВрддрд░рд┐рдХреНрд╖ рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ! </p><br><p>  рд▓реЗрдХрд┐рди рдЖрдк рдХреНрдпрд╛ рджреЗрдиреЗ рдХреЛ рддреИрдпрд╛рд░ рд╣реИрдВ, рдЧрдгрд┐рддрдЬреНрдЮ рдлрд░рд┐рд╢реНрддрд╛ рдореБрдЭрд╕реЗ рдкреВрдЫрддрд╛ рд╣реИ?  рдорд╣рд▓ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреА рд╢реБрджреНрдзрддрд╛ рдФрд░ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛?  рд▓рдЪреАрд▓реЗрдкрди рдФрд░ рд╡рд┐рд╕реНрддрд╛рд░рд╢реАрд▓рддрд╛ рдЬреЛ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рд╕реЗ рдЕрдиреНрдп рд╕рдорд╛рдзрд╛рдиреЛрдВ рддрдХ рд╣реЛрдореЛрдореЛрд░реНрдлрд┐рдЬрд╝реНрдо рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ?  рджрд╛рдирд╡ рдФрд░ рджреЗрд╡рджреВрдд рджреЛрдиреЛрдВ рдЬрд┐рджреНрджреА рд╣реИрдВ, рдФрд░ рдмреБрджреНрдзрд┐рдорд╛рди рддрд╛рдУрд╡рд╛рджреА, рдЬрд┐рдиреНрд╣реЗрдВ рдореИрдВрдиреЗ рдЦреБрдж рдХреЛ рдЬреАрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рднреА рджреА рд╣реИ, рджреЛрдиреЛрдВ рдХреЛ рд╕реВрдЯ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдорд╛рд░реНрдЧ рдХреЛ рдЕрдкрдирд╛рдиреЗ рдФрд░ рдпрдерд╛рд╕рдВрднрд╡ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЪрд▓рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рджрд┐рдпрд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╡рд┐рдЬреЗрддрд╛ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рд╕реЗ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рд╕реНрд╡рдпрдВ рдкрде рдХреЛ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╡рд╣ рдХрд┐рддрдиреА рджреВрд░ рддрдХ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдирдП рдЕрдиреБрднрд╡ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред  рдФрд░ рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╡реНрдпрд░реНрде рджреБрдГрдЦ рдФрд░ рдЕрдиреБрдХреВрд▓рди рдХреЗ рдЖрдирдВрдж рдХреЛ рдЬрд╛рдирддрд╛ рдерд╛ред </p><br><p> рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░рднрд╛рд╡рд╢реАрд▓рддрд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ <em>рднрд╛рд╖рд╛рдУрдВ рдХреА</em> рддреБрд▓рдирд╛ рд╡реНрдпрд░реНрде рд╣реИред  рдЖрдкрдХреЛ рдЕрдиреБрд╡рд╛рджрдХреЛрдВ (рджреБрднрд╛рд╖рд┐рдпреЛрдВ рдпрд╛ рд╕рдВрдХрд▓рдХ), рдпрд╛ рднрд╛рд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреА рддреБрд▓рдирд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЕрдВрдд рдореЗрдВ, рджрд╛рд╡рд╛ рд╣реИ рдХрд┐ рд╕реА рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рдмрд╕реЗ рддреЗрдЬрд╝ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдмреЗрд╕рд┐рдХ рдореЗрдВ рдкреВрд░реНрдг рд╕реА рджреБрднрд╛рд╖рд┐рдпрд╛ рд▓рд┐рдЦрдХрд░ рдЦрдВрдбрди рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рд╣рд╛рд╕реНрдХреЗрд▓ рдФрд░ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рддреБрд▓рдирд╛ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рд╡рд┐рд╢реЗрд╖ рдмреНрд░рд╛рдЙрдЬрд░ рдореЗрдВ <code>ghc</code> рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдкреНрд░реЛрдЧреНрд░рд╛рдореНрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдХрд▓рд┐рдд рдкреНрд░реЛрдЧреНрд░рд╛рдореНрд╕ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди, рдХрд╣рддреЗ рд╣реИрдВ, рдХрд╣рддреЗ рд╣реИрдВред  рд╕рднреА рд╕реВрдЕрд░ рд╢рдмреНрджрд╛рд╡рд▓реА рдЦрдбрд╝реА рдорд╢реАрдиреЛрдВ рдкрд░ рдПрдХ рдкреНрд░реЗрд░рдгрд╛рджрд╛рдпрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реЗрдЦ</a> рд╕реЗ рдЖрддреА рд╣реИред  рд▓реЗрдЦ рдХреЗ рд╕рд╛рде рд╕рднреА рд╣рд╛рд╕реНрдХреЗрд▓ рдХреЛрдб рдХрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрдВрдбрд╛рд░</a> рдореЗрдВ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> ред </p><br><h3 id="vyhodim-iz-zony-komforta">  рд╣рдо рдЖрд░рд╛рдо рдХреНрд╖реЗрддреНрд░ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ </h3><br><p>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдерд┐рддрд┐ рдИрдбреАрдПрд╕рдПрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдореЛрдиреЛрдЗрдбрд▓ рд╕реНрдЯреИрдХ рдорд╢реАрди рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реЛрдЧреА - рдПрдХ рдЫреЛрдЯреА рд╕рд░рд▓ рднрд╛рд╖рд╛ рдЬреЛ рдЖрднрд╛рд╕реА рд╕реНрдЯреИрдХ рдорд╢реАрди рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреЛ рджрд░реНрдЬрди рдкреНрд░рд╛рдЗрдореЗрдЯрд┐рд╡реНрд╕ рдХреЗ рд╕рдВрдпреЛрдЬрди рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред  рдЬреИрд╕реЗ рд╣реА рд╡рд╣ рджреВрд╕рд░реЗ рд▓реЗрдЦ рдореЗрдВ рдЖрдпрд╛, рд╣рдо рдЙрд╕реЗ <code>monopig</code> рдирд╛рдо <code>monopig</code> ред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ рдХрд┐ рд╕реНрдЯреИрдХреНрдб рдорд╢реАрдиреЛрдВ рдХреЗ рд▓рд┐рдП рднрд╛рд╖рд╛ рдПрдХ <em>рд╕рдВрдШрдирди</em> рд╕рдВрдЪрд╛рд▓рди рдФрд░ рдПрдХ рдЗрдХрд╛рдИ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рдЦрд╛рд▓реА рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдПрдХ рдореЛрдиреЙрдпрдб рдмрдирд╛рддреА рд╣реИред  рддрджрдиреБрд╕рд╛рд░, рд╡рд╣ рдЦреБрдж рдорд╢реАрди рдХреЗ рд░рд╛рдЬреНрдп рдХреЗ рдПрдХ рдореЛрдиреЛрдПрдб рдЯреНрд░рд╛рдВрд╕рдлреЙрд░реНрдореЗрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рд░рд╛рдЬреНрдп рдореЗрдВ рдПрдХ рд╕реНрдЯреИрдХ, рдПрдХ рд╡реЗрдХреНрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдореЗрдореЛрд░реА (рдПрдХ рддрддреНрд╡ рдХреЗ рд▓рд┐рдП рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╕рдВрд░рдЪрдирд╛), рдПрдХ рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╕реНрдЯреЙрдк рдлрд╝реНрд▓реИрдЧ, рдФрд░ рдбрд┐рдмрдЧрд┐рдВрдЧ рдЬрд╛рдирдХрд╛рд░реА рдЬрдорд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдореЛрдиреЛрдЗрдбрд▓ рдмреИрдЯрд░реА рд╢рд╛рдорд┐рд▓ рд╣реИред  рдпрд╣ рдкреВрд░реА рд╕рдВрд░рдЪрдирд╛ рдПрдХ рдХрдореНрдкреНрдпреВрдЯреЗрд╢рдирд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЕрдВрдЬрд╛рдо рджреЗрдиреЗ рд╕реЗ рд▓реЗрдХрд░ рд╕рдВрдЪрд╛рд▓рди рддрдХ рдПрдВрдбреЛрдореЛрд░реНрдлрд┐рдореНрд╕ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░рд┐рдд рд╣реЛрддреА рд╣реИред  рдкреНрд░реЛрдЧреНрд░рд╛рдо <em>рдХреЛрдб рдХреА</em> рдПрдХ рдЖрдЗрд╕реЛрдореЛрд░реНрдлрд┐рдХ рд╕рдВрд░рдЪрдирд╛ рдЙрд╕ рд╕рдВрд░рдЪрдирд╛ рд╕реЗ рдмрдирд╛рдИ рдЧрдИ рдереА рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдмрдирд╛рддреА рд╣реИ, рдФрд░ рдЗрд╕рд╕реЗ рд╕рдорд░реВрдкрддрд╛рдПрдВ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧреА рд╕рдВрд░рдЪрдирд╛рдУрдВ рдореЗрдВ рд╣реЛрддреА рд╣реИрдВ рдЬреЛ рддрд░реНрдХреЛрдВ рдФрд░ рд╕реНрдореГрддрд┐ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреА рд╣реИрдВред  рдирд┐рд░реНрдорд╛рдг рдХрд╛ рдЕрдВрддрд┐рдо рдЪрд░рдг рдХреНрд▓реЗрд╕реНрд▓реЗ рд╢реНрд░реЗрдгреА рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ monoids рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдерд╛, рдЬреЛ рдЖрдкрдХреЛ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдорда рдореЗрдВ рдЧрдгрдирд╛ рдХреЛ рд╡рд┐рд╕рд░реНрдЬрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП рдорд╢реАрди рдХреЛ рдЗрдирдкреБрдЯ-рдЖрдЙрдЯрдкреБрдЯ рдФрд░ рдЕрд╕реНрдкрд╖реНрдЯ рдЧрдгрдирд╛ рдХреА рдХреНрд╖рдорддрд╛рдПрдВ рдорд┐рд▓реАрдВред  рд╣рдо рдЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗред  рдЙрд╕рдХрд╛ рдХреЛрдб <a href="">рдпрд╣рд╛рдВ</a> рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="">рд╣реИ</a> ред </p><br><p>  рд╣рдо рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреА рдкреНрд░рднрд╛рд╡рд╢реАрд▓рддрд╛ рдХреЛ рдПрд░рд╛рдЯреЛрд╕реНрдердиреАрдЬ рдХреА рдЫрд▓рдиреА рдХреЗ рднреЛрд▓реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкрд░ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВрдЧреЗ, рдЬреЛ рд╢реВрдиреНрдп рдФрд░ рдкреНрд░рд╛рдЗрдорд░реЛрдВ рдХреЛ рджрд░реНрд╢рд╛рддреЗ рд╣реБрдП, рд╢реВрдиреНрдп рдФрд░ рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдореЗрдореЛрд░реА (рд╕рд░рдгреА) рдХреЛ рднрд░рддрд╛ рд╣реИред  рд╣рдо <code>javascript</code> рдореЗрдВ рдкреНрд░рдХреНрд░рд┐рдпрд╛рддреНрдордХ рдХреЛрдб рдХреЛ <code>javascript</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> memSize = <span class="hljs-number"><span class="hljs-number">65536</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; memSize; i++) arr.push(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sieve</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (n*n &lt; memSize) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!arr[n]) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> k = n; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (k &lt; memSize) { k+=n; arr[k] = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } n++; } }</code> </pre> <br><p>  рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рддреБрд░рдВрдд рдереЛрдбрд╝рд╛ рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИред  рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рднрд░реЗ рд╣реБрдП рдореЗрдореЛрд░реА рд╕реЗрд▓реНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЦрд░рд╛рдм рдЪрд▓рдирд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдореЗрд░рд╛ рдЧрдгрд┐рддрдЬреНрдЮ рдлрд░рд┐рд╢реНрддрд╛ <code>PorosenokVM</code> рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╕реЗ <em>рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ</em> рднреЛрд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рд╕рд╣рдордд рдирд╣реАрдВ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рдЕрдиреБрдХреВрд▓рди рдореЗрдВ рд╕реНрдЯреИрдХ рднрд╛рд╖рд╛ рдХреЗ рдХреЗрд╡рд▓ рдкрд╛рдВрдЪ рдирд┐рд░реНрджреЗрд╢ рд╣реИрдВред  рдпрд╣рд╛рдБ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо <code>monopig</code> рдХреИрд╕реЗ <code>monopig</code> : </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">sieve</span></span> = push <span class="hljs-number"><span class="hljs-number">2</span></span> &lt;&gt; while (dup &lt;&gt; dup &lt;&gt; mul &lt;&gt; push memSize &lt;&gt; lt) (dup &lt;&gt; get &lt;&gt; branch mempty fill &lt;&gt; inc) &lt;&gt; pop fill = dup &lt;&gt; dup &lt;&gt; add &lt;&gt; while (dup &lt;&gt; push memSize &lt;&gt; lt) (dup &lt;&gt; push <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&gt; swap &lt;&gt; put &lt;&gt; exch &lt;&gt; add) &lt;&gt; pop</code> </pre> <br><p>  рдФрд░ рдпрд╣рд╛рдБ рд╣реИ рдХрд┐ рдЖрдк рдПрдХ рдореБрд╣рд╛рд╡рд░реЗрджрд╛рд░ рд╣рд╛рд╕реНрдХреЗрд▓ рдкрд░ рдЗрд╕ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдПрдХ рд╕рдорд╛рди рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреИрд╕реЗ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, <code>monopig</code> рдореЗрдВ рдЙрд╕реА рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">sieve'</span></span> :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Vector</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Vector</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> sieve' km | k*k &lt; memSize = sieve' (k+<span class="hljs-number"><span class="hljs-number">1</span></span>) $ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> m ! k == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> fill' k (<span class="hljs-number"><span class="hljs-number">2</span></span>*k) m <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> m | otherwise = m fill' :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Vector</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Vector</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span> fill' knm | n &lt; memSize = fill' k (n+k) $ m // [(n,<span class="hljs-number"><span class="hljs-number">1</span></span>)] | otherwise = m</code> </pre> <br><p>  рдпрд╣ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>Data.Vector</code> рдкреНрд░рдХрд╛рд░ рдФрд░ рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╣рд╛рд╕реНрдХреЗрд▓ рдореЗрдВ рд░реЛрдЬрдорд░реНрд░рд╛ рдХреЗ рдХрд╛рдо рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЖрдо рдирд╣реАрдВ рд╣реИрдВред  рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐ <code>m ! k</code>  <code>m ! k</code> , рд╡реЗрдХреНрдЯрд░ <code>m</code> рдХреЗ <code>k</code> рд╡реЗрдВ рддрддреНрд╡ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдФрд░ <code>m // [(n,1)]</code> - рд╕рдВрдЦреНрдпрд╛ <code>n</code> рд╕рд╛рде рддрддреНрд╡ рдХреЛ <code>m // [(n,1)]</code> рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред рдореИрдВ рдЗрд╕реЗ рдпрд╣рд╛рдВ рд▓рд┐рдЦ рд░рд╣рд╛ рд╣реВрдВ рдХреНрдпреЛрдВрдХрд┐ рдореБрдЭреЗ рдорджрдж рдХреЗ рд▓рд┐рдП рдЙрдирдХреЗ рдкрд╛рд╕ рдЬрд╛рдирд╛ рдерд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореИрдВ рд╣рд╛рд╕реНрдХреЗрд▓ рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВ рд▓рдЧрднрдЧ рд╣рд░ рджрд┐рдиред  рддрдереНрдп рдпрд╣ рд╣реИ рдХрд┐ рдПрдХ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЙрдкрдпреЛрдЧ рдХреЗ рд╕рд╛рде рд╕рдВрд░рдЪрдирд╛рдПрдВ рдЕрдХреНрд╖рдо рд╣реИрдВ рдФрд░ рдЗрд╕ рдХрд╛рд░рдг рд╕реЗ рдЕрдкреНрд░рдХрд╛рд╢рд┐рдд рд╣реИрдВред </p><br><p>  рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ рдореЗрдВ рдкрд┐рдЧрд▓реЗрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╢рд░реНрддреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЛ 100 рдмрд╛рд░ рдЪрд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрдВрдкреНрдпреВрдЯрд░ рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдЗрди рддреАрди рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреА рдирд┐рд╖реНрдкрд╛рджрди рдЧрддрд┐ рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВ, рдЬреЛ рдЙрдиреНрд╣реЗрдВ рдХреНрд░реЛрдо рдореЗрдВ рдЪрд▓рд╛рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ <code>javascript</code> рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдЬрд┐рдХреНрд░ рдХрд░рддреЗ рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/ir/hi/mj/irhimjjtdgec7vw1vduvivmzonm.png"></p><br><p>  рдЦреМрдл рдХрд╛ рд╕рд╛рдпрд╛ !!!  рди рдХреЗрд╡рд▓ <code>monopig</code> рдзреАрдорд╛ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рджреЗрд╢реА рд╕рдВрд╕реНрдХрд░рдг рдмрд╣реБрдд рдмреЗрд╣рддрд░ рдирд╣реАрдВ рд╣реИ!  рд╣рд╛рд╕реНрдХреЗрд▓, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рд╢рд╛рдВрдд рд╣реИ, рд▓реЗрдХрд┐рди рдЗрддрдирд╛ рдирд╣реАрдВ рдЬрд┐рддрдирд╛ рдХрд┐ рдПрдХ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЪрд▓ рд░рд╣реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╕реЗ рд╣реАрди рд╣реИ!  рдЬреИрд╕рд╛ рдХрд┐ рдХреЛрдЪ рд╣рдореЗрдВ рд╕рд┐рдЦрд╛рддреЗ рд╣реИрдВ, рдЖрдк рдЙрд╕ рддрд░рд╣ рд╕реЗ рдирд╣реАрдВ рд░рд╣ рд╕рдХрддреЗ, рдпрд╣ рдЙрд╕ рдЖрд░рд╛рдорджрд╛рдпрдХ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХрд╛ рд╕рдордп рд╣реИ рдЬреЛ рд╣рд╛рд╕реНрдХреЗрд▓ рд╣рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ! </p><br><h3 id="preodolevaem-len">  рдЖрд▓рд╕реНрдп рдкрд░ рдХрд╛рдмреВ рдХрд░реЗрдВ </h3><br><p>  рдЪрд▓реЛ рдареАрдХ рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд░рди-рдЯрд╛рдЗрдо рдЖрдБрдХрдбрд╝реЛрдВ рдкрд░ <code>-rtsopts</code> рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП <code>-rtsopts</code> рдзреНрд╡рдЬ рдХреЗ рд╕рд╛рде <code>monopig</code> рдкрд░ рдПрдХ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рд╣рдореЗрдВ рдПрдХ рдмрд╛рд░ Eratosthenes рдЪрд▓рдиреА рдЪрд▓рд╛рдиреЗ рдХреА рдХреНрдпрд╛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">$ ghc -O -rtsopts ./Monopig4.hs [1 of 1] Compiling Main ( Monopig4.hs, Monopig4.o ) Linking Monopig4 ... $ ./Monopig4 -RTS -sstderr "Ok" 68,243,040,608 bytes allocated in the heap 6,471,530,040 bytes copied during GC 2,950,952 bytes maximum residency (30667 sample(s)) 42,264 bytes maximum slop 15 MB total memory in use (7 MB lost due to fragmentation) Tot time (elapsed) Avg pause Max pause Gen 0 99408 colls, 0 par 2.758s 2.718s 0.0000s 0.0015s Gen 1 30667 colls, 0 par 57.654s 57.777s 0.0019s 0.0133s INIT time 0.000s ( 0.000s elapsed) MUT time 29.008s ( 29.111s elapsed) GC time 60.411s ( 60.495s elapsed) &lt;--   ! EXIT time 0.000s ( 0.000s elapsed) Total time 89.423s ( 89.607s elapsed) %GC time 67.6% (67.5% elapsed) Alloc rate 2,352,591,525 bytes per MUT second Productivity 32.4% of total user, 32.4% of total elapsed</code> </pre> <br><p>  рдЕрдВрддрд┐рдо рдкрдВрдХреНрддрд┐ рд╣рдореЗрдВ рдмрддрд╛рддреА рд╣реИ рдХрд┐ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗрд╡рд▓ рдПрдХ рддрд┐рд╣рд╛рдИ рд╕рдордп рдореЗрдВ рдЙрддреНрдкрд╛рджрдХ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдореЗрдВ рд▓рдЧрд╛ рд╣реБрдЖ рдерд╛ред  рдмрд╛рдХреА рд╕рдордп рдХреЗ рд▓рд┐рдП, рдХрдЪрд░рд╛ рд╕рдВрдЧреНрд░рд╣рдХрд░реНрддрд╛ рд╕реНрдореГрддрд┐ рд╕реЗ рднрд╛рдЧ рдЧрдпрд╛ рдФрд░ рдЖрд▓рд╕реА рдЧрдгрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕рдлрд╛рдИ рдХреАред  рд╣рдореЗрдВ рдмрдЪрдкрди рдореЗрдВ рдХрд┐рддрдиреА рдмрд╛рд░ рдХрд╣рд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдЖрд▓рд╕реНрдп рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд╣реИ!  рдпрд╣рд╛рдБ, рд╣рд╛рд╕реНрдХреЗрд▓ рдХреА рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛ рдиреЗ рд╣рдореЗрдВ рдПрдХ рдЕрд╕рдВрддреБрд╖реНрдЯ рдХрд┐рдпрд╛, рдЬрд┐рд╕рдореЗрдВ рдХрдИ рдмрд┐рд▓рд┐рдпрди рдЖрд╕реНрдердЧрд┐рдд рд╡реЗрдХреНрдЯрд░ рдФрд░ рд╕реНрдЯреИрдХ рдЯреНрд░рд╛рдВрд╕рдлрд╝реЙрд░реНрдореЗрд╢рди рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рдЧрдИред </p><br><p>  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рдПрдХ рдЧрдгрд┐рддрдЬреНрдЮ рдкрд░реА рдЕрдкрдиреА рдЙрдВрдЧрд▓реА рдЙрдард╛рддреА рд╣реИ рдФрд░ рдЦреБрд╢реА рд╕реЗ рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдЕрд▓реЛрдВрдЬреЛ рдЪрд░реНрдЪ рдХреЗ рд╕рдордп рд╕реЗ, рдПрдХ рдкреНрд░рдореЗрдп рд╣реИ рдЬреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдЧрдгрдирд╛ рдХреА рд░рдгрдиреАрддрд┐ рдЙрдирдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╣рдо рдЗрд╕реЗ рджрдХреНрд╖рддрд╛ рдХреЗ рдХрд╛рд░рдгреЛрдВ рд╕реЗ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рд╣реИрдВред  рдЧрдгрдирд╛рдУрдВ рдХреЛ рд╕рдЦреНрдд рдореЗрдВ рдмрджрд▓рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИ - рдПрдХ рд╕рдВрдХреЗрдд рдбрд╛рд▓реЗрдВ <code>!</code>  рд╕реНрдЯреИрдХ рдФрд░ рдореЗрдореЛрд░реА рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреА рдШреЛрд╖рдгрд╛ рдореЗрдВ, рдФрд░ рдЗрд╕ рддрд░рд╣ рдЗрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рд╕рдЦреНрдд рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">VM</span></span></span><span class="hljs-class"> a = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">VM</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">stack</span></span></span><span class="hljs-class"> :: !</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Stack</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">status</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Maybe</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">memory</span></span></span><span class="hljs-class"> :: !</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Memory</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">journal</span></span></span><span class="hljs-class"> :: !</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> }</span></span></code> </pre> <br><p>  рд╣рдо рдХреБрдЫ рдФрд░ рдирд╣реАрдВ рдмрджрд▓реЗрдВрдЧреЗ рдФрд░ рддреБрд░рдВрдд рдкрд░рд┐рдгрд╛рдо рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВрдЧреЗ: </p><br><pre> <code class="plaintext hljs">$ ./Monopig41 +RTS -sstderr "Ok" 68,244,819,008 bytes allocated in the heap 7,386,896 bytes copied during GC 528,088 bytes maximum residency (2 sample(s)) 25,248 bytes maximum slop 16 MB total memory in use (14 MB lost due to fragmentation) Tot time (elapsed) Avg pause Max pause Gen 0 129923 colls, 0 par 0.666s 0.654s 0.0000s 0.0001s Gen 1 2 colls, 0 par 0.001s 0.001s 0.0006s 0.0007s INIT time 0.000s ( 0.000s elapsed) MUT time 13.029s ( 13.048s elapsed) GC time 0.667s ( 0.655s elapsed) EXIT time 0.001s ( 0.001s elapsed) Total time 13.700s ( 13.704s elapsed) %GC time 4.9% (4.8% elapsed) Alloc rate 5,238,049,412 bytes per MUT second Productivity 95.1% of total user, 95.1% of total elapsed</code> </pre> <br><p>  рдЙрддреНрдкрд╛рджрдХрддрд╛ рдореЗрдВ рдХрд╛рдлреА рд╡реГрджреНрдзрд┐ рд╣реБрдИ рд╣реИред  рдбреЗрдЯрд╛ рдХреА рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдпрддрд╛ рдХреЗ рдХрд╛рд░рдг рдХреБрд▓ рдореЗрдореЛрд░реА рд▓рд╛рдЧрдд рдЕрднреА рднреА рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рдмрдиреА рд╣реБрдИ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдбреЗрдЯрд╛ рдХреЗ рдЖрд▓рд╕реНрдп рдХреЛ рд╕реАрдорд┐рдд рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдХрдЪрд░рд╛ рд╕рдВрдЧреНрд░рд╣рдХрд░реНрддрд╛ рдХреЛ рдЖрд▓рд╕реА рд╣реЛрдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ, рдЗрд╕ рдкрд░ рдХреЗрд╡рд▓ 5% рдХрд╛рд░реНрдп рд╢реЗрд╖ рд╣реИред  рд░реЗрдЯрд┐рдВрдЧ рдореЗрдВ рдПрдХ рдирдИ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рджрд░реНрдЬ рдХрд░реЗрдВред </p><br><p><img src="https://habrastorage.org/webt/6z/z4/6j/6zz46jgmso3w95efydonusy8pok.png"></p><br><p>  рдЦреИрд░, рдХрдареЛрд░ рдЧрдгрдирд╛ рдиреЗ рд╣рдореЗрдВ рджреЗрд╢реА рд╣рд╛рд╕реНрдХреЗрд▓ рдХреЛрдб рдХреА рдЧрддрд┐ рдХреЗ рдХрд░реАрдм рд▓рд╛ рджрд┐рдпрд╛ рд╣реИ, рдЬреЛ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдЖрднрд╛рд╕реА рдорд╢реАрди рдХреЗ рд╢рд░реНрдордирд╛рдХ рд░реВрдк рд╕реЗ рдзреАрдорд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдПрдХ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рд╡реЗрдХреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдУрд╡рд░рд╣реЗрдб рдПрдХ рдЦрдбрд╝реА рдорд╢реАрди рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреА рд▓рд╛рдЧрдд рд╕реЗ рдЕрдзрд┐рдХ рд╣реИред  рдФрд░ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрд╣ рд╕реНрдореГрддрд┐ рдХреА рдЕрдкрд░рд┐рд╣рд╛рд░реНрдпрддрд╛ рдХреЛ рдЕрд▓рд╡рд┐рджрд╛ рдХрд╣рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред </p><br><h3 id="vpuskaem-izmeneniya-v-zhizn">  рдЬреАрд╡рди рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрдиреЗ рджреЗрдирд╛ </h3><br><p>  <code>Data.Vector</code> рдкреНрд░рдХрд╛рд░ рдЕрдЪреНрдЫрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рд╢реБрджреНрдзрддрд╛ рдХреЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рдирд╛рдо рдкрд░ рдирдХрд▓ рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рд╕рдордп рдмрд┐рддрд╛рддреЗ рд╣реИрдВред  рдЗрд╕реЗ <code>Data.Vector.Unpacked</code> рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдкрд░ <code>Data.Vector.Unpacked</code> рд╣рдо рдХрдо рд╕реЗ рдХрдо рд╕рдВрд░рдЪрдирд╛ рдХреА рдкреИрдХреЗрдЬрд┐рдВрдЧ рдкрд░ рдмрдЪрдд рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдореВрд▓ рд░реВрдк рд╕реЗ рддрд╕реНрд╡реАрд░ рдХреЛ рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИред  рд╕рд╣реА рд╕рдорд╛рдзрд╛рди рдпрд╣ рд╣реЛрдЧрд╛ рдХрд┐ рдорд╢реАрди рдХреА рд╕реНрдерд┐рддрд┐ рд╕реЗ рдореЗрдореЛрд░реА рдХреЛ рд╣рдЯрд╛ рджреЗрдВ рдФрд░ рдХреНрд▓реЗрд╕реНрд▓реЗ рд╢реНрд░реЗрдгреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рд╣рд░реА рд╡реЗрдХреНрдЯрд░ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред  рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ, рд╢реБрджреНрдз рд╡реИрдХреНрдЯрд░ рдХреЗ рд╕рд╛рде, рдЖрдк рддрдерд╛рдХрдерд┐рдд рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрдиреАрдп ( <code>Data.Vector.Mutable</code> ) рд╡реИрдХреНрдЯрд░ <code>Data.Vector.Mutable</code> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╡реИрдХреНрдЯрд░ред </p><br><p>  рд╣рдо рдЙрдкрдпреБрдХреНрдд рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЬреЛрдбрд╝реЗрдВрдЧреЗ рдФрд░ рдПрдХ рд╕реНрд╡рдЪреНрдЫ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдкрд░рд╕реНрдкрд░ рдбреЗрдЯрд╛ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪреЗрдВрдЧреЗред </p><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad.Primitive <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">qualified</span></span> Data.Vector.Unboxed <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> V <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">qualified</span></span> Data.Vector.Unboxed.Mutable <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> M</code> </pre> <br><p>  рдЗрди рдЧрдВрджреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ рд╢реБрджреНрдз рдЬрдирддрд╛ рд╕реЗ рдЕрд▓рдЧ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡реЗ <code>PrimMonad</code> рдХреНрд▓рд╛рд╕ рдХреЗ <code>PrimMonad</code> рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИрдВ (рдЗрдирдореЗрдВ <code>ST</code> рдпрд╛ <code>IO</code> ), рдЬрд╣рд╛рдВ рд╕реНрд╡рдЪреНрдЫ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдХреАрдорддреА рдЪрд░реНрдордкрддреНрд░ рдкрд░ рдХреНрд░рд┐рд╕реНрдЯрд▓ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦреЗ рдЧрдП рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЗрди рдЕрд╢реБрджреНрдз рдЬрд╛рдирд╡рд░реЛрдВ рдХрд╛ рд╡реНрдпрд╡рд╣рд╛рд░ рд╕рдЦреНрддреА рд╕реЗ рд░реВрдврд╝рд┐рд╡рд╛рджреА рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЦрддрд░рдирд╛рдХ рдирд╣реАрдВ рд╣реИред  рд╣рдорд╛рд░реА рдорд╢реАрди рдХреЗ рд╕рднреА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП <code>IO</code> рдореЛрдирд╛рдб рдореЗрдВ рдбреВрдмрдиреЗ рдХреЗ рд▓рд┐рдП рдкреВрд░реА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рдмрд░реНрдмрд╛рдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  <code>monopig</code> рднрд╛рд╖рд╛ рдХреЗ рдПрдХ рд╕реНрд╡рдЪреНрдЫ рд╕рдмрд╕реЗрдЯ рдХреЗ рд╕рд╛рде <code>monopig</code> рд╣рдо рдЪрд╛рд░ рдирд┐рд░реНрджреЗрд╢ рдмрдирд╛рдПрдВрдЧреЗ рдЬреЛ рд╕реНрдореГрддрд┐ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдХреЗрд╡рд▓ рдЙрдирдХреЗ рдкрд╛рд╕ рдЦрддрд░рдирд╛рдХ рдХреНрд╖реЗрддреНрд░ рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛрдЧреАред </p><br><p>  рд╕реНрд╡рдЪреНрдЫ рдорд╢реАрди рдХрд╛ рдкреНрд░рдХрд╛рд░ рдЫреЛрдЯрд╛ рд╣реЛрддрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ: </p><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">VM</span></span></span><span class="hljs-class"> a = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">VM</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">stack</span></span></span><span class="hljs-class"> :: !</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Stack</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">status</span></span></span><span class="hljs-class"> :: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Maybe</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">String</span></span></span><span class="hljs-class"> , </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">journal</span></span></span><span class="hljs-class"> :: !</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> }</span></span></code> </pre> <br><p>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдбрд┐рдЬрд╛рдЗрдирд░ рдФрд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╕реНрд╡рдпрдВ рдЗрд╕ рдмрджрд▓рд╛рд╡ рдХреЛ рд╢рд╛рдпрдж рд╣реА рдиреЛрдЯрд┐рд╕ рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЙрдирдХреЗ рдкреНрд░рдХрд╛рд░ рдмрджрд▓ рдЬрд╛рдПрдВрдЧреЗред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдорд╛рдирд╛рд░реНрдердХ рд╢рдмреНрджреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИред </p><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Memory</span></span></span><span class="hljs-class"> m = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">M</span></span></span><span class="hljs-class">.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MVector</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">PrimState</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">m</span></span></span><span class="hljs-class">) </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Logger</span></span></span><span class="hljs-class"> ma = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Memory</span></span></span><span class="hljs-class"> m -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Code</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">VM</span></span></span><span class="hljs-class"> a -&gt; m (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">VM</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Program'</span></span></span><span class="hljs-class"> ma = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Logger</span></span></span><span class="hljs-class"> ma -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Memory</span></span></span><span class="hljs-class"> m -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Program</span></span></span><span class="hljs-class"> ma</span></span></code> </pre> <br><p>  рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░реНрд╕ рдХреЗ рдкрд╛рд╕ рдореЗрдореЛрд░реА рдПрдХреНрд╕реЗрд╕ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдФрд░ рддрд░реНрдХ рд╣реЛрдЧрд╛ред  рдирд┐рд╖реНрдкрд╛рджрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдмрджрд▓ рдЬрд╛рдПрдВрдЧреЗ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╡реЗ рдЬреЛ рдПрдХ рдЧрдгрдирд╛ рд▓реЙрдЧ рд░рдЦрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдм рдЙрдиреНрд╣реЗрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЪрд░ рд╡реЗрдХреНрдЯрд░ рдХреА рд╕реНрдерд┐рддрд┐ рдкреВрдЫрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдкреВрд░реНрдг <a href="">рдХреЛрдб</a> рдХреЛ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рджреЗрдЦрд╛ рдФрд░ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдореИрдВ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рджреЗ рджреВрдБрдЧрд╛: рд╕реНрдореГрддрд┐ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреБрдирд┐рдпрд╛рджреА рдШрдЯрдХреЛрдВ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдпрд╣ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">geti</span></span> :: <span class="hljs-type"><span class="hljs-type">PrimMonad</span></span> m =&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Program'</span></span> ma geti i = programM (<span class="hljs-type"><span class="hljs-type">GETI</span></span> i) $ \mem -&gt; \s -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;= i &amp;&amp; i &lt; memSize) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> \vm -&gt; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> x &lt;- <span class="hljs-type"><span class="hljs-type">M</span></span>.unsafeRead mem i setStack (x:s) vm <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> err <span class="hljs-string"><span class="hljs-string">"index out of range"</span></span> puti :: <span class="hljs-type"><span class="hljs-type">PrimMonad</span></span> m =&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Program'</span></span> ma puti i = programM (<span class="hljs-type"><span class="hljs-type">PUTI</span></span> i) $ \mem -&gt; \<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (x:s) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;= i &amp;&amp; i &lt; memSize) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> \vm -&gt; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-type"><span class="hljs-type">M</span></span>.unsafeWrite mem ix setStack s vm <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> err <span class="hljs-string"><span class="hljs-string">"index out of range"</span></span> _ -&gt; err <span class="hljs-string"><span class="hljs-string">"expected an element"</span></span> get :: <span class="hljs-type"><span class="hljs-type">PrimMonad</span></span> m =&gt; <span class="hljs-type"><span class="hljs-type">Program'</span></span> ma get = programM (<span class="hljs-type"><span class="hljs-type">GET</span></span>) $ \m -&gt; \<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (i:s) -&gt; \vm -&gt; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> x &lt;- <span class="hljs-type"><span class="hljs-type">M</span></span>.read mi setStack (x:s) vm _ -&gt; err <span class="hljs-string"><span class="hljs-string">"expected an element"</span></span> put :: <span class="hljs-type"><span class="hljs-type">PrimMonad</span></span> m =&gt; <span class="hljs-type"><span class="hljs-type">Program'</span></span> ma put = programM (<span class="hljs-type"><span class="hljs-type">PUT</span></span>) $ \m -&gt; \<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> (i:x:s) -&gt; \vm -&gt; <span class="hljs-type"><span class="hljs-type">M</span></span>.write mix &gt;&gt; setStack s vm _ -&gt; err <span class="hljs-string"><span class="hljs-string">"expected two elemets"</span></span></code> </pre> <br><p>  рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рдбреЗрдорди рдиреЗ рд╕реНрдореГрддрд┐ рдореЗрдВ рдЕрдиреБрдореЗрдп рд╕реВрдЪрдХрд╛рдВрдХ рдореВрд▓реНрдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдкрд░ рддреБрд░рдВрдд рдереЛрдбрд╝рд╛ рдФрд░ рдмрдЪрд╛рдиреЗ рдХреА рдкреЗрд╢рдХрд╢ рдХреА, рдХреНрдпреЛрдВрдХрд┐ <code>puti</code> рдФрд░ <code>geti</code> рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЛ рдХрд╛рд░реНрдпрдХреНрд░рдо рдирд┐рд░реНрдорд╛рдг рдХреЗ рдЪрд░рдг рдореЗрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЧрд▓рдд рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЕрдЧреНрд░рд┐рдо рдореЗрдВ рд╕рдорд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдк рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рд▓рд┐рдП <code>put</code> рдФрд░ рдХрдорд╛рдВрдб <code>get</code> рд╣реИрдВ рдЬреЛ рд╕реБрд░рдХреНрд╖рд╛ рдХреА рдЧрд╛рд░рдВрдЯреА рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВ, рдФрд░ рдЧрдгрд┐рддрдЬреНрдЮ рдкрд░реА рдиреЗ рдЙрдиреНрд╣реЗрдВ рдЦрддрд░рдирд╛рдХ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреАред </p><br><p>  рдПрдХ рдЕрд▓рдЧ рддрд░реНрдХ рдореЗрдВ рд╕реНрдореГрддрд┐ рдбрд╛рд▓рдиреЗ рдХреЗ рд╕рд╛рде рдпрд╣ рд╕рдм рдЙрдкрджреНрд░рд╡ рдЬрдЯрд┐рд▓ рд▓рдЧрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рдЙрдирдХреА рдЬрдЧрд╣ рд╕реЗ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рджрд┐рдЦрд╛рддрд╛ рд╣реИ - <em>рдЙрдиреНрд╣реЗрдВ рдмрд╛рд╣рд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП</em> ред  рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо рдПрдХ рдкрд┐рдЬреНрдЬрд╛ рдбрд┐рд▓реАрд╡рд░реА рдореИрди рдХреЛ рдмрд╛рдБрдЭ рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛ рдореЗрдВ рд▓рд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рд╢реБрджреНрдз рдХрд╛рд░реНрдп рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдЙрдирдХреЗ рд╕рд╛рде рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпреЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрднреА рднреА рдкреНрд░рдердо рд╢реНрд░реЗрдгреА рдХреЗ рдирд╛рдЧрд░рд┐рдХ рдирд╣реАрдВ рдмрдиреЗрдВрдЧреЗ, рдФрд░ рдпрд╣ рдкреНрд░рдпреЛрдЧрд╢рд╛рд▓рд╛ рдореЗрдВ рдкрд┐рдЬреНрдЬрд╛ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╣рдордиреЗ рдЗрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд╕рд╛рде рдХреНрдпрд╛ рдЦрд░реАрджрд╛: </p><br><pre> <code class="plaintext hljs">$ ./Monopig5 +RTS -sstderr "Ok" 9,169,192,928 bytes allocated in the heap 2,006,680 bytes copied during GC 529,608 bytes maximum residency (2 sample(s)) 25,248 bytes maximum slop 2 MB total memory in use (0 MB lost due to fragmentation) Tot time (elapsed) Avg pause Max pause Gen 0 17693 colls, 0 par 0.094s 0.093s 0.0000s 0.0001s Gen 1 2 colls, 0 par 0.000s 0.000s 0.0002s 0.0003s INIT time 0.000s ( 0.000s elapsed) MUT time 7.228s ( 7.232s elapsed) GC time 0.094s ( 0.093s elapsed) EXIT time 0.000s ( 0.000s elapsed) Total time 7.325s ( 7.326s elapsed) %GC time 1.3% (1.3% elapsed) Alloc rate 1,268,570,828 bytes per MUT second Productivity 98.7% of total user, 98.7% of total elapsed</code> </pre> <br><p>  рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рдЧрддрд┐ рд╣реИ!  рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрда рдЧреБрдирд╛ рдХрдо рд╣реЛ рдЧрдпрд╛ рдерд╛, рдХрд╛рд░реНрдпрдХреНрд░рдо рдирд┐рд╖реНрдкрд╛рджрди рдХреА рдЧрддрд┐ 180 рдЧреБрдирд╛ рдмрдврд╝ рдЧрдИ, рдФрд░ рдХрдЪрд░рд╛ рдХрд▓реЗрдХреНрдЯрд░ рд▓рдЧрднрдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХреЗ рдмрд┐рдирд╛ рдмрдирд╛ рд░рд╣рд╛ред </p><br><p><img src="https://habrastorage.org/webt/o7/cw/f8/o7cwf8ptddtz8x1gdy0lunionis.png"></p><br><p>  рд╕рдорд╛рдзрд╛рди <em>рдореЛрдиреЛрдкрд┐рдЧ рд╕реЗрдВрдЯ</em> рджрд┐рдЦрд╛рдИ рджрд┐рдпрд╛ <em>ред</em>  <em>mutред</em>  , рдЬреЛ <code>js</code> рдкрд░ рдореВрд▓ рд╕рдорд╛рдзрд╛рди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рджрд╕ рдЧреБрдирд╛ рдзреАрдорд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдорд╕реНрдХрд▓ рд╡реИрдХреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рд╛рд╕реНрдХреЗрд▓ рдкрд░ рдореВрд▓ рд╕рдорд╛рдзрд╛рдиред  рдпрд╣рд╛рдБ рдЙрд╕рдХрд╛ рдХреЛрдб рд╣реИ: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">fill'</span></span> :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Memory</span></span> <span class="hljs-type"><span class="hljs-type">IO</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">IO</span></span> (<span class="hljs-type"><span class="hljs-type">Memory</span></span> <span class="hljs-type"><span class="hljs-type">IO</span></span>) fill' knm | n &gt; memSize-k = return m | otherwise = <span class="hljs-type"><span class="hljs-type">M</span></span>.unsafeWrite mn <span class="hljs-number"><span class="hljs-number">1</span></span> &gt;&gt; fill' k (n+k) m sieve' :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Memory</span></span> <span class="hljs-type"><span class="hljs-type">IO</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">IO</span></span> (<span class="hljs-type"><span class="hljs-type">Memory</span></span> <span class="hljs-type"><span class="hljs-type">IO</span></span>) sieve' km | k*k &lt; memSize = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> x &lt;- <span class="hljs-type"><span class="hljs-type">M</span></span>.unsafeRead mk <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> fill' k (<span class="hljs-number"><span class="hljs-number">2</span></span>*k) m &gt;&gt;= sieve' (k+<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> sieve' (k+<span class="hljs-number"><span class="hljs-number">1</span></span>) m | otherwise = return m</code> </pre> <br><p>  рдпрд╣ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">main</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> m &lt;- <span class="hljs-type"><span class="hljs-type">M</span></span>.replicate memSize <span class="hljs-number"><span class="hljs-number">0</span></span> stimes <span class="hljs-number"><span class="hljs-number">100</span></span> (sieve' <span class="hljs-number"><span class="hljs-number">2</span></span> m &gt;&gt; return ()) print <span class="hljs-string"><span class="hljs-string">"Ok"</span></span></code> </pre> <br><p>  рдФрд░ рдЕрдм рд╣рд╛рд╕реНрдХреЗрд▓ рдЕрдВрдд рдореЗрдВ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд╣ рдПрдХ рдЦрд┐рд▓реМрдирд╛ рднрд╛рд╖рд╛ рдирд╣реАрдВ рд╣реИред  рдмрд╕ рдЖрдкрдХреЛ рдЗрд╕реЗ рд╕рдордЭрджрд╛рд░реА рд╕реЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рд╡реИрд╕реЗ, рдЙрдкрд░реЛрдХреНрдд рдХреЛрдб рдЗрд╕ рддрдереНрдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдкреНрд░рдХрд╛рд░ <code>IO ()</code> рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдорд┐рдХ рдирд┐рд╖реНрдкрд╛рджрди <code>(&gt;&gt;)</code> рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рд╛рде рдПрдХ <code>stimes</code> , рдФрд░ <code>stimes</code> рдХреА рдорджрдж рд╕реЗ рд╣рдордиреЗ рдкрд░реАрдХреНрд╖рдг рд╕рдорд╕реНрдпрд╛ рдХреА рдЧрдгрдирд╛ рдХреЛ 100 рдмрд╛рд░ рджреЛрд╣рд░рд╛рдпрд╛ред </p><br><p>  рдЕрдм рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рд╕рд░рдгрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕ рддрд░рд╣ рдХреА рдирд╛рдкрд╕рдВрдж рдХреНрдпреЛрдВ рд╣реИ рдФрд░ рдХреНрдпреЛрдВ рдХрд┐рд╕реА рдХреЛ рдпрд╛рдж рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЙрдирдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╣реИ: рдЬреИрд╕реЗ рд╣реА рдПрдХ рд╣рд╛рд╕реНрдХреЗрд▓ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЕрднрд┐рдЧрдо рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд╡рд╣ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдбреЗрдЯрд╛ рдкрд░ refocuses рдХрд░рддрд╛ рд╣реИ рдФрд░ ST рдпрд╛O рдореЛрдиреЛрдбреНрд╕ рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЖрджреЗрд╢реЛрдВ рдХреЗ рдПрдХ рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд▓рд╛рдирд╛, рд╕рдорд╕рд╛рдордпрд┐рдХрддрд╛ рдХреА рд╡реИрдзрддрд╛ рдкрд░ рд╕рд╡рд╛рд▓ рдЙрдард╛рддрд╛ рд╣реИ <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20.072ex" height="2.419ex" viewBox="0 -780.1 8642 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6F" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6E" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-67" x="1634" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6C" x="2115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-65" x="2413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-66" x="2880" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-74" x="3430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-72" x="3792" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-69" x="4243" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-67" x="4589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-68" x="5069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-74" x="5646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-61" x="6007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-72" x="6537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-72" x="6988" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6F" x="7440" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-77" x="7925" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ longleftrightarrow </script>  <em>рдХрд╛рд░реНрдпрдХреНрд░рдо</em> ред  рдЖрдЦрд┐рд░рдХрд╛рд░, рд╣рдо рдПрдХ рд╕рд╛рде рдХреЛрдб рдХреЛ рд╢реБрджреНрдз рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдФрд░ рд╡рд┐рд╡рд╛рджрд╛рд╕реНрдкрдж рд▓реЛрдЧреЛрдВ рдореЗрдВ рдирд╣реАрдВ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдкреНрд░рдХрд╛рд░ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдРрд╕рд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕ рдЖрдЗрд╕реЛрдореЛрд░реНрдлрд┐рдЬрд╝реНрдо рдХреЗ рд▓рд┐рдП рдЯрд╛рдЗрдк рдХреНрд▓рд╛рд╕реЗрд╕ рдХрд╛рдлреА рд▓рдЪреАрд▓реА рд╣реИрдВред  рд╣реЛрдореЛрдореЛрд░реНрдлрд┐рдЬреНрдо <em>рдХреЛрдб</em> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.177ex" height="2.419ex" viewBox="0 -780.1 6965 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6F" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6E" x="1034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-67" x="1634" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-72" x="2115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-69" x="2566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-67" x="2912" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-68" x="3392" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-74" x="3969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-61" x="4330" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-72" x="4860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-72" x="5311" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-6F" x="5763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMATHI-77" x="6248" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ longrightarrow </script>  <em>рдХрд╛рд░реНрдпрдХреНрд░рдо</em> рдЕрдм рднрд╛рд╖рд╛ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╕рдмрд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдХрдИ рд╕рдорд░реВрдкрддрд╛ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рд╣реИред  рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╣ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдкреВрд░реНрдг [рдХреЛрдб] () рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><h3 id="ne-ostanavlivaysya-na-dostignutom">  рд╡рд╣рд╛рдВ рд░реБрдХрдирд╛ рдордд </h3><br><p>  рдЕрдирд╛рд╡рд╢реНрдпрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ рдФрд░ рдкреНрд░рд╛рдЧреНрдорд╛ <code>{-# INLINE #-}</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реАрдзреЗ рдЙрдирдХреЗ рдХреЛрдб рдХреЛ рдПрдореНрдмреЗрдб рдХрд░рдирд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреА рдЙрддреНрдкрд╛рджрдХрддрд╛ рдХреЛ рдереЛрдбрд╝рд╛ рдмрджрд▓рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред  рдпрд╣ рд╡рд┐рдзрд┐ рдкреБрдирд░рд╛рд╡рд░реНрддреА рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдкрдпреБрдХреНрдд рд╣реИ, рд▓реЗрдХрд┐рди рдмреБрдирд┐рдпрд╛рджреА рдШрдЯрдХреЛрдВ рдФрд░ рд╕реЗрдЯрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдорд╣рд╛рди рд╣реИред  рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд╕рдордп рдХреЛ 25% рдХрдо рдХрд░ рджреЗрддрд╛ рд╣реИ ( <a href="">рдореЛрдиреЛрдкрд┐рдЧ51</a> рджреЗрдЦреЗрдВред)ред </p><br><p><img src="https://habrastorage.org/webt/0k/-l/hu/0k-lhu49_zsiihqoom7c5g0ize8.png"></p><br><p>  рдЕрдЧрд▓реЗ рдЙрдЪрд┐рдд рдХрджрдо рдХреЗ рд▓рд┐рдП рд▓реЙрдЧрд┐рдВрдЧ рдЯреВрд▓ рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдирд╛ рд╣реЛрдЧрд╛ рдЬрдм рдЙрдиреНрд╣реЗрдВ рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИред  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдПрдВрдбреЛрдореЛрд░реНрдлрд┐рдЬрд╝реНрдо рдХреЗ рдЧрдарди рдХреЗ рдЪрд░рдг рдореЗрдВ, рд╣рдо рдПрдХ рдмрд╛рд╣рд░реА рддрд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рд╣рдо рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд╕реНрдорд╛рд░реНрдЯ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░реНрд╕ <code>program</code> рдФрд░ <code>program</code> рдЪреЗрддрд╛рд╡рдиреА рджреА рдЬрд╛ рд╕рдХрддреА рд╣реИ рдХрд┐ рдХреЛрдИ рддрд░реНрдХ-рд▓рдХрдбрд╝рд╣рд╛рд░рд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрдирд╡рд░реНрдЯрд░ рдХреЛрдб рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ: рдХреЗрд╡рд▓ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдФрд░ рдорд╢реАрди рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ред </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">program</span></span> code f = programM code (const f) programM code f (<span class="hljs-type"><span class="hljs-type">Just</span></span> logger) mem = <span class="hljs-type"><span class="hljs-type">Program</span></span> . ([code],) . <span class="hljs-type"><span class="hljs-type">ActionM</span></span> $ \vm -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> status vm <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">Nothing</span></span> -&gt; logger mem code =&lt;&lt; f mem (stack vm) vm _ -&gt; return vm programM code f _ mem = <span class="hljs-type"><span class="hljs-type">Program</span></span> . ([code],) . <span class="hljs-type"><span class="hljs-type">ActionM</span></span> $ \vm -&gt; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> status vm <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">Nothing</span></span> -&gt; f mem (stack vm) vm _ -&gt; return vm</code> </pre> <br><p>  рдЕрдм, рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ <code>none</code> рд╕реНрдЯрдм рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЙрдЧрд┐рдВрдЧ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдпрд╛ рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдХреЛ рдЗрдВрдЧрд┐рдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди <code>Maybe (Logger ma)</code> рдкреНрд░рдХрд╛рд░ <code>Maybe (Logger ma)</code> ред  рдпрд╣ рдХрд╛рдо рдХреНрдпреЛрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдпрджрд┐ рд▓реЙрдЧрд┐рдВрдЧ рд╣реИ рдпрд╛ рдирд╣реАрдВ, рддреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдШрдЯрдХ рдирд┐рд╖реНрдкрд╛рджрди рд╕реЗ рдкрд╣рд▓реЗ "рдЕрдВрддрд┐рдо рд╕рдордп рдкрд░" рдкрддрд╛ рд▓рдЧрд╛ рд▓реЗрдВрдЧреЗ?  рдХреНрдпрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрдВрдкреЛрдЬрд┐рдВрдЧ рдХреЗ рдЪрд░рдг рдореЗрдВ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдХреЛрдб рдХреЛ рд╕реАрд╡рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛?  рд╣рд╛рд╕реНрдХреЗрд▓ рдПрдХ рдЖрд▓рд╕реА рднрд╛рд╖рд╛ рд╣реИ рдФрд░ рдпрд╣рд╛рдВ рдпрд╣ рд╣рдорд╛рд░реЗ рд╣рд╛рдереЛрдВ рдореЗрдВ рдЦреЗрд▓рддреА рд╣реИред  рдпрд╣ рдирд┐рд╖реНрдкрд╛рджрди рд╕реЗ рдкрд╣рд▓реЗ рд╣реИ рдХрд┐ рдЕрдВрддрд┐рдо рдХреЛрдб рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИред  рдЗрд╕ рдЕрдиреБрдХреВрд▓рди рдиреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд╕рдордп рдХреЛ рдПрдХ рдФрд░ 40% рдХрдо рдХрд░ рджрд┐рдпрд╛ (рджреЗрдЦреЗрдВ <a href="">рдореЛрдиреЛрдкрд┐рдЧ52</a> . <a href="">hs</a> )ред </p><br><p><img src="https://habrastorage.org/webt/co/gd/vy/cogdvyw-zsyliuiwsmhxs5gadhe.png"></p><br><p>  рдЗрд╕рдХреЗ рд╕рд╛рде, рд╣рдо рдореЛрдиреЛрдЗрдбрд▓ рдкрд┐рдЧрд▓реЗрдЯ рдХреЛ рддреЗрдЬ рдХрд░рдиреЗ рдкрд░ рдХрд╛рдо рдкреВрд░рд╛ рдХрд░реЗрдВрдЧреЗред  рд╡рд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд╛рдлреА рддреЗрдЬреА рд╕реЗ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рддрд╛рдХрд┐ рдкрд░реА рдФрд░ рджрд╛рдирд╡ рджреЛрдиреЛрдВ рд╢рд╛рдВрдд рд╣реЛ рд╕рдХреЗрдВред  рдпрд╣, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рд╕реА рдирд╣реАрдВ рд╣реИ, рд╣рдо рдЕрднреА рднреА рдПрдХ рд╕реНрдЯреИрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдПрдХ рд╕рд╛рдл рд╕реВрдЪреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдПрдХ рд╕рд░рдгреА рдХреЗ рд╕рд╛рде рдмрджрд▓рдиреЗ рд╕реЗ рдХреЛрдб рдХреА рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЦреБрджрд╛рдИ рд╣реЛ рдЬрд╛рдПрдЧреА, рдФрд░ рдмреБрдирд┐рдпрд╛рджреА рдЖрдЬреНрдЮрд╛рдУрдВ рдХреА рдкрд░рд┐рднрд╛рд╖рд╛ рдореЗрдВ рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдореИрдВ рдХрдо рд╕реЗ рдХрдо рдмрджрд▓рд╛рд╡ рдХреЗ рд╕рд╛рде, рдФрд░ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕реНрддрд░ рдкрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ред </p><br><p>  рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдПрдВ рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд╕рд╛рде рд░рд╣рддреА рд╣реИрдВред  рдЪрд░рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреА рдПрдХ рд╕рд░рд▓ рдЧрдгрдирд╛ рдпрд╛ рд╕реНрдЯреИрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ (рд╣рдордиреЗ рд▓реЙрдЧ рдлрд╝реАрд▓реНрдб рдХреЛ рд╕рдЦреНрдд рдмрдирд╛ рджрд┐рдпрд╛ рд╣реИ), рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдЬреЛрдбрд╝рдХрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореЗрдореЛрд░реА рдЦрд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ рд╣реИ, рдЖрдкрдХреЛ <code>seq</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдХ рдХреЗ рд╕рд╛рде рдЧрдбрд╝рдмрдбрд╝ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрд╣реБрдд рдХрд╖реНрдЯрдкреНрд░рдж рд╣реИред  рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдмрддрд╛рдЗрдП, 14 рдмрд┐рд▓рд┐рдпрди рдЪрд░рдгреЛрдВ рдореЗрдВ рдХреМрди рд▓реЙрдЧ рдХрд░реЗрдЧрд╛, рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реИрдХрдбрд╝реЛрдВ рдореЗрдВ рдХрд╛рд░реНрдп рдХреЛ рдбреАрдмрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?  рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЕрдкрдирд╛ рд╕рдордп рддреНрд╡рд░рдг рдХреЗ рд▓рд┐рдП рддреЗрдЬ рдХрд░рдиреЗ рдореЗрдВ рдирд╣реАрдВ рдмрд┐рддрд╛рдКрдВрдЧрд╛ред </p><br><p>  рдпрд╣ рдХреЗрд╡рд▓ рдкрд┐рдЧрд▓реЗрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓реЗрдЦ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛ рд╣реБрдЖ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЧрдгрдирд╛рдУрдВ рдХреЗ рдЕрдиреБрдХреВрд▓рди рдХреЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ, рдЕрдиреБрд░реЗрдЦрдг рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: рдХреЛрдб рдХреЗ рд░реИрдЦрд┐рдХ рд╡рд░реНрдЧреЛрдВ рдХрд╛ рдЖрд╡рдВрдЯрди, рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдЧрдгрдирд╛ рдореБрдЦреНрдп рдХрдорд╛рдВрдб рдкреНрд░реЗрд╖рдг рдЪрдХреНрд░ ( <code>switch</code> рдмреНрд▓реЙрдХ) рдХреЛ рджрд░рдХрд┐рдирд╛рд░ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдШрдЯрдХреЛрдВ рдХреА <code>fromCode</code> рдШрдЯрдХреЛрдВ рд╕реЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рдпрд╛ <code>fromCode</code> рд╣реЛрдореЛрдореЛрд░реНрдлрд┐рдЬреНрдо рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рджреМрд░рд╛рди рдРрд╕реЗ рдирд┐рд╢рд╛рди рдмрдирд╛рддреА рд╣реИред  рдпрд╣ рдЕрдиреБрдХреВрд▓рди рд╡рд┐рдзрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдореБрдлреНрдд рдореЗрдВ рдЬрд╛рддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдирд┐рд░реНрдорд╛рдг рджреНрд╡рд╛рд░рд╛ рдмреЛрд▓рдирд╛ рд╣реИред </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mo>&amp;#x2217;</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.681ex" height="1.335ex" viewBox="0 -520.7 2445.9 574.6" role="img" focusable="false" style="vertical-align: -0.125ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMAIN-2217" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMAIN-2217" x="972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://habr.com/ru/post/430956/&amp;usg=ALkJrhhwNdQkXG1wiEjzFu1ynTSk9s80hQ#MJMAIN-2217" x="1945" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo>тИЧ</mo><mtext>&nbsp;</mtext><mo>тИЧ</mo><mtext>&nbsp;</mtext><mo>тИЧ</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> * \ * \ * </script></p><br><p>  рд╣рд╛рд╕реНрдХреЗрд▓ рдЗрдХреЛрд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдХрдИ <code>Conduits</code> рдФрд░ рддреЗрдЬрд╝ рд╕рдорд╛рдзрд╛рди рд╣реЛрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ <code>Conduits</code> рдпрд╛ <code>Pipes</code> рд╕реНрдЯреНрд░реАрдо, рдЙрддреНрдХреГрд╖реНрдЯ <code>String</code> рд░рд┐рдкреНрд▓реЗрд╕рдореЗрдВрдЯ рдФрд░ <code>attoparsec</code> html рдЬреИрд╕реЗ рдПрдХреНрд╕рдПрдордПрд▓ рдирд┐рд░реНрдорд╛рддрд╛ рд╣реИрдВ, рдФрд░ <code>attoparsec</code> (тИЮ) рд╡реНрдпрд╛рдХрд░рдг рдХреЗ рд▓рд┐рдП <code>attoparsec</code> рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП <code>attoparsec</code> рдкрд╛рд░реНрд╕рд░ рдПрдХ рдорд╛рдирдХ рд╣реИред  рдпрд╣ рд╕рдм рд╕рд╛рдорд╛рдиреНрдп рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рднреА рдЕрдзрд┐рдХ рдЖрд╡рд╢реНрдпрдХ рд╢реЛрдз рдЗрди рдлреИрд╕рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдЧреНрд░рдгреА рд╣реИред  рд╣рд╛рд╕реНрдХреЗрд▓ рд░рд╣рд╛ рд╣реИ рдФрд░ рдПрдХ рд╢реЛрдз рдЙрдкрдХрд░рдг рдмрдирд╛ рд╣реБрдЖ рд╣реИ рдЬреЛ рдЖрдо рдЬрдирддрд╛ рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдкреВрд░рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдореИрдВрдиреЗ рдХрдордЪрдЯрдХрд╛ рдореЗрдВ рджреЗрдЦрд╛ рдХрд┐ рдХреИрд╕реЗ рдПрдХ рддрд░реНрдХ рдкрд░ Mi-4 рд╣реЗрд▓реАрдХреЙрдкреНрдЯрд░ рдХреЗ рдЗрдХреНрдХреЗ рдкрд░ рдорд╛рдЪрд┐рд╕ рдХреА рддреАрд▓рд┐рдпреЛрдВ рдХреЛ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛, рдФрд░ рд╣рд╡рд╛ рдореЗрдВ рд▓рдЯрдХрддреЗ рд╣реБрдП рдПрдХ рдкрд╣рд┐рдпрд╛ рдХреЗ рд╕рд╛рде рд▓реИрдВрдбрд┐рдВрдЧ рдЧрд┐рдпрд░ рдХреЛ рдзрдХреЗрд▓ рджрд┐рдпрд╛ред  рдпрд╣ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдЕрдЪреНрдЫрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИред </p><br><p>  рд▓реЗрдХрд┐рди, рдлрд┐рд░ рднреА, рдпрд╣ рдЕрдЪреНрдЫрд╛ рд╣реИ !! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi430956/">https://habr.com/ru/post/hi430956/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi430942/index.html">рдЬреВрд▓рд┐рдпрд╛ред рд▓рд┐рдкрд┐рдпреЛрдВ рдФрд░ рдкрд╛рд░реНрд╕рд┐рдВрдЧ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХ</a></li>
<li><a href="../hi430948/index.html">рд╕рдВрдЪрд╛рд░ рдордВрддреНрд░рд╛рд▓рдп рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреЗрдЯрд╛ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдХреЛ рдХрдбрд╝рд╛ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рд░рдЦрддрд╛ рд╣реИ</a></li>
<li><a href="../hi430950/index.html">рдореЙрдбрд░реНрди рдмрд┐рд▓реНрдб рдмрдирд╛рдирд╛</a></li>
<li><a href="../hi430952/index.html">рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдХрд╛рд░реЛрдВ рдФрд░ рд╣рд╛рдЗрдмреНрд░рд┐рдб рдХрд╛рд░реЛрдВ рдХреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдЖрд╡рд╛рдЬрд╝реЗрдВ рджреЗрдиреА рд╣реЛрдВрдЧреА: рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ</a></li>
<li><a href="../hi430954/index.html">Qt рдПрд╡рд░реАрд╡реЗрдпрд░: WebAssembly рдФрд░ WebGL рд╕реНрдЯреНрд░реАрдорд┐рдВрдЧ</a></li>
<li><a href="../hi430958/index.html">рд╣рдо рдХрдВрдЯреЗрдирд░ рдХреЛ Azure DevOps (VSTS) рдореЗрдВ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд╕рд╛рде рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi430960/index.html">рдПрдХ рдбреЗрд╕реНрдХрдЯреЙрдк рдкреНрд░рджрд░реНрд╢рдиреА рд╕реЗ gamedev рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</a></li>
<li><a href="../hi430962/index.html">рд╡рд┐рдЬреБрдЕрд▓ рд╕реНрдЯреВрдбрд┐рдпреЛ рдХреЛрдб рдореЗрдВ рд░реЗрдЬрд░ рд╕рдкреЛрд░реНрдЯ</a></li>
<li><a href="../hi430964/index.html">рдШреЛрд╖рдгрд╛рддреНрдордХ рд╕реЛрдЪ</a></li>
<li><a href="../hi430966/index.html">рдПрдЯрд▓рд╛рдВрдЯрд┐рдпрди рдЬреАрд░рд╛ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдкреНрд░рд┐рдВрдЯ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>