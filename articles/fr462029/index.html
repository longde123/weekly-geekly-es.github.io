<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî§ üëäüèª ü•† 19 fonctionnalit√©s utiles du fichier .htaccess ‚ôãÔ∏è üéê üìê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je parie que vous n'en √©tiez pas au courant. Nous avons mis en place des applications .htaccess pour am√©liorer le site. Il est souvent utilis√© par les...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>19 fonctionnalit√©s utiles du fichier .htaccess</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/promopult/blog/462029/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/j1/7v/fpj17vbejxqjouncivragbm2t5m.jpeg" alt="19 fonctionnalit√©s utiles du fichier .htaccess"></div><br><br><p>  Je parie que vous n'en √©tiez pas au courant.  Nous avons mis en place des applications .htaccess pour am√©liorer le site.  Il est souvent utilis√© par les optimiseurs pour configurer correctement les redirections 301.  Mais les possibilit√©s du fichier ne se limitent pas √† cela.  Ici, la s√©curit√©, l'optimisation et les param√®tres d'affichage - en utilisant .htaccess, le webmaster peut faire beaucoup de choses utiles pour faire fonctionner le site correctement. </p><a name="habracut"></a><br><p>  Le fichier .htaccess (abr√©viation de ¬´acc√®s hypertexte¬ª) remplace les param√®tres du type de serveur Web Apache le plus populaire et de ses analogues.  Vous trouverez ci-dessous des fa√ßons d'utiliser .htaccess √† diff√©rentes fins avec des exemples de code. </p><br><div class="spoiler">  <b class="spoiler_title">Contenu de l'article</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pourquoi .htaccess est n√©cessaire et o√π le chercher</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Syntaxe .htaccess</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Configurer des redirections pour le r√©f√©rencement</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous assurons la s√©curit√© du site</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Personnalisez l'affichage du site</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous optimisons le site</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Quelques possibilit√©s suppl√©mentaires</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√®gles g√©n√©rales .htaccess</a> <br></div></div><br><a name="id1"></a><h2>  Pourquoi .htaccess est n√©cessaire et o√π le chercher </h2><br><p>  Le fichier est n√©cessaire pour des param√®tres de serveur plus flexibles pour les t√¢ches d'optimisation.  La d√©finition de r√®gles dans .htaccess ne vaut pas la peine si vous avez acc√®s au fichier de configuration du serveur principal .httpd.conf ou apache.conf (le nom d√©pend des param√®tres du syst√®me d'exploitation).  Les modifications apport√©es prennent effet plus rapidement, les requ√™tes ne surchargent pas le serveur.  Cependant, tr√®s souvent, un tel acc√®s n'existe pas, par exemple dans le cas d'un h√©bergement partag√©.  Ensuite, vous devez enregistrer les param√®tres n√©cessaires via .htaccess. </p><br><p>  Caract√©ristiques .htaccess pour l'optimisation du site: </p><br><ul><li>  Configuration de redirections pour le r√©f√©rencement. </li><li>  Assurer la s√©curit√© de la ressource dans son ensemble et des sections individuelles. </li><li>  R√©glage de l'affichage correct du site. </li><li>  Optimisation de la vitesse de t√©l√©chargement. </li></ul><br><h3>  O√π chercher et comment √©diter </h3><br><p>  Si le fichier .htaccess se trouve dans le dossier racine, l'action de commande s'√©tend √† l'ensemble du site, mais vous pouvez le placer dans n'importe quel r√©pertoire.  Les directives ne concerneront alors qu'un r√©pertoire et des sous-r√©pertoires sp√©cifiques.  Ainsi, une ressource peut avoir plusieurs fichiers .htaccess.  La priorit√© est donn√©e aux commandes du fichier situ√© dans le r√©pertoire, et non √† la racine. </p><br><p>  .htaccess est le nom g√©n√©ralement accept√© et le plus populaire, mais non obligatoire (il est sp√©cifi√© dans le fichier httpd.conf).  Malgr√© le nom inhabituel, vous pouvez cr√©er et modifier le fichier dans n'importe quel √©diteur de texte. </p><br><p>  Certains CMS offrent la possibilit√© de modifier le fichier via le panneau d'administration.  Dans Bitrix, il peut facilement √™tre trouv√© dans la section Contenu - Fichiers et dossiers: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1_/2f/vc/1_2fvcz6ltpvxfcnlxvi9gwi94u.png" alt="19 fonctionnalit√©s utiles du fichier .htaccess"></div><br><br><p>  Dans WordPress, vous pouvez modifier .htaccess √† l'aide des modules de plug-in Yoast SEO et All in One SEO Pack. </p><br><p>  Si le fichier .htaccess est manquant, cr√©ez-le dans un √©diteur de texte et placez-le dans le dossier racine du site ou dans le r√©pertoire souhait√© (vous aurez besoin d'acc√©der √† l'h√©bergement ou via ftp). </p><br><a name="id2"></a><h2>  Syntaxe .htaccess </h2><br><p>  La syntaxe du fichier est simple: chaque directive (commande) commence par une nouvelle ligne, apr√®s le signe # vous pouvez ajouter des commentaires qui ne seront pas pris en compte par le serveur.  Les modifications apport√©es au site prennent effet imm√©diatement; le red√©marrage du serveur n'est pas requis. </p><br><p>  Des r√®gles sont d√©finies, notamment en utilisant des expressions r√©guli√®res.  Pour les lire, vous devez comprendre la signification des caract√®res sp√©ciaux et des variables.  D√©cryptez les plus utilis√©s. </p><br><h3>  Les principaux caract√®res sp√©ciaux: </h3><br><ul><li>  ^ - d√©but de ligne; </li><li>  $ - fin de ligne; </li><li>  .  - n'importe quel caract√®re; </li><li>  * - n'importe quel nombre de caract√®res; </li><li> ?  - un caract√®re sp√©cifique; </li><li>  [0-9] est une s√©quence de caract√®res, par exemple, de 0 √† 9; </li><li>  |  - symbole ¬´ou¬ª, un groupe ou un autre est s√©lectionn√©; </li><li>  () - utilis√© pour s√©lectionner des groupes de caract√®res. </li></ul><br><h3>  Les principales variables sont: </h3><br><ul><li>  % {HTTP_USER_AGENT} - Champ User-Agent, qui est transmis par le navigateur de l'utilisateur; </li><li>  % {REMOTE_ADDR} - Adresse IP de l'utilisateur; </li><li>  % {REQUEST_URI} - l'URI demand√©; </li><li>  % {QUERY_STRING} - param√®tres de requ√™te apr√®s le signe?. </li></ul><br><p>  Pour ceux qui veulent approfondir le sujet - la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://">documentation</a> officielle compl√®te <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://">sur l'utilisation de .htaccess</a> ou une bonne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ressource en russe</a> .  Et nous passerons en revue les principales fonctionnalit√©s du fichier pour optimiser votre site. </p><br><a name="id3"></a><h2>  Configurer des redirections pour le r√©f√©rencement </h2><br><p>  Comme nous l'avons mentionn√©, c'est la fa√ßon la plus populaire d'utiliser .htaccess.  Avant de configurer tel ou tel type de transfert d'appel, assurez-vous qu'il est vraiment n√©cessaire.  Par exemple, une redirection vers des pages avec une barre oblique est configur√©e par d√©faut dans certains CMS.  Nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©crit</a> sur les param√®tres de redirection pour le r√©f√©rencement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le blog</a> . </p><br><h3>  Lors de la configuration des redirections 301, n'oubliez pas deux r√®gles: </h3><br><ol><li>  √âvitez plusieurs redirections cons√©cutives - elles augmentent la charge sur le serveur et r√©duisent la vitesse du site. </li><li>  Placez les redirections du priv√© vers le global.  Par exemple, redirigez d'abord d'une page vers une autre, puis une redirection g√©n√©rale vers des pages avec une barre oblique.  Cette r√®gle ne fonctionne pas dans 100% des cas, vous devez donc exp√©rimenter le placement des directives. </li></ol><br><h3>  1. Configurer les redirections de la page 301 </h3><br><p>  Cela sera n√©cessaire dans les cas suivants: </p><br><ul><li>  la structure du site a chang√© et le niveau d'imbrication de la page a chang√©; </li><li>  la page a cess√© d'exister, mais il est n√©cessaire de pr√©server son trafic entrant (par exemple, en l'absence de marchandises, elles redirigent g√©n√©ralement vers la cat√©gorie de produit); </li><li>  L'URL a chang√©, ce qui est extr√™mement ind√©sirable, mais √©galement trouv√©. </li></ul><br><p>  La suppression de la page est une mauvaise id√©e, il vaut mieux ne pas donner au robot une erreur 404, mais la rediriger vers une autre URL.  Dans ce cas, il y a une chance de ne pas perdre la position du site dans l'√©mission et le trafic cibl√©.  Vous pouvez configurer 301 redirections d'une page √† une autre √† l'aide de la <strong>directive de redirection simple</strong> : </p><br><p></p><pre><code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">Redirect</span></span> 301 /page1/ https://mysite.com/page2/</code> </pre> <br><ul><li>  <code>/page1/</code> - adresse de la page depuis la racine, sans protocole ni domaine.  Par exemple, <code>/catalog/ofisnaya-mebel/kompjuternye-stoly/</code> . </li><li>  <code>https://mysite.com/page2/</code> - adresse compl√®te de la page de redirection, y compris le protocole et le domaine.  Par exemple, <code>https://dom-mebeli.com/ofisnaya-mebel/stoly-v-ofis/</code> . </li></ul><br><h3>  2. D√©barrassez-vous des prises </h3><br><p>  Chaque page du site doit √™tre accessible √† une seule adresse.  Pour ce faire, les √©l√©ments suivants doivent √™tre configur√©s: </p><br><ul><li>  rediriger vers des pages avec une barre oblique √† la fin de l'URL ou vice versa; </li><li>  Le miroir principal est l'adresse du site principal dans la recherche. </li></ul><br><p>  Cela peut √™tre fait en utilisant le module <code>mod_rewrite</code> .  Il utilise des commandes sp√©ciales - <strong>des directives de redirection complexes</strong> .  La premi√®re commande consiste toujours √† activer la conversion d'URL: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span></code> </pre> <br><h4>  Transf√©rer vers la barre oblique ou vice versa </h4><br><p>  Que ce soit pour rediriger vers des pages avec ou sans barre oblique, dans chaque cas, vous devez d√©cider individuellement.  Si le site a d√©j√† accumul√© un historique dans la recherche, analysez quelles pages de l'index sont plus grandes.  Pour les nouveaux sites, ils configurent g√©n√©ralement une redirection vers une barre oblique.  V√©rifier si la redirection n'est pas configur√©e par d√©faut est simple: supprimer / ajouter une barre oblique √† la fin de l'URL.  Si la page se recharge avec une nouvelle adresse - nous avons des doublons, une configuration est requise.  Si l'URL est substitu√©e, alors tout est en ordre.  Il est pr√©f√©rable de v√©rifier plusieurs niveaux d'imbrication. </p><br><h4>  Redirection du code 301 vers une barre oblique: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> /+[^\.]+$ RewriteRule ^(.+[^/])$ <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span>/<span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><h4>  Redirection du code 301 vers des pages sans barre oblique: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\? RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\&amp; RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\= RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !\. RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> ![^\/]$ RewriteRule ^(.*)\/$ /<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><h3>  3. Installez le miroir principal </h3><br><p>  Vous devez d'abord d√©cider quelle adresse sera la principale pour la recherche.  Le certificat SSL est depuis longtemps une banni√®re g√©n√©rique.  Il suffit de l'installer et d'ajouter la r√®gle dans .htaccess.  N'oubliez pas de l'enregistrer √©galement dans le fichier robots.txt. </p><br><h4>  Redirection HTTPS </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTPS}</span></span> !<span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteRule (.*) https://<span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span><span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span></code> </pre> <br><p>  Il existe plusieurs fa√ßons de d√©terminer si le miroir principal sera ou non avec ¬´www¬ª: </p><br><ul><li>  ajouter un site √† Yandex.Webmaster en deux versions, la console affiche des informations sur l'URL que le moteur de recherche consid√®re comme le miroir principal; </li><li>  analyser l'√©mission et voir quelles pages du site figurent le plus dans l'index; </li><li>  peu importe pour une nouvelle ressource, avec ou sans www il y aura une adresse, √† vous de choisir. </li></ul><br><p>  Une fois le choix effectu√©, utilisez l'une des deux options de code. </p><br><h4>  Rediriger de www vers sans www </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span> ^www\.(.*)$<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^(.*)$ http://%1/$1 [R=301,L]</span></span></code> </pre> <br><h4>  Rediriger sans www vers www </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span> !^www\..*<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^(.*) http://www.%{HTTP_HOST}/$1 [R=301]</span></span></code> </pre> <br><h3>  4. Nous redirigeons d'un domaine vers un autre </h3><br><p>  La raison la plus √©vidente de la configuration de cette redirection est de rediriger les robots et les utilisateurs vers une adresse diff√©rente lorsque le site se d√©place vers un nouveau domaine.  En outre, les optimiseurs l'utilisent pour manipuler la masse de r√©f√©rence, mais les domaines de chute et le PBN sont des technologies de promotion des gris, que nous n'aborderons pas dans ce mat√©riau. </p><br><p>  <strong>Utilisez l'une des options de code:</strong> </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteRule ^(.*)$ http://www.mysite2.com/<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><p>  <strong>ou</strong> </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span> ^www\.mysite1\.ru$<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^(.*)$ http://www.mysite2.ru/$1 [R=301,L]</span></span></code> </pre> <br><p>  N'oubliez pas de remplacer ¬´mysite1¬ª et ¬´mysite2¬ª dans le code par l'ancien et le nouveau domaine, respectivement. </p><br><blockquote><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Module SEO</a> dans le syst√®me Promopult: pour ceux qui ne veulent pas se noyer dans la routine.  Tous les outils pour am√©liorer la qualit√© du site et la promotion de la recherche, l'automatisation des processus, les listes de contr√¥le, les rapports d√©taill√©s. </p></blockquote><br><a name="id4"></a><h2>  Nous assurons la s√©curit√© du site </h2><br><p>  Le fichier .htaccess offre de grandes opportunit√©s pour prot√©ger le site contre les scripts malveillants, le vol de contenu et les attaques DOS.  Vous pouvez √©galement prot√©ger l'acc√®s √† des fichiers et des partitions sp√©cifiques. </p><br><h3>  5. Nous interdisons le t√©l√©chargement d'images √† partir de votre site </h3><br><p>  Il existe des technologies dans lesquelles les sites tiers utilisent du contenu, y compris des images, en le t√©l√©chargeant directement depuis votre h√©bergement par hotlink (liens directs vers des fichiers).  Cela est non seulement insultant et viole les droits d'auteur, mais cr√©e √©galement une charge suppl√©mentaire inutile sur votre serveur. </p><br><p>  Les voleurs de si√®ge avec ce code: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymlinks RewriteEngine <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> !^$ RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> !^https://(www.)?mysite.com/<span class="hljs-meta"><span class="hljs-meta"> [nc] RewriteRule .*.(gif|jpg|png)$ https://mysite.com/img/goaway.gif[nc]</span></span></code> </pre> <br><p>  Remplacez ¬´mysite.com¬ª par l'adresse de votre site et cr√©ez une image avec n'importe quel message disant que voler des photos d'autres personnes n'est pas bon sur <code>https://mysite.com/img/goaway.gif</code> .  Cette image sera affich√©e sur une ressource tierce. </p><br><h3>  6. Refuser l'acc√®s </h3><br><p>  Des groupes entiers d'invit√©s ind√©sirables provenant d'adresses IP sp√©cifiques, de sous-r√©seaux et de robots malveillants peuvent se voir refuser l'acc√®s √† votre ressource √† l'aide des directives suivantes dans .htaccess. </p><br><h4>  Pour les agents utilisateurs ind√©sirables (bots) </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">SetEnvIfNoCase</span></span> user-Agent ^FrontPage<span class="hljs-meta"><span class="hljs-meta"> [NC,OR] SetEnvIfNoCase user-Agent ^Java.* [NC,OR] SetEnvIfNoCase user-Agent ^Microsoft.URL [NC,OR] SetEnvIfNoCase user-Agent ^MSFrontPage [NC,OR] SetEnvIfNoCase user-Agent ^Offline.Explorer [NC,OR] SetEnvIfNoCase user-Agent ^[Ww]eb[Bb]andit [NC,OR] SetEnvIfNoCase user-Agent ^Zeus [NC] &lt;limit get=‚Äù‚Äù post=‚Äù‚Äù head=‚Äù‚Äù&gt; Order Allow,Deny Allow from all Deny from env=bad_bot &lt;/limit&gt;</span></span></code> </pre> <br><p>  La liste des agents utilisateurs peut √™tre compl√©t√©e, r√©duite ou cr√©√©e la v√¥tre.  La liste des bons et des mauvais robots peut √™tre trouv√©e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><p>  Un cas particulier d'une telle interdiction est l'interdiction des robots de recherche.  Si, pour une raison quelconque, vous n'√™tes pas satisfait de la r√®gle dans robots.txt, vous pouvez refuser l'acc√®s, par exemple, √† Googlebot en utilisant les directives suivantes: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{USER_AGENT}</span></span> Googlebot RewriteRule .* -<span class="hljs-meta"><span class="hljs-meta"> [F]</span></span></code> </pre> <br><h4>  Pour tout sauf l'adresse IP sp√©cifi√©e </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">ErrorDocument</span></span></span></span> 403 https://mysite.com Order deny,allow Deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> Allow from IP1 Allow from IP2  . .</code> </pre> <br><p>  N'oubliez pas de remplacer "https://mysite.com" par l'adresse de votre site et entrez des adresses IP au lieu d'IP1, IP2, etc. </p><br><h4>  Pour des adresses IP sp√©cifiques </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">allow</span></span></span></span> from <span class="hljs-literal"><span class="hljs-literal">all</span></span> deny from IP1 deny from IP2  . .</code> </pre> <br><h4>  Pour le sous-r√©seau </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">allow</span></span></span></span> from <span class="hljs-literal"><span class="hljs-literal">all</span></span> deny from 192.168.0.0/24</code> </pre> <br><p>  Entrez le masque de r√©seau dans la ligne apr√®s ¬´refuser de¬ª. </p><br><p>  Les adresses IP de spam peuvent √™tre calcul√©es dans les journaux du serveur ou √† l'aide des services de statistiques.  Le tableau de bord d'administration WordPress affiche les adresses IP des commentateurs: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tu/h-/pv/tuh-pvunxnt_8dwik_mcs_qqrwe.png" alt="19 fonctionnalit√©s utiles du fichier .htaccess"></div><br><br><h4>  Vers un fichier sp√©cifique </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;files myfile.html&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">order</span></span></span></span> allow,deny deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/files&gt;</code> </pre> <br><p>  Saisissez le nom du fichier au lieu de ¬´monfichier.html¬ª dans l'exemple.  L'utilisateur verra l'erreur 403 - "l'acc√®s est refus√©." </p><br><p>  Il ne sera pas superflu de restreindre l'acc√®s au fichier .htaccess lui-m√™me pour des raisons de s√©curit√©, et nous vous recommandons √©galement de d√©finir 444 autorisations sur le fichier apr√®s avoir d√©fini toutes les r√®gles. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;Files .htaccess&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">order</span></span></span></span> allow,deny deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/Files&gt;</code> </pre> <br><p>  Pour les sites WordPress, il est important de restreindre l'acc√®s au fichier wp-config.php, car  il contient des informations sur la base de donn√©es: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;files wp-config.php&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">order</span></span></span></span> allow,deny deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/files&gt;</code> </pre> <br><h4>  Pour les utilisateurs provenant d'un site sp√©cifique </h4><br><p>  Vous pouvez bloquer les visiteurs des ressources ind√©sirables (par exemple, avec un contenu adulte ou choquant). </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;IfModule mod_rewrite.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> bad-site.com<span class="hljs-meta"><span class="hljs-meta"> [NC,OR] RewriteCond %{HTTP_REFERER} bad-site.com [NC,OR] RewriteRule .* - [F] &lt;/ifModule&gt;</span></span></code> </pre> <br><h3>  7. Prot√©gez l'acc√®s √† un fichier ou un dossier sp√©cifique </h3><br><p>  Pour commencer, cr√©ez un fichier .htpasswd, √©crivez-y les identifiants et les mots de passe au format user: password et placez-le √† la racine du site.  Pour des raisons de s√©curit√©, les mots de passe sont mieux crypt√©s.  Cela peut √™tre fait en utilisant des services sp√©ciaux pour g√©n√©rer des enregistrements, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ceci</a> .  L'√©tape suivante consiste √† ajouter des r√©pertoires ou des fichiers √† .htaccess: </p><br><h4>  Protection par mot de passe des fichiers </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;files secure.php=‚Äù‚Äù&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">AuthType</span></span> Basic AuthName ‚Äú‚Äù AuthUserFile /pub/home/.htpasswd Require valid-user &lt;/files&gt;</code> </pre> <br><h4>  Dossiers de protection par mot de passe </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">resides</span></span> AuthType basic AuthName ‚ÄúThis directory is protected‚Äù AuthUserFile /pub/home/.htpasswd AuthGroupFile /dev/null Require valid-user</code> </pre> <br><p>  Au lieu de ¬´/pub/home/.htpasswd¬ª, sp√©cifiez le chemin d'acc√®s au fichier .htpasswd √† partir de la racine du serveur.  Nous vous recommandons de v√©rifier l'acc√®s apr√®s l'installation du code. </p><br><h3>  8. Nous interdisons l'ex√©cution de scripts malveillants </h3><br><p>  Le groupe de directives suivant prot√®ge le site de la soi-disant "injection de script" - un outil pour les attaques de pirates: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymLinks RewriteEngine <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{QUERY_STRING}</span></span> (\&lt;|<span class="hljs-number"><span class="hljs-number">%3</span></span>C).*script.*(\&gt;|<span class="hljs-number"><span class="hljs-number">%3</span></span>E)<span class="hljs-meta"><span class="hljs-meta"> [NC,OR] RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR] RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) RewriteRule ^(.*)$ index.php [F,L]</span></span></code> </pre> <br><p>  Toutes les tentatives de nuire √† votre ressource seront redirig√©es vers la page d'erreur 403 "Acc√®s refus√©". </p><br><h3>  9. Prot√©ger le site contre les attaques DOS </h3><br><p>  L'une des m√©thodes de protection consiste √† limiter la taille de requ√™te maximale autoris√©e (il n'y a pas de restriction par d√©faut). </p><br><p>  Pour ce faire, d√©finissez la taille des fichiers t√©l√©charg√©s en octets dans .htaccess: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">LimitRequestBody</span></span> 10240000</code> </pre> <br><p>  Dans l'exemple, la taille est de 10 Mo.  Si vous souhaitez interdire le t√©l√©chargement de fichiers, √©crivez un nombre inf√©rieur √† 1 Mo (1048576 octets). </p><br><p>  Vous pouvez √©galement explorer les possibilit√©s des directives LimitRequestFields, LimitRequestFieldSize et LimitRequestLine dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://">documentation</a> officielle. </p><br><a name="id5"></a><h2>  Personnalisez l'affichage du site </h2><br><p>  Voyons ce qui peut √™tre fait avec l'affichage de la ressource enti√®re ou de ses sections dans les navigateurs des utilisateurs en utilisant .htaccess. </p><br><h3>  10. Remplacez le fichier d'index </h3><br><p>  Un fichier d'index est celui qui s'ouvre par d√©faut lors de l'acc√®s √† un r√©pertoire sp√©cifique.  Ils sont g√©n√©ralement appel√©s: index.html, index.htm, index.php, index.phtml, index.shtml, default.htm, default.html. </p><br><p>  Voici √† quoi cela ressemble dans la structure du r√©pertoire: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kk/hy/8m/kkhy8muv-omjellggi7b6kwczto.png" alt="19 fonctionnalit√©s utiles du fichier .htaccess"></div><br><br><p>  Pour remplacer ce fichier par un autre, placez-le dans le r√©pertoire .htaccess et ajoutez cette commande: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">DirectoryIndex</span></span> hello.html</code> </pre> <br><p>  Au lieu de "hello.html", entrez l'adresse du fichier souhait√©. </p><br><p>  Vous pouvez sp√©cifier la s√©quence de fichiers qui s'ouvrira dans l'ordre sp√©cifi√© si l'un d'eux n'est pas disponible: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">DirectoryIndex</span></span> hello.html hello.php hello.pl</code> </pre> <br><h3>  11. Ajoutez ou supprimez du code HTML √† la fin de l'URL </h3><br><p>  La conservation ou la suppression de l'extension de fichier dans l'URL rel√®ve de chaque optimiseur.  Il n'y a pas d'√©tudes fiables sur l'effet des extensions dans les adresses sur le classement des ressources, mais chaque webmaster a une opinion √† ce sujet. </p><br><h4>  Pour ajouter .html: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> (.*/[^/.]+)($|\?) RewriteRule .* <span class="hljs-number"><span class="hljs-number">%1</span></span>.html<span class="hljs-meta"><span class="hljs-meta"> [R=301,L] RewriteRule ^(.*)/$ /$1.html [R=301,L]</span></span></code> </pre> <br><h4>  Pour supprimer .html: </h4><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">RewriteBase</span></span> / RewriteRule (.*)\.html$ <span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [R=301,L]</span></span></code> </pre> <br><p>  Les m√™mes directives peuvent ajouter / supprimer l'extension php. </p><br><h3>  12. Configurer l'encodage </h3><br><p>  Pour √©viter les erreurs d'affichage de la ressource par le navigateur, vous devez lui indiquer dans quel encodage le site a √©t√© cr√©√©.  Le plus populaire: </p><br><ul><li>  UTF-8 - universel </li><li>  Windows-1251 - cyrillique </li><li>  Windows-1250 - pour l'Europe centrale </li><li>  Windows-1252 - pour l'Europe occidentale </li><li>  KOI8-R - Cyrillique (KOI8-R) </li></ul><br><p>  Le plus souvent, ils utilisent UTF-8 et Windows-1251. </p><br><p>  Si l'encodage n'est pas sp√©cifi√© dans la balise META de chaque page, vous pouvez le sp√©cifier via .htaccess. </p><br><p>  Un exemple de directive qui d√©finit le fichier sur le codage UTF-8: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">AddDefaultCharset</span></span> UTF-8</code> </pre> <br><p>  Et une telle commande signifie que tous les fichiers t√©l√©charg√©s sur le serveur seront convertis en Windows-1251: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">CharsetSourceEnc</span></span> WINDOWS-1251</code> </pre> <br><p>  Les exemples montrent diff√©rents encodages, mais au sein d'un m√™me site, les encodages de ces directives doivent correspondre. </p><br><h3>  13. Cr√©ez des pages d'erreur personnalis√©es </h3><br><p>  √Ä l'aide de r√®gles dans .htaccess, vous pouvez configurer l'affichage des pages sp√©cialement cr√©√©es pour les erreurs les plus courantes, par exemple: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">ErrorDocument</span></span></span></span> 401 /error/401.php ErrorDocument 403 /error/403.php ErrorDocument 404 /error/404.php ErrorDocument 500 /error/500.php</code> </pre> <br><p>  Avant d'√©crire les directives, cr√©ez le dossier d'erreur √† la racine du site et placez-y les fichiers correspondants pour les pages d'erreur. </p><br><p>  Pourquoi est-ce n√©cessaire?  Par exemple, afin de ne pas perdre l'utilisateur page 404, mais de lui donner la possibilit√© d'acc√©der √† d'autres rubriques du site: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3p/lg/xe/3plgxe1dd33l2sqrixfcjqw_jie.png" alt="19 fonctionnalit√©s utiles du fichier .htaccess"></div><br><br><a name="id6"></a><h2>  Nous optimisons le site </h2><br><p>  La vitesse de chargement du site Web est l'un des facteurs de classement dans les moteurs de recherche.  Vous pouvez l'augmenter, notamment en utilisant les directives dans .htaccess. </p><br><h3>  14. Compressez les composants du site √† l'aide de mod_gzip ou mod_deflate </h3><br><p>  La compression de fichiers, d'une part, augmente la vitesse de chargement d'un site, mais d'autre part, elle charge davantage le serveur.  Dans .htaccess, vous pouvez activer la compression √† l'aide de deux modules - mod_zip et mod_deflate.  Ils sont presque identiques en qualit√© de compression. </p><br><p>  La syntaxe du module Gzip est plus flexible et peut fonctionner avec des masques: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;ifModule mod_gzip.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">mod_gzip_on</span></span> Yes mod_gzip_dechunk Yes mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$ mod_gzip_item_include handler ^cgi-script$ mod_gzip_item_include mime ^text/.* mod_gzip_item_include mime ^application/x-javascript.* mod_gzip_item_exclude mime ^image/.* mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.* &lt;/ifModule&gt;</code> </pre> <br><p>  Dans mod_deflate, vous listez les types de fichiers que vous souhaitez compresser: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;ifModule mod_deflate.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">AddOutputFilterByType</span></span> DEFLATE text/html text/plain text/xml application/xml application/xhtml+xml text/css text/javascript application/javascript application/x-javascript &lt;/ifModule&gt;</code> </pre> <br><h3>  15. Nous renfor√ßons la mise en cache </h3><br><p>  Cet ensemble de commandes aidera √† charger rapidement le site pour les visiteurs qui y √©taient d√©j√†.  Le navigateur ne t√©l√©chargera pas √† nouveau les images et les scripts du serveur, mais utilisera les donn√©es du cache. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">FileETag</span></span> MTime Size &lt;ifmodule mod_expires.c&gt; &lt;filesmatch ‚Äú.(jpg|gif|png|css|js)$‚Äù&gt; ExpiresActive <span class="hljs-literal"><span class="hljs-literal">on</span></span> ExpiresDefault ‚Äúaccess plus 1 week‚Äù &lt;/filesmatch&gt; &lt;/ifmodule&gt;</code> </pre> <br><p>  Dans l'exemple, la dur√©e de vie du cache est limit√©e √† une semaine (¬´1 semaine¬ª), vous pouvez sp√©cifier votre p√©riode en mois (mois), ann√©es (ann√©e), heures (heures), etc. </p><br><p>  Une autre option de code: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;IfModule mod_expires.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">ExpiresActive</span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> ExpiresByType application/javascript <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType text/javascript <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType text/css <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType image/gif <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType image/jpeg <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> ExpiresByType image/png <span class="hljs-string"><span class="hljs-string">"access plus 7 days"</span></span> &lt;/IfModule&gt;</code> </pre> <br><p>  Les types de fichiers suivants sont disponibles pour la mise en cache: </p><br><ul><li>  image / ic√¥ne x; </li><li>  image / jpeg; </li><li>  image / png; </li><li>  image / gif; </li><li>  application / x-shockwave-flash; </li><li>  text / css; </li><li>  texte / javascript; </li><li>  application / javascript; </li><li>  application / x-javascript; </li><li>  text / html; </li><li>  application / xhtml + xml. </li></ul><br><a name="id7"></a><h2>  Quelques possibilit√©s suppl√©mentaires </h2><br><h3>  16. G√©rer les param√®tres php </h3><br><p>  Cet ensemble de param√®tres est effectu√© par les programmeurs s'il n'y a pas d'acc√®s au fichier php.ini.  Arr√™tons-nous sur les expressions php_value, qui sont responsables de la quantit√© de donn√©es t√©l√©charg√©es sur le site et du temps de traitement des scripts, car  cela affecte directement les performances. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;ifModule mod_php.c&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">php_value</span></span> upload_max_filesize 125M php_value post_max_size 20M php_value max_execution_time 60 &lt;/ifModule&gt;</code> </pre> <br><p>  Dans la ligne "upload_max_filesize" indique la taille maximale des fichiers t√©l√©charg√©s en m√©gaoctets, "post_max_size" signifie la quantit√© maximale de publication, "max_execution_time" indique le temps en secondes pour traiter les scripts. </p><br><h3>  17. Lutte contre les commentaires ind√©sirables sur WordPress </h3><br><p>  Afin d'emp√™cher les spammeurs d'acc√©der au fichier wp-comments-post.php, ajoutez ces directives √† .htaccess: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">On</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_METHOD}</span></span> POST RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> .wp-comments-post\.php* RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{HTTP_REFERER}</span></span> !.*mysite.com.*<span class="hljs-meta"><span class="hljs-meta"> [OR] RewriteCond %{HTTP_USER_AGENT} ^$ RewriteRule (.*) ^http://%{REMOTE_ADDR}/$ [R=301,L]</span></span></code> </pre> <br><p>  Au lieu de "mysite.com", entrez l'adresse de votre site. </p><br><h3>  18. Installer l'e-mail pour l'administrateur du serveur </h3><br><p>  Ce code en .htaccess d√©finira l'adresse e-mail de l'administrateur par d√©faut.  Il recevra des notifications li√©es aux √©v√©nements importants sur le serveur. </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">ServerSignature</span></span> EMail SetEnv SERVER_ADMIN admin@mysite.com</code> </pre> <br><h3>  19. Nous pr√©venons de l'indisponibilit√© du site </h3><br><p>  Dans une situation o√π le site n'est pas disponible pour des raisons techniques, vous pouvez rediriger les utilisateurs vers une page contenant des informations sur le moment o√π le travail sera restaur√©.  Il est pr√©f√©rable d'√©viter de telles interruptions, mais en cas de force majeure, ajoutez les directives suivantes √† .htaccess: </p><br><p></p><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteEngine</span></span></span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !/info.html$ RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REMOTE_HOST}</span></span> !^12\.345\.678\.90 RewriteRule $ https://mysite.ru/info.html<span class="hljs-meta"><span class="hljs-meta"> [R=302,L]</span></span></code> </pre> <br><p>  Dans l'exemple (12 \ .345 \ .678 \ .90), remplacez l'adresse IP par la v√¥tre, dans la derni√®re ligne, indiquez l'adresse de la page de votre ressource avec des informations sur la nature et le d√©lai d'ex√©cution. </p><br><a name="id8"></a><h2>  R√®gles g√©n√©rales .htaccess </h2><br><ul><li>  Sauvegardez toujours le fichier avant d'apporter des modifications pour les restaurer rapidement. </li><li>  Apportez des modifications √©tape par √©tape, ajoutez une r√®gle et √©valuez son fonctionnement. </li><li>  Si vous placez plusieurs fichiers .htaccess dans des r√©pertoires diff√©rents, √©crivez uniquement les nouvelles directives pertinentes pour un r√©pertoire particulier dans les enfants, le reste sera h√©rit√© du r√©pertoire parent ou du fichier dans le dossier racine. </li><li>  Vider le cache du navigateur: Ctrl + F5, sur Safari: Ctrl + R, sur Mac OS: Cmd + R. </li><li>  Si une erreur 500 se produit, v√©rifiez la syntaxe de la r√®gle (pour les fautes de frappe).  Vous pouvez utiliser les services de v√©rification du fichier .htaccess en ligne, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tels</a> .  Si aucune erreur n'est trouv√©e, alors ce type de directive est interdit dans le fichier de configuration principal, vous devrez consulter un programmeur et h√©bergeur. </li><li>  Les caract√®res cyrilliques ne sont pas autoris√©s dans les directives .htaccess.  Si vous devez sp√©cifier l'adresse du domaine cyrillique (moysite.rf), utilisez n'importe quel service whois pour d√©couvrir son orthographe en utilisant la m√©thode punycode.  Par exemple, l'adresse "site.rf" ressemblerait √† "xn - 80aswg.xn - p1ai / $ 1". </li><li>  Trop de directives dans .htaccess peuvent r√©duire les performances du site.  Essayez d'utiliser le fichier uniquement si le probl√®me ne peut pas √™tre r√©solu d'une autre mani√®re. </li><li>  Si vous n'avez pas le temps d'√©tudier en d√©tail les fonctionnalit√©s des directives, utilisez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le g√©n√©rateur .htaccess</a> . </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462029/">https://habr.com/ru/post/fr462029/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462015/index.html">Univers de reporting SAP</a></li>
<li><a href="../fr462021/index.html">Comment arr√™ter de faire la m√™me chose</a></li>
<li><a href="../fr462023/index.html">Cascadeur: L'avenir de l'animation de jeux</a></li>
<li><a href="../fr462025/index.html">Mod√®le de donn√©es de r√©seau relationnel</a></li>
<li><a href="../fr462027/index.html">Comment Dark d√©ploie le code 50 ms</a></li>
<li><a href="../fr462031/index.html">Comme si vous lisiez les journaux!: Lancez Hotspot 2.0 sur le r√©seau Wi-Fi du m√©tro</a></li>
<li><a href="../fr462033/index.html">La derni√®re c√®ne des d√©veloppeurs</a></li>
<li><a href="../fr462035/index.html">Python Vs R - Science des donn√©es</a></li>
<li><a href="../fr462041/index.html">Approches de segmentation mobile - Traduction</a></li>
<li><a href="../fr462043/index.html">P√™che intelligente chez FishSensor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>