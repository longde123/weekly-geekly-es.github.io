<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑ üîè üìé Impl√©mentation des fonctionnalit√©s restantes de PEG üë©üèæ‚Äçüéì ‚Ñ¢Ô∏è üíç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apr√®s avoir rassembl√© toutes les parties du g√©n√©rateur d'analyseur PEG dans le post pr√©c√©dent, je suis pr√™t √† montrer comment impl√©menter d'autres cho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Impl√©mentation des fonctionnalit√©s restantes de PEG</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471992/"><p>  Apr√®s avoir rassembl√© toutes les parties du g√©n√©rateur d'analyseur PEG dans le post pr√©c√©dent, je suis pr√™t √† montrer comment impl√©menter d'autres choses int√©ressantes. </p><br><div class="spoiler">  <b class="spoiler_title">Contenu de la s√©rie Python PEG Parser</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Analyseurs de cheville</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Impl√©mentation de l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">G√©n√©ration de l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Visualisation de l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Grammaire r√©cursive gauche du PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ajout d'actions √† la grammaire PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">M√©ta grammaire pour l'analyseur PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Impl√©mentation des fonctionnalit√©s restantes de PEG</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PEG sur Core Developer Sprint</a> </li></ul></div></div><br><p>  Nous consid√©rerons les fonctionnalit√©s suivantes de PEG: </p><a name="habracut"></a><br><ul><li> √âl√©ments nomm√©s: <code>NAME=item</code> (le nom peut √™tre utilis√© dans l'action) </li><li>  Lookaheads: <code>&amp;item</code> (positif) et <code>!item</code> (n√©gatif) </li><li>  Regroupement des √©l√©ments entre parenth√®ses: ( <code>item item ...</code> ) </li><li>  √âl√©ments facultatifs: <code>[item item ...]</code> et <code>item?</code> </li><li>  Articles en double: <code>item*</code> (z√©ro ou plus) et <code>item+</code> (un ou plusieurs) </li></ul><br><h2 id="imenovannye-argumenty">  Arguments nomm√©s </h2><br><p>  Commen√ßons par les √©l√©ments nomm√©s.  C'est pratique lorsque nous en avons plusieurs dans une alternative pour la m√™me r√®gle, par exemple: </p><br><pre> <code class="plaintext hljs">expr: term '+' term</code> </pre> <br><p>  Nous pouvons nous r√©f√©rer au deuxi√®me <code>term</code> en ajoutant le num√©ro <code>1</code> au nom de la variable, de sorte que dans l'action, il se pr√©sente comme ceci: </p><br><pre> <code class="plaintext hljs">expr: term '+' term { term + term1 }</code> </pre> <br><p>  Mais tout le monde n'aime pas √ßa, et personnellement, je pr√©f√®re √©crire quelque chose comme √ßa: </p><br><pre> <code class="plaintext hljs">expr: left=term '+' right=term { left + right }</code> </pre> <br><p>  Ceci est facilement pris en charge dans la m√©ta-grammaire en modifiant la r√®gle pour l' <code>item</code> comme suit: </p><br><pre> <code class="plaintext hljs">item: | NAME = atom { NamedItem(name.string, atom) } | atom { atom } atom: | NAME { name.string } | STRING { string.string }</code> </pre> <br><p>  (O√π l' <code>atom</code> n'est qu'un vieil <code>item</code> ) </p><br><p>  Cela nous oblige √† ajouter la d√©finition de la classe <code>grammar.py</code> √† <code>grammar.py</code> .  C'est l'une de ces classes de donn√©es que j'ai mentionn√©es plus t√¥t - elle poss√®de √©galement les attributs de <code>name</code> et d' <code>item</code> . </p><br><p>  Nous devons √©galement apporter de petites modifications au g√©n√©rateur de code, que je laisserai comme exercice au lecteur (ou vous pouvez consulter mon r√©f√©rentiel :-).  Le code g√©n√©r√© affectera d√©sormais le r√©sultat de la correspondance de chaque √©l√©ment √† une variable avec le nom sp√©cifi√©, et non avec le nom obtenu √† partir du nom de la r√®gle d'√©l√©ment.  Cela fonctionnera √©galement pour les √©l√©ments qui sont des jetons (de la forme <code>NAME</code> ou des litt√©raux de cha√Æne tels que <code>':='</code> ). </p><br><h2 id="lookahead">  Lookahead </h2><br><p>  Suivi par lookahead.  Vous avez probablement rencontr√© ce concept dans les expressions r√©guli√®res.  Pendant l'anticipation vers l'avant, l'alternative analys√©e peut √™tre imm√©diatement rejet√©e ou accept√©e, sans d√©placer le pointeur du tokenizer. </p><br><p>  En fait, lookahead peut √™tre utilis√© comme un moyen plus √©l√©gant d'√©liminer la confusion avec les exceptions de l'analyseur, dont j'ai parl√© dans un article pr√©c√©dent.  Au lieu de permettre aux actions de rejeter une alternative d√©j√† accept√©e en renvoyant None, nous pouvons ajouter une instruction avant l' <code>OP</code> d'exclure <code>"}"</code> .  L'ancienne r√®gle ressemblait √† ceci: </p><br><pre> <code class="plaintext hljs"> | OP { None if op.string in ("{", "}") else op.string }</code> </pre> <br><p>  La nouvelle version ressemble √† ceci: </p><br><pre> <code class="plaintext hljs"> | !"}" OP { op.string }</code> </pre> <br><p>  Cela transf√®re le traitement des accolades de l'action √† la grammaire, o√π il appartient.  Nous n'avons pas besoin de v√©rifier <code>"{"</code> , car cela correspond √† une alternative ant√©rieure (en fait, cela est √©galement vrai pour l'ancienne version, mais je l'ai oubli√© :-). </p><br><p>  Nous ajoutons la grammaire des t√™tes de recherche √† la r√®gle pour l' <code>item</code> comme suit: </p><br><pre> <code class="plaintext hljs">item: | NAME = atom { NamedItem(name.string, atom) } | atom { atom } | "&amp;" atom { Lookahead(atom, True) } | "!" atom { Lookahead(atom, False) }</code> </pre> <br><p>  Encore une fois, nous devons ajouter la classe de donn√©es <code>Lookahead</code> √† <code>grammar.py</code> (et l'importer dans <code>@subheader</code> !) Et modifier un peu le g√©n√©rateur en ajoutant la m√©thode d'assistance suivante: </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookahead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, positive, func, *args)</span></span></span><span class="hljs-function">:</span></span> mark = self.mark() ok = func(*args) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> self.reset(mark) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok == positive</code> </pre> <br><p>  Dans notre cas, le code g√©n√©r√© pour cette alternative ressemble √† ceci: </p><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self.lookahead(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, self.expect, <span class="hljs-string"><span class="hljs-string">"}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (op := self.expect(OP)) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> op . string</code> </pre> <br><p>  Comme vous pouvez le voir dans le fragment de grammaire ci-dessus, l'anticipation ne peut pas obtenir de noms corrects.  C'est facile √† r√©soudre, mais je n'ai toujours aucune id√©e de son utilit√©.  De plus, pour les pr√©visions n√©gatives, la valeur sera toujours <code>None</code> . </p><br><h2 id="gruppirovka-v-skobkah">  Regroupement entre parenth√®ses </h2><br><p>  Maintenant, impl√©mentons des groupes avec des crochets.  Le meilleur endroit pour les ajouter au m√©tagramme est la r√®gle pour l' <code>atom</code> : </p><br><pre> <code class="plaintext hljs">atom: | NAME { name.string } | STRING { string.string } | "(" alts ")" { self.synthetic_rule(alts) }</code> </pre> <br><p>  Les deux premi√®res alternatives n'ont pas chang√©.  L'action de la nouvelle alternative utilise un hack (dont l'impl√©mentation reste inexpliqu√©e), qui permet au m√©ta-analyseur d'ajouter de nouvelles r√®gles √† la grammaire √† la vol√©e.  Cette fonction d'assistance (d√©finie dans le m√©ta-analyseur) renvoie le nom du nouvel objet de r√®gle.  Il sera compos√© d'un pr√©fixe fixe suivi d'un nombre, ce qui le rend unique, par exemple, <code>_synthetic_rule_1</code> . </p><br><p>  Vous pouvez demander ce qui se passe si la r√®gle synth√©tique est finalement supprim√©e.  Je ne sais pas comment √©viter cela, mais il ne devrait pas y avoir de probl√®me - dans le pire des cas, il y aura une r√®gle inutilis√©e dans la grammaire.  Et gr√¢ce √† la m√©morisation, la m√™me action ne sera jamais ex√©cut√©e deux fois pour la m√™me position d'entr√©e, donc ce n'est pas un probl√®me non plus (mais m√™me si c'√©tait le cas, dans le pire des cas nous aurions une r√®gle morte). </p><br><p>  L'utilisation d' <code>alts</code> entre parenth√®ses signifie que nous pouvons d√©finir une barre verticale comme d√©limiteur dans un groupe.  Par exemple, que notre nouvelle solution d'action ne correspondrait pas accidentellement <code>{</code> , nous pourrions changer la n√©gation en ceci: </p><br><pre> <code class="plaintext hljs"> | !("{" | "}") OP { op.string }</code> </pre> <br><p>  De plus, les groupes peuvent √©galement contenir des actions!  Cela n'aiderait pas √† r√©soudre le probl√®me avec les actions, mais dans d'autres situations, cela pourrait √™tre utile.  Et comme nous g√©n√©rons de toute fa√ßon une r√®gle synth√©tique, il ne n√©cessite aucun travail suppl√©mentaire pour l'impl√©menter (√† l'exception de l'impl√©mentation de <code>synthetic_rule</code> :-). </p><br><h2 id="opcionalnye-elementy">  √âl√©ments optionnels </h2><br><p>  Comme dans l'ancien pgen, j'utilise des crochets pour indiquer un groupe de jetons optionnels.  C'est l√† que cela s'av√®re utile.  Par exemple, une r√®gle de grammaire qui d√©crit une boucle Python <code>for</code> peut l'utiliser pour indiquer qu'une extension d' <code>else</code> peut exister.  Et encore une fois, nous pouvons √©tendre la grammaire de l' <code>atom</code> comme suit: </p><br><pre> <code class="plaintext hljs">atom: | NAME { name.string } | STRING { string.string } | "(" alts ")" { self.synthetic_rule(alts) } | "[" alts "]" { Maybe(self.synthetic_rule(alts)) }</code> </pre> <br><p>  Voici <code>Maybe</code> - <code>Maybe</code> une autre classe de donn√©es, avec un seul attribut d' <code>item</code> .  Nous modifions le g√©n√©rateur de code pour que le r√©sultat de la fonction synth√©tique n'√©choue pas si cette valeur est <code>None</code> .  Pour ce faire, vous pouvez ajouter <code>or True</code> dans l'impl√©mentation.  Par exemple, pour <code>[term]</code> : </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ((term := self.term()) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> term</code> </pre> <br><h2 id="povtoryayuschiesya-elementy">  Articles en double </h2><br><p>  Le passage √† la r√©p√©tition est une autre fonction PEG utile (la notation est emprunt√©e aux expressions r√©guli√®res et est √©galement utilis√©e dans pgen).  Il existe deux formes: l'ajout de <code>*</code> √† un atome signifie ¬´z√©ro ou plusieurs r√©p√©titions¬ª, tandis que l'ajout de <code>+</code> signifie ¬´une ou plusieurs r√©p√©titions¬ª.  Pour d'autres raisons, j'ai d√ª r√©√©crire les r√®gles de grammaire pour l' <code>item</code> et l' <code>atom</code> , en ajoutant une r√®gle interm√©diaire, que j'ai appel√©e <code>molecule</code> : </p><br><pre> <code class="plaintext hljs">item: | NAME '=' molecule { NamedItem(name.string, molecule) } | "&amp;" atom { Lookahead(atom) } | "!" atom { Lookahead(atom, False) } | molecule { molecule } molecule: | atom "?" { Maybe(atom) } | atom "*" { Loop(atom, False) } | atom "+" { Loop(atom, True) } | atom { atom } | "[" alts "]" { Maybe(self.synthetic_rule(alts)) } atom: | NAME { name.string } | STRING {string.string } | "(" alts ")" { self.synthetic_rule(alts) }</code> </pre> <br><p>  Notez que cela introduit une syntaxe alternative pour les √©l√©ments optionnels ( <code>atom?</code> ).  Cela ne n√©cessite pas d'efforts d'impl√©mentation suppl√©mentaires, car il s'agit simplement d'une autre fa√ßon de cr√©er un n≈ìud <code>Maybe</code> . </p><br><p>  La refactorisation de ces r√®gles √©tait n√©cessaire car je ne souhaite pas rendre certaines situations valables: </p><br><ul><li>  r√©p√©titions facultatives (puisque ce n'est qu'une r√©p√©tition de z√©ro ou plus); </li><li>  r√©p√©titions (internes captureraient toutes les correspondances, car PEG utilise toujours un algorithme gourmand) </li><li>  valeurs facultatives r√©p√©t√©es (ce qui interromprait l'analyse si l'√©l√©ment facultatif ne correspond pas). </li></ul><br><p>  Cependant, ce n'est toujours pas une solution id√©ale, car vous pouvez √©crire quelque chose comme <code>(foo?)*</code> .  Il sera n√©cessaire d'ajouter une v√©rification √† cette situation dans le g√©n√©rateur d'analyseur, mais je le ferai en dehors de l'article. </p><br><p>  La classe de donn√©es <code>Loop</code> a deux attributs: <code>item</code> et <code>nonempty</code> .  Le code g√©n√©r√© utilisera la m√©thode <code>loop()</code> parser helper <code>loop()</code> .  Elle est tr√®s similaire √† la m√©thode <code>lookahead()</code> pr√©sent√©e pr√©c√©demment: </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, nonempty, func, *args)</span></span></span><span class="hljs-function">:</span></span> mark = self.mark() nodes = [] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> node := func(*args) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: nodes.append(node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(nodes) &gt;= nonempty: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nodes self.reset(mark) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span></code> </pre> <br><p>  Si <code>nonempty</code> est <code>False</code> (dans le sens o√π la grammaire √©tait <code>*</code> ), cela ne conduira pas √† une erreur.  Aucune entr√©e ne sera trouv√©e et une liste vide sera retourn√©e.  Pour que cela se produise, nous impl√©mentons le g√©n√©rateur d'analyseur de sorte que ce <code>is not None</code> ajout√©.  Une v√©rification plus douce d'un article pr√©c√©dent retournerait <code>False</code> dans le cas d'une liste vide. </p><br><p>  C'est tout pour aujourd'hui!  J'allais discuter de l'op√©rateur ¬´cut¬ª ( <code>~</code> ) pr√©sent dans TatSu, mais jusqu'√† pr√©sent je n'ai pas eu la chance de le rencontrer.  Je ne suis m√™me pas encore pr√™t √† en discuter - la documentation TatSu ne donne qu'un exemple simple qui m'int√©resse un peu.  Je ne l'ai pas trouv√© dans d'autres g√©n√©rateurs d'analyseurs PEG, donc, peut-√™tre, cette fonctionnalit√© n'est que TatSu.  Peut-√™tre qu'un jour je parlerai de lui.  (Pendant ce temps, je l'ai impl√©ment√© juste au cas o√π, on ne sait jamais. :-) </p><br><p>  Je pense que le prochain article portera sur mon exp√©rience dans l'√©criture d'une grammaire PEG capable d'analyser la grammaire Python.  Je vais vous raconter comment s'est d√©roul√© le sprint des d√©veloppeurs du noyau Python, qui √©tait √† Londres cette semaine avec le soutien logistique de Bloomberg et le soutien financier de PSF et d'autres soci√©t√©s (par exemple, Dropbox m'a pay√© l'h√¥tel et le vol).  Un merci sp√©cial √† Emily Morhouse et Pablo Galindo Salgado, qui ont beaucoup aid√© dans la mise en ≈ìuvre des outils et des tests.  Ensuite, nous allons √©crire des tests de performances, puis nous allons ajouter des actions √† cette grammaire afin qu'elle puisse cr√©er des arborescences AST qui peuvent √™tre compil√©es par le compilateur de code d'octets CPython.  Il y a tellement de choses plus int√©ressantes √† venir! </p><br><p>  Licence pour cet article et code cit√©: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CC BY-NC-SA 4.0</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471992/">https://habr.com/ru/post/fr471992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471980/index.html">Escrocs au t√©l√©phone. Acte quatre, final ...</a></li>
<li><a href="../fr471982/index.html">Discuter de l'avenir de PHP</a></li>
<li><a href="../fr471986/index.html">Grammaire r√©cursive gauche du PEG</a></li>
<li><a href="../fr471988/index.html">Ajout d'actions √† la grammaire PEG</a></li>
<li><a href="../fr471990/index.html">M√©ta grammaire pour l'analyseur PEG</a></li>
<li><a href="../fr471994/index.html">Travail sur PEG sur Core Developer Sprint</a></li>
<li><a href="../fr471998/index.html">F # 10: Listes</a></li>
<li><a href="../fr472000/index.html">¬´Il est essentiel que la communaut√© √©tablisse des normes¬ª: Marchin Moskala √† propos de Kotlin</a></li>
<li><a href="../fr472002/index.html">Paquetage √† Gradle</a></li>
<li><a href="../fr472004/index.html">Boost.Spirit ou ajoutez la ¬´spiritualit√©¬ª √† la liste des filtres</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>