<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ù§Ô∏è üïü üë®‚Äçüè´ Dois aspectos do WebView: sobre o in√≠cio r√°pido de projetos e o roubo de dados pessoais ‚úãüèø ü§© ‚ñ™Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 

 Meu nome √© Eugene, sou desenvolvedor Full Stack JS, a pilha atual √© Node.js + React + React Native. Estou em desenvolvimento h√° mais de 1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dois aspectos do WebView: sobre o in√≠cio r√°pido de projetos e o roubo de dados pessoais</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/440710/">  Ol√° Habr! <br><br>  Meu nome √© Eugene, sou desenvolvedor Full Stack JS, a pilha atual √© Node.js + React + React Native.  Estou em desenvolvimento h√° mais de 10 anos.  No desenvolvimento m√≥vel, tentei diferentes ferramentas, desde o Cordova ao React Native.  Tendo adquirido experi√™ncia com o Cardova, percebi que gostaria de criar interfaces nativas. Na minha opini√£o, o WebView n√£o deve ser o aplicativo inteiro.  Mas isso n√£o significa que n√£o deva ser usado. <br><br>  A convite de colegas do Sberbank, neste post, quero falar sobre aplicativos m√≥veis h√≠bridos.  Com a abordagem correta, √© uma √≥tima maneira de implementar rapidamente a ideia de um produto que funcione bem, suficiente para o primeiro lan√ßamento da sua inicializa√ß√£o. <br><br><img src="https://habrastorage.org/webt/5e/5e/zk/5e5ezktcv297mu5hrpai4vjg-9e.jpeg"><br>  <i>Fonte: srishta.com</i> <br><br>  Tamb√©m vou falar um pouco sobre como voc√™ pode usar o WebView e como os atacantes podem us√°-lo contra voc√™.  Os exemplos no artigo ser√£o mostrados usando a estrutura React Native, mas as mesmas id√©ias podem ser implementadas sem ela. <br><a name="habracut"></a><br><h2>  Um pouco sobre startups </h2><br>  Come√ßarei com as diferen√ßas fundamentais no lan√ßamento de startups em nosso pa√≠s e no Ocidente; mostrarei como o WebView pode ajudar aqui; darei exemplos de trabalho da intera√ß√£o de elementos da web e nativos, al√©m de dicas de seguran√ßa para interagir com aplicativos de terceiros. <br><br>  Como regra, para que uma startup seja bem-sucedida, ela precisa come√ßar rapidamente.  Se voc√™ perder tempo, seus concorrentes ir√£o ignor√°-lo.  Isso √© entendido tanto em nosso pa√≠s quanto no Ocidente.  Mas a abordagem russa para lan√ßar, por via de regra, √© muito mais completa - no mau sentido da palavra. <br><br>  Todas <i>as startups russas</i> malsucedidas come√ßam e se desenvolvem aproximadamente no mesmo cen√°rio.  Os erros mais comuns est√£o relacionados ao planejamento estrat√©gico do desenvolvimento de produtos de software.  A ger√™ncia acredita que o lan√ßamento √© poss√≠vel somente ap√≥s a implementa√ß√£o de 110% de todas as funcionalidades e todas as nuances.  Com essa abordagem, surge rapidamente um d√©ficit or√ßament√°rio, uma vez que os custos de desenvolvimento s√£o altos e n√£o h√° receita com uma startup.  A busca por investimentos adicionais, um c√≠rculo intermin√°vel de aprova√ß√µes e revis√µes leva muito tempo, o produto aparece no concorrente.  √â isso a√≠, a maratona est√° perdida. <br><br>  <i>As startups europ√©ias e americanas</i> agem de maneira diferente.  Para iniciantes, eles s√£o limitados apenas √† vers√£o para web m√≥vel com uma parte funcional minimamente suficiente.  Pode ser visualizado em computadores e dispositivos m√≥veis.  E, nesta fase, o projeto est√° pronto para o lan√ßamento!  Ap√≥s o lan√ßamento, o aplicativo √© feito para dispositivos m√≥veis. <br><br>  Como regra, o aplicativo n√£o difere em recursos b√°sicos da vers√£o web.  Ele expande as possibilidades de intera√ß√£o com o usu√°rio, por exemplo, por meio de notifica√ß√µes push.  Essa abordagem garante o cumprimento da condi√ß√£o principal - in√≠cio r√°pido, primeiro lucro r√°pido.  As receitas da primeira etapa podem ser investidas no desenvolvimento.  No futuro, o projeto poder√° ser escalado e desenvolvido conforme desejado, sem d√©ficit or√ßament√°rio, executando uma abordagem interativa para adicionar novas funcionalidades e desenvolver a interface do usu√°rio. <br><br>  Proponho considerar mais detalhadamente o est√°gio em que j√° existe uma vers√£o m√≥vel do site e voc√™ precisa desenvolver um aplicativo para dispositivos m√≥veis.  Por isso, criamos um site, o que significa que est√°vamos desenvolvendo a API do servidor, a interface e a l√≥gica de neg√≥cios.  Dois dos tr√™s componentes s√£o <br>  - interface e l√≥gica - est√£o presentes no aplicativo m√≥vel.  Concordo, n√£o quero escrev√™-los novamente. <br><br><h2>  Combinando o melhor de aplicativos nativos e da web </h2><br>  Existem ferramentas focadas no desenvolvimento de aplicativos nativos.  Outros s√£o para a web.  A vantagem dos aplicativos nativos √© que eles podem usar todo o potencial funcional do telefone.  Mas desenvolv√™-los em compara√ß√£o com aplicativos da web √© bastante dif√≠cil.  A web oferece um in√≠cio f√°cil, mas limita bastante os recursos do aplicativo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3b/5bf/422/f3b5bf422a2b6f41d6d7bedcb81e9337.png"><br>  <i>* para reduzir a tautologia dos aplicativos da web, chamarei aplicativos m√≥veis, cuja maior parte da l√≥gica e da interface √© implementada no lado do navegador</i> <br><br>  Os aplicativos h√≠bridos criados usando o componente WebView permitem combinar todas as vantagens dos aplicativos nativos e da web.  Obviamente, existem desenvolvedores meticulosos que s√£o categoricamente contra o WebView em qualquer uma de suas manifesta√ß√µes.  Eles argumentam isso com o fato de que o aplicativo deve ser imediatamente completamente nativo, para que voc√™ possa usar todos os recursos de um dispositivo m√≥vel, al√©m de fornecer um desempenho confort√°vel da interface do usu√°rio.  Mas, em muitos casos, quando os recursos da vers√£o m√≥vel do site s√£o suficientes, voc√™ pode reduzir o tempo do primeiro lan√ßamento criando um aplicativo h√≠brido e gradualmente substituindo-o por um nativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f9/120/557/3f9120557268b1609343599035758f8b.png"></div><br>  Os aplicativos h√≠bridos nem sempre s√£o ruins e nem extens√≠veis.  Eles podem ser convenientes e produtivos.  Com o uso adequado, essa abordagem ajuda a obter tempo suficiente para desenvolver um aplicativo de qualidade e n√£o para liberar um aplicativo nativo √†s pressas. <br><br>  Existem v√°rias situa√ß√µes em que √© aconselh√°vel usar aplicativos h√≠bridos.  Eles s√£o bons como um esbo√ßo tempor√°rio para um in√≠cio r√°pido - quando temos uma vers√£o m√≥vel do site pronta e o aplicativo m√≥vel era necess√°rio "ontem".  Esse aplicativo pode ser criado em poucas horas, executado na produ√ß√£o.  Os usu√°rios ter√£o a oportunidade de trabalhar com um aplicativo m√≥vel, e voc√™ ter√° a oportunidade de trabalhar em uma vers√£o mais completa em per√≠odos de tempo menos restritos (se necess√°rio). <br><br>  Aqui est√° um exemplo.  Recentemente, os colegas precisavam urgentemente de um aplicativo m√≥vel.  Na vers√£o web, ele tinha oito itens de menu e os exibimos atrav√©s do WebView.  E ent√£o eles substitu√≠ram um item.  Aconteceu o lan√ßamento do aplicativo n√£o em um m√™s ou tr√™s, mas em apenas alguns dias.  Depois de gradualmente transferido para o nativo. <br><br>  Uma solu√ß√£o h√≠brida nem sempre √© tempor√°ria.  Seus recursos permitem reutilizar no aplicativo a base de c√≥digo criada anteriormente para a vers√£o web.  Por exemplo, anima√ß√µes espec√≠ficas j√° criadas no Canvas.  O WebView tamb√©m √© conveniente ao usar algum tipo de servi√ßo de terceiros.  Outra op√ß√£o √© quando voc√™ possui uma interface complexa que √© mais f√°cil de conectar via WebView. <br><br><h2>  Como usar a visualiza√ß√£o na web </h2><br>  Pegue um script popular.  Queremos usar a vers√£o m√≥vel do site e o menu nativo.  Criamos um aplicativo nativo com um menu, mas, em vez de conte√∫do, conectamos a vers√£o m√≥vel do site via WebView (at√© o momento, sem altera√ß√µes). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ab/2cd/a4d/2ab2cda4dcb1efee936afeb16dcd7513.gif" width="300"></div><br>  No gif voc√™ pode ver 2 menus.  O menu √† direita faz parte do site, implementado na Web, √† esquerda √© o menu nativo, implementado dentro do aplicativo m√≥vel.  Para obter a primeira aproxima√ß√£o ao aplicativo nativo, precisamos apenas ocultar o menu implementado na web.  Aqui est√° a quantidade de <a href="">c√≥digo</a> necess√°ria para exibir a vers√£o da Web dentro do aplicativo via WebView: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (props) =&gt; (  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Example1"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WebView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri:</span></span></span></span><span class="xml"><span class="hljs-tag"> '&lt;</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"https://provincehotels.ru/"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">https://provincehotels.ru/</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">'}} style={{flex:1}} /&gt;  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br>  O pr√≥ximo exemplo √© sobre como a parte nativa pode interagir com a web. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/0b/wj/ia0bwj6viewkx-hsiqpmjc1dzgg.gif"></div><br>  O rob√¥ √© desenhado no Canvas, isso faz parte do site.  E a mudan√ßa para ele √© criada na interface do usu√°rio nativa.  Ser√° diferente em telefones diferentes.  Podemos controlar os movimentos do rob√¥ usando um interruptor.  Voc√™ pode e vice-versa - com alguns elementos da interface da web para influenciar o aplicativo.  O React Native fornece para isso uma API especial para intera√ß√£o entre a web e a parte nativa. <br><br>  Abaixo est√° o <a href="">c√≥digo</a> para usar esta anima√ß√£o.  Layout - todo o espa√ßo.  O Picker √© uma parte nativa que pode selecionar nas op√ß√µes suspensas para o estado do rob√¥.  WebView - um cont√™iner para exibir a web, dentro do qual um rob√¥ √© desenhado. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> states = [ <span class="hljs-string"><span class="hljs-string">'Idle'</span></span>, <span class="hljs-string"><span class="hljs-string">'Walking'</span></span>, <span class="hljs-string"><span class="hljs-string">'Running'</span></span>, <span class="hljs-string"><span class="hljs-string">'Dance'</span></span>, <span class="hljs-string"><span class="hljs-string">'Death'</span></span>, <span class="hljs-string"><span class="hljs-string">'Sitting'</span></span>, <span class="hljs-string"><span class="hljs-string">'Standing'</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uri = <span class="hljs-string"><span class="hljs-string">'https://artexoid.ru/181212/example2/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Example2</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ myWebView = React.&lt;i&gt;createRef&lt;<span class="hljs-regexp"><span class="hljs-regexp">/i&gt;(); state = {   robot: states[0] }; render() {   return (     &lt;Layout { ...this.props } name="Example2"&gt;       &lt;Picker         mode="dropdown"         selectedValue={this.state.robot}         onValueChange={(item) =&gt; {           this.setState({robot: item});           this.myWebView.current.postMessage(item);         }}       &gt;         {states.map((item =&gt; &lt;Picker.Item key={item} label={item} value={item} /</span></span>&gt; ))}       &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Picker&gt;       &lt;WebView ref={this.myWebView} source={{uri}} style={{flex:1}} /</span></span>&gt;     <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>   ); } }</code> </pre> <br>  Tais casos surgem frequentemente.  Por exemplo, solicitamos testes e certifica√ß√£o de dentistas.  Para cada resposta do teste, a anima√ß√£o foi desenhada dentro das perguntas, implementada usando o Canvas na web.  O desafio foi criar um aplicativo m√≥vel, com esse teste.  Usando o WebView, conseguimos exibir anima√ß√µes da Web, enquanto constru√≠mos o restante da interface nativamente.  A anima√ß√£o funcionou bem mesmo em smartphones mais antigos. <br><br><h2>  Como s√£o feitas as inje√ß√µes? </h2><br>  At√© 2013, o navegador Opera usava seu pr√≥prio mecanismo Presto, mas depois foi transferido para o mecanismo Blink do Google.  Muitos usu√°rios est√£o muito chateados.  O v√≠deo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚ÄúWhy Opera Webkit‚Äù</a> lan√ßa luz sobre os motivos dessa transi√ß√£o.  Os principais culpados s√£o grandes empresas como Google ou Facebook, que n√£o testaram o c√≥digo de seus produtos no Opera e proibiram a exibi√ß√£o de p√°ginas neste navegador, citando o fato de que n√£o √© popular o suficiente com os usu√°rios. <br><br>  Por exemplo, voc√™ acessa o Gmail pelo Opera e v√™: "Erro de JavaScript".  Voc√™ escreve para o suporte e obt√©m a resposta: "O Opera n√£o √© suportado conosco, n√£o escreveremos c√≥digo para ele".  Primeiro, o Opera contratou desenvolvedores para escrever inje√ß√µes, um c√≥digo especial que foi incorporado ao Gmail e permitiu que ele funcionasse no Opera.  Mas gradualmente sites como o Gmail ficaram maiores.  Opera desistiu e mudou o motor. <br><br>  Ent√£o, o que eu estou falando?  Ah, sim, √© hora de falar sobre inje√ß√µes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ab/2cd/a4d/2ab2cda4dcb1efee936afeb16dcd7513.gif" width="300"></div><br>  No gif - um exemplo de inje√ß√£o que altera o comportamento dos sites.  Suponha que tenhamos o site de outra pessoa e fa√ßamos uma inje√ß√£o de estilos - ocultamos o menu √† direita e o controle deslizante que sai √† direita.  Esta √© uma inje√ß√£o de estilos.  A l√≥gica do site n√£o muda, apenas a exibi√ß√£o. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addStyles=<span class="hljs-string"><span class="hljs-string">` const newCSS = 'div[class*=svgHamburger],div[class*=drawerPanel] { display: none !important; }'       head = document.head || document.getElementsByTagName('head')[0],       style = document.createElement('style'); style.type = 'text/css'; style.appendChild(document.createTextNode(newCSS)); head.appendChild(style); `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uri = <span class="hljs-string"><span class="hljs-string">'https://provincehotels.ru/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (props) =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Example1"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WebView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri</span></span></span></span><span class="xml"><span class="hljs-tag"> }} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{flex:1}}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">injectedJavaScript</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{addStyles}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">javaScriptEnabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br>  <a href="">O c√≥digo</a> escrito em verde √© inje√ß√£o.  Ele oculta os elementos, voc√™ n√£o pode clicar neles, n√£o pode interagir com eles.  Parece um aplicativo completamente nativo, sem controles da web. <br><br>  A pr√≥xima inje√ß√£o √© mais interessante.  Digamos que tenhamos um aplicativo m√≥vel e ele tenha um navegador m√≥vel embutido. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ah/11/mq/ah11mqb5sfarvpo-5zfhvapkuwq.gif"></div><br>  Uma pessoa segue o link e n√≥s a substituimos facilmente pela p√°gina do Facebook na qual voc√™ precisa digitar um nome de usu√°rio e senha.  Se uma pessoa entra, o aplicativo a intercepta.  Aqui est√° o <a href="">c√≥digo</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addScripts=<span class="hljs-string"><span class="hljs-string">` document   .querySelector('input[type=password]')   .addEventListener("change", (event) =&gt; alert(event.target.value)); `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uri = <span class="hljs-string"><span class="hljs-string">'https://www.facebook.com/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> (props) =&gt; ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Example4"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">   </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WebView</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">source</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{uri</span></span></span></span><span class="xml"><span class="hljs-tag"> }} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{{flex:1}}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">injectedJavaScript</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{addScripts}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">javaScriptEnabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{true}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Layout</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> );</span></span></code> </pre> <br>  Esse c√≥digo √© chamado de inje√ß√£o l√≥gica.  Geralmente √© mais dif√≠cil, mas n√£o muito.  Ou seja, roubar uma senha √© mais f√°cil do que ocultar controles. <br><br><h2>  Minuto de paran√≥ia: navegadores incorporados em aplicativos </h2><br>  Como voc√™ sabe, muitos aplicativos t√™m navegadores embutidos (WebView) - por exemplo, VKontakte, Telegram, Gmail, WhatsApp e assim por diante.  Podemos confiar em grandes empresas, mas o WebView tamb√©m √© usado por um grande n√∫mero de aplicativos com um pequeno n√∫mero de estrelas e autores duvidosos - por exemplo, leitores de QR, gerenciadores de arquivos, c√¢meras, etc. ... Voc√™ instala o aplicativo, l√™ o c√≥digo, clica no link, insira dados confidenciais - e o aplicativo, como mostrado no exemplo anterior, tem acesso a eles.  E voc√™ n√£o pode acompanhar para onde esses dados fluem.  Portanto, para abrir links, use apenas navegadores confi√°veis. <br><br>  Existem sites que solicitam um nome de usu√°rio e senha a cada vez.  E h√° quem fa√ßa isso raramente - uma vez por m√™s, uma vez por ano.  Curiosamente, a segunda op√ß√£o √© mais segura em termos de vazamento de dados atrav√©s do WebView.  Por exemplo, voc√™ entra no site a partir de algum navegador esquerdo.  O site requer um nome de usu√°rio e senha, e isso n√£o lhe parece estranho - sempre o faz.  E no caso em que raramente √© necess√°ria autoriza√ß√£o, voc√™ ficar√° cauteloso. <br><br>  Curiosamente, a autentica√ß√£o de dois fatores n√£o protege contra esse ataque - apenas contra roubo de senha.  O fato √© que, ap√≥s a confirma√ß√£o, um token √© retornado em resposta a voc√™, o qual, por sua vez, ainda n√£o possui autoriza√ß√£o de dois fatores e √© f√°cil intercept√°-lo.  Ou seja, se voc√™ digitou o login e o c√≥digo do SMS uma vez, o navegador recebe um token, que pode ser usado repetidamente.  Com esse token confirmado, ele pode fazer o que quiser, enquanto o token permanecer relevante.  Em geral, n√£o confie demais nos navegadores internos. <br><br>  Voc√™ pode se familiarizar com os exemplos desta postagem atrav√©s de aplicativos de demonstra√ß√£o.  No sistema operacional Android, voc√™ precisa baixar o Expo Project - uma ferramenta para trabalhar com JavaScript e React Native.  Depois de instalar o Expo, voc√™ s√≥ precisa ler o c√≥digo QR: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/13d/a0f/589/13da0f589ed467338dcfe0b0fa2d4f70.png"><br><br>  Os dispositivos IOS s√£o mais complicados: a Apple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">proibiu a distribui√ß√£o de</a> aplicativos dessa maneira.  Portanto, os curiosos ter√£o que criar o aplicativo a partir da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fonte</a> no GitHub.  Obrigado pela aten√ß√£o! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt440710/">https://habr.com/ru/post/pt440710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt440696/index.html">Kit de Ferramentas de Refatora√ß√£o de Banco de Dados: Flyway vs. Liquibase</a></li>
<li><a href="../pt440698/index.html">6 id√©ias interessantes de aplicativos de realidade aumentada (AR)</a></li>
<li><a href="../pt440702/index.html">Cuidado - G√ÅS! ou Como fizemos contratos inteligentes n√£o carbonatados</a></li>
<li><a href="../pt440706/index.html">Confer√™ncia profissional da IoT da InoThings ++ - O que foi e o que ser√°</a></li>
<li><a href="../pt440708/index.html">Semin√°rio on-line aberto "Trabalho: um e outro"</a></li>
<li><a href="../pt440712/index.html">A nuvem √© apenas o computador de algu√©m</a></li>
<li><a href="../pt440714/index.html">Como a redu√ß√£o da taxa de aquisi√ß√£o nos afeta (portadores de cart√£o)</a></li>
<li><a href="../pt440716/index.html">Implementa√ß√£o do maior IDCS pr√©-montado para autoridades p√∫blicas em Volgogrado</a></li>
<li><a href="../pt440718/index.html">Transfer√™ncia de dados entre cenas no Unity - aplicando valores m√∫ltiplos ao desenvolvimento de jogos simples</a></li>
<li><a href="../pt440720/index.html">Implementamos a interface do usu√°rio no iOS: melhoramos, aceleramos, dimensionamos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>