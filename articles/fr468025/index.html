<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüíº ‚öôÔ∏è üë®üèΩ‚Äçüöí Comment configurer SNI dans Zimbra OSE? üëµüèΩ üàÅ üîÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au d√©but du 21e si√®cle, une ressource telle que les adresses IPv4 est sur le point de s'√©puiser. En 2011, l'IANA a allou√© les cinq derniers blocs / 8 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment configurer SNI dans Zimbra OSE?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/468025/">  Au d√©but du 21e si√®cle, une ressource telle que les adresses IPv4 est sur le point de s'√©puiser.  En 2011, l'IANA a allou√© les cinq derniers blocs / 8 restants de son espace d'adressage aux bureaux d'enregistrement r√©gionaux d'Internet, et d√©j√† en 2017, ils ont mis fin √† leurs adresses.  La r√©ponse √† la p√©nurie catastrophique d'adresses IPv4 a √©t√© non seulement l'av√®nement d'IPv6, mais aussi la technologie SNI, qui a permis d'h√©berger un grand nombre de sites Web sur une seule adresse IPv4.  L'essence de SNI est que cette extension permet aux clients de dire au serveur le nom du site avec lequel ils veulent se connecter lors d'une poign√©e de main.  Cela permet au serveur de stocker plusieurs certificats, ce qui signifie que plusieurs domaines peuvent fonctionner sur la m√™me adresse IP.  La technologie SNI est devenue particuli√®rement populaire parmi les fournisseurs SaaS pour les entreprises, qui ont pu h√©berger un nombre presque illimit√© de domaines sans tenir compte du nombre d'adresses IPv4 n√©cessaires pour cela.  Voyons comment vous pouvez impl√©menter la prise en charge SNI dans Zimbra Collaboration Suite Open-Source Edition. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="image"><a name="habracut"></a><br><br>  SNI fonctionne dans toutes les versions actuelles et prises en charge de Zimbra OSE.  Dans le cas o√π votre Zimbra Open-Source s'ex√©cute sur une infrastructure multi-serveurs, vous devrez effectuer toutes les actions suivantes sur le n≈ìud avec le serveur proxy Zimbra install√©.  En outre, vous aurez besoin de paires de certificats + cl√©s correspondantes, ainsi que de cha√Ænes de certificats de confiance de votre autorit√© de certification pour chacun des domaines que vous souhaitez placer sur votre adresse IPv4.  Veuillez noter que la raison de la grande majorit√© des erreurs lors de la configuration de SNI dans Zimbra OSE r√©side pr√©cis√©ment dans des fichiers de certificat incorrects.  Par cons√©quent, nous vous conseillons de tout v√©rifier soigneusement avant de les installer directement. <br><br>  Tout d'abord, pour que SNI fonctionne normalement, vous devez entrer la commande <b>zmprov mcf zimbraReverseProxySNIEnabled TRUE</b> sur le n≈ìud avec le serveur proxy Zimbra, puis red√©marrer le service proxy √† l'aide de la commande de <b>red√©marrage zmproxyctl</b> . <br><br>  Nous allons commencer par cr√©er un nom de domaine.  Par exemple, nous prenons le domaine <b>company.ru</b> et, une fois le domaine d√©j√† cr√©√©, nous d√©terminerons le nom de l'h√¥te virtuel Zimbra et l'adresse IP virtuelle.  Veuillez noter que le nom de l'h√¥te virtuel Zimbra doit correspondre au nom que l'utilisateur doit entrer dans la ligne du navigateur pour acc√©der au domaine, et correspondre √©galement au nom indiqu√© dans le certificat.  Par exemple, prenez Zimbra <b>mail.company.ru</b> comme nom d'h√¥te virtuel et utilisez <b>1.2.3.4</b> comme adresse IPv4 virtuelle. <br><br>  Apr√®s cela, entrez simplement la commande <b>zmprov md company.ru zimbraVirtualHostName mail.company.ru zimbraVirtualIPAddress 1.2.3.4</b> pour lier l'h√¥te virtuel Zimbra √† l'adresse IP virtuelle.  Nous attirons votre attention sur le fait que si le serveur est situ√© derri√®re un NAT ou un pare-feu, vous devez vous assurer que toutes les requ√™tes adress√©es au domaine vont √† l'adresse IP externe qui lui est li√©e, et non √† son adresse sur le r√©seau local. <br><br>  Une fois que tout est termin√©, il ne reste plus qu'√† v√©rifier et √† pr√©parer les certificats de domaine pour l'installation, puis √† les installer. <br><br>  Si le certificat du domaine a √©t√© √©mis correctement, vous devez avoir trois fichiers avec des certificats en main: deux d'entre eux sont des cha√Ænes de certificats de votre autorit√© de certification et un est un certificat direct pour le domaine.  De plus, vous devriez avoir entre les mains un fichier contenant la cl√© que vous avez utilis√©e pour obtenir le certificat.  Cr√©ez un dossier s√©par√© <b>/tmp/company.ru</b> et placez-y tous les fichiers disponibles avec les cl√©s et les certificats.  Le r√©sultat devrait √™tre quelque chose comme ceci: <br><br><pre><code class="bash hljs">ls /tmp/company.ru company.ru.key  company.ru.crt  company.ru.root.crt  company.ru.intermediate.crt</code> </pre> <br>  Apr√®s cela, combinez les cha√Ænes de certificats en un seul fichier √† l'aide de la commande <b>cat company.ru.root.crt company.ru.intermediate.crt &gt;&gt; company.ru_ca.crt</b> et assurez-vous que tout va bien avec les certificats √† l'aide de la commande <b>/ opt / zimbra / bin / zmcertmgr verifycrt comm /tmp/company.ru/company.ru.key /tmp/company.ru/company.ru.crt /tmp/company.ru/company.ru_ca.crt</b> .  Une fois la v√©rification des certificats et de la cl√© r√©ussie, vous pouvez proc√©der √† leur installation. <br><br>  Afin de d√©marrer l'installation, nous allons d'abord combiner le certificat de domaine et les cha√Ænes de confiance des autorit√©s de certification dans un seul fichier.  Cela se fait √©galement en utilisant une commande du formulaire <b>cat company.ru.crt company.ru_ca.crt &gt;&gt; company.ru.bundle</b> .  Apr√®s cela, vous devez ex√©cuter la commande pour √©crire tous les certificats et la cl√© dans LDAP: <b>/ opt / zimbra / libexec / zmdomaincertmgr savecrt company.ru company.ru.bundle company.ru.key</b> , puis installer les certificats √† l'aide de la commande <b>/ opt / zimbra / libexec / zmdomaincertmgr deploycrts</b> .  Apr√®s l'installation, les certificats et la cl√© du domaine <b>company.ru</b> seront stock√©s dans le dossier <b>/opt/zimbra/conf/domaincerts/company.ru</b> . <br><br>  En r√©p√©tant ces √©tapes en utilisant des noms de domaine diff√©rents, mais avec la m√™me adresse IP, vous pouvez obtenir l'emplacement de plusieurs centaines de domaines sur la m√™me adresse IPv4.  Dans le m√™me temps, vous pouvez utiliser sans probl√®me les certificats de divers centres de leur √©mission.  Vous pouvez v√©rifier l'exactitude de toutes les actions effectu√©es dans n'importe quel navigateur, o√π pour chaque nom d'h√¥te virtuel, son certificat SSL doit √™tre affich√©. <br><br>  Pour toutes questions relatives √† la Suite Zextras, vous pouvez contacter le repr√©sentant de la soci√©t√© "Zextras" Ekaterina Triandafilidi par e-mail katerina@zextras.com </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468025/">https://habr.com/ru/post/fr468025/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468015/index.html">Ce que l'on sait actuellement sur ITIL 4 et qui utilise d√©j√† la nouvelle biblioth√®que</a></li>
<li><a href="../fr468017/index.html">La monade peut-√™tre via async / attendre en C # (sans t√¢che ov!)</a></li>
<li><a href="../fr468019/index.html">D√©veloppement de sites Web sur WebAssembly avec NetCore 3 et Blazor</a></li>
<li><a href="../fr468021/index.html">PHP, combien d'abstraction pour les gens?</a></li>
<li><a href="../fr468023/index.html">L'intelligence artificielle dans le jeu de combat Shadow Fight 3</a></li>
<li><a href="../fr468027/index.html">M√©thodes d'optimisation de code pour Redd. Partie 2: m√©moire non cache et fonctionnement sur bus parall√®le</a></li>
<li><a href="../fr468031/index.html">Nous portons un jeu multijoueur de C ++ sur le Web avec Cheerp, WebRTC et Firebase</a></li>
<li><a href="../fr468039/index.html">Meetup Moscou Kubernetes # 6 √† Acronis (Fiztehpark) 10/03/2019</a></li>
<li><a href="../fr468041/index.html">Annonce de l'interface Web de Kubernetes Web View (et un bref aper√ßu des autres interfaces Web pour Kubernetes)</a></li>
<li><a href="../fr468043/index.html">Comment cr√©er un kit d'interface utilisateur √† vendre. √âtapes de d√©veloppement d'un syst√®me de conception commerciale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>