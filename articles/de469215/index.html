<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎌 🧔 🚌 Arbeiten mit Datumsangaben in der Sprache R (Grundfunktionen sowie Lubridate- und TimeperiodsR-Pakete) 👞 🛤️ ✌🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Holen Sie sich das aktuelle Datum in einer beliebigen Programmiersprache, eine Operation, die "Hallo Welt!" Entspricht. Die Sprache R ist keine Ausnah...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arbeiten mit Datumsangaben in der Sprache R (Grundfunktionen sowie Lubridate- und TimeperiodsR-Pakete)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469215/"><p>  Holen Sie sich das aktuelle Datum in einer beliebigen Programmiersprache, eine Operation, die "Hallo Welt!" Entspricht.  Die Sprache R ist keine Ausnahme. </p><br><p>  In diesem Artikel werden wir uns ansehen, wie Datumsangaben in der grundlegenden R-Syntax funktionieren, sowie einige nützliche Pakete, die ihre Funktionen beim Arbeiten mit Datumsangaben erweitern: </p><br><ul><li> <code>lubridate</code> - ein Paket, das arithmetische Berechnungen zwischen Daten ermöglicht; </li><li>  <code>timeperiodsR</code> - ein Paket zum Arbeiten mit Zeitintervallen und ihren Komponenten. </li></ul><br><p><img src="https://habrastorage.org/webt/l2/mg/nl/l2mgnl_5u7eejcuu1hazlp5xocg.jpeg"></p><a name="habracut"></a><br><hr><br><h1 id="soderzhanie">  Inhalt </h1><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arbeiten mit Datumsangaben in der grundlegenden R-Syntax</a> <br>  1.1.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Text in Datum konvertieren</a> <br>  1.2.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abrufen von Datumskomponenten in Base R.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arbeiten mit Daten mit dem Lubridate-Paket</a> <br>  2.1.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konvertieren Sie Text mit Lubridate in das Datum</a> <br>  2.2.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abrufen von Datumskomponenten mit dem Lubridate-Paket</a> <br>  2.3.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arithmetische Operationen mit Datumsangaben</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vereinfachte Arbeit mit Perioden, ZeitperiodenR-Paket</a> <br>  3.1.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zeitintervalle in ZeiträumenR</a> <br>  3.2.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Filtern eines Datumsvektors mit ZeitperiodenR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fazit</a> </li></ol><br><hr><br><h1 id="rabota-s-datami-v-bazovom-sintaksise-r">  Arbeiten mit Datumsangaben in der grundlegenden R-Syntax </h1><br><h3 id="preobrazovanie-teksta-v-datu">  Text in Datum konvertieren </h3><br><p>  In Basic R gibt es eine Reihe von Funktionen zum Arbeiten mit Datumsangaben.  Das Minus der Grundsyntax ist, dass das Register der Namen und Argumente der Funktionen sehr fragmentiert ist und praktisch keine logische Verbindung hat.  Trotzdem müssen die Grundfunktionen der Sprache bekannt sein, also werden wir mit ihnen beginnen. </p><br><p>  Wenn Sie Daten aus CSV-Dateien oder anderen Quellen in R laden, erhalten Sie das Datum meistens in Form von Text.  Verwenden Sie die Funktion <code>as.Date()</code> diesen Text in den richtigen Datentyp zu <code>as.Date()</code> . </p><br><pre> <code class="plaintext hljs">#      my_dates &lt;- c("2019-09-01", "2019-09-10", "2019-09-23") #    class(my_dates)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; [1] "character"</code> </pre> <br><pre> <code class="plaintext hljs">#     my_dates &lt;- as.Date(my_dates) #    class(my_dates)</code> </pre> <br><pre> <code class="plaintext hljs">#&gt; [1] "Date"</code> </pre> <br><p>  Standardmäßig akzeptiert <code>as.Date()</code> ein Datum in zwei Formaten: <em>JJJJ-MM-TT</em> oder <em>JJJJ / MM / TT</em> . <br>  Wenn die Daten in Ihrem Datensatz ein anderes Format haben, können Sie das Formatargument für die Konvertierung verwenden. </p><br><pre> <code class="plaintext hljs">as.Date("September 26, 2019", format = "%B %d, %Y")</code> </pre> <br><p>  <em>format</em> akzeptiert in einer Zeichenfolge Formularoperatoren, die ein beliebiges Zeitintervall und dessen Format angeben. Die am häufigsten verwendeten Werte sind in der folgenden Tabelle aufgeführt: </p><br><div class="scrollable-table"><table><thead><tr><th>  Formatieren </th><th>  Beschreibung </th></tr></thead><tbody><tr><td>  % d </td><td>  Tagesnummer im Monat </td></tr><tr><td>  % a </td><td>  Abkürzung für den Namen des Wochentags </td></tr><tr><td>  % A. </td><td>  Vollständiger Name des Wochentags </td></tr><tr><td>  % w </td><td>  Wochentagsnummer (0-6, wobei 0 Sonntag ist) </td></tr><tr><td>  % m </td><td>  Zweistellige Monatsbezeichnung (01-12) </td></tr><tr><td>  % b </td><td>  Abkürzung für den Namen des Monats (apr, mar, ...) </td></tr><tr><td>  % B. </td><td>  Voller Monatsname </td></tr><tr><td>  % y </td><td>  Zweistellige Jahresbezeichnung </td></tr><tr><td>  % Y. </td><td>  Vierstellige Jahresbezeichnung </td></tr><tr><td>  % j </td><td>  Tagesnummer des Jahres (001 - 366) </td></tr><tr><td>  % U. </td><td>  Wochennummer des Jahres (00 - 53), Wochenbeginn Sonntag </td></tr><tr><td>  % W. </td><td>  Wochennummer des Jahres (00 - 53), Wochenbeginn Montag </td></tr></tbody></table></div><br><p>  Dementsprechend ist „26. September 2019“ der vollständige Name des Monats, des Tages und des Jahres.  Sie können dieses Datumsformat mit den Operatoren wie folgt beschreiben: <code>"%B %d, %Y"</code> . </p><br><p>  <strong>Wo:</strong> </p><br><ul><li>  <code>%B</code> - Vollständiger Monatsname </li><li>  <code>%d</code> - Tageszahl im Monat </li><li>  <code>%Y</code> - Vierstellige Jahresbezeichnung </li></ul><br><p>  Bei der Beschreibung des Datumsformats ist es wichtig, alle zusätzlichen Zeichen aus Ihrer Zeichenfolge einzuschließen, z. B. Bindestriche, Kommas, Punkte, Leerzeichen usw.  In meinem Beispiel "26. September 2019" wird ein Komma nach dem Datum gesetzt, und ein Komma sollte auch in der Formatbeschreibung <code>"%B %d, %Y"</code> . </p><br><p>  Es gibt Situationen, in denen Sie ein Datum erhalten, das nicht nur für Standardformate <em>(JJJJ-MM-TT oder JJJJ / MM / TT)</em> ungeeignet ist, sondern auch in einer Sprache, die von der Standardeinstellung in Ihrem Betriebssystem abweicht.  Sie haben beispielsweise Daten heruntergeladen, bei denen das Datum in der folgenden Form angegeben ist: "15. Dezember 2019".  Bevor Sie diese Zeichenfolge in ein Datum konvertieren, müssen Sie das Gebietsschema ändern. </p><br><pre> <code class="plaintext hljs">#   Sys.setlocale("LC_TIME", "Russian") #     as.Date(" 15, 2019 .", format = "%B %d, %Y")</code> </pre> <br><h3 id="izvlechenie-komponentov-daty-v-bazovom-r">  Abrufen von Datumskomponenten in Base R. </h3><br><p>  In Basic R gibt es nicht viele Funktionen, mit denen Sie einen Teil eines Datums aus einem Objekt der <em>Date-</em> Klasse extrahieren können. </p><br><pre> <code class="plaintext hljs">current_date &lt;- Sys.Date() #   weekdays(current_date) #     months(current_date) #      quarters(current_date) #     </code> </pre> <br><p>  Zusätzlich zur Hauptklasse der <em>Datumsobjekte</em> in der Basis R gibt es zwei weitere Datentypen, in denen der Zeitstempel <em>gespeichert</em> ist: <em>POSIXlt</em> , <em>POSIXct</em> .  Der Hauptunterschied zwischen diesen Klassen und <em>Datum</em> besteht darin, dass sie zusätzlich zum Datum die Uhrzeit speichern. </p><br><pre> <code class="plaintext hljs">#      current_time &lt;- Sys.time() #    current_time class(current_time)</code> </pre> <br><pre> <code class="plaintext hljs"># "POSIXct" "POSIXt"</code> </pre><br><p>  Die Funktion <code>Sys.time()</code> gibt das aktuelle Datum und die aktuelle Uhrzeit im <em>POSIXct-</em> Format zurück.  Dieses Format hat eine ähnliche Bedeutung wie <em>UNIXTIME</em> und speichert die Anzahl der Sekunden seit Beginn der UNIX-Ära <em>(Mitternacht (UTC) vom 31. Dezember 1969 bis 1. Januar 1970)</em> . </p><br><p>  Die <em>POSIXlt-</em> Klasse speichert auch Uhrzeit und Datum sowie alle ihre Komponenten.  Daher ist es ein Objekt mit einer komplexeren Struktur, von dem es jedoch leicht ist, eine beliebige Komponente des Datums und der Uhrzeit seitdem zu erhalten  Im Wesentlichen ist <em>POSIXlt</em> eine <em>Liste</em> . </p><br><pre> <code class="plaintext hljs">#      current_time_ct &lt;- Sys.time() #    POSIXlt current_time_lt &lt;- as.POSIXlt(current_time_ct) #      current_time_lt$sec #  current_time_lt$min #  current_time_lt$hour #  current_time_lt$mday #   current_time_lt$mon #  current_time_lt$year #  current_time_lt$wday #   current_time_lt$yday #   current_time_lt$zone #  </code> </pre> <br><p>  Die Konvertierung von Zahlen- und Textdaten in <em>POSIX *</em> -Formate erfolgt durch die Funktionen <code>as.POSIXct()</code> und <code>as.POSIXlt()</code> .  Diese Funktionen haben eine kleine Anzahl von Argumenten. </p><br><ul><li>  x - Die Nummer, Zeichenfolge oder das Objekt der zu konvertierenden <em>Date-</em> Klasse. </li><li>  tz - Zeitzone, Standard ist "GMT"; </li><li>  format - Beschreibung des Datumsformats, in dem die im Argument x übergebenen Daten dargestellt werden; </li><li>  origin - Wird nur beim Konvertieren einer Zahl in POSIX verwendet. Sie müssen ein Datumsobjekt an dieses Argument übergeben und die Zeit, ab der die Sekunden gezählt werden.  Wird normalerweise für die Übersetzung von UNIXTIME verwendet. </li></ul><br><p>  Wenn Ihre Datums- und <em>Uhrzeitdaten</em> in <em>UNIXTIME angezeigt werden</em> , konvertieren Sie sie <em>anhand</em> des folgenden Beispiels in ein verständliches, lesbares Datum: </p><br><pre> <code class="plaintext hljs">#  UNIXTIME    as.POSIXlt(1570084639, origin = "1970-01-01")</code> </pre> <br><p>  Im Ursprung können Sie einen beliebigen Zeitstempel angeben.  Wenn in Ihren Daten beispielsweise Datum und Uhrzeit als Anzahl der Sekunden ab dem 15. September 2019, 12:15 Uhr angegeben sind, verwenden Sie Folgendes, um sie in ein Datum umzuwandeln: </p><br><pre> <code class="plaintext hljs">#  UNIXTIME       15  2019 12:15 as.POSIXlt(1546123, origin = "2019-09-15 12:15:00")</code> </pre> <br><h1 id="rabota-s-datami-s-pomoschyu-paketa-lubridate">  Arbeiten mit Daten mit dem Lubridate-Paket </h1><br><p>  <code>lubridate</code> vielleicht das beliebteste Paket für die Arbeit mit Daten in R. Es bietet Ihnen drei weitere Klassen. </p><br><ul><li>  Dauer - Dauer, d.h.  Anzahl der Sekunden zwischen zwei Zeitstempeln; </li><li>  Zeiträume - Zeiträume ermöglichen es Ihnen, Berechnungen zwischen Daten von für Menschen lesbaren Intervallen durchzuführen: Tage, Monate, Wochen usw. </li><li>  Intervalle - Objekte, die den Anfangs- und Endzeitpunkt angeben. </li></ul><br><p>  Die Installation zusätzlicher Pakete in der Sprache R erfolgt über die Standardfunktion <code>install.packages()</code> . </p><br><p>  Installieren des <code>lubridate</code> Pakets: </p><br><pre> <code class="plaintext hljs">install.packages("lubridate")</code> </pre> <br><h3 id="preobrazovanie-teksta-v-datu-s-pomoschyu-lubridate">  Konvertieren Sie Text mit Lubridate in das Datum </h3><br><p>  Die Funktionen des <code>lubridate</code> Pakets vereinfachen die Konvertierung von Text in Datum erheblich und ermöglichen es Ihnen, arithmetische Operationen mit Datum und Uhrzeit auszuführen. </p><br><p>  Mit den Funktionen <code>today()</code> und <code>now()</code> können Sie das aktuelle Datum oder Datum und die Uhrzeit abrufen. </p><br><pre> <code class="plaintext hljs">today() #   now() #    </code> </pre> <br><p>  Um eine Zeichenfolge in ein Datum <code>lubridate</code> verfügt <code>lubridate</code> über eine ganze Familie von Funktionen, deren Namen immer aus drei Buchstaben bestehen und eine Folge von <code>lubridate</code> angeben: </p><br><ul><li>  y - Jahr </li><li>  m - Monat </li><li>  d - Tag </li></ul><br><div class="spoiler">  <b class="spoiler_title">Liste der Funktionen zum Konvertieren von Text in Datum über Lubridate</b> <div class="spoiler_text"><ul><li> <code>ymd()</code> </li> <li> <code>ydm()</code> </li> <li> <code>mdy()</code> </li> <li> <code>myd()</code> </li> <li> <code>dmy()</code> </li> <li> <code>dym()</code> </li> <li> <code>yq()</code> </li> </ul></div></div><br><p>  Einige Beispiele für die Konvertierung von Zeichenfolgen in Datumsangaben: </p><br><pre> <code class="plaintext hljs">ymd("2017 jan 21") mdy("March 20th, 2019") dmy("1st april of 2018")</code> </pre> <br><p>  Wie Sie sehen können, <code>lubridate</code> Datumsbeschreibungen in Form von Text wesentlich effizienter und ermöglicht es Ihnen, Text in Datum zu konvertieren, ohne zusätzliche Operatoren zur Beschreibung des Formats zu verwenden. </p><br><h3 id="izvlechenie-komponentov-dat-s-pomoschyu-paketa-lubridate">  Abrufen von Datumskomponenten mit dem Lubridate-Paket </h3><br><p>  Auch mit <code>lubridate</code> können Sie jede Komponente von einem Datum erhalten: </p><br><pre> <code class="plaintext hljs">dt &lt;- ymd("2017 jan 21") year(dt) #  month(dt) #  mday(dt) #    yday(dt) #    wday(dt) #  </code> </pre> <br><h3 id="arifmeticheskie-operacii-s-datami">  Arithmetische Operationen mit Datumsangaben </h3><br><p>  Die wichtigste und grundlegendste Funktionalität von <code>lubridate</code> ist jedoch die Fähigkeit, verschiedene arithmetische Operationen mit Datumsangaben auszuführen. </p><br><p>  Das Runden eines Datums erfolgt durch drei Funktionen: </p><br><ul><li>  <code>floor_date</code> - Rundung auf die nächste vergangene Zeit </li><li>  <code>ceiling_date</code> - Rundung auf die nahe Zukunft </li><li>  <code>round_date</code> - Rundung auf die nächste Zeit </li></ul><br><p>  Jede dieser Funktionen verfügt über ein <em>Einheitenargument</em> , mit dem Sie eine Rundungseinheit angeben können: Sekunde, Minute, Stunde, Tag, Woche, Monat, Zweimonat, Quartal, Saison, Halbjahr, Jahr </p><br><pre> <code class="plaintext hljs">dt &lt;- ymd("2017 jan 21") round_date(dt, unit = "month") #    round_date(dt, unit = "3 month") #   3  round_date(dt, unit = "quarter") #    round_date(dt, unit = "season") #    round_date(dt, unit = "halfyear") #   </code> </pre> <br><p>  Lassen Sie uns also herausfinden, wie Sie ein Datum erhalten, das 8 Tage nach dem aktuellen Datum liegt, und verschiedene andere arithmetische Berechnungen zwischen zwei Daten durchführen. </p><br><pre> <code class="plaintext hljs">today() + days(8) #     8  today() - months(2) #    2   today() + weeks(12) #     12  today() - years(2) #    2  </code> </pre> <br><h1 id="uproschyonnaya-rabota-s-periodami-paket-timeperiodsr">  Vereinfachte Arbeit mit Perioden, ZeitperiodenR-Paket. </h1><br><p>  <code>timeperiodsR</code> ist ein <code>timeperiodsR</code> Paket für die Arbeit mit Daten, das im September 2019 auf CRAN veröffentlicht wurde. </p><br><p>  Installieren des <code>timeperiodsR</code> Pakets: </p><br><pre> <code class="plaintext hljs">install.packages("timeperiodsR")</code> </pre> <br><p>  Der Hauptzweck besteht darin, schnell ein bestimmtes Zeitintervall relativ zu einem bestimmten Datum zu bestimmen.  Mit seinen Funktionen können Sie beispielsweise ganz einfach: </p><br><ul><li>  Holen Sie sich letzte Woche, Monat, Quartal oder Jahr in R. </li><li>  Erhalten Sie eine bestimmte Anzahl von Zeitfenstern in Bezug auf ein Datum, z. B. die letzten 4 Wochen. </li><li>  Es ist einfach, seine Komponenten aus dem erhaltenen Zeitintervall zu extrahieren: das Start- und Enddatum, die Anzahl der Tage, die in das Intervall fallen, die gesamte Folge von Daten, die es eingeben. </li></ul><br><p>  Der Name aller Funktionen des Pakets <code>timeperiodsR</code> intuitiv und besteht aus zwei Teilen: <em>Richtung</em> _ <em>Intervall</em> , wobei: </p><br><ul><li>  <strong>Richtung,</strong> in die es erforderlich ist, sich relativ zu einem bestimmten Datum zu bewegen: last_n, previous, this, next, next_n. </li><li>  <strong>Zeitintervall</strong> für die Berechnung des Zeitraums: Tag, Woche, Monat, Quartal, Jahr. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Vollständiger Funktionsumfang:</b> <div class="spoiler_text"><ul><li> <code>last_n_days()</code> </li> <li> <code>last_n_weeks()</code> </li> <li> <code>last_n_months()</code> </li> <li> <code>last_n_quarters()</code> </li> <li> <code>last_n_years()</code> </li> <li> <code>previous_week()</code> </li> <li> <code>previous_month()</code> </li> <li> <code>previous_quarter()</code> </li> <li> <code>previous_year()</code> </li> <li> <code>this_week()</code> </li> <li> <code>this_month()</code> </li> <li> <code>this_quarter()</code> </li> <li> <code>this_year()</code> </li> <li> <code>next_week()</code> </li> <li> <code>next_month()</code> </li> <li> <code>next_quarter()</code> </li> <li> <code>next_year()</code> </li> <li> <code>next_n_days()</code> </li> <li> <code>next_n_weeks()</code> </li> <li> <code>next_n_months()</code> </li> <li> <code>next_n_quarters()</code> </li> <li> <code>next_n_years()</code> </li> <li> <code>custom_period()</code> </li> </ul></div></div><br><h3 id="vremennye-intervaly-v-timeperiodsr">  Zeitintervalle in ZeiträumenR </h3><br><p>  Diese Funktionen sind nützlich, wenn Sie Berichte basierend auf Daten der letzten Woche oder des letzten Monats erstellen müssen.  Verwenden Sie die gleichnamige Funktion <code>previous_month()</code> um den letzten Monat abzurufen: </p><br><pre> <code class="plaintext hljs">prmonth &lt;- previous_month()</code> </pre> <br><p>  Danach haben Sie ein <em>prprth-</em> Objekt der <em>tpr-</em> Klasse, von dem Sie leicht die folgenden Komponenten erhalten können: </p><br><ul><li>  Das Startdatum des Zeitraums, in unserem Beispiel ist dies der letzte Monat </li><li>  Zeitraum Enddatum </li><li>  die Anzahl der im Zeitraum enthaltenen Tage </li><li>  Reihenfolge der in der Periode enthaltenen Daten </li></ul><br><p>  Darüber hinaus können Sie jede der Komponenten auf unterschiedliche Weise erhalten: </p><br><pre> <code class="plaintext hljs">#    prmonth$start start(prmonth) #    prmonth$end end(prmonth) #   prmonth$sequence seq(prmonth) #      prmonth$length length(prmonth)</code> </pre> <br><p>  Sie können jede der Komponenten auch mit dem Argument <em>part</em> abrufen, das in jeder der Paketfunktionen vorhanden ist.  Mögliche Werte: Start, Ende, Sequenz, Länge. </p><br><pre> <code class="plaintext hljs">previous_month(part = "start") #   previous_month(part = "end") #   previous_month(part = "sequence") #   previous_month(part = "length") #    </code> </pre> <br><p>  Schauen wir uns also alle Argumente an, die in den Funktionen des <code>timeperiodsR</code> Pakets <code>timeperiodsR</code> sind: </p><br><ul><li>  <code>x</code> - das Referenzdatum, ab dem der Zeitraum berechnet wird, standardmäßig das aktuelle Datum; </li><li>  <code>n</code> - Die Anzahl der Intervalle, die in dem Zeitraum enthalten sein werden, z. B. 3 vorherige Wochen; </li><li>  <code>part</code> - Welche Komponente des <code>tpr</code> Objekts müssen Sie erhalten, standardmäßig <code>all</code> ; </li><li>  <code>week_start</code> - Das Argument ist nur in den Funktionen für die Arbeit mit Wochen vorhanden und ermöglicht es Ihnen, die Nummer des Wochentags anzugeben, der als Beginn betrachtet wird. Standardmäßig ist der Wochenbeginn Montag, Sie können jedoch einen beliebigen Wert von 1 - Montag bis 7 - Sonntag angeben. </li></ul><br><p>  So können Sie jeden Zeitraum relativ zum aktuellen oder einem anderen bestimmten Datum berechnen. Ich werde einige weitere Beispiele nennen: </p><br><hr><br><pre> <code class="plaintext hljs">#  3   #  6  2019  #   -  last_n_weeks(x = "2019-10-06", n = 3, week_start = 1)</code> </pre> <br><pre> <code class="plaintext hljs"> Time period: from 9 September of 2019, Monday to 29 September of 2019, Sunday</code> </pre> <br><p>  Der 6. Oktober ist Sonntag: <br><img src="https://habrastorage.org/getpro/habr/post_images/32c/cca/606/32ccca60658416fc953de4ed8016226e.png" alt="6. Oktober 2019"></p><br><p>  Wir brauchen einen Zeitraum, der gegenüber dem 6. Oktober drei Vorwochen dauern wird.  Ohne die Woche vom 6. Oktober.  Dementsprechend ist dies der Zeitraum vom 9. bis 29. September. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/68f/749/599/68f7495999a3da01e764710b169a5a2b.png" alt="3 Wochen ab dem 6. Oktober 2019"></p><br><hr><br><pre> <code class="plaintext hljs">#     4  #  16  2019  previous_month(x = "2019-09-16", n = 4)</code> </pre> <br><pre> <code class="plaintext hljs"> Time period: from 1 May of 2019, Wednesday to 31 May of 2019, Friday</code> </pre> <br><p>  In diesem Beispiel interessieren wir uns für den Monat vor 4 Monaten, wenn wir vom 16. September 2019 fortfahren, war es dementsprechend Mai 2019. </p><br><h3 id="filtraciya-vektora-dat-s-pomoschyu-timeperiodsr">  Filtern eines Datumsvektors mit ZeitperiodenR </h3><br><p>  Es gibt mehrere Operatoren zum Filtern von Daten in <code>timeperiodsR</code> : </p><br><ul><li>  % left_out% - vergleicht zwei Objekte der tpr-Klasse und gibt den Wert von links zurück, die sich nicht rechts befinden. </li><li>  % left_in% - vergleicht zwei Objekte der tpr-Klasse und gibt Daten vom linken Objekt zurück, die im rechten Objekt enthalten sind. </li><li>  % right_out% - vergleicht zwei Objekte der tpr-Klasse und gibt den Wert von rechts zurück, die links fehlen. </li><li>  % right_in% - vergleicht zwei Objekte der tpr-Klasse und gibt die Daten des rechten Objekts zurück, die im linken vorhanden sind. </li></ul><br><pre> <code class="plaintext hljs">period1 &lt;- this_month("2019-11-07") period2 &lt;- previous_week("2019-11-07") period1 %left_in% period2 #    period1    period2 period1 %left_out% period2 #    period1     period2 period1 %right_in% period2 #    period2    period1 period1 %right_out% period2 #    period2     period1</code> </pre> <br><h1 id="zaklyuchenie">  Fazit </h1><br><p>  Wir haben die Objektklassen, die in der R-Sprache für die Arbeit mit Datumsangaben entworfen wurden, eingehend untersucht.  Außerdem können Sie jetzt mit dem Paket <code>timeperiodsR</code> arithmetische Operationen an Datumsangaben ausführen und schnell beliebige Zeiträume <code>timeperiodsR</code> . </p><br><p>  Wenn Sie sich für die R-Sprache interessieren, lade ich Sie ein, meinen Telegrammkanal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">R4marketing</a> zu abonnieren, in dem ich täglich nützliche Materialien über die Verwendung der R-Sprache bei der Lösung meiner täglichen Aufgaben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">austausche</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de469215/">https://habr.com/ru/post/de469215/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de469203/index.html">Starkes „Kaffee“ zum Frühstück und für Hackathons: Warum ist es wichtig für die Entwicklung der Data Science-Community?</a></li>
<li><a href="../de469205/index.html">Museum DataArt. "Electronics MS 0511" auspacken</a></li>
<li><a href="../de469209/index.html">Wie billig Philips LED-Lampen sich von teuren unterscheiden</a></li>
<li><a href="../de469211/index.html">Wie ICD ein Ökosystem für Bankkunden entwickelt</a></li>
<li><a href="../de469213/index.html">Erkundung kombinatorischer Parser mit Rust</a></li>
<li><a href="../de469217/index.html">IMHO Saint TeamLead Conf 2019</a></li>
<li><a href="../de469219/index.html">Top 20 Navigationsfunktionen bei IntelliJ IDEA. Teil 2</a></li>
<li><a href="../de469221/index.html">Cascadeur: Vorhersage der Sechs-Punkte-Pose eines Charakters</a></li>
<li><a href="../de469223/index.html">LED-Hintergrundbeleuchtung als Hintertür</a></li>
<li><a href="../de469229/index.html">Robotik-Club-Projekt „GoROBO“ - ein Startup vom Beschleuniger der ITMO-Universität schafft es</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>