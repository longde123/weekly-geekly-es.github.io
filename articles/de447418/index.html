<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤵🏼 🚠 🎥 Wir verarbeiten Bitcoin. Wie ist die B2BinPay-Zahlungsseite aufgebaut? 🤰🏿 ✅ 👼🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="B2BinPay ist ein Kryptowährungs-Zahlungssystem mit vielen verwandten Backends für Anwendungen, Analysen, Knoten, Warteschlangen, aber nur einer UI-Sei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir verarbeiten Bitcoin. Wie ist die B2BinPay-Zahlungsseite aufgebaut?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/b2broker/blog/447418/">  B2BinPay ist ein Kryptowährungs-Zahlungssystem mit vielen verwandten Backends für Anwendungen, Analysen, Knoten, Warteschlangen, aber nur einer UI-Seite, die der Endbenutzer sieht.  Es stellt hohe Anforderungen an die Benutzerfreundlichkeit.  Trotz der offensichtlichen Einfachheit der Seite wäre das Entwicklungsteam daran interessiert, zu teilen, wie sie von innen angeordnet ist. <br><br>  Um Geschäftsprozesse zu verstehen, müssen Sie in den Themenbereich eintauchen.  Für Leser, die noch nicht wissen, was Kryptowährung, Blockchain und Adresse sind, haben wir kurze und verständliche Definitionen unter dem Schnitt gemacht. <br><br><img src="https://habrastorage.org/webt/9l/st/fh/9lstfhjhpe676a3t3e8mj3fdu-q.jpeg"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Um die Begriffe zu verstehen, sind hier einige Analogien zur Fiat-Zahlungswelt:</b> <div class="spoiler_text">  <b>Blockchain</b> ist eine dezentrale Datenbank (im Idealfall), in der Informationen zu Adressen, Transaktionen und Salden gespeichert werden.  Es besteht aus Blöcken, von denen jeder eine begrenzte Menge an Informationen enthält.  Blöcke werden dank Bergleuten durch energieintensive Berechnungen (PoW) oder Proof of Stake (PoS) erzeugt.  Jeder nächste Block enthält eine Liste neuer Transaktionen und einen Link zur vorherigen.  Jede Kryptowährung hat eine eigene Blockchain. <br><br>  <b>Händler</b> - wie der Eigentümer des Geschäfts, der ein Zahlungssystem für den Empfang von Zahlungen von Endbenutzern mietet. <br><br>  <b>Eine Brieftasche</b> ist dasselbe wie ein Konto in der traditionellen Finanzwelt. <br><br>  <b>Transaktion</b> - Ein Datensatz in der Blockchain, über den Gelder von einer Brieftasche zur anderen gesendet wurden.  Der Brieftaschenbestand wird aus der Anzahl der Transaktionen gebildet. <br><br>  <b>Die Adresse entspricht</b> den Kontodaten.  Der Unterschied besteht darin, dass Sie mit den meisten Blockchains eine unendliche Anzahl von Adressen für eine Brieftasche generieren können. <br><br>  <b>Eine bestätigte Transaktion</b> ist eine Transaktion, nach der eine sichere Anzahl von Blöcken generiert wurde.  Ein Block entspricht einer Bestätigung.  Wenn die Transaktion keine 4-8 Bestätigungen erhalten hat, gilt sie nicht als abgeschlossen. <br><br>  <b>Zahlungssystem</b> - Software, die die Annahme und Verarbeitung von Zahlungen in Kryptowährung ermöglicht.  Verknüpft und aggregiert Bestellungen, Zahlungen, Transaktionen, Retouren, Nachschub, Abhebungen und andere Informationen.  Es informiert das Händlersystem auch über Änderungen im Zusammenhang mit Bestellungen und Zahlungen und nicht über Blockchains und Transaktionen. <br><br>  <b>Explorer</b> - ein Dienst oder eine Browser-Site für Daten, die in die Blockchain gelangen.  Mit diesem Service können Sie bequem Informationen zu Adressen, Transaktionen und Blöcken abrufen. <br><br>  <b>Ein Knoten</b> ist ein Computer, auf dem eine Kopie der gesamten Datenbank (Blockchain) gespeichert ist. <br></div></div><br><h3>  Allgemeines Arbeitsschema und Anforderungen an den Inhalt der Zahlungsseite </h3><br>  Der Zahlungszyklus läuft wie folgt ab: Auf der Website des Geschäfts wählt der Käufer das Produkt und die Zahlungswährung aus.  Das System leitet den Benutzer zur Zahlungsseite weiter.  Es enthält die folgenden Informationen: Währung, Adresse, Informationskommentare.  Der Benutzer sendet den erforderlichen Betrag an die angegebene Adresse und erwartet eine ausreichende Anzahl von Netzwerkbestätigungen, um die Zahlung als erfolgreich zu erkennen.  Während des Wartens kann der Käufer den Status der Zahlung überwachen, ohne die Seite auf der Explorer-Website zu verlassen.  Sobald die Zahlung akzeptiert wurde, wird der Benutzer auf die Seite für erfolgreiche Zahlungen auf der Website des Verkäufers weitergeleitet. <br><br><img src="https://habrastorage.org/webt/gz/mu/p8/gzmup8pqrvynkwr7plvc_a3uyqu.png"><br><br>  Der Zahlungsvorgang ist in mehrere Phasen unterteilt.  Jeder von ihnen erfordert keine Benutzeraktion, außer für die direkte Geldüberweisung.  Standard erfolgreiches Skript: <br><br><ol><li>  Auf der Website des Verkäufers wählt der Benutzer die B2BinPay-Zahlungsmethode und -Währung aus </li><li>  Die IP des Verkäufers sendet eine Anfrage zum Erstellen eines neuen Zahlungsauftrags und erhält als Antwort einen Link zur Zahlungsseite </li><li>  Der Benutzer leitet zur Zahlungsseite weiter, die Informationen enthält: Währung, Betrag, Adresse und ggf. zusätzliche Felder </li><li>  Benutzer zahlt für den Kauf </li><li>  Das System erkennt, dass eine neue Transaktion an der Adresse angekommen ist und die Seite in den Verfolgungsstatus wechselt </li><li>  Der Transaktionsstatus wird überwacht und die Informationen auf der Seite werden aktualisiert, bis eine sichere Anzahl von Bestätigungen erreicht ist. </li><li>  Der Benutzer wird auf die Seite für erfolgreiche Zahlungen auf der Website des Verkäufers weitergeleitet </li></ol><br>  Dementsprechend kann sich die Zahlungsseite in zwei Zuständen befinden: Anzeigen von Details und Warten auf Bestätigung.  Wenn Sie die Details anzeigen, können Sie die Adresse auf zwei Arten eingeben: Scannen Sie den QR-Code oder kopieren Sie die Adresse in Textform.  Zusätzlich zu den grundlegenden Informationen fügen wir eine Mini-Anleitung in Textform hinzu, in der Sie erfahren, wie Sie bezahlen, wo Sie die Brieftaschenanwendung herunterladen und wie Sie Geld kaufen.  Zusätzlich zu diesen Feldern gibt es noch eines, dessen Vorhandensein von der gewählten Währung abhängt.  Manchmal ist es erforderlich, nicht nur die Adresse, sondern auch zusätzliche Informationen zu kennen, um eine Transaktion, einen Zahlungsauftrag und einen Käufer korrekt zu korrelieren.  Beispielsweise müssen Sie für die Ripple-Währung beim Senden das Ziel-Tag angeben (Kommentar zur Transaktion). <br><br>  Für diejenigen, die die Adresse in Textform kopieren und den QR-Code nicht scannen, wurde eine Schaltfläche zum Kopieren hinzugefügt.  Außerdem sollte das Logo der Münze auf der Seite vorhanden sein, da viele Personen die Währung visuell anhand der Form und des Farbschemas des Logos und nicht anhand der Buchstabenbezeichnung identifizieren. <br><br>  Die Statusänderung erfolgt zu dem Zeitpunkt, an dem eine eingehende Transaktion an die Rechnungsadresse erkannt wird.  In diesem Moment verschwinden die Details, da sie nicht mehr benötigt werden.  Der Benutzer wechselt in den Standby-Modus, und die Seite benötigt einen ständigen Informationsfluss über den Status der Transaktion.  Jetzt finden Sie auf der Seite: das Zeitlimit bis zum Abschluss der Transaktion, die aktuelle Anzahl der Bestätigungen, einen kurzen Kommentar, in dem weitere Aktionen erläutert werden. <br><br>  Die Seite sollte leicht verständlich, intuitiv und gleichzeitig ausreichend informativ sein.  Für erfahrene Käufer muss die Adresse und der Betrag im Vordergrund stehen. <br><br>  Aus den obigen Anforderungen wurde ein Layout für die zukünftige Seite erhalten. <br><br><img src="https://habrastorage.org/webt/zb/v3/nv/zbv3nvvp1jnpyu1h1udaydk1vg8.gif"><br><br><h3>  Backend </h3><br>  <b>Die erste Möglichkeit</b> , das Backend zu implementieren, besteht darin, darauf zu verzichten!  Bei der Erstellung der Zahlungsseite ist im Voraus bekannt, an welche Adresse das Geld gesendet wird.  Sie können neue Transaktionen unter dieser Adresse vom Explorer mithilfe von JS-Tools erhalten.  Daher besteht die Aufgabe darin, Konnektoren in den Explorer zu schreiben und den erforderlichen regelmäßig abzufragen.  Ein statisches Klassendiagramm könnte folgendermaßen aussehen: <br><br><img src="https://habrastorage.org/webt/eu/h9/k2/euh9k2ahzvxmqe4wyeco836lary.png"><br><br>  <i>Vorteile:</i> Unsere Kapazitäten werden nicht belastet, sie sind einfach zu implementieren und es gibt keine potenziellen Sicherheitsbedrohungen. <br><br>  <i>Nachteile:</i> unzuverlässige Quellen und vorzeitiger Empfang neuer Informationen, Schwierigkeiten bei der Bereitstellung von Codebasis-Updates für Endkunden (unkontrolliertes Caching).  Entscheidendes Minus - viele Währungen haben keinen stabilen Explorer mit einer entwickelten API. <br><br>  <b>Die zweite Option</b> (funktioniert) ist ein eigener Mikroservice, der Informationen direkt aus dem Pool von Knoten empfängt, filtert und auf Zahlungsseiten verteilt.  Durch die Verwendung von serverseitigen Ereignissen auf dem Client wird die Redundanz verringert und Datenverkehr gespart.  SSEs passen in den Anwendungsfall, da die Seite in ihrem Verhalten passiv ist - sie akzeptiert nur neue Informationen. <br><br>  <i>Nachteile:</i> viele Implementierungskosten, zusätzliche Belastung der Ausrüstung. <br><br>  <i>Vorteile:</i> hohes Maß an Zuverlässigkeit und Unabhängigkeit von Diensten Dritter;  Der Kontext der Bestellung, nicht die Transaktion. <br>  Schaltplan: <br><br><img src="https://habrastorage.org/webt/fm/cx/p2/fmcxp2z1jvfwu0ugtqviirg1ply.png"><br><br>  Wenn die Zahlungsseite im Browser des Kunden geöffnet wird, wird eine Anforderung zum Erstellen einer SSE-Verbindung an das asynchrone Backend des Microservice gesendet.  Die Anfrage gibt die zu verfolgende Adresse, den Zahlungsbetrag, die Lebensdauer und andere kleinere Parameter an.  Im Backend wird dies im speicherinternen noSQL-Speicher gespeichert.  Jedes Mal, wenn ein neuer Block auf einem Blockchain-Knoten angezeigt wird, empfängt und extrahiert die Anwendung nützliche Informationen an den in der Datenbank gespeicherten Adressen und Transaktionen.  Wenn der nächste Block nützlich ist, werden Aktualisierungen an Clients gesendet.  Verbindungen werden auf Initiative des Servers geschlossen, wenn genügend Bestätigungen eingegangen sind oder TTL abgelaufen ist. <br><br>  Daher führt das Backend ressourcenintensive Vorgänge aus und steuert den Datenverkehr nur, wenn neue Informationen am Knoten eintreffen, und es gibt keine periodische "Abfrage" nach neuen Informationen.  Dank der Asynchronität erhalten wir eine hohe Geschwindigkeit mit Tausenden von gleichzeitigen Verbindungen. <br><br>  In dem Wissen, dass bei Münzen mit PoW die Verzögerung beim Empfang neuer Informationen innerhalb einer Sekunde vernachlässigbar ist, führt die minimale horizontale Skalierung eines solchen Systems zu einer starken Erhöhung des Durchsatzes.  An besonders aktiven Tagen wie dem Black Friday steigt die Belastung.  Falls das System ausfällt oder technisch nicht funktioniert, hat der Client einen Fallback-Status, in dem die Seite für immer im Detailanzeigemodus bleibt.  Bei PoS-Münzen kann der Schritt der Überwachung der Anzahl der Bestätigungen übersprungen werden, da die Transaktionsgeschwindigkeit häufig zwischen 2 und 5 Sekunden liegt. <br><br>  <b>Die dritte Option für die</b> Implementierung des Backends ist Hybrid, wenn abhängig von der Geschwindigkeit der Blockchain-Transaktion und Informationen zur aktuellen Verfügbarkeit von Diensten von Drittanbietern entweder SSE- oder HTTP-Interaktion mit Explorern verwendet wird.  Es ist gleichzeitig am effektivsten und zeitaufwändigsten. <br><br>  Die für die Aufgabe geeignete Front-End-Technologie ist vue.js mit deklarativem Rendering und der Möglichkeit, mehrere Komponentenzustände zu erstellen.  Es ist eine leichte Bibliothek mit einer schlanken Struktur und einer reaktiven DOM-Modifikation.  Die Datenquelle ist die SSE-Verbindung, die beim Initialisieren der Komponente geöffnet wird. <br><br><h3>  Design </h3><br><img src="https://habrastorage.org/webt/xm/c3/vs/xmc3vsycxf9ocy26iwqne_qofqq.gif"><br><br>  Wir entwickeln das Produkt und machen es qualitativ hochwertig und zuverlässig, um Blockchain-Zahlungen bequem, massiv und erschwinglich zu machen.  Wir lieben nicht nur Geld, sondern auch modernste Technologien, komplexe Aufgaben und elegante Lösungen. <br><br>  Bei der Entwicklung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">B2BinPay-</a> Zahlungssystems lösen wir regelmäßig Probleme, die trotz ihrer offensichtlichen Einfachheit einen nicht standardmäßigen Ansatz oder ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">neues</a> Erscheinungsbild erfordern.  Für Feedback, Kommentare und Vorschläge sind wir dankbar.  Wenn Sie dem weltweit genutzten Zahlungsdienst neue und mutige Ideen einbringen möchten, sehen Sie sich die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aktuellen Stellenangebote an</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de447418/">https://habr.com/ru/post/de447418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de447408/index.html">Lernen Sie Englisch von der Grundschule bis zur Mittelstufe: Nützliche Ressourcen und Motivation</a></li>
<li><a href="../de447410/index.html">Provinzfeuer oder Geburt einer Nation</a></li>
<li><a href="../de447412/index.html">Nachrichten in RabbitMQ überwachen</a></li>
<li><a href="../de447414/index.html">ML.NET 1.0 RC veröffentlicht. Was gibt's Neues?</a></li>
<li><a href="../de447416/index.html">PHP Bezauberndes Punktieren über Anführungszeichen</a></li>
<li><a href="../de447420/index.html">Stratosphärenspringen</a></li>
<li><a href="../de447422/index.html">Unterhaltsames Videoerlebnis: statt VR - Brille mit Ximmerse Visor-X Spiegeln</a></li>
<li><a href="../de447424/index.html">Reaktive - Multi-Plattform-Bibliothek für reaktive Kotlin</a></li>
<li><a href="../de447426/index.html">Wie, zu wem und warum zur Beratung gehen? Persönliche Erfahrung mit Big Data</a></li>
<li><a href="../de447430/index.html">IntelliJ IDEA 2019.1: Anpassung von Schnittstellenthemen, Wechseln von Ausdrücken aus Java 12, Debuggen in Docker-Containern</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>