<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖐🏽 💆🏼 🍽️ Aprenda o OpenGL. Lição 5.9 - Renderização atrasada ☠️ 👨🏻‍🎤 🤾🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nos artigos anteriores, usamos iluminação direta (renderização direta ou sombreamento direto) . Essa é uma abordagem simples na qual desenhamos um obj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprenda o OpenGL. Lição 5.9 - Renderização atrasada</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420565/"><img src="https://habrastorage.org/getpro/habr/post_images/20f/e6a/5f3/20fe6a5f38cfacad9ea8355ca097e8f4.png" width="200" align="left"><br><p>  Nos artigos anteriores, usamos iluminação direta <em>(renderização direta ou sombreamento direto)</em> .  Essa é uma abordagem simples na qual desenhamos um objeto levando em consideração todas as fontes de luz, depois desenhamos o próximo objeto juntamente com toda a iluminação nele, e assim por diante para cada objeto.  É muito simples de entender e implementar, mas, ao mesmo tempo, ocorre lentamente do ponto de vista do desempenho: para cada objeto, você precisa classificar todas as fontes de luz.  Além disso, a iluminação direta funciona ineficientemente em cenas com um grande número de objetos sobrepostos, uma vez que a maioria dos cálculos do pixel shader não será útil e será substituída por valores para objetos mais próximos. </p><br><p>  A iluminação adiada, o sombreamento adiado ou a renderização adiada contornam esse problema e alteram drasticamente a maneira como desenhamos objetos.  Isso oferece novas oportunidades para otimizar significativamente as cenas com um grande número de fontes de luz, permitindo desenhar centenas e até milhares de fontes de luz a uma velocidade aceitável.  Abaixo, uma cena com fontes de luz pontuais de 1847, desenhadas usando iluminação diferida (imagem cortesia de Hannes Nevalainen).  Algo assim seria impossível com um cálculo direto da iluminação: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9f2/a49/463/9f2a49463bee47aa077aa59b8dfc7ca6.png" alt="img1"></p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Conteúdo</b> <div class="spoiler_text"><p>  Parte 1. Introdução <br><br></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Criação de janela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Olá janela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Olá triângulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shaders</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Transformações</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Camera</a> </li></ol><br><p>  Parte 2. Iluminação básica <br><br></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Noções básicas de iluminação</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Materiais</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Várias fontes de iluminação</a> </li></ol><br><p>  Parte 3. Baixe modelos 3D <br><br></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Classe de polígono de malha</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Classe do modelo 3D</a> </li></ol><br><p>  Parte 4. Recursos avançados do OpenGL <br><br></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste de profundidade</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste de estêncil</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mistura de cores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Faces de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Buffer de quadros</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cartões cúbicos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Manipulação avançada de dados</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GLSL avançado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shader geométrico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instanciamento</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Suavização</a> </li></ol><br><p>  Parte 5. Iluminação Avançada <br><br></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Iluminação avançada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Correção gama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cartões de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapas de sombra omnidirecionais</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapeamento normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapeamento de paralaxe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Renderização adiada</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSAO</a> </li></ol><br><p>  Parte 6. PBR <br><br></p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes de luz analítica</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Irradiação difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exposição no espelho.</a> </li></ol></div></div><br><p>  A idéia de iluminação diferida é que adiamos as partes mais complexas computacionalmente (como iluminação) para mais tarde.  A iluminação diferida consiste em duas passagens: na primeira, a passagem da <em>geometria (passagem da geometria)</em> , toda a cena é desenhada e várias informações são armazenadas em um conjunto de texturas chamado buffer G.  Por exemplo: posições, cores, normais e / ou espelhamento de superfície para cada pixel.  As informações gráficas armazenadas no buffer G são usadas posteriormente para calcular a iluminação.  A seguir, o conteúdo do buffer G para um quadro: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/046/982/04a/04698204af1866fdb21330aca39484b0.png" alt="img2"></p><br><p>  Na segunda passagem, chamada passagem de iluminação, usamos as texturas do buffer G quando desenhamos o retângulo em tela cheia.  Em vez de usar sombreadores de vértice e fragmento separadamente para cada objeto, desenhamos a cena inteira pixel por pixel.  O cálculo da iluminação permanece exatamente o mesmo que com uma passagem direta, mas coletamos os dados necessários apenas do buffer G e dos sombreadores variáveis <em>(uniformes)</em> , e não do sombreamento de vértice. </p><br><p>  A imagem abaixo mostra bem o processo geral de desenho. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2d5/a9c/f88/2d5a9cf881383e8d058c7ef1a731ce9e.png" alt="img3"></p><br><p>  A principal vantagem é que as informações armazenadas no buffer G pertencem aos fragmentos mais próximos que não são obscurecidos por nada: o teste de profundidade os deixa apenas.  Graças a isso, calculamos a iluminação de cada pixel apenas uma vez, sem fazer muito trabalho.  Além disso, a iluminação diferida oferece oportunidades para otimizações adicionais, permitindo o uso de muito mais fontes de luz do que na iluminação direta. </p><br><p>  No entanto, existem algumas desvantagens: o buffer G armazena uma grande quantidade de informações sobre a cena.  Além disso, os dados do tipo posição devem ser armazenados com alta precisão, como resultado, o buffer G ocupa bastante espaço na memória.  Outra desvantagem é que não poderemos usar objetos translúcidos (uma vez que o buffer armazena informações apenas para a superfície mais próxima) e o recurso anti-aliasing, como o MSAA, também não funcionará.  Existem várias soluções alternativas para resolver esses problemas, elas são discutidas no final do artigo. </p><br><p>  <em>(Faixa de nota. - O buffer G ocupa muito espaço de memória. Por exemplo, para uma tela de 1920 * 1080 e usando 128 bits por pixel, o buffer terá 33mb. Existem requisitos crescentes para a largura de banda da memória - há muito mais dados sendo gravados e lidos)</em> </p><br><h3 id="g-bufer">  Buffer G </h3><br><p>  O buffer G refere-se às texturas usadas para armazenar informações relacionadas à iluminação usadas no último passo de renderização.  Vamos ver quais informações precisamos para calcular a iluminação para renderização direta: </p><br><ul><li>  Vetor de posição 3D: usado para descobrir a posição do fragmento em relação à câmera e às fontes de luz. </li><li>  Cor difusa do fragmento (refletividade para vermelho, verde e azul - em geral, cor). </li><li>  Vetor 3d normal (para determinar em que ângulo a luz cai na superfície) </li><li>  flutuar para armazenar o componente espelho </li><li>  A posição da fonte de luz e sua cor. </li><li>  Posição da câmera. </li></ul><br><p>  Usando essas variáveis, podemos calcular a cobertura usando o modelo de Blinn-Fong que já conhecemos.  A cor e a posição da fonte de luz, bem como a posição da câmera, podem ser variáveis ​​comuns, mas o restante dos valores será diferente para cada fragmento de imagem.  Se passarmos exatamente os mesmos dados para a passagem final da iluminação diferida, que usaríamos para uma passagem direta, obteremos o mesmo resultado, apesar de desenharmos fragmentos em um retângulo 2D comum. </p><br><p>  O OpenGL não possui restrições quanto ao que podemos armazenar em uma textura, portanto, faz sentido armazenar todas as informações em uma ou mais texturas do tamanho de uma tela (chamada de buffer G) e usá-las no passe de iluminação.  Como o tamanho das texturas e da tela é o mesmo, obtemos os mesmos dados de entrada da iluminação direta. </p><br><p>  No pseudo-código, a imagem geral é mais ou menos assim: </p><br><pre><code class="plaintext hljs">while(...) // render loop { // 1.  :  /    g- glBindFramebuffer(GL_FRAMEBUFFER, gBuffer); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); gBufferShader.use(); for(Object obj : Objects) { ConfigureShaderTransformsAndUniforms(); obj.Draw(); } // 2.  :  g-     glBindFramebuffer(GL_FRAMEBUFFER, 0); glClear(GL_COLOR_BUFFER_BIT); lightingPassShader.use(); BindAllGBufferTextures(); SetLightingUniforms(); RenderQuad(); }</code> </pre> <br><p>  Informações necessárias para cada pixel: vetor de <strong>posição</strong> , vetor <strong>normal</strong> , vetor de <strong>cores</strong> e valor para o componente de <strong>espelho</strong> .  No passo geométrico, desenhamos todos os objetos na cena e salvamos todos esses dados no buffer G.  Podemos usar <em>vários destinos de renderização</em> para preencher todos os buffers de uma só vez. Essa abordagem foi discutida no artigo anterior sobre a implementação do brilho: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bloom</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradução no hub</a> </p><br><p>  Para a passagem geométrica, crie um framebuffer com o nome óbvio gBuffer, ao qual anexaremos vários buffers de cores e um buffer de profundidade.  Para armazenar posições e normais, é preferível usar uma textura com alta precisão (valores flutuantes de 16 ou 32 bits para cada componente); por padrão, armazenaremos os valores especulares e de cor difusa na textura (precisão de 8 bits por componente). </p><br><pre> <code class="plaintext hljs">unsigned int gBuffer; glGenFramebuffers(1, &amp;gBuffer); glBindFramebuffer(GL_FRAMEBUFFER, gBuffer); unsigned int gPosition, gNormal, gColorSpec; //   glGenTextures(1, &amp;gPosition); glBindTexture(GL_TEXTURE_2D, gPosition); glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB16F, SCR_WIDTH, SCR_HEIGHT, 0, GL_RGB, GL_FLOAT, NULL); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, gPosition, 0); //   glGenTextures(1, &amp;gNormal); glBindTexture(GL_TEXTURE_2D, gNormal); glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB16F, SCR_WIDTH, SCR_HEIGHT, 0, GL_RGB, GL_FLOAT, NULL); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, gNormal, 0); //    +    glGenTextures(1, &amp;gAlbedoSpec); glBindTexture(GL_TEXTURE_2D, gAlbedoSpec); glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, SCR_WIDTH, SCR_HEIGHT, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, gAlbedoSpec, 0); //  OpenGL,        unsigned int attachments[3] = { GL_COLOR_ATTACHMENT0, GL_COLOR_ATTACHMENT1, GL_COLOR_ATTACHMENT2 }; glDrawBuffers(3, attachments); //           . [...]</code> </pre> <br><p>  Como usamos vários objetivos de renderização, devemos informar explicitamente ao OpenGL a quais buffers do GBuffer anexados vamos desenhar <code>glDrawBuffers()</code> .  Também é importante notar que armazenamos posições e normais têm 3 componentes cada e as armazenamos em texturas RGB.  Mas, ao mesmo tempo, imediatamente colocamos na mesma textura RGBA a cor e o coeficiente de reflexão especular - graças a isso usamos um buffer a menos.  Se sua implementação da renderização adiada se tornar mais complexa e usar mais dados, você poderá encontrar facilmente novas maneiras de combinar dados e organizá-los em texturas. </p><br><p>  No futuro, devemos renderizar os dados para o buffer G.  Se cada objeto tiver coeficiente de reflexão de cor, normal e especular, podemos escrever algo como o seguinte sombreador: </p><br><pre> <code class="plaintext hljs">#version 330 core layout (location = 0) out vec3 gPosition; layout (location = 1) out vec3 gNormal; layout (location = 2) out vec4 gAlbedoSpec; in vec2 TexCoords; in vec3 FragPos; in vec3 Normal; uniform sampler2D texture_diffuse1; uniform sampler2D texture_specular1; void main() { //       G- gPosition = FragPos; //          G- gNormal = normalize(Normal); //   gAlbedoSpec.rgb = texture(texture_diffuse1, TexCoords).rgb; //       gAlbedoSpec.a = texture(texture_specular1, TexCoords).r; }</code> </pre> <br><p>  Como usamos vários objetivos de renderização, com a ajuda do <code>layout</code> indicamos o que e em que buffer do buffer de quadro atual renderizamos.  Observe que não armazenamos o coeficiente de espelho em um buffer separado, pois podemos armazenar o valor flutuante no canal alfa de um dos buffers. </p><br><blockquote>  Lembre-se de que, ao calcular a iluminação, é extremamente importante armazenar todas as variáveis ​​no mesmo espaço de coordenadas; nesse caso, armazenamos (e realizamos cálculos) no espaço do mundo. </blockquote><p>  Se agora renderizarmos vários nanosuits em um buffer G e desenhar seu conteúdo projetando cada buffer em um quarto da tela, veremos algo como isto: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/046/982/04a/04698204af1866fdb21330aca39484b0.png" alt="img4"></p><br><p>  Tente visualizar a posição e os vetores normais e verifique se eles estão corretos.  Por exemplo, os vetores normais apontando para a direita serão vermelhos.  Da mesma forma, com objetos localizados à direita do centro da cena.  Depois de ficar satisfeito com o conteúdo do buffer G, vamos para a próxima parte: a passagem da iluminação. </p><br><h3 id="prohod-osvescheniya">  Passagem de iluminação </h3><br><p>  Agora que temos uma grande quantidade de informações no buffer G, podemos calcular completamente a iluminação e as cores finais de cada pixel do buffer G, usando seu conteúdo como entrada para os algoritmos de cálculo da iluminação.  Como os valores do buffer G representam apenas fragmentos visíveis, executaremos cálculos complexos de iluminação exatamente uma vez para cada pixel.  Devido a isso, a iluminação diferida é bastante eficaz, especialmente em cenas complexas, nas quais, ao renderizar diretamente para cada pixel, muitas vezes é necessário calcular a iluminação várias vezes. </p><br><p>  Para a passagem da iluminação, renderizamos um retângulo em tela cheia (um pouco como o efeito de pós-processamento) e executamos um cálculo lento da iluminação para cada pixel. </p><br><pre> <code class="plaintext hljs">glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); glActiveTexture(GL_TEXTURE0); glBindTexture(GL_TEXTURE_2D, gPosition); glActiveTexture(GL_TEXTURE1); glBindTexture(GL_TEXTURE_2D, gNormal); glActiveTexture(GL_TEXTURE2); glBindTexture(GL_TEXTURE_2D, gAlbedoSpec); //         shaderLightingPass.use(); SendAllLightUniformsToShader(shaderLightingPass); shaderLightingPass.setVec3("viewPos", camera.Position); RenderQuad();</code> </pre> <br><p>  <em>Vinculamos</em> todas as texturas necessárias do buffer G antes da renderização e, além disso, definimos os valores das variáveis ​​relacionadas à iluminação no shader. </p><br><p>  O sombreador de passagem de fragmentos é muito semelhante ao que usamos nas lições da reunião.  Fundamentalmente nova é a maneira como obtemos informações para a iluminação diretamente do buffer G. </p><br><pre> <code class="plaintext hljs">#version 330 core out vec4 FragColor; in vec2 TexCoords; uniform sampler2D gPosition; uniform sampler2D gNormal; uniform sampler2D gAlbedoSpec; struct Light { vec3 Position; vec3 Color; }; const int NR_LIGHTS = 32; uniform Light lights[NR_LIGHTS]; uniform vec3 viewPos; void main() { //    G- vec3 FragPos = texture(gPosition, TexCoords).rgb; vec3 Normal = texture(gNormal, TexCoords).rgb; vec3 Albedo = texture(gAlbedoSpec, TexCoords).rgb; float Specular = texture(gAlbedoSpec, TexCoords).a; //     vec3 lighting = Albedo * 0.1; //    vec3 viewDir = normalize(viewPos - FragPos); for(int i = 0; i &lt; NR_LIGHTS; ++i) { //   vec3 lightDir = normalize(lights[i].Position - FragPos); vec3 diffuse = max(dot(Normal, lightDir), 0.0) * Albedo * lights[i].Color; lighting += diffuse; } FragColor = vec4(lighting, 1.0); }</code> </pre> <br><p>  O sombreador de iluminação aceita 3 texturas que contêm todas as informações registradas na passagem geométrica e das quais o buffer G consiste.  Se usarmos a entrada para iluminação de texturas, obteremos exatamente os mesmos valores como se estivéssemos na renderização direta normal.  No início do shader de fragmento, obtemos os valores relacionados às variáveis ​​de iluminação simplesmente lendo a textura.  Observe que obtemos a cor e o coeficiente de reflexão especular de uma textura - <code>gAlbedoSpec</code> . </p><br><p>  Como para cada fragmento existem valores (bem como variáveis ​​de sombreamento uniformes) necessários para o cálculo da iluminação de acordo com o modelo de Blinn-Fong, não precisamos alterar o código de cálculo da iluminação.  A única coisa que foi alterada é a maneira de obter os valores de entrada. </p><br><p>  Iniciar uma demonstração simples com 32 pequenas fontes de luz é algo como isto: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/73d/9cf/044/73d9cf044e097e086fb317ac0c220339.png" alt="img5"></p><br><p>  Uma das desvantagens da iluminação diferida é a impossibilidade de misturar, pois todos os buffers-g para cada pixel contêm informações sobre apenas uma superfície, enquanto a mistura usa combinações de vários fragmentos.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(Mistura)</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradução</a> .  Outra desvantagem da iluminação diferida é que ela obriga a usar um método comum para calcular a iluminação de todos os objetos;  embora essa limitação possa de alguma forma ser contornada adicionando informações materiais ao buffer g. </p><br><p>  Para lidar com essas deficiências (especialmente a falta de mistura), elas geralmente dividem a renderização em duas partes: renderização com iluminação diferida e a segunda parte com renderização direta destinada a aplicar algo à cena ou usar shaders que não são compatíveis com a iluminação diferida.  <em>(Nota dos exemplos: adição de fumaça translúcida, fogo, vidro)</em> Para ilustrar o trabalho, desenharemos as fontes de luz como cubos pequenos usando renderização direta, pois os cubos de iluminação exigem um sombreador especial (eles brilham uniformemente na mesma cor). </p><br><h3 id="kombiniruem-otlozhennyy-renderig-s-pryamym">  Combine renderização adiada com direta. </h3><br><p>  Suponha que desejemos desenhar cada fonte de luz na forma de um cubo 3D com um centro coincidindo com a posição da fonte de luz e emitindo luz com a cor da fonte.  A primeira idéia que vem à mente é renderizar cubos diretamente para cada fonte de luz sobre os resultados da renderização adiada.  Ou seja, desenhamos cubos como de costume, mas somente após a renderização adiada.  O código será algo parecido com isto: </p><br><pre> <code class="plaintext hljs">//    [...] RenderQuad(); //          shaderLightBox.use(); shaderLightBox.setMat4("projection", projection); shaderLightBox.setMat4("view", view); for (unsigned int i = 0; i &lt; lightPositions.size(); i++) { model = glm::mat4(); model = glm::translate(model, lightPositions[i]); model = glm::scale(model, glm::vec3(0.25f)); shaderLightBox.setMat4("model", model); shaderLightBox.setVec3("lightColor", lightColors[i]); RenderCube(); }</code> </pre> <br><p>  Esses cubos renderizados não levam em consideração os valores de profundidade da renderização adiada e, como resultado, são sempre desenhados sobre objetos já renderizados: não é isso que estamos buscando. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e6a/59a/41b/e6a59a41b4c5ad658abae4841c9008de.png" alt="img6"></p><br><p>  Primeiro, precisamos copiar as informações de profundidade da passagem geométrica para o buffer de profundidade e somente depois desenhar os cubos luminosos.  Assim, fragmentos de cubos luminosos serão desenhados apenas se estiverem mais próximos do que objetos já desenhados. </p><br><p>  Podemos copiar o conteúdo do framebuffer para outro framebuffer usando a função <code>glBlitFramebuffer</code> .  Já usamos essa função no exemplo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anti-aliasing</a> : ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">anti-aliasing</a> ), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tradução</a> .  A função <code>glBlitFramebuffer</code> copia a parte especificada pelo usuário do framebuffer para a parte especificada de outro framebuffer. </p><br><p>  Para objetos desenhados na passagem de iluminação adiada, salvamos a profundidade no buffer g do objeto buffer de estrutura.  Se simplesmente copiarmos o conteúdo do buffer de profundidade do buffer g para o buffer de profundidade padrão, os cubos luminosos serão desenhados como se toda a geometria da cena fosse desenhada usando uma passagem de renderização direta.  Como foi explicado brevemente no exemplo de suavização de serrilhado, precisamos definir buffers de quadros para leitura e gravação: </p><br><pre> <code class="plaintext hljs">glBindFramebuffer(GL_READ_FRAMEBUFFER, gBuffer); glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0); //   - glBlitFramebuffer( 0, 0, SCR_WIDTH, SCR_HEIGHT, 0, 0, SCR_WIDTH, SCR_HEIGHT, GL_DEPTH_BUFFER_BIT, GL_NEAREST ); glBindFramebuffer(GL_FRAMEBUFFER, 0); //        [...]</code> </pre> <br><p>  Aqui, copiamos todo o conteúdo do buffer de profundidade do buffer de quadros para o buffer de profundidade padrão (se necessário, você pode copiar os buffers de cores ou o buffer stensil da mesma maneira).  Se agora renderizarmos os cubos brilhantes, eles serão desenhados como se a geometria da cena fosse real (embora seja desenhada como simples). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/ce2/92d/576/ce292d57678320f98fb946c2a28aefbb.png" alt="img7"></p><br><p>  O código fonte da demonstração pode ser encontrado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><p>  Com essa abordagem, podemos combinar facilmente a renderização adiada com a renderização direta.  Isso é excelente, pois podemos aplicar objetos de mesclagem e desenho que requerem sombreadores especiais que não são aplicáveis ​​à renderização adiada. </p><br><h3 id="bolshe-istochnikov-sveta">  Mais fontes de luz </h3><br><p>  A iluminação diferida é frequentemente elogiada por ser capaz de atrair um grande número de fontes de luz sem uma diminuição significativa no desempenho.  A iluminação atrasada sozinha não nos permite desenhar um número muito grande de fontes de luz, pois ainda precisamos calcular a contribuição de todas as fontes de luz para cada pixel.  Para desenhar um grande número de fontes de luz, é usada uma otimização muito bonita, aplicável à renderização diferida - a área de ação das fontes de luz.  (volumes leves) </p><br><p>  Geralmente, quando desenhamos fragmentos em uma cena altamente iluminada, levamos em consideração a contribuição de <strong>cada</strong> fonte de luz na cena, independentemente da distância do fragmento.  Se a maioria das fontes de luz nunca afetará o fragmento, por que estamos perdendo tempo computando para elas? </p><br><p>  A idéia do escopo da fonte de luz é encontrar o raio (ou volume) da fonte de luz - ou seja, a área na qual a luz é capaz de alcançar a superfície.  Como a maioria das fontes de luz usa algum tipo de atenuação, podemos encontrar a distância máxima (raio) que a luz pode alcançar.  Depois disso, realizamos cálculos complexos de iluminação apenas para as fontes de luz que afetam esse fragmento.  Isso nos poupa de um grande número de cálculos, pois só calculamos a iluminação onde é necessária. </p><br><p>  Com essa abordagem, o principal truque é determinar o tamanho da área de ação da fonte de luz. </p><br><h3 id="vychislenie-oblasti-deystviya-istochnika-sveta-radiusa">  Cálculo do escopo de uma fonte de luz (raio) </h3><br><p>  Para obter o raio da fonte de luz, precisamos resolver a equação de amortecimento do brilho, que consideramos escuro - pode ser 0,0 ou algo um pouco mais iluminado, mas ainda escuro: por exemplo, 0,03.  Para demonstrar como calcular o raio, usaremos uma das funções de atenuação mais complexas e comuns do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">exemplo do caster de luz</a> </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>F</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>I</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>K</mi><mi>c</mi></msub><mo>+</mo><msub><mi>K</mi><mi>l</mi></msub><mo>&amp;#x2217;</mo><mi>d</mi><mo>+</mo><msub><mi>K</mi><mi>q</mi></msub><mo>&amp;#x2217;</mo><msup><mi>d</mi><mn>2</mn></msup></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="36.662ex" height="3.142ex" viewBox="0 -987.6 15784.8 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-46" x="0" y="0"></use><g transform="translate(643,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-69" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-67" x="644" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-68" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="1701" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="2479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="3785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="4336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="4787" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="5317" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="5750" y="0"></use><g transform="translate(6255,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1201" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="1478" y="0"></use><g transform="translate(2478,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2217" x="3861" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="4584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="5330" y="0"></use><g transform="translate(6330,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-71" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2217" x="7828" y="0"></use><g transform="translate(8551,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32" x="741" y="583"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>I</mi></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>K</mi><mi>c</mi></msub><mo>+</mo><msub><mi>K</mi><mi>l</mi></msub><mo>∗</mo><mi>d</mi><mo>+</mo><msub><mi>K</mi><mi>q</mi></msub><mo>∗</mo><msup><mi>d</mi><mn>2</mn></msup></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> F_ {light} = \ frac {I} {K_c + K_l * d + K_q * d ^ 2} </script></p><br><p>  Queremos resolver esta equação para o caso em que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub><mo>=</mo><mn>0</mn><mo>,</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.571ex" height="2.66ex" viewBox="0 -780.1 4982.1 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-46" x="0" y="0"></use><g transform="translate(643,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-69" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-67" x="644" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-68" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="1701" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="2479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-30" x="3535" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2C" x="4036" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-30" x="4481" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub><mo>=</mo><mn>0</mn><mo>,</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-2"> F_ {light} = 0,0 </script>  , ou seja, quando a fonte de luz estiver completamente escura.  No entanto, essa equação nunca atingirá o valor exato de 0,0, portanto não há solução.  No entanto, podemos resolver a equação do brilho para um valor próximo a 0,0, que pode ser considerado praticamente escuro.  Neste exemplo, consideramos aceitável o valor do brilho em <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.794ex" height="2.419ex" viewBox="0 -780.1 4217 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="2215" y="0"></use><g transform="translate(2715,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ frac {5} {256} </script>  - dividido por 256, pois o buffer de quadros de 8 bits pode conter 256 valores de brilho diferentes. </p><br><blockquote>  A função de atenuação selecionada fica quase escura a uma distância do alcance; se a limitarmos a um brilho menor que 5/256, o alcance da fonte de luz ficará muito grande - isso não é tão eficaz.  Idealmente, uma pessoa não deve ver uma borda repentina e nítida de luz de uma fonte de luz.  Obviamente, isso depende do tipo de cena, um valor maior do brilho mínimo fornece áreas menores de ação das fontes de luz e aumenta a eficiência dos cálculos, mas pode levar a artefatos visíveis na imagem: a iluminação interrompe abruptamente nas bordas da área de ação da fonte de luz. </blockquote><p>  A equação de atenuação que devemos resolver se torna: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>A</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xE7;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xE3;</mo></mrow><mi>o</mi></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.114ex" height="2.419ex" viewBox="0 -780.1 14257.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="2215" y="0"></use><g transform="translate(2715,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="4494" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="5801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="6351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="6803" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="7332" y="0"></use><g transform="translate(7766,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="1408" y="0"></use></g></g><g transform="translate(9706,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-65" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6E" x="1578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-75" x="2179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="2751" y="0"></use><g transform="translate(3281,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><g transform="translate(3649,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ã</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="4064" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><mrow class="MJX-TeXAtom-ORD"><mi>A</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo>ç</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ã</mo></mrow><mi>o</mi></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> \ frac {5} {256} = \ frac {I_ {max}} {Atenuação} </script></p><br><p>  Aqui <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.508ex" height="2.419ex" viewBox="0 -780.1 1940.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="1408" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> I_ {max} </script>  - o componente mais brilhante da luz (dos canais r, g, b).  Usaremos o componente mais brilhante, pois os outros componentes darão uma restrição mais fraca ao escopo da fonte de luz. </p><br><p>  Continuamos a resolver a equação: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>A</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xE7;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xE3;</mo></mrow><mi>o</mi><mo>=</mo><msub><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.74ex" height="2.419ex" viewBox="0 -780.1 14096.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="2215" y="0"></use><g transform="translate(2715,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="4467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="4900" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="5424" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="5909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-41" x="6271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="7021" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-65" x="7383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6E" x="7849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-75" x="8450" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="9022" y="0"></use><g transform="translate(9552,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><g transform="translate(9920,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ã</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="10335" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="11099" y="0"></use><g transform="translate(12155,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="1408" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>A</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo>ç</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ã</mo></mrow><mi>o</mi><mo>=</mo><msub><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> \ frac {5} {256} \ cdot Atenuação = I_ {max} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>A</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>a</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xE7;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xE3;</mo></mrow><mi>o</mi><mo>=</mo><msub><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.74ex" height="2.419ex" viewBox="0 -780.1 14096.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-65" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6E" x="1578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-75" x="2179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="2751" y="0"></use><g transform="translate(3281,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ç</text></g><g transform="translate(3649,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">ã</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="4064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="4828" y="0"></use><g transform="translate(5884,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="1408" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="8075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="8508" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="9032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="9517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="10129" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="10679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="11131" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="11660" y="0"></use><g transform="translate(12094,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="13595" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>A</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>u</mi><mi>a</mi><mrow class="MJX-TeXAtom-ORD"><mo>ç</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ã</mo></mrow><mi>o</mi><mo>=</mo><msub><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> Atenuação = I_ {max} \ cdot \ frac {256} {5} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>K</mi><mi>c</mi></msub><mo>+</mo><msub><mi>K</mi><mi>l</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>d</mi><mo>+</mo><msub><mi>K</mi><mi>q</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msup><mi>d</mi><mn>2</mn></msup><mo>=</mo><msub><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="49.456ex" height="3.142ex" viewBox="0 -987.6 21293.5 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1201" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="1478" y="0"></use><g transform="translate(2478,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="3889" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="4323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="4846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="5332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="5693" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="6439" y="0"></use><g transform="translate(7439,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-71" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="8965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="9398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="9922" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="10407" y="0"></use><g transform="translate(10769,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32" x="741" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="12025" y="0"></use><g transform="translate(13081,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="1408" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="15272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="15705" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="16229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="16714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="17326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="17876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="18328" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="18857" y="0"></use><g transform="translate(19291,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="20792" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>K</mi><mi>c</mi></msub><mo>+</mo><msub><mi>K</mi><mi>l</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>d</mi><mo>+</mo><msub><mi>K</mi><mi>q</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msup><mi>d</mi><mn>2</mn></msup><mo>=</mo><msub><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> K_c + K_l \ cdot d + K_q \ cdot d ^ 2 = I_ {max} \ cdot \ frac {256} {5} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>K</mi><mi>c</mi></msub><mo>+</mo><msub><mi>K</mi><mi>l</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>d</mi><mo>+</mo><msub><mi>K</mi><mi>q</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msup><mi>d</mi><mn>2</mn></msup><mo>&amp;#x2212;</mo><msub><mi>I</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow><mo>=</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="53.459ex" height="3.142ex" viewBox="0 -987.6 23016.9 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1201" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="1478" y="0"></use><g transform="translate(2478,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="3889" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="4323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="4846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="5332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="5693" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="6439" y="0"></use><g transform="translate(7439,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-71" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="8965" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="9398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="9922" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="10407" y="0"></use><g transform="translate(10769,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32" x="741" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2212" x="11969" y="0"></use><g transform="translate(12970,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="1408" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="15161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-64" x="15594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6F" x="16118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="16603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="17215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="17765" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="18217" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="18746" y="0"></use><g transform="translate(19180,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="20681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="21460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-30" x="22516" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>K</mi><mi>c</mi></msub><mo>+</mo><msub><mi>K</mi><mi>l</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>d</mi><mo>+</mo><msub><mi>K</mi><mi>q</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msup><mi>d</mi><mn>2</mn></msup><mo>−</mo><msub><mi>I</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow><mo>=</mo><mn>0</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-9"> K_c + K_l \ cdot d + K_q \ cdot d ^ 2 - I_ {max} \ cdot \ frac {256} {5} = 0 </script></p><br><p>  A última equação é uma equação quadrática na forma <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi><mo>=</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.89ex" height="2.539ex" viewBox="0 -935.7 7271.9 1093.4" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32" x="809" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="1778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-62" x="2778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="3208" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="4003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="5003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="5715" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-30" x="6771" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi><mo>=</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-10"> a x ^ 2 + b x + c = 0 </script>  com a seguinte solução: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>x</mi><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2212;</mo><msub><mi>K</mi><mi>l</mi></msub><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msubsup><mi>K</mi><mi>l</mi><mn>2</mn></msubsup><mo>&amp;#x2212;</mo><mn>4</mn><msub><mi>K</mi><mi>q</mi></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>K</mi><mi>c</mi></msub><mo>&amp;#x2212;</mo><msub><mi>I</mi><mi>m</mi></msub><mi>a</mi><mi>x</mi><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>256</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>5</mn></mrow><mo stretchy=&quot;false&quot;>)</mo></mrow></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><msub><mi>K</mi><mi>q</mi></msub></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="58.401ex" height="3.021ex" viewBox="0 -883.9 25144.9 1300.8" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-3D" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="2156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="2707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="3158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="3688" y="0"></use><g transform="translate(4121,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2212" x="0" y="0"></use><g transform="translate(778,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2B" x="2161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-73" x="3412" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-71" x="3881" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-74" x="4793" y="0"></use><g transform="translate(5155,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32" x="1274" y="488"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6C" x="1201" y="-464"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2212" x="1577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-34" x="2578" y="0"></use><g transform="translate(3078,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-71" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-28" x="4354" y="0"></use><g transform="translate(4743,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="1201" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-2212" x="6221" y="0"></use><g transform="translate(7222,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-6D" x="622" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="8384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-78" x="8913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-66" x="9736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-72" x="10286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-61" x="10738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-63" x="11267" y="0"></use><g transform="translate(11701,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-36" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-35" x="13202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-29" x="13703" y="0"></use></g></g><g transform="translate(23369,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/420565/&amp;usg=ALkJrhi07f2d9TqCpXj9afACYG507u4W1Q#MJMATHI-71" x="1201" y="-213"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>x</mi><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo>−</mo><msub><mi>K</mi><mi>l</mi></msub><mo>+</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><msubsup><mi>K</mi><mi>l</mi><mn>2</mn></msubsup><mo>−</mo><mn>4</mn><msub><mi>K</mi><mi>q</mi></msub><mo stretchy="false">(</mo><msub><mi>K</mi><mi>c</mi></msub><mo>−</mo><msub><mi>I</mi><mi>m</mi></msub><mi>a</mi><mi>x</mi><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>256</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow><mo stretchy="false">)</mo></mrow></mrow><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><msub><mi>K</mi><mi>q</mi></msub></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> x = \ frac {-K_l + \ sqrt {K_l ^ 2 - 4 K_q (K_c - I_max \ frac {256} {5})}} {2 K_q} </script></p><br><p>  Temos uma equação geral que nos permite substituir os parâmetros (atenuação constante, coeficientes linear e quadrático) para encontrar x - o raio da fonte de luz. </p><br><pre> <code class="plaintext hljs">float constant = 1.0; float linear = 0.7; float quadratic = 1.8; float lightMax = std::fmaxf(std::fmaxf(lightColor.r, lightColor.g), lightColor.b); float radius = (-linear + std::sqrtf(linear * linear - 4 * quadratic * (constant - (256.0 / 5.0) * lightMax))) / (2 * quadratic);</code> </pre> <br><p>  A fórmula retorna um raio entre aproximadamente 1,0 e 5,0, dependendo do brilho máximo da fonte de luz. </p><br><p>  Encontramos esse raio para cada fonte de luz no palco e o usamos para levar em conta apenas as fontes de luz nas quais ele está localizado no escopo de cada fragmento.  Abaixo está uma passagem refeito da iluminação que leva em consideração as áreas de ação das fontes de luz.  Observe que essa abordagem é implementada apenas para fins educacionais e não é adequada para uso prático (em breve discutiremos o porquê). </p><br><pre> <code class="plaintext hljs">struct Light { [...] float Radius; }; void main() { [...] for(int i = 0; i &lt; NR_LIGHTS; ++i) { //         float distance = length(lights[i].Position - FragPos); if(distance &lt; lights[i].Radius) { //     [...] } } }</code> </pre> <br><p>  O resultado é exatamente o mesmo de antes, mas agora para cada fonte de luz, seu efeito é levado em consideração apenas dentro da área de sua ação. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O código final é uma demonstração.</a>  . </p><br><h3 id="realnoe-primenenie-oblasti-deystviya-istochnika-sveta">  A aplicação real do escopo da fonte de luz. </h3><br><p>  O sombreador de fragmentos mostrado acima não funcionará na prática e serve apenas para ilustrar como podemos nos livrar de cálculos desnecessários de iluminação.  Na realidade, a placa de vídeo e a linguagem do shader GLSL otimizam muito mal os loops e ramificações.  A razão para isso é que a execução do shader na placa de vídeo é realizada em paralelo para diferentes pixels, e muitas arquiteturas impõem a limitação de que, na execução paralela, diferentes threads devem calcular o mesmo shader.  Muitas vezes, isso leva ao fato de que o shader em execução sempre calcula todos os ramos, para que todos os shaders funcionem ao mesmo tempo.  <em>(Nota: isso não afeta o resultado dos cálculos, mas pode reduzir o desempenho do sombreador.)</em> Por causa disso, pode ser que nossa verificação do raio seja inútil: ainda calcularemos a iluminação para todas as fontes! </p><br><p>  Uma abordagem adequada para usar o escopo da luz é renderizar esferas com um raio como o de uma fonte de luz.  O centro da esfera coincide com a posição da fonte de luz, de modo que a esfera contenha em si a faixa de ação da fonte de luz.  Há um pequeno truque aqui - usamos basicamente o mesmo shader de fragmento adiado para desenhar uma esfera.  Ao desenhar uma esfera, o sombreador de fragmento é chamado especificamente para os pixels afetados pela fonte de luz, renderizamos apenas os pixels necessários e pulamos todos os outros.    : </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/873/902/ae4/873902ae47fa7d5ae40d3db3cbc4943a.png" alt="img8"></p><br><p>       ,      .     ,   ,             .       <em>_*__</em>  <br> <em>_ + __</em> ,             . </p><br><p>       :       (    ) ,   ,       , -      (    ).         stenil . </p><br><p>          ,     ,    ,     .     (  )      :  c <em>(deferred lighting)</em>     <em>(tile-based deferred shading)</em> .                   MSAA.             . </p><br><h3 id="otlozhennyy-rendering-vs-pryamoy">   vs  </h3><br><p>   (  )  -    ,           ,                .   ,     —   ,   MSAA,       . </p><br><p>               (  ),     (  g-  ..)        .         ,        . </p><br><p>     :   ,      ,        ,      . ,         ,      ,              .      .     parallax mapping,               ,    .       ,       . </p><br><h3 id="dopolnitelnye-ssylki">  Sitelinks </h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tutorial 35: Deferred Shading — Part 1</a> —   OGLDev      .           . </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Deferred Rendering for Current and Future Rendering Pipelines</a> : c  Andrew Lauritzen     <em>(tile-based deferred shading)</em>   c <em>(deferred lighting)</em> . </li></ul><br><p> <strong>PS</strong>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">-</a>   .       ,   ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt420565/">https://habr.com/ru/post/pt420565/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt420553/index.html">Jeff Bezos e sua atitude em relação à filantropia, caridade e projetos em escala global</a></li>
<li><a href="../pt420555/index.html">Alan Kay: “Computadores são instrumentos cuja música é idéias”</a></li>
<li><a href="../pt420559/index.html">Como o IaaS entra no varejo e na produção: quem e por que mudou para a infraestrutura virtual</a></li>
<li><a href="../pt420561/index.html">Reconstrução de imagens: 1 km de fibra, rede neural artificial e aprendizado profundo</a></li>
<li><a href="../pt420563/index.html">Análise do relatório de Dmitry Stolyarov sobre o monitoramento de Kubernetes</a></li>
<li><a href="../pt420567/index.html">Quando o teste através do método público começa a cheirar mal (exemplo)</a></li>
<li><a href="../pt420571/index.html">Fones de ouvido inteligentes - tendências 2018: filtragem ambiental, treinador de áudio, gestos na cabeça e conexão direta com o Alexa</a></li>
<li><a href="../pt420573/index.html">Academia Android: agora em Moscou</a></li>
<li><a href="../pt420575/index.html">O que ler sobre som em filmes, vídeos e jogos</a></li>
<li><a href="../pt420577/index.html">O resumo de materiais interessantes para o desenvolvedor móvel 266 (de 13 a 19 de agosto)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>