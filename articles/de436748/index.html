<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥝 🙋🏾 🤴🏽 Hexapod von Grund auf neu entwickeln (Teil 3) - Kinematik 🏔️ 🤧 📚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo allerseits! Die Entwicklung des Hexapods schreitet voran und schließlich wurde der grundlegende mathematische Teil getestet und ist zur Dokument...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Hexapod von Grund auf neu entwickeln (Teil 3) - Kinematik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436748/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ft/93/m5/ft93m5szh_bfaxkmnxialxpkoiu.png"></div><br>  Hallo allerseits!  Die Entwicklung des Hexapods schreitet voran und schließlich wurde der grundlegende mathematische Teil getestet und ist zur Dokumentation bereit.  Damit das Projekt bis zum Ende überlebt und sich nicht im Regal verstaubt, müssen Sie die positiven Verschiebungen sehen, auch wenn sie unbedeutend sind.  In diesem Artikel werde ich über einen Algorithmus zur Lösung des Problems der inversen Kinematik sprechen und ihn in Aktion demonstrieren.  Ich hoffe es wird interessant. <br><br>  <b>Entwicklungsstadien:</b> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 1 - Design</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2 - Montage</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>Teil 3 - Kinematik</b></a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 4 - mathematische Trajektorien und Sequenzen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 5 - Elektronik</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 6 - Übergang zum 3D-Druck</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 7 - Neues Gehäuse, Anwendungssoftware und Kommunikationsprotokolle</a> <br><a name="habracut"></a><br><h2>  Koordinatensysteme </h2><br>  Zunächst müssen die Koordinatensysteme des Roboters bestimmt werden - es gibt bis zu drei davon: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ep/kk/om/epkkomc-ghrprmw3z1bjpclmh1a.png"></div><br>  Tatsächlich unterscheiden sie sich nicht voneinander, sondern befinden sich an verschiedenen Stellen des Gehäuses und können in einem bestimmten Winkel relativ zueinander gedreht werden.  Von oben gesehen ist die Position der Achsen wie folgt (der Parameter coxa_zero_rotate wird etwas später beschrieben): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sb/12/jw/sb12jwy030ga17pcg3ojmmgd72i.png"></div><br>  Wie Sie wahrscheinlich bereits bemerkt haben, befinden sich die Koordinatensysteme auf der linken und rechten Seite symmetrisch zur Körpermitte.  Es schien mir, dass es einfacher sein würde. <br><br>  Die Koordinaten jedes Punktes werden relativ zu dem Glied festgelegt, für das dieser Punkt bestimmt ist.  Mit diesem Ansatz können Sie das Glied schmerzlos überall hin bewegen, ohne die Konfiguration zu beeinträchtigen. <br><br>  Und so befinden sie sich relativ zum Glied: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/go/_j/nsgo_jsxf44m21vb7zzsu23vwqc.png"></div><br>  Die Koordinaten des Zielpunkts beziehen sich auf das HAUPTKOORDINATENSYSTEM.  Anfangs wollte ich die Koordinaten relativ zur Mitte des Falls einstellen, aber dies war nicht sehr praktisch und erforderte die Speicherung einer Reihe zusätzlicher Parameter. <br><br>  Nachfolgend die Notation X *, X ** usw.  wird durch X ', X' 'ersetzt. <br><br><h2>  Lösung des Problems der inversen Kinematik </h2><br>  Beginnen wir mit dem für mich schwierigsten und interessantesten Moment - der Kinematik.  Ich habe den Algorithmus selbst erfunden und manchmal einen Blick auf die Eigenschaften eines Dreiecks und trigonometrische Funktionen geworfen.  Mit der Mechanik ist es schwer für mich und mit der Trigonometrie ist es noch schlimmer. Vielleicht könnte ich irgendwo etwas nicht berücksichtigen, aber dieser Algorithmus funktioniert (Video am Ende). <br><br><h3>  1. Erklärung des Problems </h3><br>  Angenommen, wir brauchen das vordere rechte Glied, um Punkt A mit Koordinaten (150; -20; 100) zu erreichen.  Es ist auch bekannt, dass das Glied relativ zum Körper um 45 Grad gedreht ist (Parameter coxa_zero_rotate): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rx/np/x7/rxnpx7to91tpdvzoltoy7doxess.png"></div><br>  Das Glied selbst hat folgende Parameter: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zr/4w/ky/zr4wkywizwhqwemrdst1yndvyug.png"></div><br>  Ich denke, Sie müssen nicht beschreiben, was diese Parameter bedeuten, die Namen sprechen für sich.  Sie können nur hinzufügen, dass alle diese Parameter durch die Konfiguration des Gehäuses bestimmt werden, permanent sind und im FLASH-Speicher gespeichert werden und von außen bearbeitet werden können (aus Gründen der Flexibilität). <br><br><div class="spoiler">  <b class="spoiler_title">Deshalb brauchst du es</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xv/gq/lg/xvgqlgpgv0rtosh2gujqn6kflsy.png"><br>  Das Bild zeigt verschiedene Variationen des Rumpfes und die Position der Beine des Hexapods.  Jetzt stimmt es mit der ARACNID-Konfiguration überein.  Angenommen, mir ist der Gedanke gekommen, den Fall in REPTILES zu ändern, und dafür reicht es aus, nur die Werte der Parameter ohne Messung im Programm selbst zu ändern, selbst die Zielpunkte müssen nicht geändert werden (es sei denn, dies wird natürlich korrekt angegangen). <br></div></div><br>  Alle oben genannten Parameter reichen aus, um das Problem zu lösen. <br><br><h2>  2. Die Lösung des Problems </h2><br>  <b>2.1 Ermitteln des Drehwinkels von COXA</b> <br><br>  Diese Phase ist die einfachste.  Zuerst müssen Sie die Koordinaten von Punkt A relativ zum LIMB COORDINATE SYSTEM neu berechnen.  Natürlich müssen Sie den Winkel coxa_zero_rotate drehen. Dies können Sie mit den folgenden Formeln tun: <br><p><math> </math> $$ Anzeige $$ x ′ = x ⋅ cos (α) + z ⋅ sin (α) = 150 ⋅ cos (45) + 100 ⋅ sin (45) = 176,78 $$ Anzeige $$ </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-45"><span class="MJXp-msup" id="MJXp-Span-46"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47" style="margin-right: 0.05em;">y</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-48" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mo" id="MJXp-Span-49" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">y</span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-53">20</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> y '= y = -20 </script></p><br><p><math> </math> $$ Anzeige $$ z ′ = -x ⋅ sin (α) + z ⋅ cos (α) = -150 ⋅ sin (45) + 100 ⋅ cos (45) = -35,36 $$ Anzeige $$ </p><br>  Somit haben wir die Koordinaten des Zielpunkts A (176,78; -20; -35,36) relativ zum LIMB-KOORDINATENSYSTEM erhalten. <br><br>  Jetzt können Sie den COXA-Winkel mit der atan2-Funktion ermitteln: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">X</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">A</span><span class="MJXp-mo" id="MJXp-Span-106" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">n</span><span class="MJXp-mn" id="MJXp-Span-111">2</span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msup" id="MJXp-Span-113"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114" style="margin-right: 0.05em;">z</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-115" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mo" id="MJXp-Span-116" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msup" id="MJXp-Span-117"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118" style="margin-right: 0.05em;">x</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-119" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mo" id="MJXp-Span-120" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-121" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">n</span><span class="MJXp-mn" id="MJXp-Span-126">2</span><span class="MJXp-mo" id="MJXp-Span-127" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-128" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-129">35</span><span class="MJXp-mo" id="MJXp-Span-130" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-131">36</span><span class="MJXp-mo" id="MJXp-Span-132" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-133">176</span><span class="MJXp-mo" id="MJXp-Span-134" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-135">78</span><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-137" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-138" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-139">11</span><span class="MJXp-mo" id="MJXp-Span-140" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-141">30</span><span class="MJXp-mrow" id="MJXp-Span-142"><span class="MJXp-mo" id="MJXp-Span-143" style="margin-left: 0em; margin-right: 0em;">°</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> COXA = atan2 (z ', x') = atan2 (-35,36, 176,78) = -11,30 ° </script></p><br>  Wir haben also den Winkel erhalten, um den Sie das COXA-Servo drehen müssen, damit Punkt A in der X'Y'-Ebene liegt.  Lassen Sie uns nun unsere Berechnungen in KOMPAS 3D überprüfen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uz/u0/l1/uzu0l1hk8pu5d06mstriyvqcll4.png"></div><br>  Alles ist richtig. <br><br>  <b>2.2 Ermitteln des Drehwinkels von FEMUR und TIBIA</b> <br>  Um diese Winkel zu finden, muss man zur X'Y'-Ebene gehen.  Um zur Ebene zu gelangen, müssen Sie den Punkt um den Winkel COXA drehen, den wir bereits zuvor berechnet haben. <br><p><math> </math> $$ Anzeige $$ x '= x' ⋅ cos (α) + y '⋅ sin (α) = 176,78 ⋅ cos (-11) + -20 ⋅ sin (-11) = 180,28 $$ Anzeige $$ </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-195"><span class="MJXp-msup" id="MJXp-Span-196"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197" style="margin-right: 0.05em;">y</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-198" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mo" id="MJXp-Span-199" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">y</span><span class="MJXp-mo" id="MJXp-Span-201" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-202" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-203">20</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> y '= y = -20 </script></p><br>  Die <i>y'-</i> Koordinate ändert sich nicht, wenn wir uns entlang der Y'-Achse drehen. <br><br>  Als nächstes müssen Sie die COXA-Länge aus der Berechnung entfernen, d. H.  wir gehen zur Ebene X''Y '' über, dafür führen wir eine Verschiebung der Koordinate <i>x 'des</i> Punktes um die Länge COXA durch: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-208"><span class="MJXp-msup" id="MJXp-Span-209"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210" style="margin-right: 0.05em;">x</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-211" style="vertical-align: 0.5em;">″</span></span><span class="MJXp-mo" id="MJXp-Span-212" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msup" id="MJXp-Span-213"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214" style="margin-right: 0.05em;">x</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-215" style="vertical-align: 0.5em;">′</span></span><span class="MJXp-mo" id="MJXp-Span-216" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">L</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">h</span><span class="MJXp-mo" id="MJXp-Span-227" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-228">180</span><span class="MJXp-mo" id="MJXp-Span-229" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-230">28</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-232">40</span><span class="MJXp-mo" id="MJXp-Span-233" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-234">140</span><span class="MJXp-mo" id="MJXp-Span-235" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-236">28</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> x '' = x '- coxaLength = 180,28 - 40 = 140,28 </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-237"><span class="MJXp-msup" id="MJXp-Span-238"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239" style="margin-right: 0.05em;">y</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-240" style="vertical-align: 0.5em;">″</span></span><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msup" id="MJXp-Span-242"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243" style="margin-right: 0.05em;">y</span><span class="MJXp-mo MJXp-script" id="MJXp-Span-244" style="vertical-align: 0.5em;">′</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-8"> y '' = y '</script></p><br>  Nach all diesen Manipulationen reduziert sich die weitere Lösung des Problems darauf, die Winkel <i>a</i> und <i>b des</i> Dreiecks zu finden: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mu/jf/gz/mujfgzm73qouo2q9vnjgn2qgeei.png"></div><br>  Bevor Sie die Winkel finden, müssen Sie die dritte Seite C dieses Dreiecks finden.  Dieser Abstand ist nichts anderes als die Länge des Vektors und wird nach folgender Formel berechnet: <br><p><math> </math> $$ Anzeige $$ C = \ sqrt {x '' ^ 2 + y '' ^ 2} = \ sqrt {140,28 ^ 2 + (-20) ^ 2} = 141,70 $$ Anzeige $$ </p><br>  Jetzt müssen Sie prüfen, ob das Glied diesen Punkt erreichen kann.  Wenn C größer ist als die Summe der Längen von FEMUR und TIBIA, ist der Punkt nicht erreichbar.  In unserem Fall 141,70 &lt;141 + 85 - der Punkt ist erreichbar. <br><br>  Jetzt kennen wir alle Seiten des Dreiecks und können die benötigten Winkel <i>a</i> und <i>b</i> mithilfe des Kosinussatzes finden: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">a</span><span class="MJXp-mo" id="MJXp-Span-280" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">s</span><span class="MJXp-mo" id="MJXp-Span-285" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mrow" id="MJXp-Span-286"><span class="MJXp-msubsup" id="MJXp-Span-287"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288" style="margin-right: 0.05em;">A</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-289" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-291"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-293" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-294" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-295"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296" style="margin-right: 0.05em;">B</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-297" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-298">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-299"><span class="MJXp-mo" id="MJXp-Span-300" style="margin-left: 0em; margin-right: 0em;">ü</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">r</span><span class="MJXp-mn" id="MJXp-Span-304">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">C</span></span><span class="MJXp-mo" id="MJXp-Span-307" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-308" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-309">72</span><span class="MJXp-mo" id="MJXp-Span-310" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-311">05</span><span class="MJXp-mrow" id="MJXp-Span-312"><span class="MJXp-mo" id="MJXp-Span-313" style="margin-left: 0em; margin-right: 0em;">°</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-10"> a = acos ({A ^ 2 + C ^ 2 - B ^ 2 \ über 2AC}) = 72,05 ° </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-314"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">b</span><span class="MJXp-mo" id="MJXp-Span-316" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">s</span><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mrow" id="MJXp-Span-322"><span class="MJXp-msubsup" id="MJXp-Span-323"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324" style="margin-right: 0.05em;">B</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-325" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-326" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-327"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328" style="margin-right: 0.05em;">A</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-329" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-330" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-331"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-333" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mtext" id="MJXp-Span-334">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-335"><span class="MJXp-mo" id="MJXp-Span-336" style="margin-left: 0em; margin-right: 0em;">ü</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">r</span><span class="MJXp-mn" id="MJXp-Span-340">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">A</span></span><span class="MJXp-mo" id="MJXp-Span-343" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-344" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-345">72</span><span class="MJXp-mo" id="MJXp-Span-346" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-347">95</span><span class="MJXp-mrow" id="MJXp-Span-348"><span class="MJXp-mo" id="MJXp-Span-349" style="margin-left: 0em; margin-right: 0em;">°</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> b = acos ({B ^ 2 + A ^ 2 - C ^ 2 \ über 2BA}) = 72,95 ° </script></p><br>  Die erhaltenen Winkel gelten nicht für die Zuführung zu Servos, da dies die Anfangsposition und den Neigungswinkel der Geraden C zur X-Achse nicht berücksichtigt. Wenn wir die Anfangswinkel FEMUR und TIBIA (135 ° und 45 °) kennen, ist der Neigungswinkel C zur X-Achse nicht bekannt.  Sie finden es mit der Funktion atan2 (y ′ ′, x ′ ′): <br><p><math> </math> $$ Anzeige $$ φ = atan2 (y '', x '') = atan2 (-20, 140,28) = -8,11 ° $$ Anzeige $$ </p><br>  Schließlich können Sie den Drehwinkel der Servos FEMUR und TIBIA berechnen: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">M</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">U</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">R</span><span class="MJXp-mo" id="MJXp-Span-395" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">Z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">R</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">e</span><span class="MJXp-mo" id="MJXp-Span-411" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">a</span><span class="MJXp-mo" id="MJXp-Span-413" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mrow" id="MJXp-Span-414"><span class="MJXp-mo" id="MJXp-Span-415" style="margin-left: 0em; margin-right: 0em;">φ</span></span><span class="MJXp-mo" id="MJXp-Span-416" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-417">135</span><span class="MJXp-mo" id="MJXp-Span-418" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-419">72</span><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-421">05</span><span class="MJXp-mo" id="MJXp-Span-422" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-423">8</span><span class="MJXp-mo" id="MJXp-Span-424" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-425">11</span><span class="MJXp-mo" id="MJXp-Span-426" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-427">71</span><span class="MJXp-mo" id="MJXp-Span-428" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-429">06</span><span class="MJXp-mrow" id="MJXp-Span-430"><span class="MJXp-mo" id="MJXp-Span-431" style="margin-left: 0em; margin-right: 0em;">°</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-13"> FEMUR = femurZeroRotate - a - φ = 135 - 72,05 + 8,11 = 71,06 ° </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435">M</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">U</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">R</span><span class="MJXp-mo" id="MJXp-Span-438" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">b</span><span class="MJXp-mo" id="MJXp-Span-440" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">Z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">R</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">e</span><span class="MJXp-mo" id="MJXp-Span-456" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-457">45</span><span class="MJXp-mo" id="MJXp-Span-458" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-459">72</span><span class="MJXp-mo" id="MJXp-Span-460" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-461">95</span><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-463">27</span><span class="MJXp-mo" id="MJXp-Span-464" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-465">95</span><span class="MJXp-mrow" id="MJXp-Span-466"><span class="MJXp-mo" id="MJXp-Span-467" style="margin-left: 0em; margin-right: 0em;">°</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> FEMUR = b - tibiaZeroRotate = 45 - 72,95 = 27,95 ° </script></p><br><br>  Lassen Sie uns unsere Berechnungen überprüfen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y0/9g/pd/y09gpdnkxfecblnzpf2ssfmxti8.png"></div><br>  Es scheint wie die Wahrheit. <br><br><h2>  Zusammenfassung </h2><br>  Die berechneten Winkel COXA, FEMUR und TIBIA eignen sich zur Fütterung ihrer Servos.  Möglicherweise stellen Sie fest, dass der COXA-Winkel negativ ist, und dementsprechend stellt sich die Frage: „Wie dreht man den Antrieb um -11,3 Grad?“.  Der Trick ist, dass ich die neutrale Position des COXA-Servos als logische Null verwende. Dadurch kann der Antrieb sowohl positive als auch negative Winkel drehen.  Dies ist natürlich offensichtlich, aber ich denke, es wäre nicht unangebracht, dies zu erwähnen.  Ich werde in den folgenden Artikeln ausführlicher darauf eingehen, wenn ich über die Implementierung all dieser Punkte spreche. <br><br><h2>  Quellcode </h2><br><div class="spoiler">  <b class="spoiler_title">Genug der Worte, lassen Sie mich den Code sehen</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> RAD_TO_DEG(rad) ((rad) * 180.0 / M_PI) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DEG_TO_RAD(deg) ((deg) * M_PI / 180.0) typedef enum { LINK_COXA, LINK_FEMUR, LINK_TIBIA } link_id_t; typedef struct { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// Current link state float angle; // Link configuration uint32_t length; int32_t zero_rotate; int32_t min_angle; int32_t max_angle; } link_info_t; typedef struct { point_3d_t position; path_3d_t movement_path; link_info_t links[3]; } limb_info_t; // *************************************************************************** /// @brief Calculate angles /// @param info: limb info @ref limb_info_t /// @return true - calculation success, false - no // *************************************************************************** static bool kinematic_calculate_angles(limb_info_t* info) { int32_t coxa_zero_rotate_deg = info-&gt;links[LINK_COXA].zero_rotate; int32_t femur_zero_rotate_deg = info-&gt;links[LINK_FEMUR].zero_rotate; int32_t tibia_zero_rotate_deg = info-&gt;links[LINK_TIBIA].zero_rotate; uint32_t coxa_length = info-&gt;links[LINK_COXA].length; uint32_t femur_length = info-&gt;links[LINK_FEMUR].length; uint32_t tibia_length = info-&gt;links[LINK_TIBIA].length; float x = info-&gt;position.x; float y = info-&gt;position.y; float z = info-&gt;position.z; // Move to (X*, Y*, Z*) coordinate system - rotate float coxa_zero_rotate_rad = DEG_TO_RAD(coxa_zero_rotate_deg); float x1 = x * cos(coxa_zero_rotate_rad) + z * sin(coxa_zero_rotate_rad); float y1 = y; float z1 = -x * sin(coxa_zero_rotate_rad) + z * cos(coxa_zero_rotate_rad); // // Calculate COXA angle // float coxa_angle_rad = atan2(z1, x1); info-&gt;links[LINK_COXA].angle = RAD_TO_DEG(coxa_angle_rad); // // Prepare for calculation FEMUR and TIBIA angles // // Move to (X*, Y*) coordinate system (rotate on axis Y) x1 = x1 * cos(coxa_angle_rad) + z1 * sin(coxa_angle_rad); // Move to (X**, Y**) coordinate system (remove coxa from calculations) x1 = x1 - coxa_length; // Calculate angle between axis X and destination point float fi = atan2(y1, x1); // Calculate distance to destination point float d = sqrt(x1 * x1 + y1 * y1); if (d &gt; femur_length + tibia_length) { return false; // Point not attainable } // // Calculate triangle angles // float a = tibia_length; float b = femur_length; float c = d; float alpha = acos( (b * b + c * c - a * a) / (2 * b * c) ); float gamma = acos( (a * a + b * b - c * c) / (2 * a * b) ); // // Calculate FEMUR and TIBIA angle // info-&gt;links[LINK_FEMUR].angle = femur_zero_rotate_deg - RAD_TO_DEG(alpha) - RAD_TO_DEG(fi); info-&gt;links[LINK_TIBIA].angle = RAD_TO_DEG(gamma) - tibia_zero_rotate_deg; // // Check angles // if (info-&gt;links[LINK_COXA].angle &lt; info-&gt;links[LINK_COXA].min_angle || info-&gt;links[LINK_COXA].angle &gt; info-&gt;links[LINK_COXA].max_angle) { return false; } if (info-&gt;links[LINK_FEMUR].angle &lt; info-&gt;links[LINK_FEMUR].min_angle || info-&gt;links[LINK_FEMUR].angle &gt; info-&gt;links[LINK_FEMUR].max_angle) { return false; } if (info-&gt;links[LINK_TIBIA].angle &lt; info-&gt;links[LINK_TIBIA].min_angle || info-&gt;links[LINK_TIBIA].angle &gt; info-&gt;links[LINK_TIBIA].max_angle) { return false; } return true; }</span></span></span></span></code> </pre> <br></div></div><br><h2>  Algorithmus in Aktion </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/LzmEDeKPMTA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Dann erschien zufällig eine Sequenz, die etwas an einen Tanz erinnerte <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jmxpjjCkGQE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  PS </h2><br>  Ich würde mich freuen, wenn jemand diesen Algorithmus vereinfachen kann.  Ich habe es so gemacht, dass ich es nach etwa einem halben Jahr verstehen konnte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de436748/">https://habr.com/ru/post/de436748/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de436730/index.html">Unterhaltungselektronik Hall of Fame: Die Geschichten der besten Geräte der letzten 50 Jahre, Teil 5</a></li>
<li><a href="../de436740/index.html">Eigene Forschung, was können uns Open Source sagen?</a></li>
<li><a href="../de436742/index.html">Android Robotics bis 2019: Die wahre Geschichte; in 5 Teilen; Teil 1</a></li>
<li><a href="../de436744/index.html">Starten Sie Ihren Detektor für neuronale Netze mit dem Neural Compute Stick und OpenVINO auf dem Raspberry Pi</a></li>
<li><a href="../de436746/index.html">So verschlechtern Sie die Leistung, indem Sie sie verbessern</a></li>
<li><a href="../de436750/index.html">Trendanalyse des russischen YouTube für 2018</a></li>
<li><a href="../de436752/index.html">Der Kuchen ist eine Lüge</a></li>
<li><a href="../de436754/index.html">Q2VKPT: Quake II mit realistischer Beleuchtung komplett neu geschrieben</a></li>
<li><a href="../de436756/index.html">Isomorphismus eilt zur Rettung</a></li>
<li><a href="../de436762/index.html">Couchbase bei Telecom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>