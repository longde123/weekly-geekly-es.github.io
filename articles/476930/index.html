<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Extensi贸n en Dart (Flutter)   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En una versi贸n reciente de Dart 2.6, el lenguaje introdujo una nueva funci贸n, extensi贸n est谩tica o m茅todos de extensi贸n est谩tica, que le permite agreg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Extensi贸n en Dart (Flutter)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476930/">  En una versi贸n reciente de Dart 2.6, el lenguaje introdujo una nueva funci贸n, extensi贸n est谩tica o m茅todos de extensi贸n est谩tica, que le permite agregar nuevos m茅todos a los tipos existentes.  驴Por qu茅 necesitamos extensi贸n?  驴C贸mo usarlos y para qu茅 sirven? <br><br><img src="https://habrastorage.org/webt/bj/8s/ee/bj8seekf1mjnc7s2me-ydcgixks.png"><br><br><h2>  Introduccion </h2><br>  Para empezar, 驴qu茅 es la extensi贸n en general?  <b>La extensi贸n</b> es az煤car sint谩ctica que extiende una clase existente en un lugar diferente del m贸dulo de declaraci贸n de clase. <br><br>  En programaci贸n, los m茅todos de extensi贸n han existido durante mucho tiempo, por lo que tuvieron que lanzarse.  La extensi贸n se usa activamente en lenguajes como C #, Java a trav茅s de Manifold, Swift, Kotlin y muchos otros. <br><a name="habracut"></a><br><h2>  El problema </h2><br>  Digamos que tenemos un m茅todo catchError, que es simplemente horrible y necesita reescribirse para una nueva funci贸n genial.  Suponga que usa una funci贸n de cualquier tipo como argumento para un lugar de una funci贸n estrictamente tipada o para verificar el tipo de una funci贸n, y esto sucede porque hace 8 meses cuando desarrollaba esta funcionalidad era l贸gico en ese momento. <br><br>  Lo primero que viene a la mente es reescribir esta funci贸n, pero aqu铆 nos enfrentamos con el problema de que ocurre con demasiada frecuencia en el proyecto, y cambiar la funci贸n conducir谩 a la inoperancia de todo el proyecto. <br><br>  Bueno, si la primera opci贸n no es para nosotros.  adecuado, por razones l贸gicas, entonces puedo implementar una nueva funci贸n Futuro que cumpla con todos mis requisitos. <br><br><pre><code class="plaintext hljs">abstract class Future&lt;T&gt; { ... /// Catches any [error] of type [E]. Future&lt;T&gt; onError&lt;E&gt;(FutureOr&lt;T&gt; handleError(E error, StackTrace stack)) =&gt; this.catchError(...   -  ...); } ... }</code> </pre> <br>  y la llamar茅 as铆: <br><br><pre> <code class="plaintext hljs">Future&lt;String&gt; someString = ...; someString.onError((FormatException e, s) =&gt; ...).then(...);</code> </pre><br>  Desafortunadamente, no puedo agregar esta funci贸n a la clase Future.  Si hago esto, tambi茅n lo agregar茅 a la interfaz Future, y cualquier otra clase que implemente esta interfaz estar谩 incompleta y ya no se compilar谩. <br><br>  Bueno, otra opci贸n es implementar una funci贸n de terceros que se ver谩 as铆: <br><br><pre> <code class="plaintext hljs">Future&lt;T&gt; onFutureError&lt;T, E&gt;(Future&lt;T&gt; source, FutureOr&lt;T&gt; handleError(E error, StackTrace stack)) =&gt; source.catchError(... - ...);</code> </pre><br>  Y su llamada se ver铆a as铆: <br><br><pre> <code class="plaintext hljs">Future&lt;String&gt; someString = ...; onFutureError(someString, (FormatException e, s) =&gt; ...).then(...);</code> </pre><br>  隆Genial, todo funciona!  Pero es triste que haya comenzado a leerse terriblemente.  Usamos m茅todos  que se implementan dentro de la clase, por lo que se llaman -.doingSomething ();  Este c贸digo es comprensible, lo acabo de leer de izquierda a derecha y tengo en mi cabeza una secuencia de eventos.  El uso de una funci贸n auxiliar hace que el c贸digo sea engorroso y menos legible. <br><br>  Bueno, entonces puedo implementar una nueva clase y dejar que los usuarios envuelvan su interfaz anterior con una funcionalidad mejorada. <br><br><pre> <code class="plaintext hljs">class CustomFuture&lt;T&gt; { CustomFuture(Future&lt;T&gt; future) : _wrapper = future; Future&lt;T&gt; _wrapper; Future&lt;T&gt; onError&lt;E&gt;(FutureOr&lt;T&gt; handleError(E error, StackTrace stack)) =&gt; _wrapper.catchError(...-     ...); }</code> </pre><br>  y la llamada se ver谩 as铆: <br><br><pre> <code class="plaintext hljs">Future&lt;String&gt; someString = ...; CustomFuture(someString).onError((FormatException e, s) =&gt; ...).then(...);</code> </pre><br>  Se ve genial! <br><br><h2>  Resolviendo un problema con la extensi贸n </h2><br>  Tan pronto como detengamos la programaci贸n en pascal y regresemos a 2019, la implementaci贸n de esta funcionalidad se reducir谩 a este tama帽o: <br><br><pre> <code class="plaintext hljs">extension CustomFuture &lt;T&gt; on Future&lt;T&gt; { Future&lt;T&gt; onError&lt;E&gt;( FutureOr&lt;T&gt; handleError(E error, StackTrace stack)) =&gt; this.catchError(...something clever...); }</code> </pre><br>  y as铆 es como se ver谩 la llamada: <br><br><pre> <code class="plaintext hljs">Future&lt;String&gt; someString = ...; someString.onError((FormatException e, s) =&gt; ...).then(...);</code> </pre><br>  Eso es todo!  La soluci贸n a este problema tom贸 solo 5 l铆neas de c贸digo.  Usted  Te preguntar谩s qu茅 tipo de magia es y c贸mo funciona. <br><br>  De hecho, se comporta de la misma manera que una clase contenedora, aunque en realidad es solo una funci贸n <b>est谩tica</b> auxiliar.  La extensi贸n le permite dejar de lado la escritura expl铆cita de envoltorios. <br><br><h3>  Esto no es un envoltorio </h3><br>  El dise帽o de la extensi贸n funciona de tal manera que parece una declaraci贸n de una clase existente, pero act煤a como si fuera un contenedor con un _wrapper privado.  Pero hay una ventaja en comparaci贸n con una clase de contenedor: esto es acceder a la clase directamente, en lugar de acceder a la clase de contenedor _wrapper. <br><br>  Esta caracter铆stica no se hizo por el bien de las caracter铆sticas, pero como dije antes, las extensiones son de hecho una forma m谩s conveniente de llamar a funciones est谩ticas.  Esto significa que no hay ning煤n objeto contenedor. <br><br><h3>  Todo es est谩tico </h3><br>  Dije "m茅todos de extensi贸n est谩tica" arriba, 隆y lo hice por una raz贸n! <br><br>  Dart est谩 est谩ticamente escrito.  El compilador conoce el tipo de cada expresi贸n en el momento de la compilaci贸n, por lo que si escribe user.age (19) y age es una extensi贸n, entonces el compilador debe averiguar qu茅 tipo est谩 envuelto en el objeto dado para encontrar el tipo de la llamada completa. <br><br><h3>  驴Qu茅 problemas pueden surgir? </h3><br>  El ejemplo m谩s simple de problemas con la extensi贸n es cuando tiene m谩s de una extensi贸n en su alcance.  B谩sicamente, el ganador es la extensi贸n m谩s cercana al tipo real de expresi贸n que est谩 llamando al miembro, con algunas reservas. <br><br>  La forma m谩s f谩cil de resolver el problema es conectar estrictamente la extensi贸n que necesita, o puede usar la extensi贸n expl铆citamente: <br><br><pre> <code class="plaintext hljs">... List list = ...; MyList(list).printlist(); SomeList(list).printlist(); ... extension MyList on List { void printlist() { print(...- ...); } } extension SomeList on List { void printlist() { print(...-  ...); } }</code> </pre><br><h2>  Resumen </h2><br><ul><li>  El lenguaje dardo tiene una herramienta conveniente para expandir la funcionalidad existente. </li><li>  Puede ampliar m茅todos, operadores, establecedores y captadores, pero no campos. </li><li>  Puede invocar m茅todos de extensi贸n expl铆citamente o, cuando no haya conflicto con un miembro de la interfaz u otra extensi贸n, impl铆citamente. </li><li>  Las llamadas impl铆citas funcionan igual que las llamadas expl铆citas. </li><li>  Las extensiones son est谩ticas.  Todo sobre ellos se resuelve sobre la base de tipos est谩ticos. </li></ul><br>  Si la salida de la extensi贸n falla debido a extensiones en conflicto, puede hacer lo siguiente: <br><br><ol><li>  Aplica la extensi贸n expl铆citamente. </li><li>  Importe la extensi贸n conflictiva con el prefijo, porque no est谩 disponible para llamadas impl铆citas. </li><li>  No importe una extensi贸n conflictiva en absoluto. </li></ol><br>  Eso es todo!  Puede usar la extensi贸n en todo su potencial. <br><br>  Y, por supuesto, enlaces 煤tiles: <br><br>  <a href="https://flutter.dev/">Aleteo del sitio web</a> <br>  <a href="https://dart.dev/">Sitio web de Dart</a> <br>  <a href="">驴D贸nde puedo leer m谩s sobre la extensi贸n?</a> <br>  <a href="https://t.me/flutter_russia">Canal de Telegram donde hablo de todo lo m谩s nuevo en el mundo de Flutter y no solo</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/476930/">https://habr.com/ru/post/476930/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../476914/index.html">Instalar el m贸dulo Powershell desde el repositorio de Github</a></li>
<li><a href="../476916/index.html">Ya no quiero trabajar, nunca y en nada. Pero aprend铆 a exprimirme los resultados</a></li>
<li><a href="../476922/index.html">Life after Record Bird: c贸mo y d贸nde m谩s puedes encontrar informaci贸n sobre el lanzamiento de lanzamientos de m煤sica</a></li>
<li><a href="../476924/index.html">Redux son como contenedores estatales en SwiftUI. Recomendaciones</a></li>
<li><a href="../476928/index.html">Pastilla el茅ctrica Tesla Cybertruck: resultados de la presentaci贸n</a></li>
<li><a href="../476934/index.html">La eliminaci贸n de uno de los hemisferios cerebrales no es fatal: el segundo hemisferio asume nuevas tareas</a></li>
<li><a href="../476936/index.html">Lujo inaccesible de Intel: Core i9-9990XE con 14 n煤cleos a una frecuencia de 5.0 GHz (1 parte)</a></li>
<li><a href="../476938/index.html">Lujo inaccesible de Intel: Core i9-9990XE con 14 n煤cleos a una frecuencia de 5.0 GHz (2 partes)</a></li>
<li><a href="../476940/index.html">Sem谩foro en eventos C ++</a></li>
<li><a href="../476944/index.html">El cerebro de la empresa. Inicio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>