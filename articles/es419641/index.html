<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçü§ù‚Äçüë®üèº üè∏ üë©üèΩ‚Äçüè´ Crear una IA simple de C # en Unity üçû üòï ü•ß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Casi cualquier juego requiere inteligencia artificial (IA) que interact√∫a con el usuario, la mayor√≠a de las veces en forma de una fuerza hostil para e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crear una IA simple de C # en Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419641/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/d1b/432/f53d1b43283124f71239cc56289eabfb.jpg" alt="imagen"></div><br>  Casi cualquier juego requiere inteligencia artificial (IA) que interact√∫a con el usuario, la mayor√≠a de las veces en forma de una fuerza hostil para el jugador.  En algunos casos, la IA deber√≠a ayudar al jugador, en otros deber√≠a combatirlo, pero todos los personajes controlados por la computadora tienen algunas similitudes.  Dependiendo de los requisitos del proyecto, la IA puede usar comportamientos simples o complejos.  Dichos requisitos pueden ser diplomacia con otro jugador o un simple vagar por la plataforma.  Sea como fuere, es necesario asegurarse de que la IA haga su trabajo de manera eficiente. <br><br>  En este proyecto, demostrar√© una inteligencia artificial muy simple.  Supongamos que creamos un juego en el que un jugador debe colarse cerca del cuartel general enemigo.  Cuando un jugador es notado por una c√°mara de seguridad, los enemigos se crean cerca y por un corto per√≠odo de tiempo persiguen al jugador.  Eso es lo que estamos implementando en el proyecto en el nivel m√°s simple.  Al finalizar el proyecto, recibir√°s un objeto de jugador controlado, un c√≠rculo utilizado como c√°mara del enemigo y un objeto del enemigo que perseguir√° al jugador cuando el objeto de la c√°mara informa sobre su presencia. <br><a name="habracut"></a><br><h2>  Preparaci√≥n </h2><br>  Primero necesitamos crear un proyecto 3D.  Haga clic en el bot√≥n <em>Nuevo</em> en la parte superior de la ventana despu√©s de iniciar Unity, como se muestra en la Figura 1. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c16/bbf/df1/c16bbfdf150bec53113bc7955f901e64.jpg"></div><br>  <i>Figura 1: crear un nuevo proyecto</i> <br><br>  Asigne un nombre a su proyecto de <em>IA</em> y aseg√∫rese de que sea un proyecto 3D.  Despu√©s de elegir un lugar en la computadora para almacenar el proyecto, haga clic en el bot√≥n <em>Crear proyecto</em> en la parte inferior, que se muestra en la Figura 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3b/f46/c21/a3bf46c21915b44510b6052688e4f3c0.jpg"></div><br>  <i>Figura 2: pantalla de configuraci√≥n del proyecto</i> <br><br>  Despu√©s de crear el proyecto, lo primero que debemos hacer es configurar las carpetas en la ventana <em>Activos</em> para organizar nuestro trabajo.  Haga clic derecho en la ventana <em>Activos</em> y seleccione <em>Crear ‚Üí Carpeta</em> para crear una nueva carpeta.  Nombre esta carpeta <em>Materiales</em> .  Luego cree una segunda carpeta y as√≠gnele el nombre <em>Scripts</em> .  La Figura 3 muestra c√≥mo deber√≠a verse. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db9/68a/709/db968a709778fc5f679ea8dcfd525222.jpg"></div><br>  <i>Figura 3: crear una nueva carpeta</i> <br><br>  Despu√©s de todo esto, la ventana <em>Activos</em> deber√≠a verse como la que se muestra en la Figura 4. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed8/a95/6f8/ed8a956f80044386ef356d0877931184.jpg"></div><br>  <i>Figura 4: Ventana de <em>activos</em> .</i> <br><br>  Luego, cree un piso sobre el cual se colocar√°n todos los objetos.  En la ventana <em>Jerarqu√≠a</em> , seleccione <em>Crear ‚Üí Objeto 3D ‚Üí Plano</em> para crear un objeto plano que se utilizar√° como piso. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e95/770/adc/e95770adc4bcf7c49f6398634cfb7dcc.jpg"></div><br>  <i>Figura 5: Creaci√≥n de un objeto plano.</i> <br><br>  Nombre este objeto <em>Floor</em> y cambie su valor de <em>Escala X</em> a 7, y el valor de <em>Escala Z</em> a 3. Despu√©s de eso, la ventana del <em>Inspector</em> con el objeto <em>Floor</em> seleccionado deber√≠a verse como se muestra en la Figura 6. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/428/36f/88a/42836f88a4e028e07aa3d8d63e8c90c6.jpg"></div><br>  <i>Figura 6: Configuraci√≥n de las propiedades del objeto <em>Floor</em> .</i> <br><br>  Ahora necesitamos crear un nuevo material para <em>Floor</em> para distinguirlo del resto de los objetos que se colocar√°n en la escena.  En la carpeta <em>Materiales</em> de la ventana <em>Activos</em> , cree un nuevo material haciendo clic derecho en la ventana <em>Activos</em> y seleccionando <em>Crear ‚Üí Material</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/790/e22/47c/790e2247cd0c57040bc20f46d2df93d0.jpg"></div><br>  <i>Figura 7: crear nuevo material</i> <br><br>  Cuando termine, nombre el material <em>Piso</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb7/3fc/092/bb73fc09241585429e335997e0cc0ac4.jpg"></div><br>  <i>Figura 8: Material del <em>piso</em> .</i> <br><br>  En la parte superior de la ventana del <em>Inspector</em> con <em>Piso</em> seleccionado, seleccione un selector de color. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a98/e7e/211/a98e7e21145de32f77d8ba0346f36587.jpg"></div><br>  Figura 9: elegir un selector de color. <br><br>  Por supuesto, puede elegir cualquier color para el piso, pero en este ejemplo eleg√≠ rojo-marr√≥n, como se muestra en la Figura 10. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/bed/360/3ecbed3607552e16d2dc9973c35cdceb.jpg"></div><br>  Figura 10: selector de color. <br><br>  Seleccione el objeto <em>Piso</em> en la ventana <em>Jerarqu√≠a</em> , y en el componente <em>Representador de malla</em> , seleccione la flecha peque√±a junto a <em>Materiales</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/061/3f6/545/0613f6545880f95c917b481336c2589a.jpg"></div><br>  <i>Figura 11: Preparaci√≥n para un cambio de material.</i> <br><br>  Arrastre el material del <em>piso</em> desde la ventana <em>Activos</em> al campo <em>Elemento 0</em> del componente <em>Renderizador de malla</em> en la ventana <em>Inspector</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/3fe/247/e7d3fe24725c026b1d95f823ecd6832c.jpg"></div><br>  <i>Figura 12: Definici√≥n del material del <em>piso</em> como el material del objeto del <em>piso</em> .</i> <br><br>  Habiendo terminado con el objeto <em>Floor</em> , necesitamos crear alrededor del √°rea de la pared para que el jugador no pueda caerse del borde.  Regrese a <em>Crear ‚Üí Objeto 3D ‚Üí Plano</em> para crear un nuevo plano.  Llamamos a este plano <em>Muro</em> y lo configuramos con las mismas dimensiones que <em>Piso</em> , es decir, <em>Escala X</em> con un valor de 7 y <em>Escala Z</em> con un valor de 3. Luego crea tres muros m√°s, selecciona un objeto y presiona Ctrl + D tres veces. Despu√©s de eso, coloca los muros alrededor g√©nero de acuerdo con los datos de la tabla. <br><br><table><tbody><tr><td>  <strong>Titulo</strong> <br></td><td>  <strong>Posici√≥n X</strong> <br></td><td>  <strong>Posici√≥n Y</strong> <br></td><td>  <strong>Posici√≥n z</strong> <br></td><td>  <strong>Rotaci√≥n x</strong> <br></td><td>  <strong>Rotaci√≥n z</strong> <br></td></tr><tr><td>  Pared <br></td><td>  -35 <br></td><td>  21 <br></td><td>  0 0 <br></td><td>  0 0 <br></td><td>  -90 <br></td></tr><tr><td>  Pared (1) </td><td>  -1 <br></td><td>  11 <br></td><td>  -15 <br></td><td>  90 <br></td><td>  0 0 <br></td></tr><tr><td>  Pared (2) <br></td><td>  -1 <br></td><td>  11 <br></td><td>  13,5 <br></td><td>  -90 <br></td><td>  0 0 <br></td></tr><tr><td>  Pared (3) <br></td><td>  34 <br></td><td>  21 <br></td><td>  0 0 <br></td><td>  0 0 <br></td><td>  90 </td></tr></tbody></table><br>  Tabla 1: Posiciones y rotaciones de todos los objetos de <em>Muro</em> . <br><br>  Una vez completado todo esto, debe cambiar la posici√≥n de la c√°mara para que mire el piso desde arriba.  Seleccione el objeto de la <em>c√°mara principal</em> y establezca la <em>posici√≥n Y</em> en 30, la <em>posici√≥n Z</em> en 0 y la <em>rotaci√≥n X</em> en 80. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3b/794/765/e3b794765d6fcb079014a487f435bf24.jpg"></div><br>  <i>Figura 13: configuraci√≥n del objeto de la c√°mara.</i> <br><br>  La escena est√° preparada, por lo que es hora de crear el personaje del jugador.  En la ventana <em>Jerarqu√≠a</em> , haga clic en <em>Crear ‚Üí Objeto 3D ‚Üí Esfera</em> para crear un objeto de esfera.  Denomine este objeto <em>Player</em> y luego haga clic en el bot√≥n <em>Agregar componente</em> en la parte inferior de la ventana del <em>Inspector</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/247/713/079/24771307910b2c0aaf9f19d2c74b6d9a.jpg"></div><br>  <i>Figura 14: agregar un nuevo componente.</i> <br><br>  Ahora encuentra el <em>cuerpo r√≠gido</em> .  Despu√©s de eso, seleccione el componente <em>Rigidbody</em> de la lista y agregue el <em>Rigidbody</em> al objeto <em>Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3f/01e/f41/f3f01ef412da352b4131c02be07535df.jpg"></div><br>  <i>Figura 15: agregar un componente <em>Rigidbody</em> .</i> <br><br>  A continuaci√≥n, debe asignar una etiqueta al jugador, que luego nos ser√° √∫til en el c√≥digo.  Haga clic en el men√∫ desplegable <em>Etiqueta</em> en la esquina superior izquierda de la ventana del <em>Inspector</em> y seleccione la etiqueta <em>Reproductor</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c35/764/224/c35764224a4bb55b3e725c29aa597e19.jpg"></div><br>  <i>Figura 16: Definici√≥n de una nueva etiqueta.</i> <br><br>  Necesitamos establecer la posici√≥n del jugador para que no est√© debajo del objeto <em>Floor</em> .  En el ejemplo, coloqu√© al jugador en la esquina superior izquierda con una <em>posici√≥n X</em> igual a 26, una <em>posici√≥n Y</em> igual a 1 y una <em>posici√≥n Z</em> igual a -9. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b0/a09/4bf/2b0a094bf170d2d2fb3bb11fd54a5ab1.jpg"></div><br>  <i>Figura 17: colocaci√≥n del jugador.</i> <br><br>  Para que nuestro c√≥digo futuro funcione correctamente, por supuesto, debemos adjuntarlo al objeto.  Regrese a la ventana <em>Jerarqu√≠a</em> y esta vez seleccione <em>Crear ‚Üí Objeto 3D ‚Üí Cubo</em> .  Llame a este cubo <em>Guard</em> , agregue el componente <em>Rigidbody</em> y el componente <em>NavMesh Agent</em> utilizando el bot√≥n <em>Agregar componente</em> en la ventana del <em>Inspector</em> .  Luego, col√≥quelo en alg√∫n lugar en la esquina superior izquierda de la escena.  Despu√©s de eso, la ventana del <em>Inspector</em> del objeto <em>Guardia</em> se ver√° as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/698/d9e/79d/698d9e79d24de65f2586482ed3ffa03b.jpg"></div><br>  <i>Figura 18: Objeto <em>protector</em> en la ventana del <em>Inspector</em> .</i> <br><br>  Y este objeto debe ubicarse as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/873/202/f6c/873202f6c470ad2b5b2233dd2fbe7a7f.jpg"></div><br>  <i>Figura 19: Colocaci√≥n del objeto <em>Guard</em> .</i> <br><br>  Finalmente, necesitamos un objeto usado como el "ojo" del objeto <em>Guardia</em> , que notificar√° a la <em>Guardia</em> que el jugador lo est√° tocando.  Por √∫ltima vez, vaya a la ventana <em>Jerarqu√≠a</em> y seleccione <em>Crear ‚Üí Objeto 3D ‚Üí Esfera</em> para crear otro objeto de esfera.  Nombre este objeto <em>Looker</em> .  Esta vez no necesitamos agregarle ning√∫n otro componente.  Sin embargo, cambiaremos el tama√±o del objeto.  Despu√©s de elegir <em>Looker</em> , cambie las siguientes variables del componente <em>Transformar</em> en la ventana del <em>Inspector</em> . <br><br><ul><li>  <em>Escala X</em> a las 9. </li><li>  <em>Escala Y</em> a 0.5. </li><li>  <em>Escala Z</em> a las 9. </li></ul><br>  Despu√©s de eso, coloque el <em>Looker de</em> manera que est√© ubicado en la parte superior media del piso, como se muestra en la Figura 20. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/021/427/aea/021427aea8c433f0d4beb49dcacf75ac.jpg"></div><br>  <i>Figura 20: Ubicaci√≥n del Looker.</i> <br><br>  Es el momento adecuado para darle a <em>Looker un</em> material √∫nico para que pueda ver que vale la pena evitarlo.  En la carpeta <em>Materiales</em> de la ventana <em>Activos</em> , haga clic con el bot√≥n derecho y cree un nuevo material.  <em>N√≥mbralo Looker</em> y dale un color rojo brillante.  Despu√©s de eso, designe este material como el material del objeto <em>Looker</em> para cambiar su color.  Despu√©s de eso, la escena deber√≠a verse as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd4/252/185/fd42521851c8f10540156ddd8678ce21.jpg"></div><br>  <i>Figura 21: Objeto de <em>aspecto</em> con material nuevo.</i> <br><br>  Lo √∫nico que nos queda es crear una malla de navegaci√≥n para la <em>Guardia</em> , sobre la cual pueda moverse.  Hay un men√∫ <em>Ventana</em> en la parte superior del editor de Unity.  Elija <em>Ventana ‚Üí Navegaci√≥n</em> para abrir la ventana de <em>Navegaci√≥n</em> que se muestra en la Figura 22. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/f06/7b1/dc8f067b1f605af22531520c1de2f28f.jpg"></div><br>  <i>Figura 22: Ventana de <em>navegaci√≥n</em> .</i> <br><br>  Seleccione el objeto <em>Piso</em> en la <em>Jerarqu√≠a</em> y luego, en la ventana <em>Navegaci√≥n</em> , seleccione la casilla de verificaci√≥n <em>Est√°tica de navegaci√≥n</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f67/62e/b41/f6762eb4161c64a5388901e73909f1fc.jpg"></div><br>  <i>Figura 23: <em>Navegaci√≥n est√°tica</em> .</i> <br><br>  Luego, seleccione la opci√≥n <em>Hornear</em> en la parte superior de la ventana. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/025/7d0/dce/0257d0dce38af90396512cb4bd205316.jpg"></div><br>  <i>Figura 24: Cambie al men√∫ <em>Hornear</em> .</i> <br><br>  Se abre el men√∫ <em>Bake</em> , en el que puede cambiar las propiedades de la malla de navegaci√≥n que vamos a crear.  En nuestro ejemplo, nada necesita ser cambiado.  Simplemente haga clic en el bot√≥n <em>Hornear</em> en la <em>esquina</em> inferior derecha. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/ec7/6b8/dddec76b89364a5f66168b3cbd0c6fbb.jpg"></div><br>  <i>Figura 25: creaci√≥n de una nueva malla de navegaci√≥n.</i> <br><br>  En este punto, Unity le pedir√° que guarde la escena.  Gu√°rdelo, despu√©s de lo cual se crear√° una malla de navegaci√≥n.  Ahora la escena se ver√° as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/d1b/432/f53d1b43283124f71239cc56289eabfb.jpg"></div><br>  <i>Figura 26: La escena actual con la malla de navegaci√≥n agregada.</i> <br><br>  Ahora todo en Unity est√° configurado, por lo que es hora de crear los scripts necesarios para que el proyecto funcione.  En la ventana <em>Activos</em> , haga clic con el bot√≥n derecho y seleccione <em>Crear ‚Üí Script de C #</em> .  Nombra este script <em>Player</em> .  Repita esta operaci√≥n dos veces m√°s, creando scripts con los nombres <em>Guard</em> y <em>Looker</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/12e/fb2/26b/12efb226b1de229b7c9b13eb69f0f483.jpg"></div><br>  <i>Figura 27: crear un nuevo script.</i> <br><br>  Despu√©s de eso, la carpeta <em>Scripts</em> en la ventana <em>Activos</em> se ver√° as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/a2f/2a5/e7da2f2a5c94ee8683aed4179721e9bb.jpg"></div><br>  <i>Figura 28: Carpeta de <em>secuencias de comandos</em> .</i> <br><br>  Primero, comenzaremos a escribir el c√≥digo del script <em>Player</em> .  Haga doble clic en la secuencia de comandos del <em>reproductor</em> en la ventana <em>Activos</em> para abrir Visual Studio y comenzar a crear el c√≥digo. <br><br><h2>  C√≥digo </h2><br>  El script del <em>jugador</em> es bastante simple, todo lo que hace es dejar que el usuario mueva el objeto bola.  Bajo la declaraci√≥n de clase, necesitamos obtener un enlace al componente <em>Rigidbody</em> que creamos previamente en el proyecto. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Rigidbody rb;</code> </pre> <br>  Justo despu√©s de eso, en la funci√≥n <strong>Inicio</strong> , <em>ordenamos</em> a Unity que establezca el componente <em>Rigidbody</em> actual del objeto <em>Player</em> en <em>rb</em> . <br><br><pre> <code class="cs hljs">rb = GetComponent&lt;Rigidbody&gt;();</code> </pre> <br>  Despu√©s de eso, el script del <em>jugador</em> se ver√° as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/017/686/297/017686297368cffbd3ea3980b6036181.jpg"></div><br>  <i>Figura 29: Script del <em>jugador</em> en este momento.</i> <br><br>  Ahora que se asigna el valor <em>rb</em> , debemos dejar que el objeto <em>Player se</em> mueva cuando presionamos las teclas de flecha.  Para mover el objeto, usaremos f√≠sica, aplicando fuerza al objeto cuando el usuario presione las teclas de flecha.  Para hacer esto, simplemente agregue el siguiente c√≥digo a la funci√≥n <em>Actualizar</em> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.UpArrow)) rb.AddForce(Vector3.forward * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.DownArrow)) rb.AddForce(Vector3.back * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.LeftArrow)) rb.AddForce(Vector3.left * <span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Input.GetKey(KeyCode.RightArrow)) rb.AddForce(Vector3.right * <span class="hljs-number"><span class="hljs-number">20</span></span>);</code> </pre> <br>  Con esto hemos completado el script del <em>jugador</em> .  El gui√≥n terminado se ver√° as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cf/82e/fc6/3cf82efc6aaef7dc0e7c8c6f21b503ff.jpg"></div><br>  <i>Figura 30: el script del <em>jugador</em> terminado.</i> <br><br>  Guarda tu trabajo y vuelve a Unity.  Esta vez, seleccione la secuencia de comandos <em>Guardia</em> en la ventana <em>Activos</em> .  Para que el c√≥digo de <em>Guard</em> funcione, debe agregar la construcci√≥n de uso en la parte superior del script. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.AI;</code> </pre> <br>  A continuaci√≥n, declare las siguientes variables inmediatamente despu√©s de la declaraci√≥n de clase. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject player; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> NavMeshAgent navmesh;</code> </pre> <br>  El objeto <strong>Player</strong> se usa como el valor de la variable <strong>jugador</strong> del objeto <em>Guard</em> .  Ser√° √∫til m√°s tarde cuando le ordenemos al objeto <em>Guardia</em> que persiga al jugador.  Luego se <strong>declara que la</strong> variable <strong>navmesh</strong> recibe el componente <em>NavMeshAgent</em> del objeto.  Lo usaremos m√°s tarde cuando el <em>Guardia</em> comience a perseguir al jugador despu√©s de que se entere de que el jugador est√° tocando el objeto <em>Looker</em> .  En la funci√≥n <strong>Inicio</strong> , debemos establecer el valor de la variable <em>navmesh en el</em> componente <em>NavMesh Agent del</em> objeto: <br><br><pre> <code class="cs hljs">navmesh = GetComponent&lt;NavMeshAgent&gt;();</code> </pre> <br>  Luego, en la funci√≥n <em>Actualizar</em> , agregamos una sola l√≠nea de c√≥digo: <br><br><pre> <code class="cs hljs">navmesh.destination = player.transform.position;</code> </pre> <br>  Esta l√≠nea establece el destino para el objeto <em>Guard</em> .  En nuestro caso, tomar√° la posici√≥n actual del objeto <em>Player</em> y se mover√° a este punto.  Despu√©s de la operaci√≥n, el objeto perseguir√° constantemente al jugador.  La pregunta es, ¬øc√≥mo se realiza el proceso de respuesta?  No se codificar√° en el script <em>Guard</em> , sino en el script <em>Looker</em> .  Antes de pasar a la secuencia de comandos Looker, mire la Figura 31 para verificar su c√≥digo de secuencia de comandos <em>Guard</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/412/a11/dfb412a11448f070d31932d6c9e4c6c1.jpg"></div><br>  <i>Figura 31: el gui√≥n de <em>Guardia</em> terminado.</i> <br><br>  Inside <em>Looker,</em> nuevamente necesitamos declarar las siguientes variables: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject guard; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> reset = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> movingDown;</code> </pre> <br>  Despu√©s de eso, comentamos la funci√≥n de <em>Inicio</em> , que no necesitamos en este script.  Pasemos a la funci√≥n <em>Actualizar</em> y agreguemos el siguiente c√≥digo: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (movingDown == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) transform.position -= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> transform.position += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.position.z &gt; <span class="hljs-number"><span class="hljs-number">10</span></span>) movingDown = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (transform.position.z &lt; <span class="hljs-number"><span class="hljs-number">-10</span></span>) movingDown = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; reset -= Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reset &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { guard.GetComponent&lt;Guard&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; GetComponent&lt;SphereCollider&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  Aqu√≠ es donde tienen lugar las principales acciones del proyecto, as√≠ que analicemos el c√≥digo.  En primer lugar, dependiendo del valor de la variable booleana <strong>movingDown</strong> , el objeto al que se adjunta este script se mover√° hacia arriba o hacia abajo.  Tan pronto como llegue a cierto punto, cambiar√° de direcci√≥n.  A continuaci√≥n, <em>Looker</em> reducir√° el valor de reinicio en funci√≥n del tiempo real.  Tan pronto como el temporizador sea menor que cero, tomar√° el gui√≥n de <em>Guard del</em> objeto <em>Guard</em> y lo desactivar√°, despu√©s de lo cual el objeto <em>Guard</em> comenzar√° a moverse a la √∫ltima posici√≥n conocida del jugador hasta este momento, y luego se detendr√°.  <em>Looker</em> tambi√©n vuelve a encender su colisionador para que todo el proceso pueda comenzar de nuevo.  Ahora nuestro script se ve as√≠: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac9/dfc/7ec/ac9dfc7ec347c3422151e55b43682c3e.jpg"></div><br>  <i>Figura 32: Script de <em>Looker</em> .</i> <br><br>  Hablando de colisionadores: es hora de crear un c√≥digo de conflicto que restablezca el temporizador <em>Looker</em> e incluya el script <em>Guard</em> .  En la funci√≥n <em>Actualizar</em> , cree el siguiente c√≥digo: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collision collision</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (collision.gameObject.tag == <span class="hljs-string"><span class="hljs-string">"Player"</span></span>) { guard.GetComponent&lt;Guard&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; reset = <span class="hljs-number"><span class="hljs-number">5</span></span>; GetComponent&lt;SphereCollider&gt;().enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  <em>OnCollisionEnter</em> Unity lo reconoce autom√°ticamente como un c√≥digo de colisi√≥n y, por lo tanto, lo ejecuta cuando se produce una colisi√≥n con otro objeto.  En nuestro caso, primero verifica si el objeto en colisi√≥n tiene una etiqueta <em>Player</em> .  Si no, ignora el resto del c√≥digo.  De lo contrario, activa la secuencia de comandos <em>Guard</em> , establece el temporizador de <em>reinicio</em> en 5 (es decir, cinco segundos) y desactiva su colisionador para que el jugador pueda moverse a trav√©s del objeto y no quedar atrapado accidentalmente en el objeto <em>Looker</em> .  La funci√≥n se muestra en la Figura 33. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ad/11c/5ce/5ad11c5cee401f612207f76322f6afc1.jpg"></div><br>  <i>Figura 33: C√≥digo de colisi√≥n para</i> Looker. <br><br>  ¬°Eso es todo, el c√≥digo del proyecto est√° listo!  Puedes hacer un par de cosas m√°s antes de terminar el proyecto.  Guarde todo el trabajo y regrese a Unity. <br><br><h2>  Proyecto terminado </h2><br>  Para completar el proyecto, solo necesitamos adjuntar scripts a los objetos correspondientes y establecer varias variables.  Primero, vaya desde la ventana de <em>Navegaci√≥n</em> a la ventana del <em>Inspector</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b1/4a4/a83/5b14a4a8305887f6ce685516c0490724.jpg"></div><br>  <i>Figura 34: transici√≥n a la ventana del</i> Inspector. <br><br>  Despu√©s de eso, comencemos con el objeto <em>Player</em> .  Selecci√≥nelo en la ventana <em>Jerarqu√≠a</em> y luego, en la parte inferior de la ventana del <em>Inspector</em> , haga clic en el bot√≥n <em>Agregar componente</em> y agregue el script del <em>reproductor</em> .  Esto completa el objeto <em>Player</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d03/fb6/745/d03fb67452e138ccd4a2b3a838e53615.jpg"></div><br>  <i>Figura 35: Componente de script del</i> reproductor. <br><br>  A continuaci√≥n, seleccione el objeto <em>Guardia</em> .  Como antes, adjunte la secuencia de comandos <em>Guard</em> al objeto.  Esta vez necesitamos decirle al <em>Guardi√°n</em> qui√©n es el jugador.  Para hacer esto, arrastre el objeto <em>Player</em> de la <em>Jerarqu√≠a</em> al campo <em>Player</em> del componente de script <em>Guard</em> , como se muestra en la Figura 36. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fae/14a/6f7/fae14a6f76221641adcdeca2d5993f84.jpg"></div><br>  <i>Figura 36: Convertir el objeto del <em>jugador en</em> el valor del campo del <em>jugador</em> .</i> <br><br>  Tambi√©n necesitamos deshabilitar el script <em>Guard</em> .  En nuestro proyecto, <em>Guardia</em> perseguir√° al jugador despu√©s de encender su gui√≥n.  Este script de <em>Guardia</em> debe incluirse solo despu√©s de que el jugador toque el objeto <em>Looker</em> .  Todo lo que necesita hacer es desmarcar la casilla junto al texto <em>Guard (Script)</em> en el componente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed2/ee4/093/ed2ee40931919ee69fa013f005e4a8b5.jpg"></div><br>  <i>Figura 37: Deshabilitar la secuencia de comandos <em>Guard</em> .</i> <br><br>  Finalmente, pasemos al objeto <em>Looker</em> y <em>adjuntemos el</em> script <em>Looker</em> al mismo.  Esta vez, el objeto <em>Looker</em> necesitar√° un objeto <em>Guard</em> como el valor de su variable <em>Guard</em> .  As√≠ como asignamos el objeto <em>Player</em> a la variable <em>Player</em> del script <em>Guard</em> , haremos lo mismo con el objeto <em>Guard</em> y el script <em>Looker</em> .  Arrastre la <em>Guardia</em> desde la <em>Jerarqu√≠a</em> al campo <em>Guardia</em> de la secuencia de comandos <em>Looker</em> .  ¬°Y el proyecto est√° terminado!  Haga clic en el bot√≥n Reproducir en la parte superior del editor de Unity para probar su proyecto. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/272/4ed/d5b2724edf53e1bc2e2c06951ef38cdc.jpg"></div><br>  <i>Figura 38: Prueba de un proyecto.</i> <br><br>  Intenta mover el objeto <em>Player al</em> objeto <em>Looker</em> (¬°recuerda que el movimiento se realiza con flechas!).  Tenga en cuenta que despu√©s de esto, el objeto <em>Guard</em> comenzar√° a perseguir al jugador.  Continuar√° la b√∫squeda durante unos 5 segundos, despu√©s de lo cual se dar√° por vencido. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf2/4ba/729/bf24ba729b9457d0c038c4c50c5464a1.jpg"></div><br>  <i>Figura 39: Un proyecto completamente completado en acci√≥n.</i> <br><br><h2>  Conclusi√≥n </h2><br>  Esta IA es muy simple, pero puede expandirse f√°cilmente.  Supongamos que si imaginamos que el objeto <em>Looker</em> es una c√°mara y el guardia mira a trav√©s de √©l para encontrarte, ser√° l√≥gico darle al objeto <em>Guard</em> su propio par de ojos.  El jugador puede acercarse a las c√°maras, pero deben tener en cuenta los ojos del guardia.  Tambi√©n puedes combinar este proyecto con el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">concepto de encontrar el camino</a> : dale al guardia el camino que seguir√°, creando as√≠ un ambiente m√°s interesante para el jugador. <br><br>  Una IA tan simple se puede desarrollar de muchas maneras diferentes.  Es posible que no desee hacer nada de lo anterior y decida hacer algo por su cuenta.  Te aconsejo que experimentes, quiz√°s tengas la idea de un proyecto interesante, que vale la pena llevar al final. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419641/">https://habr.com/ru/post/es419641/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419625/index.html">Descripci√≥n general de mis caracter√≠sticas favoritas de PHP7</a></li>
<li><a href="../es419627/index.html">Estamos buscando oradores en Mosc√∫ Data Science Major</a></li>
<li><a href="../es419633/index.html">Ahora, Let's Encrypt conf√≠a en todas las principales listas de certificados ra√≠z</a></li>
<li><a href="../es419635/index.html">Lanzamiento de la versi√≥n estable de Dart 2.0 y Dart Web Platform</a></li>
<li><a href="../es419637/index.html">[Traducci√≥n] C√≥mo funciona Graal - Compilador JVM JVM de Java</a></li>
<li><a href="../es419643/index.html">Conferencia de Ingenier√≠a de Software EPAM de Minsk: Hazlo Real</a></li>
<li><a href="../es419647/index.html">Seminario ‚ÄúViernes negro en comercio electr√≥nico. Secretos de supervivencia, 16 de agosto, Mosc√∫</a></li>
<li><a href="../es419649/index.html">Un poco sobre los gatos, o qu√© CAT elegimos para los podcasts de sincronizaci√≥n</a></li>
<li><a href="../es419651/index.html">Ni GA ni YM. C√≥mo hicimos nuestro propio clickstream</a></li>
<li><a href="../es419653/index.html">C√≥mo hacer b√∫squedas de usuarios en GitHub sin React + RxJS 6 + Recompose</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>