<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💌 🍩 🧛🏿 Containerbasierte Integrationstests 🚔 👩‍❤️‍👩 ⛄️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Integrationstests bleiben ein wichtiger Bestandteil des CI / CD-Produktionszyklus, einschließlich der Entwicklung containerisierter Anwendungen. Integ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Containerbasierte Integrationstests</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/420385/">  Integrationstests bleiben ein wichtiger Bestandteil des CI / CD-Produktionszyklus, einschließlich der Entwicklung containerisierter Anwendungen.  Integrationstests sind in der Regel keine sehr langen, aber sehr ressourcenintensiven Workloads.  Lassen Sie uns sehen, wie Sie Integrationstesttechnologien und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">-tools</a> mit Container-Orchestrierungs-Tools (insbesondere mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Red Hat OpenShift</a> ) kombinieren können, um das Testen zu beschleunigen, die Dynamik zu erhöhen und Ressourcen effizienter zu nutzen. <br><br><img src="https://habrastorage.org/webt/bf/jr/xg/bfjrxg19l1dglmctj4n32tgjhvi.png" width="100%"><br><br>  Lassen Sie uns Integrations-BDD-Tests ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verhaltensgesteuerte Entwicklung</a> ) mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cucumber</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Protractor</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Selen</a> erstellen und diese mit Zalenium auf der OpenShift-Plattform ausführen. <br><a name="habracut"></a><br><h4>  BDD-Test </h4><br>  Bei der Entwicklung von Integrationstests ermöglicht BDD Business Analysten (BAs), Definitionen von Integrationstests zu erstellen, nicht nur von Programmierern.  Dank BDD kann der Entwicklungsprozess so organisiert werden, dass funktionale Anforderungen und Definitionen von Integrationstests gleichzeitig erstellt und gleichzeitig von Geschäftsanalysten erstellt werden. <br><br>  Dies ist viel besser als herkömmliche Ansätze, wenn Sie zuerst die Geschäftsfunktionalität der Anwendung bestimmen und dann die QS-Abteilung Integrationstests erstellt, wie in der folgenden Abbildung dargestellt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q0/aj/ky/q0ajkyoqaar_1lldzggi8mgvtdo.png"></div><br><br>  Und so sieht es bei der Verwendung von BDD aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ii/76/m5/ii76m5itsqbw4pjy8i68g1nsfci.png"></div><br><br>  Darüber hinaus benötigt in diesem neuen Schema jede Iteration normalerweise weniger Zeit. <br><br>  Geschäftsanalysten können Definitionen für Integrationstests erstellen, da BDD diese Tests in einer einfachen und verständlichen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gurkensprache beschreibt</a> , deren Hauptschlüsselwörter "Gegeben", "Wann" und "Dann" sind.  Jede Aussage in der Gurkensprache muss mit einem dieser Wörter beginnen. <br><br>  <b>Zum Beispiel:</b> <br><br>  <i>Wenn der Benutzer zur Anmeldeseite navigiert ist (vorausgesetzt, der Benutzer hat auf die Anmeldeseite zugegriffen)</i> <i><br><br></i>  <i>Wenn der Benutzer Benutzername und Passwort eingibt</i> <i><br><br></i>  <i>Wenn Benutzername und Passwort korrekt sind</i> <i><br><br></i>  <i>Dann meldet das System sie an (dann erlaubt ihm das System, sich anzumelden)</i> <br><br>  Eine beliebte Laufzeit, die Gurkentests interpretieren kann, ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gurke</a> .  Um Cucumber verwenden zu können, muss ein Entwickler bestimmte Funktionen implementieren, damit alle Gherkin-Anweisungen ausgeführt werden können.  Gurke hat Bindungen zu vielen Programmiersprachen.  Es wird empfohlen (aber nicht erforderlich), Tests in derselben Sprache wie die zu testende Anwendung zu verfassen. <br><br><h4>  Testing Technology Stack </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schauen</a> wir uns das Testverfahren am Beispiel der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TodoMVC-</a> Webanwendung bei der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Implementierung von AngularJS an</a> .  AngularJS ist ein beliebtes Framework zum Erstellen von Single-Page-Anwendungen (SPA). <br><br>  Da AngularJS JavaScript ist, verwenden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cumcumber.js</a> , eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gurkenbindung</a> an JavaScript. <br><br>  Um die Arbeit des Benutzers in einem Browser zu emulieren, verwenden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Selenium</a> .  Selen ist ein Prozess, der einen Browser starten und Aktionen von Benutzern auf Befehle wiedergeben kann, die über die API empfangen werden. <br><br>  Schließlich werden wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Protractor verwenden</a> , um die Nuancen der Emulation von in AngularJS geschriebenen SPA-Anwendungen zu berücksichtigen.  Winkelmesser kümmert sich um die Erwartung, dass die Ansichten innerhalb der Seite korrekt geladen werden. <br><br>  Unser Teststapel lautet also wie folgt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bs/q9/mz/bsq9mz84dc8hoy64wpoxsozpcuo.png"></div><br><br>  Der in diesem Diagramm dargestellte Prozess wird wie folgt beschrieben: <br><br><ul><li>  Wenn der Gurkentest ausgeführt wird, liest Gurke die Testdefinition aus der Gurkendatei. </li><li>  Dann wird der Testcode-Implementierungscode aufgerufen. </li><li>  Der Implementierungscode für das Testskript verwendet den Winkelmesser, um Aktionen auf einer Webseite auszuführen </li><li>  In diesem Fall stellt Protractor eine Verbindung zum Protractor-Server her und gibt über die API Befehle an Selenium aus. </li><li>  Selenium führt diese Befehle in einer Browserinstanz aus. </li><li>  Der Browser stellt bei Bedarf eine Verbindung zu den Webservern her.  In unserem Beispiel wird die SPA-Anwendung verwendet, daher tritt eine solche Verbindung nicht auf, da die Anwendung bereits beim Laden vom Server der ersten Seite geladen wurde. </li></ul><br>  Die Bereitstellung eines solchen Stapels in einer nicht containerisierten Infrastruktur ist nicht einfach.  Und das nicht nur wegen der Vielzahl der verwendeten Prozesse und Frameworks, sondern auch, weil es immer schwierig war, einen Browser auf einem Server ohne Monitor zu starten.  Glücklicherweise kann in einer Containerwelt all dies automatisiert werden. <br><br><h4>  Integrationstestfarm </h4><br>  Unternehmenswebanwendungen müssen für verschiedene Kombinationen von Client-Betriebssystem und Browser getestet werden.  Normalerweise ist dies auf bestimmte grundlegende Optionen beschränkt, die die Situation auf den Computern der Endbenutzer der Anwendung widerspiegeln.  Aber selbst in diesem Fall sinkt die Anzahl der Testkonfigurationen für jede Anwendung selten unter ein halbes Dutzend. <br><br>  Wenn Sie für jede Testkonfiguration konsistent einen Stapel bereitstellen und die entsprechenden Tests darauf ausführen, ist dies zeit- und ressourcenintensiv. <br><br>  Idealerweise möchte ich Tests parallel durchführen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Selenium-Grid</a> kann uns dabei helfen - eine Lösung, die den Selenium Hub-Anforderungsbroker und einen oder mehrere Knoten umfasst, auf denen diese Anforderungen ausgeführt werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/80/zz/vy/80zzvywd4ubhxzm05g6xgz0xr4a.png"></div><br><br>  Jeder Selenium-Knoten, der normalerweise auf einem separaten Server ausgeführt wird, kann für eine bestimmte Kombination aus Client-Betriebssystem und Browser konfiguriert werden (in Selenium werden diese und andere Merkmale des Knotens als Funktionen - Eigenschaften bezeichnet).  Gleichzeitig ist der Selenium Hub intelligent genug, um Anforderungen, die bestimmte Selenium-Eigenschaften erfordern, an Knoten mit diesen Eigenschaften zu senden. <br><br>  Selen-Grid-Cluster sind recht schwierig zu installieren und zu verwalten, und so sehr, dass Unternehmen, die verwandte Dienstleistungen anbieten, sogar auf dem Markt erschienen sind.  Insbesondere SauceLabs und BrowserStack gehören zu den Hauptakteuren. <br><br><h4>  Containerbasierte Integrationstests </h4><br>  Sehr oft möchte ich in der Lage sein, einen Selen-Grid-Cluster zu erstellen, der die für unsere Tests erforderlichen Selen-Eigenschaften liefert und die Tests selbst mit einem hohen Grad an Parallelisierung durchführt.  Nachdem der Test abgeschlossen ist, möchte ich diesen Cluster vollständig zerstören können.  Mit anderen Worten, um zu lernen, wie Anbieter von Integrationstestfarmen selbst arbeiten. <br><br>  Dieser Technologiebereich befindet sich noch in einem frühen Stadium der Entstehung. Ein vielversprechendes Open-Source-Projekt - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zalenium</a> - bietet jedoch einige <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unserer</a> Anforderungen. <br><br>  Zalenium verwendet einen modifizierten Hub, der bei Bedarf Knoten erstellen und diese zerstören kann, wenn sie nicht mehr benötigt werden.  Zalenium unterstützt derzeit nur Chrome- und Firefox-Browser auf der Linux-Plattform.  Mit dem Aufkommen von Windows-Knoten für Kubernetes wird möglicherweise Unterstützung für Explorer und Edge unter Windows angezeigt. <br><br>  Wenn Sie alles zusammenfügen, lautet der technologische Stapel wie folgt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ng/hv/17/nghv17wys2kzkn5e3kerp0qqn1o.png"></div><br><br>  Jedes Oval im Diagramm ist ein separater Pod in Kubernetes.  Die Pods des Testspielers und der Emulatoren sind kurzlebig und werden am Ende des Tests zerstört. <br><br><h4>  Durchführen von Integrationstests innerhalb der CI / CD-Pipeline </h4><br>  Erstellen wir eine einfache Pipeline in Jenkins, um zu zeigen, wie diese Art von Integrationstests in den Rest des Release-Management-Prozesses integriert werden kann.  Es sieht so aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uv/hr/et/uvhretpdr6iu5gwgcehi5cahf8e.png"></div><br><br>  Ihre Pipeline kann variieren, Sie haben jedoch weiterhin die Möglichkeit, die Integrationstestphase ohne nennenswerte Codeumgestaltung wiederzuverwenden. <br><br>  Da die meisten Herde kurzlebig sind, besteht eine der Aufgaben der Pipeline darin, Testergebnisse zu sammeln.  In Jenkins kann dies mithilfe der Archiv- und PublishHTML-Grundelemente erfolgen. <br><br>  Dies ist ein Beispiel für einen Bericht über die Testergebnisse (beachten Sie, dass die Tests in zwei Browsern ausgeführt wurden): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/jr/xg/bfjrxg19l1dglmctj4n32tgjhvi.png"></div><br><br><h4>  Fazit </h4><br>  Trotz der Komplexität der Organisation einer End-to-End-Integrationstestinfrastruktur vereinfacht der Ansatz „Infrastruktur als Code“ den Prozess.  Das Durchführen von Integrationstests auf verschiedenen Kombinationen von Betriebssystemen und Browsern erfordert viel Zeit und Ressourcen, aber Container-Orchestrierungs-Tools und kurzlebige Workloads helfen, dieses Problem zu lösen. <br><br>  Auch ohne ausgereifte Tools zur Organisation von containerorientierten Integrationstests können Integrationstests auf Basis von Containerplattformen bereits heute durchgeführt werden und den Container-Ansatz nutzen. <br><br>  Wenn Sie containerisierte Anwendungen entwickeln, versuchen Sie, diesen Ansatz in der CI / CD-Pipeline zu verwenden, und prüfen Sie, ob er die Integrationstests vereinfacht. <br><br>  <i>Beispielcode aus diesem Artikel finden Sie auf der GitHub-Website unter redhat-cop / container-pipelinesh.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de420385/">https://habr.com/ru/post/de420385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de420373/index.html">Fast OCR, um ein VPNBook-Passwort zu erhalten. PHP + Mikrotik</a></li>
<li><a href="../de420375/index.html">Lerne OpenGL. Lektion 5.8 - Blüte</a></li>
<li><a href="../de420377/index.html">Wie wir Videoanrufe gestartet haben</a></li>
<li><a href="../de420381/index.html">Warum reicht es aus, neuronale Netze als Black Box zu betrachten?</a></li>
<li><a href="../de420383/index.html">"Yandex.Money interessiert Sie nicht für die Eingabe Ihrer Bewerbung."</a></li>
<li><a href="../de420387/index.html">Drei intelligente Zauberwürfel: Xiaomi, Roobo und GoCube</a></li>
<li><a href="../de420389/index.html">Implementierung des "Observer-Subscriber" -Musters mithilfe von JNI-Rückrufen in Android (NDK)</a></li>
<li><a href="../de420391/index.html">IT-Gehälter Mitte 2018</a></li>
<li><a href="../de420393/index.html">PHP, YII2 und die Bildung großer Excel-Dateien</a></li>
<li><a href="../de420395/index.html">"Kostenlose" Tabletten für Gefangene - überhaupt nicht kostenlos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>