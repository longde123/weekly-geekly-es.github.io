<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦗 🎌 🚵🏽 Pohon multibahasa dalam Yii2 sebagai contoh membuat modul menu 👧🏿 😸 👩🏿‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entri 


 Banyak pengembang web pemula dihadapkan dengan kebutuhan untuk membuat menu, direktori atau kategori untuk proyek Yii2 mereka, yang akan mem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pohon multibahasa dalam Yii2 sebagai contoh membuat modul menu</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426625/"><h2>  Entri </h2><br><p>  Banyak pengembang web pemula dihadapkan dengan kebutuhan untuk membuat menu, direktori atau kategori untuk proyek Yii2 mereka, yang akan memiliki struktur hierarkis, tetapi pada saat yang sama mendukung multibahasa.  Tugasnya cukup sederhana, tetapi tidak terlalu jelas dalam kerangka kerja kerangka ini.  Ada sejumlah besar ekstensi yang sudah jadi untuk membuat struktur pohon (menu, direktori, dll.), Tetapi agak sulit untuk menemukan solusi yang akan mendukung pekerjaan penuh dengan beberapa bahasa.  Selain itu, kami tidak berbicara tentang menerjemahkan antarmuka menggunakan alat kerangka kerja standar, tetapi tentang menyimpan data dalam database dalam beberapa bahasa.  Juga cukup sulit untuk menemukan widget yang nyaman dan berfungsi penuh untuk mengelola pohon, yang juga bisa berfungsi dengan konten multibahasa tanpa manipulasi kode yang rumit. </p><br><p> Saya ingin berbagi resep tentang cara membuat modul serupa menggunakan contoh implementasi modul menu.  Sebagai contoh, saya akan menggunakan templat aplikasi Yii2 App Basic, tetapi Anda dapat menyesuaikan semuanya dengan templat Anda jika berbeda dari yang dasar. </p><a name="habracut"></a><br><h2>  Persiapan </h2><br><p>  Untuk menyelesaikan tugas ini, kita membutuhkan beberapa ekstensi yang luar biasa, yaitu: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Daftar kedekatan Yii2">Daftar Adjacency</a> - untuk menyimpan struktur pohon <br>  menu dalam database; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Widget Bootstrap Treeview untuk Yii2">Yii2 Bootstrap Treeview</a> - widget <br>  untuk tampilan menu yang nyaman dalam bentuk pohon; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Perilaku yang Dapat Diterjemahkan Yii2">Perilaku yang Dapat Diterjemahkan</a> - perilaku untuk <br>  dukungan multibahasa dalam model; </li></ul><br><p>  Pasang data ekstensi melalui komposer: </p><br><pre><code class="hljs powershell">composer require paulzi/yii2<span class="hljs-literal"><span class="hljs-literal">-adjacency</span></span><span class="hljs-literal"><span class="hljs-literal">-list</span></span> composer require execut/yii2<span class="hljs-literal"><span class="hljs-literal">-widget</span></span><span class="hljs-literal"><span class="hljs-literal">-bootstraptreeview</span></span> composer require creocoder/yii2<span class="hljs-literal"><span class="hljs-literal">-translateable</span></span></code> </pre> <br><p>  Untuk mengimplementasikan menu sebagai modul, gunakan generator Gii (atau secara manual) buat modul menu baru dan sambungkan dalam pengaturan aplikasi. </p><br><p>  Proyek juga harus memiliki mekanisme alih bahasa yang telah dikonfigurasi.  Saya lebih suka menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Codemix Yii2-localeurls">ekstensi</a> ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Codemix Yii2-localeurls">untuk Yii2</a> . </p><br><h2>  Pembuatan model </h2><br><p>  Untuk menyimpan menu (atau entitas lain yang memiliki multibahasa) dalam database, kita perlu membuat dua tabel.  Sebenarnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Dukungan untuk multibahasa dalam proyek web - opsi implementasi dasar">metode yang berbeda</a> dapat digunakan untuk menyimpan data multibahasa, tapi saya suka opsi dengan dua tabel, yang satu menyimpan esensi itu sendiri, dan yang kedua - variasi bahasanya, lebih dari yang lain.  Lebih mudah menggunakan migrasi untuk membuat tabel.  Berikut adalah contoh dari migrasi semacam itu: </p><br><div class="spoiler">  <b class="spoiler_title">m180819_083502_menu_init.php</b> <div class="spoiler_text"><pre> <code class="hljs powershell">&lt;?php use yii\db\Schema; use yii\db\Migration; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">m180819_083502_menu_init</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Migration</span></span></span></span> { public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db = <span class="hljs-string"><span class="hljs-string">'db'</span></span>; parent::init(); } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safeUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-variable"><span class="hljs-variable">$tableOptions</span></span> = <span class="hljs-string"><span class="hljs-string">'ENGINE=InnoDB'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createTable(<span class="hljs-string"><span class="hljs-string">'{{%menu}}'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'id'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">primaryKey</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>), <span class="hljs-string"><span class="hljs-string">'parent_id'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">eger</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">null</span></span>()-&gt;<span class="hljs-type"><span class="hljs-type">defaultValue</span></span>(<span class="hljs-type"><span class="hljs-type">null</span></span>), <span class="hljs-string"><span class="hljs-string">'link'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>()-&gt;<span class="hljs-type"><span class="hljs-type">defaultValue</span></span>(<span class="hljs-string"><span class="hljs-string">'#'</span></span>), <span class="hljs-string"><span class="hljs-string">'link_attributes'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">text</span></span>()-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>(), <span class="hljs-string"><span class="hljs-string">'icon_class'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>(), <span class="hljs-string"><span class="hljs-string">'sort'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">eger</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>()-&gt;<span class="hljs-type"><span class="hljs-type">defaultValue</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">'status'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">tinyInteger</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>()-&gt;<span class="hljs-type"><span class="hljs-type">defaultValue</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>), ], <span class="hljs-variable"><span class="hljs-variable">$tableOptions</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createIndex(<span class="hljs-string"><span class="hljs-string">'parent_sort'</span></span>, <span class="hljs-string"><span class="hljs-string">'{{%menu}}'</span></span>, [<span class="hljs-string"><span class="hljs-string">'parent_id'</span></span>,<span class="hljs-string"><span class="hljs-string">'sort'</span></span>], false); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createTable(<span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'owner_id'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">int</span></span><span class="hljs-type"><span class="hljs-type">eger</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>(), <span class="hljs-string"><span class="hljs-string">'language'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>(), <span class="hljs-string"><span class="hljs-string">'name'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>)-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>(), <span class="hljs-string"><span class="hljs-string">'title'</span></span>=&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">text</span></span>()-&gt;<span class="hljs-type"><span class="hljs-type">notNull</span></span>(), ], <span class="hljs-variable"><span class="hljs-variable">$tableOptions</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addPrimaryKey(<span class="hljs-string"><span class="hljs-string">'pk_on_menu_lang'</span></span>, <span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>, [<span class="hljs-string"><span class="hljs-string">'owner_id'</span></span>,<span class="hljs-string"><span class="hljs-string">'language'</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addForeignKey( <span class="hljs-string"><span class="hljs-string">'fk_menu_lang_owner_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>, <span class="hljs-string"><span class="hljs-string">'owner_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'{{%menu}}'</span></span>, <span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'CASCADE'</span></span>, <span class="hljs-string"><span class="hljs-string">'CASCADE'</span></span> ); // Insert sample <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;batchInsert( <span class="hljs-string"><span class="hljs-string">'{{%menu}}'</span></span>, [<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-string"><span class="hljs-string">'parent_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'link'</span></span>, <span class="hljs-string"><span class="hljs-string">'link_attributes'</span></span>, <span class="hljs-string"><span class="hljs-string">'icon_class'</span></span>, <span class="hljs-string"><span class="hljs-string">'sort'</span></span>, <span class="hljs-string"><span class="hljs-string">'status'</span></span>], [ [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'parent_id'</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">null</span></span>, <span class="hljs-string"><span class="hljs-string">'link'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'#'</span></span>, <span class="hljs-string"><span class="hljs-string">'link_attributes'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'icon_class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'sort'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">'status'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'0'</span></span>, ], [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">'parent_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'link'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-string"><span class="hljs-string">'link_attributes'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'icon_class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'fa fa-home'</span></span>, <span class="hljs-string"><span class="hljs-string">'sort'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">'status'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, ], ] ); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;batchInsert( <span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>, [<span class="hljs-string"><span class="hljs-string">'owner_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'language'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span>], [ [ <span class="hljs-string"><span class="hljs-string">'owner_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'language'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, ], [ <span class="hljs-string"><span class="hljs-string">'owner_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'1'</span></span>, <span class="hljs-string"><span class="hljs-string">'language'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'en'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Main menu'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, ], [ <span class="hljs-string"><span class="hljs-string">'owner_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">'language'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'  '</span></span>, ], [ <span class="hljs-string"><span class="hljs-string">'owner_id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-string"><span class="hljs-string">'language'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'en'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Home'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Site homepage'</span></span>, ], ] ); } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safeDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;truncateTable(<span class="hljs-string"><span class="hljs-string">'{{%menu}} CASCADE'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dropForeignKey(<span class="hljs-string"><span class="hljs-string">'fk_menu_lang_owner_id'</span></span>, <span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dropTable(<span class="hljs-string"><span class="hljs-string">'{{%menu}}'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dropPrimaryKey(<span class="hljs-string"><span class="hljs-string">'pk_on_menu_lang'</span></span>, <span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dropTable(<span class="hljs-string"><span class="hljs-string">'{{%menu_lang}}'</span></span>); } }</code> </pre> </div></div><br><p>  Letakkan file migrasi ini di folder / migrasi proyek kami, dan <br>  jalankan perintah di konsol: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">php</span></span> yii migrate</code> </pre> <br><p>  Setelah kami membuat tabel yang diperlukan dan menambahkan menu baru ke mereka menggunakan migrasi, kita perlu membuat model.  Karena multibahasa dan pohon dapat ditemukan tidak hanya di menu, tetapi juga di entitas lain (misalnya, halaman situs) dalam proyek, saya menyarankan agar metode yang menerapkan mekanisme multibahasa dan organisasi pohon dimasukkan ke dalam sifat yang terpisah sehingga kita dapat dengan mudah menggunakannya nanti mereka dalam model lain tanpa duplikasi kode.  Buat folder ciri di root aplikasi (jika belum ada di sana) dan letakkan dua file di sana: </p><br><div class="spoiler">  <b class="spoiler_title">LangTrait.php</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">namespace</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">traits</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">Yii</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">behaviors</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">SluggableBehavior</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">creocoder</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">translateable</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">TranslateableBehavior</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">trait</span></span></span><span class="php"> LangTrait { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">langClass</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::class . </span><span class="hljs-string"><span class="php"><span class="hljs-string">'Lang'</span></span></span><span class="php">; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">langTableName</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::tableName() . </span><span class="hljs-string"><span class="php"><span class="hljs-string">'_lang'</span></span></span><span class="php">; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">langBehaviors</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">($translationAttributes)</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'translateable'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'class'</span></span></span><span class="php"> =&gt; TranslateableBehavior::class, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'translationAttributes'</span></span></span><span class="php"> =&gt; $translationAttributes, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'translationRelation'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'translations'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'translationLanguageAttribute'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'language'</span></span></span><span class="php">, ], ]; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">transactions</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> [ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::SCENARIO_DEFAULT =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::OP_INSERT | </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::OP_UPDATE, ]; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">getLang</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;hasOne(</span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::langClass(), [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'owner_id'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">])-&gt;where([</span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::langTableName() . </span><span class="hljs-string"><span class="php"><span class="hljs-string">'.language'</span></span></span><span class="php"> =&gt; Yii::$app-&gt;language]); } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">getTranslations</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;hasMany(</span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::langClass(), [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'owner_id'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">]); } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">TreeTrait.php</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">namespace</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">traits</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">Yii</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">helpers</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">Html</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">paulzi</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">adjacencyList</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">AdjacencyListBehavior</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">trait</span></span></span><span class="php"> TreeTrait { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">private</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">getQueryClass</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::class . </span><span class="hljs-string"><span class="php"><span class="hljs-string">'Query'</span></span></span><span class="php">; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">treeBehaviors</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'tree'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'class'</span></span></span><span class="php"> =&gt; AdjacencyListBehavior::class, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'parentAttribute'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'parent_id'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'sortable'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'step'</span></span></span><span class="php"> =&gt; </span><span class="hljs-number"><span class="php"><span class="hljs-number">10</span></span></span><span class="php">, ], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'checkLoop'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">false</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'parentsJoinLevels'</span></span></span><span class="php"> =&gt; </span><span class="hljs-number"><span class="php"><span class="hljs-number">5</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'childrenJoinLevels'</span></span></span><span class="php"> =&gt; </span><span class="hljs-number"><span class="php"><span class="hljs-number">5</span></span></span><span class="php">, ], ]; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">find</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ $queryClass = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::getQueryClass(); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">new</span></span></span><span class="php"> $queryClass(get_called_class()); } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">listTree</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">($node = null, $level = </span></span></span><span class="hljs-number"><span class="php"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="php"><span class="hljs-function"><span class="hljs-params">, $nameAttribute = </span></span></span><span class="hljs-string"><span class="php"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'name'</span></span></span></span></span><span class="php"><span class="hljs-function"><span class="hljs-params">, $prefix = </span></span></span><span class="hljs-string"><span class="php"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'--&gt;'</span></span></span></span></span><span class="php"><span class="hljs-function"><span class="hljs-params">)</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ $result = []; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> (!$node) { $node = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::find()-&gt;roots()-&gt;one()-&gt;populateTree(); } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> ($node-&gt;isRoot()) { $result[$node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">]] = mb_strtoupper($node[$nameAttribute ?: </span><span class="hljs-string"><span class="php"><span class="hljs-string">'slug'</span></span></span><span class="php">]); } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> ($node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'children'</span></span></span><span class="php">]) { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">foreach</span></span></span><span class="php"> ($node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'children'</span></span></span><span class="php">] </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">as</span></span></span><span class="php"> $child) { $result[$child[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">]] = str_repeat($prefix, $level) . $child[$nameAttribute]; $result = $result + </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::listTree($child, $level + </span><span class="hljs-number"><span class="php"><span class="hljs-number">1</span></span></span><span class="php">, $nameAttribute); } } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> $result; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">treeViewData</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">($node = null)</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> ($node === </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">null</span></span></span><span class="php">) { $node = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::find()-&gt;roots()-&gt;one()-&gt;populateTree(); } $result = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">null</span></span></span><span class="php">; $items = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">null</span></span></span><span class="php">; $children = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">null</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> ($node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'children'</span></span></span><span class="php">]) { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">foreach</span></span></span><span class="php"> ($node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'children'</span></span></span><span class="php">] </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">as</span></span></span><span class="php"> $child) { $items[] = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">self</span></span></span><span class="php">::treeViewData($child); } $children = call_user_func_array(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'array_merge'</span></span></span><span class="php">, $items); } $result[] = [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'text'</span></span></span><span class="php"> =&gt; Html::a($node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'lang'</span></span></span><span class="php">][</span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php">] ?: $node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">], [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'update'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php"> =&gt; $node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">]], [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'title'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">' '</span></span></span><span class="php">)]), </span><span class="hljs-string"><span class="php"><span class="hljs-string">'tags'</span></span></span><span class="php"> =&gt; [ Html::a( </span><span class="hljs-string"><span class="php"><span class="hljs-string">'&lt;i class="glyphicon glyphicon-arrow-down"&gt;&lt;/i&gt;'</span></span></span><span class="php">, [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'move-down'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php"> =&gt; $node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">]], [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'title'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">' '</span></span></span><span class="php">)] ), Html::a( </span><span class="hljs-string"><span class="php"><span class="hljs-string">'&lt;i class="glyphicon glyphicon-arrow-up"&gt;&lt;/i&gt;'</span></span></span><span class="php">, [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'move-up'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php"> =&gt; $node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">]], [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'title'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">' '</span></span></span><span class="php">)] ) ], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'backColor'</span></span></span><span class="php"> =&gt; $node[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'status'</span></span></span><span class="php">] == </span><span class="hljs-number"><span class="php"><span class="hljs-number">0</span></span></span><span class="php"> ? </span><span class="hljs-string"><span class="php"><span class="hljs-string">'#ccc'</span></span></span><span class="php"> : </span><span class="hljs-string"><span class="php"><span class="hljs-string">'#fff'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'selectable'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">false</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'nodes'</span></span></span><span class="php"> =&gt; $children, ]; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> $result; } }</span></span></code> </pre> </div></div><br><p>  Sekarang kita akan secara langsung membuat model sendiri untuk bekerja dengan menu, di mana kita menghubungkan ciri-ciri pohon dan multibahasa.  Kami menempatkan model di / modules / menu / models: </p><br><div class="spoiler">  <b class="spoiler_title">Menu.php</b> <div class="spoiler_text"><pre> <code class="hljs markdown"><span class="xml"><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">namespace</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">app</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">modules</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">menu</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">models</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">Yii</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-class"><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class"> </span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-title">Menu</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class"> </span></span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class"> \</span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-title">yii</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class">\</span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-title">db</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class">\</span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-title">ActiveRecord</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class"> </span></span></span></span><span class="xml"><span class="php">{ </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> \</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">app</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">traits</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">TreeTrait</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> \</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">app</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">traits</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">LangTrait</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="php"> STATUS_ACTIVE = </span></span><span class="hljs-number"><span class="xml"><span class="php"><span class="hljs-number">1</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">const</span></span></span></span><span class="xml"><span class="php"> STATUS_INACTIVE = </span></span><span class="hljs-number"><span class="xml"><span class="php"><span class="hljs-number">0</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">public</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-function"><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-function"> </span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-function"><span class="hljs-title">behaviors</span></span></span></span></span><span class="hljs-params"><span class="xml"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-function"> </span></span></span></span><span class="xml"><span class="php">{ $behaviors = []; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">return</span></span></span></span><span class="xml"><span class="php"> array_merge( $behaviors, </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">$this</span></span></span></span><span class="xml"><span class="php">-&gt;</span></span></span></span>treeBehaviors(), $this-&gt;langBehaviors([<span class="hljs-string"><span class="hljs-string">'name', 'title'</span></span>]) ); } public static function tableName() { return 'menu'; } public function rules() { return [<span class="hljs-string"><span class="hljs-string"> [['parent_id', 'sort', 'status'</span></span>], 'integer'], [<span class="hljs-string"><span class="hljs-string">['link', 'icon_class'</span></span>], 'string', 'max' =&gt; 255], [<span class="hljs-string"><span class="hljs-string">['link_attributes'</span></span>], 'string'], [<span class="hljs-string"><span class="hljs-string">['link'</span></span>], 'default', 'value' =&gt; '#'], [<span class="hljs-string"><span class="hljs-string">['link_attributes', 'icon_class'</span></span>], 'default', 'value' =&gt; ''], [<span class="hljs-string"><span class="hljs-string">['parent_id'</span></span>], 'exist', 'skipOnError' =&gt; true, 'targetClass' =&gt; self::class, 'targetAttribute' =&gt; [<span class="hljs-string"><span class="hljs-string">'parent_id' =&gt; 'id'</span></span>]], ]; } public function attributeLabels() { return [<span class="hljs-string"><span class="hljs-string"> 'id' =&gt; Yii::t('app', 'ID'), 'parent_id' =&gt; Yii::t('app', ''), 'link' =&gt; Yii::t('app', ''), 'link_attributes' =&gt; Yii::t('app', '  (JSON )'), 'icon_class' =&gt; Yii::t('app', ' '), 'sort' =&gt; Yii::t('app', ''), 'status' =&gt; Yii::t('app', ''), </span></span>]; } public static function menuItems($node = null) { if ($node === null) { $node = self::find()-&gt;roots()-&gt;one()-&gt;populateTree(); } $result = null; $items = null; $children = null; if ($node[<span class="hljs-string"><span class="hljs-string">'children'</span></span>]) { foreach ($node[<span class="hljs-string"><span class="hljs-string">'children'</span></span>] as $child) { $items[<span class="hljs-string"></span><span class="hljs-string"></span>] = self::menuItems($child); } $children = call<span class="hljs-emphasis"><span class="hljs-emphasis">_user_</span></span>func<span class="hljs-emphasis"><span class="hljs-emphasis">_array('array_</span></span>merge', $items); } $result[<span class="hljs-string"></span><span class="hljs-string"></span>] = [<span class="hljs-string"><span class="hljs-string"> 'label' =&gt; ($node['icon_class'</span></span>] ? '<span class="xml"><span class="php"><span class="xml"><span class="php">&lt;i </span></span><span class="hljs-class"><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class">="' . $</span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-title">node</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class">['</span></span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-class"><span class="hljs-title">icon_class</span></span></span></span></span><span class="xml"><span class="php"><span class="hljs-class">'] . '"&gt;</span></span></span></span></span></span><span class="xml"><span class="php"><span class="xml"><span class="php">&lt;/i&gt;</span></span></span></span> ' . ($node[<span class="hljs-string"><span class="hljs-string">'lang'</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'name'</span></span>] ?: $node[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]) : ($node[<span class="hljs-string"><span class="hljs-string">'lang'</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'name'</span></span>] ?: $node[<span class="hljs-string"><span class="hljs-string">'id'</span></span>] )), 'encode' =&gt; ($node[<span class="hljs-string"><span class="hljs-string">'icon_class'</span></span>] ? false : true), 'url' =&gt; [<span class="hljs-string"><span class="hljs-string">$node['link'</span></span>], 'language' =&gt; Yii::$app-&gt;language], 'active' =&gt; $node[<span class="hljs-string"><span class="hljs-string">'link'</span></span>] == Yii::$app-&gt;request-&gt;url ? true : false, 'linkOptions' =&gt; ($node[<span class="hljs-string"><span class="hljs-string">'link_attributes'</span></span>] ? array<span class="hljs-emphasis"><span class="hljs-emphasis">_merge(json_</span></span>decode($node[<span class="hljs-string"><span class="hljs-string">'link_attributes'</span></span>], true), [<span class="hljs-string"><span class="hljs-string">'title' =&gt; ($node['lang'</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'title'</span></span>] ?: $node[<span class="hljs-string"><span class="hljs-string">'lang'</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'name'</span></span>])]) : [<span class="hljs-string"><span class="hljs-string">'title' =&gt; ($node['lang'</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'title'</span></span>] ?: $node[<span class="hljs-string"><span class="hljs-string">'lang'</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'name'</span></span>])]), 'items' =&gt; $children, ]; return $result; } }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">MenuLang.php</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">namespace</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">modules</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">menu</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">models</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">Yii</span></span></span><span class="php">; </span><span class="hljs-class"><span class="hljs-keyword"><span class="php"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">MenuLang</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="php"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="php"><span class="hljs-class"> \</span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">yii</span></span></span></span><span class="php"><span class="hljs-class">\</span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">db</span></span></span></span><span class="php"><span class="hljs-class">\</span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">ActiveRecord</span></span></span></span><span class="php"><span class="hljs-class"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">static</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">tableName</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">'menu_lang'</span></span></span><span class="php">; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">rules</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> [ [[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php">], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'required'</span></span></span><span class="php">], [[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'title'</span></span></span><span class="php">], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'string'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'max'</span></span></span><span class="php"> =&gt; </span><span class="hljs-number"><span class="php"><span class="hljs-number">255</span></span></span><span class="php">], ]; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">attributeLabels</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'owner_id'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">''</span></span></span><span class="php">), </span><span class="hljs-string"><span class="php"><span class="hljs-string">'language'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">''</span></span></span><span class="php">), </span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">''</span></span></span><span class="php">), </span><span class="hljs-string"><span class="php"><span class="hljs-string">'title'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">' '</span></span></span><span class="php">), ]; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">getOwner</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;hasOne(Menu::class, [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'owner_id'</span></span></span><span class="php">]); } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">MenuQuery.php</b> <div class="spoiler_text"><pre> <code class="hljs scala">&lt;?php namespace app\modules\menu\models; use paulzi\adjacencyList\<span class="hljs-type"><span class="hljs-type">AdjacencyListQueryTrait</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuQuery</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">\yii\db\ActiveQuery</span></span></span><span class="hljs-class"> </span></span>{ use <span class="hljs-type"><span class="hljs-type">AdjacencyListQueryTrait</span></span>; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">MenuSearch.php</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">namespace</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">modules</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">menu</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">models</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">Yii</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">base</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">Model</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">data</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">ActiveDataProvider</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">modules</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">menu</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">models</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">Menu</span></span></span><span class="php">; </span><span class="hljs-class"><span class="hljs-keyword"><span class="php"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">MenuSearch</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="php"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">Menu</span></span></span></span><span class="php"><span class="hljs-class"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> $name; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">rules</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> [ [[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'parent_id'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'sort'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'status'</span></span></span><span class="php">], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'integer'</span></span></span><span class="php">], [[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'link'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'link_attributes'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'icon_class'</span></span></span><span class="php">], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'safe'</span></span></span><span class="php">], [[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php">], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'safe'</span></span></span><span class="php">], ]; } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">scenarios</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> Model::scenarios(); } </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="php"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="php"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-function"><span class="hljs-title">search</span></span></span></span><span class="hljs-params"><span class="php"><span class="hljs-function"><span class="hljs-params">($params)</span></span></span></span><span class="php"><span class="hljs-function"> </span></span></span><span class="php">{ $query = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">parent</span></span></span><span class="php">::find()-&gt;joinWith([</span><span class="hljs-string"><span class="php"><span class="hljs-string">'lang'</span></span></span><span class="php">]); $dataProvider = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">new</span></span></span><span class="php"> ActiveDataProvider([ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'query'</span></span></span><span class="php"> =&gt; $query, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'sort'</span></span></span><span class="php"> =&gt; [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'defaultOrder'</span></span></span><span class="php"> =&gt; [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'sort'</span></span></span><span class="php"> =&gt; SORT_ASC]] ]); $dataProvider-&gt;sort-&gt;attributes[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php">] = [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'asc'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'menu_lang.name'</span></span></span><span class="php"> =&gt; SORT_ASC, ], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'desc'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'menu_lang.name'</span></span></span><span class="php"> =&gt; SORT_DESC, ], ]; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;load($params); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">if</span></span></span><span class="php"> (!</span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;validate()) { </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> $dataProvider; } $query-&gt;andFilterWhere([ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;id, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'parent_id'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;parent_id, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'sort'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;sort, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'status'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;status, ]); $query-&gt;andFilterWhere([</span><span class="hljs-string"><span class="php"><span class="hljs-string">'like'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'link'</span></span></span><span class="php">, </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;link]); $query-&gt;andFilterWhere([</span><span class="hljs-string"><span class="php"><span class="hljs-string">'like'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'link_attributes'</span></span></span><span class="php">, </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;link_attributes]); $query-&gt;andFilterWhere([</span><span class="hljs-string"><span class="php"><span class="hljs-string">'like'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'icon_class'</span></span></span><span class="php">, </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;icon_class]); $query-&gt;andFilterWhere([</span><span class="hljs-string"><span class="php"><span class="hljs-string">'like'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'name'</span></span></span><span class="php">, </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;name]); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">return</span></span></span><span class="php"> $dataProvider; } }</span></span></code> </pre> </div></div><br><h2>  Membuat pengontrol </h2><br><p>  Untuk operasi CRUD pada pohon multibahasa, kita membutuhkan pengontrol.  Untuk menyederhanakan kehidupan kita di masa depan, kita akan membuat satu pengendali dasar di mana akan ada semua tindakan yang diperlukan, dan untuk entitas yang berbeda, apakah itu menu, atau direktori, atau halaman, kita akan mewarisi darinya. </p><br><p>  Kelas-kelas dari proyek kami yang akan kami gunakan sebagai kelas dasar akan ditempatkan di folder / base.  Buat file /base/controllers/AdminLangTreeController.php.  Pengontrol ini akan menjadi dasar untuk CRUD dari semua entitas di mana pohon dan multibahasa diimplementasikan: </p><br><div class="spoiler">  <b class="spoiler_title">AdminLangTreeController.php</b> <div class="spoiler_text"><pre> <code class="hljs powershell">&lt;?php namespace app\base\controllers; use Yii; use yii\web\Controller; use yii\web\NotFoundHttpException; use yii\filters\VerbFilter; use yii\helpers\Url; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AdminLangTreeController</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span></span> { public <span class="hljs-variable"><span class="hljs-variable">$modelClass</span></span>; public <span class="hljs-variable"><span class="hljs-variable">$modelClassSearch</span></span>; public <span class="hljs-variable"><span class="hljs-variable">$modelName</span></span>; public <span class="hljs-variable"><span class="hljs-variable">$modelNameLang</span></span>; public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">behaviors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'verbs'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">VerbFilter</span></span>::<span class="hljs-type"><span class="hljs-type">class</span></span>, <span class="hljs-string"><span class="hljs-string">'actions'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'delete'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'POST'</span></span>], ], ], ]; } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { //     ,     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClass::find()-&gt;roots()-&gt;all()) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-variable"><span class="hljs-variable">$model</span></span> = new <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClass; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;makeRoot()-&gt;save(); Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'info'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'   '</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'index'</span></span>]); } <span class="hljs-variable"><span class="hljs-variable">$searchModel</span></span> = new <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClassSearch; <span class="hljs-variable"><span class="hljs-variable">$dataProvider</span></span> = <span class="hljs-variable"><span class="hljs-variable">$searchModel</span></span>-&gt;search(Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;queryParams); <span class="hljs-variable"><span class="hljs-variable">$dataProvider</span></span>-&gt;pagination = false; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'index'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'searchModel'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$searchModel</span></span>, <span class="hljs-string"><span class="hljs-string">'dataProvider'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$dataProvider</span></span>, ]); } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClass::find()-&gt;roots()-&gt;all()) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'index'</span></span>]); } //         <span class="hljs-variable"><span class="hljs-variable">$model</span></span> = new <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClass; <span class="hljs-variable"><span class="hljs-variable">$root</span></span> = <span class="hljs-variable"><span class="hljs-variable">$model::find</span></span>()-&gt;roots()-&gt;one(); <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;parent_id = <span class="hljs-variable"><span class="hljs-variable">$root</span></span>-&gt;id; //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;load(Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;post()) &amp;&amp; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;validate()) { <span class="hljs-variable"><span class="hljs-variable">$parent</span></span> = <span class="hljs-variable"><span class="hljs-variable">$model::findOne</span></span>(<span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;parent_id); <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;appendTo(<span class="hljs-variable"><span class="hljs-variable">$parent</span></span>)-&gt;save(); //    <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;post(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelNameLang, []) as <span class="hljs-variable"><span class="hljs-variable">$language</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$data</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-variable"><span class="hljs-variable">$data</span></span> as <span class="hljs-variable"><span class="hljs-variable">$attribute</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$translation</span></span>) { <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;translate(<span class="hljs-variable"><span class="hljs-variable">$language</span></span>)-&gt;<span class="hljs-variable"><span class="hljs-variable">$attribute</span></span> = <span class="hljs-variable"><span class="hljs-variable">$translation</span></span>; } } <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;save(); Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'update'</span></span>, <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">id</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'create'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>, ]); } } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionUpdate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$id</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { //    <span class="hljs-variable"><span class="hljs-variable">$model</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClass::find()-&gt;with(<span class="hljs-string"><span class="hljs-string">'translations'</span></span>)-&gt;where([<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$id</span></span>])-&gt;one(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$model</span></span> === null) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> new NotFoundHttpException(Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>)); } //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;load(Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;post()) &amp;&amp; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;save()) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;post(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelNameLang, []) as <span class="hljs-variable"><span class="hljs-variable">$language</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$data</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-variable"><span class="hljs-variable">$data</span></span> as <span class="hljs-variable"><span class="hljs-variable">$attribute</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$translation</span></span>) { <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;translate(<span class="hljs-variable"><span class="hljs-variable">$language</span></span>)-&gt;<span class="hljs-variable"><span class="hljs-variable">$attribute</span></span> = <span class="hljs-variable"><span class="hljs-variable">$translation</span></span>; } } <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;save(); Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;post(<span class="hljs-string"><span class="hljs-string">'save'</span></span>) !== null) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'index'</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'update'</span></span>, <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">id</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'update'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; <span class="hljs-variable"><span class="hljs-variable">$model</span></span>, ]); } } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionDelete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$id</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-variable"><span class="hljs-variable">$model</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;findModel(<span class="hljs-variable"><span class="hljs-variable">$id</span></span>); //   ,      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count(<span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;children) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'    ,     .      '</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'index'</span></span>]); } //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;isRoot()) { Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'   '</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'index'</span></span>]); } //   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;delete()) { Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'success'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect([<span class="hljs-string"><span class="hljs-string">'index'</span></span>]); } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMoveUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$id</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-variable"><span class="hljs-variable">$model</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;findModel(<span class="hljs-variable"><span class="hljs-variable">$id</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$prev</span></span> = <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;getPrev()-&gt;one()) { <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;moveBefore(<span class="hljs-variable"><span class="hljs-variable">$prev</span></span>)-&gt;save(); <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;reorder(false); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'   '</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect(Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;referrer); } public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMoveDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$id</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-variable"><span class="hljs-variable">$model</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;findModel(<span class="hljs-variable"><span class="hljs-variable">$id</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$next</span></span> = <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;getNext()-&gt;one()) { <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;moveAfter(<span class="hljs-variable"><span class="hljs-variable">$next</span></span>)-&gt;save(); <span class="hljs-variable"><span class="hljs-variable">$model</span></span>-&gt;reorder(false); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;session-&gt;setFlash(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'   '</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirect(Yii::<span class="hljs-variable"><span class="hljs-variable">$app</span></span>-&gt;request-&gt;referrer); } protected <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-variable"><span class="hljs-function"><span class="hljs-params"><span class="hljs-variable">$id</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-variable"><span class="hljs-variable">$model</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelClass::findOne(<span class="hljs-variable"><span class="hljs-variable">$id</span></span>)) !== null) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-variable"><span class="hljs-variable">$model</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> new NotFoundHttpException(Yii::t(<span class="hljs-string"><span class="hljs-string">'app'</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>)); } } }</code> </pre> </div></div><br><p>  Sekarang di modul, buat file / modul / menu / controller / AdminController.php.  Ini akan menjadi pengontrol utama untuk mengelola menu, dan karena ia mengimplementasikan pohon dan multibahasa, itu akan mewarisi dari basis yang sudah kita buat pada langkah sebelumnya: </p><br><div class="spoiler">  <b class="spoiler_title">AdminController.php</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">namespace</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">modules</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">menu</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">controllers</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">app</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">base</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">controllers</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">AdminLangTreeController</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">as</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">BaseController</span></span></span><span class="php">; </span><span class="hljs-class"><span class="hljs-keyword"><span class="php"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">AdminController</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-keyword"><span class="php"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span></span><span class="php"><span class="hljs-class"> </span></span><span class="hljs-title"><span class="php"><span class="hljs-class"><span class="hljs-title">BaseController</span></span></span></span><span class="php"><span class="hljs-class"> </span></span></span><span class="php">{ </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> $modelClass = \app\modules\menu\models\Menu::class; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> $modelClassSearch = \app\modules\menu\models\MenuSearch::class; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> $modelName = </span><span class="hljs-string"><span class="php"><span class="hljs-string">'Menu'</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">public</span></span></span><span class="php"> $modelNameLang = </span><span class="hljs-string"><span class="php"><span class="hljs-string">'MenuLang'</span></span></span><span class="php">; }</span></span></code> </pre> </div></div><br><p>  Seperti yang Anda lihat, kode controller ini hanya berisi nama-nama model dan kelas-kelasnya.  Yaitu, untuk membuat kontroler CRUD untuk modul lain (katalog, rubrikator, dll.), Yang juga akan menggunakan pohon dan multibahasa, Anda dapat melakukan hal yang sama dengan cara yang sama - perluas pengendali dasar. </p><br><h2>  Membuat antarmuka untuk mengelola menu </h2><br><p>  Tahap terakhir adalah pembuatan antarmuka untuk mengelola pohon multibahasa.  Ekstensi Bootstrap Treeview menangani tugas menampilkan pohon, yang dapat dikonfigurasi dengan cukup fleksibel dan mendukung banyak fungsi yang nyaman (misalnya, cari di pohon).  Buat tampilan indeks untuk menampilkan pohon itu sendiri dan taruh di /modules/menu/views/admin/index.php: </p><br><div class="spoiler">  <b class="spoiler_title">index.php</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">helpers</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">Html</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">grid</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">GridView</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">yii</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">widgets</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">ActiveForm</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">use</span></span></span><span class="php"> </span><span class="hljs-title"><span class="php"><span class="hljs-title">execut</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">widget</span></span></span><span class="php">\</span><span class="hljs-title"><span class="php"><span class="hljs-title">TreeView</span></span></span><span class="php">; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;title = Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">' '</span></span></span><span class="php">); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;params[</span><span class="hljs-string"><span class="php"><span class="hljs-string">'breadcrumbs'</span></span></span><span class="php">][] = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">$this</span></span></span><span class="php">-&gt;title; </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-md-6"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel panel-primary"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel-heading"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">= Html::a(Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">''</span></span></span><span class="php">), [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'create'</span></span></span><span class="php">], [</span><span class="hljs-string"><span class="php"><span class="hljs-string">'class'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'btn btn-success btn-flat'</span></span></span><span class="php">]) </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel-body"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">= TreeView::widget([ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'id'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'tree'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'data'</span></span></span><span class="php"> =&gt; $searchModel::treeViewData($searchModel::find()-&gt;roots()-&gt;one()), </span><span class="hljs-string"><span class="php"><span class="hljs-string">'header'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">' '</span></span></span><span class="php">), </span><span class="hljs-string"><span class="php"><span class="hljs-string">'searchOptions'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'inputOptions'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'placeholder'</span></span></span><span class="php"> =&gt; Yii::t(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'app'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'  '</span></span></span><span class="php">) . </span><span class="hljs-string"><span class="php"><span class="hljs-string">'...'</span></span></span><span class="php"> ], ], </span><span class="hljs-string"><span class="php"><span class="hljs-string">'clientOptions'</span></span></span><span class="php"> =&gt; [ </span><span class="hljs-string"><span class="php"><span class="hljs-string">'selectedBackColor'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'rgb(40, 153, 57)'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'borderColor'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'#fff'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'levels'</span></span></span><span class="php"> =&gt; </span><span class="hljs-number"><span class="php"><span class="hljs-number">10</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'showTags'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">true</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'tagsClass'</span></span></span><span class="php"> =&gt; </span><span class="hljs-string"><span class="php"><span class="hljs-string">'badge'</span></span></span><span class="php">, </span><span class="hljs-string"><span class="php"><span class="hljs-string">'enableLinks'</span></span></span><span class="php"> =&gt; </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">true</span></span></span><span class="php">, ], ]) </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  Jadi kami sampai pada tahap yang paling menarik dari kasus ini: bagaimana membuat formulir untuk membuat / mengedit data multibahasa.  Buat tiga file di folder / modules / menu / views / admin: </p><br><div class="spoiler">  <b class="spoiler_title">create.php</b> <div class="spoiler_text"><pre> <code class="hljs markdown"><span class="xml"><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">yii</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">helpers</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">Html</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">$this</span></span></span></span><span class="xml"><span class="php">-&gt;</span></span></span></span>title = Yii::t('app', ''); $this-&gt;params[<span class="hljs-string"><span class="hljs-string">'breadcrumbs'</span></span>][<span class="hljs-symbol"></span><span class="hljs-symbol"></span>] = [<span class="hljs-string"><span class="hljs-string">'label' =&gt; Yii::t('app', ' '), 'url' =&gt; ['index'</span></span>]]; $this-&gt;params[<span class="hljs-string"><span class="hljs-string">'breadcrumbs'</span></span>][<span class="hljs-symbol"></span><span class="hljs-symbol"></span>] = $this-&gt;title; echo $this-&gt;render('_form', [ 'model' =&gt; $model, ]);</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">update.php</b> <div class="spoiler_text"><pre> <code class="hljs markdown"><span class="xml"><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">yii</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">helpers</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">Html</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">$this</span></span></span></span><span class="xml"><span class="php">-&gt;</span></span></span></span>title = Yii::t('app', '') . ': ' . $model-&gt;name; $this-&gt;params[<span class="hljs-string"><span class="hljs-string">'breadcrumbs'</span></span>][<span class="hljs-symbol"></span><span class="hljs-symbol"></span>] = [<span class="hljs-string"><span class="hljs-string">'label' =&gt; Yii::t('app', ' '), 'url' =&gt; ['index'</span></span>]]; $this-&gt;params[<span class="hljs-string"><span class="hljs-string">'breadcrumbs'</span></span>][<span class="hljs-symbol"></span><span class="hljs-symbol"></span>] = [<span class="hljs-string"><span class="hljs-string">'label' =&gt; $model-&gt;name, 'url' =&gt; ['update', 'id' =&gt; $model-&gt;id</span></span>]]; $this-&gt;params[<span class="hljs-string"><span class="hljs-string">'breadcrumbs'</span></span>][<span class="hljs-symbol"></span><span class="hljs-symbol"></span>] = Yii::t('app', ''); echo $this-&gt;render('_form', [ 'model' =&gt; $model, ]);</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">_form.php</b> <div class="spoiler_text"><pre> <code class="hljs django"><span class="xml"><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">yii</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">helpers</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">Html</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">use</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">yii</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">widgets</span></span></span></span><span class="xml"><span class="php">\</span></span><span class="hljs-title"><span class="xml"><span class="php"><span class="hljs-title">ActiveForm</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="php"> ($model-&gt;isNewRecord) { $model-&gt;status = </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">true</span></span></span></span><span class="xml"><span class="php">; } </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"panel panel-primary"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> $form = ActiveForm::begin(); </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"panel-body"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">' '</span></span></span></span><span class="xml"><span class="php">) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"col-md-4"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">if</span></span></span></span><span class="xml"><span class="php"> (!$model-&gt;isRoot()) { </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'parent_id'</span></span></span></span><span class="xml"><span class="php">)-&gt;dropDownList($model::listTree()) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> } </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'link'</span></span></span></span><span class="xml"><span class="php">)-&gt;textInput([</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'maxlength'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">true</span></span></span></span><span class="xml"><span class="php">]) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'link_attributes'</span></span></span></span><span class="xml"><span class="php">)-&gt;textInput([</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'maxlength'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">true</span></span></span></span><span class="xml"><span class="php">]) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'icon_class'</span></span></span></span><span class="xml"><span class="php">)-&gt;textInput([</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'maxlength'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">true</span></span></span></span><span class="xml"><span class="php">]) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'status'</span></span></span></span><span class="xml"><span class="php">)-&gt;checkbox() </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- Nav tabs --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"nav nav-tabs"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tablist"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">foreach</span></span></span></span><span class="xml"><span class="php"> (Yii::$app-&gt;urlManager-&gt;languages </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">as</span></span></span></span><span class="xml"><span class="php"> $key =&gt; $language) { </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"presentation"</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;?= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">$key</span></span></span></span><span class="xml"><span class="hljs-tag"> == </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">0</span></span></span></span><span class="xml"><span class="hljs-tag"> ? '</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"active"</span></span></span></span><span class="xml"><span class="hljs-tag">' </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span></span><span class="xml"><span class="hljs-tag"> '' ?&gt;</span></span></span><span class="xml">&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"#tab-content-&lt;?= $language ?&gt;"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">aria-controls</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tab-content-&lt;?= $language ?&gt;"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tab"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">data-toggle</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tab"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $language </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">a</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">li</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> } </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!-- Tab panes --&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tab-content"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">foreach</span></span></span></span><span class="xml"><span class="php"> (Yii::$app-&gt;urlManager-&gt;languages </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">as</span></span></span></span><span class="xml"><span class="php"> $key =&gt; $language) { </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tabpanel"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tab-pane &lt;?= $key == 0 ? 'active' : '' ?&gt;"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"tab-content-&lt;?= $language ?&gt;"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model-&gt;translate($language), </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">"[$language]name"</span></span></span></span><span class="xml"><span class="php">)-&gt;textInput() </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= $form-&gt;field($model-&gt;translate($language), </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">"[$language]title"</span></span></span></span><span class="xml"><span class="php">)-&gt;textInput() </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> } </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"box-footer"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= Html::submitButton($model-&gt;isNewRecord ? </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'&lt;i class="fa fa-plus"&gt;&lt;/i&gt; '</span></span></span></span><span class="xml"><span class="php"> . Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">) : </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'&lt;i class="fa fa-refresh"&gt;&lt;/i&gt; '</span></span></span></span><span class="xml"><span class="php"> . Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">), [</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'class'</span></span></span></span><span class="xml"><span class="php"> =&gt; $model-&gt;isNewRecord ? </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'btn btn-primary'</span></span></span></span><span class="xml"><span class="php"> : </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'btn btn-success'</span></span></span></span><span class="xml"><span class="php">]) </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= !$model-&gt;isNewRecord ? Html::submitButton(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'&lt;i class="fa fa-save"&gt;&lt;/i&gt; '</span></span></span></span><span class="xml"><span class="php"> . Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">), [</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'class'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'btn btn-warning'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'name'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'save'</span></span></span></span><span class="xml"><span class="php">]) : </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?</span></span></span></span><span class="xml"><span class="php">= !$model-&gt;isNewRecord ? Html::a(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'&lt;i class="fa fa-trash"&gt;&lt;/i&gt; '</span></span></span></span><span class="xml"><span class="php"> . Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">), [</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'delete'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'id'</span></span></span></span><span class="xml"><span class="php"> =&gt; $model-&gt;id], [</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'class'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'btn btn-danger'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'data'</span></span></span></span><span class="xml"><span class="php"> =&gt; [</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'confirm'</span></span></span></span><span class="xml"><span class="php"> =&gt; Yii::t(</span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'app'</span></span></span></span><span class="xml"><span class="php">, </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">' ,     ?'</span></span></span></span><span class="xml"><span class="php">), </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'method'</span></span></span></span><span class="xml"><span class="php"> =&gt; </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">'post'</span></span></span></span><span class="xml"><span class="php">]]) : </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">''</span></span></span></span><span class="xml"><span class="php">; </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> ActiveForm::end(); </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> </div></div><br><p>  Jangan lupa bahwa bahasa default harus ditentukan dalam aplikasi (parameter bahasa), dan dalam parameter UrlManager - array dengan daftar bahasa (bahasa) yang akan kita gunakan.  Bahasa default harus menjadi yang pertama dalam array ini. </p><br><h2>  Kesimpulan </h2><br><p>  Akibatnya, kita harus mendapatkan yang berikut: </p><br><ul><li>  Modul siap pakai untuk menu seperti pohon multibahasa dari sebuah situs dengan antarmuka yang nyaman dan dapat disesuaikan; </li><li>  Pengontrol CRUD dasar yang dapat diwarisi saat membuat modul lain yang menggunakan kayu dan multibahasa. </li><li>  Dua sifat (multi bahasa dan pohon) yang dapat dihubungkan ke model untuk mengimplementasikan fungsi yang sesuai. </li></ul><br><p>  Saya harap artikel ini bermanfaat dan akan membantu Anda dalam mengembangkan proyek baru yang bagus di Yii2. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426625/">https://habr.com/ru/post/id426625/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426613/index.html">Jangan biarkan printer 3D menjadi malas</a></li>
<li><a href="../id426615/index.html">Menulis CLI di NodeJS</a></li>
<li><a href="../id426617/index.html">Lisensi untuk mengendarai mobil, atau mengapa aplikasi harus Single-Activity</a></li>
<li><a href="../id426621/index.html">String ringkas di Jawa 9</a></li>
<li><a href="../id426623/index.html">Ini adalah bus listrik: apa yang kita ketahui tentang transportasi dengan baterai</a></li>
<li><a href="../id426627/index.html">Contoh Flexbox</a></li>
<li><a href="../id426629/index.html">Filosofi reformasi pajak Trump</a></li>
<li><a href="../id426633/index.html">Pavel Durov akan meluncurkan platform blockchain Telegram musim gugur ini</a></li>
<li><a href="../id426637/index.html">Entri Webinar "Apakah Anda memerlukan Kubernet?"</a></li>
<li><a href="../id426639/index.html">SberTech ♥ Open Source, concurrency dan operasi perbankan yang andal - analisis solusi untuk masalah dengan Joker 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>