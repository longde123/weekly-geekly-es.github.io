<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👩🏼 🛰️ 🧙🏿 便宜的STM32开发板+ Arduino IDE UPD 08/17/2017 👘 🗳️ 🥀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="要升级您的Arduino项目吗？使它们更快地工作，使测量和调整更加准确，并添加错误（在新设备中不可避免）。然后，本文适合您。
 
 Arduino主题越来越吸引着人类的思想，但是迟早我们会面对这样一个事实，即我们缺少某些东西，例如预算/大小/ 端口引脚 /位容量/性能……正如一个明智的人所说：“无论...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>便宜的STM32开发板+ Arduino IDE UPD 08/17/2017</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395577/"><img src="https://habrastorage.org/files/c77/812/08e/c7781208e99a4b5ba071204b56d89691.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要升级您的Arduino项目吗？</font><font style="vertical-align: inherit;">使它们更快地工作，使测量和调整更加准确，并添加错误（在新设备中不可避免）。</font><font style="vertical-align: inherit;">然后，本文适合您。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino主题越来越吸引着人类的思想，但是迟早我们会面对这样一个事实，即我们缺少某些东西，例如预算/大小/ </font><font style="vertical-align: inherit;">端口</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引脚</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> /位容量/性能……正如一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明智的人所说</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：“无论谁想要，他都在寻找机会。谁不想找原因。” </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好的人理解了这一点，并慢慢将</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">到arduino主题上</font></a><font style="vertical-align: inherit;">，因为许多arduino板所基于的八位AVR微控制器不能总是应付任务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
视频格式的本文摘要：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/878k4KqF7Xs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，更少的歌词，更接近主题。</font><font style="vertical-align: inherit;">在本文中，我将考虑基于</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32F103C8T6微控制器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的廉价调试板</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/files/b41/614/68c/b4161468c90142148c300aaa7e2f846e.JPG" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，让我们比较STM32板的主要参数及其价格类似物-Arduino Nano V3.0：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作频率为72 MHz，而arduino为16；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪存的容量为64 KB，而不是32 KB。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM，它是RAM（存储变量的地方），STM32多达20 KB，arduinka只有2；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">快速的12位ADC，而使用AVR微控制器（通常是大多数）的Arduino板则使用10位。</font><font style="vertical-align: inherit;">这意味着在STM32的情况下，该函数为analogRead（*）；</font><font style="vertical-align: inherit;">将返回0..4095与0..1023，在第一种情况下将导致更准确的测量；</font></font></li>
<li>16-   ,  8-  Arduino ,  ,  <s>analogWrite(*);</s>pwmWrite(*);    0..65535,   0..255.       ,    ,     ;</li>
<li>   USB,       Arduino    2 ;</li>
<li>  —  2  3.6(    2 AA ),  2.7...5   ;</li>
<li>     — 1.9   1.8().</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
显然，基于STM32的调试板在价格方面在所有方面都优于Arduino Nano，但同意10美分的价格对于出色的性能来说是个好价钱，但是对于STM32所塞满的外围设备，我完全不了解</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMA的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">价值</font><font style="vertical-align: inherit;">或集成在微控制器中的实时时钟。</font></font><br>
<br>
<img src="https://habrastorage.org/files/2d1/1b1/c4c/2d11b1c4c96342dbb0b7fe9aeedd046c.JPG" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有这些使该板除了一件事之外，在所有方面都极具吸引力-对于像我这样的初学者来说，STM32主题似乎太耗时，整个站点都专门为这些微控制器编程。但是，如果您使用Arduino IDE成为STM32的朋友，那么进入门槛将降至极低的水平。尽管正如他们所说，“每桶蜂蜜中都有药膏”，但下面的内容更多。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们开始准备用于Arduino IDE的开发板。</font><font style="vertical-align: inherit;">首先需要做的是将特殊的引导加载程序上载到微控制器，这将使您可以通过硬件USB直接从开发环境中刷新板。</font><font style="vertical-align: inherit;">为此，将上跳线（也称为“ BOOT0”）移动到位置“ 1”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/198/fd7/ed4/198fd7ed436d475d88bcf52498d474d6.JPG" alt="图片"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BOOT0和BOOT1跳线有什么作用？</font></font></b><div class="spoiler_text">  ,   STM32   ,     (system memory),  ,        USB to UART ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ST-Link V2</a>.<br>
<br>
<img src="https://habrastorage.org/files/5a4/813/115/5a48131155d249a1b97e5619c133a0af.png" alt="image"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，我们需要一个从USB到UART的适配器。值得记住的是，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32是3.3V逻辑</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不能保证与5V兼容，因此建议使用USB转UART，它具有选择3.3 / 5V逻辑的工作模式的能力。我使用了基于CH340G的廉价适配器：</font></font><br>
<br>
<img src="https://habrastorage.org/files/85c/50b/0cb/85c50b0cbdf442daa01f436e37fd4b9b.jpg" alt="图片"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*如您所见，制造商并未使用助焊剂冲洗</font><font style="vertical-align: inherit;">掉</font><font style="vertical-align: inherit;">，当然，它不会影响工作。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我按如下方式将开发板连接到USB转UART适配器：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
G &lt;-&gt; GND；</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5V &lt;-&gt; 5V; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PA10 &lt;-&gt; TXD; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PA9 &lt;-&gt; RXD。</font></font><br>
<br>
<img src="https://habrastorage.org/files/fa1/7c6/356/fa17c635681842d6b94add76cf4b2beb.jpg" alt="图片"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*板上的PA10 / PA9简单地标记为A10 / A9-这些端口是第一个USART硬件，板上有3个端口，也有2个硬件I2C和2个SPI。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了方便起见，我使用5 V电压为该板供电，而使用3.3 V的电源则板上有一个引脚“ 3.3”。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意，5 V可能会轻易禁用微控制器</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此请注意连接。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下载，安装并运行</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash Loader演示程序</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（可在本文的归档文件中找到）：</font></font><br>
<br>
<img src="https://habrastorage.org/files/124/554/93b/12455493b0334429b4f975143717ef88.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择适配器的COM端口号（在我的情况下为COM43），然后单击“下一步”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/866/092/649/866092649ba24aaf9db036baa5aa29df.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我有一个新的微控制器，所以仍然</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有安装</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有人向它写任何东西（当然，除了制造商本身），然后默认情况下有读取保护，程序警告我们，如果单击“删除保护”按钮，则将清除闪存，即是否存在某种固件-她会退休。就我而言，那里没有什么用处，所以我大胆按下。然后，我看到以下内容：</font></font><br>
<br>
<img src="https://habrastorage.org/files/faf/937/62f/faf93762f79843ec8bb1989cc5ed2295.PNG" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
单击“确定”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/132/4ea/aa8/1324eaaa861144bca5619c2703a49b38.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我的调试板基于STM32F103 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微控制器</font><font style="vertical-align: inherit;">-有64 KB的闪存，所以还有一个STM32F103 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微控制器，其中闪存是后者的两倍。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后单击“下一步”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/021/79d/9e9/02179d9e9acb48fd845b79364cf3765a.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再次</font><font style="vertical-align: inherit;">单击“下一步” </font><font style="vertical-align: inherit;">，我们将看到以下窗口：</font></font><br>
<br>
<img src="https://habrastorage.org/files/eb8/373/a44/eb8373a444d2489ba2ac37077ebe9093.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
选择“下载到设备”并单击“ ...”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/cd4/f1e/af6/cd4f1eaf6e4a4557befea62a0d5f91ee.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将文件类型更改为* .bin并打开文件“ generic_boot20_pc13.bin”（也存在于存档中），该文件可以从</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32duino-bootloader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目中获取</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，单击“下一步”按钮，在引导加载程序固件之后，我们将看到一个绿色指示灯：</font></font><br>
<br>
<img src="https://habrastorage.org/files/694/7e2/a39/6947e2a39b0e4dd2995145f80ec1a1b8.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，对于Arduino IDE开发环境，我们需要下载一个特殊的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32内核</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（也在本文的存档中）。</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里有一个细微差别，在撰写本文时，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内核无法在1.6.5以上的开发环境版本上运行</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处下载了</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1.6.5-r5 </font><font style="vertical-align: inherit;">。</font></font></s> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
该内核已经过测试，可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino IDE版本1.6.9上运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，将内容解压缩到“我的文档” \“ Arduino” \“硬件”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/98b/ed2/7f9/98bed27f9cf3403d9518307b9d5a9b57.PNG" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就我而言，完整路径如下所示：“ C：\ Users \ RSK \ Documents \ Arduino \ hardware” </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，系统无法确定设备的系统，因此您仍然需要在板上安装驱动程序。我们转到文件夹“ My Documents \ Arduino \ hardware \ Arduino_STM32 \ drivers \ win”（或“ drivers \ win”，如果是本文的存档），并以管理员身份运行文件“ install_drivers.bat”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/99a/523/588/99a523588e134d478d0d72988d9b1e6a.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，顶部的跳线（即“ BOOT0”），将其置于“ 0”位置，然后通过microUSB电缆将开发板连接至计算机：</font></font><br>
<br>
<img src="https://habrastorage.org/files/be6/c72/ff8/be6c72ff836947a382a558c1e6323a60.JPG" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
应在设备管理器中将其定义为“ Maple DFU”或“ Maple Serial（COM *）”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/97b/154/a3b/97b154a3b891400ca365af6e0c7ef922.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不清楚第一次连接后的原因在不同的计算机上，板子的定义有所不同，但要紧的是，我们继续配置Arduino IDE。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们启动开发环境，然后启动Tools-&gt; </font></font><br>
<br>
<img src="https://habrastorage.org/files/3c6/306/4e1/3c63064e14424feeba0dd583863de356.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Board- </font><font style="vertical-align: inherit;">&gt; Boards Manager：</font><font style="vertical-align: inherit;">在这里，您需要为Arduino Due开发板安装内核。选择最新版本，然后单击“安装”：</font></font><br>
<br>
<img src="https://habrastorage.org/files/558/187/594/558187594cfb4bce944089a37d76d7f9.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后依次</font><font style="vertical-align: inherit;">单击“ </font><font style="vertical-align: inherit;">工具”-&gt;“板”-&gt;“通用STM32F103C”，变体：“ STM32F103C8（20kRAM。64kFlash）”，上传方法：“ STM32duino bootloader”，端口-板的COM端口号，总体而言，一切如屏幕截图所示：</font></font><br>
<br>
<img src="https://habrastorage.org/files/3a3/2a2/ecd/3a32a2ecdfdf4ca2bb9164eeffa9050d.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一切就绪，开发板已准备就绪，可以在Arduino IDE开发环境中进行固件和编程。让我们从“缝制”到内核的示例中缝制一些草图，转到文件-&gt;带有草图的文件夹-&gt;硬件-&gt; Arduino_STM32-&gt; STM32F1-&gt;库-&gt; A_STM32_Examples-&gt;数字-&gt;闪烁：</font></font><br>
<br>
<img src="https://habrastorage.org/files/fdb/7df/6fb/fdb7df6fb6b64ade9f6c23a031367e4b.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
经典的“ Hello World”在微控制器领域。我们将PB1更改为PC13，因为板上的LED连接到此端口：</font></font><br>
<br>
<img src="https://habrastorage.org/files/a24/e91/2d9/a24e912d93fb42869921f9c9dd985bd5.JPG" alt="图片"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*顺便说一句，它在PC13支脚上以低水平点亮。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们按下“下载”按钮，固件完成后，开发环境将显示如下内容：</font></font><br>
<br>
<img src="https://habrastorage.org/files/ae6/07b/674/ae607b6742f744088bd27b5388dbf31b.png" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“完成！</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重置USB以将其切换回运行时模式</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
，下载后重置错误：usb_reset：无法重置设备，win错误：找不到指定的文件。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是固件成功加载，尽管并非总是如此，有时Arduino IDE会给出其他消息。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找不到DFU设备</font></font></b><div class="spoiler_text"> ,  :<br>
<br>
<img src="https://habrastorage.org/files/2f7/9b6/3c3/2f79b63c37dd44f6804f39c83d8ca14c.png" alt="image"><br>
<br>
«dfu-util — © 2007-2008 by OpenMoko Inc.<br>
Couldn't find the DFU device: [1EAF:0003]<br>
This program is Free Software and has ABSOLUTELY NO WARRANTY»<br>
<br>
 ,     .<br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在搜索DFU设备[1EAF：0003] ...</font></font></b><div class="spoiler_text">   :<br>
<br>
<img src="https://habrastorage.org/files/b2f/a3e/a09/b2fa3ea09c004c8caf3175f1053e9d39.png" alt="image"><br>
<br>
«Searching for DFU device [1EAF:0003]…<br>
Assuming the board is in perpetual bootloader mode and continuing to attempt dfu programming...»<br>
<br>
    ,         .      Arduino Pro Mini.<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，我在本文开始时就写了“美中不足”，由于某种原因，在开发环境中并非总是可以刷新电路板，甚至更多的是，它并不总是由计算机决定的。</font><font style="vertical-align: inherit;">我自己决定如下，在下载固件之前（单击“下载”按钮之前），在板上单击“重置”，然后在固件之后，重新启动板。</font><font style="vertical-align: inherit;">在这种情况下，缝制木板的可能性的百分比为99％。</font><font style="vertical-align: inherit;">目前尚不清楚为什么它会那样工作，但这是事实。</font><font style="vertical-align: inherit;">我认为早晚会纠正此问题，并且一切都会根据需要自动重新启动。</font><font style="vertical-align: inherit;">为了更快地解决此问题，必须增加这个出色的STM32调试板的社区，因此请与朋友（尤其是程序员朋友）共享本文。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于引脚：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可点击</font></font></b><div class="spoiler_text">    ,    (   ):<br>
<br>
<a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/4b0/def/711/4b0def711af2f6fc049dcb9c2c6c759e.png" alt="image"></a><br>
() <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.stm32duino.com/viewtopic.php?p=11137</a><br>
<br>
      , : <br>
<br>
<i>digitalWrite(PB0, LOW); <br>
<s>analogWrite(PA8, 65535);</s>pwmWrite(PA8, 65535); <br>
analogRead(PA0); <br>
LiquidCrystal lcd(PB0, PA7, PA6, PA5, PA4, PA3);</i><br>
<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">docs.leaflabs.com/docs.leaflabs.com/index.html</a>          Arduino IDE,    .<br>
<br>
    ,     :<br>
<i>Documents\Arduino\hardware\Arduino_STM32\STM32F1\variants\generic_stm32f103c\board.cpp</i><br>
<br>
   ,  :<br>
<ul>
<li>,    <s>analogWrite();</s>pwmWrite(); — PB0, PA7, PA6, PA3, PA2, PA1, PA0, PB7, PB6, PA10, PA9, PA8,     ,     ;</li>
<li>,  analogRead(); — PB0, PA7, PA6, PA5, PA4, PA3, PA2, PA1, PA0.</li>
</ul><br>
<br>
    .       ,   1.9 .<br>
<br>
 ,   PA12/PA11   D+/D- USB,       ,   ,    2-     ,    .<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电路板：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可点击</font></font></b><div class="spoiler_text"><a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/133/e87/543/133e875430de3f6b647547475f8358af.jpg" alt="image"></a><br>
() <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.stm32duino.com/viewtopic.php?p=11464#p11464</a><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，最后：</font></font><br>
<br>
<img src="https://habrastorage.org/files/9cb/14b/562/9cb14b562e7f43b58a156618f171aa84.JPG" alt="图片"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嗨geektimes.ru</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//https://github.com/mk90/LiquidCrystalRus</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//STM32  !</span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lcd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PB9, PB8, PB7, PB6, PB5, PB4)</span></span></span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  lcd.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
  lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>);<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.print(<span class="hljs-string"><span class="hljs-string">"geektimes.ru"</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.print(millis() / <span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
链接：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存档到文章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roger Clark的一个朋友的门户网站，致力于移植STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，问题/建议/谢谢，都在那里；</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/rogerclarkmelbourne/Arduino_STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://docs.leaflabs.com/docs.leaflabs.com/index.html-Roger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以此项目为基础，所以有很多有用的东西，尽管是英文。</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在这里下载Arduino IDE版本1.6.5-r5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我的文章在某种程度上与“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 vs Arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”朋友</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@RaJa相交</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">STM32F103C8T6上的</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
数据表</font><font style="vertical-align: inherit;">; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">我在geektimes上的所有出版物</font></a><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">UPD 07/15/2016</font></b></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该内核经过测试可在Arduino IDE版本1.6.9上运行：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geektimes.ru/post/277928/#comment_9532576</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还有什么忘了</font></font></b><div class="spoiler_text">       :<br>
<br>
<img src="https://habrastorage.org/files/08e/d64/4c5/08ed644c5daf40cb80ef5e2aa9442d51.JPG" alt="image"><br>
<br>
   ,      .<br>
<br>
   ,    microUSB :<br>
<br>
<img src="https://habrastorage.org/files/9fa/27c/f23/9fa27cf2394a446d8411f0b14f77f427.jpg" alt="image"><br>
<br>
      , ,   .<br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN395577/">https://habr.com/ru/post/zh-CN395577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN395565/index.html">以太坊软件分叉错误，结果回滚和纹波增长</a></li>
<li><a href="../zh-CN395567/index.html">金士顿UV400 480 GB SSD评估-葡萄干SSD</a></li>
<li><a href="../zh-CN395571/index.html">向伊桑66号问：我们发现暗物质了吗？</a></li>
<li><a href="../zh-CN395573/index.html">俄罗斯卖家发出警报：国外在线商店的商品便宜</a></li>
<li><a href="../zh-CN395575/index.html">SanDisk推出高达256GB的MicroSDXC</a></li>
<li><a href="../zh-CN395579/index.html">真正的电子政务应该是什么？爱沙尼亚展示了一个例子</a></li>
<li><a href="../zh-CN395581/index.html">基因组编辑将如何改变农业。如果我们允许...</a></li>
<li><a href="../zh-CN395583/index.html">漫游将取代创新，而不是法律</a></li>
<li><a href="../zh-CN395587/index.html">游戏世界中的真实坦克</a></li>
<li><a href="../zh-CN395591/index.html">OnePlus 3：夏天最值得期待的Android新奇</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>