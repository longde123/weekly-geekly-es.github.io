<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¶ üò± üßíüèæ Criando um m√≥dulo de software para o programador XELTEK SuperPro 6100 üå¥ üë®üèº‚Äçüíª üèµÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pref√°cio 
 Em um artigo anterior, foi considerado o mecanismo de prote√ß√£o do programador XELTEK SuperPro 6100 contra a clonagem. 

 Este artigo descre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criando um m√≥dulo de software para o programador XELTEK SuperPro 6100</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430634/"><h4>  Pref√°cio </h4><br>  Em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> anterior, foi considerado o mecanismo de prote√ß√£o do programador XELTEK SuperPro 6100 contra a clonagem. <br><br>  Este artigo descrever√° a cria√ß√£o de seu pr√≥prio m√≥dulo de software para esse programador, que, com uma certa modifica√ß√£o do c√≥digo, pode ser adaptado para funcionar com qualquer outro tipo de microcircuito - atualmente n√£o suportado ou, como no nosso caso, declarado formalmente. <br><br><h4>  Antecedentes </h4><br>  Mais uma vez, tivemos uma tarefa que, √† primeira vista, foi resolvida com bastante simplicidade - era necess√°rio fazer uma c√≥pia de um chip de mem√≥ria flash especializado - mDOC H3 SDED5-512M. <br><br>  Este chip foi desenvolvido h√° mais de dez anos.  Aqui est√° o pdf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(1)</a> com sua descri√ß√£o.  Abaixo est√° um pequeno trecho do an√∫ncio em russo: <br><br>  <i>... a msystems preparou a fam√≠lia mDOC para uso como unidades de estado s√≥lido ...</i> <i><br></i>  <i>O software TrueFFS interno, encarregado de gerenciar a mem√≥ria flash mDOC H3, executa seu pr√≥prio m√≥dulo controlador, que o transforma em uma unidade completa e independente, facilmente adicionada a uma variedade de dispositivos port√°teis.</i> <br><a name="habracut"></a><br>  Na lista do SuperPro 6100 suportado pelo programador, esse chip foi listado e at√© encontrou o adaptador DX5057 correspondente.  Por√©m, ap√≥s montar todo o designer e escolher esse chip, o programa mostrou a seguinte imagem com o item misterioso ‚ÄúDimageMain‚Äù, cuja descri√ß√£o n√£o foi encontrada na documenta√ß√£o ou no site do desenvolvedor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0l/dy/hk/0ldyhknaorevv2x5mjq4cens0qw.jpeg"></div><br>  Depois de tentar executar a opera√ß√£o ‚ÄúDimageMain‚Äù sem um chip no adaptador, foi recebido um aviso sobre sua aus√™ncia e, ap√≥s confirmar esse fato, o programa exibiu as seguintes informa√ß√µes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kh/x4/hk/khx4hkhkb3uu2w5zbpguawdzhh4.jpeg"></div><br>  A julgar pela inscri√ß√£o ‚ÄúmDOC H3 Write Image‚Äù, ‚ÄúImage‚Äù √© uma imagem que pode ser gravada em um chip usando este programador.  Mas como ler esta imagem de um microcircuito j√° gravado, como apag√°-la etc.? <br><br>  Um pouco mais tarde, na Internet, encontrei um arquivo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(2)</a> da empresa Dataman, que mostra parcialmente a estrutura da imagem acima e menciona o software para sua cria√ß√£o. <br>  Assim, esfor√ßos adicionais foram direcionados √† busca de utilit√°rios da M-Systems descritos no documento Software Utilities for TrueFFS 7.1 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(3)</a> . <br><br>  O pedido de suporte t√©cnico do antigo ‚ÄúM-Systems‚Äù, agora ‚ÄúSanDisk‚Äù, n√£o deu resultado - simplesmente n√£o houve resposta. <br><br>  Na Internet, foi poss√≠vel encontrar apenas utilit√°rios antigos que n√£o suportam a vers√£o dos chips H3.  O SDK completo da SanDisk tamb√©m n√£o foi encontrado, apenas seus "fragmentos" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(5)</a> em termos de implementa√ß√£o de um driver para Linux. <br><br>  Enquanto estudamos as informa√ß√µes acumuladas, a seguinte linha chamou a aten√ß√£o do arquivo Dataman: "Os arquivos de imagem podem ser criados com o utilit√°rio SanDisk Docshell ou PG4UW". <br><br>  Os utilit√°rios SanDisk Docshell n√£o se encontravam de forma alguma, ent√£o eu tive que descobrir como o PG4UW <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(4)</a> funciona com esse chip.  Eles n√£o incorporaram o SanDisk SDK inteiro em seu software, mas criaram um plug-in com m√©todos exportados necess√°rios para o funcionamento dos utilit√°rios TrueFFS, que s√£o chamados a partir de seu programa. <br>  Vamos seguir o mesmo caminho. <br><br><h4>  Criando seu pr√≥prio m√≥dulo de software </h4><br>  Aqui est√° uma isen√ß√£o de responsabilidade, a saber, que o autor n√£o se responsabiliza pelo uso que voc√™ fizer dos materiais deste artigo. <br>  Em outras palavras - somente voc√™ ser√° respons√°vel por suas a√ß√µes, o que poder√° ser incentivado a se familiarizar com este material. <br><br>  <em>Concordamos, como no artigo anterior, chamar o programador do SuperPro 6100 simplesmente de "software", e o computador no qual esse programa trabalha √© "host".</em>  <em>Agora temos outro programa que funciona no pr√≥prio programador.</em>  <em>Vamos cham√°-lo de "m√≥dulo de software".</em> <br><br>  O manual Software Utilities for TrueFFS 7.1 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(3)</a> descreve as fun√ß√µes implementadas pelos utilit√°rios DOCSHELL, que se enquadram nas quatro categorias a seguir: <br><br><ul><li>  DFORMAT - utilit√°rios para formatar um dispositivo mDOC. </li><li>  DINFO - utilit√°rios para obter uma variedade de informa√ß√µes sobre o dispositivo mDOC e as se√ß√µes existentes nele. </li><li>  DIMAGE - utilit√°rios para leitura, grava√ß√£o e compara√ß√£o do dispositivo mDOC de imagem. </li><li>  SPLITIMAGE - utilit√°rios para dividir a imagem do dispositivo mDOC em partes. </li></ul><br>  Os utilit√°rios DOCSHELL foram projetados para a linha de comando; portanto, a interface para comunica√ß√£o com o plug-in DOCSHELL.dll foi implementada usando o mesmo mecanismo de comando de texto. <br>  Antes de iniciar a comunica√ß√£o com o "DOCSHELL.dll", √© necess√°rio chamar cada um dos m√©todos exportados e passar neles indicadores para as fun√ß√µes implementadas no software para troca f√≠sica com o chip mDOC.  Eles est√£o escrevendo e lendo (em v√°rias modifica√ß√µes), bem como m√©todos para receber mensagens de texto sobre o andamento das opera√ß√µes atuais e m√©todos para trabalhar com arquivos de imagem. <br><br>  Um dos m√©todos mainEntry exportados como argumento de entrada <br>  aceita uma string ASCIIZ - o comando descrito no manual Software Utilities for TrueFFS 7.1 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(3)</a> . <br><br>  O analisador dentro de "DOCSHELL.dll" processa o comando recebido e, dependendo do comando e de seus argumentos, chama um ou outro m√©todo do software principal do programador usando o ponteiro recebido durante a inicializa√ß√£o. <br><br>  Software para o programador, decidimos escrever o seu.  Essa abordagem, por um lado, nos salvou de ‚Äúcavar‚Äù nos arquivos originais para cumprir acordos de troca de informa√ß√µes entre o host e o programador, e por outro lado, facilitou bastante o processo de depura√ß√£o, que, se o m√≥dulo foi integrado ao software original, tornou imposs√≠vel em alguns aspectos ou extremamente dif√≠cil. <br><br>  A interface do usu√°rio nativa do programador foi escrita em C # no Visual Studio 2017. As fontes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(6)</a> est√£o inclu√≠das. <br><br>  Obviamente, funcional estava em primeiro lugar, portanto n√£o havia quest√£o de alterar a apar√™ncia, assim como o texto do c√≥digo fonte.  Portanto, o design minimalista do programa √© o seguinte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oz/ki/8b/ozki8byinhgupo_k6hvfnzab-oc.jpeg"></div><br>  Na parte superior da janela principal (e somente), h√° um menu para os bot√µes aos quais voc√™ pode atribuir fun√ß√µes arbitr√°rias.  O item de menu ‚ÄúXILINX‚Äù ser√° descrito mais adiante. <br><br>  Abaixo est√£o duas janelas.  A parte superior exibe as mensagens enviadas do programa para o plug-in "DOCSHELL.dll" e recebidas dele. <br><br>  Na janela inferior, voc√™ pode digitar os comandos necess√°rios e clicar duas vezes neles na linha correspondente. <br><br>  Quando o programa inicia, alguns comandos ser√£o exibidos nele. <br><br>  <em>Se voc√™ repentinamente come√ßar a trabalhar com um chip real - tenha cuidado, porque</em>  <em>nenhum aviso de que voc√™ pode perder todos os dados ao formatar, etc.</em>  <em>O programa n√£o est√° implementado.</em> <br><br>  O arquivo "DOCSHELL.dll" √© encontrado no diret√≥rio com o programa PG4UW <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(4)</a> instalado em "Dataman" (√© poss√≠vel em "Elnec"). <br><br>  Para poder usar uma DLL de terceiros em seu programa, voc√™ precisa de um arquivo de cabe√ßalho com uma descri√ß√£o dos m√©todos exportados e seus argumentos.  Devido √† sua aus√™ncia, tive que recuperar essas informa√ß√µes pessoalmente.  Os m√©todos para essa recupera√ß√£o est√£o al√©m do escopo deste artigo, portanto, os argumentos dos m√©todos exportados podem ser encontrados nas fontes anexadas. <br><br>  Com a interface do usu√°rio em termos de intera√ß√£o com o plugin, o assunto se tornou um pouco mais claro.  Agora voc√™ pode prosseguir com a implementa√ß√£o da comunica√ß√£o com o microcircuito no n√≠vel f√≠sico para poder executar os comandos de leitura / grava√ß√£o de / para o mDOC recebidos do plug-in. <br><br>  O m√≥dulo do programa para o programador foi escrito em linguagem C no IDE "IAR Embedded Workbench for ARM".  Fontes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(7)</a> est√£o anexadas. <br><br>  Sua depura√ß√£o foi realizada usando o depurador JTAG J-Link, conectado ao programador por um conector JTAG montado na lateral do gabinete e conectado √† placa-m√£e por um cabo plano. <br><br>  <em>O depurador JTAG J-Link v9 foi adquirido no Aliexpress.</em>  <em>Os drivers instalados com o ‚ÄúIAR Embedded Workbench for ARM‚Äù funcionam maravilhosamente com ele, e at√© mesmo a atualiza√ß√£o do firmware nativo da SEGGER foi bem-sucedida.</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/md/5e/vq/md5evqm8gj7khtrvdsucwhd5yac.jpeg"></div><br>  Estruturalmente, o programador √© feito na forma de oito placas localizadas uma acima da outra e conectadas por conectores. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3v/1n/b6/3v1nb6ntkgimwtwtir0lcekdgmm.jpeg"></div><br>  Conversores DC-DC ajust√°veis ‚Äã‚Äãest√£o localizados na placa mais baixa para gerar v√°rias voltagens necess√°rias para trabalhar com v√°rios microcircuitos de mem√≥ria. <br>  Acima dela, h√° uma placa-m√£e na qual o microcontrolador ATMEL AT91SAM9G20 ARM, SDRAM, SPI FLASH com firmware, chip de identifica√ß√£o AE801 com modelo e n√∫mero de s√©rie do programa, chip USB ISP1582, conversor digital-anal√≥gico TLC7226 para gerenciamento de tens√£o de conversores DC-DC, v√°rios outros chips e conectores externos para conectar uma fonte de alimenta√ß√£o e um cabo USB para conectar ao host. <br><br>  Na terceira placa inferior est√° o chip XILINX XC2S50E, que controla as pernas do chip no adaptador conectado ao programador durante os procedimentos de leitura / grava√ß√£o, etc. <br>  Nas outras cinco placas, h√° registros e conjuntos carregados sequencialmente, conectados √†s suas sa√≠das com chaves de transistor, atrav√©s dos quais √© poss√≠vel aplicar microcircuitos a uma ou outra perna do chip formado por conversores de tens√£o DC-DC, <br>  incluindo a "terra".  Como os registros que controlam as chaves do transistor s√£o carregados sequencialmente e o n√∫mero de pernas controladas no adaptador pode chegar a 144, leva um tempo consider√°vel para carregar todos os blocos de chaves.  Portanto, com a ajuda dos comutadores de transistor, apenas n√≠veis est√°ticos s√£o alimentados ao microcircuito: terra, energia, etc.  E com o XILINX - din√¢mico: endere√ßos, dados, CS, OE, RD, WR, etc. <br><br>  Para avan√ßar ainda mais, era necess√°rio, no m√≠nimo, um meio de criar firmware para o microcircuito XILINX XC2S50E e um diagrama de circuito, se n√£o de todo o programador, pelo menos parte do soquete CPU - FPGA - adaptador -. <br><br>  Quanto ao IDE para XILINX Spartan-IIE, eu tive que usar a vers√£o antiga do ISE 10.1, porque  todos os IDEs subsequentes n√£o suportam o modelo FPartan Spartan-II. <br><br>  A situa√ß√£o com o diagrama do circuito acabou sendo mais complicada.  Para identificar os compostos de interesse para n√≥s, tivemos que "remover" o processador U4 e XILINX U12 das placas para obter acesso aos blocos nos estojos BGA, porque  nem todos eles t√™m um interruptor para o lado oposto. <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/em/i6/xz/emi6xzfj5g9ks4imtdzvrc9mqa0.jpeg"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/webt/fl/rg/st/flrgstgrxvaicirr108z0ahlphs.jpeg"></div></td></tr></tbody></table>  O host se comunica com o programador via USB atrav√©s de v√°rios pontos finais (pontos finais).  O host sempre atua como um host.  Atrav√©s de um dos pontos de extremidade, o host envia um comando ao programador e, por meio dele, recebe a confirma√ß√£o, <br>  atrav√©s de outro eles trocam dados entre si. <br><br>  Os comandos de an√°lise do host no m√≥dulo do programa s√£o executados no m√©todo USB_ReceiveBuf_EP1RX_Parse (). <br><br>  O pacote de comandos √© descrito pela estrutura CMD_PROG e consiste em v√°rios campos.  Se o campo Cmd contiver 1, este √© um comando para trabalhar com o microcircuito e o campo ProgProcNum nesse caso √© o √≠ndice na matriz _progProcedures das estruturas PROG_PROC, em um dos campos em que um ponteiro para o comando a ser executado √© armazenado. <br><br>  No diret√≥rio com o programa "SUPERPRO 6100N" instalado, existe um subdiret√≥rio "\ lib".  Ele com a extens√£o "* .bin" armazena arquivos de firmware XILINX para todos os tipos de chips suportados pelo programador.  Entre eles, existem dois firmware universais para verificar o contato das pernas do microcircuito com os contatos das tomadas no adaptador. <br><br>  Este √© "GENERAL ~ .BIN" com um pull-up interno para todas as pernas pull-up do XILINX e "GENERAL_.BIN" com um pull pull-down interno. <br><br>  A verifica√ß√£o do contato das pernas do microcircuito √© realizada no m√©todo SOCKET_CkeckInsertIC () do m√≥dulo de software da seguinte maneira. <br><br>  Primeiro, o firmware ‚ÄúGENERAL_.BIN‚Äù √© carregado no XILINX e, com sua ajuda, todas as pernas do FPGA conectadas ao soquete s√£o configuradas para sa√≠da e o ‚Äú1‚Äù l√≥gico √© fornecido a eles.  Por sua vez, cada perna do FPGA √© reconfigurada para entrada, um n√≠vel l√≥gico √© lido a partir dele e, em seguida, ‚Äú1‚Äù √© novamente emitido para essa perna. <br><br>  Se a perna do microcircuito tiver contato el√©trico com a perna correspondente, ent√£o ‚Äú1‚Äù deve ser lido (atrav√©s dos diodos de prote√ß√£o internos do microcircuito de todas as outras pernas).  E na aus√™ncia de contato, devido ao fato de que todos os pinos do FPGA s√£o puxados para o ch√£o, "0" ser√° lido a partir desta entrada.  Depois disso, uma matriz de n√≠veis l√≥gicos lidos dessa maneira √© enviada ao host e processada l√°.  A seguir, a execu√ß√£o da opera√ß√£o especificada continua ou √© exibida uma mensagem sobre o n√£o VKontakte das pernas correspondentes do microcircuito no soquete. <br>  Ap√≥s passar com √™xito neste teste, o host envia o firmware para o XILINX correspondente ao chip instalado no adaptador ao programador. <br><br>  A compila√ß√£o de um programa para FPGA no ISE 10.1 (execu√ß√£o sequencial de procedimentos de s√≠ntese (Synthesize), implementa√ß√£o de um design (Implement Design) e gera√ß√£o de arquivos de programa√ß√£o (Gerar arquivo de programa√ß√£o)) cria um arquivo de configura√ß√£o bin√°ria ‚Äúxeltek.bin‚Äù de 78756 bytes no diret√≥rio do projeto.  <em>Para isso, nas propriedades do processo ‚ÄúGerar arquivo de programa√ß√£o‚Äù na janela ‚ÄúProcessos‚Äù na categoria ‚ÄúOp√ß√µes gerais‚Äù, duas op√ß√µes devem ser definidas: ‚ÄúCriar arquivo de bit‚Äù e ‚ÄúCriar arquivo de configura√ß√£o da Bibary‚Äù.</em> <br><br>  N√£o se sabe por que motivos, mas os programadores do XELTEK decidiram modificar os arquivos assim obtidos espelhando todos os bits em cada byte. <br><br>  Se, por qualquer motivo, voc√™ precisar "espelhar" seu pr√≥prio arquivo dessa maneira, ou "espelhar" o arquivo do diret√≥rio "\ lib" de volta √† visualiza√ß√£o normal, no software no menu "XILINX", existe para esse efeito o item "Bitstream Converter" (no final do nome o arquivo resultante est√° sublinhado). <br><br>  Para trabalhar com o chip SDED5 no n√≠vel f√≠sico, os quatro m√©todos a seguir s√£o implementados no m√≥dulo de software: <br><br>  - PROGPROC_FLWRITE_IO_WORD () - grava uma palavra (16 bits) no endere√ßo especificado <br>  - PROGPROC_FLREAD_IO_WORD () - l√™ a palavra (16 bits) no endere√ßo especificado <br>  - PROGPROC_hal_blk_write_nor () - escreve um ou mais setores (512 bytes cada) no endere√ßo especificado <br>  - PROGPROC_hal_blk_read_nor () - l√™ um ou mais setores (512 bytes cada) no endere√ßo especificado <br><br>  Para interagir com o FPGA XILINX em nosso firmware, identificamos quatro registros (portas de E / S, descritas no arquivo common.h para fontes ARM). <br><br>  - _IC_ADDR (0x30000010) <br>  - _IC_DATA (0x30000012) <br>  - _IC_CTRL (0x30000014) // Sa√≠da: 0 - WE, 1 - 0E, 2 - CE, 3 - RSTIN;  Em: 0 - OCUPADO <br>  - _IC_ENABLE (0x30000016) // In: 7 - Permiss√£o de trabalho (0 - ativo, 1 - todas as pernas no soquete em Z) <br><br>  _IC_ADDR e _IC_DATA s√£o endere√ßos de 16 bits e registradores de dados para o chip program√°vel SDED5; <br>  _IC_CTRL - registro de controle de 8 bits atrav√©s do qual os sinais WE, OE, CE e RSTIN s√£o configurados e o sinal BUSY √© lido a partir do SDED5. <br><br>  Os m√≥dulos de software originais usam endere√ßos de 0x30000000 a 0x3000000E para se comunicar com FPGAs.  O CPLD com a inscri√ß√£o XELTEK √© instalado como um decodificador de endere√ßo no programador e, como n√£o conhecemos seu firmware, usamos endere√ßos de 0x30000010 para reduzir a probabilidade de consequ√™ncias inesperadas de manifestar a l√≥gica de comportamento de outra pessoa ao usar endere√ßos "padr√£o". <br><br>  Ap√≥s carregar o firmware no FPGA, todas as sa√≠das do FPGA conectadas √†s pernas do microcircuito no soquete est√£o no estado Z e para come√ßar a trabalhar com ele, √© necess√°rio ativar a resolu√ß√£o gravando zero no s√©timo bit do registro _IC_ENABLE. <br><br>  O algoritmo de todo o sistema pode ter a seguinte apar√™ncia. <br><br><ol><li>  Depois de iniciar o software no host, ele verifica se h√° uma conex√£o com o programador via USB e exibe a mensagem correspondente na barra de status na parte inferior da janela principal <br>  (o programador pode ser conectado ap√≥s o in√≠cio do programa). </li><li>  O usu√°rio seleciona o tipo de chip com o qual pretende trabalhar. </li><li>  No banco de dados (no caso mais simples, apenas no arquivo), o microcircuito selecionado corresponde ao tipo de adaptador necess√°rio e uma solicita√ß√£o √© enviada ao programador para o tipo de adaptador instalado nele. </li><li>  O programador solicita ao adaptador seu tipo e envia essas informa√ß√µes de volta ao host, onde essas informa√ß√µes s√£o comparadas com as encontradas no banco de dados e, se os tipos de adaptadores corresponderem, o trabalho continuar√°. </li><li>  Para cada tipo de microcircuito selecionado no software, um menu correspondente deve ser exibido com os comandos dispon√≠veis para esse microcircuito (leitura, grava√ß√£o, verifica√ß√£o de limpeza, compara√ß√£o, etc.). </li><li>  Quando voc√™ seleciona um item de menu para trabalhar com o microcircuito, o comando correspondente √© enviado ao programador, ap√≥s o qual o programador primeiro verifica o contato el√©trico dos contatos dos soquetes com as pernas do microcircuito e, em seguida, se for bem-sucedido, executa esse comando. </li></ol><br>  <em>Nos c√≥digos-fonte anexados ao artigo, para simplificar a tarefa, pontos do segundo ao quinto, inclusive, n√£o s√£o implementados.</em> <br><br><h4>  Sum√°rio </h4><br>  N√£o tivemos a tarefa de integrar o m√≥dulo de software no software original, <br>  portanto, o material descrito neste artigo n√£o afirma ser uma solu√ß√£o completa. <br>  Esperamos que as informa√ß√µes aqui apresentadas sejam √∫teis para uma determinada categoria de leitores e, da melhor maneira poss√≠vel e com a disponibilidade de tempo livre, tentaremos responder √†s suas perguntas. <br><br>  Obrigado pelo seu interesse! <br><br><h4>  Recursos </h4><br>  1 <a name="ref1"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PDF - Unidade flash incorporada (EFD) mDOC H3 com software de gerenciamento de flash incorporado TrueFFS</a> <br>  2) <a name="ref2"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PDF - Programa√ß√£o de mem√≥rias flash mDOC H3 usando programadores de dispositivos Dataman</a> <br>  3) <a name="ref3"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PDF - Software_Utilities_TrueFFS_7.1</a> <br>  4) <a name="PG4UW"></a>  <a href="">Software de controle Dataman - PG4UW</a> <br>  5) <a name="linux"></a>  <a href="">Implementa√ß√£o do driver mDOC H3 para Linux (o desempenho n√£o foi testado)</a> <br>  6 <a name="refSrcHost"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Arquivos de origem do programador host (Visual Studio 2017).</a> <br>  7) <a name="refSrcModule"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Arquivos de origem do m√≥dulo de software (IAR Embedded Workbench for ARM v8.30.1).</a> <br>  8) <a name="refSrcFPGA"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Arquivos de origem para FPGA XILINX XC2S50E (XILINX ISE 10.1).</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430634/">https://habr.com/ru/post/pt430634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430620/index.html">Pensamento funcional. Parte 4</a></li>
<li><a href="../pt430622/index.html">Pensamento funcional. Parte 5</a></li>
<li><a href="../pt430626/index.html">An√∫ncio do Meetup de Moscow GraphQL</a></li>
<li><a href="../pt430628/index.html">Algoritmo da Fortune, detalhes de implementa√ß√£o</a></li>
<li><a href="../pt430632/index.html">Servi√ßos nos neg√≥cios: como varejistas estrangeiros abrem lojas prontas na R√∫ssia</a></li>
<li><a href="../pt430636/index.html">Cerebelo e n√∫cleos basais em vez da bola de cristal: como o c√©rebro prediz o futuro</a></li>
<li><a href="../pt430640/index.html">Mar Vermelho: por que as a√ß√µes da Apple e outras empresas de tecnologia est√£o caindo</a></li>
<li><a href="../pt430642/index.html">Dire√ß√£o "Fot√¥nica" nas Olimp√≠adas "Eu sou um profissional", ou como se inscrever em uma magistratura sem exames</a></li>
<li><a href="../pt430644/index.html">Uma nova vulnerabilidade no Facebook leva ao vazamento de dados pessoais dos usu√°rios</a></li>
<li><a href="../pt430646/index.html">Serializa√ß√£o .Net bin√°ria sem refer√™ncia ao assembly com o tipo de origem ou como negociar com BinaryFormatter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>