<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë® üéÑ üßõüèø El titulo sera diferente ‚òùüèæ üçì üòà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si est√° desarrollando un producto para el mercado masivo, lo m√°s probable es que las personas con baja visi√≥n lo usen. Si se esfuerza por crear interf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El titulo sera diferente</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/452226/">  Si est√° desarrollando un producto para el mercado masivo, lo m√°s probable es que las personas con baja visi√≥n lo usen.  Si se esfuerza por crear interfaces f√°ciles de usar, debe hacerlo convenientemente para todos los clientes, incluidas las personas con baja visi√≥n.  Creo que a menudo nos olvidamos de eso.  Y es hora de arreglarlo. <br><br><img src="https://habrastorage.org/webt/vl/d_/dg/vld_dgvbru6qn4h7vwhdjzhh2r0.png"><br><a name="habracut"></a><br>  Ingres√© la consulta "entrega de pizza" en la b√∫squeda en la App Store, descargu√© las primeras 24 aplicaciones y verifiqu√© cu√°l de ellas proporciona una interfaz para personas con baja visi√≥n. <br><br><img src="https://habrastorage.org/webt/gc/g_/r-/gcg_r-5lktwzdhejhfqkcxlwkfm.png"><br><br>  <b>2 de 24</b> .  Y parece que uno de los dos lo hizo por accidente: a medida que aumenta el tama√±o de la fuente, toda la interfaz "flota" y se vuelve m√°s dif√≠cil de usar.  Es triste <br><br>  550,000 personas usan la aplicaci√≥n Dodo Pizza para iOS cada mes.  Incluso si el 1% de nuestros usuarios tienen una fuente ampliada, son 5500 personas las que se sienten inc√≥modas al usar nuestra aplicaci√≥n.  Lo corregiremos <br><br><h2>  Agregar soporte de tipo din√°mico </h2><br><ol><li>  Utilizamos estilos de texto de sistema din√°mico en lugar de estilos est√°ticos. </li><li> Opcionalmente, habilite la marca de verificaci√≥n Ajusta autom√°ticamente la fuente en las etiquetas de los guiones gr√°ficos.  O, si la etiqueta en el bot√≥n o se crea a trav√©s del c√≥digo, <code>adjustsFontForContentSizeCategory</code> su par√°metro <code>adjustsFontForContentSizeCategory</code> . </li><li>  Ense√±amos la interfaz para estirar a diferentes tama√±os de fuente: <br>  - Utilizamos el c√°lculo autom√°tico de tama√±os de celda donde podemos. <br>  - Donde no podemos: obtenemos la configuraci√≥n de tama√±o de fuente actual y respondemos a los cambios en el m√©todo <code>traitCollectionDidChange</code> . </li><li>  Obtenemos una interfaz que es imposible de usar. </li></ol><br><br> <a href=""><img src="https://habrastorage.org/webt/vg/sj/qa/vgsjqakh4zfv-lcere3iv0rptk0.png"></a> <br><br><h2>  Cambiamos la interfaz para que pueda usarse </h2><br>  Retrocedemos y empezamos a pensar c√≥mo hacer todo bien. <br><br><h3>  Usa correctamente el lugar en el men√∫ </h3><br>  Ahora hay mucho espacio vac√≠o debajo de la imagen de la pizza.  Tratemos de poner una imagen encima del nombre: de esta manera se agrandar√° y el espacio vac√≠o desaparecer√°.  Para hacer esto, <code>UIStackView</code> imagen y veremos <code>UIStackView</code> contenedor con todo lo dem√°s en <code>UIStackView</code> , y luego <code>UIStackView</code> la direcci√≥n de la vista de pila si es necesario. <br><br> <a href=""><img src="https://habrastorage.org/webt/dt/s_/vg/dts_vgharid2k9v5r9yvqxu1cto.png"></a> <br><br>  No tenemos separadores entre los elementos del men√∫, por lo que cuando el tama√±o es grande, las celdas comienzan a "pegarse" y el precio de la pizza est√° demasiado cerca de la imagen de la pr√≥xima pizza.  Intentemos agregar un separador. <br><br> <a href=""><img src="https://habrastorage.org/webt/tl/8t/yf/tl8tyfcp3bir8nju3ziwcxcbozi.png"></a> <br><br>  No es eso  En primer lugar, se ve m√°s o menos.  En segundo lugar, ser√° dif√≠cil de ver para las personas con baja visi√≥n.  Incluso si se vuelve a pintar de gris a negro. <br><br>  Lo retiramos y tratamos de aumentar Internet entre las c√©lulas. <br><br> <a href=""><img src="https://habrastorage.org/webt/7b/kq/m8/7bkqm8wzzu5dayijekqfmik_0qw.png"></a> <br><br>  Ahora entonces. <br><br>  Subtotal: usa m√°s espacio, los ojos saltan menos de l√≠nea en l√≠nea, la lectura se ha vuelto m√°s f√°cil. <br><br><h3>  Mejoramos estiramiento y remoci√≥n </h3><br>  Ahora puede aumentar el ancho del bot√≥n Agregar al carrito, de lo contrario, flotar√° hacia la izquierda y no estar√° debajo de su dedo, aunque hay mucho espacio vac√≠o a la derecha.  Puede, por supuesto, simplemente moverlo hacia el lado derecho, pero luego ser√° inconveniente para las personas zurdas y, en general, hagamos mejores gestos que los no comprimidos.  Y haremos que el trazo sea m√°s grueso, y ahora no es consistente con la fuente. <br><br> <a href=""><img src="https://habrastorage.org/webt/ew/en/c8/ewenc8ziqn0o7ffnkvvzbo5a7o4.png"></a> <br><br>  Miro todo esto y entiendo que la foto de la pizza, por supuesto, es muy grande.  Tratemos de ocultarlo, tal vez sin im√°genes que pueda vivir. <br><br> <a href=""><img src="https://habrastorage.org/webt/pp/pk/1q/pppk1qwmxxbayqrk5kula3oxfgg.png"></a> <br><br>  En general, un men√∫ sin fotos no ha perdido mucha informaci√≥n, pero ahora un elemento del men√∫ casi siempre interfiere con la pantalla de un iPhone 6S.  Pero se ha vuelto menos atractivo, Drool no fluye al desplazarse.  Tal  Por ahora, dej√©moslo as√≠, piense detenidamente y tal vez luego devuelva la imagen. <br><br><h3>  No te olvides de marcar "en vivo" </h3><br>  Ahora categor√≠as.  En general, incluso con el primer enfoque result√≥ tolerablemente.  Enciende uno nuevo. <br><br> <a href=""><img src="https://habrastorage.org/webt/dj/5z/mi/dj5zmie3v-yr8jceovq9t5xmkhc.png"></a> <br><br>  Trat√© de navegar por el men√∫ y cambiar entre categor√≠as.  Sin embargo, result√≥ mal: todo se desmorona en acci√≥n.  Al desplazarse por el men√∫, las categor√≠as cambian autom√°ticamente, y en pines tan grandes atrae demasiada atenci√≥n. <br><br>  Reemplacemos <code>UICollectionView</code> con un bot√≥n que llamar√° a <code>UIActionSheet</code> . <br><br> <a href=""><img src="https://habrastorage.org/webt/re/c4/fr/rec4frqesfjg5_43ftutrekxw1u.png"></a> <br><br>  Voooot  Ahora puede tomar el panel superior, donde se encuentra la ciudad, las existencias, la direcci√≥n y el c√≥digo promocional. <br><br><h3>  No te olvides de las l√≠neas muy largas. </h3><br>  Primero, hagamos una elecci√≥n de la ciudad.  No hay nada complicado con la fuente en el bot√≥n, pero es interesante ense√±ar a los "tri√°ngulos" a crecer con la fuente.  En nuestro caso, el tri√°ngulo se convirti√≥ en un icono en el bot√≥n, que se mueve hacia el lado derecho a trav√©s de <code>CGAffineTransform</code> .  Otra opci√≥n es recopilar <code>NSAttributedString</code> del texto y el √≠cono del tri√°ngulo, y luego alimentarlo todo al bot√≥n.  Para normalizar el icono, puede usar una imagen vectorial, que necesariamente debe estar en activos con la marca de verificaci√≥n Conservar datos vectoriales. <br><br> <a href=""><img src="https://habrastorage.org/webt/r5/7k/fz/r57kfzbng-bwybworqlvbzunagk.png"></a> <br><blockquote>  El icono del tri√°ngulo es negro y est√° pintado de blanco a trav√©s del c√≥digo.  Y por alguna raz√≥n, con el tama√±o de texto est√°ndar, aparecen artefactos en forma de bordes negros.  Es gracioso  En realidad no  Se cur√≥ poniendo un √≠cono que originalmente era blanco en los activos. </blockquote><br>  Ahora estiramos los dodo-rublos, todo es simple: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/bh/7s/ctbh7styq51y9xt7c3reqc9wdg4.png"></a> <br><br>  Y ahora la pregunta es: ¬øqu√© pasar√° si el nombre de la ciudad resulta ser largo y tenemos muchos dodo-rublos?  En teor√≠a, debes acortar el nombre de la ciudad.  ¬øRecuerdas lo que dije sobre la segunda opci√≥n para agregar dicho √≠cono a un bot√≥n, a trav√©s de <code>NSAttributedString</code> ?  Lo intent√© y ahora hay un problema de que cuando reducimos el t√≠tulo, el √≠cono del tri√°ngulo desaparece, porque ahora es parte del t√≠tulo.  Stosh  Tendremos que devolver la l√≥gica de mover el icono a trav√©s de transformaciones. <br><blockquote>  Si conoce una forma conveniente de mover el icono en el bot√≥n hacia el lado derecho y escalarlo junto con la fuente en el encabezado, des√©chelo en los comentarios, por favor. </blockquote><br><h3>  Meter en </h3><br>  Por fin existencias.  Aqu√≠ necesitas sentarte y pensar.  El t√≠tulo puede ser largo e incluso ahora a veces no cabe en una l√≠nea.  En un tama√±o grande, no le quedar√° bien en absoluto.  Si hace que el panel naranja superior sea de goma y permita que el t√≠tulo de la acci√≥n en un tama√±o grande ocupe varias l√≠neas, entonces el bloque superior ocupar√° la mitad de la pantalla incluso en iPhones grandes, y no tendr√° que recordar acerca de 4S.  Este no es el caso.  Puedes jugar con un dise√±o dentro del cuadro de acci√≥n: haz que la imagen sea cuadrada y toma el lugar vacante como t√≠tulo.  Pero las im√°genes de las existencias se personalizan en un formato espec√≠fico y no se mostrar√°n correctamente en otro.  Esto es imposible <br><br>  Complicado <br><br>  Entonces, pero puedes volver a eliminar completamente las im√°genes y ocupar todo el lugar con un t√≠tulo. <br><br> <a href=""><img src="https://habrastorage.org/webt/pa/uu/q7/pauuq7hzrctfjqof3wt_7fh4x4g.png"></a> <br><br>  Si lo es.  Las manos pican para colorear el fondo bajo el t√≠tulo de la acci√≥n, pero esto afectar√° negativamente la legibilidad.  Y nosotros, como, estamos tratando de mejorarlo.  Por lo tanto, no pintamos nada y pasamos a los dos botones restantes sobre la direcci√≥n y los c√≥digos promocionales. <br><br><h3>  Trabajamos con restricciones estrictas. </h3><br>  Los encabezados en estos botones son irreductibles.  Pero si no se reducen, los botones se deslizar√°n unos sobre otros.  Y s√≠, no puedes ocultar estos botones. <br><br>  Cuando rehice el stock, no quise aumentar la altura del panel naranja superior.  Parece que tiene que hacerlo.  Es bueno que no lo aumentaron en ese momento, de lo contrario ahora habr√≠a aduha.  En general, voy a seleccionar una l√≠nea para cada bot√≥n. <br><br> <a href=""><img src="https://habrastorage.org/webt/zj/nz/qg/zjnzqgtax6ep4jfk8y1_ogs3pgi.png"></a> <br><br>  Ufff, eso es todo.  En cuanto a las fotos apagadas en el men√∫, todav√≠a no estoy seguro.  Alternativamente, puede mostrar solo la mitad de las im√°genes de pizza en lugar de un c√≠rculo completo, pero tenemos media pizza recta en el men√∫, por lo que no funcionar√°, podemos confundir a los usuarios. <br><br>  Comparemos el primer enfoque con el resultado final: <br><br> <a href=""><img src="https://habrastorage.org/webt/tu/eh/m7/tuehm7kleeeivqqaoep4nljpsly.png"></a> <br><br>  Ahora compare el "antes" y el "despu√©s" con una simulaci√≥n de visi√≥n deficiente: <br><br> <a href=""><img src="https://habrastorage.org/webt/y9/rw/re/y9rwrenclvvgw5yzf6ifgz5fu_0.png"></a> <br><br>  No tenga miedo de cambiar la interfaz y los controles.  No hay nada de malo en que alguien vea otro bot√≥n o, por ejemplo, un control deslizante.  Y no es fatal si alguien no ve algo o si el t√≠tulo es diferente. <br><blockquote>  Y no tocamos el <code>UITabBarController</code> , ya que con un tama√±o de texto grande, al salir de la caja con un toque prolongado puede mostrar el icono y el t√≠tulo de la pesta√±a de la misma manera que iOS muestra el cambio en el volumen. </blockquote><br><h2>  Mostramos c√≥mo funciona todo dentro </h2><br>  Cada componente l√≥gico de IU en la aplicaci√≥n Dodo Pizza para iOS se asigna a un <code>UIViewController</code> separado.  Cada uno de estos controladores tiene una <code>UIView</code> asignada a un archivo separado.  Puede leer m√°s sobre esto en nuestros art√≠culos: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Controlador, ¬°t√≥malo con calma!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sacamos el c√≥digo en UIView</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Controlador de cebolla.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rompemos las pantallas en partes</a> <br><br>  La eliminaci√≥n de componentes l√≥gicos de la interfaz de usuario en un <code>UIViewController</code> separado <code>UIViewController</code> simplificado enormemente la tarea de modificar las interfaces a diferentes estados.  Le recomendamos que pruebe este enfoque, incluso si no planea agregar soporte para Dynamic Type: es m√°s f√°cil controlar el estado de las pantallas: responder a cambios en la autorizaci√≥n, derechos, roles, etc. <br><br>  Entonces aqu√≠.  Agregamos una capa adicional entre dicho componente de la interfaz de usuario y su contenedor principal.  Lo tenemos llamado <code>StateViewController</code> . <br><br><img src="https://habrastorage.org/webt/zt/2t/3q/zt2t3qd01qrlnmjiem-ihzgjb5u.png"><br>  El controlador con el men√∫ integra el controlador de estado y ya incorpora la <code>collection</code> , o el controlador de <code>button</code> . <br><br>  Este <code>StateViewController</code> muestra este o aquel componente de la IU dependiendo de una situaci√≥n. <br><br>  Para hacer esto, <code>StateViewController</code> necesita conocer sus estados y cambiarlos si es necesario. <br><br>  En este ejemplo, <code>StateViewController</code> alternar√° la selecci√≥n de categor√≠as en el men√∫ de la colecci√≥n al bot√≥n y viceversa.  Y en el caso de una pantalla "normal", y en el caso de una pantalla para personas con discapacidad visual, el selector debe ser capaz de hacer lo mismo: <br><br><ul><li>  Mostrar lista de categor√≠as. </li><li>  Resalta la categor√≠a seleccionada. </li><li>  Actualizar lista de categor√≠as. </li><li>  Informe que la categor√≠a "sali√≥". </li></ul><br>  ¬øSientes este maravilloso olor a peque√±os troncos frescos?  Y, no, este es un equipo de pizza m√≥vil entregada por API.  Descanso de 5 minutos. <br><br>  <i>2 rebanadas despu√©s</i> <br>  "... Bueno, envolvemos nuestros componentes as√≠ para seleccionar categor√≠as en los protocolos, ¬°Y SON INMEDIATAMENTE!" <br><blockquote>  Sugerencia: Inicie el Inspector de accesibilidad para verificar f√°cilmente c√≥mo responde la interfaz a los cambios en la configuraci√≥n de mosaico din√°mico.  Para hacer esto, en Xcode abierto, haga clic en Xcode ‚Üí Abrir herramienta de desarrollador ‚Üí Inspector de accesibilidad, seleccione el simulador en el dispositivo y vaya a la √∫ltima pesta√±a </blockquote><br><blockquote>  Otra sugerencia: saque el control de dinamo taip en el iPhone (no en el simulador) al Centro de control para cambiar f√°cil y r√°pidamente el tama√±o del texto.  Para hacer esto, en un iPhone, vaya a Configuraci√≥n ‚Üí Centro de control ‚Üí Personalizar controles y agregue Tama√±o de texto. </blockquote><br>  Llamamos al selector de categor√≠a habitual <code>CategoriesCollectionViewController</code> , y para los discapacitados visuales - <code>CategoriesButtonViewController</code> .  Su protocolo com√∫n se llama <code>CategoriesPickerProtocol</code> .  El controlador de estado general es <code>CategoriesStateViewController</code> . <br><br>  Describimos los posibles estados en nuestro <code>CategoriesStateViewController</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> collection, button }</code> </pre> <br>  Le ense√±amos a mostrar el controlador deseado para cada estado: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> state: <span class="hljs-type"><span class="hljs-type">State</span></span> = .collection { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state != oldValue { updateViewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateController(with: viewController) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> state { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .collection: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesCollectionViewController</span></span>.instantiateFromStoryboard() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .button: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesButtonViewController</span></span>.instantiateFromStoryboard() } }</code> </pre> <br>  <code>instantiateFromStoryboard()</code> : un m√©todo desde una extensi√≥n autoescrita a un controlador de vista, crea una instancia de controlador a partir de guiones gr√°ficos si tienen el mismo nombre.  El c√≥digo est√° en el c√≥digo fuente al final del art√≠culo. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traitCollectionDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> previousTraitCollection: UITraitCollection?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.traitCollectionDidChange(previousTraitCollection) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateStateToCurrentContentSize() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateStateToCurrentContentSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contentSize = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.traitCollection.preferredContentSizeCategory <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateState(to: contentSize) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to contentSize: UIContentSizeCategory)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.state = contentSize.isAccessibilityCategory ? .button : .collection }</code> </pre> <br>  Describimos el protocolo <code>CategoriesPickerProtocol</code> , agregando simult√°neamente dos protocolos m√°s: para el delegado y para el datasure. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesPickerProtocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> datasource: <span class="hljs-type"><span class="hljs-type">CategoriesDatasource?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delegate: <span class="hljs-type"><span class="hljs-type">CategoriesDelegate?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">select</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateCategories</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedCategory: <span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDatasource</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> categories: [<span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(of category: Product.ProductCategory)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productCategoriesView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> categoriesPicker: CategoriesPickerProtocol, didSelect category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> }</code> </pre> <br>  No tiene sentido mostrar la implementaci√≥n, es solo que cada piker muestra las categor√≠as e informa un cambio ascendente. <br><br>  Puede encontrar un ejemplo detallado del uso de controladores de estado para taype din√°mico en mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio en GitHub</a> . <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Por cierto, nos estamos expandiendo</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/452226/">https://habr.com/ru/post/452226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452210/index.html">Bot para VK en Python con MySQL en una hora, parte 2</a></li>
<li><a href="../452212/index.html">C√≥mo mudarse a los EE. UU. Con su inicio: 3 opciones de visa reales, sus caracter√≠sticas y estad√≠sticas</a></li>
<li><a href="../452214/index.html">Las pasant√≠as son carne de ca√±√≥n para tapar agujeros, no "experiencia invaluable y perspectivas de carrera"</a></li>
<li><a href="../452222/index.html">Torres telef√≥nicas aeron√°uticas, el siguiente paso 5G</a></li>
<li><a href="../452224/index.html">La gu√≠a r√°pida para un desarrollador web</a></li>
<li><a href="../452228/index.html">Anna Boyarkina, Miro (anteriormente RealtimeBoard): sobre pensamiento de producto, cultura de equipo, habilidades futuras</a></li>
<li><a href="../452230/index.html">Estudiamos el diodo del t√∫nel en el ejemplo de 3I306M</a></li>
<li><a href="../452232/index.html">ObjectRepository: patr√≥n de repositorio en memoria .NET para sus proyectos dom√©sticos</a></li>
<li><a href="../452234/index.html">Term√≥metro e higr√≥metro en ATMEGA 328P-MU: aumento del nivel de desarrollo de Arduino</a></li>
<li><a href="../452236/index.html">Armon√≠a de scripts dentro de la aplicaci√≥n de Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>