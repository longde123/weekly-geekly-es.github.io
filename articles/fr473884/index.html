<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🎓 ✋ 🤦🏾 Comment décharger des données avec une structure imbriquée de Google BigQuery en utilisant l'exemple des paramètres personnalisés de Google Analytics ☀️ 🐤 🤘🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google BigQuery est une base de données cloud populaire utilisée par les entreprises du monde entier. Il est particulièrement pratique pour travailler...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment décharger des données avec une structure imbriquée de Google BigQuery en utilisant l'exemple des paramètres personnalisés de Google Analytics</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473884/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/5d/bw/ui/5dbwui5nd3dto8kagpfz51vmade.jpeg" alt="image"></div><br>  Google BigQuery est une base de données cloud populaire utilisée par les entreprises du monde entier.  Il est particulièrement pratique pour travailler avec des données Google Analytics brutes: dans GA 360, l'intégration avec BigQuery se configure en quelques clics, et pour la version gratuite, il existe des scripts et des modules tiers. <br><br>  Dans les données brutes de Google Analytics, chaque enregistrement (ligne) correspond à une session.  À l'intérieur d'une telle entrée se trouvent des champs imbriqués qui correspondent aux hits de la session: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ht/nb/7e/htnb7eabrx-hddzh-rirbpkqne4.png" width="300" alt="image"></div><br>  Une telle structure de données imbriquée est souvent déroutante pour les utilisateurs qui ne savent pas comment l'utiliser et décharger ces données. <br><br>  En utilisant les paramètres personnalisés de Google Analytics à titre d'exemple, je vais essayer d'expliquer «sur les doigts» comment les données intégrées sont stockées dans Google BigQuery et comment elles peuvent être téléchargées. <br><br>  Les codes de requête donnés fonctionnent, ils peuvent être utilisés pour résoudre des problèmes, en remplaçant leurs noms de table et les numéros d'index de dimensions personnalisées requis. <a name="habracut"></a><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">• Lignes de déchargement</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">• Déchargement tout en maintenant la structure d'emboîtement</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">• Exemple de remplacement des valeurs des paramètres utilisateur</a> <br><br><h2>  Les bases </h2><br>  BigQuery prend en charge 2 dialectes de SQL: hérité et standard.  Google recommande d'utiliser la nouvelle norme SQL, sur laquelle nous écrirons des requêtes de déchargement. <br>  Tous ceux qui ont travaillé avec SQL au moins un peu connaissent la construction de requête standard: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> *  * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> *  * <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> * *</code> </pre> <br>  Cette conception fonctionne si la structure du tableau est simple, sans autres champs imbriqués dans les cellules: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/o6/gw/1r/o6gw1raxw5zzwy0ql0ofziv3hwu.png" alt="image" width="600"></div><br>  Nous considérons les tables avec des champs imbriqués.  La structure d'un tel tableau (par exemple, les paramètres utilisateur de Google Analytics): <br><br><a name="1"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/fy/tg/cffytgvvdznjq-pb-kbdaww1dn8.png" alt="image" width="600"></div>  <font color="99999"><i>Options GA personnalisées dans BQ</i></font> <br><br>  Dans Google BigQuery, une telle table aura les noms de colonnes suivants (le séparateur "." Affiche la structure d'imbrication): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0w/-h/23/0w-h23uome6_xjhlnm4nc0rjqzm.png" alt="image" width="600"></div><br>  Alors, comment décharger les données des champs imbriqués? <br><br><a name="3"></a><h2>  Déchargement de lignes </h2><br>  Retour au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tableau</a> avec un exemple de paramètres personnalisés GA dans BQ. <br><br>  Les colonnes <i>customDimensions.index</i> et <i>customDimensions.value</i> sont les index et les valeurs de la <b>session</b> et <b>les</b> dimensions personnalisées <b>définies par l'utilisateur</b> . <br><br>  Les colonnes <i>hits.customDimensions.index</i> et <i>hits.customDimensions.value</i> sont les index et les valeurs des dimensions personnalisées <b>frappées</b> . <br><br>  Dans Google BigQuery, il existe un autre niveau d'action des paramètres utilisateur: le produit.  Les noms et les valeurs des dimensions personnalisées du <b>produit</b> dans Google BigQuery se trouvent dans les colonnes <i>hits.product.customDimensions.index</i> et <i>hits.product.customDimensions.value</i> .  Ils sont déchargés par analogie avec les paramètres utilisateur atteints, il vous suffit de prendre en compte un autre niveau d'imbrication. <br><br><h3>  Options utilisateur au niveau de la session et de l'utilisateur </h3><br>  Que devons-nous faire si nous devons décharger les valeurs des dimensions personnalisées de session (personnalisées) pour chaque date sans enregistrer la structure imbriquée (c'est-à-dire ligne par ligne)? <br><br>  Pour répondre à la question, examinons de plus près le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tableau</a> avec les paramètres utilisateur GA dans BQ. <br>  Il montre que les valeurs des cellules de la colonne customDimensions <b>sont un autre tableau</b> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fu/lp/2b/fulp2bysuqjoz_d_ybwypuvwjcy.png" alt="image" width="600"></div><br>  Il suffit de faire une sous-requête à cette table dans la requête principale: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-comment"><span class="hljs-comment">--   date, --    value (SELECT value --   customDimensions,     t FROM t.customDimensions --       WHERE index = 1) AS customDimensions1 FROM --    t     `project.dataset.tablename` AS t</span></span></code> </pre> <br>  La sortie est un tableau: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8m/er/vn/8mervnhyfmqqqhux8nvzcgff4ek.png" alt="image" width="300"></div><br>  Si nous devons ajouter une colonne avec la valeur d'un autre paramètre utilisateur, nous faisons une autre sous-requête: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> t.customDimensions <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> customDimensions1, <span class="hljs-comment"><span class="hljs-comment">--      customDimensions (SELECT value FROM t.customDimensions WHERE index = 2) AS customDimensions2 FROM `project.dataset.tablename` AS t</span></span></code> </pre> <br>  Nous obtenons ce qui suit: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/in/ex/fu/inexfu276z8gmjzusqhzpwikvg4.png" alt="image" width="460"></div><br><h3>  Options personnalisées de niveau d'accès </h3><br>  Les paramètres d'utilisateur de hit sont déchargés de la même manière que ceux de session (utilisateur), sauf que la sous-requête doit être effectuée dans la table des hits imbriqués.  En d'autres termes, les valeurs des cellules de la colonne des hits du tableau de données brutes de Google Analytics sont un tableau imbriqué dans lequel le tableau customDimensions est imbriqué: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/se/cs/du/secsdu6j3nbsosiuifbd3gpqzwc.png" alt="image" width="600"></div><br>  La demande de téléchargement des paramètres utilisateur d'accès ligne par ligne sera la suivante: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-comment"><span class="hljs-comment">--   date, --    value (SELECT value --   customDimensions,     h FROM h.customDimensions --       WHERE index = 3) AS customDimensions3 FROM --    t     `project.dataset.tablename` AS t, --   t.hits  h     t.hits AS h</span></span></code> </pre> <br>  Le résultat de la requête sera une table: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/22/um/ci/22umciavjunefavmc5tfbwkif3g.png" alt="image" width="300"></div><br>  Vous pouvez décharger plusieurs paramètres utilisateur de hit et ajouter le paramètre hitNumber (le numéro de séquence du hit dans la session): <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, h.hitNumber <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> hitNumber, (<span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> h.customDimensions <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> customDimensions3, <span class="hljs-comment"><span class="hljs-comment">--        h.customDimensions (SELECT value FROM h.customDimensions WHERE index = 4) AS customDimensions4 FROM `project.dataset.tablename` AS t, t.hits AS h</span></span></code> </pre> <br>  Obtenez le tableau: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2x/mz/mg/2xmzmg2subtafonus9_mfrtkuvg.png" alt="image" width="600"></div><br><h3>  Session (utilisateur) + paramètres utilisateur hit </h3><br>  Si dans une requête, nous voulons décharger la session et accéder aux paramètres utilisateur, il vous suffit de faire les sous-requêtes nécessaires pour les tables principale et imbriquée: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, h.hitNumber <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> hitNumber, <span class="hljs-comment"><span class="hljs-comment">--     (SELECT value FROM t.customDimensions WHERE index=1) AS customDimensions1, (SELECT value FROM t.customDimensions WHERE index=2) AS customDimensions2, --     (SELECT value FROM h.customDimensions WHERE index=3) AS customDimensions3, (SELECT value FROM h.customDimensions WHERE index=4) AS customDimensions4 FROM `project.dataset.tablename` AS t, t.hits AS h</span></span></code> </pre> <br>  La table qui sera obtenue à la suite de la requête: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fq/9j/vb/fq9jvbaqzkjq4-fkt5dlm0-zbhk.png" alt="image" width="600"></div><br><a name="4"></a><h2>  Déchargement tout en maintenant la structure d'emboîtement </h2><br>  Un tel déchargement peut être nécessaire lors du remplacement des valeurs d'un paramètre utilisateur dans Google BigQuery. <br><br> <i><a name="2"></a></i>  <i><b>Exemple</b></i> <i><br></i>  <i>Dans Google Analytics, le nom du pays au format complet est transféré au paramètre utilisateur de session avec un index de 12 et au paramètre utilisateur hit avec un index de 25 pour les utilisateurs de Russie: RUSSIE.</i>  <i>Il est nécessaire de changer le format du pays en abrégé: RUS.</i> <br><br>  Pour ce faire, vous devez remplacer les valeurs requises du paramètre utilisateur par le pays de l'utilisateur pour l'historique complet des données dans Google BigQuery. <br><br>  La procédure pour résoudre le problème: <br><br><ol><li>  Déchargez toutes les données <b>tout en conservant la structure d'imbrication</b> </li><li>  Remplacez la valeur du paramètre utilisateur par le pays </li><li>  Réécrire le tableau </li></ol><br>  Pour télécharger des données tout en conservant la structure d'imbrication, vous devez utiliser la fonction ARRAY et la construction SELECT AS STRUCT.  Voyons ce que c'est. <br><br>  La syntaxe de la fonction ARRAY est la suivante: <br><br><pre> <code class="sql hljs">ARRAY(**)</code> </pre> <br>  Il renvoie un tableau d'éléments. <br><br>  Comparaison d'un tableau avec un enregistrement ligne par ligne: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/db/c9/j3/dbc9j3wl7upziybxe0sa2sdlu6y.png" alt="image" width="500"></div>  <font color="99999"><i>A gauche, un tableau, à droite, un enregistrement en ligne</i></font> <br><br>  Si nous voulons enregistrer une structure imbriquée et décharger un tableau avec plusieurs colonnes, nous devons utiliser <b>ARRAY (SELECT AS STRUCT ...)</b> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ok/cj/42/okcj42lx7rui7szbgovsnd5ejza.png" alt="image" width="450"></div>  <font color="99999"><i>Tableau imbriqué</i></font> <br><br><h3>  Options utilisateur au niveau de la session et de l'utilisateur </h3><br>  Pour le déchargement tout en conservant la structure des dimensions personnalisées de session (personnalisées), nous utilisons la requête: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-comment"><span class="hljs-comment">--  ARRAY(SELECT AS STRUCT...)    ARRAY(SELECT AS STRUCT index, value FROM t.customDimensions) AS customDimensions FROM `project.dataset.tablename` AS t</span></span></code> </pre> <br>  À la suite de son exécution, une table est obtenue dans laquelle la structure d'imbrication des données Google Analytics «brutes» est enregistrée: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uw/yz/um/uwyzumday5vzrtxyspfrfvizsw4.png" alt="image" width="500"></div><br><h3>  Options personnalisées de niveau d'accès </h3><br>  Pour décharger les valeurs des paramètres utilisateur de hit de Google BigQuery tout en conservant la structure d'imbrication, il est important de noter que la table customDimensions est imbriquée dans la table de hits.  En d'autres termes, vous devez effectuer la sous-requête ARRAY 2 fois (SELECT AS STRUCT ...): d'abord vers la table des hits imbriqués, puis vers la table customDimensions imbriquée: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-comment"><span class="hljs-comment">--    t.hits ARRAY(SELECT AS STRUCT hitNumber, --    h.customDimensions ARRAY(SELECT AS STRUCT index, value FROM h.customDimensions) AS customDimensions FROM t.hits AS h ) AS hits FROM `project.dataset.tablename` AS t</span></span></code> </pre> <br>  Le résultat de cette requête sera une table: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/y9/h2/1j/y9h21jm-5ikmi6qudtwsxlvjuue.png" alt="image" width="600"></div><br><h3>  Session (utilisateur) + paramètres utilisateur hit </h3><br>  Comme pour le déchargement ligne par ligne, nous devons combiner les sous-requêtes ARRAY (SELECT AS STRUCT ...) dans la même requête aux tables imbriquées souhaitées: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-comment"><span class="hljs-comment">--  () Custom Dimensions ARRAY(SELECT AS STRUCT index, value FROM t.customDimensions ) AS customDimensions, --  Custom Dimensions ARRAY(SELECT AS STRUCT hitNumber, ARRAY(SELECT AS STRUCT index, value FROM h.customDimensions ) AS customDimensions FROM t.hits AS h) AS hits FROM `project.dataset.tablename` AS t</span></span></code> </pre> <br>  Quel est le résultat: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/la/3j/a7/la3ja7nvkxbpl7bde-qniru8mvu.png" alt="image" width="600"></div><br><a name="5"></a><h2>  Exemple de remplacement des valeurs des paramètres utilisateur </h2><br>  Revenons à notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple</a> . <br>  Dans la section précédente, nous avons reçu une demande de téléchargement de session (utilisateur) et atteint les paramètres utilisateur de Google Analytics tout en conservant la structure d'imbrication. <br>  Nous complétons cette requête avec les constructions SELECT * REPLACE pour le déchargement avec remplacement et CASE pour la mise à jour des valeurs des paramètres utilisateur nécessaires: <br><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--      t.customDimensions  t.hits SELECT *REPLACE( --  () Custom Dimensions ARRAY(SELECT AS STRUCT index, --      CASE WHEN index=12 AND value='RUSSIA' THEN 'RUS' ELSE value END AS value FROM t.customDimensions) AS customDimensions, --  Custom Dimensions --   t.hits      h.customDimensions ARRAY(SELECT AS STRUCT *REPLACE( ARRAY(SELECT AS STRUCT index, --      CASE WHEN index=25 AND value='RUSSIA' THEN 'RUS' ELSE value END AS value FROM h.customDimensions) AS customDimensions) FROM t.hits AS h) AS hits) FROM `project.dataset.tablename` AS t</span></span></code> </pre> <br>  À la suite de cette demande, nous obtiendrons le tableau d'origine avec les données brutes de Google Analytics.  Elle conservera complètement la structure d'imbrication d'origine, mais les valeurs des paramètres utilisateur nécessaires seront remplacées par de nouvelles. <br><br>  Le sujet de l'utilisation d'une structure de données imbriquée dans Google BigQuery n'est pas facile. <br><br>  J'espère avoir réussi à clarifier ce problème.  Mais, permettez-moi de vous le rappeler, la meilleure façon d'apprendre à faire quelque chose est de pratiquer davantage. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473884/">https://habr.com/ru/post/fr473884/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473868/index.html">Nous regardons la puce chinoise novatek NT78820</a></li>
<li><a href="../fr473872/index.html">Plan de préparation aux entretiens avec les développeurs Java</a></li>
<li><a href="../fr473874/index.html">Le résumé des événements informatiques de novembre (première partie)</a></li>
<li><a href="../fr473880/index.html">BlessRNG ou RNG vérifier l'honnêteté</a></li>
<li><a href="../fr473882/index.html">Introduction aux dépendances fonctionnelles</a></li>
<li><a href="../fr473886/index.html">Station de travail cryptographique basée sur des normes de clé publique. Fonctions d'analyse et de visualisation de la structure ASN1</a></li>
<li><a href="../fr473888/index.html">Nouvelles du monde d'OpenStreetMap n ° 483 (15/10/2019 - 21/10/2019)</a></li>
<li><a href="../fr473890/index.html">Opération Calypso: un nouveau groupe APT attaque des bureaux gouvernementaux dans le monde</a></li>
<li><a href="../fr473894/index.html">Six tâches pour le développeur frontal</a></li>
<li><a href="../fr473904/index.html">Vivaldi 2.9 - Améliorations Améliorations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>