<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äç‚öñÔ∏è ‚¨õÔ∏è üêû MS SQL Backup: un par de caracter√≠sticas √∫tiles de Commvault que no todos conocen üç™ üí∫ üê≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy les contar√© acerca de dos caracter√≠sticas de Commvault para la copia de seguridad de MS SQL que se omiten inmerecidamente: recuperaci√≥n granular y...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MS SQL Backup: un par de caracter√≠sticas √∫tiles de Commvault que no todos conocen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/447666/"><img src="https://habrastorage.org/webt/az/g6/3f/azg63fgl1r4cfr9t0_1-vfrebxo.png"><br><br>  Hoy les contar√© acerca de dos caracter√≠sticas de Commvault para la copia de seguridad de MS SQL que se omiten inmerecidamente: recuperaci√≥n granular y complemento de Commvault para SQL Management Studio.  La configuraci√≥n b√°sica no ser√° considerada.  La publicaci√≥n es m√°s probable para aquellos que ya saben c√≥mo instalar un agente, configurar horarios, pol√≠ticos, etc. Habl√© sobre c√≥mo funciona Commvault y qu√© puede hacer en esta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci√≥n</a> . <br><a name="habracut"></a><br><h3>  Recuperaci√≥n granular </h3><br>  La opci√≥n de <b>restauraci√≥n a nivel de tabla</b> ha aparecido en las propiedades del Subcliente relativamente recientemente.  Le permite habilitar la capacidad de restaurar tablas desde la base de datos, sin restaurar la base de datos completa desde la copia de seguridad.  Esto es conveniente cuando sabe exactamente d√≥nde est√° el error o la p√©rdida de datos.  Adem√°s, la base en s√≠ misma es grande y llevar√° mucho tiempo restaurarla. <br><br><img src="https://habrastorage.org/webt/e9/r-/5m/e9r-5mcu7hen0f9x3txq1rxsuw8.jpeg"><br><br>  Esta opci√≥n tiene limitaciones: <br><br><ul><li>  Las tablas no se pueden restaurar a la base de datos original, solo a otra. </li><li>  Todas las tablas se restauran al esquema dbo.  Una tabla no se puede restaurar a un esquema de usuario. </li><li>  Solo se admite una cuenta de servidor SQL local con derechos de administrador del sistema. </li><li>  El servidor de destino donde estamos restaurando la tabla deber√≠a ejecutarse en Windows. </li><li>  Adem√°s de SQL Agent, Media Agent y Java Runtime Environment deben estar instalados en el servidor de destino. </li><li>  La base de datos debe usar el modelo de recuperaci√≥n en modo completo. </li><li>  Si la opci√≥n de recuperaci√≥n granular de la base de datos est√° habilitada, la capacidad de ejecutar trabajos de copia de seguridad diferencial desaparece. </li></ul><br><img src="https://habrastorage.org/webt/de/88/wt/de88wtsschuzzmp-dcmm1pms7-s.jpeg"><br>  <i>La opci√≥n de restauraci√≥n de nivel de tabla est√° deshabilitada.</i> <br><br><img src="https://habrastorage.org/webt/5d/ea/e5/5deae5vhqzy1jw_8xhwppaldjia.jpeg"><br>  <i>La opci√≥n de restauraci√≥n de nivel de tabla est√° deshabilitada.</i> <br><br>  En mi pr√°ctica, hubo un caso en el que el cliente ten√≠a configurada la siguiente programaci√≥n para el servidor SQL: una copia de seguridad completa una vez por semana y 6 copias de seguridad diferenciales entre semana.  Encendi√≥ la funci√≥n de restauraci√≥n a nivel de tabla y los trabajos de copia de seguridad diferencial se procesaron con un error. <br><br>  Veamos c√≥mo se ver√° la recuperaci√≥n en s√≠. <br><br>  1. Comenzamos la recuperaci√≥n con el agente necesario. <br><br><img src="https://habrastorage.org/webt/e2/p9/wa/e2p9wab_8tnblg6giokx7vnhhuq.jpeg"><br><br>  2. En la ventana que aparece, vaya a la pesta√±a <b>Opciones avanzadas</b> .  Seleccione <b>SQL Granular Browse - Ver contenido.</b> <br><br><img src="https://habrastorage.org/webt/ak/vf/o1/akvfo1b1qes9sgvnft5hbozu86m.jpeg"><br><br>  3. En la lista que se abre, seleccione la base desde la cual restauraremos la tabla y haga clic en <b>Restaurar granular</b> . <br><br><img src="https://habrastorage.org/webt/e5/zp/wo/e5zpwokavkwqhieszf1towlmkm8.jpeg"><br><br>  4. En el cuadro de di√°logo, configure el punto de montaje de la base de datos a partir de los archivos de respaldo (algo as√≠ como la tecnolog√≠a de recuperaci√≥n instant√°nea). <br><br>  Indicamos: <br><br><ul><li>  nombre de la base de datos temporal; </li><li>  cu√°nto tiempo mantener este punto de recuperaci√≥n en d√≠as; </li><li>  servidor donde montaremos la base de datos.  Solo los servidores que cumplan todas las condiciones necesarias mencionadas anteriormente estar√°n disponibles en la lista: con sistema operativo Windows, Agente de medios instalado y Java Runtime Environment, etc. </li></ul><br>  Haz clic en Aceptar. <br><br><img src="https://habrastorage.org/webt/vd/rm/0s/vdrm0s597zro1cduudlfkabs83w.jpeg"><br><br>  5. En la nueva ventana, haga clic en Lista de puntos de recuperaci√≥n. <br><br><img src="https://habrastorage.org/webt/dr/rh/ey/drrheytr4et_xletdcpojpwbmlm.jpeg"><br><br>  6. Se abre una lista de puntos de recuperaci√≥n montados.  Si la base de datos es grande, entonces debe esperar.  Luego haga clic en <b>Examinar</b> .  Aparecer√° una ventana para ver tablas de la base de datos seleccionada. <br><br><img src="https://habrastorage.org/webt/nx/0r/0z/nx0r0zja78oa0jhbbjw7y60xquk.jpeg"><br><br>  Mientras se forma la lista, a menudo se cierran los puntos de di√°logo de recuperaci√≥n, y luego no pueden volver all√≠.  Es simple: haga clic derecho en la instancia del servidor SQL donde se inici√≥ el proceso de montaje del punto de restauraci√≥n.  Vaya a Todas las tareas y seleccione Listar puntos de recuperaci√≥n. <br><br><img src="https://habrastorage.org/webt/_l/b1/5y/_lb15ylva1vqhh82ffp8_mveg2y.jpeg"><br><br>  7. Si hay muchas tablas, llevar√° un tiempo mostrarlas.  Por ejemplo, para una base de datos de 40 GB, se forma una lista de unos diez minutos.  Seleccione la tabla deseada, haga clic en Recuperar todos los seleccionados. <br><br><img src="https://habrastorage.org/webt/7q/rf/jl/7qrfjlvm3e3pyccdaipcozmssqc.jpeg"><br><br>  8. En la nueva ventana, seleccione la base donde restauraremos las tablas.  En nuestro caso, esta es la base GPI TEST. <br><br><img src="https://habrastorage.org/webt/md/46/i2/md46i29vzypakjqlj-vtskacliq.jpeg"><br><br>  9. Una vez completada la recuperaci√≥n, las tablas seleccionadas aparecer√°n en la base de datos GPI TEST. <br><br><img src="https://habrastorage.org/webt/ue/0h/wq/ue0hwqzoktno-_lh1k2d8ux7zrs.jpeg"><br><br>  Despu√©s de restaurar la tabla a una base de datos temporal, se puede transferir a la base de datos original usando Management Studio. <br><br><h3>  Complemento Commvault para SQL Management Studio </h3><br>  Los administradores de bases de datos no siempre tienen acceso al sistema de respaldo (IBS).  A veces es necesario hacer algo con urgencia, pero el administrador del SII no est√° en su lugar.  Usando el complemento Commvault para SQL Management Studio, el DBA podr√° realizar operaciones b√°sicas de copia de seguridad y restauraci√≥n. <br><table><tbody><tr><td>  <b>Versi√≥n de QL Management Studio</b> <br></td><td>  <b>Comando</b> <br></td></tr><tr><td>  SQL 2008 R2 <br></td><td>  CvSQLAddInConfig.exe / i 10 / r <br></td></tr><tr><td>  SQL 2012 <br></td><td>  CvSQLAddInConfig.exe / i 11 / r <br></td></tr><tr><td>  SQL 2014 <br></td><td>  CvSQLAddInConfig.exe / i 12 / r <br></td></tr><tr><td>  SQL 2016 <br></td><td>  CvSQLAddInConfig.exe / i 13 / r <br></td></tr><tr><td>  SQL 2017 <br></td><td>  CvSQLAddInConfig.exe / i 14 / r <br></td></tr></tbody></table><br>  <i>Versiones de servidores SQL que admiten el complemento Commvault y los comandos que activan el complemento.</i>  <i>El complemento solo es compatible con una versi√≥n de Windows de 64 bits.</i> <br><br>  1. Ejecutamos el comando que corresponde a nuestra versi√≥n del servidor SQL: <br><br><img src="https://habrastorage.org/webt/go/qy/zh/goqyzhsrhqzci0buz1zo8biha3e.jpeg"><br><br>  2. Ahora en Management Studio, las opciones de copia de seguridad y recuperaci√≥n est√°n disponibles.  Para hacer esto, haga clic derecho en la base de datos deseada. <br>  Por lo tanto, el administrador, por lo tanto, tuvo la oportunidad de interactuar directamente con las copias de seguridad de esta base de datos sin la consola Commvault y llam√≥ al administrador del SII. <br><br><img src="https://habrastorage.org/webt/pa/5s/b-/pa5sb-xjzyxss86vfzkwgbjmagy.jpeg"><br><br>  3. Al iniciar cualquiera de las funciones disponibles de este men√∫, aparecer√° una ventana solicitando el nombre de usuario y la contrase√±a.  Para conectarse a CommServe, use SSO o cualquier otra cuenta de la secci√≥n Seguridad en Commserve (inicio de sesi√≥n de Commcell). <br><br><img src="https://habrastorage.org/webt/8y/th/8_/8yth8_gnlkmjc_ypieqwua8kof4.jpeg"><br><br><img src="https://habrastorage.org/webt/zy/2o/8m/zy2o8mg49z284ozv5o5pqyqupei.png"><br><br>  4. Si las credenciales se ingresaron correctamente y hay suficientes derechos de acceso, el DBA puede: <br><br><ul><li>  iniciar una copia de seguridad extraordinaria (Copia de seguridad); </li><li>  restaurar la base de datos desde la copia de seguridad (Restaurar); </li><li>  Ver el historial de tareas completadas (Ver historial) y el progreso de las tareas en progreso (Monitor de trabajo). </li></ul><br><img src="https://habrastorage.org/webt/lv/dr/qf/lvdrqfvjvnvyim_rmicorvcdjlo.jpeg"><br>  <i>As√≠ es como Management Studio se parece al historial de trabajos de copia de seguridad completados para la base de datos seleccionada.</i> <br><br><img src="https://habrastorage.org/webt/if/f9/mq/iff9mqi1zhjpidawfpfhr3l3bk4.jpeg"><br>  <i>Men√∫ para la recuperaci√≥n de la base de datos.</i>  <i>Ni siquiera difiere del men√∫ de la consola.</i> <br><br>  Eso es todo acerca de estas dos caracter√≠sticas del Agente SQL de Commvault.  Agregar√© que las copias de seguridad que usan Commvault son m√°s adecuadas para aquellos que tienen docenas de servidores que se ejecutan con varias instancias y bases de datos, todo esto, posiblemente en diferentes sitios, y requieren la configuraci√≥n de diferentes horarios, profundidades, etc. Si tiene un par de servidores, entonces para la copia de seguridad es suficiente y es un medio regular de MS SQL. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuente</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447666/">https://habr.com/ru/post/447666/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447656/index.html">Variabilidad de la evoluci√≥n: nacimiento vivo y puesta de huevos simult√°neamente en lagartos de la especie Saiphos equalis</a></li>
<li><a href="../447658/index.html">Juegos de programaci√≥n de acci√≥n: entretenimiento o una forma de presentar a los ni√±os algoritmos y rob√≥tica</a></li>
<li><a href="../447660/index.html">Qu√© esperar del nuevo Xeon E. Compare con E3 y saque conclusiones</a></li>
<li><a href="../447662/index.html">Grand Express: el primer tren privado en Rusia</a></li>
<li><a href="../447664/index.html">Ventas transversales de an√°lisis de negocios</a></li>
<li><a href="../447668/index.html">Int√©rprete MSH</a></li>
<li><a href="../447670/index.html">Sustituci√≥n de importaciones en la pr√°ctica. Parte 2. El comienzo. Hipervisor</a></li>
<li><a href="../447672/index.html">Cat√°logo de sistemas inform√°ticos de la empresa</a></li>
<li><a href="../447674/index.html">El c√≥digo est√° vivo y muerto. Segunda parte Acciones y propiedades</a></li>
<li><a href="../447676/index.html">Nuevo Mail.ru Mail y qu√© tiene que ver el pulpo con √©l</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>