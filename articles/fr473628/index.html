<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêº üåû ü§πüèΩ C ++ au service de l'orthodontie: entretien avec Mikhail Matrosov, d√©veloppeur CAO chez Align Technology ü•ü üë∏üèª üë∂üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mikhail Matrosov ( mmatrosov ) est un ing√©nieur de d√©veloppement de premier plan au bureau de R & D de Moscou d'Align Technology. Sa sp√©cialisation es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C ++ au service de l'orthodontie: entretien avec Mikhail Matrosov, d√©veloppeur CAO chez Align Technology</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/473628/"><p><img src="https://habrastorage.org/webt/np/h9/sl/nph9sl6bdoehtm2mog9vsbmejsk.png"></p><br><p>  Mikhail Matrosov ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">mmatrosov</a> ) est un ing√©nieur de d√©veloppement de premier plan au bureau de R &amp; D de Moscou d'Align Technology.  Sa sp√©cialisation est tr√®s inhabituelle - il d√©veloppe un syst√®me de CAO sp√©cialis√© pour la conception d'appareils orthodontiques. </p><br><p>  Mikhail participe √† C ++ Russia depuis la toute premi√®re conf√©rence.  Cette ann√©e, au C ++ Russia 2019 Piter, il fera une pr√©sentation sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Qualifiers, Qualifiers and Templates¬ª</a> .  Vous pouvez √©galement le conna√Ætre dans les cours de Yandex <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Fundamentals of C ++ Development: Brown Belt"</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Fundamentals of C ++ Development: Black Belt"</a> √† Coursera, dans la cr√©ation desquels Michael a co-√©crit. </p><br><p>  La conf√©rence est d√©j√† proche, mais pour l'instant, prenez une interview avec Mikhail, o√π nous avons discut√© de son travail chez Align Technology, de la migration du code h√©rit√©, de la pr√©paration de cours et de rapports en ligne, ainsi que des fonctionnalit√©s de C ++.  Des questions ont √©t√© pos√©es par Pavel Filonov (comit√© du programme C ++ Russie) et Oleg Chirukhin (journaliste du groupe JUG Ru). </p><a name="habracut"></a><br><h2>  Au croisement de la technologie et de la m√©decine </h2><br><p>  <b>Pavel:</b> Dites-moi ce que fait votre entreprise. </p><br><p>  <b>Michael:</b> Align Technology est un pionnier et un leader du march√© en orthodontie propre.  C'est une chose qui se fait maintenant partout dans le monde au lieu des accolades.  Si auparavant, un fil m√©tallique a √©t√© plac√© pour le redressement des dents, et ils ont couru avec, maintenant au lieu de cela, vous mettez des prot√®ge-dents en plastique transparent (doublures), qui sont fabriqu√©s individuellement pour chaque patient.  R√©cemment, j'ai test√© sur moi-m√™me les produits de notre entreprise, une sensation tr√®s dr√¥le! </p><br><p>  <b>Pavel:</b> Vous avez donc un tel dogfooding, oui, il s'av√®re? </p><br><p>  <b>Michael:</b> Oui, en quelque sorte.  En fait, si vous ne le savez pas, il est tr√®s difficile de remarquer que la personne est dans les doublures.  √Ä moins qu'au d√©but, par habitude, de petits d√©fauts d'√©locution apparaissent, mais m√™me ils sont difficiles √† remarquer. </p><br><p>  <b>Pavel:</b> Et qu'est-ce que C ++ a √† voir avec ce dont nous parlerons beaucoup aujourd'hui? </p><br><p>  <b>Michael:</b> Excellente question.  Lorsque la soci√©t√© en √©tait √† ses balbutiements, deux Pakistanais joyeux y ont pris du plastique sp√©cial (je ne sais pas d'o√π ils l'ont trouv√©), qui devrait √™tre non toxique et inerte avec de la salive et d'autres substances dans la bouche. </p><br><p>  Ensuite, ils ont pris un mod√®le de la m√¢choire du patient, ce qu'ils ont su faire pendant tr√®s longtemps.  Par exemple, pour fabriquer des couronnes, une personne a re√ßu une bouch√©e de quelque chose comme une p√¢te √† modeler sp√©ciale.  Il y avait un moulage de dents rempli de mati√®re.  Ils ont donc obtenu une copie de la m√¢choire, et ils ont tir√© du plastique dessus (ils l'ont en quelque sorte r√©chauff√©), et l'embout buccal est pr√™t.  Autrement dit, tout ce march√© il y a 20 ans √©tait compl√®tement analogique. </p><br><p>  Maintenant, le volume de production dans la r√©gion de 300 √† 400 000 doublures par jour (veuillez √©valuer l'√©chelle).  Ce sont des manufactures gigantesques, donc elles sont compl√®tement automatis√©es. </p><br><p> Pour cr√©er une doublure, nous imprimons sur un moule d'imprimante 3D sp√©cial.  Il s'agit en fait d'une copie de la m√¢choire du patient pendant le traitement.  Nous mod√©lisons l'apparence de la m√¢choire dans une semaine, deux, mois, ann√©e.  Ensuite, nous commen√ßons le processus de thermoformage - nous prenons un ruban en plastique, le chauffons et le tirons sur le moule.  Coupez et obtenez une doublure en plastique. </p><br><p>  Pour le moment, personne ne jette d√©j√† des patients et ils utilisent des scanners intra-oraux tridimensionnels.  Nous avons des gars qui font √ßa dans un bureau voisin.  C'est probablement la partie la plus ¬´wow¬ª de notre production.  L√†, en temps r√©el, une buse sp√©ciale m√®ne le long de la m√¢choire et construit sa forme.  Les informations sont t√©l√©charg√©es sur les serveurs de l'entreprise, trait√©es et envoy√©es √† nos sp√©cialistes (techniciens).  Ils peuvent modifier l'analyse, supprimer le bruit. </p><br><p>  Ensuite, le traitement est pr√©vu dans un syst√®me de CAO sp√©cialis√©.  C'est une chose tr√®s compliqu√©e, car personne ne sait quelle est la bonne bouch√©e.  Chaque m√©decin a sa propre opinion √† ce sujet.  Nous travaillons actuellement √† formaliser les approches de traitement, mais ce n'est pas encore dans la prod. </p><br><p>  Mais revenons au C ++.  Il y a un tel probl√®me, par exemple.  Les moules sont imprim√©s sur une imprimante 3D sp√©ciale utilisant la technologie de st√©r√©olithographie laser.  Il y a une grande cuve avec un liquide photopolym√®re sp√©cial.  Ils brillent dessus avec un laser et √ßa durcit.  D'abord, ils brillent tout en bas du mod√®le imprim√©, puis un peu plus haut, encore plus haut, etc.  Et donc, √† l'int√©rieur du fluide, un mod√®le solide appara√Æt de bas en haut en couches. </p><br><p>  L'impression d'un moule √† la fois ne serait pas pratique.  La cuve est assez grande et vous pouvez y mettre une centaine de moules.  Mais ils doivent √™tre dispos√©s de mani√®re compacte.  La forme du moule est similaire √† celle d'un fer √† cheval - c'est-√†-dire non convexe et plut√¥t complexe.  Et ils sont tous diff√©rents.  Il s'av√®re une t√¢che int√©ressante de carreler un rectangle avec des figures complexes. </p><br><p>  Ici, dans cette <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o de l'horodatage sp√©cifi√©, vous</a> pouvez voir √† quoi cela ressemble. </p><br><p>  Ce n'est qu'un exemple, il y a beaucoup de t√¢ches. </p><br><p>  <b>Pavel:</b> Vos descriptions sont comme des calculs de haute technologie.  Des langues comme Fortran y ont historiquement bien perform√©.  Au moins, vous pouvez toujours voir les √©chos.  Pourquoi exactement C ++? </p><br><p>  <b>Michael:</b> Eh bien, pas Fortran, ce serait tr√®s puissant.  Au tout d√©but du d√©veloppement, le produit principal √©tait ce syst√®me de CAO tr√®s sp√©cialis√© - une application de bureau pour Windows.  Par cons√©quent, un langage √©tait n√©cessaire pour un calcul efficace et en m√™me temps pour d√©velopper l'application elle-m√™me.  Il n'y avait pas beaucoup de choix √† l'√©poque - seulement C ++. </p><br><p>  Nous avons maintenant un zoo de langages: JavaScript et TypeScript pour le Web, Java pour les applications mobiles, Go pour les serveurs, Python pour l'automatisation, et il y a beaucoup de petites choses.  Fondamentalement, une pile standard.  Et dans les applications √† forte intensit√© scientifique et complexes en termes de calcul, le C ++ demeure. </p><br><h2>  Plus la position est √©lev√©e, plus les horizons sont larges. </h2><br><p>  <b>Pavel:</b> Vous avez mentionn√© votre position en tant qu'ing√©nieur principal.  Et donc j'ai remarqu√© une telle √©tranget√©.  Si on demandait au d√©veloppeur C ++ novice de votre entreprise ce qu'il faisait, il dirait qu'il faisait tourner une sorte de super framework bas√© sur des mod√®les, qui bas√© sur booststage fait l'√©quilibrage des serveurs, et la technologie tomberait imm√©diatement. </p><br><p>  Lorsqu'on vous demande ce que fait votre entreprise, toute une histoire commence sur l'entreprise: o√π est l'argent, pourquoi est-ce important, etc.  Cela correspond-il d'une mani√®re ou d'une autre √† votre position?  Quelle est cette vision des processus, des technologies, des outils? </p><br><p>  <b>Michael:</b> Oui, peut-√™tre.  Mais en plus, si je commence imm√©diatement √† raconter comment je traverse des arbres (m√™me si je ne le fais pas moi-m√™me), ce ne sera pas clair pour tout le monde.  Par exemple, les mecs de Yandex, Kaspersky Lab peuvent commencer avec la technologie, car tout le monde conna√Æt leurs produits.  Nous parlons de doublures, que peu de gens connaissent.  Par cons√©quent, il est n√©cessaire d'expliquer ce que c'est. </p><br><p>  En ce qui concerne la fa√ßon dont cela est en corr√©lation avec le poste.  Sur ma note, je dois au moins comprendre les √©l√©ments de notre flux de travail des syst√®mes actuels qui fonctionnent ensemble.  Apr√®s tout, si quelque chose change, cela peut affecter la production, le site des m√©decins, l'interface avec laquelle les techniciens, les m√©decins et les analystes commerciaux interagissent.  Autrement dit, il existe une corr√©lation.  Avec la croissance de la note, vous devez mieux voir ce qui se passe dans l'entreprise. </p><br><p>  <b>Pavel:</b> Pensiez-vous comment l'introduction de nouvelles technologies, par exemple celles li√©es au C ++, affecterait le flux de travail?  Peu de gens regardent les nouvelles fonctionnalit√©s de la langue.  Et sinon, dites-nous comment vous avez r√©cemment impl√©ment√© des outils? </p><br><p>  <b>Michael:</b> Je ne me souviens pas du C ++ √† la l√©g√®re.  Si nous prenons les outils, la derni√®re chose que nous avons rat√©e est un syst√®me de journalisation bas√© sur le cloud.  Nous utilisons sp√©cifiquement Splunk pour cela.  Initialement, la plateforme √©tait sous le bureau et la migration vers le cloud bat son plein.  Par cons√©quent, nous acc√©l√©rons, en particulier, la journalisation bas√©e sur le cloud.  Notre gestionnaire a rapidement appris √† faire des demandes et √† cr√©er de magnifiques tableaux de bord, √† afficher des graphiques en temps r√©el.  J'√©tais tr√®s content.  Je l'ai envoy√© √† tout le monde et j'ai dit, voyez comment nous faisons varier le temps de fonctionnement d'un algorithme aussi complexe, quelle est la raison?  Ils ont commenc√© √† comprendre, nous avons r√©alis√© que nous n'avons presque pas de multithreading sur les agents de test.  Quelque chose est constamment introduit. </p><br><h2>  C ++, Legacy, multiplateforme et tout, tout, tout </h2><br><p>  <b>Oleg:</b> Dois-je bien comprendre que vous avez rendu dans le navigateur? </p><br><p>  <b>Michael:</b> Oui, il y en a. </p><br><p>  <b>Oleg: Les</b> technologies des navigateurs sont en constante √©volution.  Cela affecte-t-il en quelque sorte?  Par exemple, le nouveau JS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shading Language</a> , quelque chose comme √ßa. </p><br><p>  <b>Michael:</b> Cela affecte, mais c'est un peu ennuyeux ici.  En termes de rendu, la sc√®ne est assez simple.  Nous n'avons pas d'effets sp√©ciaux incroyables. </p><br><p>  <b>Pavel:</b> Bien.  Mais vous avez dit que vous avez commenc√© avec une application de bureau, o√π C ++ √©tait la meilleure solution qui combinait tous les avantages.  Lorsque l'entreprise a commenc√© √† cro√Ætre avec le produit, vous avez commenc√© √† d√©velopper d'autres plateformes.  Certains codes sont all√©s au navigateur, d'autres au backend, d'autres aux t√©l√©phones portables.  Le noyau ¬´positif¬ª est-il rest√© sur toutes les plateformes? </p><br><p>  <b>Michael:</b> Le passage √† d'autres plateformes a commenc√© il y a deux ans, et pour notre √©chelle, c'est peu de temps.  Par cons√©quent, notre premi√®re solution cloud √©tait un monolithe de bureau, √† partir duquel, en gros, l'interface graphique a √©t√© lanc√©e.  Il y a environ un an et demi, nous avons isol√© le noyau conditionnel et la liaison qui l'entoure, nous avons donc pu le compiler et l'ex√©cuter d√©j√† sous Linux.  Ce fut une grande perc√©e.  Linux √©tait important pour nous principalement parce que les machines Linux cloud sont beaucoup moins ch√®res. </p><br><p>  Maintenant, nous voulons s√©parer le noyau informatique en C ++, o√π tous les calculs complexes auront lieu, de la logique m√©tier qui d√©crit ce qu'il faut faire et dans quel ordre, d'o√π vient le cas, quel type de produit, ce que le m√©decin a le droit de faire et ce qui ne l'est pas, et c'est tout. </p><br><p>  <b>Pavel:</b> Vous avez probablement d√©j√† une feuille de route de ce processus, car vous en parlez si bien. </p><br><p>  <b>Michael:</b> Nous avons essay√© plusieurs fois de cr√©er une feuille de route.  Nous comprenons o√π nous semblons √™tre en mesure de bouger, en tenant compte des 20 ans de Legacy (vous ne pouvez pas y arriver avec un demi-dollar, vous devez y penser). </p><br><p>  L'interaction des projets positifs se fait d√©sormais de mani√®re simple.  Parmi celles-ci, ce sont les interfaces C ++ qui ressortent, donc elles ne se r√©unissent que pour s'assurer qu'il n'y a qu'un seul compilateur.  Un total d'environ 250 projets, chacun allant √† sa propre biblioth√®que dynamique.  Et nous les combinons de diff√©rentes mani√®res pour des t√¢ches sp√©cifiques. </p><br><p>  Une dizaine d'√©quipes travaillent sur le syst√®me.  Chaque √©quipe recrute un sous-ensemble de ces projets, g√©n√©ralement 50-70.  Maintenant, nous allons dans le sens o√π certains services seront cr√©√©s sur leur base.  Nous d√©finissons une API stricte pour le service (bas√©e sur protobuf ou quelque chose d'autre), et faisons un sch√©ma standard d'interaction entre les services.  Il est difficile d'appeler le processus la s√©paration du calcul et de la logique, mais ce sont les premi√®res tentatives de composante. </p><br><p>  Mon √©quipe et plusieurs autres ont d√©j√† commenc√© √† le faire.  Vous vous sentez imm√©diatement plus dr√¥le quand vous collectez un monolithe non pas √† partir de 250 projets, mais √† partir de 70 seulement. Et il n'y a plus de situation o√π quelqu'un a chang√© un autre module qui interagit avec des choses apparemment compl√®tement ind√©pendantes, et quelque chose s'est cass√© .  Cela a un effet psychologique cool.  Et pendant que nous essayons de nous √©loigner d'un monolithe de bureau sain en allouant conditionnellement 10 petits monolithes √† nos services. </p><br><p>  <b>Pavel:</b> Et pendant ce processus, vous ne vous √™tes pas demand√© si les modules sur le point d'√™tre promis pour √™tre charg√©s sous une forme ou une autre pourraient l'aider √† n'importe quel niveau? </p><br><p>  <b>Michael: C'est</b> ce processus et le processus de migration Linux que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conan</a> nous a aid√©s.  Nous avons eu un s√©rieux probl√®me avec la gestion de tiers.  J'ai parl√© de la fa√ßon dont nous avons utilis√© Conan au C ++ Russia 2019 √† Moscou. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/PGOvl0dH8lM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Les modules ¬´plus¬ª aideraient √† r√©soudre certains probl√®mes avec le temps de compilation, o√π, en fait, tout a commenc√©, pourquoi tout le monde veut tellement les modules.  R√©utiliser des modules positifs pour interagir avec le service est stupide, car ils communiqueront √† un certain niveau ind√©pendant du langage (protobuf), et √† juste titre.  Peut-√™tre pourrions-nous effectuer la segmentation et ne pas construire nos 250 projets √† partir de la source √† chaque fois, mais les mettre dans les packages de Conan.  Et si, par exemple, le pliage de DLL n'est pas pratique pour certaines raisons, l'assemblage en modules est une option. </p><br><p>  Mais je ne peux pas dire que nous attendons une fonctionnalit√© qui changera notre approche du d√©veloppement. </p><br><p>  <b>Pavel:</b> Vous avez mentionn√© que Conan vous aide √† r√©soudre les probl√®mes de gestion des packages.  √Ä mon avis, il y a environ 3 ans, la communaut√© C ++ n'en parlait que.  Les premiers rapports sont apparus, les premiers pr√©requis.  Et maintenant, vous dites que cela fonctionne d√©j√† en production. </p><br><p>  Parlez-nous de votre exp√©rience d'√©volution de projet.  Le processus de transition √©tait-il douloureux et en valait-il la peine? </p><br><p>  <b>Michael:</b> √áa vaut vraiment le coup.  Nous sommes satisfaits de Conan.  Il y a quelques d√©fauts, mais la gestion des d√©pendances en C ++ est une t√¢che tr√®s difficile.  Par cons√©quent, il est √©vident qu'il n'y aura pas d'outil simple pour le r√©soudre. </p><br><p>  Avec Conan et le processus, nous avons atteint un √©quilibre entre la complexit√© des t√¢ches et des solutions.  Nous avons d'abord dit: ¬´D'accord, nous voulons mettre en √©vidence de nombreux ensembles de compilateurs et de configurations, puis cr√©er des biblioth√®ques dynamiques (plut√¥t que statiques) par d√©faut, faire un certain petit ensemble de restrictions¬ª, et nous avons commenc√© √† construire un syst√®me dans cet ensemble de restrictions.  Nous avons une page wiki ¬´Comment cr√©er une recette Conan pour une biblioth√®que¬ª, qui prend en compte toutes les sp√©cificit√©s de notre syst√®me.  La page est assez grande et pas tr√®s simple.  Mais, encore une fois, nous avons atteint un √©quilibre de complexit√©, donc je suis satisfait de la transition. </p><br><p>  <b>Pavel:</b> Et ici, au fait, lors du prochain C ++ Russia 2019 Piter, Denis Panin de NVIDIA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parlera</a> de l'alternative repr√©sent√©e par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vcpkg</a> .  Serait-il int√©ressant pour vous d'aller au rapport et d'√©couter comment ils fonctionnent dans d'autres outils? </p><br><p>  <b>Michael:</b> Oui, ce serait int√©ressant.  J'ai un peu utilis√© vcpkg, mais, √† mon avis, il y a tr√®s peu de flexibilit√© dans vcpkg.  Et je ne peux pas imaginer comment nous pourrions construire un syst√®me avec nos exigences bas√©es sur vcpkg.  Mais si je dois rapidement prendre et tester une sorte de biblioth√®que, alors je ne la t√©l√©chargerai pas et je ne lirai pas les instructions de construction, que l√† vous devez sp√©cifier comment enregistrer les d√©pendances, c'est tout ce qu'il y a dans la corbeille.  Je vais voir si c'est dans les ports vcpkg.  S'il y en a, mettez-le rapidement, exp√©rimentez-le.  Si tout va bien, je vais lui √©crire une recette de conan. </p><br><p>  <b>Pavel:</b> Continuons sur l'introduction de nouveaux outils et approches.  Avez-vous rencontr√© le fait que les ing√©nieurs courent avec des yeux br√ªlants de la conf√©rence, o√π ils ont √©t√© inform√©s d'une nouvelle chose cool, et ils veulent l'ins√©rer dans le projet?  Comment r√©agissez-vous habituellement √† de telles choses?  Ou alors vous recourez apr√®s chaque conf√©rence? </p><br><p>  <b>Michael:</b> Il y a juste une belle histoire.  Quand je viens de commencer √† travailler dans l'entreprise, ils ont √©crit une fonctionnalit√©, et il fallait en faire une configuration.  De plus, une fonctionnalit√© peut avoir plusieurs versions diff√©rentes et les valeurs de propri√©t√©s sp√©cifiques peuvent √™tre recherch√©es entre diff√©rentes versions.  Et je suis venu avec un sch√©ma bas√© sur YAML cool o√π il y avait l'h√©ritage et la red√©finition des propri√©t√©s.  Il l'a √©crit pendant environ une semaine, l'a couvert de tests.  Et au tout d√©but, le manager est venu vers moi et m'a dit: "√âcoutez, Michael, peut-√™tre que vous n'avez pas besoin de perdre du temps maintenant et de faire un plan si flexible?"  Mais il n'a pas pu me convaincre.  Mes yeux √©taient trop br√ªl√©s. </p><br><p>  Apr√®s quelques ann√©es, je regarde ce code et je ne comprends pas pourquoi il √©tait si difficile √† faire.  Cela arrive, mais heureusement, depuis, je suis devenu plus intelligent.  De plus, les d√©veloppeurs sont g√©n√©ralement des gens tr√®s rationnels, vous pouvez leur parler. </p><br><p>  Auparavant, quelqu'un prenait des d√©cisions douteuses de tiers.  On ne sait pas par qui ils se d√©veloppent, la derni√®re mise √† jour remonte √† 5 ans, il n'a pas √©t√© v√©rifi√© si cela fonctionne sous Linux, ils g√©n√®rent des rapports dans un format propri√©taire que vous ne pouvez convertir en rien.  Et nous sommes assis et ne comprenons pas quoi faire ensuite.  La plupart de ces tiers ont √©t√© ajout√©s il y a de nombreuses ann√©es, mais il arrive que quelque chose de similaire se produise maintenant. </p><br><p>  Par cons√©quent, nous avons trouv√© une chose assez simple - une liste de contr√¥le tierce.  Si vous souhaitez faire glisser un tiers, parcourez simplement les √©l√©ments de la liste de contr√¥le: multiplateforme, niveau de support, licence, quels analogues, niveau de support de d√©veloppement (combien de mainteneurs prennent en charge, quelle communaut√©).  Tous les points sont √©vidents, mais ils sont nombreux, et lorsque vous tapez tiers, vous ne vous souvenez pas de tout de suite.  La situation s'est am√©lior√©e et nous regardons ce qui s'y ajoute. </p><br><p>  Il est √©galement int√©ressant de noter qu‚Äôauparavant, il √©tait facile de faire glisser un tiers et de l‚Äôassembler, par exemple, uniquement dans une version sous ¬´Windows¬ª et 32 ‚Äã‚Äãbits.  Maintenant, en principe, il n'y a pas une telle possibilit√©, car vous devez le mettre dans Conan.  Et si vous faites glisser un tiers, vous devrez vous assurer ou indiquer explicitement que, dans certaines configurations, il ne le fera pas.  Gr√¢ce √† cela, le tiers gauche a commenc√© √† √™tre ajout√© beaucoup moins. </p><br><p>  <b>Oleg:</b> Et qu'en est-il du tiers, qui vit tr√®s peu?  Par exemple, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pad gauche</a> de JavaScript.  Il va sur votre liste de contr√¥le.  Il est souvent mis √† jour, maintenu, r√©alis√© par des packages. </p><br><p>  <b>Michael:</b> Il n'y a rien de tel.  En C ++, le tiers est g√©n√©ralement une chose √©paisse.  Et les solutions tierces qui ex√©cutent de petites fonctions ne sont pas utilis√©es.  En effet, en C ++, il n'est pas si simple d'ajouter des tiers.  Et ce n'est pas JS, dans lequel chacun a son propre module. </p><br><p>  Nous avons conditionnellement retir√© 80 tiers, dont la moiti√© je n'ai jamais vu.  Ou une sorte de g√©om√©trie infernale qui a √©t√© √©crite il y a 15 ans dans une universit√©, et nous l'avons. </p><br><p>  <b>Oleg:</b> Avec Conan, il est facile d'ajouter un tiers. </p><br><p>  <b>Michael:</b> Conan est plus facile, mais toujours loin du m√™me Python o√π vous √©crivez l'installation de pip et vous avez termin√©.  C ++ poss√®de un √©cosyst√®me tr√®s complexe: diff√©rents syst√®mes d'exploitation, compilateurs, cha√Æne d'outils, biblioth√®ques, normes.  La plupart des biblioth√®ques ont un tas d'options. </p><br><p>  Ils aiment nous demander: "Pourquoi √©crivez-vous vos recettes de biblioth√®que, mais ne les prenez-vous pas de Conan-centre?"  J'en ai regard√© p√©riodiquement des recettes, mais elles ne nous conviennent pas.  On va mieux.  Par exemple, nos recettes prennent en charge les symboles de d√©bit et ajoutent une liaison aux sources qui s'y trouvent.  Ainsi, lorsque vous obtenez une biblioth√®que tierce √† partir du d√©bogueur de Visual Studio, les sources sont charg√©es automatiquement. </p><br><p>  Donc, avec Conan, c'est beaucoup mieux, mais encore loin de la commodit√© des autres langues. </p><br><p>  <b>Oleg:</b> Y a-t-il des d√©fauts dans Conan lui-m√™me que je voudrais corriger? </p><br><p>  <b>Michael:</b> Oui, il y a des inconv√©nients, mais techniques. </p><br><p>  Conan dispose de m√©thodes qui sont conditionnellement responsables de la g√©n√©ration de packages et de la connexion des packages g√©n√©r√©s √† votre solution.  Id√©ologiquement, ce sont deux √©tapes diff√©rentes, et je peux en changer une sans changer l'autre.  Lorsque je change la fa√ßon dont les packages sont connect√©s, je ne voudrais pas r√©g√©n√©rer les packages binaires, car ils seront exactement les m√™mes.  Vous ne pouvez pas faire cela dans Conan, car la recette est une entit√©.  Si vous avez modifi√© la recette, vous devez formellement changer la version et g√©n√©rer de nouveaux binaires, ce qui n'est pas pratique. </p><br><h2>  Caract√©ristiques de la transition vers de nouvelles normes </h2><br><p>  <b>Pavel:</b> Parlons de nouvelles normes.  De plus, votre produit a d√©j√† une histoire. </p><br><p>  Nous arrivons maintenant √† la conf√©rence, o√π tous les trois ans, ils nous parlent de nouvelles fonctionnalit√©s merveilleuses.  Par exemple, au C ++ Russia 2019 Piter, il y aura trois rapports sur les changements √† venir dans la langue.  Avez-vous une exp√©rience de la migration de l'ancienne base de code, qui correspondait aux anciennes normes, vers ce qui √©tait ou sera propos√©? </p><br><p>  <b>Mikhail:</b> Oui, j'ai eu une telle exp√©rience, j'en ai un peu parl√© √† C ++ Russia 2019. Nous avons eu une migration de Visual Studio 2013 vers Visual Studio 2017 et gcc, c'est-√†-dire que nous avons simultan√©ment ajout√© le support Linux et mis √† jour les compilateurs de Microsoft. </p><br><p>  Les probl√®mes dans le code √©taient beaucoup moins en comparaison avec les probl√®mes d'organisation, techniques, d'infrastructure, CI et le reste du r√©glage.  Et nos probl√®mes dans le code √©taient principalement li√©s √† UB, qui, apr√®s la mise √† jour du compilateur, a commenc√© √† se d√©clencher.  Bien que C ++ propage la pourriture pendant des ann√©es de compatibilit√© descendante, mais cela aide.  Maintenant, nous compilons tout sous C ++ 17. </p><br><p>  Les vorings ne sont pas synchronis√©s lorsque les d√©veloppeurs collectent sous Windows, poussent dans CI et seulement apr√®s cela, ils commencent √† s'assembler sous Linux.  Mais il n'y a pas eu de probl√®mes importants. </p><br><p>  En C ++ 17, certaines choses obsol√®tes ont √©t√© supprim√©es, mais nous n'avons pass√© que quelques heures √† les supprimer.  Par exemple, la biblioth√®que log4cplus utilisait std :: auto_ptr dans les en-t√™tes, mais dans les nouvelles versions, elle √©tait d√©j√† remplac√©e par std :: unique_ptr, il suffisait donc de simplement mettre √† jour la biblioth√®que. </p><br><p>  La migration vers la nouvelle norme a donc √©t√© relativement indolore.  Et √©tant donn√© la taille de notre base de code, je suis surpris du peu de probl√®mes que nous avons rencontr√©s. </p><br><h2>  √Ä propos de la ceinture marron et noire en C ++ </h2><br><p>  <b>Pavel:</b> Vous et moi parlons d√©j√† des processus existants, o√π travaillent d√©j√† des d√©veloppeurs exp√©riment√©s.  Donnons mati√®re √† r√©flexion aux d√©veloppeurs novices qui ne font qu'apprendre.  Quelle norme C ++ recommanderiez-vous de commencer? </p><br><p>  <b>Michael:</b> Nous devons prendre la derni√®re norme imm√©diatement.  Vous n'apprendrez pas STL dans le m√™me C ++ 98, car STL sans lambdas n'a aucun sens.  Si vous regardez les cours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Fondamentaux du d√©veloppement C ++: Brown Belt"</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"Fondamentaux du d√©veloppement C ++: Black Belt"</a> sur Coursera, alors nous y √©crivons d√©j√† C ++ 17.  Par exemple, nous utilisons des liaisons structur√©es. </p><br><p> <b>:</b> ,     .   ,      . ,            ? </p><br><p> <b>:</b>       ,      .    ,        C++.       ,     C++,    ,       .    ,     ,       .  ,       , , ,    .     ,     .       , ,      ,         Align Technology. </p><br><p> <b>:</b>  ,       ,  .  Pourquoi? </p><br><p> <b>:</b> -,  ‚Äî  .  ,     .          ,     .       ,     ,      ,      . -,  ,      ,   .    . -,       -   ( ),  -,     .    .        .     .      .       . ,       ,  ,   ,    . ,       ,  tutorial     .      -,     ,    . </p><br><h2>    </h2><br><p> <b>:</b> ,    .     ,    .     ? </p><br><p> <b>:</b>    ,    . ,            . </p><br><p> <b>:</b>   ,       ¬´¬ª  .  ,   .     ¬´¬ª  ,      ? </p><br><p> <b>:</b>      ,   ,    .   .        ,  - .   ,   . </p><br><p>        C++  .     ,  .      ,    .  , ,    .       .  -   ,    . </p><br><p>   ,    .       ,  ,    ,   .    ,    .          ¬´  ?¬ª.      ,   . </p><br><p> .     C++ Russia      .      ? </p><br><p> <b>:</b>      .   , ,   .   , ,     .      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a> . </p><br><p> <b>:</b>  ,     .     ,     ?     2015,    2019    2020 ? </p><br><p> <b>:</b>  , ,    ,  ,   .  -    .   ,        ,    ,     .    ,   ,     .   ,        . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  CppCon 2018   </a> .   ,    ,      .  C++ .   ,      ,   . </p><br><p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      .      ,    ‚Äî ,    . </p><br><p> <b>:</b>     ? </p><br><p> <b>:</b>       const, volatile, static, constexpr, inline, extern       .   ,  ,    .. </p><br><p> <b>:</b>      consteval  constinit? </p><br><p> <b>:</b>      .     ,     ,  . ,   3-4     ,  . </p><br><p> <b>:</b> ,  ,  Visual Studio     constexpr? </p><br><p> <b>:</b> Visual Studio   .   ,    . ,   constexpr-. </p><br><p> <b>:</b>     ,    :    ,   ,    . </p><br><p> <b>:</b>   Visual Studio ,    .   ,    2010 :     ,   .    Microsoft   . </p><br><p> <b>:</b>    .       : const, constexpr, constinit, consteval , , final.  final  , , constfinal? </p><br><p> <b>:</b> final,      ,   .     . ,     constfinal,   . </p><br><p> <b>:</b>  ,     ,    ,   ,   .        ? </p><br><p> <b>:</b> ,       ,    .     ,      ,    . </p><br><p> <b>:</b>         ? </p><br><p> <b>:</b> , JUG Ru Group   ,      (). </p><br><p> <b>:</b>      .        ? </p><br><p> <b>:</b> ,   ‚Äî       .           ,   ,  ,   .    . </p><br><p> <b>:</b>   .   ,       ? </p><br><p> <b>:</b> , .         ,     (). </p><br><blockquote>        C++ Russia 2019 Piter   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´,   ¬ª</a> .    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a> . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473628/">https://habr.com/ru/post/fr473628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473608/index.html">Un guide pour comprendre le concept de d√©veloppement d'applications Web modernes</a></li>
<li><a href="../fr473610/index.html">Analyse de la nouvelle console Web Plesk Obsidian</a></li>
<li><a href="../fr473612/index.html">Trait√© sur la broche. R√©flexions sur la configuration et l'utilisation des broches en C ++ pour les microcontr√¥leurs (en utilisant CortexM comme exemple)</a></li>
<li><a href="../fr473614/index.html">Le livre ¬´Head First. Kotlin ¬ª</a></li>
<li><a href="../fr473626/index.html">¬´Le d√©veloppeur veut acheter un avion dans trois ans. Ma t√¢che est de l'aider ¬ª- Denis Pushkin sur la motivation Skyeng</a></li>
<li><a href="../fr473630/index.html">Meilleures pratiques et outils pour d√©velopper des applications iOS</a></li>
<li><a href="../fr473632/index.html">Nous avons vu un article sur Habr</a></li>
<li><a href="../fr473634/index.html">Les lobbies de Comcast interdisent le cryptage DNS</a></li>
<li><a href="../fr473636/index.html">T√©l√©charger 16 Go de torrent via tablette avec 4 Go d'espace libre</a></li>
<li><a href="../fr473638/index.html">Shader n'est pas magique. √âcriture de shaders dans Unity. Pr√©sentation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>