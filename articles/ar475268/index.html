<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ฝโโ๏ธ ๐ฅ ๐๏ธ ูุนููุงุช ุบูุฑ ูุคูุฏุฉ ูุทุฑููุฉ ุนุงูููุฉ ูุฅูุดุงุก ุจููุฉ ุงูุชุทุจูู ูู C ++ ู Java ูุญุฏ ุฃุฏูู. ุงูุณุนุฑ ๐๐ป โพ ๐ฅ๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="C ++ ูู ูุบุฉ ูุฑุจูุฉ ุ ูุงูุนูุจ ุงูุฑุฆูุณู ูู ุตุนูุจุฉ ุฅูุดุงุก ูุชู ูุนุฒููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. ูู ูุดุฑูุน ูููุฐุฌู ุ ูู ูุฐุง ูุชููู ุนูู ูู ุดูุก. ููุถุญ ูุฐุง ุงูููุงู ููููุฉ ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุนููุงุช ุบูุฑ ูุคูุฏุฉ ูุทุฑููุฉ ุนุงูููุฉ ูุฅูุดุงุก ุจููุฉ ุงูุชุทุจูู ูู C ++ ู Java ูุญุฏ ุฃุฏูู. ุงูุณุนุฑ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475268/" style=";text-align:right;direction:rtl">  C ++ ูู ูุบุฉ ูุฑุจูุฉ ุ ูุงูุนูุจ ุงูุฑุฆูุณู ูู ุตุนูุจุฉ ุฅูุดุงุก ูุชู ูุนุฒููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูู ูุดุฑูุน ูููุฐุฌู ุ ูู ูุฐุง ูุชููู ุนูู ูู ุดูุก.  ููุถุญ ูุฐุง ุงูููุงู ููููุฉ ูุชุงุจุฉ ุชุนูููุฉ ุจุฑูุฌูุฉ ุนุงููุฉ ุงูุนุฒู ุชุนุชูุฏ ุงูุญุฏ ุงูุฃุฏูู ุนูู ููุชุจุงุช ูุนููุฉ (ุจูุง ูู ุฐูู ุงูููุชุจุงุช ุงูููุงุณูุฉ) ูุงูุชุทุจููุงุช ุ ููุง ูููู ูู ุงุนุชูุงุฏ ุฃู ุฌุฒุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุนูู ูุฌููุนุฉ ูู ุงููุงุฌูุงุช.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุชู ุงูุชุฑุงุญ ุญููู ูุนูุงุฑูุฉ ููุนููุงุช ุงูููุฏ ุ ูุงูุชู ูุฏ ูุง ุชูู ูุจุฑูุฌู C ++ ูุญุณุจ ุ ูููู ุฃูุถูุง ูุจุฑูุฌู Java.  ูุงูุฃูู ูู ุฐูู ุ ูุฅู ุงูุญู ุงูููุชุฑุญ ุงูุชุตุงุฏู ููุบุงูุฉ ูู ุญูุซ ููุช ุงูุชุทููุฑ. <br><a name="habracut"></a><br>  <i><b>ุฅุฎูุงุก ูุณุคูููุฉ</b></i> : ูู ูุฐุง ุงูููุงู ุ ุฌูุนุช ุฃููุงุฑู ุญูู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงููุซุงููุฉ.  ุจุนุถ ุงูุฃููุงุฑ ููุณุช ุฃููุงุฑู (ููููู ูุง ุฃุชุฐูุฑ ุฃููุงุฑูุง) ุ ูุจุนุถ ุงูุฃููุงุฑ ุดุงุฆุนุฉ ููุนุฑููุฉ ููุฌููุน - ูุฐุง ููุณ ููููุง ุ ูุฃููู ูุง ุฃูุฏู ุฃููุงุฑู ุญูู ุจููุฉ ุฌูุฏุฉ ุ ูููู ุฑูุฒูุง ูุญุฏุฏูุง ูุณูุญ ุจููุงุฑุจุฉ ูุฐู ุงูุจููุฉ ุจุฃูู ุณุนุฑ. <br><br>  <i><b>ุฅุฎูุงุก ุงููุณุฆูููุฉ N2</b></i> : ุณุฃููู ุณุนูุฏูุง ุจุงูุชุนูููุงุช ุงูุจูุงุกุฉ ุงูุชู ุชู ุงูุชุนุจูุฑ ุนููุง ุจุงููููุงุช.  ุฅุฐุง ูููุช ูุง ูู ุฃุณูุฃ ููู ุ ูุจุฎุชูู ุ ููุฐุง ูุนูู ุฃููู ูู ููุงู ูุง ูู ุฃุดุฑุญ ููู ุจูุถูุญ ูุง ูููู ุ ููู ุงูููุทูู ุฅุนุงุฏุฉ ุตูุงุบุฉ ุงููุต.  ุฅุฐุง ูููุช ุฃูุถู ููู ุ ููุฐุง ูุนูู ุฃููู ุณุฃูุชุณุจ ุฎุจุฑุฉ ูููุฉ.  ุดูุฑุง ููุฏูุง. <br><br>  <i><b>ุฅุฎูุงุก ุงููุณุฆูููุฉ N3</b></i> : ููุฏ ูุชุจุช ุชุทุจููุงุช ูุจูุฑุฉ ูู ุงูุจุฏุงูุฉ ุ ููููู ูู ุฃูุชุจ ุชุทุจููุงุช ุงููุคุณุณุงุช ุงูุฎุงุตุฉ ุจุงูุฎูุงุฏู ูุงูุนููู.  ูู ุดูุก ูุฎุชูู ููุงู ุ ูุฑุจูุง ุชุจุฏู ุชุฌุฑุจุชู ุบุฑูุจุฉ ุจุงููุณุจุฉ ูููุชุฎุตุตูู ูู ูุฐุง ุงููุฌุงู.  ูุงูููุงู ููุณ ุนู ุฐูู ุ ูุง ูุชู ุงููุธุฑ ูู ููุณ ูุดุงูู ูุงุจููุฉ ุงูุชูุณุน ููุง ุนูู ุงูุฅุทูุงู. <br>  <i><b>ุฅุฎูุงุก ุงููุณุฆูููุฉ N4</b></i> ( <b>ุงูุชุญุฏูุซ.</b> ุงุณุชูุงุฏูุง ุฅูู ุงูุชุนูููุงุช): ุงูุชุฑุญ ุจุนุถ ุงููุนูููู ุฃู ุฃููู ุจุฅุนุงุฏุฉ ุงุฎุชุฑุงุน ูุงููุฑ ูุชูุฏูู ุฃููุงุท ุชุตููู ูุนุฑููุฉ ููุฐ ูุชุฑุฉ ุทูููุฉ.  ูุฐุง ุจุงูุชุฃููุฏ ููุณ ูู ุงูุญุงู.  ุฃูุชุฑุญ ุฃุฏุงุฉ ุตุบูุฑุฉ ุฌุฏูุง ูููุนููุงุช ุชุชูุญ ูู ุชูููุฐ ูุฐู ุงูุฃููุงุท ุจุญุฏ ุฃุฏูู ูู ุงูุฎุฑุจุดุฉ.  ุจูุง ูู ุฐูู Fowler's Dependency Injection and Service Locator ุ ูููู ููุณ ููุท - ุจุงุณุชุฎุฏุงู ูุฆุฉ TypedSet ุ ููููู ุฃูุถูุง ุชูููุฐ ูุฌููุนุฉ ูู ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูุชุตุงุฏููุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุชู ุงููุตูู ุฅูู ูุงููุฑ ูู ุฎูุงู ุฎุทูุท ุจุงูุธุฉ ุงูุซูู - ุฃุฏุงุชู ุฐุงุช ุงูุชูููุฉ ุงูุตูุฑูุฉ ุ ุงูุชูููุฉ ุงูุตูุฑูุฉ (ุฅุฐุง ูุงูุช ุตุงุฑูุฉ ุชูุงููุง ุ ุซู ูู ุจุชุณุฌูู ุงูุฏุฎูู (N) ุจุฏูุงู ูู 2M * log (N) ุ ุญูุซ M ูู ุทูู ุณูุณูุฉ ุงููุนููุฉ ุงูุฎุงุตุฉ ุจู Service Locator. ุจุนุฏ ุธููุฑ constexpr typeid ูู c ++ 20 ุ ูุฌุจ ุฃู ูุตุจุญ ุงูุณุนุฑ ุตูุฑูุง ุชูุงููุง).  ูุฐูู ุ ุฃุทูุจ ููู ุนุฏู ุชูุณูุน ูุนูู ุงูููุงู ูุชุตููู ุงูุฃููุงุท.  ููุง ุณุชุฌุฏ ููุท <b><i>ุทุฑููุฉ</i></b> ููุชูููุฐ ุงูุฑุฎูุต ููุฐู ุงูุฃููุงุท. <br><br>  ุณุชููู ุงูุฃูุซูุฉ ูู ูุบุฉ C ++ ุ ููู ูู ูุง ุณุจู ูุงุจู ููุชุทุจูู ูู Java.  ุฑุจูุง ุ ุจูุฑูุฑ ุงูููุช ุ ุณุฃูุฏู ุชุนูููุงุช ุจุฑูุฌูุฉ ุตุงูุญุฉ ูุฌุงูุง ุฅุฐุง ูุงู ุทูุจ ุฐูู ุณูููู ูู ุชุนูููุงุช ููู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 1. ุงูุนูุงุฑุฉ ูุฑููุฉ ูู ูุฑุงุบ </h2><br>  ูุจู ุญู ุฌููุน ุงูุตุนูุจุงุช ุจุจุฑุงุนุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุคูุง ุจุดูู ุตุญูุญ.  ุฎูู ุจุจุฑุงุนุฉ ุงูุตุนูุจุงุช ูููุณู ูู ุงูููุงู ุงูููุงุณุจ ุ ููููู ุชุณููู ุญููุง ุฅูู ุญุฏ ูุจูุฑ.  ููุฐุง ุงูุบุฑุถ ุ ูููู ุจุตูุงุบุฉ ูุฏู ููุญู ุงูุฐู ุณูุชูุตู ุฅููู ูุน ุงูุฃุณุงููุจ - ุงูุญุฏ ุงูุฃุฏูู ููุจุงุฏุฆ ุงูุนูุงุฑุฉ ุงูุฌูุฏุฉ. <br><br>  ูู ุงููุงูุน ุ ูุฅู ุณุญุฑ ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงูุฌูุฏุฉ ูู ูุฌุฑุฏ ูุจุฏุฃูู ุ ููุง ูู ููุชูุจ ุฃุฏูุงู ูู ูุฌุฑุฏ ูู ุงูุชุดููุฑ.  ุงููุจุฏุฃ ุงูุฃูู ูู ุงุฎุชุจุงุฑ ุงูููุฏ.  ูุดุจู ุงูุงุฎุชุจุงุฑ ููุถูุน ุฃุฑูุงุฏู ุงูุฐู ูููุฏู ุฅูู ููุฏุณุฉ ุฌูุฏุฉ.  ุฅุฐุง ููุช ูุง ุชุนุฑู ููููุฉ ูุชุงุจุฉ ุงุฎุชุจุงุฑ ูููุธููุฉ ุ ูููุช ุจุชุฏููุฑ ุงูุจููุฉ.  ุฅุฐุง ููุช ูุง ุชุนุฑู ููููุฉ ุฅูุดุงุก ุจููุฉ ุฌูุฏุฉ ุ ููุฑ ูู ูุง ุณูููู ุนููู ุงูุงุฎุชุจุงุฑ ูููุธููุฉ ุงูุชู ุฎุทุทุช ููุง - ูุณุชููู ุชููุงุฆููุง ุจุฅูุดุงุก ุดุฑูุท ูู ุงูุฌูุฏุฉ ุงููุนูุงุฑูุฉ ูููุณู ุ ูุนุงูู ุงููุณุชูู.  ุชุนูู ุงูุฃููุงุฑ ุงูุชู ูุชู ุฅุฌุฑุงุคูุง ุนูู ุงูุงุฎุชุจุงุฑุงุช ุชููุงุฆููุง ุนูู ุฒูุงุฏุฉ ุงููุญุฏุงุช ุงูููุทูุฉ ูุชูููู ุงูุงุชุตุงู ูุฌุนู ุงูุจููุฉ ุฃูุซุฑ ููุทููุฉ. <br><br>  ูุฃูุง ูุง ุฃูุตุฏ TDD.  ูุฑุถ ูููุฐุฌู ููุนุฏูุฏ ูู ุงููุจุฑูุฌูู ูู ุงูุนุจุงุฏุฉ ุงูุฏูููุฉ ููุชูููุงุช ุงูุชู ุชูุฑุฃ ูู ููุงู ูุง ุฏูู ููู ุญุฏูุฏ ูุนุงููุชูุง.  ูุนุชุจุฑ TDD ุฌูุฏูุง ุนูุฏูุง ูุนูู ุงูุนุฏูุฏ ูู ุงููุจุฑูุฌูู ุนูู ุงูููุฏ ุ ูุนูุฏูุง ูููู ููุงู ูุณู ููุงุฎุชุจุงุฑ ุ ููุฏู ุงูุณูุทุงุช ููู ููุงุฐุง ููุงู ุญุงุฌุฉ ุฅูู ููุงุฑุณุงุช ุงูุชุฑููุฒ ุงูุฌูุฏุฉ ููู ุนูู ุงุณุชุนุฏุงุฏ ูุฏูุน ููุณ ููุท ูุจุนุถ ุงูููุฏ ุงูุฐู ูุญู ุงููุดููุฉ ุ ูููู ุฃูุถูุง ูููุซูููุชูุง.  ุฅุฐุง ูุงู ุฑุคุณุงุกู ุบูุฑ ูุณุชุนุฏูู ููุฏูุน ุ ูุณุชุถุทุฑ ุฅูู ุงูุนูู ุจุดูู ุงูุชุตุงุฏู ุฃูุซุฑ.  ููุน ุฐูู ุ ูุง ูุฒุงู ูุชุนูู ุนููู ุงุฎุชุจุงุฑ ุงูููุฏ - ูุง ูู ููู ูุฏูู ุ ุจุทุจูุนุฉ ุงูุญุงู ุ ุดุนูุฑ ุจุงูุญูุงุธ ุนูู ุงูููุณ. <br><br>  ุงููุจุฏุฃ ุงูุซุงูู ูู ููุทูุฉ.  ุจุชุนุจูุฑ ุฃุฏู ุ ููุทูุฉ ูุนุฒููุฉ ููุบุงูุฉ ุฏูู ุงุณุชุฎุฏุงู ุงูููุชุจุงุช / ุงููุฑุต ุงูุซุงุจุช ุบูุฑ ุงููุฑุชุจุทุฉ ุจุงููุญุฏุฉ ููุณูุง.  ุงูุขู ุนูุฏ ุชุตููู ุจููุงุช ุงูุฎูุงุฏู ุ ูู ุงููุฃููู ุชูุณูู ุงููุชุฑุงุตุฉ ุฅูู ุฎุฏูุงุช ูููุฑููุฉ.  ุณูู ุฃุฎุจุฑู ุจุณุฑ ูุธูุน - ูู ูุญุฏุฉ ูู ุงููุชุฑุงุตุฉ ูุฌุจ ุฃู ุชููู ูุซู ุฎุฏูุฉ ูุฌูุฑูุฉ.  ุจูุนูู ุฃูู ูุฌุจ ุฃู ุชุจุฑุฒ ุจุณูููุฉ ูู ุงูุดูุฑุฉ ุงูุนุงูุฉ ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุฑุคูุณ ุงููุชุตูุฉ ูู ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ.  ูู ููู ุงูุฃูุฑ ูุงุถุญูุง ุจุนุฏ ุ ููููู ุณุฃุดุฑุญ ูุน ูุซุงู: ูู ุณุจู ูู ุฃู ุญุงููุช ุชุฎุตูุต share_ptr ูู ุฏูุนุฉุ  ุฅุฐุง ุชูููุช ูู ููุณ ุงูููุช ูู ุณุญุจ ููุณ ููุท ุงูุฏุงุนู ุจุงููุงูู ุ ูููู ูุตู ููุงุฏู ุงูุฎุงู ููุท ุ ููุฐุง ูุนูู ุฃูู ูุชูุช ุซูุงุซุฉ ุฅูู ุฎูุณุฉ ุฃูุงู ูุชููู ุงูุฅุฏูุงูุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ !!!  ูู ุงูููุช ููุณู ุ ููููู ุณุญุจ ุญูููุฉ ุฃู Shared_ptr ุจุงูุชุฃููุฏ ููุณ ูุฏููุง ูุง ุชูุนูู !!! <br><br>  ุฅููุง ุฃุณูุฃ ูู ุงูุฎุทุฃ - ุฅููุง ุฌุฑููุฉ ูุนูุงุฑูุฉ. <br><br>  ูู ุฎูุงู ุจููุฉ ุฌูุฏุฉ ุ ูุฌุจ ุฃู ุชููู ูุงุฏุฑูุง ุนูู ูุฏู Shared_ptr ุ ุฏูู ุฃู ุฃูู ุฃู ุงุณุชุจุฏุงู ูู ุดูุก ุบูุฑ ูุฑุชุจุท ุจู Shared_ptr ุจุฅุตุฏุงุฑุงุช ุชุฌุฑูุจูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุณุฎุฉ ุชุฌุฑูุจูุฉ ูู ุงููุฎุตุต.  ุฃู ููุณู ุฏูุนุฉ.  ุฏุนูุง ูููู ุฃูู ุชูุชุจ ูุญูู xml / html.  ุชุญุชุงุฌ ุฅูู ุงูุนูู ุจุงุณุชุฎุฏุงู ุณูุงุณู ูุงูุนูู ูุน ูููุงุช ูููุญูู ุงููุบูู.  ูุฅุฐุง ููุง ูุชุญุฏุซ ุนู ุจููุฉ ูุซุงููุฉ ูุง ุชุฑุชุจุท ุจุงุญุชูุงุฌุงุช ุดุฑูุฉ ุฅูุชุงุฌ / ุจุฑุงูุฌ ูุนููุฉ ุ ูุจุงููุณุจุฉ ุฅูู ูุญูู ูููุฏุณุฉ ูุนูุงุฑูุฉ ูุซุงููุฉ ุ ูุง ูุญู ููุง ุงุณุชุฎุฏุงู ุนูููุงุช ุงูุจุญุซ std :: istream ู std :: file_system ู std :: string ู hardcode ูุน ุณูุงุณู ูู ุงููุญูู ุงููุบูู.  ูุฌุจ ุฃู ููุฏู ูุงุฌูุฉ ุฏูู ุ ูุงุฌูุฉ ูุนูููุงุช ุงููููุงุช (ุฑุจูุง ููุณูุฉ ุฅูู ูุงุฌูุงุช ูุฑุนูุฉ ุ ูููู ูุง ูุฒุงู ูุชุนูู ุงููุตูู ุฅูู ูุงุฌูุงุช ูุฑุนูุฉ ูู ุฎูุงู ูุงุฌูุฉ ูุญุฏุฉ ุนูููุงุช ุงููููุงุช) ุ ูุงุฌูุฉ ููุนูู ูุน ุงูุณูุงุณู ุ ูุงุฌูุฉ ุงูุชุฎุตูุต ุ ููุงุฌูุฉ ูุซุงููุฉ ููุฎุท ููุณู.  ูุชูุฌุฉ ูุฐูู ุ ูููููุง ุงุณุชุจุฏุงู ูู ูุง ูุง ูุฑุชุจุท ุจุงูุชุญููู ุจูุฑุงุบุงุช ุงุฎุชุจุงุฑ ุ ุฃู ุฅุฏุฑุงุฌ ูุณุฎุฉ ุชุฌุฑูุจูุฉ ูู ุฃุฏุงุฉ ุงูุชุฎุตูุต / ุงูุนูู ูุน ุงููููุงุช / ุงูุจุญุซ ูู ุณูุณูุฉ ูุน ูุญูุตุงุช ุฅุถุงููุฉ.  ูุณูุฒุฏุงุฏ ุชุนุฏุฏ ุงุณุชุฎุฏุงูุงุช ุงูุญู - ุบุฏูุง ุ ุชุญุช ูุงุฌูุฉ ุงูุจุซ ูู ูููู ููุงู ููู ุ ูููู ูููุนูุง ูุง ูู ููุงู ูุง ุนูู ุงูุฅูุชุฑูุช ุ ููู ููุงุญุธู ุฃุญุฏ.  ููููู ุงุณุชุจุฏุงู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุจู Qt ุ ุซู ุงูุชุจุฏูู ุฅูู Visual c ++ ุ ุซู ุงูุจุฏุก ูู ุงุณุชุฎุฏุงู ุฃุดูุงุก Linux ููุท - ูุณุชููู ุงูุชุนุฏููุงุช ุถุฆููุฉ.  ุจุงุนุชุจุงุฑู ููุณุฏูุง ุ ุณุฃููู ุฃูู ูู ุฎูุงู ูุฐุง ุงูููุฌ ุ ููุดุฃ ุณุคุงู ุงูุณุนุฑ ูู ููู ูุงูู - ูุชุบุทูุฉ ูู ุดูุก ูุน ูุงุฌูุงุช ุ ุจูุง ูู ุฐูู ุนูุงุตุฑ ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ุจุงูุธ ุงูุซูู ุ ููู ูุฐุง ููุณ ูุฏููุง ุ ูููู ุญู. <br><br>  ุจุดูู ุนุงู ุ ูุนุชุจุฑ ูุจุฏุฃ ุงููุญุฏุฉ ุงูููุทูุฉ ุงูุฌุฐุฑูุฉ ููุง ูู ูุนูู ูู ูุฐู ุงูููุงูุฉ ููุทุฉ ุญุณุงุณุฉ ูู C ++ ูุฑูุฒ ุฒุงุฆุฏ ูููุฐุฌู ุนููููุง.  ุฅุฐุง ููุช ุจุฅูุดุงุก ูููุงุช ุชุนุฑูู ููุงุฌูุงุช ูููุตูุฉ ุจุดูู ูููุตู ุนู ุงูุชุทุจููุงุช ุ ููุง ูุฒุงู ุจุฅููุงูู ุฅูุดุงุก ุงุณุชููุงููุฉ / ุนุฒู ููููุงุช cpp ุนู ุจุนุถูุง ุงูุจุนุถ ุ ุซู ุ ูุณุจููุง ุ ูููุณ 100ูช ุ ูุชู ุนุงุฏุฉู ูุณุฌ ุงูุฑุคูุณ ูู ูุชุฑุงุตุฉ ุตูุจุฉ ุ ูุงูุชู ูุง ูููู ุฅุฒุงูุชูุง ุฏูู ุฃู ูุญูู.  ูุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ูู ุชุฃุซูุฑ ุฑููุจ ุนูู ููุช ุงูุชุฌููุน ุ ุฅูุง ุฃูู.  ุนูุงูุฉ ุนูู ุฐูู ุ ุญุชู ูู ุชู ุชุญููู ุงุณุชููุงู ุงูุนูุงููู ุ ูุฅู ูุฐุง ูุนูู ุชููุงุฆููุง ุนุฏู ุงููุฏุฑุฉ ุนูู ุชุฌููุน ุงูุทุจูุงุช.  ูู ุงููุงูุน ุ ูุฅู ุงูุทุฑููุฉ ุงููุญูุฏุฉ ูุชุญููู ุงุณุชููุงู ูู ูู ูููุงุช .cpp ูุงูุฑุคูุณ ูู c ++ ูู ุงูุชุตุฑูุญ ุนู ุงููุฆุงุช ุงููุณุชุฎุฏูุฉ ูุณุจููุง (ุฏูู ุชุนุฑูููุง) ุ ุซู ุงุณุชุฎุฏุงู ุงููุคุดุฑุงุช ุงูุฎุงุตุฉ ุจูุง ููุท.  ุจูุฌุฑุฏ ุงุณุชุฎุฏุงู ุงููุฆุฉ ููุณูุง ุจุฏูุงู ูู ูุคุดุฑ ุงููุฆุฉ ูู ููู ุงูุฑุฃุณ (ุฃู ุ ุชุฌููุนูุง) ุ ุณุชููู ุจุฅูุดุงุก ูุฌููุนุฉ ูู ุฌููุน .cpp-shniks ุงูุชู ุชุชุถูู ูุฐุง ุงูุนููุงู ุ ูุฃู .cpp-shnik ูุญุชูู ุนูู ุชุนุฑูู ุงููุฆุฉ.  ูุง ูุฒุงู ููุงู fastpimpl ุ ูููู ูุถููู ููุท ูุฅูุดุงุก ุชุจุนูุงุช ุนูู ูุณุชูู ุญุฒุจ ุงูุดุนุจ ุงูููุจูุฏู. <br><br>  ูุฐูู ุ ุจุงููุณุจุฉ ูุจููุฉ ุฌูุฏุฉ ุ ูุฅู ุนุฒู ุงููุญุฏุงุช ุฃูุฑ ููู - ุงููุฏุฑุฉ ุนูู ุณุญุจ ูุญุฏุฉ ูุงุญุฏุฉ ูุน ุงูุนููุงู ุงูุฃูู ุงูุฐู ูุฑุจุท ุจูู ูุญุฏุงุช ุงููุงูุฑู ูุฃููุงุน ุงูููุชุจุฉ ุงูุฑุฆูุณูุฉ ุ ูุน ุนููุงู ุซุงูู ููุฅุนูุงูุงุช ูุงูุนุฏูุฏ ูู ุงูุงุฏุฑุงุฌ ุงูุชู ุชุฑุจุท ูุฌููุนุฉ ูู ุงููุงุฌูุงุช.  ูููุท ูุง ูุชุนูู ุจูุฐู ุงููุธููุฉ ุ ููุฌุจ ุชุฎุฒูู ูู ุดูุก ุขุฎุฑ ูู ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุฃุฎุฑู ููููู ุงููุตูู ุฅูููุง ููุท ูู ุฎูุงู ูุงุฌูุงุช. <br><br>  ูุฐูุฑ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ ููููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงูุฌูุฏุฉ ุ ุจูุง ูู ุฐูู ุงูููุงุท ุงููุดุงุฑ ุฅูููุง ุฃุนูุงู ุ ููุทุฉ ุชูู ุงูุฃุฎุฑู. <br><br>  ุฏุนููุง ูุญุฏุฏ ูุตุทูุญ "ุงููุญุฏุฉ ุงูููุทูุฉ".  ุงููุญุฏุฉ ุงูููุทูุฉ ูู ูุฌููุน ุงููุธุงุฆู ุงููุฑุชุจุทุฉ ููุทููุง.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงูุนูู ูุน ุงูุชุฏููุงุช ุฃู ุนูู ุงููููุงุช ุ ุฃู ูุญูู html. <br><br>  ูููู ููุญุฏุฉ "ุนูู ุงููููุงุช" ุฃู ุชุฌูุน ุจูู ุงูุนุฏูุฏ ูู ุงููุธุงุฆู - ูุชุญ ููู ุ ุฅุบูุงู ุ ูุถุน ุ ูุฑุงุกุฉ ุฎุตุงุฆุต ุ ูุฑุงุกุฉ ุญุฌู ุงูููู.  ูู ุงูููุช ููุณู ุ ูููู ุชุตููู ุงููุงุณุญ ุงูุถูุฆู ูููุฌูุฏุงุช ูุฌุฒุก ูู ูุงุฌูุฉ "ุนูู ุงููููุงุช" ุ ุฃู ููุญุฏุฉ ููุทูุฉ ูููุตูุฉ ุ ููููู ูุถุน ุงูุนูู ูุน ุงูุชุฏููุงุช ูู ูุญุฏุฉ ููุทูุฉ ูููุตูุฉ ุจุงูุชุฃููุฏ.  ุงูุชู ุ ูุน ุฐูู ุ ูุง ุชุชุฏุงุฎู ูุน ุชูุธูู ุงููุตูู ุฅูู ุฌููุน ุงููุญุฏุงุช ุงูููุทูุฉ ุงูุฃุฎุฑู ููุชุฏููุงุช ููุงุณุญุฉ ุงููุฌูุฏ ุจุดูู ุบูุฑ ูุจุงุดุฑ ุ ูู ุฎูุงู "ุนูู ููู".  ูุฐุง ููุณ ุถุฑูุฑูุง ุ ูููู ููุทูู ุชูุงูุง. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุทูุฉ.  ุญุชููุฉ "ุงููุญุฏุฉ ุงูููุทูุฉ ููุง microservice". </li><li style=";text-align:right;direction:rtl">  ุชุฎุตูุต 20 ูช ูู ุงูููุฏ ูููุฐ 80 ูช ูู ุงูููุช ูู ููุชุจุฉ ูููุตูุฉ - ุฌููุฑ ุงูุจุฑูุงูุฌ </li><li style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ูู ูุธููุฉ ูู ูู ูุญุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุงููุงุฌูุฉ ุ ุฅููุง ููุต ุงููุฑุต ุงูุซุงุจุช.  ููููู ููุท ุงูุงุชุตุงู ุจุงููุฑุต ุงูุซุงุจุช ุงููุฑุชุจุท ูุจุงุดุฑุฉ ุจูุธููุฉ ุงููุญุฏุฉ ุ ููุฌุจ ุฅุฌุฑุงุก ููุงููุงุช ุงูููุชุจุฉ ุงููุจุงุดุฑุฉ ุงูุฃุฎุฑู ุฅูู ูุญุฏุฉ ููุทูุฉ ูููุตูุฉ ูุงููุตูู ุฅูููุง ูู ุฎูุงู ุงููุงุฌูุฉ. </li><li style=";text-align:right;direction:rtl">  ุนุฒู ูุงูู ูููุญุฏุฉ ุจูุงุณุทุฉ ูุงุฌูุงุช ูู ุงูุจูุฆุฉ ุงูุฎุงุฑุฌูุฉ.  ุงูุญุธุฑ ุงูููุฑูุถ ุนูู ุชุทุจููุงุช "ุงูุชุณููุฑ" ุงูุชู ูุง ุชุชุนูู ุจูุธููุฉ ุงููุตู.  ูุจุดูู ุฃูุซุฑ ุฌุฐุฑูุฉ ุ ุนุฒู ุงูููุชุจุงุช (ุจูุง ูู ุฐูู ุงูููุชุจุงุช ุงูุนุงุฏูุฉ) ูุน ูุงุฌูุงุช / ูุญููุงุช / ุฏูููุฑุงุช </li><li style=";text-align:right;direction:rtl">  ูุง ูุชู ุงุณุชุฎุฏุงู ุชุฌููุน ุงููุตู ุงูุฏุฑุงุณู ุฃู ุฅูุดุงุก ูุชุบูุฑ ูุตู ุฃู fastpimpl ุฅูุง ุนูุฏูุง ูููู ุฐูู ุถุฑูุฑููุง ููุฃุฏุงุก. </li></ol><br>  ุจุงูุทุจุน ุ ุณูุนุฑู ููู ูุญูู ูู ูุฐุง ุจุณุฑุนุฉ ููุงุจู ุณุนุฑ ุฃูู ุ ูููู ุฃูุฏ ุฃู ุฃููุช ุงูุงูุชุจุงู ุฅูู ูุดููุฉ ุฃุฎุฑู ุ ูุงูุชู ุณูููู ุญููุง ููุงูุฃุฉ ููุง - ููู ุงููุนููุงุช ุงูุชู ุชุนุชูุฏ ุนูู ุงููุธุงู ุงูุฃุณุงุณู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ุชุนูููุงุช ุจุฑูุฌูุฉ ุชุนูู ุจุดูู ูุชุณุงูู ุนูู Android ู Windows ุ ูุณูููู ูู ุงูููุทูู ุชุฎุตูุต ุฎูุงุฑุฒููุงุช ุชุนุชูุฏ ุนูู ุงููุธุงู ุงูุฃุณุงุณู ูู ูุญุฏุงุช ูููุตูุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุนูู ุงูุฃุฑุฌุญ ุ ูุฏ ูุชุทูุจ ุชุทุจูู android ุฅุดุงุฑุฉ ุฅูู ุจูุฆุฉ Java (jni) ุ JNIEnv * ุ ูุฑุจูุง ูุงุฆููู ูู ูุงุฆูุงุช Java.  ูุฏ ูุชุทูุจ ุงูุชูููุฐ ุนูู Windows ูุฌูุฏ ุนูู ููุจุฑูุงูุฌ (ูุงูุฐู ูููู ุทูุจู ุนูู ูุธุงู ุฃูุฏุฑููุฏ ูู ุงููุธุงู ุ ูุน ูุฌูุฏ JNIEnv *).  ุงูุญููุฉ ูู ุฃู ููุณ JNIEnv * ุบูุฑ ููุฌูุฏ ูู ุณูุงู Windows ุ ูุฐูู ุญุชู ุงุชุญุงุฏ ูุฏูู ุฃู ุจุฏูู c ++ ูู std :: variant ูุณุชุญูู.  ููููู ุ ุจุงูุทุจุน ุ ุงุณุชุฎุฏุงู void * vector ุฃู std :: any vector ููุนููุฉ ุ ูููู ุจุตุฑุงุญุฉ ุ ูุฐุง ุนูุงุฒ ุบูุฑ ุนุงุฏู.  ุบูุฑ ููุทูุฉ - ูุฃููุง ุชุฑูุถ ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ูู c ++ ุ ุงููุชุงุจุฉ ุงููููุฉ.  ููุฐุง ุฃูุซุฑ ุฎุทูุฑุฉ ูู ุงูุณุงุฑุณ. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ุณูููู ุจุชุญููู ููููุฉ ุญู ูุฐู ุงููุดููุฉ ุจุทุฑููุฉ ูุญุฏุฏุฉ ุจุฏูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 2. ุงูุฑุตุงุต ุงูุณุญุฑู ูุณุนุฑูุง </h2><br>  ูุฐูู ุ ูููุชุฑุถ ุฃู ูุฏููุง ุนุฏุฏูุง ูุจูุฑูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ูุฌุจ ูุชุงุจุชูุง ูู ุงูุจุฏุงูุฉ ุ ูุณุชููู ุงููุชูุฌุฉ ูุดุฑูุนูุง ูุจูุฑูุง ููุบุงูุฉ. <br><br>  ููู ูููู ุชุฌููุนูุง ููููุง ูููุจุงุฏุฆ ุงูุชู ุญุฏุฏูุงูุงุ <br><br>  ุงูุทุฑููุฉ ุงูููุงุณูููุฉ ุ ุงููุนุชูุฏุฉ ูู ูุจู ุฌููุน ุงูุฃุฏูุฉ ุ ูู ุชูุณูู ูู ุดูุก ุฅูู ูุงุฌูุงุช ูุงุณุชุฑุงุชูุฌูุงุช.  ุจูุณุงุนุฏุฉ ุงููุงุฌูุงุช ูุงูุงุณุชุฑุงุชูุฌูุงุช ุ ุฅุฐุง ูุงู ููุงู ุงููุซูุฑ ูููุง ุ ูููู ุนุฒู ุฃู ูุดููุฉ ูุฑุนูุฉ ูู ูุดุฑูุนูุง ุฅูู ุญุฏ ุฃู ูุจุฏุฃ "ุงููุญุฏุฉ ุงูููุทูุฉ ููุง microservice" ุณูุจุฏุฃ ุงูุนูู ุนููู.  ููู ุชุฌุฑุจุชู ุงูุดุฎุตูุฉ ูู ุฃูู ุฅุฐุง ูุณูุช ุงููุดุฑูุน ุฅูู 20 ุฅูู 30 ุฌุฒุกูุง ุ ูุงูุชู ุณูุชู ุนุฒููุง ุฅูู ูุณุชูู "ุงููุญุฏุฉ ุงูููุทูุฉ ููุง microservice" ุ ูุณูู ุชูุฌุญ.  ููู ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ููููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงูุฌูุฏุฉ ูู ุงููุฏุฑุฉ ุนูู ุงุฎุชุจุงุฑ ุฃู ูุฆุฉ ุฎุงุฑุฌ ุณูุงู ุงููุดุฑูุน.  ูุฅุฐุง ููุช ุจุนุฒู ูู ูุตู ุจุงููุนู ุ ูููุงู ุจุงููุนู ุฃูุซุฑ ูู 500 ูุญุฏุฉ ุ ููู ุชุฌุฑุจุชู ุ ูุฅู ูุฐุง ูุฒูุฏ ูู ููุช ุงูุชุทููุฑ ุจููุฏุงุฑ 3-5 ูุฑุงุช ุ ููุง ูุนูู ุฃูู ูู "ุธุฑูู ุงููุชุงู" ูู ุชููู ุจุฐูู ูุณูู ุชุชูุงุฒู ุนู ุงูุณุนุฑ ูุงูุฌูุฏุฉ. <br><br>  ูุฏ ูุดู ุดุฎุต ูุง ุ ูุณูููู ูู ุญูู.  ุฏุนููุง ูุฌุนู ุชูุฏูุฑ ุชูุฑูุจู.  ุฏุน ุงูุทุจูุฉ ุงููุณุทู ุชุถู 3-5 ุฃุนุถุงุก ู 20 ูุธููุฉ ู 3 ูููุดุฆูู.  ุจุงูุฅุถุงูุฉ ุฅูู 6-10 ูุฌููุนุฉ ูู ุงููุงุนุจูู ูุงููุณุชูุทููู (mutators) ูููุตูู ุฅูู ุฃุนุถุงุฆูุง.  ุงููุฌููุน ุญูุงูู 40 ูุญุฏุฉ ูู ุงููุตู.  ูู ูุดุฑูุน ูููุฐุฌู ุ ูุญุชุงุฌ ูู ูุตู "ูุฑูุฒู" ุฅูู ุงููุตูู ุฅูู ุฎูุณ ูุธุงุฆู ูู ุงููุชูุณุท โโุ ูููุณ ูุฑูุฒูุง ุฅูู 3. ุนูู ุณุจูู ุงููุซุงู ุ ูุญุชุงุฌ ุงูุนุฏูุฏ ูู ุงููุฆุงุช ุฅูู ูุฎุตูุต ุ ููุธุงู ูููุงุช ุ ูุงูุนูู ูุน ุงูุณูุงุณู ุ ูุงูุนูู ูุน ุงูุชุฏููุงุช ุ ูุงููุตูู ุฅูู ููุงุนุฏ ุงูุจูุงูุงุช. <br><br>  ุณุชุชุทูุจ ูู ุงุณุชุฑุงุชูุฌูุฉ / ูุงุฌูุฉ ุนุถููุง ูุงุญุฏูุง ูู ุงูููุน <code>std::shared_ptr&lt;CreateStreamStrategy&gt; m_create_stream;</code>  .  ุงุซููู ูู ุงูุทูุฑุงุช ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชููุฆุฉ ูู ูู ูู ุงูุตุงูุนูู ุงูุซูุงุซุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ููุงู ูุง ูู ุงูุชููุฆุฉ <code>myclass-&gt;SetCreateStreamStrategy( my_create_stream_strategy )</code> ุ ุณุชุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก ุดูุก ูุซู <code>myclass-&gt;SetCreateStreamStrategy( my_create_stream_strategy )</code> ุนุฏุฉ ูุฑุงุช ุ ููุตุจุญ ุงููุฌููุน 8 ูุญุฏุงุช ููู ูุงุฌูุฉ / ุงุณุชุฑุงุชูุฌูุฉ ุ ููุฏููุง ุญูุงูู ุฎูุณ ูุญุฏุงุช ูููุง ุ ุณูููู ููุงู 40 ูุญุฏุฉ.  ููุฐุง ูู ุ ุฌุนููุง ูุฆุฉ ุงููุตุฏุฑ ูุฑุชูู ูุฑููุฉ.  ูููุฏุงู ุงูุจุณุงุทุฉ ุณูุคุซุฑ ุญุชูุง ุนูู ูุงุจููุฉ ุงููุฑุงุกุฉ ุ ููู ููุงู ุขุฎุฑ ูู ุนูููุฉ ุงูุชุตุญูุญ ุ ููุฑุงุช ููุตู ุ ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃูู ูุง ูุจุฏู ุฃู ุดูุฆุง ูุฏ ุชุบูุฑ ุจุดูู ุฃุณุงุณู. <br><br>  ูุฐุง ูุฅู ุงูุณุคุงู ูู.  ููู ุชูุนู ุงูุดูุก ููุณู ุ ูููู ุจุฃูู ุณุนุฑุ  ุฃูู ูุง ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุงูุชูุญูุฏ ุงูุซุงุจุช ูู ุงูููุงูุจ ุ ุจุฃุณููุจ ุฃููุณุงูุฏุฑูุณูู ูููุชุจุฉ ูููู. <br><br>  ูุญู ููุชุจ ูุตูุง ูู ุงูุฃุณููุจ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Traits</span></span></span><span class="hljs-class"> &gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyClass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoMainTaskFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... MyStream stream = Traits::streamwork::Open( stream_name ); ... } };</code> </pre> <br>  ูุฐุง ุงููุฑุงุฑ ูู ูู ุงููุฒุงูุง ุงููุนูุงุฑูุฉ ุงูุชู ุญุฏุฏูุงูุง ูู ุงูุฌุฒุก ุงูุฃูู.  ูููู ููุงู ุฃูุถุง ุงููุซูุฑ ูู ุงูุนููุจ. <br><br>  ุฃูุง ุดุฎุตูุงู ุฃุญุจ ุฃู ุฃุฑุงุนู ุ ููููู ุฃุดุนุฑ ุจุงูุฃุณู ูููุณู ุ ุฃุนุชุฑู: ูุง ูุญุจุฐ ุงูููุงูุจ ูู ุงูููุฏ ุงูุนุงุฏู ุณูู ุงูุณุญุฑุฉ ุงูููุงูุจ.  ูุชูุฉ ูุจูุฑุฉ ูู ุงููุจุฑูุฌูู ูุน ูููุฉ "ูุงูุจ" ุนุจูุณ ููููุง.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุงูุตูุงุนุฉ ุ ุงูุบุงูุจูุฉ ุงูุนุธูู ูู ุงูุฅูุฌุงุจูุงุช ููุณุช ูู ุงููุงูุน ุฅูุฌุงุจูุงุช ุ ููู ุชู ุฅุนุงุฏุฉ ุชุฏุฑูุจูุง ููููุงู ูู syshniks ูู c ++ ุงูุฐูู ููุณ ูุฏููู ูุนุฑูุฉ ุนูููุฉ ุจุงูุฅูุฌุงุจูุงุช ุ ููููู ููุฏุฑุฌูู ุชุญุช ูููุฉ "ูุงูุจ" ููุชุธุงูุฑูู ุจุงูููุช. <br><br>  ุฅุฐุง ูููุง ุจุชุฑุฌูุฉ ูุฐุง ุฅูู ูุบุฉ ุฅูุชุงุฌ ุ ูุฅู ุงูุญูุงุธ ุนูู ุงูููุฏ ุงูุฎุงุต ุจุงููุนููุงุช ุงูุซุงุจุชุฉ ูููู ุฃูุซุฑ ุชูููุฉ ูุฃูุซุฑ ุชุนููุฏูุง. <br><br>  ูู ููุณ ุงูููุช ุ ุฅุฐุง ุฃุฑุฏูุง ุ ูุฃุบุฑุงุถ ุฒูุงุฏุฉ ูุงุจููุฉ ุงููุฑุงุกุฉ ุ ุฅุฒุงูุฉ ูุต ุงููุธููุฉ ุจุฏูุฉ ุฎุงุฑุฌ ุงููุตู ุ ูุณูุญุตู ุนูู ุงููุซูุฑ ูู ุงูุฎุฑุจุดุฉ ูุน ุฃุณูุงุก ุงูููุงูุจ ููุนููุงุช ุงููุงูุจ.  ููู ุญุงูุฉ ูุฌูุฏ ุฎุทุฃ ูู ุงูุชุญููู ุงูุจุฑูุฌู ุ ูุญุตู ุนูู ุฃุฑูู ุทูููุฉ ูุงุจูุฉ ูููุฑุงุกุฉ ูู ุงูุฃุณุจุงุจ ูููุงุทู ุงููุดุงูู ูุน ูุฌููุนุฉ ูู ุงูููุงูุจ ุงููุชุฏุงุฎูุฉ ุงููุนูุฏุฉ. <br><br>  ูููู ุ ููุงู ุทุฑููุฉ ุจุณูุทุฉ ููุฎุฑูุฌ.  ุจุตูุชู ุณุงุญุฑูุง ูููุงูุจ ุ ุฃุนูู ุฃูู ูููู ููู ูู ุดูุก ุชูุฑูุจูุง ุจุงุณุชุฎุฏุงู ุชูุตูู ุซุงุจุช / ุชุนุฏุฏ ุงูุฃุดูุงู ุงูุงุณุชุงุชููู ุฅูู ุชุนุฏุฏ ุงูุฃุดูุงู ุงูุฏููุงูููู.  ูุง ุ ุจุงูุทุจุน ุ ูู ููุถู ุนูู ูุงูุจ ุงูุดุฑ ุญุชู ุงูููุงูุฉ - ููููุง ูู ูุซุฑู ุจูุฏ ูุฑููุฉ ูููุนููุงุช ูู ูู ูุฆุฉ ุ ููููุง ุณููุตุฑู ุนูู ูุตูู ุฏุฑุงุณูุฉ ูููุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก ุงูุซุงูุซ.  ุงูุญู ุงูููุชุฑุญ ูุงูุฑูุฒ ุงููุดูุฑ ููุฐุง ุงูุญู </h2><br>  ุฅุฐู ููุงู !!!  ุชูุจูุฉ ูุฆุฉ ุงููุงูุจ TypedSet.  ูุฑุจุท ูุคุดุฑ ุฐูู ูุงุญุฏ ูู ูุฐุง ุงูููุน ุจููุน ูุงุญุฏ.  ุนูุงูุฉ ุนูู ุฐูู ุ ุจุงููุณุจุฉ ููููุน ุงููุญุฏุฏ ุ ูุฏ ูููู ูู ูุงุฆู ุ ูููู ูุฏ ูุง ูููู ูุฐูู.  ูุง ุฃุญุจ ุงูุงุณู - ูุฐูู ุณุฃููู ููุชููุง ุฅุฐุง ุฃุฎุจุฑูู ูู ุงูุชุนูููุงุช ุจุฎูุงุฑ ุฃูุซุฑ ูุฌุงุญูุง. <br><br>  ููุน ูุงุญุฏ - ูุงุฆู ูุงุญุฏ.  ููู ุนุฏุฏ ุงูุฃููุงุน ูุง ููุชุตุฑ!  ูุฐูู ุ ููููู ุชูุฑูุฑ ูุซู ูุฆุฉ ูุนููุฉ. <br><br>  ุฃุฑูุฏ ุฃู ุฃููุช ุงูุชุจุงููู ุฅูู ููุทุฉ ูุงุญุฏุฉ.  ูุฏ ูุจุฏู ุฃูู ูู ูุฑุญูุฉ ูุง ูุฏ ุชุญุชุงุฌ ุฅูู ูุงุฆููู ุชุญุช ูุงุฌูุฉ ูุงุญุฏุฉ.  ูู ุงููุงูุน ุ ุฅุฐุง ูุดุฃุช ูุฐู ุงูุญุงุฌุฉ ุ ููุฐุง (ูู ุฑุฃูู) ูุนูู ุฎุทุฃู ูุนูุงุฑููุง.  ุฃู ุฅุฐุง ูุงู ูุฏูู ูุงุฆููู ุชุญุช ูุงุฌูุฉ ูุงุญุฏุฉ ุ ูููุง ูู ูุนุฏุง ูุงุฌูุงุช ูุตูู ูุธูููุฉ: ููุฐู ุฅูุง ูุชุบูุฑุงุช ุฅุฏุฎุงู ููุฏุงูุฉ ุ ุฃู ููุณ ูุฏูู ูุธููุฉ ูุงุญุฏุฉ ูููู ุงุซููู ูู ุงููุธุงุฆู ุงูุชู ุชุญุชุงุฌ ุฅูู ุงููุตูู ุฅูููุง ุ ููู ุงูุฃูุถู ุชูุณูู ุงููุงุฌูุฉ ุฅูู ูุณููู . <br><br>  ุณูููู ุจุซูุงุซ ูุธุงุฆู ุฃุณุงุณูุฉ: ุฅูุดุงุก ุ ูุงุญุตู ุนูู ุ ูุชูุชูู.  ูููุง ูุฐูู ุ ุฅูุดุงุก ูุงุณุชูุงู ูุงูุชุญูู ูู ูุฌูุฏ ุนูุตุฑ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// @brief    .      ,    ///           /// class TypedSet { public: template &lt;class TypedElement&gt; void Create( const std::shared_ptr&lt;TypedElement&gt; &amp; value ); template &lt;class TypedElement&gt; std::shared_ptr&lt;TypedElement&gt; Get() const; template &lt;class TypedElement&gt; bool Has() const; size_t GetSize() const { return storage_.size(); } protected: typedef std::map&lt; size_t, std::shared_ptr&lt;void&gt; &gt; Storage; Storage const &amp; storage() const { return storage_; } Storage &amp; get_storage() { return storage_; } private: Storage storage_; }; template &lt;class TypedElement&gt; void TypedSet::Create( const std::shared_ptr&lt;TypedElement&gt; &amp; value ) { size_t hash = typeid(TypedElement).hash_code(); if ( storage().count( hash ) &gt; 0 ) { LogError( "Access Violation" ); return; } std::shared_ptr&lt;void&gt; to_add ( value ); get_storage().insert( std::pair( typeid(TypedElement).hash_code(), to_add ) ); } template &lt;class TypedElement&gt; bool TypedSet::Has() const { size_t hash = typeid(TypedElement).hash_code(); return storage().count( hash ) &gt; 0; } template &lt;class TypedElement&gt; std::shared_ptr&lt;TypedElement&gt; TypedSet::Get() const { size_t hash = typeid(TypedElement).hash_code(); if ( storage().count( hash ) &gt; 0 ) { std::shared_ptr&lt;void&gt; ret( storage().at(hash) ); return std::static_pointer_cast&lt;TypedElement&gt;( ret ); } else { LogError( "Access Violation" ); return std::shared_ptr&lt;TypedElement&gt; (); } }</span></span></code> </pre> <br>  ุจุงูููุงุณุจุฉ ุ ุฑุฃูุช ุญูุงู ุจุฏููุงู ูู ุงูุฒููุงุก ุงูุฐูู ููุชุจูู ูู ููู ุชู.  ููุงู ุ ุชู ุงููุตูู ุฅูู ุงููุงุฌูุฉ ุงููุฑุบูุจุฉ ูู ุฎูุงู ููุญุฉ ูุฑุฏูุฉ ุ ูุงูุชู "ุชู ุชุนููููุง" ูููุงุฌูุฉ ุงููุฑุบูุจุฉ ุ ูุนุจุฃุฉ ูู Varaint ุ ุนุจุฑ ุฎุท ูุตู (!!!) ุ ูุจุนุฏ ุงุฎุชูุงุฑ ูุฐุง ุงูุฎูุงุฑ ุ ูููู ุงุณุชุฎุฏุงู ุงููุชูุฌุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">GlobalConfigurator()[<span class="hljs-string"><span class="hljs-string">"FileSystem"</span></span>].Get().As&lt;FileSystem&gt;()</code> </pre> <br>  ูู ุงููุคูุฏ ุฃููุง ุชุนูู ุ ูููู ุงููููุงุช ุงูุนุงูุฉ ูุญุณุงุจ ุงูุทูู ูุงููุฒูุฏ ูู ุชุฌุฒุฆุฉ ุงูุณูุณูุฉ ูุฎููุฉ ุจุนุถ ุงูุดูุก ูุฑูุญู ุงููุชูุงุฆูุฉ.  ููุง ุ ุงูุญูู ูู ุตูุฑ ุ ูุฃู  ููุชู ุงุฎุชูุงุฑ ุงููุงุฌูุฉ ุงููุทููุจุฉ ูู ููุช ุงูุชุฑุฌูุฉ. <br><br>  ุงุณุชูุงุฏูุง ุฅูู TypedSet ุ ูููููุง ุตูุงุบุฉ ูุฆุฉ StrategiesSet ุ ูุงูุชู ุฃุตุจุญุช ุจุงููุนู ุฃูุซุฑ ุชูุฏููุง.  ููู ูู ูููู ุจุชุฎุฒูู ูุงุฆู ูุงุญุฏ ููุท ููู ูุงุฌูุฉ ูุตูู ููู ูุธููุฉ ุ ูููู ุฃูุถูุง ููู ูุงุฌูุฉ (ูุดุงุฑ ุฅูููุง ูููุง ุจุนุฏ ุจุงุณู ุงูุฅุณุชุฑุงุชูุฌูุฉ) ูุฌููุนุฉ TypedSet ุฅุถุงููุฉ ูุน ูุนููุงุช ููุฐู ุงูุงุณุชุฑุงุชูุฌูุฉ.  ุฃูุง ุฃูุถุญ: ุงููุนููุงุช ุ ุนูู ุนูุณ ูุชุบูุฑุงุช ุงูุฏูุงู ุ ูู ูุง ูุชู ุชุนูููู ูุฑุฉ ูุงุญุฏุฉ ุฃุซูุงุก ุชููุฆุฉ ุงูุจุฑูุงูุฌ ุฃู ูุฑุฉ ูุงุญุฏุฉ ูุชุดุบูู ุจุฑูุงูุฌ ูุจูุฑ.  ุชุชูุญ ูู ุงููุนููุงุช ุฅููุงููุฉ ุฌุนู ุงูุดูุฑุฉ ูุดุชุฑูุฉ ุจุดูู ุฃุณุงุณู.  ูู ูููุณูู ูุญู ูููุฏ ุงููุทุจุฎ ุงูุฐู ูุนุชูุฏ ุนูู ุงูููุตุฉ ุจุงููุงูู. <br><br>  ููุง ุณูููู ูุฏููุง ุงููุฒูุฏ ูู ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ: ุฅูุดุงุก ุ ุงูุญุตูู ุ CreateParamsSet ู GetParamsSet.  ูู ูุชู ูุถุนู ุ ูุฃูู ุถุฑูุฑู ูู ุงููุงุญูุฉ ุงููุนูุงุฑูุฉ: ุฅุฐุง ูุงูุช ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุชุดูุฑ ุฅูู ูุธููุฉ ุงูุนูู ูุน ูุธุงู ุงููููุงุช ุ ููู ูููุฑูุง ุฑูุฒ ุงูุงุชุตุงู ุ ููููู ููุท ุฑูู ุงุณุชุซูุงุก ุฃู ุชุฃููุฏ ุ ุฃู <s>ุฌุนู ุจุฑูุงูุฌ sebukka</s> ูุณุชุฏุนู ุงููุธููุฉ abort (). <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrategiesSet</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Create</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;Strategy&gt; &amp; value ); <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;Strategy&gt; Get(); <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateParamsSet</span></span></span><span class="hljs-class">();</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;TypedSet&gt; GetParamsSet(); <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParamType</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateParam</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;ParamType&gt; &amp; value ); <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParamType</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;ParamType&gt; GetParam(); <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>: <span class="hljs-function"><span class="hljs-function">TypedSet </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">strategies</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strategies_; } <span class="hljs-function"><span class="hljs-function">TypedSet &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_strategies</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strategies_; } <span class="hljs-function"><span class="hljs-function">TypedSet </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">params</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> params_; } <span class="hljs-function"><span class="hljs-function">TypedSet &amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_params</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> params_; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParamHolder</span></span></span><span class="hljs-class"> {</span></span> ParamHolder( ) : param_ptr( <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_shared&lt;TypedSet&gt;() ) {} <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;TypedSet&gt; param_ptr; }; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: TypedSet strategies_; TypedSet params_; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrategiesSet</span></span></span><span class="hljs-class">:</span></span>:Create( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;Strategy&gt; &amp; value ) { get_strategies().Create&lt;Strategy&gt;( value ); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;Strategy&gt; StrategiesSet::Get() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> get_strategies().Get&lt;Strategy&gt;(); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrategiesSet</span></span></span><span class="hljs-class">:</span></span>:CreateParamsSet( ) { <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> ParamHolder&lt;Strategy&gt; Holder; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt; Holder &gt; ptr = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_shared&lt; Holder &gt;( ); ptr-&gt;param_ptr = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_shared&lt; TypedSet &gt;(); get_params().Create&lt; Holder &gt;( ptr ); } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;TypedSet&gt; StrategiesSet::GetParamsSet() { <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> ParamHolder&lt;Strategy&gt; Holder; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( get_params().Has&lt; Holder &gt;() ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> get_params().Get&lt; Holder &gt;()-&gt;param_ptr; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { LogError(<span class="hljs-string"><span class="hljs-string">"StrategiesSet::GetParamsSet : get unexisting!!!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;TypedSet&gt;(); } } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParamType</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StrategiesSet</span></span></span><span class="hljs-class">:</span></span>:CreateParam( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;ParamType&gt; &amp; value ) { <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> ParamHolder&lt;Strategy&gt; Holder; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !params().Has&lt;Holder&gt;() ) CreateParamsSet&lt;Strategy&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( params().Has&lt;Holder&gt;() ) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;TypedSet&gt; params_set = GetParamsSet&lt;Strategy&gt;(); params_set-&gt;Create&lt;ParamType&gt;( value ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { LogError( <span class="hljs-string"><span class="hljs-string">"Param creating error: Access Violation"</span></span> ); } } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Strategy</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParamType</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">:</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;ParamType&gt; StrategiesSet::GetParam() { <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> ParamHolder&lt;Strategy&gt; Holder; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( params().Has&lt;Holder&gt;() ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GetParamsSet&lt;Strategy&gt;()-&gt;<span class="hljs-keyword"><span class="hljs-keyword">template</span></span> Get&lt;ParamType&gt;(); <span class="hljs-comment"><span class="hljs-comment">//   template          .    . } else { LogError( "Access Violation" ); return std::shared_ptr&lt;ParamType&gt; (); } }</span></span></code> </pre> <br>  ููุฒุฉ ุฅุถุงููุฉ ุชุชูุซู ูู ุฃูู ูู ูุฑุญูุฉ ุงูููุงุฐุฌ ุงูุฃูููุฉ ุ ููููู ุฅูุดุงุก ูุฆุฉ ุทุจุงุนุฉ ูุจูุฑุฉ ุฌุฏูุง ุ ูุฅููุงููุฉ ุงููุตูู ุฅูู ุฌููุน ุงููุญุฏุงุช ุงูููุทูุฉ ุฏุงุฎููุง ุ ูุชูุฑูุฑูุง ุฅูู ุฌููุน ุงููุญุฏุงุช ุงูููุทูุฉ ููุนููุฉ ุ ูุชุตุจุญ ุตุบูุฑุฉ ุจุณุฑุนุฉ ุ ุซู ุชููู ุจุชูุณูููุง ุจูุฏูุก ุฅูู ูุทุน ุชููู ุถุฑูุฑูุฉ ููุบุงูุฉ ููู ูุญุฏุฉ ููุทูุฉ. <br><br>  ุญุณูุง ุ ูุญุงูุฉ ุงุณุชุฎุฏุงู ุตุบูุฑุฉ (ุญุชู ุงูุขู) ูุจุณุทุฉ ุจุดูู ููุฑุท.  ุขูู ุฃู ุชุดูุฑ ุฅูู ูู ุงูุชุนูููุงุช ูุง ุชุฑูุฏ ุฃู ุชุฑุงู ููุซุงู ุจุณูุท ุ ูุณุฃุฌุนู ุงูููุงู ุชุฑููุฉ ุตุบูุฑุฉ.  ูููุง ุชููู ุญููุฉ ุงูุจุฑูุฌุฉ ุงูุดุงุฆุนุฉ ุ "ุญุฑุฑ ูู ุฃุณุฑุน ููุช ูููู ูุญุณูู ุงุณุชุฎุฏุงู ุงูููุงุญุธุงุช ุจุนุฏ ุงูุฅุตุฏุงุฑ". <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interface1</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"\niface1\n"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~Interface1() {} }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interface2</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"\niface2\n"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~Interface2() {} }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interface3</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"\niface3\n"</span></span>);} <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~Interface3() {} }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Implementation1</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Interface1 { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"\nimpl1\n"</span></span>);} }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Implementation2</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Interface2 { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fun</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"\nimpl2\n"</span></span>);} }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintParams</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~PrintParams() {} <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetOs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintParamsUbuntu</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PrintParams { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetOs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Ubuntu"</span></span>; } }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintParamsWindows</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PrintParams { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetOs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Windows"</span></span>; } }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintStrategy</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~PrintStrategy() {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> TypedSet&amp; params, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; str )</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrintWithOsStrategy</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PrintStrategy { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">operator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> TypedSet&amp; params, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp; str )</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> os = params.Get&lt; PrintParams &gt;()-&gt;GetOs(); <span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>(<span class="hljs-string"><span class="hljs-string">" Printing: %s (OS=%s)"</span></span>, str.c_str(), os.c_str() ); } }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestTypedSet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>; TypedSet a; a.Create&lt;Interface1&gt;( make_shared&lt;Implementation1&gt;() ); a.Create&lt;Interface2&gt;( make_shared&lt;Implementation2&gt;() ); a.Get&lt;Interface1&gt;()-&gt;Fun(); a.Get&lt;Interface2&gt;()-&gt;Fun(); Log(<span class="hljs-string"><span class="hljs-string">"Double creation:"</span></span>); a.Create&lt;Interface1&gt;( make_shared&lt;Implementation1&gt;() ); Log(<span class="hljs-string"><span class="hljs-string">"Get unexisting:"</span></span>); a.Get&lt;Interface3&gt;(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestStrategiesSet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>; StrategiesSet printing; printing.Create&lt; PrintStrategy &gt;( make_shared&lt;PrintWithOsStrategy&gt;() ); printing.CreateParam&lt; PrintStrategy, PrintParams &gt;( make_shared&lt;PrintParamsWindows&gt;() ); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> print_strategy_ptr = printing.Get&lt; PrintStrategy &gt;(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; print_strategy = *print_strategy_ptr; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp; print_params = *printing.GetParamsSet&lt; PrintStrategy &gt;(); print_strategy( print_params, <span class="hljs-string"><span class="hljs-string">"Done!"</span></span> ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ TestTypedSet(); TestStrategiesSet(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ููุฎุต </h2><br>  ูุจุงูุชุงูู ุ ูููุง ุจุญู ูุดููุฉ ูููุฉ: ุชุฑููุง ูู ุงููุตู ููุท ุงููุงุฌูุฉ ุงููุฑุชุจุทุฉ ูุจุงุดุฑุฉ ุจูุธููุฉ ุงููุฆุฉ.  ุชู "ุฏูุน" ุงูุจุงูู ุฅูู StrategiesSet ุ ูุน ุชุฌูุจ ูู ูู ุชุดูุด ุงูุตู ุจุงูุนูุงุตุฑ ุบูุฑ ุงูุถุฑูุฑูุฉ ุ ู "ุชุณููุฑ" ุจุนุถ ุฎูุงุฑุฒููุงุช ุงููุธููุฉ ุงููุทููุจุฉ ููุฎูุงุฑุฒููุงุช.  ุณูุณูุญ ููุง ุฐูู ููุณ ููุท ุจูุชุงุจุฉ ุชุนูููุงุช ุจุฑูุฌูุฉ ูุนุฒููุฉ ููุบุงูุฉ ุ ูุน ุนุฏู ูุฌูุฏ ุฃู ุชุจุนูุงุช ุนูู ุงูุชุทุจููุงุช ูุงูููุชุจุงุช ุ ูููู ุฃูุถูุง ูุชูููุฑ ูุฏุฑ ูุจูุฑ ูู ุงูููุช. <br><br>  ูููู ุงูุนุซูุฑ ุนูู ุฑูุฒ ูุฆุงุช ุงูุฃุฏูุงุช ูุงููุซุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง.</a> <br><br>  <b>ูุญุฏุซ.</b>  <b>ูู 11/13/2019</b> <br>  ูู ุงููุงูุน ุ ุงูููุฏ ุงูููุถุญ ููุง ูู ูุฌุฑุฏ ูุซุงู ูุจุณุท ูููุฑุงุกุฉ.  ูุงูุญูููุฉ ูู ุฃู typeid (). ูุชู ุชุทุจูู Hash_code ูู ุงููุฌูุนูู ุงูุญุฏูุซ ุจุจุทุก ูุบูุฑ ูุนุงู.  ุงุณุชุฎุฏุงูู ููุชู ุงููุซูุฑ ูู ุงููุนูู.  ุนูุงูุฉ ุนูู ุฐูู ุ ููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">ุงูุชุฑุญ 0xd34df00d</a> ุงููุญุชุฑู ุ ูุฅู ุงููุนูุงุฑ ูุง ูุถูู ุงููุฏุฑุฉ ุนูู ุงูุชูููุฒ ุจูู ุงูุฃููุงุน ูู ุฎูุงู hashcode (ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุฐุง ุงูููุฌ ูุนูู ูุน ุฐูู).  ููู ุงููุซุงู ุฌูุฏ ุงููุฑุงุกุฉ.  ููุช ุจุฅุนุงุฏุฉ ูุชุงุจุฉ TypedSet ุจุฏูู typeid (). Hash_code () ุ ุนูุงูุฉ ุนูู ุฐูู ุ ุชู ุงุณุชุจุฏุงู ุงูุฎุฑูุทุฉ ุจุงูุตููู (ูููู ูุน ุงููุฏุฑุฉ ุนูู ุงูุชุจุฏูู ุจุณุฑุนุฉ ูู ุงูุฎุฑูุทุฉ ุฅูู ุงูุตููู ูุงูุนูุณ ุจุงูุนูุณ ุนู ุทุฑูู ุชุบููุฑ ุฑูู ูุงุญุฏ ูู # ุฅุฐุง).  ุงุชุถุญ ุฃู ุงูุฃูุฑ ุฃูุซุฑ ุตุนูุจุฉ ุ ููููู ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ููุงุณุชุฎุฏุงู ุงูุนููู. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ููููุฑู</a> <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> metatype { <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Counter</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> GetAndIncrease() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> counter_++; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> counter_ = <span class="hljs-number"><span class="hljs-number">1</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Type&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HashGetterBody</span></span></span><span class="hljs-class"> {</span></span> HashGetterBody() : hash_( counter_.GetAndIncrease() ) { } <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> GetHash() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hash_; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: Counter counter_; <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> hash_; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Type&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HashGetter</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> GetHash() {<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasher_.GetHash(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> HashGetterBody&lt;Type&gt; hasher_; }; } <span class="hljs-comment"><span class="hljs-comment">// namespace metatype template &lt;typename Type&gt; size_t GetTypeHash() { return metatype::HashGetter&lt;Type&gt;().GetHash(); } namespace details { #if 1 //   ,        () class TypedSetStorage { public: static inline const constexpr size_t kMaxTypes = 100; typedef std::array&lt; std::shared_ptr&lt;void&gt;, kMaxTypes &gt; Storage; void Set( size_t hash_index, const std::shared_ptr&lt;void&gt; &amp; value ) { ++size_; assert( hash_index &lt; kMaxTypes ); // too many types data_[hash_index] = value; } std::shared_ptr&lt;void&gt; &amp; Get( size_t hash_index ) { assert( hash_index &lt; kMaxTypes ); return data_[hash_index]; } const std::shared_ptr&lt;void&gt; &amp; Get( size_t hash_index ) const { if ( hash_index &gt;= kMaxTypes ) return empty_ptr_; return data_[hash_index]; } bool Has( size_t hash_index ) const { if ( hash_index &gt;= kMaxTypes ) return 0; return (bool)data_[hash_index]; } size_t GetSize() const { return size_; } private: Storage data_; size_t size_ = 0; static const inline std::shared_ptr&lt;void&gt; empty_ptr_; }; #else //    ,        (std::map) class TypedSetStorage { public: typedef std::map&lt; size_t, std::shared_ptr&lt;void&gt; &gt; Storage; void Set( size_t hash_index, const std::shared_ptr&lt;void&gt; &amp; value ) { data_[hash_index] = value; } std::shared_ptr&lt;void&gt; &amp; Get( size_t hash_index ) { return data_[hash_index]; } const std::shared_ptr&lt;void&gt; &amp; Get( size_t hash_index ) const { return data_.at(hash_index); } bool Has( size_t hash_index ) const { return data_.count(hash_index) &gt; 0; } size_t GetSize() const { return data_.size(); } private: Storage data_; }; #endif } // namespace details /// @brief    .      ,    ///           /// class TypedSet { public: template &lt;class TypedElement&gt; void Create( const std::shared_ptr&lt;TypedElement&gt; &amp; value ); template &lt;class TypedElement&gt; std::shared_ptr&lt;TypedElement&gt; Get() const; template &lt;class TypedElement&gt; bool Has() const; size_t GetSize() const { return storage_.GetSize(); } protected: typedef details::TypedSetStorage Storage; Storage const &amp; storage() const { return storage_; } Storage &amp; get_storage() { return storage_; } private: Storage storage_; }; template &lt;class TypedElement&gt; void TypedSet::Create( const std::shared_ptr&lt;TypedElement&gt; &amp; value ) { size_t hash = GetTypeHash&lt;TypedElement&gt;(); if ( storage().Has( hash ) ) { LogError( "Access Violation" ); return; } std::shared_ptr&lt;void&gt; to_add ( value ); get_storage().Set( hash, to_add ); } template &lt;class TypedElement&gt; bool TypedSet::Has() const { size_t hash = GetTypeHash&lt;TypedElement&gt;(); return storage().Has( hash ); } template &lt;class TypedElement&gt; std::shared_ptr&lt;TypedElement&gt; TypedSet::Get() const { size_t hash = GetTypeHash&lt;TypedElement&gt;(); if ( storage().Has( hash ) ) { std::shared_ptr&lt;void&gt; ret( storage().Get( hash ) ); return std::static_pointer_cast&lt;TypedElement&gt;( ret ); } else { LogError( "Access Violation" ); return std::shared_ptr&lt;TypedElement&gt; (); } }</span></span></code> </pre><br>  ูุชู ุชูููุฐ ุงููุตูู ููุง ูู ุงูููุช ุงูุฎุทู ุ ููุชู ุญุณุงุจ ุชุฌุฒุฆุฉ ุงูููุน ูุจู ุฅุทูุงู main () ุ ูุงูุฎุณุงุฆุฑ ูู ููุท ูุนูููุงุช ุงูุชุญูู ูู ุงูุตุญุฉ ุ ูุงูุชู ูููู ุงูุชุฎูุต ูููุง ุฅุฐุง ุฑุบุจุช ูู ุฐูู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar475268/">https://habr.com/ru/post/ar475268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar475252/index.html">ููู ุชูุชูุฏ ูุงููุฑูุณููุช</a></li>
<li><a href="../ar475254/index.html">AERODISK vAIR ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุฃู ููุฒุงุช ุจูุงุก ุงููุชูุฉ ุงููุทููุฉ</a></li>
<li><a href="../ar475258/index.html">ุชูุซูู ูุฑุฆู ููุงูุชุฎุงุจุงุช ูู ุณุงู ุจุทุฑุณุจุฑุบ - ุณุญุฑ ุงูุชูุงู ุงูุตูุช</a></li>
<li><a href="../ar475260/index.html">ุงููุฑู ุจูู ุฏุงูุฉ ุบูุฑ ูุชุฒุงููุฉ ููุธููุฉ ุชููู ุจุฅุฑุฌุงุน ูุนุฏ</a></li>
<li><a href="../ar475262/index.html">ููุฎุต ุงูููุงุฏ ุงูุทุงุฒุฌุฉ ูู ุนุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููุฃุณุจูุน ุงููุงุถู ุฑูู 388 (ูู 4 ุฅูู 10 ููููุจุฑ 2019)</a></li>
<li><a href="../ar475270/index.html">SwiftUI: ุฅูุดุงุก ุฃูุณุงู ูุงุจูุฉ ููุชูุณูุน / โโูุงุจูุฉ ููุทู ูู ุนุฑุถ ุงููุงุฆูุฉ</a></li>
<li><a href="../ar475272/index.html">ุงูุชุฑุญูู ุฅูู ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุฑุงุณุช</a></li>
<li><a href="../ar475276/index.html">ููู ุชูุชุจ ุจุดูู ุตุญูุญ</a></li>
<li><a href="../ar475280/index.html">ูููุงุช ูุฑูุฑ ุณูุณูู ุ ูุชุฑุญูู ููุทูุฉ DNS ุ ูุทูุจุงุช LDAP ุตูุฑ ุ ูููู ุจุชุฌููุน ุญุฒู Ethernet. ุญู ุงููุดููุงุช ุนูู ุงูุดุจูุฉ ุจุงุณุชุฎุฏุงู r0ot-mi. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar475284/index.html">ูุฏูุฑ ุฏูููุฉ ูุงุญุฏุฉ ูุงููุฑูุฏ ุ ุฎูุงุตุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>