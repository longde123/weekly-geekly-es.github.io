<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñ§ üèπ üôè El futuro de Kubernetes es con m√°quinas virtuales. üìÖ üóÇÔ∏è üëµüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Adivinaci√≥n 

 Kubernetes ya ha jugado un papel importante en mi trabajo, y en el futuro ser√° a√∫n m√°s importante. Pero 2018 est√° llegando a su fin, as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El futuro de Kubernetes es con m√°quinas virtuales.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434756/">  <b>Adivinaci√≥n</b> <br><br>  Kubernetes ya ha jugado un papel importante en mi trabajo, y en el futuro ser√° a√∫n m√°s importante.  Pero 2018 est√° llegando a su fin, as√≠ que olv√≠date de la modestia y haz una predicci√≥n audaz: <br><blockquote>  <b>El futuro de Kubernetes son las m√°quinas virtuales, no los contenedores.</b> </blockquote>  Seg√∫n el hor√≥scopo chino, 2018 fue el a√±o del perro, pero en tecnolog√≠a fue el a√±o de Kubernetes.  Muchos acaban de aprender sobre esta tecnolog√≠a revolucionaria, y los departamentos de TI de todas partes est√°n tratando de desarrollar una "estrategia de Kubernetes" [1].  Algunas organizaciones ya han transferido grandes cargas de trabajo a Kubernetes. <br><br>  <i>[1] Si est√° intentando desarrollar una estrategia de Kubernetes, ya ha fallado, pero este es un tema para otro art√≠culo.</i> <br><a name="habracut"></a><br>  En otras palabras, hay mucha gente en Kubernetes en cada paso del Ciclo Gartner Sensation.  Algunos est√°n atrapados en un vac√≠o de decepci√≥n o ahogados en un pozo de desesperaci√≥n. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d1/1c3/5cc/2d11c35cc85a9c572e535142bf018277.png"><br>  <i><font color="gray">Jeremykemp, <a href="">Wikipedia</a> .</font></i>  <i><font color="gray"><a href="">Creative Commons CC BY-SA 3.0</a></font></i> <br><br>  Soy un gran admirador de los contenedores y no dir√© que los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">contenedores est√°n muertos</a> .  En 2013, Docker nos dio un shell para Linux Containers: una nueva y sorprendente forma de construir, empaquetar, compartir e implementar aplicaciones.  Apareci√≥ en el momento adecuado, ya que comenzamos a tomarnos en serio la entrega continua.  Su modelo se convirti√≥ en ideal para la cadena de entrega y contribuy√≥ a la aparici√≥n de la plataforma PaaS, y luego CaaS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/55a/94d/33055a94d32a0087206df9a0f9cc06f1.png"><br><br>  Los ingenieros de Google vieron que la comunidad de TI finalmente estaba lista para los contenedores.  Google ha estado utilizando contenedores durante mucho tiempo y, en cierto sentido, pueden considerarse los inventores de la contenedorizaci√≥n.  Comenzaron a desarrollar Kubernetes.  Como saben ahora, esta es la reencarnaci√≥n gratuita de la plataforma Borg de Google. <br><br>  Pronto, el soporte para Kubernetes fue proporcionado por todas las nubes grandes (GKE, AKS, EKS).  Los servicios en las instalaciones tambi√©n aumentaron r√°pidamente las plataformas basadas en Kubernetes (Pivotal Container Service, Openshift, etc.). <br><br><h1>  Soft multi-tenancy </h1><br>  Era necesario resolver un problema molesto, que puede considerarse la falta de contenedores ... esto es la tenencia m√∫ltiple. <br><br>  Los contenedores de Linux no se crearon como cajas de seguridad (como Solaris Zones o FreeBSD Jails).  En cambio, se basaron en un modelo de kernel com√∫n que utiliza funciones de kernel para proporcionar un aislamiento b√°sico del proceso.  Como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dir√≠a Jesse Frazel</a> , "los contenedores no son reales". <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1015407561187655680"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Esto se ve agravado por el hecho de que la mayor√≠a de los componentes de Kubernetes no conocen a los inquilinos.  Por supuesto, tiene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">espacios de nombres</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pod</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pol√≠ticas de seguridad</a> , pero no existe tal cosa en la API.  As√≠ como en componentes internos como <code>kubelet</code> o <code>kube-proxy</code> .  Esto lleva al hecho de que Kubernetes implementa el modelo de "renta suave" (arrendamiento suave). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eef/e54/556/eefe545564f03e8b6813e8bc83ed0188.png"><br>  <i><font color="gray">Arquitectura Kubernetes</font></i> <br><br>  Las abstracciones se filtran a√∫n m√°s.  Una plataforma en la parte superior de los contenedores hereda muchos aspectos de la renta blanda.  Las plataformas en la parte superior de las m√°quinas virtuales de m√∫ltiples inquilinos heredan este arriendo dif√≠cil (VMware, Amazon Web Services, OpenStack, etc.). <br><br>  El modelo de alquiler suave de Kubernetes coloca a los proveedores de servicios y distribuciones en una posici√≥n extra√±a.  El grupo de Kubernetes se est√° convirtiendo en una l√≠nea de "renta dura".  Incluso dentro de la misma organizaci√≥n, hay muchas razones para exigir una renta dura entre los usuarios (o aplicaciones).  Debido a que las nubes p√∫blicas proporcionan Kubernetes completamente administrado como un servicio, es f√°cil para los clientes tomar su propio cl√∫ster y usar el l√≠mite del cl√∫ster como punto de aislamiento. <br><br>  Algunas distribuciones de Kubernetes, como el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pivotal Container Service (PKS)</a> , son conscientes de este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">problema de alquiler</a> y utilizan un modelo similar, proporcionando el mismo Kubernetes como un servicio que se puede obtener de una nube p√∫blica, pero en su propio centro de datos. <br><br>  Esto condujo a la aparici√≥n del modelo de "muchos grupos", en lugar de "un gran grupo com√∫n".  A menudo, los clientes de GKE de Google tienen docenas de cl√∫steres de Kubernetes implementados para m√∫ltiples equipos.  A menudo, cada desarrollador obtiene su propio cl√∫ster.  Este comportamiento genera una cantidad sorprendente de instancias (Kubesprawl). <br><br>  Alternativamente, los operadores crean sus propios grupos de Kubernetes en sus propios centros de datos para asumir un trabajo adicional para administrar m√∫ltiples grupos, o acuerdan arrendar uno o dos grupos grandes suavemente. <br><br>  Por lo general, el cl√∫ster m√°s peque√±o es de cuatro m√°quinas (o m√°quinas virtuales).  Uno (o tres para HA) para Kubernetes Master, tres para Kubernetes Workers.  Se gasta mucho dinero en sistemas que en su mayor parte est√°n inactivos. <br><br>  Por lo tanto, debe mover a Kubernetes de alguna manera hacia un multicliente r√≠gido.  La comunidad de Kubernetes es muy consciente de esta necesidad.  Ya se ha formado un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">grupo de trabajo de arrendamiento m√∫ltiple</a> .  Ella est√° trabajando duro en este tema, y ‚Äã‚Äãtienen varios modelos y sugerencias sobre c√≥mo trabajar con cada modelo. <br><br>  Jesse Frazel escribi√≥ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">publicaci√≥n de blog</a> sobre este tema, y ‚Äã‚Äães genial porque es mucho m√°s inteligente que yo, por lo que puedo referirme a ella y salvarme de diez a√±os de estudio intenso, tratando de alcanzar su nivel.  Si no ha le√≠do esa publicaci√≥n, l√©ala ahora. <br><br><h1>  Solo m√°quinas virtuales muy peque√±as optimizadas para la velocidad ... </h1><br><blockquote>  Kata Containers es un proyecto de c√≥digo abierto y una comunidad que trabaja para crear una implementaci√≥n est√°ndar de m√°quinas virtuales livianas que se vean y funcionen como contenedores pero que brinden aislamiento de la carga de trabajo y beneficios de seguridad de VM. </blockquote>  Jesse sugiere utilizar la tecnolog√≠a de contenedor VM, como los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">contenedores Kata</a> .  Ofrecen aislamiento a nivel de VM, pero funcionan como contenedores.  Esto permite a Kubernetes dar a cada "inquilino" (asumimos el inquilino en el espacio de nombres) su propio conjunto de servicios del sistema Kubernetes que se ejecutan en contenedores de m√°quinas virtuales anidados (el contenedor de m√°quinas virtuales dentro de la m√°quina virtual que proporciona la infraestructura de IaaS). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/157/3ce/1b6/1573ce1b64d7607f5cb9ca0d09caef6e.png"><br>  <i><font color="gray">Imagen de Jesse Frasel: multiusuario duro en Kubernetes</font></i> <br><br>  Esta es una elegante soluci√≥n de alquiler m√∫ltiple de Kubernetes.  Su propuesta va a√∫n m√°s all√° para que Kubernetes use contenedores VM anidados para cargas de trabajo (Pods) que se ejecutan en Kubernetes, lo que proporciona un aumento significativo en la utilizaci√≥n de recursos. <br><br>  Nos queda al menos una optimizaci√≥n m√°s.  Cree el hipervisor adecuado para el proveedor de infraestructura subyacente o el proveedor de la nube.  Si el contenedor de VM es una abstracci√≥n de primer nivel proporcionada por IaaS, aumentaremos a√∫n m√°s la utilizaci√≥n de recursos.  El n√∫mero m√≠nimo de m√°quinas virtuales para iniciar un cl√∫ster de Kubernetes se reduce a una m√°quina (o tres para HA) para alojar el sistema de administraci√≥n de Kubernetes, que est√° disponible para el "superusuario". <br><br><h1>  Multi-arrendamiento optimizado de recursos (costo) </h1><br>  Una implementaci√≥n de Kubernetes con dos espacios de nombres y varias aplicaciones en ejecuci√≥n se ver√° as√≠: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ffc/4e2/d7f/ffc4e2d7ffb239fa1e0822e3d20afcd2.png"><br><blockquote>  Nota: hay otras cargas en la misma infraestructura de IaaS.  Como se trata de contenedores de m√°quinas virtuales, tienen el mismo nivel de aislamiento que las m√°quinas virtuales en la nube convencionales.  Por lo tanto, pueden trabajar en el mismo hipervisor con un riesgo m√≠nimo. </blockquote>  Inicialmente, no se implementa infraestructura en la nube, por lo que para un superusuario los costos son cero. <br><br>  Un superusuario solicita un cl√∫ster de Kubernetes desde la nube.  El proveedor de servicios en la nube crea una m√°quina virtual con un contenedor (o tres para HA) que ejecuta las API centrales de Kubernetes y los servicios del sistema.  El superusuario puede implementar m√≥dulos en el espacio de nombres del sistema o crear nuevos espacios para delegar el acceso a otros usuarios. <br><br>  Superuser crea dos espacios de nombres <code>foo</code> y <code>bar</code> .  Kubernetes solicita dos contenedores de VM de la nube para cada nivel de gesti√≥n de espacio de nombres (API de Kubernetes y servicios del sistema).  El superusuario delega el acceso a estos espacios de nombres a algunos usuarios, cada uno de ellos lanza algunas cargas de trabajo (m√≥dulos) y los contenedores de VM solicitan estos contenedores para estas cargas de trabajo. <br><br>  En todas las etapas, el superusuario paga solo por los recursos realmente consumidos.  El proveedor de servicios en la nube controla estos recursos y est√°n disponibles para cualquier usuario de la nube. <br><br><h1>  Realmente no estoy diciendo nada nuevo ... </h1><br>  Los proveedores de servicios en la nube ya est√°n trabajando en esta direcci√≥n.  Puede verificar esto mirando los eventos de la comunidad (es posible que Amazon ya lo haya hecho en silencio con Fargate). <br><br>  El primer consejo es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Virtual Kubelet</a> , una herramienta de c√≥digo abierto dise√±ada para disfrazarse de kubelet.  Conecta Kubernetes a otras API, lo que permite a Kubernetes solicitar contenedores VM desde un planificador est√°ndar en la nube. <br><br>  Otros consejos son una gran cantidad de nuevas tecnolog√≠as para la contenedorizaci√≥n de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√°quinas virtuales</a> , como los contenedores Kata ya mencionados, as√≠ como el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Firecracker</a> de Amazon y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">asesor</a> de Google. <br><br><h1>  Conclusi√≥n </h1><br>  Si implementa correctamente las mejoras en el modelo de una renta dura, encontrar√° la virtualizaci√≥n del Santo Grial de Kubernetes.  Aislamiento completo de las cargas de trabajo y sin costos adicionales. <br><br>  Si no utiliza la nube p√∫blica, a√∫n obtiene los beneficios de una mayor utilizaci√≥n de recursos, lo que vale la pena con menores requisitos de hardware. <br><br>  Esperemos que VMware y OpenStack presten atenci√≥n y publiquen hipervisores basados ‚Äã‚Äãen contenedores ligeros de VM y las implementaciones de Virtual Kubelet correspondientes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es434756/">https://habr.com/ru/post/es434756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es434742/index.html">Parte 2: uso de los controladores UDB PSoC de Cypress para reducir el n√∫mero de interrupciones en una impresora 3D</a></li>
<li><a href="../es434744/index.html">Samsung SSD 860 QVO 1 TB y 4 TB: el primer consumidor SATA QLC (2 partes)</a></li>
<li><a href="../es434746/index.html">BLE bajo microscopio 4</a></li>
<li><a href="../es434750/index.html">C√≥mo tomar el control de su infraestructura de red. CAPITULO DOS Limpieza y documentacion</a></li>
<li><a href="../es434752/index.html">Robomoroz: el futuro del personaje principal del A√±o Nuevo</a></li>
<li><a href="../es434758/index.html">Gu√≠a del moderador de Facebook: m√°s de 1.400 p√°ginas de diapositivas en conflicto</a></li>
<li><a href="../es434760/index.html">Resumen de noticias de PostgreSQL. A√±o nuevo (acortado) n√∫mero 13</a></li>
<li><a href="../es434762/index.html">Notas de un fitoqu√≠mico. Pl√°tano verde, o recuerde alimentar la microbiota</a></li>
<li><a href="../es434770/index.html">Energ√≠as renovables: palabras y su significado.</a></li>
<li><a href="../es434774/index.html">5 lecciones que aprendimos al escribir m√°s de 300,000 l√≠neas de c√≥digo de infraestructura</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>