<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé® üßõüèæ üö¥üèæ √Ä propos de l'√©trange m√©thode pour √©conomiser de l'espace sur le disque dur ‚ñ™Ô∏è üëÉüèæ ‚òòÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Un autre utilisateur souhaite √©crire une nouvelle donn√©e sur le disque dur, mais il n'a pas assez d'espace libre pour cela. Je ne veux rien supprimer ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Ä propos de l'√©trange m√©thode pour √©conomiser de l'espace sur le disque dur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453332/"><p>  Un autre utilisateur souhaite √©crire une nouvelle donn√©e sur le disque dur, mais il n'a pas assez d'espace libre pour cela.  Je ne veux rien supprimer non plus, car "tout est tr√®s important et n√©cessaire".  Et qu'en ferons-nous? </p><br><p>  Il n'a pas un tel probl√®me.  Des t√©raoctets d'informations reposent sur nos disques durs, et cette quantit√© n'a pas tendance √† diminuer.  Mais est-ce unique?  En fin de compte, apr√®s tout, tous les fichiers ne sont que des ensembles de bits d'une certaine longueur et, tr√®s probablement, le nouveau n'est pas tr√®s diff√©rent de celui qui est d√©j√† stock√©. </p><br><p> Il est clair que rechercher des informations d√©j√† stock√©es sur le disque dur est une t√¢che, sinon un √©chec, du moins pas efficace.  D'un autre c√¥t√©, parce que si la diff√©rence est petite, alors vous pouvez en ajuster un peu ... </p><br><p><img src="https://habrastorage.org/webt/sp/ho/gl/sphoglurqinhyzqmkyvbrgkox0y.jpeg" alt="Image de rematelier.ru"></p><br><p>  TL; DR - la deuxi√®me tentative de parler d'une √©trange m√©thode d'optimisation des donn√©es √† l'aide de fichiers JPEG, maintenant sous une forme plus compr√©hensible. </p><a name="habracut"></a><br><h2 id="o-bitah-i-raznice">  √Ä propos des bits et de la diff√©rence </h2><br><p>  Si nous prenons deux donn√©es compl√®tement al√©atoires, alors en moyenne la moiti√© des bits contenus y co√Øncident.  En effet, parmi les dispositions possibles pour chaque paire ('00, 01, 10, 11 '), exactement la moiti√© ont les m√™mes valeurs, tout est simple ici. </p><br><p>  Mais bien s√ªr, si nous prenons simplement deux fichiers et en ajustons un sous le second, nous en perdrons un.  Si nous conservons les modifications, nous r√©inventerons simplement le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">codage delta</a> , qui m√™me sans nous existe parfaitement, bien qu'il ne soit g√©n√©ralement pas utilis√© dans le m√™me but.  Vous pouvez essayer d'incorporer une s√©quence plus petite dans une plus grande, mais m√™me ainsi, nous risquons de perdre des segments de donn√©es critiques lorsqu'ils sont utilis√©s de mani√®re imprudente avec tout. </p><br><p>  Entre quoi et quoi alors la diff√©rence peut-elle √™tre √©limin√©e?  Eh bien, c'est-√†-dire qu'un nouveau fichier enregistr√© par l'utilisateur n'est qu'une s√©quence de bits avec laquelle nous ne pouvons rien faire par lui-m√™me.  Ensuite, il vous suffit de trouver ces bits sur le disque dur afin qu'ils puissent √™tre modifi√©s sans avoir √† stocker la diff√©rence, afin que vous puissiez survivre √† leur perte sans cons√©quences graves.  Oui, et il est logique de modifier non seulement le fichier lui-m√™me sur le FS, mais aussi certaines informations moins sensibles √† l'int√©rieur.  Mais lequel et comment? </p><br><h3 id="metody-podgonki">  M√©thodes d'ajustement </h3><br><p>  Les fichiers compress√©s avec perte viennent √† la rescousse.  Tous ces fichiers jpeg, mp3 et autres, bien qu'ils soient √† compression avec perte, contiennent un tas de bits disponibles pour un changement en toute s√©curit√©.  Vous pouvez utiliser des techniques avanc√©es en modifiant discr√®tement leurs composants dans diff√©rents domaines de codage.  Attends un instant.  Techniques avanc√©es ... modification discr√®te ... de quelques morceaux √† d'autres ... oui c'est presque de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">st√©ganographie</a> ! </p><br><p>  En effet, l'int√©gration d'une information dans une autre ressemble √† ses m√©thodes, quoi qu'il arrive.  Il impressionne √©galement l'invisibilit√© des changements apport√©s aux sens humains.  C‚Äôest l√† que les chemins divergent - c‚Äôest un secret: notre t√¢che est d‚Äôajouter des informations suppl√©mentaires sur le disque dur de l‚Äôutilisateur, cela ne fera que le blesser.  Oubliez plus. </p><br><p>  Par cons√©quent, bien que nous puissions les utiliser, nous devons apporter quelques modifications.  Et puis je vais les raconter et les montrer sur l'exemple d'une des m√©thodes existantes et du format de fichier commun. </p><br><h2 id="o-shakalah">  √Ä propos des chacals </h2><br><p>  Si vous compressez, alors le plus compressible du monde.  Nous parlons bien s√ªr des fichiers JPEG.  Non seulement il y a une tonne d'outils et de m√©thodes existantes pour y incorporer des donn√©es, mais c'est le format graphique le plus populaire sur cette plan√®te. </p><br><p><img src="https://habrastorage.org/storage/a555b701/12995be3/c44b46cd/8787f59d.png" alt="JPEG !!!"></p><br><p>  N√©anmoins, afin de ne pas vous engager dans l'√©levage de chiens, vous devez limiter votre champ d'activit√© dans des fichiers de ce format.  Personne n'aime les carr√©s monochromes dus √† une compression excessive, vous devez donc vous limiter √† travailler avec un fichier d√©j√† compress√©, en <strong>√©vitant le transcodage</strong> .  Plus pr√©cis√©ment, avec des coefficients entiers qui subsistent apr√®s les op√©rations responsables de la perte de donn√©es - DCT et quantification, qui sont parfaitement affich√©s sur le sch√©ma de codage (gr√¢ce au wiki de la Biblioth√®que Nationale Bauman): <br><img src="https://habrastorage.org/webt/jj/zi/j8/jjzij8i5sln2tlbnyk6yibzbcb8.jpeg" alt="Encodage JPEG"></p><br><p>  Il existe de nombreuses m√©thodes d'optimisation possibles pour les fichiers JPEG.  Il y a une optimisation sans perte (jpegtran), il y a une optimisation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sans perte</a> , qui contribue en fait toujours, mais cela ne nous d√©range pas.  En effet, si un utilisateur est pr√™t √† int√©grer une information dans une autre dans le but d'augmenter l'espace disque libre, il a soit optimis√© ses images pendant une longue p√©riode, soit ne souhaite pas du tout le faire par crainte d'une perte de qualit√©. </p><br><h2 id="f5">  F5 </h2><br><p>  Dans de telles conditions, toute une famille d'algorithmes convient, que l'on retrouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans cette bonne pr√©sentation</a> .  Le plus avanc√© d'entre eux est l'algorithme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">F5</a> , r√©dig√© par Andreas Westfeld, qui travaille avec les coefficients de la composante de luminosit√©, car l'≈ìil humain est le moins sensible √† ses changements.  De plus, il utilise une technique d'int√©gration bas√©e sur l'encodage matriciel, qui permet de faire moins de changements lors de l'int√©gration de la m√™me quantit√© d'informations, plus la taille du conteneur utilis√© est grande. </p><br><p>  Les changements eux-m√™mes se r√©sument √† une diminution de la valeur absolue des coefficients par unit√© dans certaines conditions (c'est-√†-dire pas toujours), ce qui permet d'utiliser F5 pour optimiser le stockage des donn√©es sur le disque dur.  Le fait est que le coefficient apr√®s un tel changement occupera probablement un plus petit nombre de bits apr√®s le codage Huffman en raison de la distribution statistique des valeurs en JPEG, et les nouveaux z√©ros b√©n√©ficieront de leur codage en utilisant RLE. </p><br><p>  Les modifications n√©cessaires sont r√©duites √† l'√©limination de la partie responsable du secret (permutation de mot de passe), ce qui permet d'√©conomiser des ressources et du temps d'ex√©cution, et d'ajouter un m√©canisme pour travailler avec de nombreux fichiers au lieu d'un √† la fois.  Plus en d√©tail, le processus de changement de lecteur est peu susceptible d'√™tre int√©ressant, nous nous tournons donc vers la description de l'impl√©mentation. </p><br><h2 id="vysokie-tehnologii">  Haute technologie </h2><br><p>  Pour d√©montrer le travail de cette approche, j'ai impl√©ment√© la m√©thode en C pur et effectu√© un certain nombre d'optimisations √† la fois en termes de vitesse et de m√©moire (vous ne pouvez pas imaginer combien ces images p√®sent sans compression avant m√™me DCT).  Les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">performances</a> multiplateformes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sont</a> obtenues en utilisant une combinaison des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®ques libjpeg</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pcre</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tinydir</a> , pour lesquelles je les remercie.  Tout cela va √™tre fait par make, donc les utilisateurs de Windows veulent installer Cygwin pour √©valuation, ou g√©rer Visual Studio et les biblioth√®ques par eux-m√™mes. </p><br><p>  L'impl√©mentation est disponible sous la forme d'un utilitaire de console et d'une biblioth√®que.  Plus d'informations sur l'utilisation de ce dernier peuvent √™tre trouv√©es dans le fichier Lisez-moi dans le r√©f√©rentiel sur le github, un lien auquel je joindrai √† la fin de l'article. </p><br><h3 id="kak-ispolzovat">  Comment utiliser? </h3><br><p>  Avec prudence.  Les images utilis√©es pour l'empaquetage sont s√©lectionn√©es par recherche d'expressions r√©guli√®res dans le r√©pertoire racine sp√©cifi√©.  √Ä la fin du fichier, vous pouvez d√©placer, renommer et copier comme vous le souhaitez, modifier le fichier et les syst√®mes d'exploitation, etc. Cependant, vous devez √™tre extr√™mement prudent et ne pas modifier le contenu imm√©diat.  La perte de la valeur d'un seul bit peut entra√Æner l'impossibilit√© de restaurer les informations. </p><br><p>  √Ä la fin du travail, l'utilitaire laisse un fichier d'archive sp√©cial contenant toutes les informations n√©cessaires pour le d√©ballage, y compris les donn√©es sur les images utilis√©es.  En soi, il p√®se de l'ordre de quelques kilo-octets et n'a pas d'effet significatif sur l'espace disque occup√©. </p><br><p>  Vous pouvez analyser la capacit√© possible en utilisant l'indicateur '-a': './f5ar -a [dossier de recherche] [expression r√©guli√®re compatible Perl]'.  L'emballage se fait avec la commande './f5ar -p [dossier de recherche] [expression r√©guli√®re compatible Perl] [fichier compress√©] [nom d'archive]', et le d√©compactage avec './f5ar -u [fichier d'archive] [nom du fichier restaur√©]' ' . </p><br><h3 id="demonstraciya-raboty">  D√©monstration de travail </h3><br><p>  Pour montrer l'efficacit√© de la m√©thode, j'ai t√©l√©charg√© une collection de 225 photos de chiens absolument gratuites du service <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Unsplash</a> et d√©terr√© un grand pdf sur 45 m√®tres dans les documents du deuxi√®me volume du Knut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Programming Art</a> . </p><br><p>  La s√©quence est assez simple: </p><br><pre><code class="bash hljs">$ du -sh knuth.pdf dogs/ 44M knuth.pdf 633M dogs/ $ ./f5ar -p dogs/ .*jpg knuth.pdf dogs.f5ar Reading compressing file... ok Initializing the archive... ok Analysing library capacity... <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 17.0s Detected somewhat guaranteed capacity of 48439359 bytes Detected possible capacity of upto 102618787 bytes Compressing... <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 39.4s Saving the archive... ok $ ./f5ar -u dogs/dogs.f5ar knuth_unpacked.pdf Initializing the archive... ok Reading the archive file... ok Filling the archive with files... <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 1.4s Decompressing... <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 21.0s Writing extracted data... ok $ sha1sum knuth.pdf knuth_unpacked.pdf 5bd1f496d2e45e382f33959eae5ab15da12cd666 knuth.pdf 5bd1f496d2e45e382f33959eae5ab15da12cd666 knuth_unpacked.pdf $ du -sh dogs/ 551M dogs/</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Captures d'√©cran pour les fans</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/-y/by/6h/-yby6h4ssyerd6uorenw23vfvu8.png" alt="Skrnsht"></p><br><p>  Le fichier d√©compress√© est toujours possible et doit √™tre lu: </p><br><p><img src="https://habrastorage.org/webt/0m/qu/js/0mqujsqlcrzzq3pdc1mook5znqq.png"></p></div></div><br><p>  Comme vous pouvez le voir, √† partir des 633 + 36 == 669 m√©gaoctets de donn√©es d'origine sur le disque dur, nous sommes arriv√©s √† un 551 plus agr√©able. Cette diff√©rence radicale s'explique par la diminution des valeurs de coefficient, qui affectent leur compression ult√©rieure sans perte: une diminution de seulement un par un peut calmement " couper "quelques octets du fichier r√©sultant.  Cependant, il s'agit toujours d'une perte de donn√©es, bien que extr√™mement faible, que vous devez supporter. </p><br><p>  Heureusement, ils ne sont pas compl√®tement visibles √† l'≈ìil nu.  Sous le spoiler (parce que habrastorage ne peut pas g√©rer de gros fichiers), le lecteur peut √©valuer la diff√©rence √† la fois par l'≈ìil et leur intensit√©, obtenue en soustrayant les valeurs du composant modifi√© de l'original: l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">original</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avec les informations √† l'int√©rieur</a> , la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">diff√©rence</a> (le gradateur de la couleur, la plus petite la diff√©rence dans le bloc ) </p><br><h2 id="vmesto-zaklyucheniya">  Au lieu d'une conclusion </h2><br><p>  En regardant toutes ces difficult√©s, acheter un disque dur ou tout t√©l√©charger sur le cloud peut sembler une solution beaucoup plus simple au probl√®me.  Mais m√™me si nous vivons maintenant dans une p√©riode aussi merveilleuse, rien ne garantit que demain, il sera toujours possible d'aller en ligne et de t√©l√©charger quelque part toutes vos donn√©es suppl√©mentaires.  Ou venez au magasin et achetez-vous un autre disque dur de mille t√©raoctets.  Mais vous pouvez toujours utiliser des maisons d√©j√† couch√©es. </p><br><p>  -&gt; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453332/">https://habr.com/ru/post/fr453332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453322/index.html">Configurer le cluster nomade avec Consul et l'int√©grer avec Gitlab</a></li>
<li><a href="../fr453324/index.html">Diode comme redresseur</a></li>
<li><a href="../fr453326/index.html">Comment automatiser la gestion de l'infrastructure informatique - discutez de trois tendances</a></li>
<li><a href="../fr453328/index.html">Dix ans sur un site distant</a></li>
<li><a href="../fr453330/index.html">Que faire si la RAM tombe en panne. Anamn√®se et m√©thodes de traitement</a></li>
<li><a href="../fr453334/index.html">Parlez de PAKE</a></li>
<li><a href="../fr453336/index.html">Guide de s√©lection de la machine de gravure CNC</a></li>
<li><a href="../fr453338/index.html">Rust 1.35.0 Release: Impl√©mentations de traits fonctionnels et autres innovations</a></li>
<li><a href="../fr453340/index.html">Perl 5.30 est sorti</a></li>
<li><a href="../fr453342/index.html">Mythes sur les employ√©s distants que nous nous sommes d√©truits</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>