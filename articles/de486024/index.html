<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏽 🚐 🤩 Wirklich einfache Grafiken in R für Wissenschaft und Journalismus 🚣🏿 💥 👩🏼‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R ist ein sehr leistungsfähiges Werkzeug für die Arbeit mit Statistiken: von der Vorverarbeitung bis zur Erstellung von Modellen beliebiger Komplexitä...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wirklich einfache Grafiken in R für Wissenschaft und Journalismus</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486024/"><p>  R ist ein sehr leistungsfähiges Werkzeug für die Arbeit mit Statistiken: von der Vorverarbeitung bis zur Erstellung von Modellen beliebiger Komplexität und entsprechender Grafiken. </p><br><p>  Eine einfache Google-Anfrage liefert eine große Menge an Literatur zum Thema „Einfache und schnelle Verwendung von R“. Es werden riesige Bücher und zahlreiche Notizen zum <a href="https://stackoverflow.com/questions/tagged/r">Stapelüberlauf angezeigt</a> , die auf den ersten Blick wie ein endloses Lagerhaus von Beispielen wirken, von denen jedes in zwei Zählungen vorliegt sammelt den notwendigen Code, um ein bestimmtes Problem zu lösen.  In Wirklichkeit ist dies jedoch überhaupt nicht wahr.  Es gibt nur sehr wenige Materialien, aus denen hervorgeht, wie ein einfacher Zeitplan „von Grund auf“ mit vorgefertigten Rezepten erstellt werden kann, um die bei der Lösung dieses Problems auftretenden Probleme zu lösen. </p><br><p>  Um praktische Probleme zu lösen, sind spezifische schrittweise Anleitungen erforderlich und keine detaillierte Beschreibung der vollen Leistungsfähigkeit eines Pakets.  Darüber hinaus sind vorgefertigte Fallstudien (die gleichen <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D1%2580%25D0%25B8%25D1%2581%25D1%258B_%25D0%25A4%25D0%25B8%25D1%2588%25D0%25B5%25D1%2580%25D0%25B0">Schwertlilien</a> ) oft wenig nützlich, da sie eine der wichtigsten Phasen der Arbeit mit Statistiken überspringen - die vorläufige Erfassung und Verarbeitung der Daten selbst.  Aber genau für diese Arbeit braucht fast ein Großteil aller Zeit oft!  Ein separates Problem ist die Erstellung von Zeitplänen, die formellen und häufig informellen Standards eines bestimmten beruflichen Umfelds entsprechen. </p><br><p>  Meine Kollegen und ich müssen regelmäßig mehr und mehr Statistiken und darauf basierende Modelle visualisieren, um wissenschaftliche Ergebnisse zu veröffentlichen.  Da sich das Studium mit Wirtschaft befasst, ähneln viele dieser Arbeiten dem professionellen Journalismus. </p><br><p>  Irgendwann wurde klar, dass für eine effektive Teamarbeit eine Art vollwertige Pipeline für die Verarbeitung von Statistiken erforderlich ist.  Dieser Artikel wurde als Einführung für Kollegen und als Spickzettel für mich zum Betrieb dieses Förderers erstellt.  Es scheint, dass dieses Material für ein breiteres Publikum nützlich sein kann. </p><a name="habracut"></a><br><h1 id="grafika-v-r-bez-boli-poshagovoe-rukovodstvo">  R Schmerzfreie Grafik: Komplettlösung </h1><br><h2 id="bazovaya-nastroyka-r">  Grundeinstellung R </h2><br><p>  Zum Arbeiten benötigen Sie ein Standardpaket: <a href="https://www.r-project.org/">R</a> + <a href="https://rstudio.com/products/rstudio/download/">RStudio</a> .  Sie sind für alle gängigen Plattformen kostenlos erhältlich.  R wird zuerst installiert, dann RStudio.  Es gibt normalerweise keine Probleme. </p><br><p>  Bevor Sie arbeiten, ist es besser, das neue Skript sofort irgendwo in Ihrem Dateisystem zu speichern und das Arbeitsverzeichnis R sofort in dem Ordner zu installieren, in dem das Skript gespeichert ist (Menü Sitzung - Arbeitsverzeichnis festlegen - Speicherort der Quelldatei).  Der letzte Hinweis ist wichtig, da ansonsten nach dem Neustart von RStudio kein externes oder natives Skript gestartet werden kann.  Aus irgendeinem Grund macht RStudio dies nicht standardmäßig, was logisch wäre. </p><br><p>  Selbst im Basispaket R gibt es Standard-Visualisierungswerkzeuge ( <em>Plot-</em> Funktion), mit denen Sie viele Arten von Diagrammen erstellen können. Dennoch reichen diese Funktionen für vollwertige, hochgradig anpassbare Illustrationen eindeutig nicht aus. </p><br><p>  Die am häufigsten verwendete Bibliothek für Grafiken in R ist das Paket <a href="https://ggplot2.tidyverse.org/">ggplot2</a> , das wir ebenfalls verwenden werden. </p><br><p>  Es lohnt sich auch, die <em>readxl-</em> Pakete (zum Lesen von .xls-, .xlsx-Dateien) und <em>dplyr</em> (zum Arbeiten mit Arrays), <em>scales</em> (zum Arbeiten mit verschiedenen Datenmaßstäben) und <em>Cairo</em> (zum Zeichnen von Grafiken von ggplot in Dateien) sofort zu installieren.  All dies kann mit einem einzigen Befehl ausgeführt werden: </p><br><pre><code class="plaintext hljs">install.packages("ggplot2", "readxl", "scales", "dplyr", "Cairo")</code> </pre> <br><h2 id="sbor-i-podgotovka-dannyh">  Datenerhebung und -aufbereitung </h2><br><p>  Das Erstaunlichste ist, dass diese Phase in jeder Literatur, sei es ein ernstes theoretisches Buch über angewandte theoretische Statistik oder ein Leitfaden für bestimmte statistische Pakete, sich katastrophal wenig Raum und Zeit widmet.  Nach den Erfahrungen der unabhängigen Forschung und Leitung von Studenten und Nachwuchskollegen ist jedoch bekannt, dass in diesem Stadium der Löwenanteil der Zeit und des Aufwands sinken kann, weshalb es sehr wichtig ist, diese auch bei der Lösung rein technischer Probleme zu sparen. </p><br><p>  Hier gibt es zwei Fragen: </p><br><ol><li>  Wie wähle ich das richtige Dateiformat? </li><li>  Wie lassen sich Daten am besten strukturieren? </li></ol><br><p>  Mit dem Format ist das Dilemma einfach: CSV im Vergleich zu Microsoft Excel (nicht so wichtig, "neue" .xlsx alte .xls).  Viele Leute glauben, dass CSV von Einfachheit (in der Tat handelt es sich um eine normale Textdatei, bei der die Spaltenwerte durch Komma oder Semikolon getrennt sind) und Geschwindigkeit profitiert.  Ich habe mich aus zwei Gründen für Excel entschieden: Erstens können Sie in dieser Datei mehrere Tabellen gleichzeitig auf verschiedenen Registerkarten speichern, und zweitens müssen Sie, was noch wichtiger ist, nicht überlegen, ob Sie das richtige Spaltentrennzeichen und die richtige Dezimalstelle auswählen.  Bei CSV muss dies häufig manuell in den R-Code geschrieben werden, und es muss sichergestellt werden, dass die Datendatei mit denselben Einstellungen gespeichert wird. </p><br><p>  Die Strukturierung von Daten ist komplexer und erfordert ein grundlegendes Verständnis für die Anordnung von Datenbanken. <del>  Wenn Sie sich nicht mit der Theorie relationaler Datenbanken über verschiedene Normalformen befassen, dann </del>  Die Datentabelle muss <em>redundant sein,</em> d. H. Zusätzliche Spalten enthalten.  Dies ist notwendig, damit Sie später im Skript in R bestimmte Informationen für die weitere Verarbeitung flexibel auswählen können.  Wenn wir beispielsweise eine primitive Zeitreihe darstellen möchten, müssen wir Spalten erstellen, die allen möglichen Gruppierungsmerkmalen entsprechen.  Wenn es sich zum Beispiel um eine Reihe jährlicher Beobachtungen der Bevölkerung der bedingten Stadt Sewerowostotschinsk handelt, werden die folgenden Spalten benötigt: <em>Jahr</em> (Jahr), <em>Var</em> (Indikatorname), <em>Wert</em> (Indikatorwert). </p><br><div class="scrollable-table"><table><thead><tr><th>  Jahr </th><th>  var </th><th>  Wert </th></tr></thead><tbody><tr><td>  1990 </td><td>  Populationsgröße </td><td>  102 </td></tr><tr><td>  1991 </td><td>  Populationsgröße </td><td>  103 </td></tr><tr><td>  1992 </td><td>  Populationsgröße </td><td>  104 </td></tr></tbody></table></div><br><p>  Wir werden alle Eingabedaten für diese Art der Darstellung von Informationen bereitstellen. </p><br><h2 id="primer">  Beispiel </h2><br><p>  <strong>Ziel:</strong> 2009-2018 einen Vergleich der Dynamik der Erntemengen in Russland, Sibirien und der Region Krasnojarsk erstellen. </p><br><p>  Das Abrufen von Daten für diese Aufgabe ist ganz einfach: Finden Sie einfach den entsprechenden Indikator im <a href="https://fedstat.ru/indicator/37848">einheitlichen abteilungsübergreifenden Informations- und Statistiksystem</a> .  Subtilität kommt als nächstes.  Sie können die Daten sofort im XLSX-Format herunterladen und dann wie oben gezeigt manuell strukturieren.  Glücklicherweise können Sie dies bei einigen Informationsquellen (z. B. EMISS) mit den Funktionen des Dienstes selbst tun. Dies vereinfacht die Arbeit erheblich und verkürzt den Zeitaufwand für die Erledigung. </p><br><p>  Für EMISS ist es also ausreichend, in den Modus „Einstellungen“ (die entsprechende Schaltfläche in der oberen rechten Ecke der Datenseite) zu wechseln und alle Zeichen außer dem „Punkt“ aus der Spalte „Spalten“ in die Spalte „Zeilen“ zu verschieben.  Es stellt sich heraus, dass ein Tisch fast bereit für unsere zukünftige Arbeit ist.  Darüber hinaus ist es bereits in Excel (oder einem anderen geeigneten Editor) sinnvoll, die Tabellenstruktur auf eine ähnliche Form wie die oben dargestellte zu bringen und sicherzustellen, dass die erste Zeile nur die Namen von Variablen mit lateinischen Daten enthält (im Prinzip kann R mit russischsprachigen Überschriften arbeiten) Dies ist jedoch unpraktisch beim Schreiben von Code.  Das Ergebnis war eine solche Tabelle (ein Fragment ist in mehreren Zeilen angegeben). </p><br><div class="scrollable-table"><table><thead><tr><th>  Titel </th><th>  Standort </th><th>  Jahr </th><th>  Wert </th></tr></thead><tbody><tr><td>  Holz geschlagen </td><td>  Russland als Ganzes </td><td>  2009 </td><td>  158868.3 </td></tr><tr><td>  Holz geschlagen </td><td>  Russland als Ganzes </td><td>  2010 </td><td>  173633.7 </td></tr><tr><td>  Holz geschlagen </td><td>  Sibirische FD </td><td>  2009 </td><td>  47161.58 </td></tr><tr><td>  Holz geschlagen </td><td>  Region Krasnojarsk </td><td>  2009 </td><td>  12111,48 </td></tr><tr><td>  Holz geschlagen </td><td>  Region Krasnojarsk </td><td>  2010 </td><td>  12078.6 </td></tr></tbody></table></div><br><p>  Jetzt können Sie diese <code>graphs.xlsx</code> aufrufen, das gesamte Buch in der Datei <code>graphs.xlsx</code> speichern und zu RStudio <code>graphs.xlsx</code> . </p><br><p>  Wir verbinden die notwendigen Bibliotheken. </p><br><pre> <code class="plaintext hljs">library(ggplot2) library(readxl) library(Cairo) library(scales) library(dplyr)</code> </pre> <br><p>  Wenn ein Zeitplan für eine russischsprachige Veröffentlichung vorbereitet wird, müssen Sie das entsprechende Gebietsschema unbedingt konfigurieren.  Die modernste Option, die in den meisten Fällen funktioniert, ist natürlich die UTF-8-Codierung: </p><br><pre> <code class="plaintext hljs">Sys.setlocale("LC_ALL", "ru_RU.UTF-8")</code> </pre> <br><p>  Wenn das System alt ist (einige alte Windows- oder Linux-Versionen), müssen Sie zunächst verstehen, welche Codierung standardmäßig verwendet wird - dies ist keine so einfache Aufgabe, die weit vom Zweck dieses Artikels entfernt ist. </p><br><p>  Jetzt müssen Sie die Daten in R laden. </p><br><pre> <code class="plaintext hljs">df_logging &lt;- read_excel("graphs.xlsx", sheet ="logging")</code> </pre> <br><p>  Die Blattoption hier legt den Namen des Blatts in der Excel-Arbeitsmappe fest, aus der die Daten geladen werden. </p><br><p>  Wir erstellen die einfachste Version des erforderlichen Zeitplans. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location))</code> </pre> <br><img src="https://habrastorage.org/webt/us/fr/of/usfrof2gizhjlejcid_nvctyf6y.png"><br><p>  Im Prinzip erwies sich fast „out of the box“ als sehr lohnenswerter Zeitplan, der für eine erste Analyse des untersuchten Prozesses durchaus geeignet ist, im Hinblick auf eine mögliche Veröffentlichung jedoch noch erhebliche Verbesserungen erfordert. </p><br><p>  Lassen Sie uns zunächst den Grafikstil auf einen akademischeren übertragen.  Das <code>ggplot2</code> Paket enthält mehrere vorgefertigte <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">Grundthemen</a> .  Das Theme von <code>theme_classic</code> ist für unseren Fall am besten geeignet.  Im Rahmen der Konfiguration können Sie die Basisgröße der Schriftart und des Headsets sofort festlegen.  Meine persönlichen Vorlieben gehören zum modernen Schriftsystem <a href="http://rus.paratype.ru/pt-sans-pt-serif">PT Sans, PT Serif, PT Mono</a> .  Aber Sie können natürlich auch nach einer klassischeren Times oder nach Helvetica fragen.  Auch die Veröffentlichung, in der die Veröffentlichung geplant ist, kann diesbezüglich spezielle Anweisungen enthalten.  Der Basispunkt wird empirisch zu 12 pt bestimmt. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12)</code> </pre> <br><img src="https://habrastorage.org/webt/qi/iu/xo/qiiuxoipgdyjymilgxmuobd1eqm.png"><br><p>  Bewegen Sie anschließend die Legende aus dem rechten Feld des Diagramms nach unten (mithilfe der <code>theme</code> ) und geben Sie den Achsen gleichzeitig aussagekräftige Namen ( <code>labs</code> ).  Entlang der Y-Achse schreiben wir den Namen des Indikators mit Maßeinheiten ("Protokollvolumen, Millionen Kubikmeter") und löschen die Beschriftungen entlang der X-Achse insgesamt, da klar ist, dass dort Jahre markiert sind. </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value)) + geom_line(aes(linetype=location)) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + labs(x = "", y = " , . . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/ia/lb/ww/ialbww1uazrcpr094vbiivbkw84.png"><br><p>  Um die Maßeinheiten für die Wahrnehmung komfortabler zu machen, werden wir von tausend Kubikmetern abweichen.  m bis Millionen.  Teilen Sie dazu einfach die Werte durch 1000, dh passen Sie die erste Zeile unseres Codes wie folgt an: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000))</code> </pre> <br><p>  Gleichzeitig müssen Sie die Einheiten in der Beschriftung ändern: </p><br><pre> <code class="plaintext hljs">labs(x = "", y = " ,  . ", color="")</code> </pre> <br><p>  Und sofort werden wir den Bildstil leicht verbessern, indem wir Punkte hinzufügen, um jeden beobachteten Wert anzuzeigen, für den wir eine Anweisung hinzufügen: </p><br><pre> <code class="plaintext hljs">geom_point(size=2)</code> </pre> <br><p>  Sie können auch den Stil der Linien selbst explizit festlegen.  Es ist logisch, den Indikator für Russland als durchgezogene Linie und für den Sibirischen Föderationsbezirk und das Krasnojarsker Territorium zu definieren - verschiedene Versionen von intermittierenden: </p><br><pre> <code class="plaintext hljs">scale_linetype_manual(values=c("twodash", "solid", "dotted"))</code> </pre> <br><p>  Nun sehen der allgemeine Code und das Diagramm folgendermaßen aus: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><img src="https://habrastorage.org/webt/x_/0i/-q/x_0i-qbvghhild9wwm3jab5kpcc.png"><br><p>  Es bleibt eine inhaltlichere Aufgabe zu lösen - den Informationsgehalt unseres Zeitplans zu erhöhen.  Daraus ist nun zu ersehen, dass der Indikator für alle Beobachtungsobjekte im Allgemeinen gewachsen ist, außerdem ist er seit etwa 2014 stärker als zuvor.  Aber es wäre viel klarer, wenn wir auch die Werte im ersten und letzten Jahr und zum Beispiel in der Spitze des Jahres 2011 direkt in der Grafik darstellen würden.  Die neue <code>geom_text</code> Anweisung hilft: </p><br><pre> <code class="plaintext hljs">geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8)</code> </pre> <br><p>  Auf den ersten Blick sieht es ziemlich kompliziert aus, und ich muss sagen, dass es wirklich nicht so einfach war, es zusammenzubauen.  Ich werde versuchen zu erklären, was hier passiert.  <code>geom_text</code> fügt dem Diagramm <code>geom_text</code> hinzu.  Für diesen Befehl wird ein Datensatz benötigt.  Wenn wir <code>df_logging</code> direkt darin spezifizieren <code>df_logging</code> , würden wir Beschriftungen über jedem Punkt erhalten.  Dies wird ziemlich oft gemacht, aber für relativ einfache Zeitreihen wie unsere wird dieser Ansatz nur unnötiges visuelles Rauschen erzeugen, ohne uns neue Informationen über das Verhalten des beobachteten Indikators zu liefern.  Daher werden wir nur die Jahre berücksichtigen, die für das Verständnis der Dynamik des Indikators wesentlich sind: 2009 (Beginn der Beobachtungen), 2011 (lokaler Höchstwert), 2018 (Ende der Beobachtungen).  Dies wird der Standard- <code>subset</code> helfen. </p><br><p>  Für die korrekte Darstellung von Zahlen gemäß der russischsprachigen Tradition benötigen wir ein Komma als Trennzeichen zwischen Ganzzahl und Dezimalstelle ( <code>decimal.mark</code> ) und für das Abschneiden der Anzahl der Nachkommastellen die <code>decimal.mark</code> .  Verschiedene Experimente damit, einschließlich der Verwendung der Rundungsfunktion, führten dazu, dass wir, wenn wir eine Dezimalstelle benötigen, den Wert <code>3</code> an die <code>digits</code> . </p><br><p>  Die Option <code>check_overlap</code> wird hier nicht direkt benötigt, kann aber in anderen Fällen nützlich sein: Sie dient zur automatischen Kontrolle überlappender Beschriftungen.  Die Option vjust steuert die vertikale Platzierung von Beschriftungen.  Der Wert wird nach Geschmacksgesichtspunkten ausgewählt. </p><br><img src="https://habrastorage.org/webt/fk/m2/fb/fkm2fbzy05xdbulnx1rs8mznimu.png"><br><p>  Nun ist der Zeitplan wirklich interessant zu betrachten! </p><br><p>  Es wurde jedoch ein unerwartetes Problem festgestellt: Der obere rechte Wert wird durch die vertikale Größe des Bildes abgeschnitten.  Es gibt verschiedene Möglichkeiten, um dieses Problem zu lösen.  Ich stieg mit einer leichten Ausdehnung der vertikalen Achsenskala mit einer expliziten Obergrenze von 250 Millionen Kubikmetern aus.  m: </p><br><pre> <code class="plaintext hljs">scale_y_continuous(limits = c(0,250))</code> </pre> <br><img src="https://habrastorage.org/webt/nm/sv/il/nmsvilg49qwuzhj3biqrhohepao.png"><br><p>  Fertig  Der endgültige Code sieht also so aus: </p><br><pre> <code class="plaintext hljs">ggplot(data=df_logging, aes(x=year, y=value/1000)) + geom_line(aes(linetype=location)) + geom_point(size=1) + theme_classic(base_family = "PT Sans", base_size = 12) + theme(legend.title = element_blank(), legend.position="bottom", legend.spacing.x = unit(0.5, "lines")) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + geom_text(aes(label=format(value/1000, digits = 3, decimal.mark = ",")), data = subset(df_logging, year == 2009 | year == 2018 | year == 2011), check_overlap = TRUE, vjust=-0.8) + scale_linetype_manual(values=c("twodash", "solid", "dotted")) + scale_y_continuous(limits = c(0,250)) + labs(x = "", y = " ,  . ", color="")</code> </pre> <br><blockquote>  Das resultierende Bild ist in der Monografie enthalten: Strukturmodernisierung als Faktor zur Steigerung der Wettbewerbsfähigkeit der Region (am Beispiel des Krasnojarsker Territoriums) / ed.  Shishatsky N.G. - Novosibirsk: IEOPP SB RAS, 2020 (im Druck). </blockquote><br><h2 id="eksport">  Exportieren </h2><br><p>  Mit dem in RStudio integrierten Plug-In für die Grafikanzeige können Sie Bilder in verschiedenen Formaten ohne zusätzliche Befehle mit nur wenigen Klicks exportieren.  Das Problem ist, dass dieser Dienst für praktische Aufgaben praktisch nutzlos ist.  Beim Speichern in Rasterformaten (.jpg, .png) ist die Standardeinstellung sehr niedrig. Wenn Sie also beispielsweise ein Bild in Word importieren, wird es unscharf.  Bei den Vektoren .eps oder .pdf ist die Situation offen gesagt noch schlimmer: Das Speichern erfolgt entweder bei Fehlern, bei denen das Öffnen der Datei nicht möglich ist, oder ohne die Möglichkeit, russischsprachige Inschriften zu verwenden. </p><br><p>  Die Lösung besteht darin, die <code>ggsave</code> Funktion aus dem <code>ggplot</code> Paket zu verwenden. </p><br><p>  Wenn für die Ausgabe eine normale Rasterdatei erforderlich ist, z. B. im PNG-Format, ist alles ganz einfach: </p><br><pre> <code class="plaintext hljs">ggsave("logging.png", width=709, height=549, units="px")</code> </pre> <br><p>  Die Geometrie (Optionen <code>width</code> und <code>height</code> ) und Maßeinheiten ( <code>units</code> ) können weggelassen werden, aber dann wird das Bild standardmäßig quadratisch exportiert, was kaum praktisch ist.  Aus diesem Grund ist es besser, Ihren eigenen Anteil und die erforderliche Größe zu ermitteln und diese Parameter manuell festzulegen, wie in der obigen Codezeile beschrieben. </p><br><p>  Für die spätere Verwendung des Bildes in Papierpublikationen ist es sinnvoll, das Bild in Vektorformaten zu exportieren, damit später im Layout die Bildgeometrie frei verändert werden kann.  Viele Magazine bevorzugen das .eps-Format - es ist auch praktisch, es für den Export nach Word zu verwenden.  Wir benötigen den bereits installierten und verbundenen Cairo-Treiber: </p><br><pre> <code class="plaintext hljs">ggsave(filename = "export.eps", width=15, height=11.6, units="cm", device = cairo_ps)</code> </pre> <br><p>  Dateien werden in dem aktuellen Verzeichnis gespeichert, in dem sich das R-Skript befindet. </p><br><h1 id="chto-esche-pochitat">  Was gibt es noch zu lesen </h1><br><p>  Die Literatur zu Grafiken in R ist ziemlich umfangreich.  Hier sind einige Beispiele, von denen das erste die Arbeit des Autors des ggplot-Pakets ist: </p><br><ul><li>  <a href="https://ggplot2-book.org/">Wickham, Hadley.</a>  <a href="https://ggplot2-book.org/">ggplot2: Elegante Grafiken für die Datenanalyse</a> ; </li><li>  <a href="https://r-graphics.org/">Chang, Winston.</a>  <a href="https://r-graphics.org/">R Graphics Cookbook, 2. Auflage</a> ; </li><li>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Prabhakaran, Selva.</a>  <a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Top 50 ggplot2-Visualisierungen - Die Master-Liste (mit vollständigem R-Code)</a> . </li></ul><br><p>  Das wahrscheinlich beste und ausführlichste Buch über Grafiken in R in russischer Sprache ist das Buch von <a href="https://tsamsonov.github.io/r-geo-course/">Timofei Samsonov.</a>  <a href="https://tsamsonov.github.io/r-geo-course/">Visualisierung und Analyse von Geodaten in der R-Sprache</a> .  Dies ist eine ausgezeichnete, detaillierte Anleitung zu vielen allgemeinen und spezifischen Problemen, die mit R gelöst werden können. </p><br><p>  Sie können auch ein Buch in Russisch über R im Allgemeinen empfehlen: <br>  <a href="https://github.com/ranalytics/data-mining">Shitikov V.K., Mastitsky S.E. Klassifikation, Regression, Data Mining-Algorithmen unter Verwendung von R. 2017</a> . </p><br><p>  Ein interessantes und motivierendes Beispiel ist eine <a href="http://johnburnmurdoch.github.io/slides/r-ggplot/">aussagekräftige Präsentation zum Einsatz von ggplot2 bei der Erstellung von Zeichnungen für die einflussreiche Financial Times</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de486024/">https://habr.com/ru/post/de486024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486000/index.html">ADSM3. IPAM / DCIM-Systeme</a></li>
<li><a href="../de486006/index.html">Speichern Sie den Chat-Status auf dem Stapel</a></li>
<li><a href="../de486010/index.html">Erstellen Sie eine Demo für ein altes Telefon - AONDEMO</a></li>
<li><a href="../de486014/index.html">SLAC-Tour: Nationales Beschleunigerlabor des US-Energieministeriums in Stanford</a></li>
<li><a href="../de486018/index.html">Ergebnisse der Sitzungsumfrage</a></li>
<li><a href="../de486028/index.html">Neuronale Netze bei der Herstellung von Zahnersatz</a></li>
<li><a href="../de486030/index.html">TL-SREET 55 5K LED Straßenlaterne Bewertung</a></li>
<li><a href="../de486032/index.html">So werden Sie Dialogdesigner</a></li>
<li><a href="../de486034/index.html">Schneller Einstieg in das Produktmanagement über Open Source</a></li>
<li><a href="../de486036/index.html">Text-Stimmungsanalyse auf Node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>