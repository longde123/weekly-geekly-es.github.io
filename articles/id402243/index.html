<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤛🏿 🤦🏻 👉🏿 Ion Mikro-UPS 👩🏾‍🔧 🧓 🤚🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hari baik untuk semua komunitas yang dihormati. Saya mendapat kehormatan untuk menawarkan Hubrovites tertarik pada elektronik radio beberapa pertimban...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ion Mikro-UPS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402243/">  Hari baik untuk semua komunitas yang dihormati.  Saya mendapat kehormatan untuk menawarkan Hubrovites tertarik pada elektronik radio beberapa pertimbangan dan implementasi spesifik catu daya cadangan pada ionistor (mereka superkapasitor dengan lapisan listrik ganda), yang dirancang untuk memastikan penyelesaian yang benar dari modul prosesor pada mikrokontroler ARM yang berjalan di bawah Linux Debian standar. <br><a name="habracut"></a><br>  Masalah muncul di depan hamba Anda yang rendah hati dengan kedok berikut: Anda harus memadamkan OS Linux (berjalan pada solusi Tertanam) dengan benar ketika daya eksternal dimatikan.  Daya ini disuplai dari port USB 2.0 standar ke perangkat kotak yang dibuat sebelumnya melalui setidaknya konektor USB-B standar.  Pengguna yang tidak berpengalaman dari perangkat ini lebih memilih untuk menarik kabel USB klise, mengikuti prinsip "UnPlug-NoPlay-NoProblem".  Jelas bahwa solusi yang tertanam tanpa hard disk dan dengan memori virtual yang di-nolkan selama konfigurasi tahan terhadap force majeure, namun, beberapa ribu pengguna-jam penggunaan telah menunjukkan bahwa itu tidak selalu bekerja “tanpa masalah”. <br><br>  Saya harus mengerutkan otak saya dan melakukan trans kreatif.  Setelah meninggalkan trans, cara pertama yang mungkin untuk menyelesaikan masalah terwujud - masalah psikologis, yang awalnya tampak paling menarik.  Garis pemikiran kira-kira sebagai berikut - mengapa pengguna biasa menyentak tongkat yang menempel di port USB dengan tangan yang tidak tergoyahkan?  Mungkin karena dia sendiri atau kenalannya yang terdekat tidak kehilangan dalam tesis mereka, disertasi atau laporan tahunan mereka.  Mengapa pengguna yang sama tidak menarik kabel printer dari printer yang berfungsi pada hari-hari ona?  Mungkin karena dia melihat, atau dia mendengar dari bibir seseorang, bagaimana dia harus membeli MB baru atau Centronics on ISA (PCI).  Saya tidak ingin (dari kata pada umumnya) bahwa kotak saya ditarik begitu saja.  Apa yang perlu dilakukan untuk ini?  Benar, bentuk perilaku pengguna yang diperlukan. <br><br>  Saya harus mengguncang keterampilan sirkuit dan pelacakan, dan versi berikutnya dari kotak mendapat LED RGB dan tombol di panel depan, serta sinyal piezo dengan timbre jahat di dalamnya.  Sebuah program sederhana menentukan apakah shutdown ekstrem berlalu dengan benar.  Jika itu salah dan kesalahan pengguna adalah yang pertama pada memori flash-nya, maka tindakan kontrol mengikuti: alih-alih indikator menyenangkan kuning dan hijau, kotak berkedip dengan mata merah dan menjerit beberapa menit sebelum tenang dan mulai memuat.  Relapse dapat dihukum lima menit, heather yang bahkan lebih kejam dan garis dalam manual yang diblokir kotak karena shutdown yang salah berulang dihapus dari garansi, di sini. <br><br>  Anda tahu, metode ini ternyata sangat efektif.  Tetapi di sini Pelanggan yang terhormat mengemukakan harapan bahwa sebelum memutuskan sambungan kotak itu masih akan memberi tahu server bahwa itu memerlukan waktu dari tempat kejadian.  Sekarang beberapa, tetapi sumber energi diperlukan.  Otak dari trans kreatif berikutnya kembali dengan pikiran: baterai lithium-polimer adalah segalanya bagi kita!  Pemikiran umum menambah banyak skeptis pada pemikiran ini: Saya tidak benar-benar ingin mengisi baterai setiap kali saya menyalakannya, karena jumlah charge-discharge adalah sumber daya yang dikonsumsi, serta subjek penipuan yang sinis oleh produsen baterai dari pelanggan yang tidak bersalah.  Mengisi daya tidak setiap kali Anda menyalakannya, tetapi karena habis?  Jadi perlu memagar seluruh taman, mengkalibrasi baterai, mengukur voltase dengan akurasi yang baik.  Secara umum, ini dan itu, dan kemudian Samsung Galaxy muncul dengan baterai pembakar.  Membayangkan api di tempat di mana kotak itu seharusnya berdiri, saya harus secara sukarela melambaikan pedang dan menghentikan musyawarah menyakitkan dari ide kedua. <br><br>  Menuju kesurupan untuk ketiga kalinya, seorang jenius kreatif dibawa ke ionistors cahaya.  Dan apa, sepertinya tidak buruk.  Kapasitasnya dalam farad, jumlah siklus charge-discharge tidak terbatas, seolah-olah, volt benar-benar tidak cukup - 2,7 maksimum per sel, dan mereka tidak sangat mengalir.  Sudah tidak ada yang perlu direnungkan tentang kurangnya pilihan, dan sekali lagi saya harus menangani sirkuit bersama dengan jejak. <br><br>  Pencarian di hamparan luas Internet membawa beberapa tangkapan, dan, untuk sesaat, diputuskan untuk berhenti pada mikrosirkuit Linear LTC3110.  Ke depan, saya akan mengatakan bahwa beberapa opsi lagi telah diuji, tetapi tidak terlalu berhasil.  Jika pembaca tertarik pada detail pilihan - Anda dipersilakan di PM.  Dari opsi yang tersedia, LTC3110 berisi hampir semua yang Anda butuhkan untuk membangun sumber daya cadangan di ionistor: <br>  - ia memiliki konverter step-up, yang membuat perancang tidak terlalu terbatas dalam pemilihan tegangan suplai; <br>  - Konverter ini menggunakan induktansi untuk penyimpanan energi, yang secara signifikan meningkatkan efisiensi dan memungkinkan untuk memberikan beberapa ampere ke beban; <br>  - dimungkinkan untuk membatasi arus yang dikonsumsi selama pengisian pada kisaran 125mA - 2A, yang sangat penting ketika ditenagai oleh USB; <br>  - ada sirkuit internal untuk menyeimbangkan masing-masing ion yang terhubung seri untuk meningkatkan daya tersimpan dan keandalan; <br>  - chip dilengkapi dengan timah yang menunjukkan tingkat muatan ionator; <br>  - dan, untuk pencuci mulut, ada pembanding tambahan, ambang batas yang ditetapkan oleh pengguna. <br><br>  Untuk detail dan contoh aplikasi, saya mengirim Reader yang penasaran ke datasheet pada microcircuit, Google yang maha kuasa dengan mantra "LTC3110 pdf" untuk membantu Anda. <br><br>  Secara teori, untuk membangun Micro-UPS yang bisa diterapkan, LTC3110 sendiri perlu menambahkan sirkuit yang menyediakan daya ke kotak dalam mode normal, jika ada koneksi ke USB yang berfungsi.  IC ST1S10PHR dipilih untuk peran terhormat ini, yang sifatnya yang bersahaja dan harga murah telah dikenal dan diuji untuk waktu yang lama.  Saya juga harus menambahkan kunci yang memutus rangkaian catu daya konsumen utama selama pengisian awal ionistors.  Kunci ini memungkinkan Anda untuk memecahkan dua masalah: pertama, waktu pengisian awal berkurang (karena hampir semua yang dikonsumsi oleh USB masuk ke ion), dan kedua, ini menghilangkan kemungkinan pemadaman yang tidak menyenangkan ketika UPS sangat kekurangan daya sehingga pasokan energi masih tidak cukup untuk yang benar. shutdown.  Selain itu, "permulaan yang tinggi" dari ion yang terisi penuh memungkinkan sirkuit untuk kadang-kadang (tetapi tidak terlalu sering) mengkonsumsi lebih banyak arus daripada yang dapat diberikan oleh port USB - defisit akan diisi kembali dari ionistor.  Situasi seperti itu dapat muncul, misalnya, ketika merekam blok besar informasi pada USB flash drive yang luas yang ditenagai bersama dengan kotak. <br><br>  Saya pikir bagian pengantar dapat diselesaikan pada ini dan beralih ke skema kerja tertentu. <br><br><img src="https://habrastorage.org/files/249/ae5/0b7/249ae50b7dff4c188249bbb255dc9b05.GIF" alt="gambar"><br><br>  Beginilah tampilan sirkuit micro-UPS pada ionistor. <br><br>  Daya disuplai dari port USB 2.0 (sudut kiri atas sirkuit).  Pada DA1, sesuai dengan skema yang disarankan, konverter step-down 5V -&gt; 3.3V dirakit dari datasheet.  Satu-satunya fitur adalah filter tambahan dari dering frekuensi tinggi pada L2 dan C7.  Jika diinginkan, elemen-elemen ini dapat dikecualikan.  Resistor R3 ... R5 digunakan untuk pelepasan darurat ion sebelum transportasi, misalnya, atau sebelum memasang seluruh papan secara keseluruhan, jika tidak, sumber daya tetap ada di sana, dan cukup kuat untuk membakar apa pun.  Resistor pelepasan terhubung atau terputus oleh jumper SA1.  VT1, C16, R17 dan R18 - kunci untuk memberi daya pada konsumen utama, telah disebutkan di atas dan harus menambahkan beberapa kata di bawah ini.  Yang lainnya adalah harness LTC3110 standar dari datasheet. <br><br>  3V3SBY adalah kekuatan siaga dari rangkaian kontrol, dalam kotak itu diimplementasikan pada CPLD EPM240T100 dari Altera, tetapi tidak ada yang mencegahnya dieksekusi pada mikrokontroler atau logika diskrit.  3V3 adalah catu daya utama dari kotak yang disediakan oleh UPS.  Informasi status Micro-UPS ditampilkan pada PWRFAIL, BATFULL dan BATLOW dengan nama-nama yang jelas.  PWRFAIL diaktifkan ketika ada kehilangan daya dari USB, BATFULL menunjukkan bahwa muatan mencapai tingkat 95% (5.2V), BATLOW menunjukkan penurunan tingkat pengisian hingga 40% (2.1V).  Jika diinginkan, level ini dapat disesuaikan dengan memilih R6 dan R7, dipandu oleh lembar data.  Sayangnya, trik semacam itu tidak bekerja dengan level BATFULL - itu dipalu ke IC dengan paku. <br><br>  UPS mikro mengontrol dua sinyal: PWRON dan BATOFF.  PWRON menyalakan daya utama, BATOFF mematikan UPS secara keseluruhan. <br><br>  Logika umum operasi micro UPS adalah sebagai berikut: <br><br><ol><li>  dalam keadaan awal, C8 dan C9 benar-benar habis, jumper SA1 di posisi kiri, daya USB 5V tidak disediakan; </li><li>  perangkat dicolokkan ke port USB-B 2.0; </li><li>  konverter pada DA1 mulai memasok arus ke saluran 3V3SBY, memberi energi rangkaian kontrol pada CPLD, yang, pada gilirannya, membuka kunci VT1, menghapus sinyal PWRON;  selain itu, rangkaian kontrol menghilangkan sinyal BATOFF, termasuk DA2; </li><li>  DA2 mulai mengisi daya ionistors;  saat mereka mengisi daya, sinyal BATLOW dinonaktifkan (pada 2.1 V), kemudian BATFULL diaktifkan (pada 5.2 V pada ion); </li><li>  penampilan sinyal BATFULL, sirkuit kontrol menganggap kesiapan UPS mikro untuk bekerja, dan menyalakan VT1, memasok daya ke sirkuit utama;  Pada saat yang sama, DA2 terus memantau ion, dan ketika muatan turun di bawah 95%, ia mulai mengisi daya;  menghubungkan VT1 ke pin RSENS DA2 memastikan bahwa arus diambil untuk mengisi ulang sehingga tidak melebihi batas USB, dengan mempertimbangkan rangkaian utama yang dikonsumsi;  jika konsumsi sirkuit utama melebihi batas ini, pelepasan ion akan mulai mengkompensasi biaya yang tidak perlu; </li><li>  ketika melepaskan USB 5V, jalur PWRFAIL diaktifkan, membiarkan perangkat kontrol tahu bahwa sumber eksternal telah menghilang;  sirkuit kontrol menghasilkan permintaan untuk menginterupsi prosesor ARM untuk menjalankan skrip shutdown yang benar;  selama ini daya disuplai oleh DA2; </li><li>  setelah menyelesaikan prosedur penutupan, ARM mengeluarkan sinyal bahwa semuanya siap untuk punah, dan sirkuit kontrol menetapkan BATOFF, menonaktifkan DA2;  dalam kondisi ini, kotak terletak sebelum daya disuplai ke USB 5V (lihat poin 1 kecuali untuk muatan residu pada C8 dan C9); </li><li>  jika ARM ragu-ragu banyak dan tidak dapat menutup semuanya sampai sinyal BATLOW, sirkuit harus dihilangkan energi secara paksa. </li></ol><br>  Jika Anda mau, mudah untuk mengatur logika kontrol micro-UPS lainnya, misalnya, dengan meningkatkan level switch-on BATLOW persen menjadi 60% (memilih R6 dan R7), gunakan sebagai sinyal untuk berhenti, putuskan dengan paksa dari C8 dan C9 debit penuh. <br><br>  Pada akhirnya, cepat-cepat memeriksa parameter rangkaian yang dapat dikonfigurasi.  R1 dan R2 menentukan tegangan output DA1, tegangan lain mungkin memerlukan penggantian C1, C2, C4-C6 dan L1.  Peringkat C8 dan C9 hanya menentukan waktu pengisian dan pemakaian UPS, saya pribadi mencoba dari 4,7 hingga 100 Farad, secara teoritis tidak ada batasan.  R6 dan R7 menentukan tingkat aktivasi BATLOW.  Tegangan muatan maksimum ion tergantung pada rasio R8 / R9.  R11 menentukan arus yang dikonsumsi dari 5V USB, pada resistansi yang ditunjukkan, rangkaian mengkonsumsi 0,5A.  Rasio R12 / R14 menetapkan drop level 5V USB, yang akan didefinisikan sebagai kegagalan daya (PWRFAIL).  R15 / R16 menentukan tegangan output DA2 dalam mode pelepasan. <br><br>  Sinyal keluaran LTC3110 dibuat sesuai dengan skema "saluran terbuka" sehingga tidak terikat pada tegangan suplai tertentu.  Di sirkuit saya, resistor pull-up untuk mereka terlibat dalam CPLD, itu tidak masalah untuk menggunakannya dalam mikrokontroler modern.  Nah, jika Anda memutuskan untuk membuat rangkaian kontrol pada K155, maka Anda harus mengurus sendiri resistornya. <br><br>  Beberapa kata tentang C16.  Memperoleh pengetahuan ini membuat saya menghabiskan waktu paling banyak di papan prototipe UPS.  Lagi pula, apa masalahnya?  Dalam lembar data, hitam dalam bahasa Inggris mengatakan bahwa jika Anda ingin jumlah arus yang dikonsumsi oleh sirkuit utama dan arus pengisian ionors dijamin tidak melebihi batas yang ditetapkan oleh R11, silakan beri daya rangkaian utama dari output RSENS.  Baik, setuju.  Dan kemudian lebih menarik.  Karena sirkuit Anda dapat memiliki apa saja, hingga hubung singkat (hubung singkat, hubung singkat, hubung singkat), kata lembar data, LTC3110 dilengkapi dengan rangkaian perlindungan khusus.  OKE, sangat bagus.  Dan sekarang untuk bagian yang menyenangkan.  Kami membaca lembar data lebih lanjut: dan agar skema perlindungan tidak salah, tolong, berikan total kapasitas saluran listrik BUKAN LEBIH BANYAK, Karl, 10 microFarads.  Gufi ... Untuk segalanya tentang segalanya, dan jangan menyangkal diri apa pun.  Memang, setiap beban lebih besar dari 10 uF ketika terhubung wedges ... Jangan tertipu, Basurman.  Saya harus membuat sedikit penundaan kunci pada VT1, yang memberikan C16.  Saya mengerti bahwa untuk beberapa waktu VT1 tidak akan berada dalam mode utama, tetapi antara langit dan bumi (dalam arti, antara VCC dan GND), yang tidak bagus sama sekali.  Tapi setidaknya itu berhasil.  Begitulah "hawa baru."  Untuk fanatik kemurnian mode utama, saya akan menambahkan bahwa saya mencoba untuk tidak menempatkan C16, tetapi sebuah induktansi 1,5 μH secara seri dengan VT1 - semuanya bekerja dengan baik. <br><br>  Di bawah ini saya memberikan gambar dari papan sirkuit tercetak dengan sirkuit yang dijelaskan, tentu saja, penomoran komponen berbeda dari yang ditunjukkan pada diagram sirkuit - itu adalah memotong seluruh kotak. <br><br><img src="https://habrastorage.org/files/ca6/497/465/ca6497465973465483dabf323d12be70.jpg" alt="gambar"><br><br>  Jika Anda memiliki pertanyaan - silakan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id402243/">https://habr.com/ru/post/id402243/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id402231/index.html">Tanyakan Ethan: dapatkah energi gelap mengarah pada pengulangan siklus kehidupan alam semesta?</a></li>
<li><a href="../id402233/index.html">Kami meng-overclock router JTAG</a></li>
<li><a href="../id402235/index.html">Peta jalan terperinci diperlukan untuk mobil pintar, bukan untuk orang</a></li>
<li><a href="../id402237/index.html">Mengapa Intel Mobileye?</a></li>
<li><a href="../id402239/index.html">Jejaring Agama</a></li>
<li><a href="../id402247/index.html">Tips Pencetakan Epson</a></li>
<li><a href="../id402249/index.html">Astell & Kern AK70 - Pocket Media Harvester untuk pencinta musik</a></li>
<li><a href="../id402251/index.html">Kota pribadi pertama di Rusia. Bagian 3</a></li>
<li><a href="../id402253/index.html">Kekuatan jaringan alami dalam loop berlebihan</a></li>
<li><a href="../id402255/index.html">Munculnya era ICO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>