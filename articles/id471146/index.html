<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤲 🏜️ 👥 Layanan yatim: sisi sebaliknya dari arsitektur layanan (mikro) 🥧 🔽 🧕🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Direktur operasi portal Banki.ru, Andrei Nikolsky mengatakan pada konferensi tahun lalu DevOpsDays Moscow tentang layanan anak yatim: bagaimana mengid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Layanan yatim: sisi sebaliknya dari arsitektur layanan (mikro)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/scienceman_events/blog/471146/">  Direktur operasi portal Banki.ru, Andrei Nikolsky mengatakan pada konferensi tahun lalu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DevOpsDays Moscow</a> tentang layanan anak yatim: bagaimana mengidentifikasi anak yatim dalam infrastruktur, apa layanan anak yatim yang buruk, apa yang harus dilakukan dengan mereka, dan bagaimana menjadi jika tidak ada yang membantu. <br><br>  Di bawah potongan adalah versi teks laporan. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/j9I4oeEXBO8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>  Halo rekan!  Nama saya Andrey, saya memimpin operasi di Banki.ru. <br><br>  Kami memiliki layanan hebat, ini adalah layanan monolitik, ada layanan dalam arti yang lebih klasik, ada yang sangat kecil.  Dalam terminologi pekerja dan tani saya, saya katakan bahwa jika layanannya sederhana dan kecil, maka itu mikro, dan jika tidak sangat sederhana dan tidak kecil, maka itu hanyalah sebuah layanan. <br><br><h3>  <b>Layanan Pro</b> </h3><br>  Saya akan membahas kelebihan layanan dengan cepat. <br><br><img src="https://habrastorage.org/webt/ji/xj/_u/jixj_uxelvtokkt54xoul15fsnu.png"><br><br>  Yang pertama adalah penskalaan.  Anda dapat dengan cepat melakukan sesuatu pada layanan dan memulai produksi.  Anda telah tiba lalu lintas, Anda telah mengkloning layanan.  Anda masih mendapat lalu lintas, Anda masih dikloning dan hidup dengannya.  Ini adalah bonus yang baik, dan, pada prinsipnya, ketika kami mulai, itu dianggap yang paling penting di antara kami, mengapa kami melakukan semua ini. <br><br><img src="https://habrastorage.org/webt/lc/oq/d3/lcoqd397ppryaemtruvd7awdoxe.png"><br><br>  Kedua, pengembangan terisolasi, ketika Anda memiliki beberapa tim pengembangan, beberapa pengembang berbeda di setiap tim, dan setiap tim melihat beberapa jenis layanan. <br><br>  Ada nuansa dengan tim.  Pengembang berbeda.  Dan ada, misalnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">butiran salju</a> .  Saya pertama kali melihat ini dengan Maxim Dorofeev.  Kadang-kadang orang memiliki kepingan salju di beberapa tim, dan beberapa tidak.  Ini membuat berbagai layanan yang digunakan di perusahaan sedikit tidak merata. <br><br><img src="https://habrastorage.org/webt/_k/nk/ml/_knkmlyetdgucwl7bkuxuvtpahe.png"><br><br>  Lihat gambar: dia adalah pengembang yang baik, dia memiliki tangan yang besar, dia bisa melakukan banyak hal.  Masalah utama adalah dari mana tangan ini tumbuh. <br><br><img src="https://habrastorage.org/webt/-6/li/zn/-6liznhfxdjynboqueccoayiat8.png"><br><br>  Layanan memungkinkan untuk menggunakan bahasa pemrograman yang berbeda yang lebih cocok untuk tugas yang berbeda.  Beberapa layanan di Go, beberapa di Erlang, beberapa di Ruby, beberapa di PHP, beberapa di Python.  Secara umum, Anda dapat berbalik sangat luas.  Ada juga nuansa di sini. <br><br><img src="https://habrastorage.org/webt/7h/ob/ka/7hobkajsj1y7nsdqr1sfoqt7ljo.jpeg"><br><br>  Arsitektur berorientasi layanan terutama tentang devops.  Artinya, jika Anda tidak memiliki otomatisasi, tidak ada proses penyebaran, jika Anda mengonfigurasi dengan tangan Anda, konfigurasi Anda dapat berubah dari instance layanan ke instance, dan Anda harus pergi ke sana untuk melakukan sesuatu, maka Anda berada di neraka. <br><br>  Misalnya, Anda memiliki 20 layanan, dan Anda perlu menggunakan dengan tangan Anda, Anda memiliki 20 konsol, dan Anda secara bersamaan menekan "masuk", seperti seorang ninja.  Ini tidak terlalu bagus. <br><br>  Jika Anda memiliki layanan setelah pengujian (jika ada pengujian, tentu saja), dan Anda juga harus menyelesaikannya dengan file sehingga berfungsi dalam produksi, saya juga punya kabar buruk untuk Anda. <br><br>  Jika Anda mengandalkan layanan khusus Amazon dan bekerja di Rusia, maka dua bulan lalu Anda juga memiliki "Semuanya terbakar, saya baik-baik saja, semuanya keren." <br><br><img src="https://habrastorage.org/webt/vu/z0/u6/vuz0u6eenpfaob592_jtdrnpp8e.png"><br><br>  Kami menggunakan Ansible untuk penyebaran otomatisasi, Wayang untuk konvergensi, Bambu untuk otomatisasi penyebaran, Confluence untuk menggambarkan semuanya entah bagaimana. <br><br>  Saya tidak akan membahas hal ini secara rinci, karena laporannya lebih tentang praktik interaksi, dan bukan tentang implementasi teknis. <br><br><img src="https://habrastorage.org/webt/dg/c5/cz/dgc5cz_nevmer6hzgcxjj1tqe5g.png"><br><br>  Sebagai contoh, kami memiliki masalah bahwa Puppet di server bekerja dengan Ruby 2, dan beberapa aplikasi ditulis di bawah Ruby 1.8, dan bersama-sama keduanya tidak berfungsi.  Ada semacam kusen yang terjadi.  Dan ketika Anda perlu menyimpan beberapa versi Ruby di mesin yang sama, Anda biasanya memiliki masalah. <br><br>  Sebagai contoh, kami memberikan setiap pengembang platform di mana ada hampir semua yang kami miliki, semua layanan yang dapat dikembangkan sehingga ia memiliki lingkungan yang terisolasi, ia dapat memecahnya dan membangunnya sesuai keinginan. <br><br>  Itu terjadi bahwa Anda memerlukan beberapa jenis paket yang dikompilasi khusus dengan dukungan untuk sesuatu di sana.  Ini cukup sulit.  Saya telah mendengarkan laporan di mana gambar buruh pelabuhan berbobot 45 GB.  Di Linux, tentu saja, lebih sederhana, semuanya lebih kecil di sana, tetapi bagaimanapun, tidak akan ada cukup tempat. <br><br>  Nah, ada dependensi yang saling bertentangan ketika Anda memiliki satu bagian dari proyek tergantung pada pustaka dari satu versi, bagian lain dari proyek pada versi yang berbeda, dan pustaka tidak disatukan sama sekali. <br><br><img src="https://habrastorage.org/webt/9m/dr/vn/9mdrvnnkajxl_8cxfmj79ukk8dk.png"><br><br>  Kami memiliki situs dan layanan di PHP 5.6, kami malu akan hal itu, tetapi apa yang harus dilakukan.  Ini adalah satu situs kami.  Ada situs dan layanan di PHP 7, ada lebih banyak dari mereka, kami tidak malu pada mereka.  Dan setiap pengembang memiliki basis sendiri, di mana ia dengan senang hati melihatnya. <br><br>  Jika Anda menulis di perusahaan dalam satu bahasa, maka tiga mesin virtual per pengembang - kedengarannya normal.  Jika Anda memiliki bahasa pemrograman yang berbeda, maka situasinya menjadi lebih buruk. <br><br><img src="https://habrastorage.org/webt/mp/np/b0/mpnpb0q-gcmneomvazzs_1gd4-w.jpeg"><br><br>  Anda memiliki situs dan layanan tentang ini, ini, kemudian platform lain untuk Go, satu platform untuk Ruby, Redis lain di samping.  Akibatnya, semua ini berubah menjadi bidang besar untuk dukungan, dan sementara itu, beberapa di antaranya mungkin pecah. <br><br><img src="https://habrastorage.org/webt/cb/cq/u_/cbcqu_ynjcnffa0fepuvln_gib8.png"><br><br>  Oleh karena itu, kami mengganti roti bahasa pemrograman dengan menggunakan kerangka kerja yang berbeda, karena kerangka kerja dalam PHP sangat berbeda, mereka memiliki kemampuan yang berbeda, komunitas yang berbeda, dukungan yang berbeda.  Dan Anda dapat menulis layanan sehingga Anda sudah memiliki sesuatu yang siap untuk itu. <br><br><h3>  <b>Setiap layanan memiliki timnya sendiri.</b> </h3><br><img src="https://habrastorage.org/webt/zp/nc/6m/zpnc6mlp098fx0xriegr8mwn1jm.png"><br><br>  Nilai tambah utama kami, yang mengkristal selama beberapa tahun, adalah bahwa setiap layanan memiliki timnya sendiri.  Ini nyaman untuk proyek besar, Anda dapat menghemat waktu pada dokumentasi, manajer sangat menyadari proyek mereka. <br><br>  Tugas dari dukungan dapat dilempar dengan sempurna.  Misalnya, layanan asuransi mogok.  Dan segera tim asuransi pergi untuk memperbaiki. <br><br>  Fitur baru dibuat dengan cepat, karena ketika Anda memiliki satu layanan atom, Anda dapat dengan cepat memasukkan sesuatu ke dalamnya. <br><br>  Dan ketika Anda melanggar layanan Anda, dan ini pasti terjadi, Anda tidak melukai layanan orang lain, dan pengembang dengan bit dari tim lain tidak menggunakan Anda dan mereka tidak mengatakan: "Aduh, jangan lakukan itu." <br><br><img src="https://habrastorage.org/webt/34/hw/ro/34hwroxdvr056crrpgakpbk2f1g.png"><br><br>  Seperti biasa, ada nuansa.  Kami memiliki tim yang stabil, manajer dipaku ke tim.  Ada dokumen yang jelas, manajer memonitor ini semua.  Setiap tim dengan manajer memiliki beberapa layanan, dan ada titik kompetensi tertentu. <br><br>  Jika tim mengambang (ini kadang-kadang juga digunakan bersama kami), ada metode yang bagus yang disebut peta bintang. <br><br><img src="https://habrastorage.org/webt/lu/01/uq/lu01uqtz9m1qqsp-dndyetupouq.png"><br><br>  Anda memiliki daftar layanan dan orang.  Tanda bintang berarti bahwa seseorang adalah ahli dalam layanan ini, sebuah buku berarti bahwa seseorang sedang mempelajari layanan ini.  Tugas manusia adalah mengubah sebuah buku kecil untuk tanda bintang.  Dan jika tidak ada yang tertulis di seberang layanan, maka masalah mulai, tentang yang saya akan terus berbicara. <br><br><h3>  <b>Bagaimana layanan yatim muncul?</b> </h3><br><img src="https://habrastorage.org/webt/eh/rx/97/ehrx971egg-nuycxtteb8q824wo.jpeg"><br><br>  Masalah pertama, cara pertama, untuk mendapatkan layanan anak yatim di infrastruktur Anda adalah merumahkan orang.  Adakah yang pernah terjadi ketika tenggat waktu tiba dari bisnis sebelum mereka mengevaluasi tugas?  Terkadang tenggat waktu sangat ketat dan tidak cukup waktu untuk dokumentasi.  "Kita harus menyerahkan layanan ke produksi, maka kita akan menambahkannya." <br><br>  Jika tim kecil, kebetulan ada satu pengembang di dalamnya yang menulis semuanya, sisanya ada di sayap.  "Saya menulis arsitektur dasar, Anda memberi saya antarmuka."  Kemudian di beberapa titik manajer, misalnya, pergi.  Dan selama periode ini, ketika manajer telah pergi, dan yang baru belum ditunjuk, pengembang sendiri memutuskan ke mana layanan bergerak, apa yang terjadi di sana.  Dan seperti yang kita ketahui (mari kita kembali beberapa slide), di beberapa tim ada orang-kepingan salju, kadang-kadang kepingan salju timlid.  Lalu dia berhenti, dan kami mendapat layanan anak yatim. <br><br><img src="https://habrastorage.org/webt/rh/ro/qw/rhroqwez4ltwh8a5petmhcvszi4.png"><br><br>  Pada saat yang sama, tugas-tugas dari dukungan dan dari bisnis tidak hilang, mereka menetap di jaminan.  Jika ada kesalahan arsitektur selama pengembangan layanan, mereka juga mengendap dalam jaminan.  Layanan perlahan-lahan merendahkan. <br><br><h3>  <b>Bagaimana cara mengidentifikasi anak yatim?</b> </h3><br>  Daftar ini menggambarkan situasi dengan baik.  Siapa yang belajar sesuatu di infrastruktur? <br><br><img src="https://habrastorage.org/webt/4r/gy/nv/4rgynviquavl_b6pmfr85mhzybo.png"><br><br>  Tentang cara kerja yang terdokumentasi: ada layanan dan, secara umum, ini berfungsi, ia memiliki manual dua halaman, cara bekerja dengannya, tetapi tidak ada yang tahu cara kerjanya di dalam. <br><br>  Atau, misalnya, ada semacam pemendek tautan.  Misalnya, kami sekarang menggunakan tiga penyingkat tautan untuk tujuan berbeda di berbagai layanan.  Inilah konsekuensinya. <br><br><img src="https://habrastorage.org/webt/sm/ka/0f/smka0fa5trizu6rxhzit6e-6fj0.png"><br><br>  Sekarang saya akan menjadi kapten bukti.  Apa yang perlu dilakukan?  Pertama, Anda perlu mentransfer layanan ke manajer lain, tim lain.  Jika pemimpin tim Anda belum berhenti, maka di tim lain ini, ketika Anda memahami bahwa layanan ini seperti anak yatim, Anda harus menyertakan seseorang yang setidaknya memahami sesuatu tentang dia. <br><br>  Hal utama: Anda harus memiliki prosedur transmisi tertulis darah.  Dalam kasus kami, saya biasanya mengikuti ini, karena saya perlu ini berfungsi.  Manajer membutuhkan ini untuk disampaikan dengan cepat, dan apa yang akan terjadi padanya nanti tidak begitu penting bagi mereka. <br><br><img src="https://habrastorage.org/webt/6b/wy/5p/6bwy5pd9qqzaki4jfyo0qimq8tk.png"><br><br>  Cara berikutnya untuk membuat anak yatim adalah "Ayo kita lakukan outsourcing, itu akan lebih cepat, dan kemudian kita akan mentransfernya ke tim."  Jelas bahwa setiap orang memiliki beberapa rencana dalam tim, antrian.  Seringkali pelanggan bisnis berpikir bahwa agen outsourcing akan melakukan hal yang sama dengan departemen teknis yang ada di perusahaan.  Walaupun motivator mereka berbeda.  Outsourcing memiliki solusi teknologi yang aneh dan solusi algoritmik yang aneh. <br><br><img src="https://habrastorage.org/webt/3o/iv/zg/3oivzgpkzi_5akenrhhsfl9r8h8.png"><br><br>  Misalnya, kami memiliki layanan di mana Sphinx berada di berbagai tempat yang tidak terduga.  Saya akan memberi tahu Anda nanti apa yang harus saya lakukan. <br><br>  Agen outsourcing memiliki kerangka kerja yang ditulis sendiri.  Ini hanya PHP biasa dengan copy-paste dari proyek sebelumnya, di mana Anda dapat menemukan semuanya.  Kruk besar dalam skrip deploy, ketika Anda perlu mengubah beberapa baris dalam beberapa file dengan beberapa skrip Bash yang kompleks, sementara skrip deploy ini dipanggil oleh skrip ketiga.  Akibatnya, Anda mengubah sistem penempatan, memilih sesuatu yang lain, naik, dan layanan Anda tidak berfungsi.  Karena ada 8 lebih banyak tautan untuk diletakkan di antara folder yang berbeda.  Atau kebetulan bahwa seribu catatan berhasil, tetapi seratus ribu hilang. <br><br>  Saya akan terus menjadi kapten.  Menerima layanan dari outsourcing adalah prosedur yang diperlukan.  Siapa yang terjadi bahwa layanan dari agen outsourcing tiba, tetapi tidak diterima di mana pun?  Tentu saja, ini tidak sepopuler layanan anak yatim, tetapi tetap saja. <br><br><img src="https://habrastorage.org/webt/ak/8j/lh/ak8jlhfoevrsvkv4d-y1rfu8gri.png"><br><br>  Layanan harus diperiksa, layanan harus ditinjau, kata sandi harus diubah.  Kami memiliki kasus ketika layanan melemparkan kami, di sana panel admin “jika login == 'admin' &amp;&amp; password == 'admin' ...” ditulis langsung dalam kode.  Kami duduk dan berpikir, dan orang-orang menulis ini pada 2018? <br><br>  Menguji volume penyimpanan juga merupakan keharusan.  Anda perlu melihat apa yang akan terjadi pada seratus ribu catatan, bahkan sebelum Anda memulai layanan ini di suatu tempat dalam produksi. <br><br><img src="https://habrastorage.org/webt/mc/k2/qa/mck2qagxhsslsxcojjpekfludq4.png"><br><br>  Kirim layanan untuk revisi tidak boleh malu.  Ketika Anda mengatakan: "Kami tidak akan menerima layanan ini, kami memiliki 20 tugas, lakukan, maka kami akan menerima", ini normal.  Hati nurani tidak boleh sakit dari kenyataan bahwa Anda mengganti seorang manajer atau bahwa bisnis menghabiskan uang.  Bisnis kemudian akan menghabiskan lebih banyak. <br><br>  Kami memiliki kasus ketika kami memutuskan untuk membuat proyek percontohan pada outsourcing. <br><br><img src="https://habrastorage.org/webt/fo/cm/be/focmbesdalmj5fa1ia9_lkpxss4.png"><br><br>  Itu disampaikan tepat waktu, dan ini adalah satu-satunya kriteria kualitas.  Oleh karena itu, mereka membuat proyek percontohan lain, bahkan bukan proyek percontohan sama sekali.  Layanan ini diterima, kata mereka dengan cara administrasi, ini kode Anda, ini tim, ini manajer Anda.  Layanan benar-benar sudah mulai menghasilkan keuntungan.  Terlebih lagi, pada kenyataannya, mereka tetap yatim piatu, tidak ada yang mengerti bagaimana mereka bekerja, dan manajer dengan segala cara yang memungkinkan menolak tugas mereka. <br><br><img src="https://habrastorage.org/webt/z6/lo/mn/z6lomn7i2eknkjah0pquashtywu.png"><br><br>  Ada konsep bagus lainnya - pengembangan partisan.  Ketika suatu departemen, sebagai suatu peraturan, adalah departemen pemasaran, mereka ingin menguji suatu hipotesis, dan memesan seluruh layanan outsourcing.  Lalu lintas mulai mengalir padanya, mereka menutup dokumen, menandatangani tindakan dengan kontraktor, mulai beroperasi dan berkata: "Dudes, kami memiliki layanan di sini, sudah memiliki lalu lintas, itu membawa kita uang, mari kita ambil itu".  Kami adalah: "Oppa, bagaimana bisa begitu." <br><br><img src="https://habrastorage.org/webt/bw/g-/vj/bwg-vjk4-tvz3574ib3mbjw18ue.png"><br><br>  Dan satu cara lagi untuk mendapatkan layanan anak yatim: ketika beberapa tim tiba-tiba dimuat, manajemen mengatakan: "Mari kita transfer layanan dari tim ini ke tim lain, itu memiliki beban lebih sedikit."  Dan kemudian kami akan pindah ke tim ketiga, dan kami akan mengubah manajer.  Dan pada akhirnya, kami kembali memiliki anak yatim. <br><br><h3>  <b>Apa masalah dengan anak yatim?</b> </h3><br><img src="https://habrastorage.org/webt/_o/-3/ux/_o-3uxqtu_lh_cmgfg8mf6pousc.png"><br><br>  Siapa yang tidak tahu, ini adalah kapal dari garis Wasa dibesarkan di Swedia, terkenal karena tenggelam 5 menit setelah diluncurkan.  Dan raja Swedia, omong-omong, tidak mengeksekusi siapa pun untuk ini.  Itu dibangun oleh dua generasi insinyur yang tidak bisa membangun kapal seperti itu.  Efek alami. <br><br>  Omong-omong, kapal itu bisa tenggelam jauh lebih buruk, misalnya, ketika raja mengendarainya di suatu tempat dalam badai.  Jadi, dia langsung tenggelam, menurut ajail ada baiknya gagal lebih awal. <br><br>  Jika kita gagal lebih awal, biasanya tidak ada masalah.  Misalnya, selama penerimaan mereka mengirim revisi.  Dan jika kita telah gagal dalam produksi, ketika uang diinvestasikan, maka mungkin ada masalah.  Konsekuensinya, sebagaimana mereka disebut dalam bisnis. <br><br>  Mengapa layanan yatim berbahaya: <br><br><ul><li>  Layanan mungkin putus tiba-tiba. </li><li>  Layanan diperbaiki untuk waktu yang lama atau tidak diperbaiki sama sekali. </li><li>  Masalah keamanan. </li><li>  Masalah dengan peningkatan dan pembaruan. </li><li>  Jika layanan penting rusak, reputasi perusahaan akan terganggu. </li></ul><br><h3>  <b>Apa yang harus dilakukan dengan layanan anak yatim?</b> </h3><br><img src="https://habrastorage.org/webt/3k/ex/8v/3kex8vjbf7clzd9jbktsfzjclby.png"><br><br>  Sekali lagi, apa yang harus dilakukan.  Pertama, harus ada dokumentasi.  Selama 7 tahun di Banki.ru saya diajari bahwa penguji tidak boleh mengambil kata untuk pengembang, dan operasi tidak boleh mengambil kata untuk semua orang.  Perlu untuk memeriksa. <br><br><img src="https://habrastorage.org/webt/dx/rc/ub/dxrcubcmw-ybkov8kdag3cz2rzs.png"><br><br>  Kedua, perlu untuk menulis skema interaksi, karena kebetulan layanan yang tidak diterima mengandung dependensi yang tidak dibicarakan orang.  Misalnya, pengembang meletakkan layanan pada kunci mereka ke Yandex.Maps atau Dadata.  Anda telah kehabisan batas bebas, semuanya telah rusak, dan Anda tidak tahu apa yang terjadi sama sekali.  Semua garu seperti itu harus dijelaskan: layanan menggunakan Dadata, Sms, sesuatu yang lain. <br><br><img src="https://habrastorage.org/webt/hy/6o/ki/hy6okizhuhhwibejacdgchvoo68.png"><br><br>  Ketiga, bekerja dengan utang teknis.  Ketika Anda membuat beberapa tongkat atau menerima layanan dan mengatakan bahwa sesuatu harus dilakukan, Anda perlu memastikan bahwa mereka melakukannya.  Karena dengan begitu mungkin ternyata lubang kecil itu tidak begitu kecil, dan Anda jatuh di sana. <br><br>  Dengan tugas-tugas arsitektur, kami punya cerita tentang Sphinx.  Di salah satu layanan, Sphinx digunakan untuk memasukkan daftar.  Hanya daftar pagination, tapi itu diindeks ulang setiap malam.  Itu disusun dari dua indeks: satu diindeks setiap malam besar, dan masih ada indeks kecil yang mengacaukannya.  Setiap hari, dengan probabilitas 50%, itu akan meledak atau tidak, selama perhitungan, indeks berdenyut, dan berita berhenti diperbarui di halaman utama.  Awalnya 5 menit, sementara indeks diindeks ulang, kemudian indeks tumbuh, dan pada beberapa titik indeks mulai kembali 40 menit.  Ketika kami hentikan itu, kami menghela napas lega, karena jelas bahwa sedikit waktu lagi akan berlalu, dan indeks kami akan diindeks ulang penuh waktu.  Ini akan menjadi file untuk portal kami, delapan jam tidak ada berita - itu saja, bisnis telah berdiri. <br><br><h3>  <b>Rencana kerja dengan layanan anak yatim</b> </h3><br><img src="https://habrastorage.org/webt/ox/ny/wq/oxnywqk2gpyoczjewhrt_ngsiz0.png"><br><br>  Sebenarnya, ini sangat sulit dilakukan, karena devops adalah tentang komunikasi.  Saya ingin berada dalam hubungan yang baik dengan kolega saya, dan ketika Anda mengalahkan kolega dan manajer dengan peraturan di kepala, mereka mungkin memiliki perasaan yang bertentangan dengan orang-orang yang melakukan ini. <br><br>  Selain semua poin ini, ada hal penting lainnya: untuk setiap layanan spesifik, untuk setiap bagian spesifik dari prosedur penyebaran, orang-orang tertentu harus bertanggung jawab.  Ketika tidak ada orang dan Anda harus menarik beberapa orang lain, untuk mempelajari semuanya, itu menjadi sulit. <br><br><img src="https://habrastorage.org/webt/6o/-d/co/6o-dcolwznowrvatclrcvbvau0a.png"><br><br>  Jika semua ini tidak membantu, dan layanan anak yatim masih yatim piatu, tidak ada yang mau membawanya sendiri, dokumentasi tidak ditulis, tim yang dipanggil ke layanan ini menolak untuk melakukan sesuatu, ada cara mudah untuk mengulang semuanya . <br><br>  Artinya, Anda mengambil persyaratan layanan lagi dan menulis layanan baru, lebih baik, pada platform yang lebih baik, tanpa solusi teknologi yang aneh.  Dan bermigrasi ke sana dalam pertempuran. <br><br><img src="https://habrastorage.org/webt/_j/f2/wk/_jf2wkfeybtdq4xty4syofgx1ei.png"><br><br>  Kami memiliki situasi ketika kami menggunakan layanan pada Yii 1 dan menyadari bahwa kami tidak dapat mengembangkannya lebih lanjut, karena kami telah kehabisan pengembang yang dapat menulis dengan baik dalam Yii 1. Semua pengembang menulis dengan baik di Symfony ketiga.  Apa yang harus dilakukan  Kami mengambil waktu, mengalokasikan tim, mengalokasikan manajer, menulis ulang proyek dan dengan lancar mengalihkan lalu lintas ke sana. <br><br>  Setelah itu, layanan lama dapat dihapus.  Ini adalah prosedur favorit saya, ketika Anda perlu mengambil dan membersihkan beberapa layanan dari sistem manajemen konfigurasi dan kemudian pergi untuk melihat bahwa semua mobil pada produksi telah dilunasi sehingga pengembang tidak memiliki jejak yang tersisa.  Repositori di git tetap ada. <br><br>  Ini semua yang ingin saya bicarakan, saya siap membahas, topiknya holistik, banyak yang melayang di dalamnya. <br><br>  <b>Pada slide itu tentang fakta bahwa Anda menyatukan bahasa.</b>  <b>Contohnya adalah ukuran gambar.</b>  <b>Tetapi apakah benar-benar perlu untuk dengan kuat ke satu bahasa?</b>  <b>Karena mengubah ukuran gambar dalam PHP, Anda bisa melakukannya di Golang.</b> <br><br>  Sebenarnya, ini tidak perlu, seperti semua praktik lainnya.  Mungkin, dalam beberapa kasus, bahkan tidak diinginkan.  Tetapi Anda perlu memahami bahwa jika Anda memiliki 50 orang di departemen teknis, 45 di antaranya adalah pengembang PHP, 3 lainnya adalah devops yang dapat melakukan Python, Ansible, Puppet dan semacamnya, dan hanya satu dari mereka yang menulis tentang beberapa Pergi layanan untuk mengubah ukuran gambar, maka ketika dia pergi, pemeriksaan pergi bersamanya.  Dan pada saat yang sama, Anda perlu mencari pengembang khusus pasar yang mengetahui bahasa ini, terutama jika itu jarang.  Artinya, dari sudut pandang organisasi, ini bermasalah.  Dari sudut pandang para devops, Anda tidak hanya perlu mengkloning beberapa buku pedoman yang sudah jadi yang Anda gunakan untuk menggunakan layanan, tetapi Anda harus menulisnya lagi. <br><br>  Kami sekarang melihat layanan di Node.js, dan itu hanya akan menjadi platform terdekat untuk setiap pengembang dengan bahasa yang terpisah.  Tapi kami duduk berpikir bahwa permainan itu sepadan dengan lilin.  Maksudnya, pertanyaan di sini adalah duduk dan berpikir. <br><br>  <b>Bagaimana Anda memonitor layanan Anda?</b>  <b>Bagaimana Anda mengumpulkan dan melacak log?</b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengumpulkan log di Elasticsearch dan dimasukkan ke Kibana, dan tergantung pada lingkungan produksi atau pengujian, kolektor yang berbeda digunakan di sana. </font><font style="vertical-align: inherit;">Di suatu tempat Lumberjack, di tempat lain sesuatu, saya tidak ingat lagi. </font><font style="vertical-align: inherit;">Dan masih ada beberapa tempat di layanan tertentu di mana kami menempatkan Telegraf dan peluru di tempat lain secara terpisah. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara hidup dengan Wayang dan Mungkin dalam satu lingkungan?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faktanya, kita sekarang memiliki dua lingkungan, satu adalah Wayang, yang lain Ansible. Kami sedang berupaya untuk membuat hibridisasi mereka. Kemungkinan adalah lingkungan yang baik untuk pengaturan awal, Wayang adalah hal yang buruk untuk pengaturan awal karena memerlukan tangan untuk bekerja secara langsung dengan pad, dan Wayang memberikan konvergensi konfigurasi. Ini berarti bahwa situs itu sendiri tetap up-to-date, dan agar mesin ansiblized tetap up-to-date, Anda perlu mengejar buku pedoman dengan frekuensi berapa pun. Inilah perbedaannya. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana Anda menjaga kompatibilitas? Apakah Anda memiliki konfigurasi dalam Ansible dan Wayang?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah rasa sakit besar kami, kami menjaga kompatibilitas dengan tangan kami dan berpikir, seolah-olah sekarang, untuk pindah dari semua tempat ini. Ternyata Puppet menggulung paket dan mendukung beberapa tautan di sana, sementara Ansible, misalnya, menggulung kode dan mendorong konfigurasi aplikasi baru di sana. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Presentasi itu tentang berbagai versi Ruby. Apa solusinya?</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kita dihadapkan dengan ini di satu tempat, dan kita harus selalu mengingat hal ini. Kami hanya mematikan bagian yang berfungsi pada Ruby, yang tidak kompatibel dengan aplikasi, dan memisahkannya.</font></font><br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tahun ini, konferensi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevOpsDays Moscow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan diadakan pada 7 Desember di Technopolis. </font><font style="vertical-align: inherit;">Hingga 11 November, kami menerima aplikasi untuk laporan. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Email</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami jika Anda ingin berbicara. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pendaftaran untuk peserta terbuka, bergabunglah!</font></font><br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471146/">https://habr.com/ru/post/id471146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471134/index.html">Python vs JavaScript: Yang Mana Yang Paling Bermanfaat Bagi Anda?</a></li>
<li><a href="../id471136/index.html">Pertemuan tabung besar pertama komunitas Scala di Rusia - seperti sebelumnya</a></li>
<li><a href="../id471138/index.html">Pairing programming dalam Vineti</a></li>
<li><a href="../id471140/index.html">Mempersiapkan Sertifikasi Spring Profesional. Istirahat musim semi</a></li>
<li><a href="../id471142/index.html">12 fitur ES10 dalam 12 contoh sederhana</a></li>
<li><a href="../id471150/index.html">“Cara mengelola intelektual. Saya, kutu buku dan Geeks "(versi elektronik buku gratis)</a></li>
<li><a href="../id471154/index.html">Kembali ke sekolah: cara melatih penguji genggam untuk menghadapi tes otomatis</a></li>
<li><a href="../id471158/index.html">ID @ Xbox di Rusia: memperluas cakrawala permainan</a></li>
<li><a href="../id471160/index.html">Masalah menginstal Ruby on Rails pada akhir 2019</a></li>
<li><a href="../id471162/index.html">Mengumumkan Dukungan untuk Pengeditan Asli Notebook Jupyter dalam Kode VS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>