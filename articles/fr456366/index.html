<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëêüèª üßìüèæ üõÄüèº Comment j'ai con√ßu la LED HEART Box üë©üèæ‚Äç‚úàÔ∏è üñãÔ∏è üñêüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations, Habr! 

 Je veux raconter une histoire sur la cr√©ation d'une bo√Æte √† musique avec des √©l√©ments d'√©clairage lumineux - un beau cadeau avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment j'ai con√ßu la LED HEART Box</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456366/">  Salutations, Habr! <br><br>  Je veux raconter une histoire sur la cr√©ation d'une bo√Æte √† musique avec des √©l√©ments d'√©clairage lumineux - un beau cadeau avec la possibilit√© de s√©lection individuelle d'effets d'√©clairage et d'accompagnement musical.  La bo√Æte √©tait appel√©e plain - LED HEART.  Tout le travail a √©t√© fait, je veux partager une courte histoire sur le travail sur ce projet "hobby". <br><br>  Ce n'est un secret pour personne que sur le r√©seau (y compris sur Habr√©) vous pouvez rencontrer de nombreux projets pour cr√©er des valentines LED, des coeurs, etc.  Les vid√©os de d√©monstration avec eux recueillent souvent des critiques flatteuses et enthousiastes dans les commentaires.  Dans le m√™me temps, l'opportunit√© de faire un cadeau aussi int√©ressant est rest√©e jusqu'√† pr√©sent le lot d'ing√©nieurs, de jambons, etc., c'est-√†-dire  des personnes suffisamment qualifi√©es pour r√©p√©ter le projet de quelqu'un / cr√©er le leur.  De plus, vous avez besoin de beaucoup de temps libre pour cela.  Je n'ai pas vu de production par lots d'un tel cadeau.  Le plus proche est le kit de soudure amateur le plus simple d'une paire de soci√©t√©s nationales, et des options similaires pr√©sent√©es sur des sites chinois. <br>  Cette id√©e a initialement conduit √† lancer un projet de cr√©ation d'un coeur LED, qui sera disponible non seulement pour ceux qui sont ¬´avec vous¬ª avec l'√©lectronique. <br><br>  Je vais commencer un peu de loin, avec un fond.  Cela a dur√© plusieurs ann√©es ... <a name="habracut"></a><br><br><h3>  Contexte </h3><br>  La premi√®re vid√©o avec un coeur de LED que j'ai vu en 2010 sur l'une des cha√Ænes youtube.  Le projet √©tait impressionnant.  Et en 2011, en tant qu'√©tudiant, pour quelques semaines de travail le soir, en secret de sa petite amie, il a mont√© une version simple du coeur LED et l'a pr√©sent√©e le 8 mars.  Le projet a √©t√© d√©velopp√© par moi-m√™me - mat√©riel et firmware - √©tudi√©, invent√© des v√©los. <br><br>  Cela ressemblait ... en g√©n√©ral, quelque chose comme ceci: <br><br><img src="https://habrastorage.org/webt/aa/ii/gz/aaiigzidhcvjjne9-iys01aj3_g.png" alt="image"><br><br><img src="https://habrastorage.org/webt/3g/w7/wk/3gw7wk6ohmy_mfadpdkomtq2aqw.jpeg" alt="image"><br><br>  Malheureusement, aucune photo ne transmettra pleinement le degr√© d'exclusivit√© des cadeaux qui me semblait in√©gal√© √† certains endroits il y a 9 ans.  Il y avait une carte de circuit imprim√© avec Attiny13A dans la bo√Æte du poisson en conserve (MK n'est pas visible sur la photo, il a √©t√© soud√© par des fils de l'ext√©rieur - un tas de fils s'√©tendant au-del√† du bord sup√©rieur de la photo), avec des registres √† d√©calage et des LED lumineuses soud√©es le long du contour du symbole du c≈ìur.  √Ä l'ext√©rieur du couvercle de la bo√Æte de conserve, il y a une inscription: ¬´Dans vos mains, tout est rempli d'amour ... et m√™me ...¬ª et √† l'int√©rieur ¬´... maquereau.  Depuis le 8 mars! ‚Äù  √Ä la pression d'un gros bouton rouge, les lumi√®res ont commenc√© √† fonctionner, les LED ont clignot√© et miroit√© conform√©ment √† ce qui est entr√© dans 1 kilo-octet de m√©moire du microcontr√¥leur.  La cr√©ativit√© et la romance ont √©clabouss√© le bord, comme vous pouvez le voir.  Si je me souviens bien maintenant, je me prom√®ne entre les rang√©es du supermarch√© et je r√©fl√©chis au type d'√©tui √† choisir pour un "cadeau chaleureux" ... soudain, mes yeux se posent sur une √©tag√®re avec des conserves ... et la voici ... un aper√ßu ... <br><br>  Eh bien, un peu distrait, je vais continuer. <br><br><h3>  L'histoire elle-m√™me </h3><br>  Ayant re√ßu la r√©ponse souhait√©e de sa future √©pouse, l'id√©e lui vint √† l'esprit que la production et la vente de cadeaux aussi int√©ressants pouvaient avoir un sens en principe.  Un tel souvenir √©voque des √©motions positives et symbolise les sentiments chaleureux de la personne qui le donne.  Mais l'√©tude, le dipl√¥me, le travail, la routine, la vie personnelle ne permettaient pas d'allouer suffisamment de temps pour se lancer dans de telles aventures - tout s'est termin√© avant de commencer. <br><br>  3 ans se sont √©coul√©s ... 2014 est arriv√©e ... √Ä un moment donn√©, j'ai recommenc√© √† tomber sur des projets similaires sur Internet - certains d'entre eux √©taient d√©j√† plus avanc√©s et int√©ressants - l'id√©e de d√©velopper ma propre version unique du c≈ìur et de s'engager dans sa production s'est allum√©e avec une vigueur renouvel√©e, il n'y avait rien de tel avant.  En m√™me temps, √©videmment, les gens ont montr√© de l'int√©r√™t.  Ayant d√©j√† une exp√©rience en ing√©nierie, il a commenc√© √† aborder cette question plus syst√©matiquement.  Mais tout de m√™me, le travail sur ce c≈ìur s'est d√©roul√© en mode hobby - certains soirs et le week-end, si possible, en parall√®le avec d'autres projets "hobby" et le travail principal, qui √©tait en premier lieu la priorit√© de tous les travaux.  Par cons√©quent, √† la fin, le d√©lai s'est av√©r√© incroyablement gonfl√© pour un tel projet. <br><br>  Comment l'√©tude a-t-elle commenc√©? <br><br>  Tout d'abord, les lacunes des constructions amateurs vues ont √©t√© identifi√©es et √©valu√©es.  La chose la plus importante qui a √©t√© not√©e alors: <br><br><ul><li>  Manque de vari√©t√© d'√©l√©ments d'√©clairage lumineux. </li><li>  La simplicit√© et la maladresse des conceptions, qui lubrifient toujours la premi√®re impression et peuvent ne pas conduire √† l'effet appropri√© lors du don.  L'√©crasante majorit√© des appareils examin√©s ressemblait √† de l'artisanat amateur, rien de plus (comme celui que j'ai fait en 2010) - solide, pas s√©rieux, ennuyeux ... La plupart des conceptions de c≈ìurs consid√©r√©es n'ont pas de corps du tout, ou ce corps est terrible - Ala une scie √† chantourner de contreplaqu√© pourri, une vis autotaraudeuse dans une planche, les fen√™tres de l'org.  verre, etc.  Un certain optimum est n√©cessaire - le type d'appareil ne doit pas au moins effrayer les gens, au contraire - il doit transmettre au maximum toute la gamme des sentiments de celui qui le donne, et en m√™me temps - l'appareil ne doit pas √™tre trop dimensionnel, super complexe, etc. . </li><li>  L'absence d'effets sonores des effets de lumi√®re dans les projets de coeurs (√† de tr√®s rares exceptions pr√®s), m√™me si, √† mon avis, il supplie de lui-m√™me.  Il ne suffit pas de clignoter la matrice LED.  La musique devrait am√©liorer l'effet, ajouter du romantisme au moment du don.  La musique peut m√™me √™tre une caract√©ristique individuelle d'un tel cadeau, elle ¬´r√©chauffe¬ª l'atmosph√®re appropri√©e √† la situation correspondante - romantique / solennelle / dr√¥le et toute autre.  On supposait que si les effets de l'√©clairage, pour tout le reste, sont √©galement synchrones avec la m√©lodie de fond - ce sera tr√®s cool, convaincant et cool. </li><li>  Puisque, selon le paragraphe pr√©c√©dent, il devrait y avoir de la musique - l'id√©e de faire une bo√Æte √† musique est venue d'elle-m√™me - vous l'ouvrez - elle joue et scintille - vous la fermez - elle s'arr√™te et s'estompe. </li></ul><br>  Toutes ces pens√©es, le cerveau a pris d'assaut pendant un moment.  J'ai d'abord d√ª d√©cider de la fonctionnalit√© sp√©cifique de la box.  D'une mani√®re g√©n√©rale, il √©tait per√ßu comme suit: <br><br><ul><li>  Le c≈ìur doit avoir une matrice LED, d'une r√©solution suffisante pour que vous puissiez ex√©cuter une ligne en cours, faire l'animation la plus simple.  Il devrait √™tre possible de s'√©teindre et d'allumer les LED en douceur. </li><li>  Il devrait √™tre possible de cr√©er et de corriger rapidement des effets d'√©clairage pour une restructuration rapide du programme d'√©clairage pour un client sp√©cifique.  Il convient de pr√©ciser que le mod√®le d'interaction avec les clients impliquait ce qui suit.  Le client est initialement dot√© d'un ensemble de programmes d'√©clairage de base avec des m√©lodies pr√©d√©finies, √† partir duquel il s√©lectionne celui qui convient le mieux √† ses souhaits - de plus, pour sa part, nous ajusterons le programme d'√©clairage, en l'adaptant √† cette personne en particulier, √† son occasion / vacances (texte de la ligne de course, qui autres cadres).  √Ä l'avenir, il √©tait pr√©vu d'√©largir progressivement la base des m√©lodies et des effets d'√©clairage disponibles.  De plus, pour ma part, je peux toujours conseiller la meilleure option apr√®s avoir communiqu√© avec le client, en fonction des donn√©es d'entr√©e.  La possibilit√© d'une √©tude compl√®tement individuelle de la m√©lodie et de l'illumination, mais √† un co√ªt accru, n'est pas compl√®tement exclue.  le processus de compilation d'un programme d'effets d'√©clairage pour une nouvelle m√©lodie se r√©v√®le en tout cas beaucoup plus long que les autres processus de pr√©paration de l'appareil √† la vente. </li><li>  Un cas sp√©cieux (en ne comptant que sur vos go√ªts au stade du prototype). </li><li>  Autonomie de pouvoir, comme  l'appareil est essentiellement un souvenir, cela n'a aucun sens de le rendre fixe, attach√© √† une source externe. </li></ul><br>  De plus, ces exigences ont √©t√© formalis√©es en t√¢ches techniques sp√©cifiques et, une √† une, ces t√¢ches ont √©t√© progressivement r√©solues.  Au cours du processus, diff√©rents mat√©riaux ont √©t√© examin√©s, les types de conceptions, les circuits ont √©t√© r√©fl√©chis, ainsi, l'√©criture du logiciel, la r√©alisation de la possibilit√© d'ajouter / supprimer / modifier rapidement des effets d'√©clairage, etc. ont pris la part du lion. <br>  √Ä titre d'exemple de telles transformations, je peux offrir une d√©monstration de la version interm√©diaire de la bo√Æte prototype fabriqu√©e en 2015 - elle peut √™tre conditionnellement consid√©r√©e comme le r√©sultat de l'it√©ration 1 (la qualit√© vid√©o est terrible, le son a √©t√© superpos√© s√©par√©ment du fichier mp3, il n'a donc pas pu √™tre enregistr√© correctement): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/F8leTFH6pFw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Et d√©j√† la version finale, assembl√©e en 2017: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0MPJeOb9aJI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Il peut sembler qu'ici les LED brillent plus faiblement que dans la version 2015, mais ce n'est pas le cas - c'√©tait juste que lors de la prise de vue, la source externe √©tait trop forte.  Le son ici est d√©j√† r√©el. <br><br>  Au moment o√π cet √©chantillon est apparu, beaucoup de choses avaient chang√© √† l'ext√©rieur et √† l'int√©rieur de l'appareil, et dans sa partie logicielle. <br><br><h3>  En bref sur HW </h3><br>  Le bo√Ætier √©lectronique est situ√© sur trois cartes de circuits imprim√©s.  Sur un - LED, transistors et r√©sistances, n√©cessaires pour l'inclusion matricielle des LED, le microcontr√¥leur de contr√¥le Atmega32A et son c√¢blage.  Sur la deuxi√®me carte, un contr√¥le de mise sous tension est mis en ≈ìuvre √† l'ouverture du coffret, un circuit de mise hors tension avec une baisse inacceptable de la tension d'alimentation.  La troisi√®me carte a un lecteur mp3 (module achet√©). <br><br>  Le bo√Ætier est une bo√Æte m√©tallique achet√©e.  √Ä l'int√©rieur, toute la structure est bas√©e sur un cadre en plastique imprim√© sur une imprimante 3D.  Certains √©l√©ments sont maintenus par des joints adh√©sifs, la carte principale est maintenue sur des aimants mont√©s dans une base en plastique. <br>  Le bo√Ætier est aliment√© par trois piles AAA. <br><br><h3>  En bref sur SW </h3><br>  Pour le PC, un programme a √©t√© d√©velopp√© - un g√©n√©rateur de code avec une interface graphique, qui vous permet de cr√©er et d'√©diter rapidement des effets d'√©clairage, de contr√¥ler tous les intervalles de temps n√©cessaires (pour la synchronisation avec la m√©lodie de fond) et de g√©n√©rer imm√©diatement un code pour flasher le microcontr√¥leur situ√© sur la carte cardiaque.  Un certain format a √©t√© d√©velopp√© pour l'enregistrement des param√®tres d'effet dans des tableaux de donn√©es.  C√¥t√© MK, le firmware analyse ces matrices et les convertit en la lueur des bonnes LED au bon moment.  Le format d'enregistrement des effets dans les tables de codes est assez √©conomique - la m√©moire interne des programmes du microcontr√¥leur est assez suffisante pour le code du firmware et pour les tables avec des param√®tres d'effets d'√©clairage. <br><br>  Un article s√©par√© peut √™tre √©crit sur la r√©solution des probl√®mes techniques et des probl√®mes rencontr√©s au cours du d√©veloppement.  Bien s√ªr, ce n'est pas une ¬´science sorci√®re¬ª et m√¢cher de telles questions peut √™tre ennuyeux pour le public, mais si quelqu'un est int√©ress√©, vous pouvez certainement vous embrouiller. <br><br><h3>  R√©sum√© </h3><br>  Quel est le r√©sultat?  Le projet de cercueil peut toujours √™tre l√©ch√© et mis √† niveau √† l'infini, am√©lior√© dans des directions compl√®tement diff√©rentes, ajout√© des fonctionnalit√©s, etc.  Mais sous la forme dans laquelle la bo√Æte a √©t√© con√ßue - cela a √©t√© fait, le projet de d√©veloppement a √©t√© achev√©.  Pour la (petite) production en s√©rie, il reste encore du travail √† faire, mais c'est une question de technologie, comme on dit. <br><br>  Quelque part au milieu du voyage, je me suis rendu compte qu'essayer de d√©velopper ind√©pendamment la composante commerciale du projet n'√©tait pas tr√®s int√©ressant pour moi, il n'y avait ni temps, ni beaucoup de d√©sir.  Il n'y avait personne pour assumer la majeure partie du travail d'organisation des ventes, de travail avec les m√©lodies et les effets d'√©clairage dans mon environnement.  Avec un tel partenariat potentiel, j'ai accept√© de fermer tous les probl√®mes techniques, la production, l'approvisionnement et la logistique.  Mais cela n'a pas fonctionn√©.  Et le temps est constamment occup√© par d'autres t√¢ches - soit plus int√©ressantes, soit simplement n√©cessaires / domestiques. <br><br>  Par cons√©quent, pour le moment, je consid√®re que le projet est achev√© √† ce stade.  Au total, 3 exemplaires de la derni√®re version ont √©t√© r√©alis√©s - deux pour les cadeaux aux proches et un exemplaire sur commande.  Il peut arriver qu'une sorte d'histoire se poursuive un jour, je ne le promets pas, mais pour le moment le statut est comme √ßa.  En g√©n√©ral, le r√©sultat du travail m'a satisfait.  Mais le plus pr√©cieux est la r√©action des proches √† qui √©taient destin√©s les premiers pr√©l√®vements cardiaques, pour cela il ne serait pas dommage de passer autant de temps que vous le souhaitez! <br><br>  Eh bien, en termes de rationalit√© de la conduite d'un tel projet, des conclusions objectives ont √©t√© tir√©es, des le√ßons ont √©t√© apprises qui me serviront s√ªrement dans les actions et les r√©alisations futures! <br><br>  Merci d'avoir lu, je suis toujours heureux de parler dans les commentaires, si vous avez des questions, commentaires, suggestions. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456366/">https://habr.com/ru/post/fr456366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456350/index.html">√âv√©nements num√©riques √† Moscou du 17 au 23 juin</a></li>
<li><a href="../fr456352/index.html">Module de communication d'objets sans fil WISE-4000</a></li>
<li><a href="../fr456354/index.html">Comment collectons-nous les t√©l√©viseurs</a></li>
<li><a href="../fr456358/index.html">Les 13 articles les plus tristement c√©l√®bres de l'ann√©e √©coul√©e</a></li>
<li><a href="../fr456362/index.html">Designer de niveau 6: comment nous motivons et d√©veloppons les designers</a></li>
<li><a href="../fr456368/index.html">Effectuer des transactions publiques et priv√©es sur la blockchain JPMorgan Quorum √† l'aide de Web3</a></li>
<li><a href="../fr456370/index.html">Impl√©menter la QoS dans le stockage Qsan</a></li>
<li><a href="../fr456372/index.html">SimbirSoft invite les professionnels de l'informatique √† un √©t√© intensif 2019</a></li>
<li><a href="../fr456374/index.html">Structures de donn√©es d'√©tat de la cha√Æne de blocs Plasma Cash</a></li>
<li><a href="../fr456376/index.html">Not One Spring Boot: un aper√ßu des alternatives</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>