<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👐🏻 🧓🏾 🛀🏼 Comment j'ai conçu la LED HEART Box 👩🏾‍✈️ 🖋️ 🖐🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations, Habr! 

 Je veux raconter une histoire sur la création d'une boîte à musique avec des éléments d'éclairage lumineux - un beau cadeau avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment j'ai conçu la LED HEART Box</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456366/">  Salutations, Habr! <br><br>  Je veux raconter une histoire sur la création d'une boîte à musique avec des éléments d'éclairage lumineux - un beau cadeau avec la possibilité de sélection individuelle d'effets d'éclairage et d'accompagnement musical.  La boîte était appelée plain - LED HEART.  Tout le travail a été fait, je veux partager une courte histoire sur le travail sur ce projet "hobby". <br><br>  Ce n'est un secret pour personne que sur le réseau (y compris sur Habré) vous pouvez rencontrer de nombreux projets pour créer des valentines LED, des coeurs, etc.  Les vidéos de démonstration avec eux recueillent souvent des critiques flatteuses et enthousiastes dans les commentaires.  Dans le même temps, l'opportunité de faire un cadeau aussi intéressant est restée jusqu'à présent le lot d'ingénieurs, de jambons, etc., c'est-à-dire  des personnes suffisamment qualifiées pour répéter le projet de quelqu'un / créer le leur.  De plus, vous avez besoin de beaucoup de temps libre pour cela.  Je n'ai pas vu de production par lots d'un tel cadeau.  Le plus proche est le kit de soudure amateur le plus simple d'une paire de sociétés nationales, et des options similaires présentées sur des sites chinois. <br>  Cette idée a initialement conduit à lancer un projet de création d'un coeur LED, qui sera disponible non seulement pour ceux qui sont «avec vous» avec l'électronique. <br><br>  Je vais commencer un peu de loin, avec un fond.  Cela a duré plusieurs années ... <a name="habracut"></a><br><br><h3>  Contexte </h3><br>  La première vidéo avec un coeur de LED que j'ai vu en 2010 sur l'une des chaînes youtube.  Le projet était impressionnant.  Et en 2011, en tant qu'étudiant, pour quelques semaines de travail le soir, en secret de sa petite amie, il a monté une version simple du coeur LED et l'a présentée le 8 mars.  Le projet a été développé par moi-même - matériel et firmware - étudié, inventé des vélos. <br><br>  Cela ressemblait ... en général, quelque chose comme ceci: <br><br><img src="https://habrastorage.org/webt/aa/ii/gz/aaiigzidhcvjjne9-iys01aj3_g.png" alt="image"><br><br><img src="https://habrastorage.org/webt/3g/w7/wk/3gw7wk6ohmy_mfadpdkomtq2aqw.jpeg" alt="image"><br><br>  Malheureusement, aucune photo ne transmettra pleinement le degré d'exclusivité des cadeaux qui me semblait inégalé à certains endroits il y a 9 ans.  Il y avait une carte de circuit imprimé avec Attiny13A dans la boîte du poisson en conserve (MK n'est pas visible sur la photo, il a été soudé par des fils de l'extérieur - un tas de fils s'étendant au-delà du bord supérieur de la photo), avec des registres à décalage et des LED lumineuses soudées le long du contour du symbole du cœur.  À l'extérieur du couvercle de la boîte de conserve, il y a une inscription: «Dans vos mains, tout est rempli d'amour ... et même ...» et à l'intérieur «... maquereau.  Depuis le 8 mars! ”  À la pression d'un gros bouton rouge, les lumières ont commencé à fonctionner, les LED ont clignoté et miroité conformément à ce qui est entré dans 1 kilo-octet de mémoire du microcontrôleur.  La créativité et la romance ont éclaboussé le bord, comme vous pouvez le voir.  Si je me souviens bien maintenant, je me promène entre les rangées du supermarché et je réfléchis au type d'étui à choisir pour un "cadeau chaleureux" ... soudain, mes yeux se posent sur une étagère avec des conserves ... et la voici ... un aperçu ... <br><br>  Eh bien, un peu distrait, je vais continuer. <br><br><h3>  L'histoire elle-même </h3><br>  Ayant reçu la réponse souhaitée de sa future épouse, l'idée lui vint à l'esprit que la production et la vente de cadeaux aussi intéressants pouvaient avoir un sens en principe.  Un tel souvenir évoque des émotions positives et symbolise les sentiments chaleureux de la personne qui le donne.  Mais l'étude, le diplôme, le travail, la routine, la vie personnelle ne permettaient pas d'allouer suffisamment de temps pour se lancer dans de telles aventures - tout s'est terminé avant de commencer. <br><br>  3 ans se sont écoulés ... 2014 est arrivée ... À un moment donné, j'ai recommencé à tomber sur des projets similaires sur Internet - certains d'entre eux étaient déjà plus avancés et intéressants - l'idée de développer ma propre version unique du cœur et de s'engager dans sa production s'est allumée avec une vigueur renouvelée, il n'y avait rien de tel avant.  En même temps, évidemment, les gens ont montré de l'intérêt.  Ayant déjà une expérience en ingénierie, il a commencé à aborder cette question plus systématiquement.  Mais tout de même, le travail sur ce cœur s'est déroulé en mode hobby - certains soirs et le week-end, si possible, en parallèle avec d'autres projets "hobby" et le travail principal, qui était en premier lieu la priorité de tous les travaux.  Par conséquent, à la fin, le délai s'est avéré incroyablement gonflé pour un tel projet. <br><br>  Comment l'étude a-t-elle commencé? <br><br>  Tout d'abord, les lacunes des constructions amateurs vues ont été identifiées et évaluées.  La chose la plus importante qui a été notée alors: <br><br><ul><li>  Manque de variété d'éléments d'éclairage lumineux. </li><li>  La simplicité et la maladresse des conceptions, qui lubrifient toujours la première impression et peuvent ne pas conduire à l'effet approprié lors du don.  L'écrasante majorité des appareils examinés ressemblait à de l'artisanat amateur, rien de plus (comme celui que j'ai fait en 2010) - solide, pas sérieux, ennuyeux ... La plupart des conceptions de cœurs considérées n'ont pas de corps du tout, ou ce corps est terrible - Ala une scie à chantourner de contreplaqué pourri, une vis autotaraudeuse dans une planche, les fenêtres de l'org.  verre, etc.  Un certain optimum est nécessaire - le type d'appareil ne doit pas au moins effrayer les gens, au contraire - il doit transmettre au maximum toute la gamme des sentiments de celui qui le donne, et en même temps - l'appareil ne doit pas être trop dimensionnel, super complexe, etc. . </li><li>  L'absence d'effets sonores des effets de lumière dans les projets de coeurs (à de très rares exceptions près), même si, à mon avis, il supplie de lui-même.  Il ne suffit pas de clignoter la matrice LED.  La musique devrait améliorer l'effet, ajouter du romantisme au moment du don.  La musique peut même être une caractéristique individuelle d'un tel cadeau, elle «réchauffe» l'atmosphère appropriée à la situation correspondante - romantique / solennelle / drôle et toute autre.  On supposait que si les effets de l'éclairage, pour tout le reste, sont également synchrones avec la mélodie de fond - ce sera très cool, convaincant et cool. </li><li>  Puisque, selon le paragraphe précédent, il devrait y avoir de la musique - l'idée de faire une boîte à musique est venue d'elle-même - vous l'ouvrez - elle joue et scintille - vous la fermez - elle s'arrête et s'estompe. </li></ul><br>  Toutes ces pensées, le cerveau a pris d'assaut pendant un moment.  J'ai d'abord dû décider de la fonctionnalité spécifique de la box.  D'une manière générale, il était perçu comme suit: <br><br><ul><li>  Le cœur doit avoir une matrice LED, d'une résolution suffisante pour que vous puissiez exécuter une ligne en cours, faire l'animation la plus simple.  Il devrait être possible de s'éteindre et d'allumer les LED en douceur. </li><li>  Il devrait être possible de créer et de corriger rapidement des effets d'éclairage pour une restructuration rapide du programme d'éclairage pour un client spécifique.  Il convient de préciser que le modèle d'interaction avec les clients impliquait ce qui suit.  Le client est initialement doté d'un ensemble de programmes d'éclairage de base avec des mélodies prédéfinies, à partir duquel il sélectionne celui qui convient le mieux à ses souhaits - de plus, pour sa part, nous ajusterons le programme d'éclairage, en l'adaptant à cette personne en particulier, à son occasion / vacances (texte de la ligne de course, qui autres cadres).  À l'avenir, il était prévu d'élargir progressivement la base des mélodies et des effets d'éclairage disponibles.  De plus, pour ma part, je peux toujours conseiller la meilleure option après avoir communiqué avec le client, en fonction des données d'entrée.  La possibilité d'une étude complètement individuelle de la mélodie et de l'illumination, mais à un coût accru, n'est pas complètement exclue.  le processus de compilation d'un programme d'effets d'éclairage pour une nouvelle mélodie se révèle en tout cas beaucoup plus long que les autres processus de préparation de l'appareil à la vente. </li><li>  Un cas spécieux (en ne comptant que sur vos goûts au stade du prototype). </li><li>  Autonomie de pouvoir, comme  l'appareil est essentiellement un souvenir, cela n'a aucun sens de le rendre fixe, attaché à une source externe. </li></ul><br>  De plus, ces exigences ont été formalisées en tâches techniques spécifiques et, une à une, ces tâches ont été progressivement résolues.  Au cours du processus, différents matériaux ont été examinés, les types de conceptions, les circuits ont été réfléchis, ainsi, l'écriture du logiciel, la réalisation de la possibilité d'ajouter / supprimer / modifier rapidement des effets d'éclairage, etc. ont pris la part du lion. <br>  À titre d'exemple de telles transformations, je peux offrir une démonstration de la version intermédiaire de la boîte prototype fabriquée en 2015 - elle peut être conditionnellement considérée comme le résultat de l'itération 1 (la qualité vidéo est terrible, le son a été superposé séparément du fichier mp3, il n'a donc pas pu être enregistré correctement): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/F8leTFH6pFw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Et déjà la version finale, assemblée en 2017: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0MPJeOb9aJI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Il peut sembler qu'ici les LED brillent plus faiblement que dans la version 2015, mais ce n'est pas le cas - c'était juste que lors de la prise de vue, la source externe était trop forte.  Le son ici est déjà réel. <br><br>  Au moment où cet échantillon est apparu, beaucoup de choses avaient changé à l'extérieur et à l'intérieur de l'appareil, et dans sa partie logicielle. <br><br><h3>  En bref sur HW </h3><br>  Le boîtier électronique est situé sur trois cartes de circuits imprimés.  Sur un - LED, transistors et résistances, nécessaires pour l'inclusion matricielle des LED, le microcontrôleur de contrôle Atmega32A et son câblage.  Sur la deuxième carte, un contrôle de mise sous tension est mis en œuvre à l'ouverture du coffret, un circuit de mise hors tension avec une baisse inacceptable de la tension d'alimentation.  La troisième carte a un lecteur mp3 (module acheté). <br><br>  Le boîtier est une boîte métallique achetée.  À l'intérieur, toute la structure est basée sur un cadre en plastique imprimé sur une imprimante 3D.  Certains éléments sont maintenus par des joints adhésifs, la carte principale est maintenue sur des aimants montés dans une base en plastique. <br>  Le boîtier est alimenté par trois piles AAA. <br><br><h3>  En bref sur SW </h3><br>  Pour le PC, un programme a été développé - un générateur de code avec une interface graphique, qui vous permet de créer et d'éditer rapidement des effets d'éclairage, de contrôler tous les intervalles de temps nécessaires (pour la synchronisation avec la mélodie de fond) et de générer immédiatement un code pour flasher le microcontrôleur situé sur la carte cardiaque.  Un certain format a été développé pour l'enregistrement des paramètres d'effet dans des tableaux de données.  Côté MK, le firmware analyse ces matrices et les convertit en la lueur des bonnes LED au bon moment.  Le format d'enregistrement des effets dans les tables de codes est assez économique - la mémoire interne des programmes du microcontrôleur est assez suffisante pour le code du firmware et pour les tables avec des paramètres d'effets d'éclairage. <br><br>  Un article séparé peut être écrit sur la résolution des problèmes techniques et des problèmes rencontrés au cours du développement.  Bien sûr, ce n'est pas une «science sorcière» et mâcher de telles questions peut être ennuyeux pour le public, mais si quelqu'un est intéressé, vous pouvez certainement vous embrouiller. <br><br><h3>  Résumé </h3><br>  Quel est le résultat?  Le projet de cercueil peut toujours être léché et mis à niveau à l'infini, amélioré dans des directions complètement différentes, ajouté des fonctionnalités, etc.  Mais sous la forme dans laquelle la boîte a été conçue - cela a été fait, le projet de développement a été achevé.  Pour la (petite) production en série, il reste encore du travail à faire, mais c'est une question de technologie, comme on dit. <br><br>  Quelque part au milieu du voyage, je me suis rendu compte qu'essayer de développer indépendamment la composante commerciale du projet n'était pas très intéressant pour moi, il n'y avait ni temps, ni beaucoup de désir.  Il n'y avait personne pour assumer la majeure partie du travail d'organisation des ventes, de travail avec les mélodies et les effets d'éclairage dans mon environnement.  Avec un tel partenariat potentiel, j'ai accepté de fermer tous les problèmes techniques, la production, l'approvisionnement et la logistique.  Mais cela n'a pas fonctionné.  Et le temps est constamment occupé par d'autres tâches - soit plus intéressantes, soit simplement nécessaires / domestiques. <br><br>  Par conséquent, pour le moment, je considère que le projet est achevé à ce stade.  Au total, 3 exemplaires de la dernière version ont été réalisés - deux pour les cadeaux aux proches et un exemplaire sur commande.  Il peut arriver qu'une sorte d'histoire se poursuive un jour, je ne le promets pas, mais pour le moment le statut est comme ça.  En général, le résultat du travail m'a satisfait.  Mais le plus précieux est la réaction des proches à qui étaient destinés les premiers prélèvements cardiaques, pour cela il ne serait pas dommage de passer autant de temps que vous le souhaitez! <br><br>  Eh bien, en termes de rationalité de la conduite d'un tel projet, des conclusions objectives ont été tirées, des leçons ont été apprises qui me serviront sûrement dans les actions et les réalisations futures! <br><br>  Merci d'avoir lu, je suis toujours heureux de parler dans les commentaires, si vous avez des questions, commentaires, suggestions. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456366/">https://habr.com/ru/post/fr456366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456350/index.html">Événements numériques à Moscou du 17 au 23 juin</a></li>
<li><a href="../fr456352/index.html">Module de communication d'objets sans fil WISE-4000</a></li>
<li><a href="../fr456354/index.html">Comment collectons-nous les téléviseurs</a></li>
<li><a href="../fr456358/index.html">Les 13 articles les plus tristement célèbres de l'année écoulée</a></li>
<li><a href="../fr456362/index.html">Designer de niveau 6: comment nous motivons et développons les designers</a></li>
<li><a href="../fr456368/index.html">Effectuer des transactions publiques et privées sur la blockchain JPMorgan Quorum à l'aide de Web3</a></li>
<li><a href="../fr456370/index.html">Implémenter la QoS dans le stockage Qsan</a></li>
<li><a href="../fr456372/index.html">SimbirSoft invite les professionnels de l'informatique à un été intensif 2019</a></li>
<li><a href="../fr456374/index.html">Structures de données d'état de la chaîne de blocs Plasma Cash</a></li>
<li><a href="../fr456376/index.html">Not One Spring Boot: un aperçu des alternatives</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>