<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📴 🐝 🍘 Zehn Leute auf 90.000 Websites: Wie man nicht verrückt wird 🍛 👰🏻 🕗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, ich heiße Vera Sivakova. Ich arbeite mit wichtigen Partnern von Yandex.Kassi zusammen. Ich verbinde große Geschäfte und Dienstleistungen, start...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zehn Leute auf 90.000 Websites: Wie man nicht verrückt wird</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yamoney/blog/426583/"><p>  Hallo, ich heiße Vera Sivakova.  Ich arbeite mit wichtigen Partnern von Yandex.Kassi zusammen. Ich verbinde große Geschäfte und Dienstleistungen, starte Projekte und reise zu Meetings auf der ganzen Welt.  Im Allgemeinen folge ich, dass alles in Ordnung war. </p><br><p>  Jeder Mitarbeiter von Yandex.Money kann einmal im Jahr seinen Beruf wechseln - wählen Sie eine Abteilung und arbeiten Sie dort mehrere Tage.  Deshalb saß ich vor einem Monat in Sapsan und kam in St. Petersburg an.  Dort arbeitet eine Überwachungsabteilung, die auch überwacht, dass es 90.000 mit dem Ticketbüro verbundenen Standorten gut geht, und wir haben beschlossen, uns zusammenzuschließen. </p><br><p><img src="https://habrastorage.org/webt/nk/aw/gc/nkawgcaslqu2prxrf2i8t4rp0qy.png"><br>  <em>Wie kann man nicht verrückt werden?</em>  <em>Nicht genau das gleiche</em> (Quelle: reddit.com) </p><br><p>  Dies ist eine Geschichte darüber, wie unsere Überwachung funktioniert und was ich in ein paar Tagen in einer anderen Abteilung gelernt habe. </p><a name="habracut"></a><br><p>  Jede Sekunde durchlaufen ungefähr 600 Transaktionen den Service und all dies muss in Echtzeit überwacht werden - aber zu welchem ​​genauen Zeitpunkt ist es Zeit, den Alarm auszulösen, wenn etwas passiert?  Wir brauchen einen systematischen Blick auf fast alles. </p><br><p> Es wird empfohlen, das System aus technischer Sicht zu analysieren und die Geschäftsmetriken - Anzahl der Zahlungen, Umsatz und andere Parameter - nicht zu vergessen. </p><br><p>  In kleinen Systemen reicht der wachsame Blick des Hauptadministrators (meistens des einzigen) aus.  Bei vielen Prozessen können Mitarbeiter jedoch nicht alles manuell überwachen. Daher ist maximale Automatisierung die beste Strategie.  Ohne Expertenwissen und Teamarbeit funktioniert nichts, da die Überwachung eine kontinuierliche Verbesserung, Analyse und die Fähigkeit ist, kompetente Metriken und Trigger auszuwählen.  Sie arbeiten im Falle einer Abweichung von den angegebenen Bedingungen und melden eine Anomalie. </p><br><p>  Wir unterscheiden drei Überwachungsebenen, von denen jede ihre eigenen wichtigen Indikatoren hat - die Ebene des Systems, die Ebene der Geschäftslogik und die Ebene der Gegenparteien. </p><br><h2 id="uroven-sistemy">  Systemebene </h2><br><p>  Das Wichtigste dabei ist die Überwachung der Infrastruktur rund um die Uhr.  Von den Tools, mit denen Zabbix Daten in Echtzeit erfasst, werden Informationen zum Betrieb von Servern und Rechenzentren, zur Qualität des Netzwerks, zur Verfügbarkeit von Komponenten und Datenquellen angezeigt. </p><br><p>  Die Überwachung der IT-Infrastruktur ist eine sehr verantwortungsvolle Aufgabe, da ein Ausfall auf dieser Ebene mit Inoperabilität des Systems und verzweifelten Maßnahmen verbunden ist.  Daher ist es wichtig, nicht nur auf „blinkende“ Probleme zu reagieren, sondern auch Trends und historische Daten zu analysieren. Dies ermöglicht eine rechtzeitige Warnung vor potenziellen Fehlerpunkten und die Vorhersage des Skalierungsbedarfs.  Die Regel gilt für alle Indikatoren und Überwachungsebenen, einschließlich des Geschäfts. </p><br><p>  Für kritische Punkte sollten unten Triggerschwellen ausgewählt werden.  Wenn sich beispielsweise die Antwortzeit von einem Router erhöht, übertragen wir den Datenverkehr auf einen anderen und beseitigen die Ursache beim ersten.  Dies löste einen Warnauslöser aus, mit dem Sie sehr früh Benachrichtigungen über potenzielle Probleme erhalten können. Dies gibt Ihnen eine Zeitreserve für die Reaktion, die Möglichkeit, Änderungen vorherzusagen und Katastrophen zu vermeiden. </p><br><h2 id="uroven-biznes-logiki">  Geschäftslogikebene </h2><br><p>  Jedes Team definiert die Prozesse, die verfolgt werden müssen, ihre Priorität und ihre persönlichen Kennzahlen.  Das Kassiererteam verfügt beispielsweise über Dutzende von Geschäftsprozessen, z. B. die Zahlung mit jeder verfügbaren Methode - Karten, E-Wallets, Online-Banken und -Terminals, Mobile Commerce, Versandregister usw.  Als Hauptwerkzeug zum Sammeln und Anzeigen von Daten zur Arbeit der Geschäftslogik verwenden wir Graphite in Verbindung mit Grafana. </p><br><p>  Auf dieser Ebene ist es wichtig, sich an einen systematischen Ansatz zu halten und zu versuchen, sich von den binären und nicht informativen „Arbeiten / funktioniert nicht“ zu lösen. </p><br><p>  Beispielsweise gibt es eine Metrik "Anzahl erfolgreicher Kartenzahlungen".  Wenn es zu blinken beginnt, bedeutet dies, dass der Arbeitsablauf abgenommen hat.  In diesem Fall müssen Sie verstehen, was genau der Grund ist, und alle Komponenten berücksichtigen, die an diesem Prozess beteiligt sind.  Bei einem Rückgang der Anzahl der Transaktionen können Sie sofort daran denken, dass es auf Seiten der erwerbenden Bank Schwierigkeiten gibt.  Die Grafiken zeigen jedoch, dass mit der Verfügbarkeit von Banken alles in Ordnung ist.  Dann müssen Sie weitere Nachforschungen anstellen, und am Ende stellt sich beispielsweise heraus, dass alle Fragen im Layout enthalten sind: Aus irgendeinem Grund ist die Schaltfläche "Bezahlen" verschwunden oder inaktiv geworden. </p><br><h2 id="uroven-kontragentov">  Kontrahentenlevel </h2><br><p>  Hier geht es um bestimmte Gegenparteien - zum Beispiel um die Akquisition von Banken und Händlern. </p><br><p>  Wir haben separate Zeitpläne und Trigger für Acquirer ausgewählt, deren Verfügbarkeit wir ständig verfolgen müssen.  Für uns als Zahlungsdienstleister ist Stabilität sehr wichtig, daher übertragen wir im Falle eines Ausfalls einer der Banken den Strom sofort in die Reserve. </p><br><p><img src="https://habrastorage.org/webt/go/_c/2e/go_c2eclhtetnklaej4ohkk04qy.png"><br>  <em>Eine Bank ist ausgefallen, eine andere automatisch verbunden</em> </p><br><p>  Wir haben gelernt, den Workflow ziemlich gut und rechtzeitig umzuleiten, wenn Fehler auftreten. </p><br><p><img src="https://habrastorage.org/webt/fe/kz/hn/fekzhnwwc8rkqb0hf7ms_-cfwjo.png"><br>  <em>Eine der Banken verzeichnete einen Anstieg der Zahlungsfehler</em> </p><br><p><img src="https://habrastorage.org/webt/13/vf/f-/13vff-8knq05k4j59kovhms8yvs.png"><br>  <em>Übersetzt - und alles ist in Ordnung.</em>  <em>Y-Achsenwerte sind nicht angemessen</em> </p><br><p>  Acquirer können auf den bereits beschriebenen Ebenen aus verschiedenen Gründen scheitern - Systeme und Geschäftslogik.  Niemand ist immun gegen unvorhergesehene Probleme und kann keine 100% ige Verfügbarkeit garantieren.  Es lohnt sich auch, sich an die geplanten technischen Arbeiten und Veröffentlichungen zu erinnern, wenn Sie den Fortschritt der Dinge genau überwachen müssen.  Das Problem der Redundanz und der automatischen Umschaltung ist von entscheidender Bedeutung, da einfach bedeutet, Zahlungen für das Unternehmen zu stoppen. </p><br><p>  Wir arbeiten mit mehreren Banken gleichzeitig zusammen, um Ausfallzeiten zu minimieren und die Zahlungen mit SR-Karten zu optimieren.  SR (Erfolgsrate) oder sonst Conversion ist eine Geschäftsmetrik, die als Verhältnis der Anzahl erfolgreicher Zahlungen zur Gesamtzahl der Transaktionen berechnet wird.  Verschiedene Unternehmen messen die Conversion auf ihre eigene Weise: Beispielsweise beginnt jemand auf der Zahlungsseite mit der Messung, andere nach dem Klicken auf die Schaltfläche "Bezahlen".  Im Allgemeinen wird SR jedoch von vielen verschiedenen Faktoren beeinflusst - MCC, unabhängig davon, ob die Zahlung 3D-sicher ist, die Geografie der Zahler, wiederkehrende Zahlungen oder nicht.  Der „Krankenhausdurchschnitt“ SR ist nicht zu bestimmen und muss nicht bekannt sein - in jedem Fall ist es sein eigener Wert, der optimiert werden muss. </p><br><p>  Die gesamte Fehlervielfalt kann in zwei große Gruppen unterteilt werden. </p><br><ol><li>  <strong>Fehler, die verhindert werden können</strong> - beispielsweise die Zahlung aus diesem Land ist verboten.  Wenn Sie sicher sind, dass dies kein betrügerischer Angriff ist und Sie Benutzer auf der ganzen Welt haben, ist es in diesem Fall erforderlich, die Möglichkeit der Zahlung mit Karten von Emittenten zu verbinden.  Dies kann übrigens auf dem persönlichen Konto des Yandex-Kassierers erfolgen. </li><li>  <strong>Fehler, die nicht beeinflusst werden können</strong> - zum Beispiel ist die Karte gesperrt.  Hier hilft nur die erneute Ausstellung oder der Versuch, die Zahlung mit einer anderen Karte im Rahmen einer neuen Transaktion zu wiederholen. </li></ol><br><p>  Viele wählen einen Zahlungsanbieter zu einem Preis.  Tatsächlich ist die Rate nicht der einzige Wert, der berücksichtigt werden sollte.  Sie müssen auch den Prozentsatz der erfolgreichen Zahlungen (SR) betrachten, da niemand eine 100% ige Umwandlung hat und dieser Wert von Bank zu Bank sehr unterschiedlich ist.  Es muss auch berücksichtigt werden, wie das Benutzerszenario im Allgemeinen aussieht: Wie viele Schritte müssen Sie vor dem Bezahlen ausführen, wenn die Benutzeroberfläche klar ist usw. </p><br><h2 id="kak-konversiya-vliyaet-na-pribyl">  Wie sich die Umwandlung auf den Gewinn auswirkt </h2><br><p><img src="https://habrastorage.org/webt/vy/8x/7m/vy8x7myw1csu5qa3vnrdmusryv8.png"><br>  <em>Im zweiten Fall ist die Provision für Dienste höher, aber die Konvertierung ist auch höher, da die Reservierung und die ordnungsgemäße Konfiguration des Gateways verwendet werden.</em> </p><br><p>  Wie Sie dem Beispiel entnehmen können, wäre eine bessere Lösung für das Unternehmen ein besserer Service. Trotz der Tatsache, dass die Provision aufgrund der unterschiedlichen Qualität des Erwerbs höher ist, haben wir am Ende einen Unterschied von 3 538 080 - 2 847 000 = 691 080 Rubel pro Monat!  Und das sind 8 Millionen pro Jahr, was eine Menge Geld für das Geschäft bedeutet. </p><br><p>  Conversion, Umsatz und Raten sind willkürlich, aber das Beispiel zeigt, dass die Hauptsache des Service seine Stabilität und Qualität ist.  Und dies bringt bereits eine erhöhte Umwandlung und infolgedessen einen größeren Umsatz für den Händler mit sich. </p><br><h2 id="kak-podklyuchaetsya-merchant">  Wie der Händler verbunden ist </h2><br><p>  Wie bereits erwähnt, versuchen wir, alles mit Metriken und Triggern abzudecken, die bei einem Ereignis automatisch ausgelöst werden.  Mal sehen, wie alles am Beispiel der Überwachung eines der Händler passiert. </p><br><p>  Nach dem Herstellen einer Verbindung zum Kassierer wird der Händler bei Bedarf überwacht.  Wir erstellen ein Diagramm in Grafana und konfigurieren die Metriken, mit denen automatische Warnungen ausgelöst werden, wenn von den angegebenen "normalen" Werten abgewichen wird. </p><br><p>  Wir verwenden Moira, um Benachrichtigungen an den Chat der Überwachungsgruppe zu senden, der die Details schnell überprüft.  Die Benachrichtigung enthält einen Link zum Zeitplan und Details zum Vorfall. </p><br><p><img src="https://habrastorage.org/webt/kr/g-/ef/krg-efr_0h_ou3yxyz0-aqwgdcy.png"><br>  <em>Absolut ein echtes Beispiel für eine Nachricht von einem Bot</em> </p><br><p>  Nach der Analyse des Diagramms verwendet der Spezialist der Überwachungsgruppe am häufigsten Kibana, um die Protokolle anzuzeigen.  Hier kann die Situation prosaisch sein, und dann wird in den Protokollen offensichtlich ein Fehler sichtbar, oder es ist eine zusätzliche Beteiligung von Analysten erforderlich, um die Ursachen des Fehlers zu analysieren. </p><br><p>  In Zukunft möchten wir eine automatische Benachrichtigung von Händlern über Fehler auf ihrer Seite einrichten, z. B. über Serverunzugänglichkeit oder nicht protokollierte Antworten.  Auf diese Weise können Sie schnell auf einen Fehler reagieren und Kontrahenten Informationen geben, um die Ursachen zu beseitigen. </p><br><p>  Neben der technischen Seite überwachen wir auch sorgfältig Geschäftskennzahlen wie Umsatz, Einkommen und Abfluss. Dies scheint jedoch das Thema für die folgenden Geschichten zu sein. </p><br><h3 id="samoe-glavnoe">  Das Wichtigste </h3><br><p>  Mein "Tag des Ungehorsams" (was wir einen vorübergehenden Übergang zu einer anderen Abteilung nennen) endete und ich kehrte nach Moskau zurück.  Für 2 Tage in der Überwachungsabteilung habe ich viel gelernt und das aktuelle Wissen gestrafft. </p><br><ul><li>  Die Überwachungsaufgabe besteht darin, auf allen Ebenen relevante Informationen über den Zustand des Systems bereitzustellen. </li><li>  Wählen Sie kompetente Metriken und Trigger - 90% Erfolg; </li><li>  Bei Zahlungsdiensten trifft die Conversion das Gebot. </li><li>  Sie müssen der Technik folgen und sich an Geschäftsmetriken erinnern. </li><li>  Wir brauchen eine systematische Sicht auf Prozesse und die Fähigkeit, Beziehungen zu analysieren. </li></ul><br><p>  Und doch - sei dankbar.  Leute überwachen, danke! </p><br><hr><br><p>  <em>Das ist alles</em>  <em>Stellen Sie Fragen, abonnieren Sie unseren Blog und besuchen Sie uns.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de426583/">https://habr.com/ru/post/de426583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de426571/index.html">Ein systematischer Geschwindigkeitsansatz: Online-Messungen am Frontend</a></li>
<li><a href="../de426573/index.html">ZeroNights 2018. Neu laden</a></li>
<li><a href="../de426575/index.html">Bericht des Club of Rome 2018, Kapitel 1.12: „Von einer leeren Welt zu einer vollständigen Welt“</a></li>
<li><a href="../de426579/index.html">Engie und Ledger entwickeln eine Hardware-Blockchain-Lösung zum Speichern von Daten, die von grünen Energiequellen erzeugt werden</a></li>
<li><a href="../de426581/index.html">Offene Lektion "Übersicht über die Funktionen von Node.j"</a></li>
<li><a href="../de426585/index.html">Unter dem Druck von Instagram und Facebook: Warum Snapchat den Austausch verlassen kann und warum er benötigt wird</a></li>
<li><a href="../de426587/index.html">Algorithmische Probleme im Frontend. Yandex Beispiele und Wettbewerb</a></li>
<li><a href="../de426591/index.html">Haltungsmeister: Bleib am Leben</a></li>
<li><a href="../de426593/index.html">DJI Phantom 4 RTK: Kartierung der nächsten Generation</a></li>
<li><a href="../de426595/index.html">Richard Hamming "Nicht existierendes Kapitel": Wie wir wissen, was wir wissen (1-10 Minuten von 40)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>