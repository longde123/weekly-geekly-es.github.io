<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëì üëºüèø üòµ Crie uma base de c√≥digo comum üë¶üèø üë©‚Äçüë©‚Äçüëß‚Äçüë¶ üèçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De projeto para projeto, percebemos que nosso c√≥digo executa as mesmas fun√ß√µes e parece quase o mesmo. Isso nos faz pensar - n√£o estamos fazendo o tra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Crie uma base de c√≥digo comum</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468519/"><p><img src="https://habrastorage.org/webt/gl/ke/kt/glkektigl8ivpcm26wxxg-ij9t8.jpeg"></p><br><p> De projeto para projeto, percebemos que nosso c√≥digo executa as mesmas fun√ß√µes e parece quase o mesmo.  Isso nos faz pensar - n√£o estamos fazendo o trabalho extra reescrevendo a mesma coisa?  Come√ßamos a copiar as aulas de projetos anteriores e ainda entendemos que estamos fazendo algo errado e certo - basta copiar as aulas de projeto para projeto, podemos facilmente perder / substituir / limpar alguma coisa, e se nossa equipe liderar mais algumas projetos simultaneamente, a detec√ß√£o de erros nas classes emprestadas exigir√° altera√ß√µes manuais em todos os projetos.  Cansados ‚Äã‚Äãde pisar neste rake, decidimos que precisamos de um c√≥digo comum que ser√° compartilhado em todos os nossos projetos e quaisquer altera√ß√µes nele ser√£o facilmente puxadas.  Sim, estamos criando nossa biblioteca de componentes reutiliz√°veis!  Voc√™ aprender√° sobre diferentes maneiras de organizar sua biblioteca, sobre todos os pr√≥s e contras das abordagens em cat :) </p><a name="habracut"></a><br><p>  Existem v√°rias maneiras de organizar nossa base de c√≥digo comum: </p><br><ol><li>  Biblioteca Android (aar / jar) </li><li>  Sub-m√≥dulo Git </li><li>  Sub√°rvore Git </li></ol><br><h1 id="android-biblioteka-aarjar">  Biblioteca Android (aar / jar) </h1><br><p>  Qualquer biblioteca para nosso aplicativo √© composta por v√°rias classes organizadas de uma certa maneira.  Cada vez que conectamos algum Retrofit ou Dagger no <strong>build.gradle</strong> , carregamos a biblioteca como um arquivo aar / jar de uma das plataformas de publica√ß√£o de bibliotecas.  As plataformas de publica√ß√£o de bibliotecas mais populares s√£o o JCenter e o MavenCentral.  Os desenvolvedores da biblioteca trabalham em seu reposit√≥rio na nova vers√£o e, quando a vers√£o fica pronta para ser lan√ßada no mundo, eles a publicam em uma das plataformas e dizem "Ei, lan√ßamos uma nova vers√£o da nossa principal biblioteca!".  Tudo o que resta a ser feito para os desenvolvedores que usam essa biblioteca em seus projetos √© alterar a vers√£o no build.gradle e aproveitar os novos recursos.  √â conveniente?  Palavra errada! </p><br><p>  Mas qu√£o conveniente √© essa abordagem se nossa biblioteca estiver em desenvolvimento e atualizada todos os dias com novos recursos de diferentes desenvolvedores de diferentes projetos de nossa equipe?  Vamos ver como fica na pr√°tica. </p><br><p><img src="https://habrastorage.org/webt/b_/ut/v_/b_utv_ozbackygrup1v9kc-d850.jpeg"></p><br><p>  Criamos um reposit√≥rio de nossa biblioteca, contribu√≠mos com alguns recursos, depuramos e estamos prontos para compartilh√°-lo com nossa equipe.  Em seguida, aprenderemos sobre palavras como JCenter, MavenCentral, Bintray, Jitpack.io ... todas essas s√£o plataformas para publica√ß√£o de bibliotecas.  Agora, a principal plataforma para projetos Android √© o JCenter.  Se voc√™ criar um projeto, ver√° que no <strong>build.gradle</strong> (n√≠vel do projeto) nos reposit√≥rios, o JCenter √© especificado </p><br><pre><code class="plaintext hljs">repositories { google() jcenter() }</code> </pre> <br><p>  Ou seja, se o desenvolvedor quiser conectar sua biblioteca, ser√° suficiente para ele conect√°-la ao n√≠vel do m√≥dulo <strong>build.gradle</strong> . </p><br><p>  <em>A maneira mais f√°cil de publicar a biblioteca para mim parece ser o Jitpack.io, algumas etapas e sua biblioteca est√° pronta para uso.</em> </p><br><h3 id="kak-organizovat-komandnuyu-rabotu-nad-bibliotekoy">  Como organizar o trabalho em equipe na biblioteca </h3><br><p>  Se criamos uma biblioteca e a carregamos no reposit√≥rio, o restante da nossa equipe possui apenas o arquivo jar / aar recebido.  Para que toda a equipe possa trabalhar em qualquer um - cada desenvolvedor deve esvaziar o reposit√≥rio da biblioteca e fazer altera√ß√µes nele. </p><br><h3 id="versionirovanie">  Versionamento </h3><br><p>  Ao desenvolver e usar bibliotecas, √© preciso lidar com um conceito como versionamento.  Ou seja, o conjunto de altera√ß√µes na biblioteca que queremos publicar deve ser corrigido pela vers√£o.  Isso ajudar√° ao atualizar a biblioteca para uma nova vers√£o para entender como as altera√ß√µes graves / graves foram feitas, gra√ßas ao esquema de vers√£o adotado. </p><br><h3 id="proverka-biblioteki-v-proekte">  Verificando a biblioteca no projeto </h3><br><p>  Para verificar se as altera√ß√µes efetuadas fazem o que pretendemos - √© necess√°rio verificar o comportamento do c√≥digo escrito no projeto.  Aumentamos a vers√£o da biblioteca e ... aqui est√° um dos gargalos dessa abordagem.  Nossa biblioteca e o projeto est√£o em reposit√≥rios diferentes, o que significa que n√£o podemos simplesmente obter classes de biblioteca no projeto.  Temos duas op√ß√µes para verificar o novo c√≥digo da biblioteca: </p><br><ol><li>  Crie um m√≥dulo no projeto de biblioteca de <strong>amostra</strong> no qual o c√≥digo ser√° gravado que verifica a funcionalidade da biblioteca.  A op√ß√£o √© simples, mas existem 2 desvantagens: 1. Escrevemos c√≥digo adicional;  2. O ambiente do m√≥dulo de teste √© diferente do projeto real no qual usaremos a biblioteca e, se cometermos erros, ele aparecer√° quando recebermos uma nova vers√£o do projeto. </li><li>  <strong>Publique as</strong> altera√ß√µes no reposit√≥rio <strong>mavenLocal</strong> local.  Gra√ßas a essa abordagem, voc√™ pode obter um novo c√≥digo no projeto, mas ele n√£o ser√° publicado para toda a equipe (mas voc√™ precisar√° mexer um pouco na configura√ß√£o). </li></ol><br><h1 id="git-submodule">  Sub-m√≥dulo Git </h1><br><p>  Na abordagem anterior, enfrentamos a dificuldade de obter novo c√≥digo no est√°gio de desenvolvimento / depura√ß√£o do projeto, pois a biblioteca e o c√≥digo do projeto est√£o em diferentes reposit√≥rios e projetos de est√∫dio.  A abordagem do Sub-m√≥dulo Git tamb√©m envolve o uso de reposit√≥rios separados, mas permite que o projeto principal obtenha a biblioteca como um m√≥dulo usando o Git.  Isso significa que o c√≥digo da biblioteca estar√° dispon√≠vel no projeto e todas as altera√ß√µes imediatamente dispon√≠veis no projeto! </p><br><h3 id="kak-eto-rabotaet">  Como isso funciona </h3><br><p>  Os subm√≥dulos permitem que voc√™ contenha um reposit√≥rio Git como um subdiret√≥rio de outro reposit√≥rio Git.  Isso torna poss√≠vel clonar outro reposit√≥rio dentro do projeto, armazenando as confirma√ß√µes para esse reposit√≥rio separadamente. </p><br><p><img src="https://habrastorage.org/webt/p4/z-/wh/p4z-whwzw3abnkil06dvmt0uo0w.jpeg"></p><br><p>  Simplificando, temos 2 reposit√≥rios: um projeto e uma biblioteca.  O reposit√≥rio do projeto armazena o c√≥digo da biblioteca e um link para o status do reposit√≥rio da biblioteca.  Portanto, o Git entende qual o estado (vers√£o) da biblioteca que o projeto precisa. </p><br><p>  <em>Leia mais sobre como o Submodule do Git funciona <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui.</a></em> </p><br><h3 id="kak-organizovat-komandnuyu-rabotu">  Como organizar o trabalho em equipe </h3><br><p>  Na abordagem do Git Submodule, o trabalho em equipe na biblioteca √© organizado da seguinte maneira: </p><br><ol><li>  Ao criar um novo projeto ou conectar uma biblioteca a um projeto existente, uma nova ramifica√ß√£o Git do master √© criada com o nome do projeto. </li><li>  Quando chega a hora de reabastecer a biblioteca com alguma funcionalidade, uma ramifica√ß√£o para a tarefa (da ramifica√ß√£o do projeto) √© criada e as altera√ß√µes s√£o feitas l√°. </li><li>  Uma revis√£o est√° sendo conduzida, os pools est√£o sendo despejados na filial do projeto.  Quando altera√ß√µes suficientes s√£o digitadas para liberar a vers√£o, um pool √© criado na mesclagem da ramifica√ß√£o do projeto na ramifica√ß√£o principal da biblioteca. </li><li>  Depois que o pool passa na revis√£o pela equipe respons√°vel pela biblioteca e √© derramado na ramifica√ß√£o principal, as equipes restantes do projeto ser√£o notificadas da atualiza√ß√£o da biblioteca que apareceu e decidir√£o sobre a atualiza√ß√£o. </li></ol><br><h3 id="versionirovanie-1">  Versionamento </h3><br><p>  Quando o pool foi derramado no <strong>mestre</strong> e as equipes s√£o notificadas da atualiza√ß√£o da biblioteca, elas n√£o est√£o cientes de qu√£o globais s√£o as altera√ß√µes na nova vers√£o.  Afinal, a abordagem com o Git Submodule n√£o requer nenhum esquema de vers√£o.  Mas esse problema √© facilmente resolvido com a introdu√ß√£o de um esquema de vers√£o.  Tudo o que √© necess√°rio √© escrever uma vers√£o e descri√ß√£o do que foi alterado e inclu√≠do na descri√ß√£o da solicita√ß√£o de pool na ramifica√ß√£o <strong>principal</strong> .  Em seguida, os desenvolvedores entender√£o o quanto eles podem realmente atualizar para a nova vers√£o da biblioteca.  Parece √≥timo, mas a pergunta √©: </p><br><p><img src="https://habrastorage.org/webt/6o/jx/cv/6ojxcvyb5oyqfevbzbxqojxfori.jpeg"></p><br><p>  Sim, o est√∫dio n√£o sabe se comprometer separadamente com a lib conectada pelo subm√≥dulo.  Eu uso o SourceTree para resolver esse problema.  Esta aplica√ß√£o √© para Windows e Mac, e para Linux existe o GitKraken. </p><br><h1 id="git-subtree">  Sub√°rvore Git </h1><br><p>  Git Subtree √© uma vers√£o aprimorada do Git Submodule.  No Git Subtree, eles tentaram resolver os problemas que os desenvolvedores encontraram ao trabalhar com o Git Submodule, h√° um bom <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> no hub que descreve as diferen√ßas entre as ferramentas.  Embora eles funcionem de maneira diferente, eles resolvem um problema. </p><br><h1 id="zaklyuchenie">  Conclus√£o </h1><br><p>  As ferramentas Git Submodule / Subtree s√£o √≥timas para resolver o problema de criar uma base de c√≥digo comum para uma equipe envolvida em v√°rios projetos.  Uma das vantagens importantes √© a verifica√ß√£o instant√¢nea do novo c√≥digo no projeto ap√≥s fazer altera√ß√µes na biblioteca.  Nesse sentido, a abordagem padr√£o de publica√ß√£o de uma biblioteca no JCenter ou no MavenCentral √© inferior.  Se voc√™ decidir levar o Submodule / Sub√°rvore Git para sua equipe, pense com anteced√™ncia sobre o esquema de vers√£o e crie regras / plugins para controlar a vers√£o. </p><br><p>  Grande reutiliza√ß√£o para todos! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt468519/">https://habr.com/ru/post/pt468519/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt468501/index.html">Como eu criei um filtro que n√£o corrompe a imagem mesmo depois de um milh√£o de execu√ß√µes</a></li>
<li><a href="../pt468503/index.html">O correio n√£o percorre mais de 500 milhas - Perguntas frequentes</a></li>
<li><a href="../pt468509/index.html">Desenvolvimento de sistema operacional Unix-like - Drivers de dispositivos de caracteres (8)</a></li>
<li><a href="../pt468511/index.html">Publicando um servidor atrav√©s de um gateway DFL da D-Link</a></li>
<li><a href="../pt468515/index.html">Dicas √∫teis para integra√ß√£o em novos projetos</a></li>
<li><a href="../pt468521/index.html">Como generalizamos a seguran√ßa da informa√ß√£o</a></li>
<li><a href="../pt468523/index.html">De foguetes a rob√¥s e o que o Python tem a ver com isso. GeekBrains Alumni Story</a></li>
<li><a href="../pt468525/index.html">Brinquedos de madeira, parte um - 1982-1985</a></li>
<li><a href="../pt468529/index.html">Domando Gorynych ou Descompilando o eBPF em Ghidra</a></li>
<li><a href="../pt468531/index.html">O primeiro bot PHP para VKontakte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>