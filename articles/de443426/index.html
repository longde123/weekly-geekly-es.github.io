<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòò üéÑ üë∏üèæ Schwarze Markierung - wie OpenShift mit SELinux vor Container-Schwachstellen sch√ºtzt ‚òùüèΩ üòª üåñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Haben Sie jemals einen schwierigen Job zum Wohl der Gesellschaft gemacht, aber Ihre Bem√ºhungen nicht bemerkt, weil Sie so lange davon profitiert haben...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schwarze Markierung - wie OpenShift mit SELinux vor Container-Schwachstellen sch√ºtzt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/443426/"> Haben Sie jemals einen schwierigen Job zum Wohl der Gesellschaft gemacht, aber Ihre Bem√ºhungen nicht bemerkt, weil Sie so lange davon profitiert haben, dass jeder daran gew√∂hnt ist?  Dies ist die Art von Arbeit f√ºr Sie, die alle Mitglieder der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SELinux-Community</a> leisten. <br><br><img src="https://habrastorage.org/webt/lf/xp/34/lfxp34f04xcciggvd-ld8o8j7ac.png" width="100%"><br><br>  Und am 18. Februar dieses Jahres wurde die Welt vor allem dank ihrer Arbeit vor der gef√§hrlichen Sicherheitsl√ºcke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2019-5736 gerettet</a> . <br><a name="habracut"></a><br>  Obwohl es andere Betriebssysteme und andere Open Source-Projekte gibt, die Steuerelemente f√ºr Typ und Kategorie verwenden, sind selten alle mit SELinux konfigurierten Komponenten standardm√§√üig standardm√§√üig enthalten und einsatzbereit.  Noch seltener deckt diese Konfiguration alle Ebenen ab, bis hin zur L√∂sung f√ºr die Container-Orchestrierung, auf deren Grundlage die √∂ffentliche Cloud funktioniert. <br><br>  Red Hat OpenShift verwendet seit acht Jahren Linux-Mechanismen zur erzwungenen Zugriffskontrolle wie Type Enforcement (TE) und Multi-Category Security (MCS).  SELinux wird seit 2011 in OpenShift verwendet.  Bei Red Hat OpenShift Online, einem √∂ffentlich verf√ºgbaren Hosting-Service, bei dem Tausende von Entwicklern t√§glich Container-Code ausf√ºhren, wurde SELinux von Anfang an verwendet.  Was ist mit der Version von OpenShift, die beispielsweise im Rechenzentrum Ihres bevorzugten Mobilfunkbetreibers verwendet wird?  Tats√§chlich ist das SELinux-Sicherheitsmodul standardm√§√üig in der Red Hat OpenShift Container Platform enthalten!  Und nicht nur eingeschaltet, sondern vollst√§ndig konfiguriert und bereit, sich vor echten Bedrohungen zu sch√ºtzen. <br><br>  Im Gegensatz zu anderen Kubernetes-Distributionen schlie√üt Red Hat die L√ºcke zwischen Linux und der darauf installierten Container-Orchestrierungsplattform.  Das hei√üt, Red Hat OpenShift √ºberwacht und eliminiert Sicherheitsbedrohungen im gesamten Stapel und nicht nur in einer Schicht.  Und dies erfolgt standardm√§√üig - ab dem ersten Arbeitstag. <br><br>  OpenShift verwendet diese Konfiguration standardm√§√üig in Red Hat Enterprise Linux (Sie m√ºssen nicht einmal wissen, was es gibt).  Die Angelegenheit ist nicht auf die Ausf√ºhrung von setenforce 1 auf einem Laptop beschr√§nkt. Die Zugriffssteuerungsregeln f√ºr die Typen und Kategorien, die der Mandant f√ºr die Arbeit mit Containern in einem Kubernetes-Cluster anwendet, k√∂nnen auf Hunderte von Knoten erweitert werden, die von Tausenden anderer Mandanten verwendet werden k√∂nnen. <br><br>  √úberlegen Sie, wie die SELinux-Konfiguration mit MCS nach einigen Jahren in einem gro√üen Unternehmen aussehen wird, das OpenShift-Anmeldeinformationen links und rechts verteilt.  Stellen Sie sich nun vor, Sie geben Ihre Anmeldeinformationen ein, um sich bei Ihrem OpenShift-Cluster anzumelden, wie wir es bei openshift.com tun.  Hingabe SELinux erh√§lt h√§ufig keine Anerkennung f√ºr alles, was in der OpenShift-L√∂sung ausgef√ºhrt wird.  Wenn Ihnen das Betriebssystem heutzutage nicht so wichtig erscheint, √ºberlegen Sie, ob Sie bis Februar dieses Jahres vor der Sicherheitsanf√§lligkeit CVE-2019-5736 gesch√ºtzt waren.  In OpenShift ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2019-5736</a> von Anfang an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">gesch√ºtzt</a> , und Sie k√∂nnen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">jetzt</a> mit dieser L√∂sung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fortfahren</a> . <br><br><h3>  SELinux-Marken </h3><br>  Eine der effektivsten Standardsicherheitsfunktionen, die in Red Hat OpenShift implementiert sind, ist Security-Enhanced Linux (SELinux).  SELinux ist ein Linux-Kernel-Sicherheitsmodul, das eine auf Sicherheitsrichtlinien basierende Zugriffskontrolle bietet.  SELinux funktioniert so, dass allen Prozessen und Objekten des Betriebssystems Bezeichnungen (Namen) zugewiesen werden.  Somit wird jedes Element, das an Kerneloperationen beteiligt ist, markiert und klassifiziert, und dann wird ihm Zugriff basierend auf einem vorhandenen Regelsatz gew√§hrt. <br><br>  Richtlinienregeln definieren die Beziehung zwischen gekennzeichneten Prozessen und gekennzeichneten Objekten.  Vom Benutzer in den Richtlinien definierte Regeln werden auf Kernelebene angewendet.  Standardm√§√üig wird alles, was nicht zul√§ssig ist, automatisch verweigert - analog zu einer Firewall, die den Zugriff auf alle Prozesse verweigert, f√ºr die keine expliziten Berechtigungen konfiguriert sind.  Die folgenden Abbildungen veranschaulichen einfache Anwendungsf√§lle. <br><br>  Stellen Sie sich ein System vor, in dem Sie Typen f√ºr Objekte wie Katzen und Hunde definieren m√ºssen.  Katze und Hund sind Arten von Prozessen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/p6/fw/ed/p6fwedxevpd4bt1tplgm7_-stgo.png"></div><br>  <i>* Alle Zeichnungen stammen von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">M√°ir√≠n Duffy</a></i> <br><br>  Die Klasse von Objekten, mit denen die Prozesse interagieren, ist Feed.  F√ºgen Sie Futtertypen hinzu: cat_chow und dog_chow (Ohm-nom-nom). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ce/yb/-i/ceyb-ioj32dnqpl62umrtylsoyg.png"></div><br>  Wir legen fest, dass der Hund Hundefutter (dog_chow) und das Katzenfutter (cat_chow) essen darf.  Wir schreiben diese Berechtigungen als SELinux-Richtlinienregel: <br><br><pre><code class="plaintext hljs">allow cat cat_chow:food eat; allow dog dog_chow:food eat;</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_j/ra/hf/_jrahfdtxvyx-ctmut1ta2nd2rk.png"></div><br>  Nach diesen Regeln darf der "cat" -Prozess auf Kernelebene Futter mit dem Label cat_chow und f√ºr das Hundefutter mit dem Label dog_chow essen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mv/6d/ni/mv6dnihkvgs96hr9d_-ldnz7qom.png"></div><br>  Wir erinnern uns jedoch daran, dass in SELinux standardm√§√üig alles verboten ist.  Wenn der Hund versucht, cat_chow zu essen, l√§sst der Kern dies nicht zu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/65/zb/6s/65zb6si0w3_eladgxlyqov5ne7w.png"></div><br>  Dies ist die Typsteuerung, die eine wichtige Rolle beim Schutz des Hostsystems vor Containerprozessen spielt.  Containerprozesse k√∂nnen nur Dateien aus dem Verzeichnis / usr lesen und ausf√ºhren und Daten nur in Containerdateien schreiben.  Diese Einschr√§nkung sch√ºtzt den Host zuverl√§ssig vor Containern, sch√ºtzt jedoch einige Container nicht vor anderen, da sie alle mit demselben Typ gekennzeichnet sind.  Um Container voreinander zu sch√ºtzen, m√ºssen Sie die MCS-Tag-Steuerung implementieren. <br><br><h3>  MCS zieht keine Katze am Schwanz </h3><br>  Die Verwendung von MCS steht nicht in direktem Zusammenhang mit dem Schutz von OpenShift vor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2019-5736</a> . Es ist jedoch hilfreich, sich mit diesem Thema vertraut zu machen, um die Prinzipien der Verwendung von SELinux in OpenShift besser zu verstehen.  Das Zuweisen von MCS-Labels aus Sicht des Benutzers oder Systemadministrators ist recht einfach.  Sie m√ºssen nur eine Reihe von Kategorien konfigurieren, bei denen es sich um einfache Textbeschriftungen handelt (z. B. Fido oder Spot), und ihnen Benutzer hinzuf√ºgen.  Der Systemadministrator richtet zuerst die Kategorien ein und f√ºgt ihnen dann Benutzer hinzu. Anschlie√üend k√∂nnen Benutzer diese Beschriftungen nach Belieben verwenden.  Dies ist praktisch, da Sie mit MCS Standard-SELinux-Tags zum Verwalten von Objekten verwenden k√∂nnen.  Wenden wir uns noch einmal dem imagin√§ren System aus dem obigen Beispiel zu. <br><br>  F√ºgen Sie einen weiteren Teil des Etiketts hinzu, der auf den Hundeprozess und das dog_chow-Feed angewendet wird.  Weisen Sie den Prozess "Hund" dem Hund zu: random1 (Fido) und dog: random2 (Spot). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tw/yq/_l/twyq_lsws3els9cswdrlt8utnuc.png"></div><br>  Weisen wir dem Hundefutter die Bezeichnungen dog_chow: random1 (Fido) und dog_chow: random2 (Spot) zu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/gx/7u/jbgx7ujlwy2svpihnxbpygu4qsa.png"></div><br>  Gem√§√ü den Funktionsprinzipien von MCS ist der Zugriff zul√§ssig, wenn die Regeln der erzwungenen Kontrolle durch Typ und beliebige MCS-Tags genau √ºbereinstimmen, und in allen anderen F√§llen wird der Zugriff verweigert. <br><br>  Versuche von Fido (Hund: random1), cat_chow: zu essen, werden aufgrund erzwungener Typkontrollen abgelehnt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zt/jw/ru/ztjwru8zama7leaffnnru7kuooy.png"></div><br><h3>  Verteidigung in der Tiefe </h3><br>  Das von OpenShift verwendete Standard-SELinux-Sicherheitsmodul ist ein hervorragendes Beispiel f√ºr eine gr√ºndliche Verteidigung.  OpenShift verwendet wie viele andere Kubernetes-basierte Plattformen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SCC / PSP-</a> Richtlinien, die das Ausf√ºhren von Containern mit Root-Rechten verbieten.  Diese Einschr√§nkung sch√ºtzt auch vor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2019-5736</a> .  In OpenShift werden Container, deren Eigent√ºmer der Root-Benutzer ist, standardm√§√üig blockiert. Dieser Parameter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kann jedoch ge√§ndert werden</a> .  Selbst wenn Sie zulassen, dass Container als Root ausgef√ºhrt werden, sch√ºtzt die Standard-SELinux-Konfiguration in OpenShift dennoch vor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2019-5736</a> .  Dies ist eine weitere Schutzstufe, die sich in dieser Situation wirklich auszahlt und bei weitem nicht die einzige in OpenShift ist.  Weitere Informationen finden Sie in Dokument <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">10 Sicherheitsstufen f√ºr Container</a> . <br><br>  Weitere Informationen zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CVE-2019-5736</a> , einschlie√ülich des Red Hat Enterprise Linux-Patches f√ºr die Container-Laufzeit, finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√úberpr√ºfung</a> der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Red Hat-Sicherheitsanf√§lligkeit</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de443426/">https://habr.com/ru/post/de443426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de443414/index.html">Wegweiser: Wenn Haltepunkte nicht ausreichen</a></li>
<li><a href="../de443416/index.html">Winnti: ein Angriff auf Lieferketten - asiatische Spieleentwickler stehen an vorderster Front</a></li>
<li><a href="../de443418/index.html">Software-Testmethoden</a></li>
<li><a href="../de443422/index.html">Flexible Datenspeicherung in MySQL (JSON)</a></li>
<li><a href="../de443424/index.html">Umschreiben des Testfalls f√ºr das Junior-Frontend auf TypeScript und React-Hooks</a></li>
<li><a href="../de443428/index.html">Palmer Lucky, der "Vater" von Oculus Rift, entwickelt ein virtuelles Schlachtfeldsystem f√ºr das Pentagon</a></li>
<li><a href="../de443430/index.html">Warum ist es schlecht, wenn das Internet alles √ºber Sie wei√ü?</a></li>
<li><a href="../de443432/index.html">Blazor 0.9.0 ver√∂ffentlicht</a></li>
<li><a href="../de443434/index.html">Benachrichtigungen: Ma√ünahmen zur Gewinnmitnahme / Stop-Loss erforderlich. Falls Ihr Broker diese Bestellungen nicht unterst√ºtzt</a></li>
<li><a href="../de443436/index.html">Wo kann man √ºber Apache Ignite, verteilte Datenbanken und verteiltes maschinelles Lernen im Fr√ºhjahr sprechen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>