<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😞 👇🏻 🔀 我们在一个处理器上制造路由器和NAS 🌏 🔥 👵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文有续篇 。 


 买电脑后短短几年，我就在Linux上获得了“家庭服务器”。 现在，从那一刻起已经过去了十五年，大部分时间我在家中都拥有第二台额外的计算机。 有一次，当需要更新它时，我想：如果我已经有一台免费计算机，为什么还需要一个单独的路由器？ 毕竟，对于很多人来说，很长一段时间都是零，这是...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们在一个处理器上制造路由器和NAS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477810/"><p> 本文有<a href="https://habr.com/ru/post/478924/">续篇</a> 。 </p><br><p> 买电脑后短短几年，我就在Linux上获得了“家庭服务器”。 现在，从那一刻起已经过去了十五年，大部分时间我在家中都拥有第二台额外的计算机。 有一次，当需要更新它时，我想：如果我已经有一台免费计算机，为什么还需要一个单独的路由器？ 毕竟，对于很多人来说，很长一段时间都是零，这是标准配置。 </p><br><p> 确实：今天，您可以获得一个单独的虚拟机，将USB或PCI Wi-Fi卡转发到该虚拟机。 作为操作系统，您可以一口气使用MikroTik RouterOS，而无需花费多少钱即可获得企业级软件。 </p><a name="habracut"></a><br><h3 id="vstuplenie"> 参赛作品 </h3><br><p> 在我刚开始该项目时，我将概述我的目标： </p><br><ol><li> 组件应包含最常见的标准组件。 这意味着，除了mATX / mini-ITX以外，没有其他大小的主板，并且没有适合全尺寸卡的小型机箱 </li><li> 应该有很多磁盘空间，但存储篮本身在2.5英寸以下 </li><li> 模块化会在一段时间后带来节省-毕竟，旧标准5的Wi-Fi卡可以简单地更改为7 </li><li> 支持至少一些遥控器，这样您就可以理解为什么系统不启动，而无需将显示器和键盘物理连接到高高耸立的物体上 </li><li> 完全自由地选择操作系统及其对任何操作系统中所有关键组件的支持 </li><li> 高性能 厌倦了等待Deluge将.torrent“激活”成数千个文件或打开加密功能，这导致磁盘或网络连接下方的速度下降。 </li><li> 视觉美感和组装精度 </li><li> 最高的紧凑度。 理想的尺寸是现代游戏机。 </li></ol><br><p> 我会立即警告您，如果您认为在下面的文章中我会告诉您如何完成所有要点，那么您会很幼稚，最好购买Synology或在云计算中占有一席之地。 <br> 实际上，我认为这样的决定不会有任何不切实际的地方，只是我可能没有充分研究整个产品的报价，也许是因为自组装NAS的市场长期以来一直在下降，并且用于此目的的组件越来越小，越来越便宜。 </p><br><h3 id="nemnogo-o-softe"> 关于软件的一点 </h3><br><p> 最近，我变得非常懒惰，甚至不想自己配置KVM，所以我决定尝试看看什么是unRAID，LinusTechTips宣传了它，它不仅是用于配置KVM的便捷GUI，而且还是一般用于NAS的优质软件。 由于我懒得跟mdadm闲逛-unRAID用一块石头杀死了两只鸟。 </p><br><h3 id="sborka"> 组装方式 </h3><br><h4 id="korpus"> 房屋 </h4><br><p> 令人惊讶的是，接下来出现了在标准组件上组装临时NAS的最困难的部分：选择一个盒子！ 就像我说过的，带门的箱子，后面有装有磁盘的篮子的时代早已一去不复返了。 而且我仍然非常想使用2.5英寸希捷（2.5“）驱动器作为磁盘（在编写本文时，最大容量为5TB）。 他们保持沉默，占用的空间很小。 虽然5TB对我来说足够了。 </p><br><p> 显然，主板需要miniITX，因为似乎一个扩展插槽就足够了。 </p><br><p> 事实证明，有紧凑的外壳，只有上网本的大小，但只有2.5个和“其他”外壳的地方，那里已经有几个合适大小的3.5英寸。 中间根本不存在。 甚至为了钱。 阿里（Ali）上有东西，但是已经停产了（总是检查阿里（Ali）以寻找不寻常的东西，有时中国人已经发明了一切并投入批量生产）。 在一些小型论坛上，我读到了有关SilverStone CS01B-HS的信息，但价格根本不属于预算类别。 厌倦了搜索，我通过Shipito在亚马逊上订购了它，这完全使技术任务的第三点失败了。 </p><br><p> 但是现在您完全不必担心预算！ </p><br><p> 我建议您立即制作Dream外壳的3D模型，并在真正的铝制CNC机床上打开它。 它会比银石贵一点，但是令人愉悦的一千倍。 稍后在github上分享吧！ </p><br><h4 id="processor"> 中央处理器 </h4><br><p> 当然，我想将AMD用作处理器，到了2019年，只有那些不深入研究shtud的人。 但是，尝试实现第4点“对远程控制的支持”时，我发现AMD只有Ryzen DASH，并且了解在这种情况下，您需要选择Intel。 </p><br><p> 此外，一切都一如既往：Yandex.Market，过滤器，针对儿童问题的简易搜索以及明天在MKAD内免费送货。 </p><br><h4 id="matplata"> 主机板 </h4><br><p> 实际上，从主板中可以选择一种-技嘉GA-Q170TN。 </p><br><p> 我不知道为什么扩展插槽只有x4，但是如果将来您想在其中放置10 GB的网卡，则将有足够的库存（但是您将无法连接提供这种性能的存储）。 </p><br><p> 最大的优点是：两个miniPCI-E插槽。  MikroTik将以miniPCI-E格式发布其所有Wi-Fi卡（我们需要它们，因为它们仅在RouterOS中受支持），并且很可能将发布更多年，因为这是扩展卡的主要标准。 例如，您可以购买其<a href="https://mikrotik.com/product/r11e_lora8" rel="nofollow">LoRaWAN</a>模块，并轻松获得支持LoRa设备的支持。 </p><br><p> 两个以太网，但1 Gbps。 我在2017年提出了一项法律，禁止销售以太网速度高达4 Gbps的主板，但是没有设法收集所需数量的签名以通过市政过滤器。 </p><br><h4 id="diski"> 磁碟 </h4><br><p> 我们以两个STDR5000200作为磁盘。 由于某种原因，它们的价格要比实际的ST5000LM000低。 购买后，我们进行检查，拆卸，获取ST5000LM000并通过SATA连接。 如果是保修，您可以将其收集起来并交还，以换取新的光盘（我不是在开玩笑，我做到了）。 </p><br><p> 如有必要，也许将来我不会使用NVMe SSD。 </p><br><p> 英特尔一向秉承传统：主板没有足够的支持，处理器也需要vPro支持，您会厌倦寻找兼容性表。 通过一个奇迹，我发现我至少需要i5-7500。 但是由于预算不再受限制，我和解了。 </p><br><p> 我看不到其余组件中有什么有趣的东西，可以用任何类似的东西代替它们，因此这是购买时价格的总表： </p><br><div class="scrollable-table"><table><thead><tr><th> 名称 </th><th> 数量 </th><th> 价钱 </th><th> 费用 </th></tr></thead><tbody><tr><td> 至关重要的DDR4 SO-DIMM 2400MHz PC4-19200 CL17-4Gb CT4G4SFS624A </td><td>  2 </td><td>  1259 </td><td>  2,518 </td></tr><tr><td> 希捷STDR5000200 </td><td>  2 </td><td>  8330 </td><td>  16660 </td></tr><tr><td> 银欣CS01B-HS </td><td>  1个 </td><td>  $ 159 + $ 17（从亚马逊发货）+ $ 80（从俄罗斯发货）= $ 256 </td><td>  16,830 </td></tr><tr><td> 控制器PCI-E Espada FG-EST14A-1-BU01 </td><td>  1个 </td><td>  2850 </td><td>  2850 </td></tr><tr><td> 电源设备SFX 300 W安静SFX POWER 2 BN226 </td><td>  1个 </td><td>  4160 </td><td>  4160 </td></tr><tr><td> 金士顿SSD 240GB SUV500MS / 240G {mSATA} </td><td>  1个 </td><td>  2,770 </td><td>  2,770 </td></tr><tr><td> 英特尔酷睿i5-7500 </td><td>  1个 </td><td>  10,000 </td><td>  10,000 </td></tr><tr><td> 技嘉GA-Q170TN </td><td>  1个 </td><td>  9720 </td><td>  9720 </td></tr><tr><td>  MikroTik R11e-5HacT </td><td>  1个 </td><td>  3,588 </td><td>  3,588 </td></tr><tr><td> 天线类 </td><td>  3 </td><td>  358 </td><td>  1,074 </td></tr><tr><td>  RouterOS 4级许可证 </td><td>  1个 </td><td>  $ 45 </td><td>  2925 </td></tr><tr><td>  UnRAID基本许可证 </td><td>  1个 </td><td>  $ 59 </td><td>  3835 </td></tr></tbody></table></div><br><p> 总计66930卢布。 关于问题的经济部分的第三点已经破灭，但是这种铁将在十年内仍然能够执行所分配任务的想法使人们深深地陶醉了。 </p><br><p> 设置软件非常容易，很好，他拥有它：一个晚上可以用鼠标单击95％。 如果有趣的话，我可以在另一篇文章中进行描述，因为并非所有内容都很完美，但没有解决非Google的问题。 例如，要在RouterOS中摆脱有线以太网适配器并不是一件容易的事，因为它所支持的设备列表很少。 </p><br><h3 id="vyvody-posle-prohozhdeniya-granicy-v-sto-dney-uptime"> 跨越一百天正常运行时间后的结论 </h3><br><ol><li> 为此，不需要vPro。 这大大减少了主板和处理器的选择，对于家庭使用，您将需要无线HDMI延长线和无线键盘。 在极端情况下（服务器位于钢筋混凝土板下的地下室）-使用双绞线延长电缆。 </li><li> 昨天需要10吉比特。 从2010年代开始，平均硬盘驱动器的读取速度超过了每秒120兆字节，而千兆位网络还不够。 并且我们将放置SSD缓存，对此可能会限制1.25 GB / s。 </li><li> 该团占了预算的四分之一。 这是不可接受的。 </li><li>  NAS /路由器中的快速处理器-比起最初看来更需要 </li><li>  unRAID确实是一个很好的软件，它有所有需要的东西，而没有任何不需要的东西。 如果您需要更多的磁盘，则只需支付一次-它们只要求许可费用的差额。 </li></ol><br><p> 我以前的交流是在启用VPN隧道加密的情况下发出大约20兆比特的数据。 现在，只有一个i5-7500核心足以满足要求。 </p><br><img src="https://habrastorage.org/webt/m1/i-/kb/m1i-kbxxfxmtko2p9bec5neooaq.png"><br><h3 id="ps"> 聚苯乙烯 </h3><br><p> 如果您读到最后，我感到非常高兴，这对您很有趣！ 请问问题是否仍然不清楚。 我可能已经完全忘记了。 </p><br><p> 我将立即回答显而易见的问题： </p><br><p>  <strong>-为什么所有这些，您都可以购买Synology？</strong> <br>  “是的，我建议您这样做。” 它更简单，更快，更便宜，更可靠。 面向发烧友的文章，他们知道为什么需要附加功能。 </p><br><p>  <strong>-为什么不提供FreeNAS，unRAID中是否包含所有免费内容？</strong> <br>  -open，开源已经完全不同了。  FreeNAS由完全相同的薪资程序员编写。 如果您免费获得他们的劳力，那么最终的产品就是您。 否则他们将很快停止向投资者付款。 </p><br><p>  <strong>-您可以在纯Linux上做所有事情并节省更多！</strong> <br>  -是的 一旦我做到了。 但是为什么呢？ 对我来说，在Linux上建立网络一直是一个问题。 让那仍然是计算机管理员。  RouterOS完全解决了此类问题。  MD RAID也是如此：尽管mdadm不允许您犯一些愚蠢的错误，但我仍然丢失了数据。 而且unRAID只是不允许您按错按钮。 同样，您不应该浪费时间手动配置存储库。 </p><br><p>  <strong>-但是您仍然在虚拟机中安装了常用的ubuntu！</strong> <br>  -为此，一切都开始了。 现在，您可以以最快的速度同时拥有您的个人AWS，这是无人能及的，同时可以连接到您的存储，家庭网络和Internet。 在此虚拟机中运行什么服务由您决定。 </p><br><p>  <strong>-房屋中的任何问题都将立即消失，没有Wi-Fi，互联网，存储空间。</strong> <br>  -备用路由器的价格为1000卢布，驱动器将没有任何东西。 一直以来，除了磁盘和冷却器外，什么都没有发生。 甚至普通的nettop都已经24/7工作了近十年，现在感觉很好。 存活了两个磁盘。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN477810/">https://habr.com/ru/post/zh-CN477810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN477792/index.html">您的个人资料何时获胜</a></li>
<li><a href="../zh-CN477800/index.html">Chrome Web Dev Summit 2019 Web开发论坛的要点</a></li>
<li><a href="../zh-CN477802/index.html">电子设备的外壳：如何在中国设计和制造它</a></li>
<li><a href="../zh-CN477804/index.html">自然智慧之路</a></li>
<li><a href="../zh-CN477808/index.html">进入终端服务器时，我们摆脱了烦人的警告</a></li>
<li><a href="../zh-CN477812/index.html">审查俄罗斯立法以保护关键信息基础架构</a></li>
<li><a href="../zh-CN477814/index.html">Mac下是否有任何病毒？</a></li>
<li><a href="../zh-CN477816/index.html">如何找到一份好的合同工作</a></li>
<li><a href="../zh-CN477818/index.html">如何在2019年成为数据科学家</a></li>
<li><a href="../zh-CN477820/index.html">VMware，Hyper-V，OpenStack，Kubernetes，Swarm-从Quest Foglight中的单个界面进行监视</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>