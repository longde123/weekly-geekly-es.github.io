<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↘️ 👨🏼‍🚒 🍶 使用Vue渲染功能的实际示例：为设计系统创建印刷网格 🧒🏾 🤶🏾 👨‍👨‍👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在我们今天发布的翻译材料中，我们将讨论如何使用Vue渲染功能为设计系统创建打印网格。 这是项目的演示，我们将在这里进行审查。 您可以在此处找到其代码。 该材料的作者说他之所以使用渲染功能，是因为与常规的Vue模板相比，它们可以更精确地控制创建HTML代码的过程。 但是，令他惊讶的是，他找不到实际应用...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>使用Vue渲染功能的实际示例：为设计系统创建印刷网格</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/458494/"> 在我们今天发布的翻译材料中，我们将讨论如何使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Vue渲染功能</a>为设计系统创建打印网格。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是</a>项目<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>演示，我们将在这里进行审查。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">您</a>可以在此处找到其代码。 该材料的作者说他之所以使用渲染功能，是因为与常规的Vue模板相比，它们可以更精确地控制创建HTML代码的过程。 但是，令他惊讶的是，他找不到实际应用的实例。 他只遇到了使用说明书。 他希望通过使用Vue渲染功能的实际示例，使这种材料能够更好地发挥作用。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0f/p7/fe/0fp7feua0qplioin-gmhhhdzhj4.png"></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Vue渲染功能</font> </h2><br> 在我看来，渲染功能始终对Vue来说有点不寻常。 此框架中的所有内容都强调了对简单性和各个实体职责分离的渴望。 但是渲染功能是HTML和JavaScript的奇怪结合，通常很难阅读。 <br><br> 例如，这是HTML标记： <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-awesome-class"</span></span></span><span class="hljs-tag">&gt;</span></span>Some cool text<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 要形成它，您需要以下功能： <br><br><pre> <code class="javascript hljs">render(createElement) {  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createElement(<span class="hljs-string"><span class="hljs-string">"div"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">"container"</span></span> }, [    createElement(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">"my-awesome-class"</span></span> }, <span class="hljs-string"><span class="hljs-string">"Some cool text"</span></span>)  ]) }</code> </pre> <br> 我怀疑这样的构造会使许多人立即放弃渲染功能。 毕竟，易用性正是吸引开发人员使用Vue的原因。 如果许多人没有看到渲染功能难看的外观背后的真实价值，这是一个遗憾。 问题是渲染功能和功能组件是有趣且功能强大的工具。 为了证明他们的能力和真正的价值，我将谈论他们如何帮助我解决实际问题。 <br><br> 请注意，在相邻的浏览器选项卡中打开正在考虑的项目的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">演示版本，</a>并在阅读文章时对其进行访问将非常有用。 <br><br><h2>  <font color="#3AC1EF">定义设计系统的标准</font> </h2><br> 我们有一个基于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">VuePress</a>的设计系统。 我们需要在其中添加一个新页面，以演示文本设计的各种印刷可能性。 这就是设计师给我的布局外观。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/875/825/981/87582598175ae5ed7c7c59464d2511d5.png"></div><br>  <i><font color="#999999">页面布局</font></i> <br><br> 以下是与此页面对应的CSS代码的示例： <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">h2</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">h3</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">h4</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">h5</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">h6</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">"balboa"</span></span>, sans-serif;  <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span>;  <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">h4</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(1rem - 2px); } <span class="hljs-selector-class"><span class="hljs-selector-class">.body-text</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">"proxima-nova"</span></span>, sans-serif; } <span class="hljs-selector-class"><span class="hljs-selector-class">.body-text--lg</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(1rem + 4px); } <span class="hljs-selector-class"><span class="hljs-selector-class">.body-text--md</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1rem</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.body-text--bold</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: <span class="hljs-number"><span class="hljs-number">700</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.body-text--semibold</span></span> {  <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: <span class="hljs-number"><span class="hljs-number">600</span></span>; }</code> </pre> <br> 标头是根据标签名称格式化的。 要格式化其他元素，请使用类名称。 此外，还有用于丰富性和字体大小的单独类。 <br><br> 在开始编写代码之前，我制定了一些规则： <br><br><ul><li> 由于此页面的主要目的是数据可视化，因此数据应存储在单独的文件中。 </li><li> 要格式化标题，应使用语义标头标记（即<code>&lt;h1&gt;</code> ， <code>&lt;h2&gt;</code>等），其格式不应基于该类。 </li><li> 在页面的正文中应使用带有类名（例如， <code>&lt;p class="body-text--lg"&gt;</code> ）的段落标签（ <code>&lt;p&gt;</code> ）。 </li><li> 由各种元素组成的材料应通过将它们包装在根<code>&lt;p&gt;</code>中或未分配样式化类的另一个合适的根元素中进行分组。 子元素必须包装在<code>&lt;span&gt;</code> ，该<code>&lt;span&gt;</code>用于设置类名称。 这条规则可能是这样的： <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text--lg"</span></span></span><span class="hljs-tag">&gt;</span></span>Thing 1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text--lg"</span></span></span><span class="hljs-tag">&gt;</span></span>Thing 2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li> 没有特殊要求的输出材料应包装在<code>&lt;p&gt;</code> ，该<code>&lt;p&gt;</code>已分配了所需的类名称。 子元素必须包含在<code>&lt;span&gt;</code> ： <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Thing 1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Thing 2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li> 对于要样式化的每个样式化的单元格，类名只能被写入一次。 </li></ul><br><h2>  <font color="#3AC1EF">解决问题的选项</font> </h2><br> 在开始工作之前，我考虑了几种解决摆在我面前的任务的选项。 这是他们的概述。 <br><br><h3>  <font color="#3AC1EF">▍手动编写HTML代码</font> </h3><br> 我喜欢手动编写HTML代码，但前提是它可以让我们充分解决现有问题。 但是，在我的情况下，手动编写代码意味着要输入各种重复的代码片段，其中存在一些变化。 我不喜欢 此外，这意味着无法将数据存储在单独的文件中。 结果，我拒绝了这种方法。 <br><br> 如果我像这样创建有问题的页面，我将得到以下内容： <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Heading 1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>h1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>Balboa Light, 30px<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Product title (once on a page)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Illustration headline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">traditional使用传统的Vue模式</font> </h3><br> 在正常情况下，这种方法最常用。 但是，看看<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这个</a>例子。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fae/197/937/fae19793792f458183103178698df791.png"></div><br>  <i><font color="#999999">使用Vue模板的示例</font></i> <br><br> 在第一列中有以下内容： <br><br><ul><li>  <code>&lt;h1&gt;</code> ，以浏览器显示它的形式显示。 </li><li>  <code>&lt;p&gt;</code>将多个<code>&lt;span&gt;</code>子级与文本分组。 为这些元素中的每个元素分配了一个类（但没有为<code>&lt;p&gt;</code>标记本身分配任何特殊的类）。 </li><li>  <code>&lt;p&gt;</code> ，该<code>&lt;p&gt;</code>没有嵌套该类的<code>&lt;span&gt;</code>元素。 </li></ul><br> 要实现所有这些，将需要<code>v-if</code>和<code>v-if-else</code>指令的许多实例。 我知道，这将导致这样的事实，即代码很快就会变得非常混乱。 另外，我不喜欢在标记中使用所有这些条件逻辑。 <br><br><h3>  <font color="#3AC1EF">▍渲染功能</font> </h3><br> 结果，在分析了可能的替代方法之后，我选择了渲染函数。 在它们中，使用JavaScript，使用条件构造来创建其他节点的子节点。 创建这些子节点时，将考虑所有必要条件。 在这种情况下，这种解决方案对我来说似乎很完美。 <br><br><h2>  <font color="#3AC1EF">资料模型</font> </h2><br> 正如我所说，我想将印刷数据存储在一个单独的JSON文件中。 如有必要，这将允许在不更改标记的情况下对其进行更改。  <a href="">这些</a>是数据。 <br><br> 文件中的每个JSON对象都是单独一行的描述： <br><br><pre> <code class="json hljs">{  <span class="hljs-attr"><span class="hljs-attr">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"Heading 1"</span></span>,  <span class="hljs-attr"><span class="hljs-attr">"element"</span></span>: <span class="hljs-string"><span class="hljs-string">"h1"</span></span>, //  .  <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: <span class="hljs-string"><span class="hljs-string">"Balboa Light, 30px"</span></span>, //   .  <span class="hljs-attr"><span class="hljs-attr">"usage"</span></span>: [<span class="hljs-string"><span class="hljs-string">"Product title (once on a page)"</span></span>, <span class="hljs-string"><span class="hljs-string">"Illustration headline"</span></span>] //   .   -   . }</code> </pre> <br> 这是处理此对象后出现的HTML： <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Heading 1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>h1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>Balboa Light, 30px<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Product title (once on a page)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Illustration headline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 现在考虑一个更复杂的示例。 数组代表子组。  <code>classes</code>对象的属性本身就是对象，可以存储类描述。  <code>classes</code>对象的<code>base</code>属性包含对单元中所有节点通用的类的描述。  <code>variants</code>属性中存在的每个类都应用于组中的单个元素。 <br><br><pre> <code class="javascript hljs">{  <span class="hljs-string"><span class="hljs-string">"text"</span></span>: <span class="hljs-string"><span class="hljs-string">"Body Text - Large"</span></span>,  <span class="hljs-string"><span class="hljs-string">"element"</span></span>: <span class="hljs-string"><span class="hljs-string">"p"</span></span>,  <span class="hljs-string"><span class="hljs-string">"classes"</span></span>: {    <span class="hljs-string"><span class="hljs-string">"base"</span></span>: <span class="hljs-string"><span class="hljs-string">"body-text body-text--lg"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//     .    "variants": ["body-text--bold", "body-text--regular"] //    ,       .        .  },  "properties": "Proxima Nova Bold and Regular, 20px",  "usage": ["Large button title", "Form label", "Large modal text"] }</span></span></code> </pre> <br> 该对象变成以下HTML： <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-comment"><span class="hljs-comment">&lt;!--  1 --&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group"</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--lg body-text--bold"</span></span></span><span class="hljs-tag">&gt;</span></span>Body Text - Large<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--lg body-text--regular"</span></span></span><span class="hljs-tag">&gt;</span></span>Body Text - Large<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-comment"><span class="hljs-comment">&lt;!--  2 --&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>body-text body-text--lg body-text--bold<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>body-text body-text--lg body-text--regular<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-comment"><span class="hljs-comment">&lt;!--  3 --&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>Proxima Nova Bold and Regular, 20px<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-comment"><span class="hljs-comment">&lt;!--  4 --&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"group body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Large button title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Form label<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Large modal text<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">项目的基本结构</font> </h2><br> 我们有一个父组件<code>TypographyTable.vue</code> ，其中包含用于形成表格的标记。 我们还有一个子组件<code>TypographyRow.vue</code> ，它负责创建表行并包含我们的render函数。 <br><br> 形成表行时，将遍历带有数据的数组。 描述表行的对象作为属性传递给<code>TypographyRow</code>组件。 <br><br><pre> <code class="javascript hljs">&lt;template&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--         --&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--lg-bold heading"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Hierarchy</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--lg-bold heading"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Element/Class</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--lg-bold heading"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Properties</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">      </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--lg-bold heading"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Usage</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     </span><span class="hljs-comment"><span class="xml"><span class="hljs-comment">&lt;!--             --&gt;</span></span></span><span class="xml">    </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">typography-row</span></span></span></span><span class="xml"><span class="hljs-tag">      </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">v-for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"(rowData, index) in $options.typographyData"</span></span></span></span><span class="xml"><span class="hljs-tag">      </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:key</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"index"</span></span></span></span><span class="xml"><span class="hljs-tag">      </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:row-data</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"rowData"</span></span></span></span><span class="xml"><span class="hljs-tag">    /&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">section</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">template</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TypographyData <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"@/data/typography.json"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> TypographyRow <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./TypographyRow"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> {  <span class="hljs-comment"><span class="hljs-comment">//     ,        typographyData: TypographyData,  name: "TypographyTable",  components: {    TypographyRow }; &lt;/script&gt;</span></span></code> </pre> <br> 在这里，我要指出一个令人愉快的地方：Vue实例中的印刷数据可以表示为属性。 您可以使用<code>$options.typographyData</code>构造访问它们，因为它们不会更改并且不应是被动的（感谢<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Anton Kosykh</a> ）。 <br><br><h2>  <font color="#3AC1EF">创建功能组件</font> </h2><br> 处理数据的<code>TypographyRow</code>组件是功能组件。 功能组件是没有状态和实例的实体。 这意味着他们没有<code>this</code> ，并且他们无权访问Vue组件生命周期方法。 <br><br> 这是相似组件的“骨架”，我们将开始使用该组件进行工作： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  &lt;template&gt; &lt;script&gt; export default {  name: "TypographyRow",  functional: true, //       props: {    rowData: { //          type: Object     },  render(createElement, { props }) {    //    } &lt;/script&gt;</span></span></code> </pre> <br>  <code>render</code>组件方法采用具有<code>props</code>属性的<code>context</code>参数。 此属性可以进行解构，并用作第二个参数。 <br><br> 第一个参数是<code>createElement</code> 。 这是一个告诉Vue创建节点的功能。 为了代码的简洁和标准化，我使用<code>createElement</code>的简写形式。 您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a>阅读有关我为什么这样做的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">信息</a> 。 <br><br> 因此， <code>h</code>需要三个参数： <br><br><ol><li>  HTML标记（例如<code>div</code> ）。 </li><li> 包含模板属性的数据对象（例如<code>{ class: 'something'}</code> ）。 </li><li> 文本字符串（如果我们仅添加文本）或使用<code>h</code>创建的子节点。 </li></ol><br> 看起来是这样的： <br><br><pre> <code class="plaintext hljs">render(h, { props }) {  return h("div", { class: "example-class" }, "Here's my example text") }</code> </pre> <br> 让我们总结一下我们已经创建的内容。 即，我们现在有以下内容： <br><br><ol><li> 文件，该文件包含计划在页面结构中使用的数据。 </li><li> 导入数据文件的常规Vue组件。 </li><li> 负责显示表中各行的功能组件的框架。 </li></ol><br> 要创建表行，必须将JSON格式的数据作为参数传递给<code>h</code> 。 您可以一次性传输所有此类数据，但是使用这种方法，您将需要大量的条件逻辑，这将降低代码的可理解性。 相反，我决定这样做： <br><br><ol><li> 将数据转换为标准格式。 </li><li> 显示转换后的数据。 </li></ol><br><h2>  <font color="#3AC1EF">数据转换</font> </h2><br> 我希望以与<code>h</code>接受的参数匹配的格式显示数据。 但是在转换它们之前，我计划了它们在JSON文件中应具有的结构： <br><br><pre> <code class="json hljs">//   {  tag: <span class="hljs-string"><span class="hljs-string">""</span></span>, // HTML-    cellClass: <span class="hljs-string"><span class="hljs-string">""</span></span>, //   .       -   null  text: <span class="hljs-string"><span class="hljs-string">""</span></span>, // ,     children: [] //   ,     .     ,    . }</code> </pre> <br> 每个对象代表表的一个单元格。 表格的每一行由四个单元格组成（它们收集在一个数组中）： <br><br><pre> <code class="plaintext hljs">//   [ { cell1 }, { cell2 }, { cell3 }, { cell4 } ]</code> </pre> <br> 输入点可能是如下函数： <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      ,         let { text, element, classes = null, properties, usage } = data;  let row = [];  row[0] = createCellData(data) //         row[1] = createCellData(data)  row[2] = createCellData(data)  row[3] = createCellData(data)  return row; }</span></span></code> </pre> <br> 让我们再次看一下布局。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/875/825/981/87582598175ae5ed7c7c59464d2511d5.png"></div><br>  <i><font color="#999999">页面布局</font></i> <br><br> 您可以在第一列中看到元素的样式不同。 在其余的列中，使用相同的格式。 因此，让我们从此开始。 <br> 让我提醒您，我想使用以下JSON结构作为描述每个单元格的模型： <br><br><pre> <code class="json hljs">{  tag: <span class="hljs-string"><span class="hljs-string">""</span></span>,  cellClass: <span class="hljs-string"><span class="hljs-string">""</span></span>,  text: <span class="hljs-string"><span class="hljs-string">""</span></span>,  children: [] }</code> </pre> <br> 通过这种方法，树状结构将用于描述每个单元。 正是因为某些单元格包含子组。 我们使用以下两个函数来创建单元格： <br><br><ul><li>  <code>createNode</code>函数将我们感兴趣的每个属性用作参数。 </li><li>  <code>createCell</code>函数充当<code>createNode</code>的包装器，借助它的帮助，我们可以检查参数<code>text</code>数组。 如果是这样，我们将创建一系列子代。 </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    function createCellData(tag, text) {  let children;  //  ,         const nodeClass = "body-text body-text--md body-text--semibold";  //   text   -   ,    span.  if (Array.isArray(text)) {    children = text.map(child =&gt; createNode("span", null, child, children));   return createNode(tag, nodeClass, text, children); } //    function createNode(tag, nodeClass, text, children = []) {  return {    tag: tag,    cellClass: nodeClass,    text: children.length ? null : text,    children: children  }; }</span></span></code> </pre> <br> 现在我们可以做这样的事情： <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { text, element, classes = <span class="hljs-literal"><span class="hljs-literal">null</span></span>, properties, usage } = data;  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> row = [];  row[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">""</span></span>  row[<span class="hljs-number"><span class="hljs-number">1</span></span>] = createCellData(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, ?????) <span class="hljs-comment"><span class="hljs-comment">//         row[2] = createCellData("p", properties) //    row[3] = createCellData("p", usage) //    return row; }</span></span></code> </pre> <br> 在形成第三和第四列时，我们将<code>properties</code>和<code>usage</code>作为文本参数传递。 但是，第二列不同于第三列和第四列。 在这里，我们显示类的名称，这些名称在源数据中以这种形式存储： <br><br><pre> <code class="plaintext hljs">"classes": {  "base": "body-text body-text--lg",  "variants": ["body-text--bold", "body-text--regular"] },</code> </pre> <br> 另外，我们不要忘记在使用标头时不使用类。 因此，我们需要为相应的行（例如<code>h1</code> ， <code>h2</code>等）创建标题标签名称。 <br><br> 我们创建辅助功能，使我们能够将此数据转换为便于将其用作<code>text</code>参数的格式。 <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//          function displayClasses(element, classes) {  //   ,     (   )  return getClasses(classes) ? getClasses(classes) : element; } //       (    )     (   ),   null (  ,   ) // : "body-text body-text--sm" or ["body-text body-text--sm body-text--bold", "body-text body-text--sm body-text--italic"] function getClasses(classes) {  if (classes) {    const { base, variants = null } = classes;    if (variants) {      //             return variants.map(variant =&gt; base.concat(`${variant}`));       return base;   return classes; }</span></span></code> </pre> <br> 现在，我们可以执行以下操作： <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { text, element, classes = <span class="hljs-literal"><span class="hljs-literal">null</span></span>, properties, usage } = data;  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> row = [];  row[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">""</span></span>  row[<span class="hljs-number"><span class="hljs-number">1</span></span>] = createCellData(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, displayClasses(element, classes)) <span class="hljs-comment"><span class="hljs-comment">//    row[2] = createCellData("p", properties) //    row[3] = createCellData("p", usage) //    return row; }</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">用于演示样式的数据转换</font> </h2><br> 我们需要决定如何处理表格的第一列，以显示样式应用程序的示例。 此列与其他列不同。 在这里，我们将新的标记和类应用于每个单元，而不是使用其余列使用的类的组合： <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body-text body-text--md body-text--semibold"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> 我建议<code>createCellData</code>创建一个新功能，以利用这些执行数据转换的基本功能的功能，而不是尝试在<code>createCellData</code>或<code>createNodeData</code>实现此功能。 它将实现新的数据处理机制： <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDemoCellData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> children;  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> classes = getClasses(data.classes);  <span class="hljs-comment"><span class="hljs-comment">//   ,       ,               if (Array.isArray(classes)) {    children = classes.map(child =&gt;      //    "data.text"      ,   ,            createNode("span", child, data.text, children)    );   //   ,       if (typeof classes === "string") {    return createNode("p", classes, data.text, children);   //  ,    ( )  return createNode(data.element, null, data.text, children); }</span></span></code> </pre> <br> 现在，字符串数据被简化为规范化格式，并且可以传递给render函数： <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createRow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { text, element, classes = <span class="hljs-literal"><span class="hljs-literal">null</span></span>, properties, usage } = data  <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> row = []  row[<span class="hljs-number"><span class="hljs-number">0</span></span>] = createDemoCellData(data)  row[<span class="hljs-number"><span class="hljs-number">1</span></span>] = createCellData(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, displayClasses(element, classes))  row[<span class="hljs-number"><span class="hljs-number">2</span></span>] = createCellData(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, properties)  row[<span class="hljs-number"><span class="hljs-number">3</span></span>] = createCellData(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, usage)  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> row }</code> </pre> <br><h2>  <font color="#3AC1EF">数据渲染</font> </h2><br> 以下是呈现页面上显示的数据的方法： <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,    "props" const rowData = props.rowData; //   ,     const row = createRow(rowData); //    "div"     return h("div", { class: "row" }, row.map(cell =&gt; renderCells(cell))); //    function renderCells(data) {  //  ,      if (data.children.length) {    return renderCell(      data.tag, //          { //            class: {          group: true, //    ""               [data.cellClass]: data.cellClass //      ,                  },      //        data.children.map(child =&gt; {        return renderCell(          child.tag,          { class: child.cellClass },          child.text        );      })    );   //     -     return renderCell(data.tag, { class: data.cellClass }, data.text); } // -  "h"     function renderCell(tag, classArgs, text) {  return h(tag, classArgs, text); }</span></span></code> </pre> <br> 现在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一切就绪</a> ！  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">还是这里</a>的源代码。 <br><br><h2>  <font color="#3AC1EF">总结</font> </h2><br> 值得一提的是，这里考虑的方法是解决一个相当琐碎的问题的实验方法。 我敢肯定，很多人会说这种解决方案是不合理的复杂，并且由于工程过剩而过载。 也许我会同意这一点。 <br><br> 尽管该项目的开发花费了很多时间，但现在数据与演示完全分开了。 现在，如果我们的设计师进来在表中添加一些行，或从表中删除任何现有的行，那么我就不必弄乱<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">令人困惑的</a> HTML代码。 为此，对于我来说更改JSON文件中的几个属性就足够了。 <br><br> 结果值得付出努力吗？ 我认为有必要看一下情况。 但是，这是编程的特征。 我想说的是，在我从事这个项目的过程中，以下图片不断出现。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbc/f57/0d8/dbcf570d8838f9f73c7c03fdec311712.png"></div><br> 也许这是我关于这个项目是否值得花在其开发上的努力的答案。 <br><br>  <b>亲爱的读者们！</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以对此处讨论的项目表达什么想法和建议？</font><font style="vertical-align: inherit;">您以什么方式解决了此类问题？</font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/b4/fn/f5/b4fnf52x9i3mn80tttdafqtvkfe.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458494/">https://habr.com/ru/post/zh-CN458494/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458482/index.html">第3部分：几乎将Linux从SD卡加载到RocketChip</a></li>
<li><a href="../zh-CN458486/index.html">在Alan Wake游戏中使用布料的秘密</a></li>
<li><a href="../zh-CN458488/index.html">数据科学文摘（2019年7月）</a></li>
<li><a href="../zh-CN458490/index.html">紧紧抓住方向盘...我们的项目可以监控驾驶员的状况</a></li>
<li><a href="../zh-CN458492/index.html">“我们始终相信竞争和选择用户的权利”©Yandex</a></li>
<li><a href="../zh-CN458496/index.html">开发大型React应用程序的实用指南。 计划，操作，数据源和API</a></li>
<li><a href="../zh-CN458498/index.html">开发大型React应用程序的实用指南。 第2部分：状态管理，路由</a></li>
<li><a href="../zh-CN458500/index.html">测试redux-saga的变态</a></li>
<li><a href="../zh-CN458502/index.html">开发良好的电子应用程序的主要秘诀</a></li>
<li><a href="../zh-CN458504/index.html">节省时间的13个npm技巧</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>