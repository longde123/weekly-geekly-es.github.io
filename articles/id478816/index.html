<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🎨 🚤 🏏 Menguji aplikasi android menggunakan selenoid. Cari lokasi di aplikasi seluler menggunakan Appium 👨‍🍳 💍 🧛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya dari Luxoft. 
 Kata pengantar dari pos : 


 Selenoid adalah program yang memungkinkan Anda untuk mengontrol browser dan emulator Android menggun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menguji aplikasi android menggunakan selenoid. Cari lokasi di aplikasi seluler menggunakan Appium</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478816/"><p>  Saya dari Luxoft. <br>  Kata pengantar dari <a href="https://habr.com/ru/post/463525/">pos</a> : </p><br><p>  <a href="https://github.com/aerokube/selenoid" rel="nofollow">Selenoid</a> adalah program yang memungkinkan Anda untuk mengontrol browser dan <a href="https://hub.docker.com/r/selenoid/android" rel="nofollow">emulator Android</a> menggunakan driver khusus.  Mampu menjalankan masing-masing secara terpisah dalam wadah Docker. </p><br><p> Ide utama Selenoid adalah meluncurkan wadah baru untuk setiap sesi (meluncurkan browser atau emulator baru) dan menghentikannya segera setelah menutup sesi. </p><br><p>  <a href="https://github.com/aerokube/selenoid" rel="nofollow">Selenoid</a> memungkinkan <a href="https://github.com/aerokube/selenoid" rel="nofollow">Anda</a> mempertahankan beban tinggi tanpa biaya sumber daya tambahan. </p><br><p>  Posting ini akan meluncurkan tes sederhana di <a href="https://hub.docker.com/r/selenoid/android" rel="nofollow">emulator Android</a> . </p><a name="habracut"></a><br><h3 id="podgotovka">  Persiapan </h3><br><p>  Periksa dulu apakah sistem Anda dapat menjalankan mesin virtual. </p><br><p>  Virtualisasi perangkat keras harus didukung oleh prosesor Anda.  Ini berarti bahwa ekstensi prosesor IntelVT atau AMDV diperlukan.  Untuk memverifikasi bahwa prosesor mendukung salah satunya, jalankan perintah: </p><br><pre><code class="bash hljs">egrep <span class="hljs-string"><span class="hljs-string">'(vmx|svm)'</span></span> /proc/cpuinfo</code> </pre> <br><h3 id="docker">  Docker </h3><br><p>  Docker harus diinstal dan dijalankan pada sistem operasi Anda. </p><br><h3 id="ustanovka-selenoid">  Instal Selenoid </h3><br><p>  Jika Anda memiliki sistem operasi berbasis Redhat, Anda dapat menggunakan repositori saya untuk menginstal <a href="https://github.com/aerokube/cm" rel="nofollow">manajer Konfigurasi</a> . </p><br><pre> <code class="bash hljs">yum -y install yum-plugin-copr yum copr <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> antonpatsev/aerokube-cm-rpm yum -y install aerokube-cm</code> </pre> <br><p>  Jika Anda tidak memiliki sistem operasi berbasis Redhat, maka Anda dapat <a href="https://github.com/aerokube/cm/releases" rel="nofollow">mengunduh</a> dan menggunakan biner <a href="https://github.com/aerokube/cm" rel="nofollow">manajer Konfigurasi</a> . </p><br><h3 id="zapusk-selenoid-ispolzuya-configuration-manager-i-formirovanie-browsersjson">  Menjalankan Selenoid menggunakan Configuration manager dan building browsers.json </h3><br><p>  Jika Anda tidak memiliki akses langsung ke Internet dan gambar buruh pelabuhan yang Anda unduh melalui registri: </p><br><pre> <code class="bash hljs">aerokube-cm selenoid start --force --browsers <span class="hljs-string"><span class="hljs-string">"android:6.0;chrome:78"</span></span> --args <span class="hljs-string"><span class="hljs-string">"-session-attempt-timeout 2m -service-startup-timeout 2m"</span></span> --registry -docker-registry</code> </pre> <br><p>  Jika Anda memiliki akses langsung ke Internet. </p><br><pre> <code class="bash hljs">aerokube-cm selenoid start --force --browsers <span class="hljs-string"><span class="hljs-string">"android:6.0;chrome:78"</span></span> --args <span class="hljs-string"><span class="hljs-string">"-session-attempt-timeout 2m -service-startup-timeout 2m"</span></span></code> </pre> <br><p>  Kunci <code>--args "-session-attempt-timeout 2m -service-startup-timeout 2m"</code> diperlukan jika Anda memiliki apk besar yang diinstal untuk waktu yang lama. </p><br><p>  <code>--force</code> menimpa file browsers.json </p><br><p>  Karena Selenoid Configuration manager belum tahu cara mengkonfigurasi browser.json untuk mobile Chrome, Anda harus memperbaikinya sendiri. </p><br><p>  Secara default, browsers.json dihasilkan di direktori ~ / .aerokube / selenoid. </p><br><p>  File browsers.json yang dihasilkan untuk menguji aplikasi Android dan Chrome di dalam emulator Android. </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"android"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"6.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"6.0"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"docker-registry:443/selenoid/android:6.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-string"><span class="hljs-string">"4444"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"/wd/hub"</span></span> } } }, <span class="hljs-attr"><span class="hljs-attr">"chrome"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"mobile-75.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"versions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"mobile-75.0"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"image"</span></span>: <span class="hljs-string"><span class="hljs-string">"docker-registry:443/selenoid/chrome-mobile:75.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>: <span class="hljs-string"><span class="hljs-string">"4444"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"/wd/hub"</span></span> } } } }</code> </pre> <br><p>  Sejauh ini, versi mobile chrome berada di belakang versi chrome biasa. <br>  Unduh gambar chrome ponsel </p><br><pre> <code class="bash hljs">docker pull selenoid/chrome-mobile:75.0</code> </pre> <br><h3 id="izmenenie-browsersjson">  Mengubah browsers.json </h3><br><p>  Saat mengubah file browsers.json, selenoid perlu dimuat ulang </p><br><pre> <code class="bash hljs">aerokube-cm selenoid stop</code> </pre> <br><pre> <code class="bash hljs">aerokube-cm selenoid start</code> </pre> <br><p>  Reload konfigurasi <br>  Anda dapat melakukan konfigurasi Reload.  Detail tentang tautan: <br>  <a href="https://aerokube.com/selenoid/latest/" rel="nofollow">https://aerokube.com/selenoid/latest/#_reloading_configuration</a> </p><br><p>  Pastikan wadah buruh pelabuhan sudah mulai dan gambar sudah diunduh. </p><br><pre> <code class="bash hljs">docker ps docker images</code> </pre> <br><p><img src="https://habrastorage.org/webt/6u/xe/4s/6uxe4sj8mr1whgda1ayt6pceoos.png"></p><br><h3 id="zapusk-selenoid-ui-ispolzuya-configuration-manager">  Menjalankan UI Selenoid menggunakan Manajer konfigurasi </h3><br><pre> <code class="bash hljs">aerokube-cm selenoid-ui start --registry https://docker-registry</code> </pre> <br><p>  Atau </p><br><pre> <code class="bash hljs">aerokube-cm selenoid-ui start</code> </pre> <br><p>  Pastikan wadah buruh pelabuhan sudah mulai dan gambar sudah diunduh. </p><br><pre> <code class="bash hljs">docker ps docker images</code> </pre> <br><p><img src="https://habrastorage.org/webt/-x/pd/cw/-xpdcwppkyiael9ly2agw0opgv4.png"></p><br><p>  Pergi ke selenoid-ui di ip-where-you-ran-selenoid-and-selenoid-ui: 8080 </p><br><p>  Anda harus memiliki 2 lampu TERHUBUNG hijau dan ditulis dalam android dan chrome. </p><br><p><img src="https://habrastorage.org/webt/no/ic/l8/noicl8rlt7_9tjmaihi2w3l1wia.png"></p><br><p>  Untuk mengakses Android dari sistem host, tambahkan baris berikut ke file / etc / hosts: </p><br><pre> <code class="bash hljs">ip-- hypervisor</code> </pre> <br><h3 id="demo-test">  Tes demo </h3><br><p>  Unduh <a href="https://github.com/aerokube/demo-tests" rel="nofollow">https://github.com/aerokube/demo-tests</a> </p><br><p>  Di ketiga file java, ubah jalur di RemoteWebDriver ke hypervisor (Anda perlu mengubah tangkapan layar). </p><br><p><img src="https://habrastorage.org/webt/i-/6v/3_/i-6v3_qo-z7gaxzdx5t_nsdxyrm.png"></p><br><p>  atau ke alamat lain tempat Anda memulai selenoid. </p><br><p>  Dalam file AndroidRemoteApkTest.java, ubah jalur tempat Anda dapat mengunduh APK. </p><br><pre> <code class="bash hljs">device.setCapability(<span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://ci.example.com/game2048.apk"</span></span>);</code> </pre> <br><p>  pada </p><br><p>  device.setCapability ("app", " <a href="http://xn-----apk-2nfcrso2cfn3c2ba9kyb/" rel="nofollow">http: // tautan-ke-apk-Anda</a> "); </p><br><p>  atau </p><br><pre> <code class="bash hljs">device.setCapability(<span class="hljs-string"><span class="hljs-string">"app"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://hypervisor:8000/game2048.apk"</span></span>);</code> </pre> <br><p>  Jika Anda merujuk ke localhost dari buruh pelabuhan, maka Anda akan mendapatkan kesalahan ini, karena Anda mencoba mengakses localhost dari server utama dari jaringan buruh pelabuhan: </p><br><pre> <code class="bash hljs">Tests <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> error: browserTest(com.aerokube.selenoid.AndroidRemoteApkTest): An unknown server-side error occurred <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> processing the <span class="hljs-built_in"><span class="hljs-built_in">command</span></span>. Original error: Problem downloading app from url http://localhost:8000/apk/game2048.apk: connect ECONNREFUSED 127.0.0.1:8000</code> </pre> <br><p>  Cara membuat tersedia untuk mengunduh file lokal Anda akan lebih rendah. </p><br><p>  Dalam file DemoTest.java tambahkan setCapability untuk menjalankan chrome di Android untuk mendapatkan sesuatu seperti ini. </p><br><p><img src="https://habrastorage.org/webt/nb/at/4d/nbat4dgrfnrsjz-u-inkwdo_r8q.png"></p><br><p>  Di setiap file java, Anda dapat mengaktifkan atau menonaktifkan rekaman video, melihat jarak jauh atau manajemen melalui VNC, dan masuk ke file.  Untuk menonaktifkan opsi, Anda perlu menambahkan 2 garis miring di awal baris. </p><br><p><img src="https://habrastorage.org/webt/bl/dy/jd/bldyjdaxstceqigh7szqsb5qvlo.png"></p><br><p>  Untuk membuat file dari direktori saat ini tersedia untuk diunduh, Anda dapat menjalankan layanan static-server-in-dir di konsol saat ini: </p><br><pre> <code class="bash hljs">yum -y install yum-plugin-copr yum copr <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> antonpatsev/static-server-in-dir yum -y install static-server-in-dir <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> to directory static-server-in-dir start         8000   static-server-in-dir stop</code> </pre> <br><h3 id="zapusk-testov">  Menjalankan tes </h3><br><p>  Di direktori demo-test, jalankan tes: </p><br><p>  Jika Anda perlu menentukan pengaturan dan Anda menggunakan proxy pakar (Nexus, Artifactory) </p><br><pre> <code class="bash hljs">mvn -s settings.xml clean <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br><p>  Jika kita jalankan dengan akses langsung ke Internet dan tanpa pengaturan apa pun </p><br><pre> <code class="bash hljs">mvn clean <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br><h3 id="skorost">  Kecepatan </h3><br><p>  Total waktu penyebaran emulator android dan peluncuran 1 tes membutuhkan waktu kurang dari 1 menit. </p><br><h3 id="izvestnye-bagi">  Bug yang dikenal </h3><br><p>  <a href="https://github.com/aerokube/demo-tests/issues/5" rel="nofollow">https://github.com/aerokube/demo-tests/issues/5</a> </p><br><h3 id="videozapis-testov">  Rekam Uji </h3><br><p>  AndroidDemoTest.java: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/377272195" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  AndroidRemoteApkTest.java: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/377272491" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  DemoTest.java: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://player.vimeo.com/video/377268541" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="poisk-nuzhnyh-location-v-mobilnom-prilozhenii-s-pomoschyu-appium">  Cari lokasi yang diinginkan dalam aplikasi seluler menggunakan Appium </h3><br><p>  <strong>Appium</strong> adalah alat lintas platform, mis.  memungkinkan Anda untuk menulis tes untuk platform seluler (iOS, Android, Windows) menggunakan API.  Ini adalah salah satu alat yang paling banyak digunakan untuk aplikasi pengujian regresi pada ponsel cerdas dan tablet. </p><br><p>  Unduh dan jalankan Appium </p><br><p>  Buka <code>File</code> -&gt; <code>New Session Window</code> </p><br><p><img src="https://habrastorage.org/webt/5q/ri/v8/5qriv83ldaz31rwvhtrk2_bm_se.png"></p><br><p>  Di bidang <code>Remote host</code> , tentukan alamat server tempat Selenoid dijalankan. </p><br><p>  Di bidang <code>Remote Port</code> , tentukan port tempat Selenoid berjalan - biasanya 4444. </p><br><p>  Di bidang <code>Remote Path</code> , tentukan <code>/wd/hub</code> </p><br><p>  Di <code>Desired Capabiliting</code> tentukan <code>Capabilities</code> Anda butuhkan. </p><br><p>  JSON minimum adalah ini: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"browserName"</span></span>: <span class="hljs-string"><span class="hljs-string">"chrome"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"browserVersion"</span></span>: <span class="hljs-string"><span class="hljs-string">"mobile-75.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"enableVNC"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  Setelah awal sesi Anda akan memiliki gambar ini: </p><br><p><img src="https://habrastorage.org/webt/le/yu/kl/leyuklvbvy3ivmpqfnnmehxutyu.png"></p><br><p>  Sekarang Anda dapat menjelajahi / mencari lokasi yang Anda butuhkan. </p><br><p><img src="https://habrastorage.org/webt/_7/1q/67/_71q67msm7lgv54-txgslr5cfqm.png"></p><br><p>  Obrolan telegram: </p><br><p>  <a href="https://t.me/aerokube" rel="nofollow">https://t.me/aerokube</a> - chat Aerokube </p><br><p>  <a href="https://t.me/atinfo_chat" rel="nofollow">https://t.me/atinfo_chat</a> - mengobrol untuk insinyur otomasi pengujian </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id478816/">https://habr.com/ru/post/id478816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id478802/index.html">Bereaksi-admin dan kerangka istirahat Django</a></li>
<li><a href="../id478804/index.html">Antiquities: semakin buruk, semakin baik atau fitur Sound Blaster Pro 2</a></li>
<li><a href="../id478806/index.html">Secara otomatis menambahkan sumber JSON ke REFL.ME untuk menghasilkan pesan dan peringatan</a></li>
<li><a href="../id478812/index.html">Kembangkan hexapod dari awal (bagian 6) - transisi ke pencetakan 3D</a></li>
<li><a href="../id478814/index.html">Bagaimana pemasaran membuatnya lebih cepat untuk mengisi daya ponsel cerdas Anda</a></li>
<li><a href="../id478820/index.html">Vivaldi untuk Android: satu beta bagus dan yang kedua lebih baik</a></li>
<li><a href="../id478822/index.html">Robotisasi AI dengan Platform Data IRIS Antar Sistem</a></li>
<li><a href="../id478826/index.html">Refleksi pada OOP dan keadaan objek</a></li>
<li><a href="../id478832/index.html">Titik pertukaran traffic: dari awal hingga penciptaan IX Anda sendiri</a></li>
<li><a href="../id478834/index.html">Mengapa kita mati rasa karena ketakutan: efek serotonin pada penggerak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>