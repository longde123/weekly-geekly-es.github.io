<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕒 👩🏽‍🎤 ✋ ¿Estás seguro de que utilizas microservicios? 🤛🏽 🎸 👩🏾‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! 

 La práctica muestra que con la continua relevancia del paradigma del microservicio, no faltan interpretaciones , críticas e incluso desa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¿Estás seguro de que utilizas microservicios?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/478590/">  Hola Habr! <br><br>  La práctica muestra que con la continua <a href="https://www.piter.com/collection/all/product/mikroservisy-patterny-razrabotki-i-refaktoringa">relevancia del</a> paradigma <a href="https://www.piter.com/collection/all/product/mikroservisy-patterny-razrabotki-i-refaktoringa">del</a> microservicio, no faltan <a href="https://habr.com/ru/company/raiffeisenbank/blog/346380/">interpretaciones</a> , críticas e incluso <a href="https://habr.com/ru/post/416819/">desacreditaciones</a> .  Por lo tanto, volviendo a nuestras publicaciones traducidas, decidimos hablar específicamente sobre <a href="https://www.piter.com/collection/all/product/sozdanie-mikroservisov">microservicios</a> , o más bien, considerar una respuesta detallada a la pregunta planteada en el título del artículo. <br><a name="habracut"></a><br>  El término "microservicios" apareció por primera vez alrededor de 2011/2012.  Desde entonces, sin microservicios en el entorno de TI, casi en ninguna parte.  Sin embargo, después de tantos años, ¿hemos logrado entender adecuadamente qué son los microservicios? <br><br>  Primero, veamos algunas definiciones: <br><br><blockquote>  Microservicios es un enfoque para <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B0_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25BE%25D0%25B1%25D0%25B5%25D1%2581%25D0%25BF%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">el desarrollo de software</a> (...), según el cual una <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25B4%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BE%25D0%25B1%25D0%25B5%25D1%2581%25D0%25BF%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">aplicación está</a> estructurada como un conjunto de servicios <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D1%2586%25D0%25B5%25D0%25BF%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">poco acoplados</a> .  En una arquitectura de microservicio, los servicios son <a href="https://en.wikipedia.org/wiki/Service_granularity_principle">muy detallados</a> y los <b><a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25BB_%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B0%25D1%2587%25D0%25B8_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585">protocolos</a></b> utilizados son <b>livianos</b> .  El beneficio de descomponer una aplicación en servicios individuales más pequeños es mejorar la <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25BE%25D0%25B4%25D1%2583%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5"><b>modularidad</b></a> .  De esta forma, la aplicación es más fácil de comprender, desarrollar, probar y la aplicación misma se vuelve más resistente a la erosión de la arquitectura.  Con este enfoque de la arquitectura, el desarrollo es paralelo y los pequeños equipos autónomos tienen la oportunidad de <b>desarrollar</b> , <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D0%25B2%25D1%2591%25D1%2580%25D1%2582%25D1%258B%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25BE%25D0%25B1%25D0%25B5%25D1%2581%25D0%25BF%25D0%25B5%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F"><b>implementar</b></a> y <b>escalar de forma</b> <b>independiente</b> los servicios de los que son responsables.  También con este enfoque, la <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D1%2584%25D0%25B0%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B3">refactorización</a> continua se puede aplicar a la arquitectura de cada servicio.  Las arquitecturas de microservicios también están diseñadas para <a href="https://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D0%25BF%25D1%2580%25D0%25B5%25D1%2580%25D1%258B%25D0%25B2%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B4%25D0%25BE%25D1%2581%25D1%2582%25D0%25B0%25D0%25B2%25D0%25BA%25D0%25B0"><b>la entrega</b></a> <b>continua</b> y <b>la implementación continua</b> . <br>  <a href="https://en.wikipedia.org/wiki/Microservices">en.wikipedia.org/wiki/Microservices</a> <br></blockquote><br>  Aquí hay otro pasaje de Martin Fowler: <br><br><blockquote>  El término "arquitectura de microservicios" se ha arraigado firmemente en los últimos años para describir una forma particular de diseñar tales aplicaciones, cada una de las cuales es un conjunto de <b>servicios implementados</b> de forma <b>independiente</b> .  Aunque no existe una definición exacta de este estilo arquitectónico, hay una serie de características generales con respecto a la organización de la aplicación en torno a sus capacidades comerciales, implementación automatizada, recopilación de información en terminales y <b>gestión descentralizada de idiomas y datos</b> . <br>  <a href="https://martinfowler.com/articles/microservices.html">martinfowler.com/articles/microservices.html</a> </blockquote><br>  Probablemente haya notado que la similitud principal entre estas dos formulaciones es la independencia de los servicios y las opciones.  ¡Ahora intentemos responder algunas preguntas e intentar averiguar si el sistema que está implementando realmente tiene una base de microservicio! <br><br>  <b>¿Su sistema le permite reiniciar los servicios de forma independiente?</b> <br><br>  ¿O necesita reiniciar los servicios en un orden determinado?  Este comportamiento puede ser dictado por sistemas de clúster específicos en los que el nodo se conecta al nodo semilla, por ejemplo, en el clúster de Akka, si no se maneja correctamente.  Otros casos pueden estar asociados con conexiones de larga duración o enchufes que solo se pueden abrir en un lado.  Recuerde que la comunicación debe seguir siendo simple y ligera.  Aún mejor si es completamente asíncrono y está basado en mensajes.  Todas las restricciones que hacen que los servicios dependan unos de otros a largo plazo pueden convertirse en dificultades con el soporte.  Los problemas con uno de los servicios pueden causar problemas en todos los demás servicios que dependen de él, lo que algún día puede resultar en una falla global grave. <br><br>  <b>¿Se pueden implementar servicios de forma independiente?</b> <br><br>  Hay casos en que la liberación y la implementación de todos los servicios en el sistema deben ocurrir simultáneamente.  Este proceso lleva varios días.  Por supuesto, en este caso, las posibilidades de introducir un despliegue continuo son limitadas, se producen demoras y la capacidad de respuesta empeora.  Lleva demasiado tiempo lidiar con errores urgentes, simplemente debido a los costos asociados con el proceso de implementación.  Cuando diferentes equipos están ocupados apoyando diferentes servicios, cualquier dependencia de implementación puede evitar que otros equipos implementen sus servicios, lo que hará que se suspenda el trabajo y disminuya su efectividad. <br><br>  <b>¿Puede una modificación implicar la necesidad de realizar modificaciones sincronizadas a otros servicios?</b> <br><br>  Uno puede imaginar las muchas razones que conducen a este comportamiento.  En primer lugar, estos son cambios de API.  Sucede que es suficiente agregar un nuevo campo a la solicitud de API para que la compatibilidad entre los servicios se interrumpa.  Sin embargo, existen soluciones alternativas para ayudar a lidiar con estas situaciones: <br><br><ul><li>  Quizás desee mantener la compatibilidad con versiones anteriores obligatorias para todos los cambios realizados en la API;  es decir, cada vez que se realiza un cambio fundamental, se agrega una nueva versión de la API.  Esto no significa que siempre deba admitir muchas versiones de la API;  solo los necesitará durante el período hasta que se complete la migración.  Simplemente puede hablar con otros equipos y asegurarse de que todos hayan completado la migración, o activar las métricas para juzgar si todavía se está utilizando una API específica. </li><li>  También puede considerar esta opción: implemente varias versiones de su aplicación a la vez, permitiendo que otros servicios cambien a la última versión y luego desactive la anterior. </li><li>  También intente usar formatos que admitan la evolución de los circuitos, por ejemplo, <a href="https://avro.apache.org/">Avro</a> , donde al agregar un nuevo campo de compatibilidad no se puede violar.  Cuando falta un valor para un campo, se puede usar el valor predeterminado. </li></ul><br>  Otra razón para la implementación sincronizada es el uso de código compartido por diferentes servicios.  Dependiendo de cómo se construya el proceso de lanzamiento en la parte compartida del código, cualquier cambio puede requerir actualización en todos los servicios. <br><br>  <b>¿Un cambio en la base de datos causa un cambio en muchos servicios?</b> <br><br>  Sí, la comunicación a través de una base de datos es un antipatrón bien conocido.  En esta situación, es necesario actualizar el esquema y cambiar simultáneamente el código de varios microservicios a la vez.  Es mejor asegurarse de que solo un servicio sea responsable de administrar el circuito.  En este caso, resulta mucho más fácil mantener la base de datos (es decir, realizar sus actualizaciones) e implementar versiones.  Si ya se encuentra en una situación con el uso compartido de la base de datos, intente limitar el número de operaciones de escritura para que otro servicio funcione solo para el consumo. <br><br>  <b>¿Se puede actualizar una dependencia o versión de Java en un solo servicio?</b> <br><br>  En teoría, siempre debería ser posible, ¿verdad?  Pero realmente no.  Hay muchos ejemplos de bibliotecas "compartidas" o simplemente proyectos que contienen definiciones de todas las dependencias utilizadas en el sistema.  El objetivo del paradigma de los microservicios es garantizar que cada uno de ellos sea una entidad independiente, y que los diferentes microservicios ni siquiera tengan que escribirse en la misma pila tecnológica.  Al comenzar un nuevo proyecto, debe poder decidir por sí mismo qué tecnología es mejor para él.  Cualquier enlace causará nuevos problemas.  En algún momento, es posible que deba actualizar a Scala o JDK, pero, por supuesto, no desea hacerlo de inmediato en todo el sistema.  En un sistema donde se observa correctamente el nivel de detalle, puede actualizar un servicio individual, implementarlo, probarlo y monitorearlo durante varios días o semanas, y luego, si todo está correcto, puede realizar actualizaciones en el resto del sistema.  Sin embargo, cuando existen mecanismos de unificación <code>common</code> u otros mecanismos de unificación fuertes, tales posibilidades son muy limitadas. <br><br>  <b>¿Su marco o biblioteca elegida lo obliga a detenerse en la misma opción en otros servicios?</b> <br><br>  Algunas bibliotecas son bastante invasivas.  Cuando decide integrarlos con sistemas externos, puede resultar repentinamente que su elección no es tan buena cuando va a implementar un nuevo servicio en una pila tecnológica diferente.  Los costos asociados con su integración en el mismo espíritu que el resto de los servicios pueden ser simplemente insoportables. <br><br>  Supongamos, por ejemplo, que tiene varios servicios escritos en <a href="https://nodejs.org/en/">NodeJS</a> que usan activamente <a href="https://jsonapi.org/">JSON: API</a> .  Luego, desea implementar un nuevo servicio en Scala y parece que no hay una biblioteca cliente adecuada (hace unos años tuvimos un caso similar, pero ahora la situación en esta área ha mejorado ligeramente). <br><br>  <b>¿La falla de un solo servicio causa una falla de todo el sistema?</b> <br><br>  Suponga que la comunicación en su sistema es completamente sincrónica.  Un servicio hace una solicitud a otro y espera una respuesta de él.  Si el primer servicio falla, entonces el segundo servicio no podrá funcionar en absoluto.  Si esta es la situación en su sistema, intente implementar en él una comunicación asincrónica basada en mensajes.  Puede ser un poco más difícil simular todos los procesos, pero este enfoque permite suavizar los efectos de las fallas. <br><br>  En los casos en que esto no sea posible, puede intentar limitar temporalmente el conjunto de características de la aplicación.  Por ejemplo, en la página de la tienda en línea se muestra información sobre el producto y se revisan, además, la información y las revisiones del producto provienen de dos fuentes diferentes.  Si el microservicio de revisiones no funciona, aún puede mostrar la página del producto simplemente informando al usuario que el sistema de revisión no está disponible temporalmente. <br><br>  <b>¿Hay algún componente compartido en su sistema?</b> <br><br>  ¿Tienes código compartido?  Configuración?  Cualquier cosa?  Sí, esta es una pregunta no trivial.  ¡Los defensores de la pureza de los microservicios creen que es mejor no permitir entidades compartidas en el sistema!  Es mejor simplemente copiar que dividir el código.  En la práctica, a veces se considera aceptable tener varias <a href="https://phauer.com/2016/dont-share-libraries-among-microservices/">bibliotecas compartidas</a> , pero con limitaciones estrictas.  Quizás sean bibliotecas que contengan archivos <code>proto</code> para <a href="https://developers.google.com/protocol-buffers/">memorias intermedias de protocolo</a> o simplemente objetos POJO ordinarios.  Mejor evitar dependencias en tales bibliotecas.  Tuvimos un caso en el que una biblioteca cliente simple que causaba conflictos de dependencia en un sistema grande.  En algún momento, comenzó a parecer que los elementos más antiguos de la aplicación usaban la antigua biblioteca HTTP, que no podía actualizarse.  Afortunadamente, estas situaciones se pueden evitar mediante el cambio de nombre de dependencias en el proceso de compilación (sombreado de dependencias), pero tenga mucho cuidado. <br><br><blockquote>  El daño causado por la sobrecohesión de los servicios es mucho más perjudicial por los problemas causados ​​por la repetibilidad del código. <br><br>  Sam Newman, <a href="https://www.piter.com/collection/all/product/sozdanie-mikroservisov">Creación de microservicios</a> </blockquote><br>  <b>Conclusiones</b> <br><br>  Implementar el sistema perfecto basado en microservicios no es una tarea fácil.  Las personas tienden a "cortar esquinas", introduciendo vínculos estrechos en el sistema que surgen debido al código compartido, y en algún momento dicho sistema en la práctica se convierte en un monolito distribuido.  A menudo, esto sucede si los microservicios comienzan a usarse ya al comienzo del proyecto, cuando el área temática aún no está bien estudiada y no tiene un fondo sólido y listo en DevOps.  Es mejor comenzar con un <a href="https://martinfowler.com/bliki/MonolithFirst.html">monolito adecuadamente estructurado</a> , donde todas las áreas de responsabilidad sean completamente conocidas y puedan separarse fácilmente entre sí.  Sin embargo, desde el principio, debe asegurarse de que su sistema esté diseñado de <a href="https://www.piter.com/collection/all/product/chistaya-arhitektura-iskusstvo-razrabotki-programmnogo-obespecheniya">manera limpia</a> y que la organización del paquete se siga con cuidado, lo que posteriormente le proporcionará una migración de código fácil a nuevos servicios (por ejemplo, un solo paquete de "nivel superior" puede ser la base para un nuevo microservicio) .  <a href="https://www.archunit.org/">ArchUnit</a> puede ayudar con el análisis de dependencias que surgen entre paquetes. <br><br><blockquote>  (...) no debe comenzar inmediatamente a trabajar en un nuevo proyecto con la introducción de microservicios, incluso si está seguro de que su aplicación será lo suficientemente grande como para que los microservicios se justifiquen. <br>  <a href="https://martinfowler.com/bliki/MonolithFirst.html">martinfowler.com/bliki/MonolithFirst.html</a> </blockquote><br>  ¡Recuerde, los microservicios deberían simplificar tanto el desarrollo como el soporte!  Todo lo que necesita son servicios poco acoplados, cada uno de los cuales puede implementarse independientemente de los demás. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/478590/">https://habr.com/ru/post/478590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../478572/index.html">Bot en redes neuronales: cómo funciona y aprende un asistente virtual</a></li>
<li><a href="../478574/index.html">La verdad sobre los frenos de ferrocarril: Parte 4 - Frenos de pasajeros</a></li>
<li><a href="../478582/index.html">Informe VPN global sobre dispositivos móviles en 2019</a></li>
<li><a href="../478584/index.html">Elementos internos de JVM, Parte 2 - Estructura de archivos de clase</a></li>
<li><a href="../478586/index.html">Ineficiencia</a></li>
<li><a href="../478596/index.html">Funciones anónimas de PHP: exposición de la sesión de Black Magic</a></li>
<li><a href="../478602/index.html">MVC en Unity con Objetos Scriptables. Parte 2</a></li>
<li><a href="../478604/index.html">De trabajadores a programadores de php. Carrera de desarrollo inusual</a></li>
<li><a href="../478606/index.html">"Buenas noches": cómo los dispositivos inteligentes privan a las personas del sueño</a></li>
<li><a href="../478616/index.html">Windows UAC nunca deja de sorprender, o Cómo detectar una información privilegiada</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>