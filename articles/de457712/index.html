<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ß üëãüèΩ üßëüèº‚Äçü§ù‚Äçüßëüèª Wie Verizon und BGP Optimizer sich offline hervorragend einrichten üë©üèΩ‚Äçüç≥ üë©üèø‚Äçüé§ üëè</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ein gro√ües Routenleck hat gro√üe Internetsektoren betroffen, einschlie√ülich Cloudflare 
 Was ist passiert? 


 Am 24. Juni, um 10:30 UTC, brach das Int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie Verizon und BGP Optimizer sich offline hervorragend einrichten</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/457712/"><p><img src="https://habrastorage.org/webt/eg/la/bv/eglabvr8m7jxhrj7eu2mv_uxghe.jpeg"></p><br><h2 id="krupnaya-utechka-marshrutov-povliyala-na-bolshie-sektory-interneta-vklyuchaya-cloudflare">  Ein gro√ües Routenleck hat gro√üe Internetsektoren betroffen, einschlie√ülich Cloudflare </h2><br><h3 id="chto-sluchilos">  Was ist passiert? </h3><br><p>  Am 24. Juni, um 10:30 UTC, brach das Internet zusammen: Ein kleines Unternehmen im Norden von Pennsylvania str√∂mte einen Verkehrsstrom von vielen Strecken √ºber einen gro√üen Anbieter Verizon (AS701) - mit dem gleichen Erfolg konnte der Navigator einen Strom von Autos von einer mehrspurigen Autobahn auf eine schmale Stra√üe schicken .  Infolgedessen haben viele Websites auf Cloudflare und viele andere Anbieter Zugriffsprobleme.  Dies h√§tte √ºberhaupt nicht passieren d√ºrfen, da Verizon diese Routen nicht an das gesamte Internet senden sollte.  Lesen Sie weiter, um herauszufinden, wie es passiert ist. </p><a name="habracut"></a><br><p> Wir haben bereits zuvor √ºber solche <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vorf√§lle geschrieben</a> , die von Zeit zu Zeit auftreten, aber diesmal haben wir die Konsequenzen auf der ganzen Welt gesp√ºrt.  Das Problem wurde durch den BGP-Optimierer von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Noction</a> versch√§rft.  Es hat eine Funktion, die die empfangenen IP-Pr√§fixe in kleinere und spezifischere aufteilt.  Beispielsweise wurde unsere IPv4-Route 104.20.0.0/20 in 104.20.0.0/21 und 104.20.8.0/21 unterteilt.  Als ob der Wegweiser von Pennsylvania durch zwei andere ersetzt worden w√§re: Pittsburgh, PA und Philadelphia, PA.  Durch die Aufteilung gro√üer IP-Bl√∂cke in kleine verwaltet das Netzwerk den Datenverkehr in sich selbst. Diese Trennung sollte jedoch nicht √∂ffentlich verf√ºgbar sein.  Andernfalls treten solche Probleme auf. </p><br><p>  Um zu erkl√§ren, was als n√§chstes geschah, erinnern wir uns zun√§chst an die Funktionsweise des Internets.  Im Wesentlichen ist das Internet ein Netzwerk, das aus Netzwerken besteht, die als autonome Systeme bezeichnet werden.  Jedes autonome System hat eine eigene eindeutige Kennung.  Alle Netzwerke sind √ºber das Border Gateway Protocol (BGP) miteinander verbunden.  BGP verbindet diese Netzwerke und bildet die Internetstruktur, in der der Datenverkehr beispielsweise von Ihrem Internetprovider zu einer beliebten Website in einem anderen Teil der Welt geleitet wird. </p><br><p>  √úber BGP tauschen Netzwerke Informationen √ºber Routen aus, n√§mlich wie sie von √ºberall zu ihnen gelangen.  Diese Routen k√∂nnen spezifisch (wie eine bestimmte Stadt auf der Karte) oder allgemein (wie ein Gebiet) sein.  Und dann passierte √Ñrger. </p><br><p>  Ein Internetdienstanbieter in Pennsylvania ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AS33154</a> - DQE Communications) verwendete BGP Optimizer in seinem Netzwerk, was bedeutet, dass es in seinem Netzwerk viele spezifische Routen gab.  Bestimmte Routen haben Vorrang vor allgemeinen Routen (im selben Navigator ist beispielsweise die Route zum Buckingham Palace spezifischer als die Route nach London). </p><br><p>  DQE stellte diese spezifischen Routen seinem Kunden zur Verf√ºgung ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AS396531</a> - Allegheny Technologies Inc), und von dort gelangten sie zum Transitanbieter ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AS701</a> - Verizon), der diese "optimalen" Routen √ºber das Internet f√ºhrte.  Sie scheinen optimal zu sein, weil sie mehr Details und Besonderheiten haben. </p><br><p>  Und das alles sollte nicht √ºber Verizon hinausgehen.  Obwohl es wirksame M√∂glichkeiten gibt, sich vor solchen Fehlern zu sch√ºtzen, hat das Fehlen von Filtern bei Verizon zu einem Zusammenbruch gef√ºhrt, der viele Dienste wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Amazon, Linode und Cloudflare</a> betrifft. </p><br><p>  Infolgedessen stie√üen Verizon, Allegheny und DQE auf eine Welle von Benutzern, die versuchten, √ºber ihr Netzwerk auf diese Dienste zuzugreifen.  Sie waren nicht f√ºr einen so starken Verkehr ausgelegt, der zu Unterbrechungen f√ºhrte.  Und selbst wenn gen√ºgend Ressourcen vorhanden w√§ren, h√§tten DQE, Allegheny und Verizon nicht jedem von der idealen Route zu Cloudflare, Amazon, Linode usw. erz√§hlen sollen. </p><br><p><img src="https://habrastorage.org/webt/yb/he/ti/ybhetij-tbe3genbvvdyqwdd6_k.png"><br>  <em>BGP-Leckprozess mit BGP Optimizer.</em> </p><br><p>  In den schlimmsten Momenten des Ausfalls beobachteten wir einen Verlust von ungef√§hr 15% des weltweiten Verkehrs. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ih/1x/by/ih1xbyulz4o5z9yhi_pazwvysk8.png"></a> <br>  <em>Cloudflare-Verkehrsaufkommen w√§hrend eines Vorfalls.</em> </p><br><h3 id="kak-mozhno-bylo-predotvratit-utechku">  Wie kann ein Leck verhindert werden? </h3><br><p>  <strong>Es gibt verschiedene M√∂glichkeiten.</strong> </p><br><p>  F√ºr eine BGP-Sitzung k√∂nnen Sie ein festes Limit f√ºr akzeptierte Pr√§fixe festlegen. Wenn die Anzahl der Pr√§fixe den Schwellenwert √ºberschreitet, beendet der Router die Sitzung.  Wenn Verizon eine solche Beschr√§nkung f√ºr Pr√§fixe h√§tte, w√§re nichts passiert.  F√ºr einen Anbieter wie Verizon w√§re die Installation wertlos.  Warum gab es keine Grenzen?  Ich habe eine Version: Nachl√§ssigkeit und Faulheit. </p><br><p>  Eine andere M√∂glichkeit, solche Lecks zu vermeiden, ist die Verwendung der IRR-Filterung.  IRR (Internet Routing Registry) ist eine verteilte Datenbank von Internetrouten, zu denen Netzwerke Eintr√§ge hinzuf√ºgen.  Andere Netzbetreiber verwenden diese IRR-Eintr√§ge, um Listen mit bestimmten Pr√§fixen f√ºr BGP-Sitzungen mit anderen Netzen zu erstellen.  Wenn IRR-Filter verwendet w√ºrden, w√ºrde keines dieser Netzwerke fehlerhafte spezifische Routen akzeptieren.  Unglaublicherweise hatte Verizon diese Filterung in BGP-Sitzungen mit Allegheny Technologies √ºberhaupt nicht, obwohl die IRR-Filterung seit mehr als 24 Jahren verwendet (und gut dokumentiert) wird.  IRR-Filter w√ºrden Verizon nichts kosten und ihren Service in keiner Weise einschr√§nken.  Und wieder - Nachl√§ssigkeit und Faulheit. </p><br><p>  Letztes Jahr haben wir die RPKI-Plattform implementiert und bereitgestellt, die solche Lecks nur verhindert.  Es setzt Filter entsprechend dem Quellnetzwerk und der Pr√§fixgr√∂√üe.  Cloudflare k√ºndigt Pr√§fixe mit einer maximalen Gr√∂√üe von 20 an. RPKI gibt an, dass spezifischere Pr√§fixe unabh√§ngig vom Pfad nicht akzeptiert werden k√∂nnen.  Damit dieser Mechanismus funktioniert, muss die BGP-Ursprungsvalidierung im Netzwerk aktiviert sein.  Viele Anbieter, zum Beispiel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AT &amp; T, setzen RPKI bereits erfolgreich</a> in ihrem Netzwerk ein. </p><br><p>  Wenn Verizon RPKI verwendet, wird festgestellt, dass die vorgeschlagenen Routen nicht g√ºltig sind, und der Router lehnt sie automatisch ab. </p><br><p>  Cloudflare empfiehlt allen Netzbetreibern, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">RPKI</a> sofort <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereitzustellen</a> ! </p><br><p> <a href=""><img src="https://habrastorage.org/webt/yq/-h/kg/yq-hkgdc4apbxmoah08pgatre_e.png"></a> <br>  <em>Routenleckverh√ºtung mithilfe von IRR-, RPKI- und Pr√§fix-Grenzwerten.</em> </p><br><p>  Alle diese Empfehlungen sind in MANRS (einvernehmlich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vereinbarte Normen f√ºr die Routing-Sicherheit</a> ) ausf√ºhrlich beschrieben. </p><br><h3 id="kak-reshili-problemu">  So l√∂sen Sie das Problem </h3><br><p>  Das Cloudflare-Netzwerkteam kontaktierte die betroffenen Netze AS33154 (DQE Communications) und AS701 (Verizon).  Es war nicht einfach - vielleicht weil es zu Beginn ein fr√ºher Morgen an der Ostk√ºste der Vereinigten Staaten war. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/gl/q6/4p/glq64pqghwlgqmnuj-dakabotnc.png"></a> <br>  <em>Screenshot eines Briefes an Verizon.</em> </p><br><p>  Einer unserer Netzwerktechniker setzte sich schnell mit DQE Communications in Verbindung, und nach einer kurzen Verz√∂gerung wurden wir mit demjenigen verbunden, der das Problem l√∂sen konnte.  Dank unseres telefonischen Supports konnte DQE das Senden ‚Äûoptimierter‚Äú Routen an Allegheny Technologies Inc. einstellen.  Wir sind ihnen f√ºr ihre Hilfe dankbar.  Alles stabilisierte sich und normalisierte sich wieder. </p><br><p><img src="https://habrastorage.org/webt/r7/sy/en/r7syendhc6ygx3y9dkybsrwouk0.png"><br>  <em>Screenshot der Versuche, DQE und Verizon Support Services zu kontaktieren</em> </p><br><p>  Leider hat uns trotz aller Versuche, Verizon per Telefon und E-Mail zu kontaktieren, zum Zeitpunkt des Schreibens (seit dem Vorfall sind mehr als 8 Stunden vergangen) niemand geantwortet, und wir wissen nicht, ob sie etwas unternehmen . </p><br><p>  Wir bei Cloudflare m√∂chten dies nicht wiederholen, aber leider wird sehr wenig daf√ºr getan.  Es ist an der Zeit, dass die Branche effektivere Ma√ünahmen ergreift, um die Routing-Sicherheit zu gew√§hrleisten, beispielsweise bei Systemen wie RPKI.  Wir hoffen, dass gro√üe Anbieter Cloudflare, Amazon und AT &amp; T folgen und mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√úberpr√ºfung der Routen</a> beginnen.  Dies gilt insbesondere f√ºr Sie, Verizon.  Wir warten immer noch auf eine Antwort. </p><br><p>  Und obwohl wir nicht beeinflussen konnten, was passiert ist, entschuldigen wir uns f√ºr die Betriebsunterbrechung.  Wir k√ºmmern uns um unsere Kunden, und Ingenieure in den USA, Gro√übritannien, Australien und Singapur haben uns einige Minuten nach der Entdeckung des Problems kontaktiert. </p><br><p>  Andere Artikel mit dem Tag <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BGP</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de457712/">https://habr.com/ru/post/de457712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de457700/index.html">Node.js Authentifizierungshandbuch ohne passport.js und Dienste von Drittanbietern</a></li>
<li><a href="../de457702/index.html">Arbeiten Sie mit der KOMPAS-3D-API ‚Üí Lektion 16 ‚Üí Steuerzeichen</a></li>
<li><a href="../de457704/index.html">Wie GPUs mit Verzweigungen umgehen</a></li>
<li><a href="../de457706/index.html">Roboter testet SAP ERP</a></li>
<li><a href="../de457710/index.html">Die erstaunlichen Eigenschaften neuronaler Netze 2019</a></li>
<li><a href="../de457714/index.html">Stapel√ºberlauf in Englisch: Community Kill Guide</a></li>
<li><a href="../de457718/index.html">HyperCard, das verlorene Glied in der Entwicklung des Web</a></li>
<li><a href="../de457720/index.html">Autodesk Maya: N√ºtzliche Grundfunktionen f√ºr die Arbeit mit 3D-Modellen</a></li>
<li><a href="../de457722/index.html">SQL: Zeiterfassung Problem: Nachbesprechung</a></li>
<li><a href="../de457724/index.html">OpenCV auf STM32F7-Discovery</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>