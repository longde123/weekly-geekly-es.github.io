<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯд╛ тЩПя╕П ЁЯЫНя╕П рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рдмрдЧрд┐рдВрдЧ ЁЯзСЁЯП╜тАНЁЯдЭтАНЁЯзСЁЯП╜ ЁЯРе ЁЯЫХ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд▓рдЧрднрдЧ 10% рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ, рдФрд░ рдбрд┐рдмрдЧрд┐рдВрдЧ рдореЗрдВ 90% рд▓рдЧрддрд╛ рд╣реИред рд╢рд╛рдпрдж рдпрд╣ рдХрдерди рдЕрддрд┐рд░рдВрдЬрд┐рдд рд╣реИ, рд▓реЗрдХрд┐рди рдХреЛрдИ рднреА рдбреЗрд╡рд▓рдкрд░ рдЗрд╕ рдмрд╛рдд рд╕реЗ рд╕рд╣рдордд рд╣реЛрдЧрд╛ рдХрд┐ рдбрд┐рдм...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдбрд┐рдмрдЧрд┐рдВрдЧ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/420793/"> рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд▓рдЧрднрдЧ 10% рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ, рдФрд░ рдбрд┐рдмрдЧрд┐рдВрдЧ рдореЗрдВ 90% рд▓рдЧрддрд╛ рд╣реИред  рд╢рд╛рдпрдж рдпрд╣ рдХрдерди рдЕрддрд┐рд░рдВрдЬрд┐рдд рд╣реИ, рд▓реЗрдХрд┐рди рдХреЛрдИ рднреА рдбреЗрд╡рд▓рдкрд░ рдЗрд╕ рдмрд╛рдд рд╕реЗ рд╕рд╣рдордд рд╣реЛрдЧрд╛ рдХрд┐ рдбрд┐рдмрдЧрд┐рдВрдЧ рдПрдХ рдЕрддреНрдпрдВрдд рд╕рдВрд╕рд╛рдзрди-рдЧрд╣рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдмрдбрд╝реЗ рдорд▓реНрдЯреА-рдереНрд░реЗрдб рд╕рд┐рд╕реНрдЯрдо рдореЗрдВред <br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдбрд┐рдмрдЧрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдФрд░ рд╡реНрдпрд╡рд╕реНрдерд┐рддрдХрд░рдг рд╕рд╣реЗрдЬреЗ рдЧрдП рдорд╛рдирд╡-рдШрдВрдЯреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд▓рд╛рдн рд▓рд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдЧрддрд┐ рдмрдврд╝рд╛рддрд╛ рд╣реИ рдФрд░ рдЕрдВрддрддрдГ, рдЕрдкрдиреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреА рд╡рдлрд╛рджрд╛рд░реА рдмрдврд╝рд╛рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/lm/eb/rk/lmebrkzzdxjbw-vsbub7ybrlxjq.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DotNext 2018 Piter</a> рдХреЙрдиреНрдлреНрд░реЗрдВрд╕ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд░реНрдЧреЗрдИ рд╢реЗрдЪрдЧреНрд░реАрдХреЛрд╡рд┐рдЪ</a> (рдбреЙрдЯрдореЗрд▓рд░) рдиреЗ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЛ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджрд┐рдпрд╛ рдЬрд┐рд╕реЗ рд╡рд░реНрдгрд┐рдд рдФрд░ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрднреА рднреА рдмрдЧ рдвреВрдВрдврдиреЗ рдХреА рд╕реНрдкрд╖реНрдЯ рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рд╣реИ - рд╕рд░реНрдЧреЗрдИ рдХреА рд░рд┐рдкреЛрд░реНрдЯ рдХреЗ рдХрдЯ рд╡реАрдбрд┐рдпреЛ рдФрд░ рдЯреЗрдХреНрд╕реНрдЯ рдЯреНрд░рд╛рдВрд╕рдХреНрд░рд┐рдкреНрдЯ рдХреЗ рддрд╣рддред <br><br>  (рдФрд░ рдкреЛрд╕реНрдЯ рдХреЗ рдЕрдВрдд рдореЗрдВ, рд╣рдордиреЗ рд╕рднреА рд╕рд╣рдпреЛрдЧрд┐рдпреЛрдВ рд╕реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреЙрди рд╕реНрдХреАрдЯ рдХреА</a> рдЕрдкреАрд▓ рдХреЛ рдЬреЛрдбрд╝рд╛, рдЕрд╡рд╢реНрдп рджреЗрдЦреЗрдВ) <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Paxi4K5Om1Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  рдореЗрд░рд╛ рд▓рдХреНрд╖реНрдп рдЗрд╕ рд╕рд╡рд╛рд▓ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдирд╛ рд╣реИ: рдХреИрд╕реЗ рдХреБрд╢рд▓рддрд╛ рд╕реЗ рдХреАрдбрд╝реЗ рдХреЛ рдареАрдХ рдХрд░рдирд╛ рд╣реИ рдФрд░ рдлреЛрдХрд╕ рдХреНрдпрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рд╕рд╡рд╛рд▓ рдХрд╛ рдЬрд╡рд╛рдм рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИред  рдбрд┐рдмрдЧрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛, рдЬрд┐рд╕рдореЗрдВ рдмрд╣реБрдд рд╕рд░рд▓ рдирд┐рдпрдо рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдФрд░ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЬрд╛рдирддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк рд╢рд╛рдпрдж рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдореЗрд░рд╛ рдХрд╛рдо рдЙрдиреНрд╣реЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдирд╛ рд╣реИ рдФрд░ рдпрд╣ рджрд┐рдЦрд╛рдирд╛ рд╣реИ рдХрд┐ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдзрд┐рдХ рдкреНрд░рднрд╛рд╡реА рдХреИрд╕реЗ рдмрдиреЗрдВред <br><br>  рд╣рдо рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рднрд╛рд╖рд╛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВрдЧреЗ, рдФрд░ рд╣рдо рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реАрдзрд╛ рд░рд╛рд╕реНрддрд╛ рднреА рджреЗрдЦреЗрдВрдЧреЗред  рдЕрдкрдиреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдкрд░ рдореИрдВ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдЗрди рдирд┐рдпрдореЛрдВ рдХреЗ рдЙрд▓реНрд▓рдВрдШрди рдХреЗ рдХрд╛рд░рдг рдХреНрдпрд╛ рд╣реБрдЖред <br><br><h2>  рдбреАрдмрдЧ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдПрдБ </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/292/518/f94/292518f94ecd468e034d8ec952398980.png"><br>  рдмреЗрд╢рдХ, рдХреЛрдИ рднреА рдбреАрдмрдЧрд┐рдВрдЧ рдЙрдкрдпреЛрдЧрд┐рддрд╛рдУрдВ рдХреЛ рдбреАрдмрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред  рдореЗрд░рд╛ рдкрд╕рдВрджреАрджрд╛ рд╣реИрдВ: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдВрдбрдмрдЧ</a> , рдЬреЛ рдЦреБрдж рдбрд┐рдмрдЧрд░ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореЗрдореЛрд░реА рдбрдВрдк рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдореГрджреНрдз рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╣реИред  рдПрдХ рдореЗрдореЛрд░реА рдбрдВрдк рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдПрдХ рдЯреБрдХрдбрд╝рд╛ рд╣реИред  рдЗрд╕рдореЗрдВ рдЖрдк рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдХреНрд╖реЗрддреНрд░, рдХреЙрд▓-рд╕реНрдЯреИрдХреНрд╕ рдХрд╛ рдореВрд▓реНрдп рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди, рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдореЗрдореЛрд░реА рдбрдВрдк рд╕реНрдерд┐рд░ рд╣реИред <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">PerfView</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ETW рддрдХрдиреАрдХ рдХреЗ</a> рд╢реАрд░реНрд╖ рдкрд░ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдПрдХ рдкреНрд░реЛрдлрд╛рдЗрд▓рд░ рд╣реИред <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Sysinternals</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Mark Russinovich</a> рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦреА рдЧрдИ рдПрдХ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдЙрдкрдХрд░рдг рдореЗрдВ рдереЛрдбрд╝реА рдФрд░ рдЦреБрджрд╛рдИ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред <br></li></ul><br><h2>  рдЧрд┐рд░рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛ </h2><br>  рдЖрдЗрдП рдЕрдкрдиреЗ рдЬреАрд╡рди рд╕реЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рдореИрдВ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдХрд┐ рдбрд┐рдмрдЧрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рдЕрдиреИрдЪреНрдЫрд┐рдХ рдкреНрд░рдХреГрддрд┐ рдХреИрд╕реЗ рдЕрдХреНрд╖рдорддрд╛ рдХреА рдУрд░ рд▓реЗ рдЬрд╛рддреА рд╣реИред <br><br>  рд╢рд╛рдпрдж, рдпрд╣ рд╣рд░ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рд╣реБрдЖ рд╣реИ, рдЬрдм рдЖрдк рдПрдХ рдирдИ рдХрдВрдкрдиреА рдореЗрдВ рдПрдХ рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдирдИ рдХрдВрдкрдиреА рдореЗрдВ рдЖрддреЗ рд╣реИрдВ, рддреЛ рдкрд╣рд▓реЗ рджрд┐рди рд╕реЗ рдЖрдк рдЕрдкреВрд░рдгреАрдп рд▓рд╛рдн рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рддреЛ рдпрд╣ рдореЗрд░реЗ рд╕рд╛рде рдерд╛ред  рдЙрд╕ рд╕рдордп, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╕реЗрд╡рд╛ рдереА рдЬреЛ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП html, рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдХреЗ рд▓рд┐рдП рдЖрдЙрдЯрдкреБрдЯ рдЪрд┐рддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреА рдереАред <br><br>  рд╕реЗрд╡рд╛ .Net 3.0 рдХреЗ рддрд╣рдд рд▓рд┐рдЦреА рдЧрдИ рдереА рдФрд░ рдпрд╣ рдмрд╣реБрдд рд╕рдордп рдкрд╣рд▓реЗ рдереАред  рдЗрд╕ рд╕реЗрд╡рд╛ рдХреА рдПрдХ рдЫреЛрдЯреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдереА - рдпрд╣ рджреБрд░реНрдШрдЯрдирд╛рдЧреНрд░рд╕реНрдд рд╣реЛ рдЧрдИред  рдкреНрд░рд╛рдпрдГ рд╣рд░ рджреЛ рд╕реЗ рддреАрди рдШрдВрдЯреЗ рдореЗрдВ рдПрдХ рдмрд╛рд░ рдлреЗрд▓ рд╣реЛрддрд╛ рд╣реИред  рд╣рдордиреЗ рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рддрдп рдХрд┐рдпрд╛ - рдЧрд┐рд░рд╛рд╡рдЯ рдХреЗ рдмрд╛рдж рд╕реЗрд╡рд╛ рдХреЗ рдЧреБрдгреЛрдВ рдореЗрдВ рдкреБрдирдГ рдЖрд░рдВрдн рдЧреБрдг рд╕реЗрдЯ рдХрд░реЗрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cc/b02/1a2/0ccb021a20b6c50d1639cd3e2bef7c28.png"><br><br>  рд╕реЗрд╡рд╛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рдереА рдФрд░ рд╣рдо рдЗрд╕реЗ рдЬреАрд╡рд┐рдд рд░рдЦ рд╕рдХрддреЗ рдереЗред  рд▓реЗрдХрд┐рди рдореИрдВ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реЛ рдЧрдпрд╛ рдФрд░ рдкрд╣рд▓реА рдЪреАрдЬ рдЬреЛ рдореИрдВрдиреЗ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рд╡рд╣ рдерд╛ рдЗрд╕реЗ рдареАрдХ рдХрд░рдирд╛ред <br><br>  рдЕрдЧрд░ рдХреБрдЫ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рддреЛ .NET рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХрд╣рд╛рдВ рдЬрд╛рддреЗ рд╣реИрдВ?  рд╡реЗ EventViewer рдкрд░ рдЬрд╛рдПрдВред  рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдБ рдореБрдЭреЗ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рдорд┐рд▓рд╛ рдХрд┐ рд╕реЗрд╡рд╛ рдЧрд┐рд░ рдЧрдИред  рдореВрд▓ рддреНрд░реБрдЯрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреЛрдИ рд╕рдВрджреЗрд╢ рдирд╣реАрдВ рдереЗ, рди рд╣реА рдХреЙрд▓-рд╕реНрдЯреИрдХред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be3/bdf/2fe/be3bdf2fe39777092ad0f2989e35d92e.png"><br><br>  рдЖрдЧреЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд┐рджреНрдз рдЙрдкрдХрд░рдг рд╣реИ - рд╣рдо рдкреВрд░реЗ <code>main</code> рдХреЛ <code>try-catch</code> рдореЗрдВ рд▓рдкреЗрдЯрддреЗ рд╣реИрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ProcessRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { LogError(ex); }</code> </pre><br>  рд╡рд┐рдЪрд╛рд░ рд╕рд░рд▓ рд╣реИ: <code>try-catch</code> рдХрд╛рдо рдХрд░реЗрдЧрд╛, рдпрд╣ рд╣рдореЗрдВ рдмрдЧ рджреЗрдЧрд╛, рд╣рдо рдЗрд╕реЗ рдкрдврд╝реЗрдВрдЧреЗ рдФрд░ рд╕реЗрд╡рд╛ рдХреЛ рдареАрдХ рдХрд░реЗрдВрдЧреЗред  рд╣рдо рд╕рдВрдХрд▓рди рдХрд░рддреЗ рд╣реИрдВ, рдЙрддреНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВ, рд╕реЗрд╡рд╛ рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИред  рдПрдХ рдФрд░ <code>catch</code> рдЬреЛрдбрд╝реЗрдВред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ProcessRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { LogError(ex); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { LogError(); }</code> </pre><br>  рд╣рдо рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рджреЛрд╣рд░рд╛рддреЗ рд╣реИрдВ: рд╕реЗрд╡рд╛ рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рд▓реЙрдЧ рдореЗрдВ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИред  рдЖрдЦрд┐рд░реА рдЪреАрдЬ рдЬреЛ рдорджрдж рдХрд░ рд╕рдХрддреА рд╣реИ, рд╡рд╣ <code>finally</code> , рдЬрд┐рд╕реЗ рд╣рдореЗрд╢рд╛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ProcessRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { LogError(ex); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { LogError(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { LogEndOfExecution(); }</code> </pre><br>  рд╣рдо рд╕рдВрдХрд▓рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВ, рд╕реЗрд╡рд╛ рдХреНрд░реИрд╢ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реИред  рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рддреАрди рджрд┐рди рдмреАрдд рдЪреБрдХреЗ рд╣реИрдВ, рдЕрдм рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд┐рдЪрд╛рд░ рдЖ рд░рд╣реЗ рд╣реИрдВ рдХрд┐ рд╣рдореЗрдВ рдЖрдЦрд┐рд░рдХрд╛рд░ рдХреБрдЫ рдФрд░ рд╕реЛрдЪрдирд╛ рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЖрдк рдмрд╣реБрдд рд╕реА рдЪреАрдЬреЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: рд╕реНрдерд╛рдиреАрдп рдорд╢реАрди рдкрд░ рддреНрд░реБрдЯрд┐ рдХреЛ рдкреБрди: рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ, рдореЗрдореЛрд░реА рдбрдВрдк рджреЗрдЦреЗрдВ, рдЖрджрд┐ред  рдРрд╕рд╛ рд▓рдЧ рд░рд╣рд╛ рдерд╛ рдЬреИрд╕реЗ рдПрдХ рдФрд░ рджреЛ рджрд┐рди рдФрд░ рдореИрдВ рдЗрд╕ рдмрдЧ рдХреЛ рдареАрдХ рдХрд░ рджреВрдВрдЧрд╛ ... <br><br>  рджреЛ рд╕рдкреНрддрд╛рд╣ рдмреАрдд рдЪреБрдХреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1eb/f02/0c3/1ebf020c3dde595f5423fd8247c3137b.png"><br><br>  рдореИрдВрдиреЗ PerformanceMonitor рдореЗрдВ рджреЗрдЦрд╛, рдЬрд╣рд╛рдВ рдореИрдВрдиреЗ рдПрдХ рд╕реЗрд╡рд╛ рджреЗрдЦреА рдЬреЛ рджреБрд░реНрдШрдЯрдирд╛рдЧреНрд░рд╕реНрдд рд╣реЛ рдЬрд╛рддреА рд╣реИ, рдлрд┐рд░ рдмрдврд╝ рдЬрд╛рддреА рд╣реИ, рдлрд┐рд░ рдЧрд┐рд░ рдЬрд╛рддреА рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХреЛ <i>рдирд┐рд░рд╛рд╢рд╛</i> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/98b/e07/904/98be07904a35b99130ba9ddf871af47f.png"><br><br>  рдЗрд╕ рддрд░рд╣ рдХреЗ рд▓реЗрдмрд▓ рдореЗрдВ, рдЖрдк рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдХрд┐ рд╕рдорд╕реНрдпрд╛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХрд╣рд╛рдВ рд╣реИ?  рдХрдИ рдШрдВрдЯреЛрдВ рдХреЗ рдзреНрдпрд╛рди рдХреЗ рдмрд╛рдж, рд╕рдорд╕реНрдпрд╛ рдЕрдЪрд╛рдирдХ рдкреНрд░рдХрдЯ рд╣реЛрддреА рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/379/2ba/caa/3792bacaa7c418f5fcffa318729bf1a0.png"><br><br>  рд▓рд╛рд▓ рд░реЗрдЦрд╛ рджреЗрд╢реА рд╣реИрдВрдбрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ рдЬреЛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдорд╛рд▓рд┐рдХ рд╣реИред  рдПрдХ рдореВрд▓ рд╕рдВрднрд╛рд▓ рдПрдХ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╕рдВрд╕рд╛рдзрди рдХрд╛ рдПрдХ рд╕рдВрджрд░реНрдн рд╣реИ: рдлрд╝рд╛рдЗрд▓, рд░рдЬрд┐рд╕реНрдЯреНрд░реА, рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдХреБрдВрдЬреА, рдореНрдпреВрдЯреЗрдХреНрд╕, рдЖрджрд┐ред  рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдХреБрдЫ рдЕрдЬреАрдм рд╕рдВрдпреЛрдЬрди рдХреЗ рд▓рд┐рдП, рд╣реИрдВрдбрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдореЗрдВ рдЧрд┐рд░рд╛рд╡рдЯ рдЙрди рдХреНрд╖рдгреЛрдВ рдХреЗ рд╕рд╛рде рдореЗрд▓ рдЦрд╛рддреА рд╣реИ рдЬрдм рд╕реЗрд╡рд╛ рдЧрд┐рд░ рдЧрдИред  рдЗрд╕рд╕реЗ рдпрд╣ рдЕрдВрджрд╛рдЬрд╛ рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдХрд╣реАрдВ рди рдХрд╣реАрдВ рд╣реИрдВрдбрд▓ рдХрд╛ рд░рд┐рд╕рд╛рд╡ рд╣реЛ рд░рд╣рд╛ рд╣реИред <br><br>  рд╣рдо рдПрдХ рдореЗрдореЛрд░реА рдбрдВрдк рд▓реЗрддреЗ рд╣реИрдВ, рдЗрд╕реЗ WinDbg рдореЗрдВ рдЦреЛрд▓реЗрдВред  рд╣рдо рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рдЖрдЗрдП рдЙрди рд╡рд╕реНрддреБрдУрдВ рдХреА рдЕрдВрддрд┐рдо рдХрддрд╛рд░ рдХреЛ рджреЗрдЦрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрд╡реЗрджрди рджреНрд╡рд╛рд░рд╛ рдореБрдХреНрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><pre> <code class="hljs erlang-repl"><span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">000</span></span>&gt; !FinalizeQueue</code> </pre><br>  рд╕реВрдЪреА рдХреЗ рдЕрдВрдд рдореЗрдВ, рдореБрдЭреЗ рдПрдХ рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдорд┐рд▓рд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/aa5/eb3/d6faa5eb38c3b7a4429e55d7f8af655e.png"><br>  рд╕рдорд╛рдзрд╛рди рд╕рд░рд▓ рд╣реИ - WebBrowser рд▓реЗрдВ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреЙрд▓ <code>dispose</code> рдХрд░реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Process</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webBrowser = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebBrowser()) { <span class="hljs-comment"><span class="hljs-comment">// Processing ... } }</span></span></code> </pre><br>  рдЗрд╕ рдХрд╣рд╛рдиреА рд╕реЗ рдирд┐рд╖реНрдХрд░реНрд╖ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: рджреЛ рд╕рдкреНрддрд╛рд╣ рдмрд╣реБрдд рд▓рдВрдмрд╛ рд╣реИ рдФрд░ рдПрдХ рдмрд┐рди рдмреБрд▓рд╛рдП рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд▓рдВрдмрд╛ рд╣реИ;  рд╣рдореЗрдВ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕рдорд╛рдзрд╛рди рдорд┐рд▓рд╛ - рднрд╛рдЧреНрдп, рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдирд╣реАрдВ рдерд╛, рдХреЛрдИ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдкреНрд░рдХреГрддрд┐ рдирд╣реАрдВ рдереАред <br><br>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдореЗрд░рд╛ рдПрдХ рд╕рд╡рд╛рд▓ рдерд╛: рдкреНрд░рднрд╛рд╡реА рдврдВрдЧ рд╕реЗ рдХреИрд╕реЗ рд╢реБрд░реБрдЖрдд рдХрд░реЗрдВ рдФрд░ рдХреНрдпрд╛ рдХрд░реЗрдВ? <br><br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рддреАрди рдЪреАрдЬреЛрдВ рдХреЛ рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛: <br><br><ol><li>  рдбрд┐рдмрдЧрд┐рдВрдЧ рдирд┐рдпрдо <br></li><li>  рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рджрдоред <br></li><li>  рд╕рдХреНрд░рд┐рдп рдбрд┐рдмрдЧрд┐рдВрдЧ рддрдХрдиреАрдХред <br></li></ol><br><h2>  рдбрд┐рдмрдЧрд┐рдВрдЧ рдирд┐рдпрдо </h2><br><ol><li>  рдЧрд▓рддреА рдХреЛ рджреЛрд╣рд░рд╛рдПрдВред <br></li><li>  рдпрджрд┐ рдЖрдкрдиреЗ рддреНрд░реБрдЯрд┐ рдареАрдХ рдирд╣реАрдВ рдХреА рд╣реИ, рддреЛ рдпрд╣ рддрдп рдирд╣реАрдВ рд╣реИред <br></li><li>  рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рдордЭреЗрдВред <br></li><li>  рдкреНрд▓рдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред <br></li><li>  рдлреВрдЯ рдбрд╛рд▓реЛ рдФрд░ рдЬреАрддреЛред <br></li><li>  рддрд░реЛрддрд╛рдЬрд╛ рд╣реЛрдирд╛ред <br></li><li>  рдпрд╣ рдЖрдкрдХрд╛ рдмрдЧ рд╣реИред <br></li><li>  рдкрд╛рдБрдЪ рдХреНрдпреЛрдВред <br></li></ol><br>  рдпреЗ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рдирд┐рдпрдо рд╣реИрдВ рдЬреЛ рдЦреБрдж рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЧрд▓рддреА рдХреЛ рджреЛрд╣рд░рд╛рдПрдВред  рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдирд┐рдпрдо, рдХреНрдпреЛрдВрдХрд┐ рдЕрдЧрд░ рдЖрдк рдЧрд▓рддреА рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдПрдХ рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдмрдЧ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рдорд╛рдорд▓реЗ рд╣реИрдВред  рд╣рдореЗрдВ рдХрд┐рд╕реА рддрд░рд╣ рдПрдХ рддреНрд░реБрдЯрд┐ рд╣реБрдИ рдЬреЛ рдХреЗрд╡рд▓ рдЗрдЯреЗрдирд┐рдпрдо рдкреНрд░реЛрд╕реЗрд╕рд░ рдФрд░ рдХреЗрд╡рд▓ рдЙрддреНрдкрд╛рджрди рд╕рд░реНрд╡рд░ рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдбрд┐рдмрдЧрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдкрд╣рд▓рд╛ рдХрд╛рд░реНрдп рдкрд░реАрдХреНрд╖рдг рдмреЗрдВрдЪ рдХрд╛ рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдвреВрдВрдврдирд╛ рд╣реИ, рдЬрд┐рд╕ рдкрд░ рддреНрд░реБрдЯрд┐ рдХреЛ рдкреБрди: рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдпрджрд┐ рдЖрдкрдиреЗ рддреНрд░реБрдЯрд┐ рдареАрдХ рдирд╣реАрдВ рдХреА рд╣реИ, рддреЛ рдпрд╣ рддрдп рдирд╣реАрдВ рд╣реИред  рдХрднреА-рдХрднреА рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ: рдПрдХ рдмрдЧ рдЯреНрд░реИрдХрд░ рдореЗрдВ рдПрдХ рдмрдЧ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЖрдзреЗ рд╕рд╛рд▓ рдкрд╣рд▓реЗ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рдерд╛, рдХрд┐рд╕реА рдиреЗ рдЗрд╕реЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдирд╣реАрдВ рджреЗрдЦрд╛ рд╣реИ, рдФрд░ рдмрд╕ рдЗрд╕реЗ рдмрдВрдж рдХрд░рдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЗрд╕ рд╕рдордп рд╣рдо рдпрд╣ рдЬрд╛рдирдиреЗ рдХрд╛ рдореМрдХрд╛ рдЪреВрдХ рдЬрд╛рддреЗ рд╣реИрдВ, рдпрд╣ рд╕рдордЭрдиреЗ рдХрд╛ рдореМрдХрд╛ рдХрд┐ рд╣рдорд╛рд░рд╛ рд╕рд┐рд╕реНрдЯрдо рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕рдХрд╛ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдХреЛрдИ рднреА рдмрдЧ рдХреБрдЫ рд╕реАрдЦрдиреЗ, рдЕрдкрдиреЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдиреЗ рдХрд╛ рдПрдХ рдирдпрд╛ рдЕрд╡рд╕рд░ рд╣реИред <br><br>  рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рдордЭреЗрдВред  рдмреНрд░рд╛рдпрди рдХреЗрд░реНрдирд┐рдШрди рдиреЗ рдПрдХ рдмрд╛рд░ рдХрд╣рд╛ рдерд╛ рдХрд┐ рдЕрдЧрд░ рд╣рдо рдЗрд╕ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрддрдиреЗ рд╕реНрдорд╛рд░реНрдЯ рдереЗ, рддреЛ рд╣рдореЗрдВ рдЗрд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреЛрдЧреБрдирд╛ рд╕реНрдорд╛рд░реНрдЯ рд╣реЛрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдирд┐рдпрдо рдХрд╛ рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рдЙрджрд╛рд╣рд░рдгред  рд╣рдорд╛рд░реА рдирд┐рдЧрд░рд╛рдиреА рд░реЗрдЦрд╛рдЪрд┐рддреНрд░ рдмрдирд╛рддреА рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cf/bfa/85b/4cfbfa85be2cf375741646b55aa373e6.png"><br>  рдпрд╣ рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдПрдХ рдЧреНрд░рд╛рдл рд╣реИред  рдПрдХ рдмрд╛рд░ рдЗрд╕реЗ рджреЗрдЦрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЗ рд╕рд╛рде рдЖрдП рдХрд┐ рд╕реЗрд╡рд╛ рдХреА рдЧрддрд┐ рдмрдврд╝рд╛рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛ред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╢реЗрдбреНрдпреВрд▓ рдмрдврд╝рддрд╛ рд╣реИ, рд╕рд░реНрд╡рд░ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдХрдо рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рд╡реЗрдм-рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдЕрдиреБрдХреВрд▓рди рдмрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: рд╣рдо PerfView рд▓реЗрддреЗ рд╣реИрдВ, рдЗрд╕реЗ рдЙрддреНрдкрд╛рджрди рдорд╢реАрди рдкрд░ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рдпрд╣ 3-4 рдорд┐рдирдЯ рдХреЗ рднреАрддрд░ рдЯреНрд░реЗрд╕ рдХреЛ рд╣рдЯрд╛ рджреЗрддрд╛ рд╣реИ, рд╣рдо рдЗрд╕ рдЯреНрд░реЗрд╕ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдорд╢реАрди рдкрд░ рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдкрд░рдлрд╝реЗрдХреНрдЯ рд╡реНрдпреВ рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдЖрдБрдХрдбрд╝реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХрдЪрд░рд╛ рд╕рдВрдЧреНрд░рд╛рд╣рдХ рд╣реИред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d3a/ed0/c3f/d3aed0c3f4d3c6de77840aa9ffc10004.png"><br><br>  рдЗрди рдЖрдБрдХрдбрд╝реЛрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдпрд╣ рд╕реЗрд╡рд╛ рдЕрдкрдирд╛ 85% рд╕рдордп рдХрдЪрд░рд╛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдореЗрдВ рд╡реНрдпрддреАрдд рдХрд░рддреА рд╣реИред  рдЖрдк рдкрд░рдлреЗрдХреНрдЯ рд╡реНрдпреВ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд╕рдордп рдХрд╣рд╛рдБ рдмрд┐рддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bb5/cd2/e4a/bb5cd2e4a54d4f71d832482217233281.png"><br><br>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рддрд╛рд░ рдкреИрджрд╛ рдХрд░ рд░рд╣рд╛ рд╣реИред  рд╕реБрдзрд╛рд░ рд╕реНрд╡рдпрдВ рд╣реА рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реИ: рд╣рдо рд╕рднреА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рд╕реНрдЯреНрд░рд┐рдВрдЧрд░рдмрд┐рд▓реНрдбрд░реНрд╕ рд╕реЗ рдмрджрд▓ рджреЗрддреЗ рд╣реИрдВред  рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ, рд╣рдореЗрдВ 20-30% рдХреА рдЙрддреНрдкрд╛рджрдХрддрд╛ рд╡реГрджреНрдзрд┐ рдорд┐рд▓рддреА рд╣реИред  рдЙрддреНрдкрд╛рджрди рдкрд░ рдирд┐рд░реНрднрд░, рдкреБрд░рд╛рдиреЗ рд╢реЗрдбреНрдпреВрд▓ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рджреЗрдЦреЗрдВ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/060/d63/21d/060d6321d41fa993d80d7b9d19d2d95c.png"><br><br>  "рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рдордЭреЗрдВ" рдирд┐рдпрдо рдХреЗрд╡рд▓ рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдмрд╛рддрдЪреАрдд рдХреИрд╕реЗ рдЪрд▓ рд░рд╣реА рд╣реИ, рд╕рдВрджреЗрд╢ рдХреИрд╕реЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдмрд▓реНрдХрд┐ рдЗрд╕ рдкреНрд░рдгрд╛рд▓реА рдХреЛ рдореЙрдбрд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВред <br><br>  рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдЧреНрд░рд╛рдл рдмреИрдВрдбрд╡рд┐рдбреНрде рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдпрджрд┐ рдЖрдк рдкреВрд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдХрддрд╛рд░рдмрджреНрдз рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдереНрд░реВрдкреБрдЯ рдХреЗрд╡рд▓ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ - рдирдП рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдЖрдЧрдорди рдХреА рдЧрддрд┐ред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдПрдХ рдмрд╛рд░ рдореЗрдВ 80 рд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрджреЗрд╢ рдирд╣реАрдВ рдереЗ, рдЗрд╕рд▓рд┐рдП рдЗрд╕ рдЕрдиреБрд╕реВрдЪреА рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред <br><br>  рдкреНрд▓рдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред  рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рднреА рдШрд░реЗрд▓реВ рдЙрдкрдХрд░рдг рдХреЗ рдкреНрд░рд▓реЗрдЦрди рдХреЛ рдЦреЛрд▓рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╡рд╣рд╛рдВ рд▓рд┐рдЦрд╛ рдЬрд╛рдПрдЧрд╛: рдпрджрд┐ рдЙрдкрдХрд░рдг рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдкреНрд▓рдЧ рдЖрдЙрдЯрд▓реЗрдЯ рдореЗрдВ рдбрд╛рд▓рд╛ рдЧрдпрд╛ рд╣реИред  рдбрд┐рдмрдЧрд░ рдореЗрдВ рдХрдИ рдШрдВрдЯреЛрдВ рдХреЗ рдмрд╛рдж, рдореИрдВ рдЕрдХреНрд╕рд░ рдЦреБрдж рдХреЛ рдпрд╣ рд╕реЛрдЪрдХрд░ рдкрд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдореБрдЭреЗ рд╕рд┐рд░реНрдл рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдлрд┐рд░ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рдпрд╛ рдЪреБрдирдирд╛ рдерд╛ред <br><br>  "рдкреНрд▓рдЧ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ" рдирд┐рдпрдо рддрдереНрдпреЛрдВ рдФрд░ рдбреЗрдЯрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИред  рдбрд┐рдмрдЧрд┐рдВрдЧ WinDbg рдпрд╛ PerfView рдХреЛ рдкреНрд░реЛрдбрдХреНрд╢рди рдорд╢реАрдиреЛрдВ рдкрд░ рдЪрд▓рд╛рдиреЗ рд╕реЗ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдпрд╣ рддрдереНрдпреЛрдВ рдФрд░ рдбреЗрдЯрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдХреЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдпрджрд┐ рд╕реЗрд╡рд╛ рдЬрд╡рд╛рдм рдирд╣реАрдВ рджреЗ рд░рд╣реА рд╣реИ, рддреЛ рдпрд╣ рдмрд╕ рдирд╣реАрдВ рдЪрд▓ рд╕рдХрддреА рд╣реИред <br><br>  рдлреВрдЯ рдбрд╛рд▓реЛ рдФрд░ рдЬреАрддреЛред  рдпрд╣ рдкрд╣рд▓рд╛ рдФрд░ рд╢рд╛рдпрдж рдПрдХрдорд╛рддреНрд░ рдирд┐рдпрдо рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдбреАрдмрдЧрд┐рдВрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИред  рдпрд╣ рдкрд░рд┐рдХрд▓реНрдкрдирд╛, рдЙрдирдХреЗ рдкреНрд░рдЪрд╛рд░ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИред <br><br>  рд╣рдорд╛рд░реА рдПрдХ рд╕реЗрд╡рд╛ рдХреЛ рд░реЛрдХрдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рдерд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4f2/cff/169/4f2cff1697473f917e815384d773149a.png"><br><br>  рд╣рдо рдПрдХ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд░рддреЗ рд╣реИрдВ: рд╢рд╛рдпрдж рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдПрдХ рдЪрдХреНрд░ рд╣реИ рдЬреЛ рдХреБрдЫ рдЕрдВрддрд╣реАрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЖрдк рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЛрдВ рд╕реЗ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдПрдХ рд╡рд┐рдХрд▓реНрдк рдореЗрдореЛрд░реА рдбрдВрдк рд▓реЗрдирд╛ рд╣реИред  рд╣рдо <code>~*e!ClrStack</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбрдВрдк рдФрд░ рд╕рднреА рдереНрд░реЗрдбреНрд╕ рд╕реЗ рдХреЙрд▓-рд╕реНрдЯреИрдХ <code>~*e!ClrStack</code> ред  рд╣рдо рддреАрди рдзрд╛рд░рд╛рдУрдВ рдХреЛ рджреЗрдЦрдирд╛ рдФрд░ рджреЗрдЦрдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d3/a54/35b/1d3a5435b697646daaf802e2bd838c7e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f3/185/6b2/2f31856b23147722d7b3e534689572f8.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0f/ac7/760/d0fac7760f4e8e201d0f028c4deae23e.png"><br><br>  рдкрд╣рд▓рд╛ рдзрд╛рдЧрд╛ рдореЗрди рдореЗрдВ рд╣реИ, рджреВрд╕рд░рд╛ <code>OnStop()</code> рд╣реИрдВрдбрд▓рд░ рдореЗрдВ рд╣реИ, рдФрд░ рддреАрд╕рд░рд╛ рдзрд╛рдЧрд╛ рдХреБрдЫ рдЖрдВрддрд░рд┐рдХ рдХрд╛рд░реНрдпреЛрдВ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣рд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдорд╛рд░реА рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдЙрдЪрд┐рдд рдирд╣реАрдВ рд╣реИред  рдХреЛрдИ рд▓реВрдкрд┐рдВрдЧ рдирд╣реАрдВ рд╣реИ, рд╕рднреА рдзрд╛рдЧреЗ рдХрд┐рд╕реА рдЪреАрдЬ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рдЧрддрд┐рд░реЛрдзред <br><br>  рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛рдо рдХрд░рддреА рд╣реИред  рджреЛ рдХрд╛рд░реНрдп рд╣реИрдВ - рдЖрд░рдВрднреАрдХрд░рдг рдФрд░ рдХрд╛рд░реНрдп рдХрд░рдирд╛ред  рдкреНрд░рд╛рд░рдВрдн рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдиреЗрдХреНрд╢рди рдЦреЛрд▓рддрд╛ рд╣реИ, рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИред  рдЙрдирдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдзреНрд╡рдЬ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ <code>TaskCompletionSource</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд╣рдо рджреВрд╕рд░реА рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд░рддреЗ рд╣реИрдВ: рд╢рд╛рдпрдж рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рджреВрд╕рд░реЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрд╛рд░реНрдп рдХрд╛ рдЧрддрд┐рд░реЛрдз рд╣реИред  рдЗрд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░реНрдп рдХреЛ WinDbg рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрд▓рдЧ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0f/536/1cf/c0f5361cf09ba6cd40d9a72e6d5dfb06.png"><br><br>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдПрдХ рдХрд╛рд░реНрдп рдЧрд┐рд░ рдЧрдпрд╛, рдФрд░ рджреВрд╕рд░рд╛ рдирд╣реАрдВ рд╣реБрдЖред  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рд╣рдордиреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рджреЗрдЦрд╛: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> openAsync(); _initLock.SetResult(<span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre><br>  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдЯрд╛рд╕реНрдХ рдХрдиреЗрдХреНрд╢рди рдЦреЛрд▓рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдмрд╛рдж рдЯрд╛рд╕реНрдХ <code>TaskCompletionSource</code> рдХреЛ рд╕рдЪ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рдПрдХ рдЕрдкрд╡рд╛рдж рдпрд╣рд╛рдБ рдкрдбрд╝рддрд╛ рд╣реИ?  рддрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдирд╣реАрдВ рд╣реИред рд╕рддреНрдп рдкрд░, рдЗрд╕рд▓рд┐рдП рдЗрд╕ рдмрдЧ рдХреЛ рдареАрдХ рдХрд░рдирд╛ рдЗрд╕ рддрд░рд╣ рдерд╛: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> openAsync(); _initLock.SetResult(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(Exception ex) { _initLock.SetException(ex); }</code> </pre><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо рджреЛ рдкрд░рд┐рдХрд▓реНрдкрдирд╛рдУрдВ рдХреЛ рд╕рд╛рдордиреЗ рд░рдЦрддреЗ рд╣реИрдВ: рдЕрдирдВрдд рд▓реВрдк рдФрд░ рдЧрддрд┐рд░реЛрдзред  рдирд┐рдпрдо "рд╡рд┐рднрд╛рдЬрд┐рдд рдФрд░ рдЬреАрдд" рддреНрд░реБрдЯрд┐ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред  рдХреНрд░рдорд┐рдХ рдЕрдиреБрдорд╛рди рдРрд╕реА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЗрд╕ рдирд┐рдпрдо рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕рдордп рдХреЗ рд╕рд╛рде рд╡реЗ рдкреИрдЯрд░реНрди рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреЗ рд╣реИрдВред  рдФрд░ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рд╣рдо рд╡рд┐рднрд┐рдиреНрди рдХреНрд░рд┐рдпрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рддрд░реЛрддрд╛рдЬрд╛ рд╣реЛрдирд╛ред  рдпрд╣ рдирд┐рдпрдо рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЯреЗрдмрд▓ рд╕реЗ рдЙрдардиреЗ рдФрд░ рдЪрд▓рдиреЗ, рдкрд╛рдиреА рдкреАрдиреЗ, рдЬреВрд╕ рдпрд╛ рдХреЙрдлреА рдкреАрдиреЗ, рдХреБрдЫ рднреА рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ, рд▓реЗрдХрд┐рди рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЖрдкрдХреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рджреВрд░ рдХрд░рдирд╛ рд╣реИред <br><br>  рдПрдХ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рд╡рд┐рдзрд┐ рд╣реИ рдЬрд┐рд╕реЗ рдмрддрдЦ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡рд┐рдзрд┐ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рд╣рдореЗрдВ <i>рдмрддрдЦ</i> рдХреА рд╕рдорд╕реНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдЖрдк рдХрд┐рд╕реА рд╕рд╣рдХрд░реНрдореА рдХреЛ <i>рдмрддрдЦ рдХреЗ</i> рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЙрд╕реЗ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИ, рдмрд╕ рд╕реБрдиреЛ рдФрд░ рд╕рд╣рдордд рд╣реЛред  рдФрд░ рдЕрдХреНрд╕рд░, рд╕рдорд╕реНрдпрд╛ рдХреА рдкрд╣рд▓реА рдмрд╛рдд рдХреЗ рдмрд╛рдж, рдЖрдк рд╕реНрд╡рдпрдВ рдПрдХ рд╕рдорд╛рдзрд╛рди рдвреВрдВрдврддреЗ рд╣реИрдВред <br><br>  рдпрд╣ рдЖрдкрдХрд╛ рдмрдЧ рд╣реИред  рдореИрдВ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреНрд╡рд╛рд░рд╛ рдЗрд╕ рдирд┐рдпрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред <br><br>  рдПрдХ <code>AccessViolationException</code> рдореЗрдВ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдереАред  рдХреЙрд▓-рд╕реНрдЯреИрдХ рдореЗрдВ рджреЗрдЦрддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рджреЗрдЦрд╛ рдХрд┐ рдпрд╣ рддрдм рд╣реБрдЖ рдЬрдм рд╣рдордиреЗ sql рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рдЕрдВрджрд░ LinqToSql рдХреНрд╡реЗрд░реА рдЙрддреНрдкрдиреНрди рдХреАред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd2/849/7a6/fd28497a66853c5bcf17eaa9d978524a.png"><br><br>  рдЗрд╕ рдмрдЧ рд╕реЗ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдерд╛ рдХрд┐ рдХрд╣реАрдВ рди рдХрд╣реАрдВ рд╕реНрдореГрддрд┐ рдХреА рдЕрдЦрдВрдбрддрд╛ рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рд╣реЛрддрд╛ рд╣реИред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЙрд╕ рд╕рдордп рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд░рд┐рд╡рд░реНрддрди рдкреНрд░рдмрдВрдзрди рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ред  рдирддреАрдЬрддрди, рдХреБрдЫ рдШрдВрдЯреЛрдВ рдХреЗ рдмрд╛рдж рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдХрд┐ рдХреНрдпрд╛ рд╣реБрдЖ: рд╣рдордиреЗ рдЕрдкрдиреЗ рдЙрддреНрдкрд╛рджрди рдорд╢реАрдиреЛрдВ рдкрд░ .Net 4.5.2 рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f24/bc8/438/f24bc84388e43df0ad4e7af27c0bbc24.png"><br><br>  рддрджрдиреБрд╕рд╛рд░, рд╣рдо рдмрдЧ рдХреЛ Microsoft рдХреЛ рднреЗрдЬрддреЗ рд╣реИрдВ, рд╡реЗ рдЗрд╕рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдо рдЙрдирдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рддреЗ рд╣реИрдВ, рд╡реЗ .net 4.6.1 рдореЗрдВ рдмрдЧ рдХреЛ рдареАрдХ рдХрд░рддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/44a/c39/535/44ac39535a874ff0ea0f599a55f07252.png"><br><br>  рдореЗрд░реЗ рд▓рд┐рдП, рдпрд╣ Microsoft рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ 11 рдорд╣реАрдиреЛрдВ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдерд╛, рдмреЗрд╢рдХ, рд╣рд░ рджрд┐рди рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдореЗрдВ рд╢реБрд░реБрдЖрдд рд╕реЗ 11 рдорд╣реАрдиреЗ рд▓рдЧреЗред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдордиреЗ рдЙрдиреНрд╣реЗрдВ рджрд░реНрдЬрдиреЛрдВ рдЧреАрдЧрд╛рдмрд╛рдЗрдЯ рдореЗрдореЛрд░реА рдбрдВрдк рднреЗрдЬреЗ, рд╣рдордиреЗ рдЗрд╕ рддреНрд░реБрдЯрд┐ рдХреЛ рдкрдХрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реИрдХрдбрд╝реЛрдВ рдирд┐рдЬреА рдЕрд╕реЗрдВрдмрд▓реА рд▓рдЧрд╛рдИрдВред  рдФрд░ рдЗрд╕ рд╕рдордп, рд╣рдо рдЕрдкрдиреЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдпрд╣ рдирд╣реАрдВ рдмрддрд╛ рд╕рдХрддреЗ рдереЗ рдХрд┐ Microsoft рдХреЛ рджреЛрд╖ рджреЗрдирд╛ рд╣реИ, рд╣рдореЗрдВ рдирд╣реАрдВред  рдЗрд╕рд▓рд┐рдП, рдмрдЧ рд╣рдореЗрд╢рд╛ рддреБрдореНрд╣рд╛рд░рд╛ рд╣реИред <br><br>  рдкрд╛рдБрдЪ рдХреНрдпреЛрдВред  рд╣рдо рдЕрдкрдиреА рдХрдВрдкрдиреА рдореЗрдВ рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рд▓реЙрдЧ рдПрдХрддреНрд░реАрдХрд░рдг рдХреЗ рд▓рд┐рдП рд▓реЛрдЪрджрд╛рд░ рдЕрдЪреНрдЫрд╛ рд╣реИред <br><br>  рдЖрдк рд╕реБрдмрд╣ рдХрд╛рдо рдкрд░ рдЖрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдЭреВрда рдмреЛрд▓рддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a1/c80/09b/1a1c8009b49f9c288b3c4b29daf194cc.png"><br><br>  рдкрд╣рд▓рд╛ рд╕рд╡рд╛рд▓ рдпрд╣ рд╣реИ рдХрд┐ рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ рдХреНрдпреЛрдВ рд╣реИ?  рд▓рдЧрднрдЧ рддреБрд░рдВрдд рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ - рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдЧрд┐рд░ рдЧрдПред  рд╡реЗ рдкреВрд░реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдХрд╛рдо рдХрд╛ рд╕рдордиреНрд╡рдп рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЬрдм рд╡реЗ рдЧрд┐рд░рддреЗ рд╣реИрдВ, рддреЛ рдкреВрд░рд╛ рдХреНрд▓рд╕реНрдЯрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджреЗрдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реИред  рд╡реЗ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдЙрдареЗ?  рд╢рд╛рдпрдж рдПрдХ рдСрдЯреЛ рд╢реБрд░реВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП?  рдЙрддреНрддрд░ рдХреА рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдордиреЗ рдкрд╛рдпрд╛ рдХрд┐ рдкреНрд▓рдЧрдЗрди рд╕рдВрд╕реНрдХрд░рдг рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рддрд╛ рд╣реИред  рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдЖрдЦрд┐рд░ рдХреНрдпреЛрдВ рдЧрд┐рд░ рдЧрдП?  рдЙрдиреНрд╣реЗрдВ OOM рдХрд┐рд▓рд░ рджреНрд╡рд╛рд░рд╛ рдорд╛рд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдпрд╣ рд▓рд┐рдирдХреНрд╕ рдорд╢реАрдиреЛрдВ рдкрд░ рдПрдХ рдРрд╕реА рдЪреАрдЬ рд╣реИ, рдЬреЛ рд╕реНрдореГрддрд┐ рдХреА рдХрдореА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдмрдВрдж рдХрд░ рджреЗрддреА рд╣реИред  рдкрд░реНрдпрд╛рдкреНрдд рдореЗрдореЛрд░реА рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИ?  рдХреНрдпреЛрдВрдХрд┐ рдЕрджреНрдпрддрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рд╣реЛ рдЧрдИ рд╣реИ, рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рд▓реЙрдЧ рд╕реЗ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╣реИред  рдпрд╣ рдкрд╣рд▓реЗ рдХреНрдпреЛрдВ рдХрд╛рдо рдХрд░рддрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЕрдм рдирд╣реАрдВ?  рдФрд░ рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рдПрдХ рд╕рдкреНрддрд╛рд╣ рдкрд╣рд▓реЗ рдирдП рдиреЛрдб рдЬреЛрдбрд╝реЗ рдереЗ, рдЗрд╕рд▓рд┐рдП рдорд╛рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХреЛ рдЕрдиреБрдХреНрд░рдорд┐рдд, рдХреНрд▓рд╕реНрдЯрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдореЗрдореЛрд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереАред <br><br>  рд╕рд╡рд╛рд▓ "рдХреНрдпреЛрдВ?"  рд╕рдорд╕реНрдпрд╛ рдХреА рдЬрдбрд╝ рдХреЛ рдЦреЛрдЬрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВред  рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо рдХрдИ рдмрд╛рд░ рд╕рд╣реА рд░рд╛рд╕реНрддреЗ рдХреЛ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдкреВрд░реНрдг рдлрд┐рдХреНрд╕ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: рд╣рдо рдкреНрд▓рдЧрдЗрди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдореЗрдореЛрд░реА рдмрдврд╝рд╛рддреЗ рд╣реИрдВ рдФрд░ рднрд╡рд┐рд╖реНрдп рдХреЗ рд▓рд┐рдП рдПрдХ рдиреЛрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ, рдЕрдЧрд▓реА рдмрд╛рд░, рдЬрдм рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдирдП рдиреЛрдбреНрд╕ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдорд╛рд╕реНрдЯрд░ рдкрд░ рдкрд░реНрдпрд╛рдкреНрдд рдореЗрдореЛрд░реА рд╣реИ рдиреЛрдбреНрд╕ред <br><br>  рдЗрди рдирд┐рдпрдореЛрдВ рдХрд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЖрдкрдХреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдкреНрд░рдХрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЗрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХрд╛ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣ рдмреЗрд╣рддрд░ рд╣реЛрдЧрд╛ рдпрджрд┐ рдпреЗ рдирд┐рдпрдо рдПрдХ рдкреНрд░рдгрд╛рд▓реА рдХрд╛ рдЧрдарди рдХрд░реЗрдВред  рдФрд░ рдРрд╕реА рдПрдХ рдкреНрд░рдгрд╛рд▓реА рд╣реИ, рдЗрд╕реЗ рдбреАрдмрдЧрд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><h2>  рдбреАрдмрдЧрд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо </h2><br>  рдкрд╣рд▓реА рдмрд╛рд░ рдореИрдВрдиреЗ рдЬреЙрди рд░реЛрдмрд┐рдиреНрд╕ рдХреА рдкреБрд╕реНрддрдХ рдбреАрдмрдЧрд┐рдВрдЧ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдореЗрдВ рдбреАрдмрдЧрд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝рд╛ред  рдпрд╣ рдбрд┐рдмрдЧрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1e/2af/a07/f1e2afa078f2ab8587467660b25df052.png"><br><br>  рдпрд╣ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдЗрд╕рдХреЗ рдЖрдВрддрд░рд┐рдХ рдкрд╛рд╢ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ - рдПрдХ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ред <br><br>  рдЪрдХреНрд░ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдореЛрдбрд╝ рдХреЗ рд╕рд╛рде рд╣рдо рдЦреБрдж рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: рдХреНрдпрд╛ рд╣рдо рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирддреЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ?  рдпрджрд┐ рд╣рдо рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХреЛ рдЖрдЧреЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ, рдЬрд╛рдБрдЪ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдо рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирдпрд╛ рдирд╣реАрдВ рд╕реАрдЦрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдирдП рд╕рд┐рд░реЗ рд╕реЗ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред  рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рджреЛ рд╡рд░реНрддрдорд╛рди рдкреНрд░рд╢реНрди: рдЖрдкрдиреЗ рдХрд┐рди рдкрд░рд┐рдХрд▓реНрдкрдирд╛рдУрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рдЕрдм рдЖрдк рдХрд┐рд╕ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВред <br><br>  рдпрд╣ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдбрд┐рдмрдЧрд┐рдВрдЧ рдирд┐рдпрдореЛрдВ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕рд╣рдордд рд╣реИ, рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣рдордиреЗ рдКрдкрд░ рдмрд╛рдд рдХреА рдереА: рддреНрд░реБрдЯрд┐ рдХреЛ рджреЛрд╣рд░рд╛рдПрдВ - рдпрд╣ рдЖрдкрдХреА рдмрдЧ рд╣реИ, рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ - рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рдордЭреЗрдВ, рдПрдХ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рддреИрдпрд╛рд░ рдХрд░реЗрдВ - рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░реЗрдВ рдФрд░ рдЬреАрддреЗрдВ, рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░реЗрдВ - рдкреНрд▓рдЧ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдпрд╣ рддрдп рд╣реЛ рдЧрдпрд╛ рд╣реИ - рдкрд╛рдВрдЪ рдХреНрдпреЛрдВред <br><br>  рдЗрд╕ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рд▓рд┐рдП рдореЗрд░реЗ рдкрд╛рд╕ рдПрдХ рдЕрдЪреНрдЫрд╛ рдЙрджрд╛рд╣рд░рдг рд╣реИред  рд╣рдорд╛рд░реА рд╡реЗрдм рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдкрд░ рдПрдХ рдЕрдкрд╡рд╛рдж рдЧрд┐рд░ рдЧрдпрд╛ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/206/a57/d71/206a57d711a7c783c9f22389120d1bf8.png"><br><br>  рд╣рдорд╛рд░рд╛ рдкрд╣рд▓рд╛ рд╡рд┐рдЪрд╛рд░ рд╣рдорд╛рд░реА рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдпрд╣ рдЕрднреА рднреА рд╣рдорд╛рд░реА рд╕рдорд╕реНрдпрд╛ рд╣реИред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рддреНрд░реБрдЯрд┐ рдХреЛ рджреЛрд╣рд░рд╛рдПрдВред  рдкреНрд░рддреНрдпреЗрдХ рд╣рдЬрд╛рд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЗ рд▓рд┐рдП, рд▓рдЧрднрдЧ рдПрдХ <code>StructureMapException</code> , рдЗрд╕рд▓рд┐рдП рд╣рдо рд╕рдорд╕реНрдпрд╛ рдХреЛ рдкреБрди: рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рджреВрд╕рд░реЗ, рд╣рдо рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд░рд╣реЗ рд╣реИрдВ: рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЙрд╕ рд╕рдордп рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП http рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ, рдЬрдм рд╕реНрдЯреНрд░рдХреНрдЪреНрдпреЛрд░рдкрд╛рдЗрдк рдПрдХ рдирдИ рдирд┐рд░реНрднрд░рддрд╛ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣рд╛ рд╣реИ, рддреЛ рдПрдХ рдЕрдкрд╡рд╛рдж рд╣реЛрддрд╛ рд╣реИред <br><br>  рддреАрд╕рд░рд╛, рд╣рдо рдЗрд╕ рдмрд╛рдд рдХреА рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╕реНрдЯреНрд░рдХреНрдЪрд░реНрдбрдкреЙрдкрд░ рдПрдХ рд░реИрдкрд░ рд╣реИ рдФрд░ рдЕрдВрджрд░ рдХреБрдЫ рдРрд╕рд╛ рд╣реИ рдЬреЛ рдЖрдВрддрд░рд┐рдХ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХрддрд╛ рд╣реИред  рд╣рдо procdump.exe рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рддреЗ рд╣реИрдВред <br><br><pre> <code class="hljs powershell">procdump.exe <span class="hljs-literal"><span class="hljs-literal">-ma</span></span> <span class="hljs-literal"><span class="hljs-literal">-e</span></span> <span class="hljs-operator"><span class="hljs-operator">-f</span></span> StructureMap w3wp.exe</code> </pre><br>  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЕрдВрджрд░ рдПрдХ <code>NullReferenceException</code> ред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2da/773/500/2da773500ffd18d1c28b91f6ff5b45e3.png"><br><br>  рдЗрд╕ рдЕрдкрд╡рд╛рдж рдХреЗ рдХреЙрд▓-рд╕реНрдЯреИрдХ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд╕реНрдЯреНрд░рдХреНрдЪреБрд░реЗрд╕реНрдкреЛрд░реНрдЯ рдореЗрдВ рдСрдмреНрдЬреЗрдХреНрдЯ-рдмрд┐рд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ рд╣реА рд╣реЛрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5fd/347/8fc/5fd3478fc54df6295244471a33560a3d.png"><br><br>  рд▓реЗрдХрд┐рди <code>NullReferenceException</code> рд╕рдорд╕реНрдпрд╛ рд╕реНрд╡рдпрдВ рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ рдкрд░рд┐рдгрд╛рдо рд╣реИред  рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХрд╣рд╛рдВ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХреМрди рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред <br><br>  рд╣рдордиреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдХреЛ рдЖрдЧреЗ рд░рдЦрд╛: рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рд╣рдорд╛рд░рд╛ рдХреЛрдб рдПрдХ рдЕрд╢рдХреНрдд рдирд┐рд░реНрднрд░рддрд╛ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рджреЗрдЦрддреЗ рд╣реБрдП рдХрд┐ .Net рдореЗрдВ рд╕рднреА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдПрдХ-рдПрдХ рдХрд░рдХреЗ рд╕реНрдерд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдЕрдЧрд░ рд╣рдо <code>NullReferenceException</code> рдкрд╣рд▓реЗ рдЭреВрда рдмреЛрд▓рдиреЗ рд╡рд╛рд▓реЗ рдвреЗрд░ рдкрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ, рддреЛ рд╡реЗ рд╕рдВрднрд╡рддрдГ рдЙрд╕ рдХреЛрдб рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬреЛ рдЕрдкрд╡рд╛рдж рдХреЛ рдлреЗрдВрдХ рджрд┐рдпрд╛ рдерд╛ред <br><br>  WinDbg рдореЗрдВ рдПрдХ рдХрдорд╛рдВрдб рд╣реЛрддреА рд╣реИ - рд▓рд┐рд╕реНрдЯ рдирд┐рдпрд░ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ <code>!lno</code> ред  рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рдЬрд┐рд╕ рд╡рд╕реНрддреБ рдореЗрдВ рд╣рдо рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рд╡рд╣ рд▓реИрдореНрдмреНрдбрд╛ рдлрд╝рдВрдХреНрд╢рди рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> CompoundInterceptor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindInterceptor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Type type</span></span></span><span class="hljs-function">)</span></span> { CompoundInterceptop interceptor; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_analyzedInterceptors.TryGetValue(type, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> interceptor)) { <span class="hljs-keyword"><span class="hljs-keyword">lock</span></span> (_locker) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_analyzedInterceptors.TryGetValue(type, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> interceptor)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> interceptorArray = _interceptors.FindAll(i =&gt; i.MatchesType(type)); interceptor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CompoundInterceptor(interceptorArray); _analyzedInterceptors.Add(type, interceptor); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> interceptor; }</code> </pre><br>  рдЗрд╕ рдХреЛрдб рдореЗрдВ, рд╣рдо рдкрд╣рд▓реЗ <code>_analyzedInterceptors</code> рдХрд┐ рдХреНрдпрд╛ <code>Dictionary</code> рдореЗрдВ рдореВрд▓реНрдп <code>_analyzedInterceptors</code> рдореЗрдВ <code>_analyzedInterceptors</code> рд╣реИ, рдЕрдЧрд░ рд╣рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓рд╛, рддреЛ <code>lock</code> рдЕрдВрджрд░ рдПрдХ рдирдпрд╛ рдорд╛рди рдЬреЛрдбрд╝реЗрдВред <br><br>  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдпрд╣ рдХреЛрдб рдХрднреА рднреА рд╢реВрдиреНрдп рдирд╣реАрдВ рд▓реМрдЯ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рд╕рдорд╕реНрдпрд╛ <code>_analyzedInterceptors</code> , рдЬреЛ рдПрдХ рдмрд╣реБ-рдереНрд░реЗрдбреЗрдб рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдПрдХ рдирд┐рдпрдорд┐рдд <code>Dictionary</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рди рдХрд┐ <code>ConcurrentDictionary</code> ред <br><br>  рд╕рдорд╕реНрдпрд╛ рдХреА рдЬрдбрд╝ рдкрд╛рдИ рдЧрдИ, рд╣рдордиреЗ рд╕реНрдЯреНрд░рдХреНрдЪреБрд░рдкреЗрдЬрд╝ рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛, рддреИрдирд╛рдд рдХрд┐рдпрд╛, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд┐рдпрд╛ рдХрд┐ рд╕рдм рдХреБрдЫ рддрдп рд╣реЛ рдЧрдпрд╛ рдерд╛ред  рд╣рдорд╛рд░реЗ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдЕрдВрддрд┐рдо рдЪрд░рдг "рд╕реАрдЦрдирд╛ рдФрд░ рдмрддрд╛рдирд╛" рд╣реИред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рд╕рднреА <code>Dictionary</code> рдХреЗ рдХреЛрдб рдореЗрдВ рдПрдХ рдЦреЛрдЬ рдереА рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд▓реЙрдХ рдФрд░ рдЬрд╛рдБрдЪ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрди рд╕рднреА рдХрд╛ рд╕рд╣реА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рддреЛ, рдбрд┐рдмрдЧрд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдПрдХ рд╕рд╣рдЬ рдЬреНрдЮрд╛рди рдпреБрдХреНрдд рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╣реИ рдЬреЛ рд╕рдордп рдмрдЪрд╛рддрд╛ рд╣реИред  рд╡рд╣ рдкрд░рд┐рдХрд▓реНрдкрдирд╛ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ - рдФрд░ рдпрд╣ рдбрд┐рдмрдЧрд┐рдВрдЧ рдореЗрдВ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рд╣реИред <br><br><h2>  рдкреНрд░реЛрдПрдХреНрдЯрд┐рд╡ рдбрд┐рдмрдЧрд┐рдВрдЧ </h2><br>  рдЗрд╕рдХреЗ рдореВрд▓ рдореЗрдВ, рд╕рдХреНрд░рд┐рдп рдбрд┐рдмрдЧрд┐рдВрдЧ рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ рджреЗрддрд╛ рд╣реИ "рдЬрдм рдПрдХ рдмрдЧ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ рддреЛ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИред" <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7aa/718/900/7aa71890010a8c32900fa5b01e0b690a.png"><br><br>  рдмрдЧ рдЬреАрд╡рдирдЪрдХреНрд░ рдЖрд░реЗрдЦ рдореЗрдВ рд╕рдХреНрд░рд┐рдп рдбрд┐рдмрдЧрд┐рдВрдЧ рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдорд╣рддреНрд╡ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be0/f6f/06c/be0f6f06cb0c810ca6b19cb861d998c4.png"><br><br>  рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдмрдЧ рдЬрд┐рддрдирд╛ рд▓рдВрдмрд╛ рд░рд╣рддрд╛ рд╣реИ, рдЙрддрдиреЗ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрди (рд╕рдордп) рд╣рдо рдЙрд╕ рдкрд░ рдЦрд░реНрдЪ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдбреАрдмрдЧрд┐рдВрдЧ рдирд┐рдпрдо рдФрд░ рдбреАрдмрдЧрд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рд╣рдореЗрдВ рдЙрд╕ рдХреНрд╖рдг рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рдмрдЧ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╣рдо рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЖрдЧреЗ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдо рдЙрд╕ рд╕рдордп рдЕрдкрдирд╛ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬрдм рдмрдЧ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдореЗрд░рд╛ рдорд╛рдирдирд╛ тАЛтАЛрд╣реИ рдХрд┐ рд╣рдореЗрдВ рдиреНрдпреВрдирддрдо рдбреАрдмрдЧ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдЙрддреНрдкрд╛рдж (рдПрдордбреАрдкреА) рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЕрд░реНрдерд╛рдд рдРрд╕рд╛ рдЙрддреНрдкрд╛рдж рдЬрд┐рд╕рдореЗрдВ рдЙрддреНрдкрд╛рджрди рдореЗрдВ рдХреБрд╢рд▓ рдбрд┐рдмрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХрд╛ рдиреНрдпреВрдирддрдо рдЖрд╡рд╢реНрдпрдХ рд╕реЗрдЯ рд╣реЛред <br><br>  рдПрдордбреАрдкреА рдореЗрдВ рджреЛ рдЪреАрдЬреЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: рдлрд┐рдЯрдиреЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдФрд░ рдпреВрдПрд╕рдИ рд╡рд┐рдзрд┐ред <br><br>  рд╕реНрд╡рд╛рд╕реНрдереНрдп рд╕реБрд╡рд┐рдзрд╛рдПрдБред  рдиреАрд▓ рдмрд┐рд▓реНрдбрд┐рдВрдЧ рдФрд░ рдкреБрд╕реНрддрдХ рдмрд┐рд▓реНрдбрд┐рдВрдЧ рдЗрд╡реЛрд▓реНрдпреВрд╢рдирд░реА рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдореЗрдВ рд╕рд╣-рд▓реЗрдЦрдХреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдиреНрд╣реЗрдВ рд▓реЛрдХрдкреНрд░рд┐рдп рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдкреБрд╕реНрддрдХ рдХреЗ рд▓реЗрдЦрдХреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЗрд╕рдХреЗ рдореВрд▓ рдореЗрдВ, рдлрд┐рдЯрдиреЗрд╕ рдлрд╝рдВрдХреНрд╢рдВрд╕, рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреЗ рд╣реИрдВ: рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреЛрдгреЛрдВ рдкрд░ рдХрд╛рдЯ рд╕рдХрддреЗ рд╣реИрдВ, рдРрд╕реЗ рд╡рд╛рд╕реНрддреБрд╢рд┐рд▓реНрдк рдЧреБрдгреЛрдВ рдХреЛ <i>рдмрдирд╛рдП рд░рдЦрдирд╛</i> рдЬреИрд╕реЗ <i>рд░рдЦрд░рдЦрд╛рд╡</i> , <i>рдкреНрд░рджрд░реНрд╢рди</i> , рдЖрджрд┐, рдФрд░ рдРрд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП - рдлрд┐рдЯрдиреЗрд╕ рд╕рдорд╛рд░реЛрд╣ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдлрд┐рдЯрдиреЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдкрд░реАрдХреНрд╖рдг рд╣реИред <br><br>  рдПрдордбреАрдкреА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдлрд┐рдЯрдиреЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдПрдХ рдбрд┐рдмрдЧреИрдмрд┐рд▓рд┐рдЯреА рдЯреЗрд╕реНрдЯ рд╣реИред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдХреБрдЫ рднреА рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: NUnit, MSTest рдЗрддреНрдпрд╛рджрд┐ред  рд▓реЗрдХрд┐рди, рдЪреВрдВрдХрд┐ рдбрд┐рдмрдЧрд┐рдВрдЧ рдЕрдХреНрд╕рд░ рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ, рдореИрдВ рдЙрджрд╛рд╣рд░рдг рдХреЗ рддреМрд░ рдкрд░ Pester (рдкрд╛рд╡рд░рд╢реЗрд▓ рдпреВрдирд┐рдЯ рдЯреЗрд╕реНрдЯрд┐рдВрдЧ рдлреНрд░реЗрдорд╡рд░реНрдХ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реВрдВрдЧрд╛ред  рдЗрд╕рдХрд╛ рдкреНрд▓рд╕ рдпрд╣рд╛рдБ рд╣реИ рдХрд┐ рдпрд╣ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдХреЗ рд╕рд╛рде рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрдВрдкрдиреА рдХреЗ рдЕрдВрджрд░ рд╣рдо рд╕рд╣рдордд рд╣реИрдВ рдХрд┐ рд╣рдо рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ;  рд▓реЙрдЧрд┐рдВрдЧ рдХрд░рддреЗ рд╕рдордп рд╣рдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреИрдЯрд░реНрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ;  pdb рдЕрдХреНрд╖рд░ рд╣рдореЗрд╢рд╛ рдкреНрд░рддреАрдХ рд╕рд░реНрд╡рд░ рдХреЛ рджрд┐рдП рдЬрд╛рдиреЗ рдЪрд╛рд╣рд┐рдПред  рдпрд╣ рд╡реЗ рд╕рдореНрдореЗрд▓рди рд╣реЛрдВрдЧреЗ рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рдЕрдкрдиреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ рдкрд░рдЦреЗрдВрдЧреЗред <br><br><pre> <code class="hljs powershell">Describe <span class="hljs-string"><span class="hljs-string">'Debuggability'</span></span> { It <span class="hljs-string"><span class="hljs-string">'Contains line numbers in PDBs'</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">Get-ChildItem</span></span> <span class="hljs-literal"><span class="hljs-literal">-Path</span></span> . <span class="hljs-literal"><span class="hljs-literal">-Recurse</span></span> <span class="hljs-literal"><span class="hljs-literal">-Include</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>(<span class="hljs-string"><span class="hljs-string">"*.exe"</span></span>, <span class="hljs-string"><span class="hljs-string">"*. dll "</span></span>) ` | <span class="hljs-built_in"><span class="hljs-built_in">ForEach-Object</span></span> { &amp;symchk.exe /v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$_</span></span></span><span class="hljs-string">"</span></span> /s <span class="hljs-string"><span class="hljs-string">"\\network\"</span></span> *&gt;&amp;<span class="hljs-number"><span class="hljs-number">1</span></span> } ` | <span class="hljs-built_in"><span class="hljs-built_in">Where-Object</span></span> { <span class="hljs-variable"><span class="hljs-variable">$_</span></span> <span class="hljs-operator"><span class="hljs-operator">-like</span></span> <span class="hljs-string"><span class="hljs-string">"*Line nubmers: TRUE*"</span></span> } ` | Should <span class="hljs-operator"><span class="hljs-operator">-Not</span></span> тАУBeNullOrEmpty } }</code> </pre><br>  рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдЗрд╕ рдмрд╛рдд рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕рднреА pdb рдЕрдХреНрд╖рд░ рдкреНрд░рддреАрдХ рд╕рд░реНрд╡рд░ рдХреЛ рджрд┐рдП рдЧрдП рдереЗ рдФрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рджрд┐рдП рдЧрдП рдереЗ, рдпрд╛рдиреА рдЬрд┐рдирдХреЗ рдЕрдВрджрд░ рд▓рд╛рдЗрди рдирдВрдмрд░ рдереЗред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрддреНрдкрд╛рджрди рдХрд╛ рд╕рдВрдХрд▓рд┐рдд рд╕рдВрд╕реНрдХрд░рдг рд▓реЗрдВ, рд╕рднреА exe рдФрд░ dll рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдвреВрдВрдвреЗрдВ, рдЗрди рд╕рднреА рдмрд╛рдпрдиреЗрд░рд┐рдЬрд╝ рдХреЛ syschk.exe рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╛рд╕ рдХрд░реЗрдВ, рдЬреЛ рд╡рд┐рдВрдбреЛрдЬрд╝ рдкреИрдХреЗрдЬ рдХреЗ рд▓рд┐рдП рдбреАрдмрдЧрд┐рдВрдЧ рдЯреВрд▓ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИред  Syschk.exe рд╕реБрд╡рд┐рдзрд╛ рдмрд╛рдЗрдирд░реА рдХреЛ рдкреНрд░рддреАрдХ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдЬрд╛рдВрдЪрддреА рд╣реИ рдФрд░, рдЕрдЧрд░ рдпрд╣ рд╡рд╣рд╛рдВ рдПрдХ pdb рдлрд╝рд╛рдЗрд▓ рдкрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рд░рд┐рдкреЛрд░реНрдЯ рдкреНрд░рд┐рдВрдЯ рдХрд░рддрд╛ рд╣реИред  рд░рд┐рдкреЛрд░реНрдЯ рдореЗрдВ, рд╣рдо "рд▓рд╛рдЗрди рдирдВрдмрд░: TRUE" рд▓рд╛рдЗрди рдХреА рддрд▓рд╛рд╢ рдХрд░рддреЗ рд╣реИрдВред  рдФрд░ рдЕрдВрддрд┐рдо рдореЗрдВ рд╣рдо рдЬрд╛рдВрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдкрд░рд┐рдгрд╛рдо "рд╢реВрдиреНрдп рдпрд╛ рд░рд┐рдХреНрдд" рдирд╣реАрдВ рд╣реИред <br><br>  рдЗрди рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдПрдХ рд╕рддрдд рддреИрдирд╛рддреА рдкрд╛рдЗрдкрд▓рд╛рдЗрди рдореЗрдВ рдПрдХреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдФрд░ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг рдмреАрдд рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдлрд┐рдЯрдиреЗрд╕ рдлрд╝рдВрдХреНрд╢рди рд▓реЙрдиреНрдЪ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред <br><br>  рдореИрдВ рдХреЛрдб рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХреЗ рд╕рд╛рде рдПрдХ рдФрд░ рдЙрджрд╛рд╣рд░рдг рджрд┐рдЦрд╛рдКрдВрдЧрд╛ред <br><br><pre> <code class="hljs powershell">Describe <span class="hljs-string"><span class="hljs-string">'Debuggability'</span></span> { It <span class="hljs-string"><span class="hljs-string">'Contains package for logging'</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">Get-ChildItem</span></span> <span class="hljs-literal"><span class="hljs-literal">-Path</span></span> . <span class="hljs-literal"><span class="hljs-literal">-Recurse</span></span> <span class="hljs-literal"><span class="hljs-literal">-Name</span></span> <span class="hljs-string"><span class="hljs-string">"packages.config"</span></span> ` | <span class="hljs-built_in"><span class="hljs-built_in">ForEach-Object</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">Get-Content</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$_</span></span></span><span class="hljs-string">"</span></span> } ` | <span class="hljs-built_in"><span class="hljs-built_in">Where-Object</span></span> { <span class="hljs-variable"><span class="hljs-variable">$_</span></span> <span class="hljs-operator"><span class="hljs-operator">-like</span></span> <span class="hljs-string"><span class="hljs-string">"*nlog*"</span></span> } ` | Should <span class="hljs-operator"><span class="hljs-operator">-Not</span></span> тАУBeNullOrEmpty } }</code> </pre><br>  рдкрд░реАрдХреНрд╖рдг рдореЗрдВ, рд╣рдо рд╕рднреА рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рд▓реЗрддреЗ рд╣реИрдВред рдлрд╛рдЗрд▓ рдХреЛ рдмрдВрдж рдХрд░ рджреЗрддреЗ рд╣реИрдВ рдФрд░ рдЙрди рдореЗрдВ рдиреЛрдбрд▓ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЦреЛрдЬрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВред  рдЗрд╕реА рддрд░рд╣, рд╣рдо рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕рд╣рд╕рдВрдмрдВрдз рдЖрдИрдбреА рдлрд╝реАрд▓реНрдб рдХреЛ рдиреЛрдб рдлрд╝реАрд▓реНрдб рдХреЗ рдЕрдВрджрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЙрдкрдпреЛрдЧ рдХреЗ рддрд░реАрдХреЗред  рдПрдордбреАрдкреА рдХреЗ рдЕрдВрддрд┐рдо рдЪреАрдЬрд╝ рдореЗрдВ рд╡реЗ рдореИрдЯреНрд░рд┐рдХреНрд╕ рд╣реЛрддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br><br>  рдореИрдВ USE рдкрджреНрдзрддрд┐ рдХреЗ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реВрдВрдЧрд╛, рдЬрд┐рд╕реЗ рдмреНрд░реЗрдВрдбрди рдЧреНрд░реЗрдЧ рдиреЗ рд▓реЛрдХрдкреНрд░рд┐рдп рдмрдирд╛рдпрд╛ рдерд╛ред  :     - ,    : utilization (), saturation (), errors (),     . <br><br>  ,  Circonus (  monitoring soft),  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a>     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70a/f58/382/70af583826e562f796fb0473c520db15.png"><br><br>   , ,  ,   тАФ    ,  тАФ     ,  тАФ   ,  .       ,   USE-       . <br><br>   - -, ,  ,      : <br><br><ul><li>  тАФ   . <br></li><li>  тАФ  . <br></li><li>  тАФ   . <br></li></ul><br>         ,      .   ,       . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6cc/f89/7ab/6ccf897ab0758b344dfc940eb9be548b.png"><br><br>  ,   , тАФ       .   ,   ,  4-5% CPU. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7e1/9a3/f4a/7e19a3f4a52547627e150401b0f1e7e7.png"><br><br>   тАФ    ,    .   etrace. <br><br><pre> <code class="hljs powershell">etrace -<span class="hljs-literal"><span class="hljs-literal">-kernel</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Process</span></span> ^ -<span class="hljs-literal"><span class="hljs-literal">-where</span></span> ProcessName=Ex5<span class="hljs-literal"><span class="hljs-literal">-Service</span></span> ^ -<span class="hljs-literal"><span class="hljs-literal">-clr</span></span> Exception</code> </pre><br>    realtime   ETW-events     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f1a/d13/52b/f1ad1352bc6e02e3a660f64ce90fdc87.png"><br><br> ,   <code>OutOfMemoryException</code> . ,  ,     ?    тАФ   ,   ,      . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (ShouldContinue()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Do(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (OutOfMemoryException) { Thread.Sleep(<span class="hljs-number"><span class="hljs-number">100</span></span>); GC.CollectionCount(<span class="hljs-number"><span class="hljs-number">2</span></span>); GC.WaitForPendingFinalizers(); } }</code> </pre><br>   тАФ -   .   ,      . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Cache</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ConcurrentDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, String&gt; _items = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> DateTime _nextClearTime = DateTime.UtcNow; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetFromCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_nextClearTime &lt; DateTime.UtcNow) { _nextClearTime = DateTime.UtcNow.AddHours(<span class="hljs-number"><span class="hljs-number">1</span></span>); _items.Clear(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _items[key]; } }</code> </pre><br>   ,      .     ,     .     USE  . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0c6/174/634/0c6174634447a3bd1af03adf10c14cbe.png"><br><br>     тАФ  ,   . <br><br> ,   ,     . <br><br><ul><li>  тАФ    .  , ,    тАФ    .    тАФ    ,      -.     ,       . <br></li><li>     .             ;  Exception ,   ,     -   . <br></li><li> Minimum Debuggable Product тАФ  ,          . <br></li></ul><br><h2> ,    ? </h2><br><ol><li>   . <br></li><li>  . <br></li><li>  . <br></li></ol><br><hr><br>       тАФ Jon Skeet.          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DotNext</a> ,    (  ). <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/p2SQbq-umy4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi420793/">https://habr.com/ru/post/hi420793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi420779/index.html">рдмреЛрд░рд┐рдВрдЧ рдорд╛рд╕реНрдХ рдХрдВрдкрдиреА: рд╕реНрдЯреЗрдбрд┐рдпрдо рдХреЗ рд▓рд┐рдП рд╕реБрд░рдВрдЧ рдФрд░ рд╕реБрд░рдВрдЧ рдХрд╛ рдЙрджреНрдШрд╛рдЯрди</a></li>
<li><a href="../hi420783/index.html">рдирд┐рд░реНрднрд░рддрд╛ рдкреНрд░рдмрдВрдзрди, рдШрдЯрдирд╛рдУрдВ, рдФрд░ рдкреНрд░реЗрдХреНрд╖рдХ рдФрд░ рдордзреНрдпрд╕реНрде рдкреИрдЯрд░реНрди</a></li>
<li><a href="../hi420785/index.html">рд╕реБрджреВрд░ рдкреВрд░реНрд╡ рдореЗрдВ рдПрдХ рдЖрдИрдЯреА рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо - рд╕рдЦрд╛рд▓рд┐рди рдУрдмреНрд▓рд╛рд╕реНрдЯ</a></li>
<li><a href="../hi420789/index.html">(рдП | рдП) рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░: рдпрд╣ рдЕрддреНрдпрдзрд┐рдХ рднрд╛рд░рд┐рдд рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдЧреИрд░-рдорд╛рдирдХ рдорд┐рдЯреИрдк рд╣реИ</a></li>
<li><a href="../hi420791/index.html">рд╣реЛрдо рд░реЛрдмреЛрдЯ: рдЖрдк рдХреНрдпрд╛ рдЦрд░реАрдж рд╕рдХрддреЗ рд╣реИрдВред рдЙрдкрд▓рдмреНрдз рд╡рд╛рдгрд┐рдЬреНрдпрд┐рдХ рд╣реЛрдо рд░реЛрдмреЛрдЯ рдХрд╛ рдЕрд╡рд▓реЛрдХрди</a></li>
<li><a href="../hi420795/index.html">рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рдХреА рдЧрд▓рддрдлрд╣рдореА</a></li>
<li><a href="../hi420797/index.html">рд╕реАрдЦрдирд╛ рдмрдВрдж рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛</a></li>
<li><a href="../hi420799/index.html">MPS 2018.2: рдЬреЗрдирд░реЗрдЯрд░ рдЯреЗрд╕реНрдЯ, GitHub Plugin, VCS Aspect, Migration Notifications, рдФрд░ рдЕрдзрд┐рдХ</a></li>
<li><a href="../hi420803/index.html">3 рдбреА рдкреНрд░рд┐рдВрдЯрд┐рдВрдЧ рд╕рдмрдХред 3Dtool рд╕реЗ рдЧреИрд░-рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдореЙрдбрд▓ рдкреНрд░рд┐рдВрдЯ рдХрд░рддреЗ рд╕рдордп рдкреНрд▓рд╛рд╕реНрдЯрд┐рдХ рдХреА рдмрдЪрдд</a></li>
<li><a href="../hi420805/index.html">[рдЕрдиреБрд╡рд╛рдж] рд╕рдорд╛рдирд╛рдВрддрд░ рдзрд╛рд░рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдм рдХрд░реЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>