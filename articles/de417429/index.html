<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≤ ü¶ñ ‚ò¶Ô∏è Wir haben ein praktisches npm-Projekt f√ºr uns und das Team eingerichtet oder ein wenig √ºber moderne Front-End-Tools ‚òÄÔ∏è ü§∑ üçÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo an alle. K√ºrzlich bin ich auf die Aufgabe gesto√üen, private npm-Pakete einzurichten. Alles klang sehr interessant und vielversprechend, bis sich...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir haben ein praktisches npm-Projekt f√ºr uns und das Team eingerichtet oder ein wenig √ºber moderne Front-End-Tools</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417429/"><p><img src="https://habrastorage.org/webt/de/cu/3u/decu3uxv998uiwmqbioi99ojnfi.png"></p><br><p>  Hallo an alle.  K√ºrzlich bin ich auf die Aufgabe gesto√üen, private npm-Pakete einzurichten.  Alles klang sehr interessant und vielversprechend, bis sich herausstellte, dass dort nicht viel zu tun war.  Hier w√§re alles zu Ende gegangen, aber die zweite Aufgabe bestand darin, ein Demo-Repository f√ºr das npm-Paket zu schreiben, das genommen, geklont und darauf basierend schnell etwas N√ºtzliches und im gleichen Stil erstellt werden konnte. </p><br><p> Das Ergebnis war ein Projekt mit angepasster Formatierung, Codestil, Tests f√ºr jeden Pool, Grenzwerten f√ºr die Codeabdeckung, Bericht zur Codeabdeckung und automatischer Dokumentation.  Plus bequemes Ver√∂ffentlichen in npm.  Details zur Einstellung - unter dem Schnitt. </p><a name="habracut"></a><br><h2 id="trebovaniya">  Anforderungen </h2><br><p>  Zuerst habe ich herausgefunden, was wir bereits haben: </p><br><ul><li>  Neue Projekte werden in TypeScript geschrieben </li><li>  Neben neuen Projekten gibt es eine Reihe von Projekten in reinem JavaScript </li><li>  Es gibt Anforderungen zum Schreiben von Tests und die Ergebnisse m√ºssen zur Analyse gesendet werden </li></ul><br><p>  Dann sch√§tzte er seine Wunschliste - da es Zeit und Begierde gibt, warum nicht ruhig angehen?  Was ich mehr will: </p><br><ul><li>  Ich m√∂chte einen einheitlichen Formatierungsstil </li><li>  Ich m√∂chte einen einheitlichen TypeScript-Stil </li><li>  Ich m√∂chte Dokumentation, aber ich m√∂chte sie nicht schreiben </li><li>  Im Allgemeinen m√∂chte ich alles maximal automatisieren.  Was w√ºrde Fyr-Fyr-Fyr und in der Produktion </li></ul><br><p>  Infolgedessen nahmen die Anforderungen wie folgt Gestalt an: </p><br><ul><li>  Das Modul muss TypeScript sein und mit TsLint getestet werden </li><li>  Das Modul muss unter TypeScript und unter JavaScript verwendet werden </li><li>  Tests sollten am Git-Hook konfiguriert werden, die minimale Codeabdeckung sollte ebenfalls konfiguriert werden, Statistiken sollten es sein </li><li>  Die Formatierung muss konfiguriert sein </li><li>  Die Dokumentation muss aus Code erstellt werden. </li><li>  Die Ver√∂ffentlichung sollte bequem und konsistent sein. </li><li>  All das kann automatisiert werden </li></ul><br><p>  Es scheint sch√∂n zu sein, du musst es versuchen. </p><br><h2 id="predvaritelnye-telodvizheniya">  Vorl√§ufige Gesten </h2><br><p>  Wir erstellen (klonen) das Repository, initialisieren package.json und setzen TypeScript lokal.  Im Allgemeinen setzen wir alle Abh√§ngigkeiten lokal, weil  Alles wird zum Server gehen.  Vergessen Sie nicht, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Versionsabh√§ngigkeiten</a> zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beheben</a> . </p><br><pre><code class="hljs swift">git <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> npm <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> npm i -<span class="hljs-type"><span class="hljs-type">D</span></span> typescript ./node_modules/.bin/tsc --<span class="hljs-keyword"><span class="hljs-keyword">init</span></span></code> </pre> <br><p>  Sofort vor Ort m√ºssen Sie tsconfig.json f√ºr sich selbst optimieren - legen Sie target, libs, include / exclude, outDir und andere Optionen fest. </p><br><h2 id="stil-formatirovaniya">  Formatierungsstil </h2><br><p>  Um eine einheitliche Formatierung beizubehalten, habe ich zwei Werkzeuge verwendet.  Die erste ist die .editorconfig-Datei.  Es wird von allen wichtigen IDEs (WebStorm, VSCode, Visual Studio usw.) verstanden, erfordert keine Installation von √ºberfl√ºssigem Material und funktioniert mit einer gro√üen Anzahl von Dateitypen - js, ts, md usw. </p><br><pre> <code class="hljs vbscript">#root = <span class="hljs-literal"><span class="hljs-literal">true</span></span> [*] indent_style = <span class="hljs-built_in"><span class="hljs-built_in">space</span></span> end_of_line = lf charset = utf<span class="hljs-number"><span class="hljs-number">-8</span></span> trim_trailing_whitespace = <span class="hljs-literal"><span class="hljs-literal">true</span></span> insert_final_newline = <span class="hljs-literal"><span class="hljs-literal">true</span></span> max_line_length = <span class="hljs-number"><span class="hljs-number">100</span></span> indent_size = <span class="hljs-number"><span class="hljs-number">4</span></span> [*.md] trim_trailing_whitespace = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><p>  Jetzt verh√§lt sich die automatische Formatierung bei meinen Kollegen mehr oder weniger gleich. </p><br><p>  Das zweite Werkzeug ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sch√∂ner</a> .  Dies ist ein npm-Paket, das Ihre Textformatierung √ºberpr√ºft und wenn m√∂glich automatisch korrigiert.  Installieren Sie es lokal und f√ºgen Sie den ersten Befehl zu package.json hinzu </p><br><pre> <code class="hljs matlab">npm <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> -D prettier</code> </pre> <br><p>  package.json </p><br><pre> <code class="hljs css">"<span class="hljs-selector-tag"><span class="hljs-selector-tag">prettier</span></span>": "<span class="hljs-selector-tag"><span class="hljs-selector-tag">prettier</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--config</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.prettierrc</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">--write</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">src</span></span><span class="hljs-comment"><span class="hljs-comment">/**/</span></span>*<span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span>"</code> </pre> <br><p>  Prettier hat keinen init-Befehl, daher m√ºssen Sie ihn manuell <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konfigurieren</a> .  Erstellen Sie .prettierrc.json im Stammverzeichnis des Projekts mit so etwas wie diesem kontroversen Inhalt (wenn √ºberhaupt, geht es in dem Beitrag √ºberhaupt nicht darum, welche Zitate besser sind, aber Sie k√∂nnen es versuchen) </p><br><p>  .prettierrc.json </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"tabWidth"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"useTabs"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"semi"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"singleQuote"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"trailingComma"</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"arrowParens"</span></span>: <span class="hljs-string"><span class="hljs-string">"always"</span></span> }</code> </pre> <br><p>  Erstellen Sie nun den Ordner src, erstellen Sie index.ts mit bedingtem Inhalt und versuchen Sie, h√ºbscher auszuf√ºhren.  Wenn ihm Ihre Formatierung nicht gef√§llt, wird er sie automatisch korrigieren.  Sehr bequem.  Wenn Sie sich dies nicht nur w√§hrend eines Commits / Pushs merken m√∂chten, k√∂nnen Sie es so <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konfigurieren, dass es automatisch ausgef√ºhrt</a> oder eine Erweiterung f√ºr das Studio installiert wird. </p><br><h2 id="stil-koda">  Codestil </h2><br><p>  Mit dem Codestil ist auch nicht alles kompliziert.  F√ºr JavaScript gibt es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eslint</a> , f√ºr TypeScript gibt es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tslint</a> .  Wir setzen tslint und erstellen tsconfig.js, um die Einstellungen zu speichern </p><br><pre> <code class="hljs coffeescript"><span class="hljs-built_in"><span class="hljs-built_in">npm</span></span> i -D tslint .<span class="hljs-regexp"><span class="hljs-regexp">/node_modules/</span></span>.bin/tslint --init</code> </pre> <br><p>  package.json </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"tslint -c tslint.json 'src/**/*.ts' 'tests/**/*.spec.ts'"</span></span></code> </pre> <br><p>  Sie k√∂nnen Ihre eigenen Regeln schreiben oder vorhandene Regeln mithilfe des Extend-Parameters verwenden.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier</a> zum Beispiel eine Konfiguration von Airbnb. </p><br><div class="spoiler">  <b class="spoiler_title">Tslint-Entwickler scherzen</b> <div class="spoiler_text"><pre> <code class="hljs powershell">module.exports = { extends: <span class="hljs-string"><span class="hljs-string">"./tslint-base.json"</span></span>, rules: { <span class="hljs-string"><span class="hljs-string">"no-excessive-commenting"</span></span>: [<span class="hljs-type"><span class="hljs-type">true</span></span>, {<span class="hljs-type"><span class="hljs-type">maxComments</span></span>: <span class="hljs-type"><span class="hljs-type">Math.random</span></span>() * <span class="hljs-number"><span class="hljs-number">10</span></span>}] } };</code> </pre> <br><p>  Ist das nicht h√ºbsch? </p></div></div><br><p>  Es gibt einen wichtigen Punkt - tslint und h√ºbscher √ºberschneiden sich in der Funktionalit√§t (z. B. in der L√§nge einer Zeichenfolge oder in ‚Äûh√§ngenden‚Äú Kommas).  Wenn Sie also beide verwenden, m√ºssen Sie die Einhaltung √ºberwachen oder etwas aufgeben. </p><br><p>  Und doch gibt es f√ºr diejenigen, die nicht alle Dateien √ºberpr√ºfen m√∂chten, sondern nur inszenierte - ein Paket mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Flusen</a> </p><br><h2 id="testy">  Tests </h2><br><p>  Was brauchen wir vor allem von den Tests?  Erstens, damit sie automatisch starten, zweitens die Abdeckungskontrolle, drittens einige Berichte, vorzugsweise im lcov-Format (wenn √ºberhaupt, wird lcov von verschiedenen Analysatoren gut verstanden - von SonarQube bis CodeCov).  Wir werden uns etwas sp√§ter mit der Automatisierung befassen, w√§hrend wir die Tests selbst einrichten. </p><br><p>  Wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">setzen Karma</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jasmin</a> und das entsprechende Bodykit ein </p><br><pre> <code class="hljs powershell">npm i <span class="hljs-literal"><span class="hljs-literal">-D</span></span> karma karma<span class="hljs-literal"><span class="hljs-literal">-jasmine</span></span> jasmine karma<span class="hljs-literal"><span class="hljs-literal">-typescript</span></span> karma<span class="hljs-literal"><span class="hljs-literal">-chrome</span></span><span class="hljs-literal"><span class="hljs-literal">-launcher</span></span> @types/jasmine ./node_modules/.bin/karma init</code> </pre> <br><p>  Wir modifizieren karma.conf.js ein wenig und konfigurieren die Arbeit sofort mit Abdeckung </p><br><div class="spoiler">  <b class="spoiler_title">karma.conf.js</b> <div class="spoiler_text"><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">karmaTypescriptConfig</span></span> : { <span class="hljs-attribute"><span class="hljs-attribute">include</span></span>: [<span class="hljs-string"><span class="hljs-string">"./src/**/*.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"./tests/**/*.spec.ts"</span></span>], tsconfig: <span class="hljs-string"><span class="hljs-string">"./tsconfig.json"</span></span>, reports: { <span class="hljs-string"><span class="hljs-string">"html"</span></span>: <span class="hljs-string"><span class="hljs-string">"coverage"</span></span>, <span class="hljs-string"><span class="hljs-string">"lcovonly"</span></span>: { directory: <span class="hljs-string"><span class="hljs-string">'./coverage'</span></span>, filename: <span class="hljs-string"><span class="hljs-string">'../lcov.dat'</span></span> } }, <span class="hljs-selector-tag"><span class="hljs-selector-tag">coverageOptions</span></span>: { <span class="hljs-attribute"><span class="hljs-attribute">threshold</span></span>: { global: { statements: <span class="hljs-number"><span class="hljs-number">60</span></span>, branches: <span class="hljs-number"><span class="hljs-number">60</span></span>, functions: <span class="hljs-number"><span class="hljs-number">60</span></span>, lines: <span class="hljs-number"><span class="hljs-number">60</span></span>, excludes: [] }, <span class="hljs-selector-tag"><span class="hljs-selector-tag">file</span></span>: { <span class="hljs-attribute"><span class="hljs-attribute">statements</span></span>: <span class="hljs-number"><span class="hljs-number">60</span></span>, branches: <span class="hljs-number"><span class="hljs-number">60</span></span>, functions: <span class="hljs-number"><span class="hljs-number">60</span></span>, lines: <span class="hljs-number"><span class="hljs-number">60</span></span>, excludes: [], overrides: {} } } }, }</code> </pre> </div></div><br><p>  Und vergessen Sie nat√ºrlich nicht, package.json einen neuen Befehl hinzuzuf√ºgen </p><br><p>  package.json </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"karma start"</span></span></code> </pre> <br><p>  Wenn Sie CI verwenden oder planen, CI zu verwenden, ist es besser, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HeadlessChrome zu verwenden</a> : </p><br><pre> <code class="hljs matlab">npm <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> -D puppeteer</code> </pre> <br><p>  Und konfigurieren Sie Karma (Chrome Fix auf ChromeHeadless) und etwas anderes vor.  √Ñnderungen k√∂nnen im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demo-Repository</a> angezeigt werden. </p><br><p>  F√ºhren Sie die Tests aus und √ºberpr√ºfen Sie, ob alles funktioniert.  √úberpr√ºfen Sie gleichzeitig den Abdeckungsbericht (er befindet sich im Abdeckungsordner) und entfernen Sie ihn aus der Versionskontrolle. Er wird im Repository nicht ben√∂tigt. </p><br><p>  Bericht: </p><br><p><img src="https://habrastorage.org/webt/9h/0l/pi/9h0lpiplvfhu8pxbrawnnwysdw4.png"></p><br><h2 id="stil-kommitov">  Commit-Stil </h2><br><p>  Commits k√∂nnen auch vereinheitlicht werden (und gleichzeitig jemanden auf Hochtouren bringen, wenn Sie es √ºbertreiben, also ist es besser ohne Fanatismus).  Daf√ºr habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Commitizen genommen</a> .  Es funktioniert in Form eines Dialogs, unterst√ºtzt das konventionelle Changelog-Format (Sie k√∂nnen ein Changelog aus seinen Commits erstellen) und es gibt ein VsCode- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Plugin</a> daf√ºr </p><br><pre> <code class="hljs powershell">npm i <span class="hljs-literal"><span class="hljs-literal">-D</span></span> commitizen npm i <span class="hljs-literal"><span class="hljs-literal">-D</span></span> cz<span class="hljs-literal"><span class="hljs-literal">-conventional</span></span><span class="hljs-literal"><span class="hljs-literal">-changelog</span></span></code> </pre> <br><p>  cz-konventionelles-Changelog ist ein Adapter, der f√ºr Fragen und damit f√ºr das Format Ihrer Commits verantwortlich ist </p><br><p>  F√ºgen Sie dem Skriptabschnitt einen neuen Befehl hinzu </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"commit"</span></span>:<span class="hljs-string"><span class="hljs-string">"git-cz"</span></span></code> </pre> <br><p>  Und ein neuer package.json-Abschnitt - config for commitizen </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"config"</span></span>: { <span class="hljs-string"><span class="hljs-string">"commitizen"</span></span>: { <span class="hljs-string"><span class="hljs-string">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"./node_modules/cz-conventional-changelog"</span></span> } }</code> </pre> <br><p>  Der Dialog mit dem Commitizen sieht folgenderma√üen aus: </p><br><p><img src="https://habrastorage.org/webt/tn/xk/_l/tnxk_ll7a-chazpw8p0a2fnl3wk.png"></p><br><h2 id="dokumentaciya">  Die Dokumentation </h2><br><p>  Nun zur Dokumentation.  Wir werden zwei Arten von Dokumentation haben - aus Code und aus Commits.  F√ºr die Dokumentation aus dem Code habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">typedoc genommen</a> (analog zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">esdoc,</a> aber f√ºr TypeScript).  Es ist sehr einfach einzurichten und zu arbeiten.  Die Hauptsache ist, nicht zu vergessen, die Ergebnisse seiner Arbeit aus der Versionskontrolle zu entfernen. </p><br><pre> <code class="hljs matlab">npm <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> typedoc -D</code> </pre> <br><p>  und aktualisieren Sie package.json </p><br><p>  package.json </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"doc"</span></span>: <span class="hljs-string"><span class="hljs-string">"typedoc --out docs/src/ --readme ./README.md"</span></span></code> </pre> <br><p>  Das Flag --readme erzwingt, dass Readme in die Hauptdokumentationsseite aufgenommen wird, was praktisch ist. </p><br><p>  Die zweite Art der Dokumentation ist Changelog, und das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konventionelle Changelog-Cli-</a> Paket hilft uns dabei. </p><br><pre> <code class="hljs powershell">npm i <span class="hljs-literal"><span class="hljs-literal">-D</span></span> conventional<span class="hljs-literal"><span class="hljs-literal">-changelog</span></span><span class="hljs-literal"><span class="hljs-literal">-cli</span></span></code> </pre> <br><p>  package.json </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"changelog"</span></span>: <span class="hljs-string"><span class="hljs-string">"conventional-changelog -p angular -i CHANGELOG.md -s"</span></span></code> </pre> <br><p>  Aus Winkel gibt es nur Formatierung und nichts mehr.  Um das Changelog zu aktualisieren, f√ºhren Sie jetzt npm run changelog aus.  Die Hauptsache ist, Commits sorgf√§ltig zu schreiben.  Nun, wir schreiben immer perfekte Commits, daher sollte dies kein Problem sein. </p><br><h2 id="bild">  Bauen </h2><br><p>  Da unser Paket auch f√ºr JavaScript funktionieren sollte, m√ºssen wir TypeScript in JavaScript umwandeln.  Au√üerdem w√§re es f√ºr alle F√§lle sch√∂n, ein minimiertes B√ºndel zu erstellen.  Daf√ºr brauchen wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">uglifyjs</a> und ein kleines Tweak package.json </p><br><pre> <code class="hljs matlab">npm <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> -D uglifyjs</code> </pre> <br><p>  package.json </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"clean"</span></span>:<span class="hljs-string"><span class="hljs-string">"rmdir dist /S /Q"</span></span>, <span class="hljs-string"><span class="hljs-string">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"tsc --p ./ --sourceMap false"</span></span>, <span class="hljs-string"><span class="hljs-string">"bundle"</span></span>: <span class="hljs-string"><span class="hljs-string">"uglifyjs ./dist/*.js --compress --mangle --output ./dist/index.min.js"</span></span></code> </pre> <br><p>  Wenn Sie die Gr√∂√üe Ihres Projekts steuern m√∂chten, gibt es √ºbrigens zwei weitere interessante Pakete </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">B√ºndelgr√∂√üe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sizelimit</a> - das gleiche aber auf webpack </li></ul><br><p>  Sie k√∂nnen auch in den Commit / Push / Publish-Prozess integriert werden, um die akzeptable Bundle-Gr√∂√üe beizubehalten.  Sehr sehr hilfreich. </p><br><h2 id="avtomatizaciya">  Automatisierung </h2><br><p>  Nun, wir haben bereits die grundlegenden Schritte unternommen, jetzt muss alles automatisiert werden, sonst ist es offen gesagt unpraktisch zu arbeiten. </p><br><p>  Daf√ºr brauchen wir noch ein Paket - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Husky</a> .  Es schreibt Git-Hooks neu und ruft die zugeh√∂rigen Befehle von package.json auf.  Wenn Sie beispielsweise ein Commit durchf√ºhren, funktioniert das Precommit, das Push-Prepush usw.  Wenn das Skript einen Fehler zur√ºckgibt, schl√§gt das Festschreiben fehl. </p><br><pre> <code class="hljs matlab">npm <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> -D husky</code> </pre> <br><p>  package.json </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"precommit"</span></span>:<span class="hljs-string"><span class="hljs-string">"npm run prettier"</span></span>, <span class="hljs-string"><span class="hljs-string">"prepush"</span></span>: <span class="hljs-string"><span class="hljs-string">"call npm run lint &amp;&amp; call npm run test"</span></span></code> </pre> <br><p>  Hier gibt es eine wichtige Nuance: Die Verwendung der Aufrufsyntax ist nicht plattform√ºbergreifend und wird auf Unix-Systemen nicht gestartet.  Wenn Sie also alles ehrlich machen m√∂chten, m√ºssen Sie auch das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">npm-run-all-</a> Paket installieren. Es funktioniert genauso, jedoch plattform√ºbergreifend. </p><br><h2 id="publikaciya">  Posting </h2><br><p>  Nun, hier kommen wir zur Ver√∂ffentlichung unseres (wenn auch leeren) Pakets.  √úberlegen wir mal, was wir von der Ver√∂ffentlichung wollen. </p><br><ul><li>  Testen Sie alles noch einmal </li><li>  Sammle Build-Artefakte </li><li>  Dokumentation sammeln </li><li>  Version anheben </li><li>  Tags ausl√∂sen </li><li>  Senden Sie an npm </li></ul><br><p>  H√§nde machen alles - traurig.  Oder Sie vergessen etwas oder m√ºssen eine Checkliste schreiben.  Es ist auch notwendig zu automatisieren.  Sie k√∂nnen ein anderes Paket setzen - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">entfesseln</a> .  Und Sie k√∂nnen die nativen Hooks von npm selbst verwenden - Preversion, Version, Postversion, zum Beispiel wie folgt: </p><br><pre> <code class="hljs sql">"preversion": "npm run test", "version": "<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> npm run clean &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> npm run <span class="hljs-keyword"><span class="hljs-keyword">build</span></span> &amp;&amp; npm run bundle &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> npm run doc &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> npm run changelog &amp;&amp; git <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> . &amp;&amp; git <span class="hljs-keyword"><span class="hljs-keyword">commit</span></span> -m <span class="hljs-string"><span class="hljs-string">'changelogupdate'</span></span> <span class="hljs-comment"><span class="hljs-comment">--no-verify", "postversion": "git add . &amp;&amp; git push &amp;&amp; git push --tags",</span></span></code> </pre> <br><p>  F√ºr package.json muss noch angegeben werden, was in das Paket aufgenommen werden soll, der Einstiegspunkt und der Pfad zu unseren Typen (vergessen Sie nicht, das Flag --declaration in tsconfig.json anzugeben, um d.ts-Dateien abzurufen). </p><br><p>  package.json </p><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"./dist/index.min.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: <span class="hljs-string"><span class="hljs-string">"./dist/index.d.ts"</span></span>, <span class="hljs-string"><span class="hljs-string">"files"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dist/"</span></span>, <span class="hljs-string"><span class="hljs-string">"src/"</span></span>, <span class="hljs-string"><span class="hljs-string">"tests/"</span></span> ]</code> </pre> <br><p>  Nun, das scheint alles zu sein.  Jetzt reicht es zu tun </p><br><pre> <code class="hljs coffeescript"><span class="hljs-built_in"><span class="hljs-built_in">npm</span></span> version ... <span class="hljs-built_in"><span class="hljs-built_in">npm</span></span> publish</code> </pre> <br><p>  Und alles andere wird automatisch erledigt. </p><br><h2 id="bonus">  Bonus </h2><br><p>  Als Bonus gibt es ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demo-Repository</a> , das all dies + CI mit travis-ci unterst√ºtzt.  Ich m√∂chte Sie daran erinnern, dass HeadlessChrome dort konfiguriert ist. Wenn dies f√ºr Sie wichtig ist, empfehle ich Ihnen, dort nachzuschauen. </p><br><h2 id="blagodarnosti">  Danksagung </h2><br><p>  Vielen Dank an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Alexei Volkov</a> f√ºr seinen Bericht √ºber das JsFest, der die Grundlage dieses Artikels wurde. </p><br><p>  Dank <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">max7z</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">unzerst√∂rbar</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">justboris,</a> um zu verdeutlichen, dass Pfade zu lokalen Abh√§ngigkeiten weggelassen werden k√∂nnen. </p><br><h2 id="i-nemnogo-statistiki">  Und einige Statistiken </h2><br><ul><li>  Node_modules Gr√∂√üe: 444 MB (NTFS) </li><li>  Anzahl der Abh√§ngigkeiten der ersten Ebene: 17 </li><li>  Insgesamt verwendete Pakete: 643 </li></ul><br><h2 id="poleznye-ssylki">  N√ºtzliche Links </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.editorconfig</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sch√∂ner</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">tslint</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eslint</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">typedoc</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">esdoc</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Commitizen</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Commitizen Plugin f√ºr vscode</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konventionelles Changelog</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">uglifyjs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">B√ºndelgr√∂√üe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sizelimit</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">heiser</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">npm-run-all</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">entfesseln</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demo-Repository</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de417429/">https://habr.com/ru/post/de417429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de417415/index.html">3D-Druckunterricht. Drucken von Teilen mit unterschiedlichen Schichtdicken aus 3Dtool</a></li>
<li><a href="../de417419/index.html">[Jekaterinburg, Ank√ºndigung] Alice besucht Kontur - Hackathon, um F√§higkeiten f√ºr Sprachassistenten zu entwickeln</a></li>
<li><a href="../de417421/index.html">Farbenblind werden: ein Empathie-Experiment</a></li>
<li><a href="../de417423/index.html">33 Tipps f√ºr das ICO-Marketing</a></li>
<li><a href="../de417427/index.html">Video von UralJS # 8 mitap - Arbeiten mit Rohdaten in einem Browser und Schreiben von F√§higkeiten f√ºr Alice</a></li>
<li><a href="../de417431/index.html">Anti-Interview</a></li>
<li><a href="../de417435/index.html">In der Konfiguration von Aliens: Colonial Marines wurde ein Tippfehler gefunden, aufgrund dessen die Spiel-KI vier Jahre lang fehlerhaft war</a></li>
<li><a href="../de417437/index.html">Projektor gegen Flachbildschirm. Wir probieren ein Augenarztgewand an und finden heraus, warum Gr√∂√üe wichtig ist</a></li>
<li><a href="../de417439/index.html">Der Intel Core i7-8086K (Teil 1)</a></li>
<li><a href="../de417441/index.html">Wie wir gew√∂hnliche Spieler und f√ºr DDoS oder unsere Server kaputt gemacht haben: eine praktische Anleitung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>