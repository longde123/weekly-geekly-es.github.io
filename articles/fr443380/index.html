<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÖ±Ô∏è üë®üèΩ‚Äçüöí üë©üèΩ‚Äç‚öïÔ∏è UDB. Qu'est-ce que c'est? Partie 6. Module d'√©tat et de contr√¥le üßôüèΩ üë©üèæ‚Äçü§ù‚Äçüë®üèª ü§∑üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans des articles ant√©rieurs, traductions de la documentation de Cypress, l'automate op√©rationnel Datapath a √©t√© tr√®s largement consid√©r√©. Progressive...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UDB. Qu'est-ce que c'est? Partie 6. Module d'√©tat et de contr√¥le</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443380/"><img src="https://habrastorage.org/webt/mf/zu/nx/mfzunxkuzhcahgj4dodvrfn2i18.jpeg"><br><br>  Dans des articles ant√©rieurs, traductions de la documentation de Cypress, l'automate op√©rationnel Datapath a √©t√© tr√®s largement consid√©r√©.  Progressivement, nous passons √† l'√©tude d'autres modules UDB, en particulier le module de gestion et d'√©tat. <a name="habracut"></a><br><br>  Le contenu g√©n√©ral du cycle ¬´UDB.  Qu'est-ce que c'est? " <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1. Introduction.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pld.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 2. Chemin de donn√©es.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 3. Datapath FIFO.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 4. Datapath ALU.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 5. Chemin de donn√©es.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Petites choses utiles.</a> <br>  Partie 6. Module de gestion et d'√©tat.  (Article actuel) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 7. Module de commande de temporisation et de r√©initialisation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 8. Adressage UDB</a> <br><br><h2>  21.3.3.  Module de gestion et d'√©tat </h2><br>  Une vue de haut niveau du module de commande et de l'√©tat est illustr√©e √† la figure 21-28.  Les bits d'√©tat du registre de contr√¥le sont transf√©r√©s vers des ressources de trace, donnant au programme la possibilit√© de contr√¥ler le comportement de l'UDB.  Le registre d'√©tat re√ßoit les donn√©es des lignes de tra√ßage, de sorte que le programme peut surveiller les op√©rations effectu√©es par UDB. <br><br><img src="https://habrastorage.org/webt/4n/0g/wf/4n0gwf_b13miix_dof5ojhxwltk.png"><br>  <i>Figure 21-28.</i>  <i>Registres de gestion et de statut.</i> <br><br>  La structure et l'√©tat du module de commande sont illustr√©s plus en d√©tail √† la figure 21-29.  L'objectif principal de cette unit√© est de coordonner l'interaction du programme de base du processeur avec le travail des √©l√©ments UDB internes.  Cependant, en raison de la forte connexion avec la matrice de trace, ce bloc peut √™tre configur√© pour ex√©cuter d'autres fonctions. <br><br><img src="https://habrastorage.org/webt/rh/ak/9e/rhak9e-mn02qvbn0-di2e_81r_i.png"><br>  <i>Figure 21-29.</i>  <i>Module de contr√¥le et d'√©tat.</i> <br><br>  Modes de fonctionnement: <br><br><ul><li>  <b>Entr√©e d'√©tat</b>  L'√©tat des lignes enroul√©es de l'ext√©rieur peut √™tre entr√© et captur√© comme √©tat, apr√®s quoi le CPU ou le DMA est lu. </li><li>  <b>Sortie de contr√¥le</b>  La CPU ou le DMA peut √©crire des donn√©es dans le registre de contr√¥le.  Ces donn√©es d√©termineront l'√©tat des lignes allant aux ressources de trace. </li><li>  <b>Entr√©e parall√®le</b> - vers l'entr√©e parall√®le Datapath. </li><li>  <b>Sortie parall√®le</b> - √† partir de la sortie parall√®le de Datapath. </li><li>  <b>Mode compteur</b>  Dans ce mode, le registre de contr√¥le fonctionne comme un compteur d√©croissant √† 7 bits avec une p√©riode programmable et une r√©initialisation automatique.  Les entr√©es de canal de trace peuvent √™tre configur√©es pour contr√¥ler √† la fois le d√©marrage et la r√©initialisation du compteur.  Lorsque ce mode est activ√©, la fonctionnalit√© du registre de contr√¥le n'est pas disponible. </li><li>  <b>Mode synchrone / mode de synchronisation</b> .  Dans ce mode, le registre d'√©tat agit comme un synchroniseur double 4 bits.  Lorsque ce mode est activ√©, la fonctionnalit√© du registre d'√©tat n'est pas disponible. </li></ul><br><h2>  21.3.3.1 Statut et mode de contr√¥le </h2><br>  Lorsqu'il fonctionne en mode de contr√¥le et d'√©tat, ce module agit comme un registre d'√©tat, un registre de priorit√© de masque et un registre de contr√¥le dans la configuration illustr√©e √† la figure 21-30. <br><br><img src="https://habrastorage.org/webt/t3/2j/hk/t32jhkcoc-imxe6vuwpuv91b_rs.png"><br>  <i>Figure 21-30.</i>  <i>Gestion et statut des emplois.</i> <br><br><h4>  Fonctionnement du registre d'√©tat </h4><br>  Chaque UDB poss√®de un registre d'√©tat 8 bits.  L'entr√©e de ce registre provient de tout signal provenant d'une structure de trace num√©rique.  Le registre d'√©tat est destructible: il perd son √©tat pendant le sommeil et apr√®s le r√©veil a une valeur de 0x00.  Chaque bit peut √™tre programm√© ind√©pendamment pour fonctionner dans l'un des deux modes. <br><br>  Tableau 21-19.  Registre d'√©tat. <br><br><div class="scrollable-table"><table><tbody><tr><th>  <b>STAT MD</b> </th><th>  <b>La description</b> </th></tr><tr><td>  0 </td><td>  Lecture normale.  Renvoie la valeur actuelle du signal d'entr√©e. </td></tr><tr><td>  1 </td><td>  Sticking, effac√© lors de la lecture.  Loquets √† haut niveau d'entr√©e <br>  sur un signal d'horloge.  Effac√© apr√®s la lecture du registre. </td></tr></tbody></table></div><br>  Une caract√©ristique importante de l'op√©ration d'effacement du registre d'√©tat est que seuls les bits arm√©s sont effac√©s.  Cela permet aux bits restants de continuer √† capturer l'√©tat pour maintenir la continuit√© du processus. <br><br><h4>  Statut de lecture normal </h4><br>  Par d√©faut, le CPU lit de mani√®re transparente l'√©tat du circuit correspondant.  Ce mode peut √™tre utilis√© pour lire des donn√©es verrouill√©es dans UDB. <br><br><h4>  Stick status avec clear apr√®s lecture </h4><br>  Dans ce mode, les entr√©es du registre d'√©tat sont √©chantillonn√©es √† chaque cycle de contr√¥le et d'horloge d'√©tat.  Si le signal √† une horloge donn√©e est √©lev√©, il est captur√© dans le bit d'√©tat et reste √©lev√©, ind√©pendamment des √©tats d'entr√©e ult√©rieurs.  Lorsque la CPU ou le DMA lit le registre d'√©tat, le bit est effac√©.  L'effacement du registre d'√©tat est ind√©pendant du mode et se produit m√™me lorsque la synchronisation UDB est d√©sactiv√©e;  il est bas√© sur la synchronisation du bus et se produit dans le cadre d'une op√©ration de lecture. <br><br><h4>  Statut du verrou pendant la lecture </h4><br>  La figure 21-31 montre la structure de la logique de lecture d'√©tat.  Le registre d'√©tat collant est suivi d'un verrou qui verrouille les donn√©es du registre d'√©tat et les maintient stables pendant le cycle de lecture, quel que soit le nombre de ticks d'attente dans l'op√©ration de lecture en cours. <br><br><img src="https://habrastorage.org/webt/vc/0w/3c/vc0w3cd0tr9yc51xphqneftldra.png"><br>  <i>Figure 21-31.</i>  <i>La logique de lecture de l'√©tat.</i> <br><br><h4>  G√©n√©ration d'interruption </h4><br>  Dans la plupart des fonctions, la g√©n√©ration d'interruption est li√©e aux param√®tres du bit d'√©tat.  Comme le montre la figure 21-31, cette fonction est int√©gr√©e dans la logique du registre d'√©tat sous la forme d'une op√©ration de masquage et d'application de l'op√©ration <b>OU</b> √† l'√©tat.  Seuls les 7 bits inf√©rieurs de l'entr√©e d'√©tat peuvent √™tre utilis√©s avec les g√©n√©rateurs d'interruption int√©gr√©s.  Le bit le plus significatif (bit le plus significatif, MSB) est g√©n√©ralement utilis√© comme sortie d'interruption et peut √™tre transmis au contr√¥leur d'interruption √† l'aide de canaux de tra√ßage num√©rique.  Dans cette configuration, l'√©tat du bit de demande d'interruption est lu √† partir du bit de registre d'√©tat √©lev√©. <br><br><h2>  21.3.3.2 Fonctionnement du registre de contr√¥le </h2><br>  Chaque UDB dispose d'un registre de contr√¥le 8 bits.  Il fonctionne comme un registre de lecture / √©criture standard sur le bus syst√®me, o√π la sortie de ces bits de registre est contr√¥l√©e par les lignes de la structure de trace num√©rique. <br><br>  Le registre de contr√¥le est destructible: il perd son √©tat pendant le sommeil et apr√®s le r√©veil a une valeur de 0x00. <br><br><h4>  Modes de registre de gestion </h4><br>  Chaque bit peut √™tre configur√© dans l'un des trois modes.  La configuration est sp√©cifi√©e en combinant les bits de deux registres 8 bits CTL_MD1 [7: 0] et CTL_MD0 [7: 0].  Par exemple, {CTL_MD1 [0], CTL_MD0 [0]} contr√¥le le mode √† z√©ro bit du registre de contr√¥le (voir tableau 21-20). <br><br>  Tableau 21-20.  Registre de contr√¥le Mode z√©ro bit <br><div class="scrollable-table"><table><tbody><tr><th>  <b>CTL MD</b> </th><th>  <b>La description</b> </th></tr><tr><td>  00 </td><td>  Mode direct </td></tr><tr><td>  01 </td><td>  Mode de synchronisation </td></tr><tr><td>  10 </td><td>  (r√©serv√©) </td></tr><tr><td>  11 </td><td>  Mode impulsion </td></tr></tbody></table></div><br><h4>  Mode d'enregistrement de contr√¥le direct </h4><br>  Par d√©faut, le mode est direct.  Comme le montre la figure 21-32, lorsque la CPU ou le DMA est √©crit dans le registre de contr√¥le, la sortie du registre de contr√¥le est envoy√©e directement √† la ligne de trace dans le m√™me cycle. <br><br><img src="https://habrastorage.org/webt/ft/cl/q-/ftclq-bcwhq3r_kozkj3vrwuli0.png"><br>  <i>Figure 21-32.</i>  <i>Mode registre de contr√¥le direct.</i> <br><br><h4>  Mode registre de contr√¥le synchrone </h4><br>  En mode synchrone, comme le montre la figure 21-33, la sortie du registre de contr√¥le est resynchronis√©e avec une horloge √©gale √† l'horloge actuelle du contr√¥le et de l'√©tat (Status and Control, SC).  Cela vous permet de contr√¥ler les chronogrammes de la sortie √† la fr√©quence SC s√©lectionn√©e, et non √† la fr√©quence d'horloge du bus. <br><br><img src="https://habrastorage.org/webt/jd/a6/7s/jda67s-pgp1kw-03dnttxc-zdcq.png"><br>  <i>Figure 21-33.</i>  <i>Mode registre de contr√¥le synchrone.</i> <br><br><h4>  Registre de contr√¥le du mode d'impulsion </h4><br>  Le mode impulsion est similaire au mode synchrone, car en lui le bit de commande est r√©√©chantillonn√© √† la fr√©quence SC;  l'impulsion commence au premier cycle d'horloge SC et suit le cycle d'√©criture du bus.  La sortie du bit de commande est d√©finie pendant un cycle d'horloge SC complet.  √Ä la fin de ce cycle d'horloge, le bit de commande est automatiquement r√©initialis√©. <br><br>  Avec ce mode de fonctionnement, le programme peut √©crire 1 dans le bit de registre de commande pour g√©n√©rer une impulsion.  Une fois que le bit a re√ßu la valeur 1, le programme le lira comme 1 jusqu'√† la fin de l'impulsion, apr√®s quoi il sera lu comme 0. Apr√®s cela, le programme peut √©crire un autre 1 pour d√©marrer une nouvelle impulsion.  Ainsi, il ne sera pas possible de donner une impulsion plus souvent qu'√† chaque deuxi√®me pas du signal SC. <br><br><h4>  R√©initialiser le registre de gestion </h4><br>  Le registre de contr√¥le a deux modes de r√©initialisation contr√¥l√©s par le bit de configuration EXT RES, comme illustr√© √† la figure 21-34.  Lorsque EXT RES est 0 (par d√©faut), en mode synchrone ou impulsionnel, l'entr√©e de r√©initialisation trac√©e r√©initialise la sortie synchronis√©e, mais pas le bit de commande lui-m√™me.  Lorsque EXT RES est 1, l'entr√©e de r√©initialisation tra√ßable r√©initialise √† la fois le bit de commande et la sortie synchronis√©e. <br><br><img src="https://habrastorage.org/webt/lo/ho/dl/lohodlp2-dbsqoqzpwurp8hx2di.png"><br>  <i>Figure 21-34.</i>  <i>R√©initialiser le registre de gestion.</i> <br><br><h2>  21.3.3.3 Mode entr√©e / sortie parall√®le </h2><br>  Dans ce mode, le contr√¥le et le suivi de l'√©tat sont connect√©s aux signaux Datapath d'entr√©e et de sortie parall√®le.  Pour activer ce mode, vous devez armer les bits de configuration SC OUT pour s√©lectionner la sortie parall√®le de Datapath.  La communication avec une entr√©e parall√®le est toujours disponible, cependant, ces connexions de trace sont partag√©es avec les entr√©es du registre d'√©tat, les entr√©es de commande de compteur et les sorties d'interruption. <br><br><img src="https://habrastorage.org/webt/9c/se/c2/9csec2u290m0hm1qaecqxpyybhe.png"><br>  <i>Figure 21-35.</i>  <i>Mode E / S parall√®le.</i> <br><br><h2>  21.3.3.4 Mode compteur </h2><br>  Comme le montre la figure 21-36, lorsque l'unit√© fonctionne en mode compteur, un compteur d√©croissant de 7 bits est disponible pour une utilisation √† la fois dans les op√©rations au sein de l'UDB et pour les besoins du programme.  Les caract√©ristiques du compteur comprennent: <br><br><ul><li>  Registre de p√©riode de 7 bits, (lecture / √©criture). </li><li>  Registre de compte 7 bits, (lecture / √©criture).  L'acc√®s n'est possible que lorsque le compteur est arr√™t√©. </li><li>  Recharge automatiquement la p√©riode dans le registre des comptes lorsqu'elle atteint z√©ro. </li><li>  Le bit de commande accessible par logiciel dans le registre de commande auxiliaire CNT START, utilis√© pour d√©marrer et arr√™ter le compteur.  (Il chevauche le signal mat√©riel ENABLE et doit √™tre install√© pour que le signal mat√©riel ENABLE en option fonctionne). </li><li>  Bits s√©lectionnables des canaux de trace de la commande de compteur dynamique en option pour les fonctions de d√©marrage et de chargement: <br>  - EN, signal trac√© pour d√©marrer ou arr√™ter le comptage. <br>  - LD, un signal de charge tra√ßable qui provoque un rechargement de p√©riode.  Lorsque ce signal est arm√©, il chevauche le signal de fin en attente.  Il est sensible au niveau et pendant que le signal est arm√©, la p√©riode continue de se charger. </li><li>  Un compteur 7 bits peut √™tre envoy√© pour tracer les ressources en tant que sc_out [6: 0]. </li><li>  Le signal de terminaison peut entrer des ressources de trace comme sc_out [7]. </li><li>  En mode ¬´par d√©faut¬ª, le mode d'accrochage est utilis√© pour le signal de comptage.  En mode alternatif, il passe en mode combin√©. </li><li>  En mode par d√©faut, le signal mat√©riel EN optionnel, s'il est utilis√©, doit √™tre r√©gl√© pour activer le signal mat√©riel LD.  En mode alternatif, les signaux mat√©riels LD et EN sont ind√©pendants. </li></ul><br><img src="https://habrastorage.org/webt/no/ov/up/noovupgcemdnnl1v6ak4tyl1rnq.png"><br>  <i>Figure 21-36.</i>  <i>Mode compteur</i> <br><blockquote>  <i><b>Note du traducteur:</b></i> <br>  Autour de cet endroit, j'ai r√©alis√© que je ne comprenais rien du document.  Nulle part ces modes ¬´par d√©faut¬ª et ¬´alternatifs¬ª ne sont d√©crits.  Apr√®s une longue recherche, j'ai r√©ussi √† en trouver, mais un exemple. <br>  Fichier: C: \ Program Files (x86) \ Cypress \ PSoC Creator \ 4.2 \ PSoC Creator \ psoc \ content \ CyComponentLibrary \ CyComponentLibrary.cylib \ bScanComp_v1_10 \ bScanComp_v1_10.v <br>  Code explicatif: <br><br><img src="https://habrastorage.org/webt/ba/rf/13/barf13t7suartgjw8b0frvtsccs.png"><br><br><div class="spoiler">  <b class="spoiler_title">M√™me texte:</b> <div class="spoiler_text"><pre><code class="plaintext hljs">cy_psoc3_count7 #(.cy_period(Period),.cy_route_ld(0),.cy_route_en(1), .cy_alt_mode(1)) ChannelCounter( /* input */ .clock(clk_int), /* input */ .reset(1'b0), /* input */ .load(1'b0), /* input */ .enable(enable_int), /* output [06:00] */ .count(count), /* output */ .tc(tc_o) );</code> </pre> <br></div></div><br>  La d√©claration m√™me du composant cy_psoc3_count7 que j'ai trouv√©e uniquement pour le langage VHDL, il semble que pour Verilog il soit int√©gr√© dans les outils de d√©veloppement.  Maintenant, vous savez √† peu pr√®s o√π chercher les bits de r√©glage en cours de discussion. <br><br>  Nous consid√©rons ici les bits myst√©rieux, qui sont appel√©s SC OUT CTL ou SC_OUT_CTL, mais leurs valeurs ne sont pas document√©es.  Je ne les ai trouv√©s nulle part.  Il ressort clairement du texte qu'ils commutent le composant STATUS_CONTROL entre les modes.  Mais dans le fichier VHDL mentionn√© pr√©c√©demment C: \ Program Files (x86) \ Cypress \ PSoC Creator \ 4.2 \ PSoC Creator \ warp \ lib \ lcpsoc3 \ cpsoc3.vhd <br><br><div class="spoiler">  <b class="spoiler_title">on voit s√©par√©ment le compteur d√©j√† connu de nous</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">component cy_psoc3_count7 generic(cy_period : std_logic_vector (6 downto 0) := "1111111"; cy_init_value : std_logic_vector (6 downto 0) := "0000000"; cy_route_ld : boolean := false; cy_route_en : boolean := false; cy_alt_mode : boolean := false); port (clock : in std_logic; reset : in std_logic; load : in std_logic; enable : in std_logic; count : out std_logic_vector (6 downto 0); tc : out std_logic); end component;</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">s√©par√©ment - statut et gestion</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> attribute atomic_rtl of cy_psoc3_status : component is rtl_generic; attribute cpu_access of cy_psoc3_status : component is true; component cy_psoc3_statusi generic(cy_force_order : boolean := false; cy_md_select : std_logic_vector (6 downto 0) := "0000000"; cy_int_mask : std_logic_vector (6 downto 0) := "0000000"); port (reset : in std_logic := '0'; clock : in std_logic := '0'; status : in std_logic_vector (6 downto 0); interrupt : out std_logic); end component; attribute atomic_rtl of cy_psoc3_statusi : component is rtl_generic; attribute cpu_access of cy_psoc3_statusi : component is true; component cy_psoc3_control generic(cy_init_value : std_logic_vector (7 downto 0) := "00000000"; cy_force_order : boolean := false; cy_ctrl_mode_1 : std_logic_vector (7 downto 0) := "00000000"; cy_ctrl_mode_0 : std_logic_vector (7 downto 0) := "00000000"; cy_ext_reset : boolean := false); port (reset : in std_logic := '0'; clock : in std_logic := '0'; control : out std_logic_vector (7 downto 0)); end component;</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">s√©par√©ment - synchroniseur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">component cy_psoc3_sync port (clock : in std_logic := '0'; sc_in : in std_logic; sc_out : out std_logic); end component;</code> </pre><br></div></div><br>  Je r√©p√®te que Verilog n'a pas du tout de version de ces d√©clarations (il n'y a que des mod√®les comportementaux dans le r√©pertoire C: \ Program Files (x86) \ Cypress \ PSoC Creator \ 4.2 \ PSoC Creator \ warp \ lib \ sim, donc je pense que le r√©glage des bits les modes ne sont pas accessibles aux simples programmeurs. Lors de la lecture de cette section, il convient de garder ce fait √† l'esprit. Quelque chose est donn√© √† titre purement indicatif, il n'est pas soumis √† nous programmeurs. </blockquote>  Pour activer le mode compteur, la sortie du compteur doit √™tre s√©lectionn√©e dans les bits SC_OUT_CTI [1: 0].  Dans ce mode, le fonctionnement normal du registre de contr√¥le n'est pas disponible.  Dans le m√™me temps, le registre d'√©tat peut √™tre utilis√© pour des op√©rations de lecture, mais vous ne devez pas l'utiliser pour g√©n√©rer une interruption, car le registre de mappage de masque est √©galement utilis√© comme registre de p√©riode de compteur.  Le registre de p√©riode n'est pas d√©truit et conserve son √©tat apr√®s le r√©veil.  Pour une p√©riode de N mesures, la valeur N-1 doit √™tre charg√©e dans le registre de p√©riode.  La valeur N = 1 (la p√©riode est nulle) car la valeur du diviseur de fr√©quence n'est pas support√©e et conduira √† une unit√© constante √† la sortie du TC (Terminal count, TC).  La disponibilit√© du mode SYNC d√©pend de l'utilisation ou non du contr√¥le dynamique (LD / EN).  S'il n'est pas utilis√©, il n'affecte pas le mode SYNC.  S'il est utilis√©, le mode SYNC n'est pas disponible. <br><br><h2>  21.3.3.5 Mode de synchronisation </h2><br>  Comme le montre la figure 21-37, le registre d'√©tat peut fonctionner comme une horloge double 4 bits synchronis√©e avec la valeur SC_CLK actuelle si le bit SYNC MD est d√©fini.  Ce mode peut √™tre utilis√© pour impl√©menter la synchronisation locale des signaux asynchrones (par exemple, les entr√©es GPIO).  Dans ce cas, les signaux synchronis√©s sont s√©lectionn√©s dans SC_IN [3: 0], les sorties sont achemin√©es vers les contacts SC_IO_OUT [3: 0], et SYNC MD bascule automatiquement les contacts SC_IO en mode de sortie.  Dans ce mode, le fonctionnement normal du registre d'√©tat n'est pas disponible et le mode bit d'√©tat collant est d√©sactiv√© de force, quels que soient les param√®tres de contr√¥le de mode.  Ce mode n'affecte pas le registre de contr√¥le.  Le compteur peut toujours √™tre utilis√©, mais avec des limitations.  Dans ce mode de fonctionnement, les entr√©es dynamiques (LD / EN) ne peuvent pas √™tre utilis√©es. <br><br><img src="https://habrastorage.org/webt/ol/cw/6z/olcw6ztxrs5xqzb-9l0i6uyyqa8.png"><br>  <i>Figure 21-37.</i>  <i>Mode synchrone.</i> <br><br><h2>  21.3.3.6 Horloge d'√©tat et de contr√¥le </h2><br>  Les registres de contr√¥le et d'√©tat n√©cessitent une s√©lection d'horloge dans l'un des modes de fonctionnement suivants: <br><br><ul><li>  registre d'√©tat avec n'importe quel bit en mode collant avec effacement apr√®s lecture, </li><li>  registre de contr√¥le en mode compteur, </li><li>  mode synchrone. </li></ul><br>  La synchronisation est affect√©e dans le module d'horloge et de r√©initialisation.  Voir 21.3.4.  Module de commande d'horloge et de r√©initialisation. <br><br><h2>  21.3.3.7 Registre de contr√¥le auxiliaire </h2><br>  Le registre de contr√¥le auxiliaire pour la lecture et l'√©criture est un registre sp√©cial qui contr√¥le l'√©quipement UDB dur.  Ce registre permet au CPU ou au DMA de contr√¥ler dynamiquement les interruptions, les FIFO et le fonctionnement du compteur.  Les bits des registres et leur description sont donn√©s ci-dessous: <br><br><div class="scrollable-table"><table><tbody><tr><th colspan="8">  <b>Registre de commande auxiliaire</b> </th></tr><tr><td>  <b>7</b> </td><td>  <b>6</b> </td><td>  <b>5</b> </td><td>  <b>4</b> </td><td>  <b>3</b> </td><td>  <b>2</b> </td><td>  <b>1</b> </td><td>  <b>0</b> </td></tr><tr><td></td><td></td><td>  CNT <br>  COMMENCER </td><td>  INT EN </td><td>  FIFO1 <br>  LVL </td><td>  FIFO0 <br>  LVL </td><td>  FIFO1 <br>  CLR </td><td>  FIFO0 <br>  CLR </td></tr></tbody></table></div><br><h4>  Clear FIFO0 et FIFO1 (FIFO0 Clear, FIFO1 Clear) </h4><br>  Les bits FIFO0 CLR et FIFO1 CLR sont utilis√©s pour r√©initialiser l'√©tat des FIFO correspondants.  Lorsque 1 est √©crit sur ces bits, l'√©tat de la FIFO correspondante est r√©initialis√©.  Pour continuer le fonctionnement FIFO, il est n√©cessaire d'√©crire 0. Ces bits restent arm√©s Les FIFO fonctionnent comme de simples tampons √† un octet sans √©tat. <br><br><h4>  Niveau FIFO0 et FIFO1 (niveau FIFO0, niveau FIFO1) </h4><br>  Les bits FIFO0 LVL et FIFO1 LVL d√©finissent le niveau auquel une FIFO de 4 octets augmente l'√©tat du bus (lorsque le bus lit ou √©crit dans FIFO).  La valeur d'√©tat du bus FIFO d√©pend de la direction configur√©e, comme indiqu√© dans le tableau ci-dessous. <br><br>  Tableau 21-21.  Bits de contr√¥le de niveau FIFO. <br><div class="scrollable-table"><table><tbody><tr><th>  <b>FIFOx</b> <b><br></b>  <b>LVL</b> </th><th>  <b>Mode d'entr√©e</b> <b><br></b>  <b>(Le bus √©crit au FIFO)</b> </th><th>  <b>Mode de sortie</b> <b><br></b>  <b>(Le bus lit depuis FIFO)</b> </th></tr><tr><td>  0 </td><td>  <b>Pas plein.</b> <br>  Vous pouvez √©crire au moins 1 octet. <br></td><td>  <b>Pas vide.</b> <br>  Au moins 1 octet est disponible pour la lecture. </td></tr><tr><td>  1 </td><td>  <b>D√©vast√© d'au moins la moiti√©.</b> <br>  Vous pouvez √©crire au moins 2 octets. </td><td>  <b>Au moins √† moiti√© plein.</b> <br>  Au moins 2 octets sont disponibles pour la lecture. </td></tr></tbody></table></div><br><h4>  Activer l'interruption </h4><br>  Lorsque la logique de g√©n√©ration de registre d'√©tat est activ√©e, le bit INT EN permet le passage du signal d'interruption g√©n√©r√©. <br><br><h4>  D√©marrer un compteur / compte?  (Compte de d√©but) </h4><br>  Le bit CNT START peut √™tre utilis√© pour d√©marrer et arr√™ter le compteur (disponible uniquement si les bits SC_OUT_CTL [1: 0] sont configur√©s pour le mode de sortie du compteur). <br><br><h2>  21.3.3.8 R√©sum√© des registres de gestion et d'√©tat </h2><br>  Le tableau ci-dessous r√©sume les fonctions des registres de contr√¥le et d'√©tat.  Veuillez noter que les registres de masque et de contr√¥le sont combin√©s avec des compteurs et des registres de p√©riode, et la valeur de ces registres ne d√©pend pas du mode de fonctionnement. <br><br>  Tableau 21-22.  Un bref r√©sum√© du fonctionnement des registres de gestion et de statut <br><div class="scrollable-table"><table><tbody><tr><th>  Le mode </th><th>  Gestion / Comptoir <br>  (Contr√¥le / comptage) </th><th>  Statut / Sync <br>  (Statut / SYNC) </th><th>  Superposition / p√©riode de masque <br>  (Masque / P√©riode) </th></tr><tr><td>  Contr√¥le </td><td>  Control Out </td><td rowspan="2">  Status In ou SYNC </td><td>  Masque d'√©tat de superposition </td></tr><tr><td>  Comptoir </td><td>  Counter Out </td><td>  P√©riode de comptage <sup>a</sup> (p√©riode de comptage) </td></tr><tr><td>  Statut </td><td rowspan="2">  Contr√¥le ou d√©compte </td><td>  Statut dans </td><td>  Masque d'√©tat de superposition </td></tr><tr><td>  Sync (SYNC) </td><td>  Sync (SYNC) </td><td>  Non disponible <sup>b</sup> (NA) </td></tr></tbody></table></div><br>  a.  - notez qu'en mode compteur, le registre de superposition de masque fonctionne comme un registre de p√©riode et ne peut pas fonctionner comme un registre de masque.  Par cons√©quent, la sortie d'interruption n'est pas disponible lorsque le mode compteur est activ√©. <br><br>  b.  - notez qu'en mode de synchronisation, le registre d'√©tat n'est pas disponible et qu'il est donc impossible d'utiliser le registre de superposition de masque.  Cependant, il peut √™tre utilis√© comme registre de p√©riode pour le mode compteur. <br><br>  √Ä suivre ... </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443380/">https://habr.com/ru/post/fr443380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443364/index.html">Comment une holding m√©diatique peut lancer 12 startups prosp√®res par an</a></li>
<li><a href="../fr443368/index.html">Nous pr√©parons une recherche plein texte dans Postgres. 2e partie</a></li>
<li><a href="../fr443372/index.html">Backend sur CodeFest. Des tripes command√©es?</a></li>
<li><a href="../fr443376/index.html">G√©r√© pour trouver des dizaines de stockages d'entreprise Box.com qui divulguent des donn√©es d'Apple, Herbalife, etc.</a></li>
<li><a href="../fr443378/index.html">Nous √©crivons un client http hautes performances en utilisant fasthttp comme exemple. Alexander Valyalkin (VertaMedia)</a></li>
<li><a href="../fr443382/index.html">Fintech Digest: Mir Pay pour Android, levant l'interdiction de retirer de l'argent des portefeuilles anonymes, les startups de l'IA ne sont pas exactement de l'IA</a></li>
<li><a href="../fr443384/index.html">Slurm et MegaSlerm √† Moscou fin mai</a></li>
<li><a href="../fr443386/index.html">Comment obtenir le journal de s√©curit√© avec un utilisateur non administrateur</a></li>
<li><a href="../fr443388/index.html">Contr√¥le d'√©clairage √† plusieurs niveaux bas√© sur KTS NPL</a></li>
<li><a href="../fr443390/index.html">Caract√©ristiques de l'anglais australien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>