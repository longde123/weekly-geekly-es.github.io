<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí• üë®üèΩ üóëÔ∏è Trabalhar com a API KOMPAS-3D ‚Üí Li√ß√£o 10 ‚Üí Caracteres especiais, incluindo uma sequ√™ncia üï¥Ô∏è üßû üë©üèª‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J√° nos familiarizamos com caracteres especiais na quarta li√ß√£o do nosso ciclo. Seu uso mais simples foi mostrado l√°. Ele tamb√©m disse que se a interfa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabalhar com a API KOMPAS-3D ‚Üí Li√ß√£o 10 ‚Üí Caracteres especiais, incluindo uma sequ√™ncia</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ascon/blog/414701/">  J√° nos familiarizamos com caracteres especiais na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">quarta li√ß√£o do</a> nosso ciclo.  Seu uso mais simples foi mostrado l√°.  Ele tamb√©m disse que se a interface <b>ksTextItemParam</b> especificar um caractere especial e uma sequ√™ncia, a sequ√™ncia ser√° localizada imediatamente ap√≥s o caractere especial.  No entanto, existem caracteres especiais que violam essa regra.  Hoje falaremos sobre eles. <br><br><img src="https://habrastorage.org/webt/iw/kr/zf/iwkrzfipwrlcopjm1kbpct1n2j4.png"><br><br><a name="habracut"></a><br><blockquote><h4>  O conte√∫do da s√©rie de li√ß√µes ‚ÄúTrabalhando com a API KOMPAS-3D‚Äù </h4><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O b√°sico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Desenho de desenho</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conex√£o correta com o KOMPAS</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Inscri√ß√£o principal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Primitivas gr√°ficas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Salvando um documento em v√°rios formatos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conhecendo as configura√ß√µes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">M√©todos de escrita mais sofisticados no bloco de t√≠tulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lendo c√©lulas de legenda</a> </li><li>  <b>Caracteres especiais, incluindo uma sequ√™ncia</b> </li></ol><br></blockquote><br><h2>  <font color="#00B2FF">Caracteres especiais, incluindo uma sequ√™ncia</font> </h2><br><img src="https://habrastorage.org/webt/0s/x3/wh/0sx3whiq1g1yjkqoi764nrg8owm.png"><br>  <i>A tabela de sinais especiais encontra-se no ap√™ndice V da ajuda principal do KOMPAS.</i> <br><br>  Caracteres especiais com os n√∫meros <i>78-80</i> , <i>83</i> , <i>93-99</i> , <i>171</i> e <i>172</i> incluem a sequ√™ncia.  Nesse caso, a sequ√™ncia <b>s da</b> interface <b>ksTextItemParam</b> n√£o est√° localizada ap√≥s o caractere especial, mas dentro dele.  Por exemplo, um caractere especial com o n√∫mero <i>80</i> exibe o texto no quadro.  A seguir, √© apresentado um exemplo de um programa que demonstra o trabalho com um caractere t√£o especial. <br><br><pre><code class="hljs erlang-repl">//    TextItemParamPtr TextItemParam; TextItemParam=(TextItemParamPtr)kompas-&gt;GetParamStruct(ko_TextItemParam); //  TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">98</span></span>); BSTR str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">""</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); //    StampPtr Stamp; Stamp=(StampPtr)Document2D-&gt;GetStamp(); //     Stamp-&gt;ksOpenStamp(); Stamp-&gt;ksColumnNumber(<span class="hljs-number"><span class="hljs-number">1</span></span>); Stamp-&gt;ksTextLine(TextItemParam); //     Stamp-&gt;ksCloseStamp(); Stamp.Unbind(); TextItemParam.Unbind(); Document2D.Unbind(); //   kompas-&gt;Visible = true; kompas.Unbind();</code> </pre> <br>  Por simplicidade, este exemplo omite o c√≥digo respons√°vel pela cria√ß√£o e execu√ß√£o do documento (este t√≥pico foi discutido nas li√ß√µes anteriores do ciclo).  A figura abaixo mostra o r√≥tulo principal formado por este programa. <br><br><img src="https://habrastorage.org/webt/19/we/pi/19wepilxlhns4c6pzxl4okbo-4u.png"><br><br>  Para simplificar, preenchemos apenas uma c√©lula.  O caractere especial com o n√∫mero <i>98</i> define o sinal da raiz quadrada.  Observe que o valor da propriedade s da interface <b>ksTextItemParam est√°</b> completamente sob o sinal de raiz.  Outros caracteres especiais, incluindo a string, funcionam exatamente da mesma maneira. <br><br><h2>  <font color="#00B2FF">Caracteres especiais e <b>ksTextLineParam</b></font> </h2><br>  A a√ß√£o de caracteres especiais n√£o se limita √† interface <b>ksTextItemParam</b> .  Considere o exemplo abaixo. <br><br><pre> <code class="hljs erlang-repl">//     TextItemParamPtr TextItemParam; TextItemParam=(TextItemParamPtr)kompas-&gt;GetParamStruct(ko_TextItemParam); //     DynamicArrayPtr DynamicArray; DynamicArray=(DynamicArrayPtr)kompas-&gt;GetDynamicArray(TEXT_ITEM_ARR); //   TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">98</span></span>); BSTR str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"1 "</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //   TextItemParam-&gt;Init(); TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">169</span></span>); str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"2 "</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //   TextItemParam-&gt;Init(); TextItemParam-&gt;set_type(<span class="hljs-number"><span class="hljs-number">0</span></span>); str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">" 3"</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //   ksTextLineParam TextLineParamPtr TextLineParam; TextLineParam=(TextLineParamPtr)kompas-&gt;GetParamStruct(ko_TextLineParam); TextLineParam-&gt;SetTextItemArr(DynamicArray); //    StampPtr Stamp; Stamp=(StampPtr)Document2D-&gt;GetStamp(); //     Stamp-&gt;ksOpenStamp(); Stamp-&gt;ksColumnNumber(<span class="hljs-number"><span class="hljs-number">1</span></span>); Stamp-&gt;ksTextLine(TextLineParam); //     Stamp-&gt;ksCloseStamp(); Stamp.Unbind(); TextItemParam.Unbind(); TextLineParam.Unbind(); DynamicArray-&gt;ksDeleteArray(); DynamicArray.Unbind(); Document2D.Unbind(); //   kompas-&gt;Visible = true; kompas.Unbind();</code> </pre><br>  Neste exemplo, uma linha composta por tr√™s componentes √© inserida no bloco de t√≠tulo.  Os dois primeiros cont√™m um caractere especial e uma string.  O terceiro componente cont√©m apenas uma sequ√™ncia, sem um caractere especial.  Vejamos o resultado do programa (a figura abaixo mostra apenas a linha gerada sem a inscri√ß√£o principal). <br><br><img src="https://habrastorage.org/webt/0o/4a/pk/0o4apkmrscynicmcq1otwlhtkfm.png"><br><br>  Observe que a linha <i>‚ÄúP√°gina 2‚Äù</i> e a linha <i>‚ÄúP√°gina 3‚Äù foram</i> inclu√≠das no segundo caractere especial, que planejamos exibir fora do caractere especial.  Al√©m disso, ambas as linhas foram inclu√≠das no primeiro caractere especial (tamb√©m n√£o planejamos isso).  Este exemplo demonstra dois pontos importantes: <br><br><ul><li>  caracteres especiais podem incluir outros caracteres especiais; </li><li>  a a√ß√£o do caractere especial se estende a todos os componentes que comp√µem a interface <b>ksTextLineParam</b> . </li></ul><br>  Uma pergunta razo√°vel surge - existe uma maneira de limitar a a√ß√£o do personagem especial?  Sim existe.  Mas, para entend√™-lo, primeiro voc√™ precisa se familiarizar com a interface <b>ksTextItemFont</b> . <br><br><h2>  <font color="#00B2FF">Op√ß√µes de fonte do componente de texto ( <b>ksTextItemFont</b> )</font> </h2><br>  De acordo com a documenta√ß√£o, a interface <b>ksTextItemFont</b> descreve os par√¢metros de fonte do componente de texto.  Mas, de fato, seus recursos excedem a descri√ß√£o simples da fonte usada.  Essa interface permite criar linhas compostas (sobre elas - nas pr√≥ximas li√ß√µes do ciclo). <br><br>  Voc√™ pode obt√™-lo de v√°rias maneiras.  Primeiro, usando o m√©todo <b>GetParamStruct</b> da interface <b>KompasObject</b> : para isso, a constante <b>ko_TextItemFont</b> deve ser passada para esse m√©todo como o √∫nico par√¢metro.  Em segundo lugar, usando o m√©todo <b>GetItemFont da</b> interface <b>ksTextItemParam</b> .  Este m√©todo n√£o possui par√¢metros de entrada e retorna a interface <b>ksTextItemFont</b> j√° associada ao componente de texto. <br><br>  Considere as propriedades da interface <b>ksTextItemFont</b> . <br>  <b>bitvector</b> - um vetor de bits que define as caracter√≠sticas do texto (elas ser√£o discutidas em detalhes nas pr√≥ximas li√ß√µes do ciclo). <br>  <b>color</b> - cor dos caracteres no formato RGB. <br>  <b>fontName</b> - uma string com o nome da fonte. <br>  <b>height</b> - <b>altura da</b> fonte em mil√≠metros. <br>  <b>ksu</b> √© o fator de extens√£o do texto. <br>  Existem apenas tr√™s m√©todos para a interface <b>ksTextItemFont</b> . <br>  <b>Init ()</b> redefine todas as propriedades da interface.  N√£o possui par√¢metros de entrada.  Se for bem-sucedido, retornar√° <i>VERDADEIRO</i> e, em caso de erro - <i>FALSO</i> . <br>  <b>GetBitVectorValue</b> retorna o valor de um sinalizador individual do conjunto de <b>vetores de bits</b> .  Como um √∫nico par√¢metro, ele aceita uma flag cujo valor queremos determinar.  Se estiver definido, o m√©todo retornar√° <i>VERDADEIRO</i> ; se redefinido, <i>FALSO</i> . <br>  <b>SetBitVectorValue</b> altera o valor de um √∫nico sinalizador.  A seguir est√° um prot√≥tipo desse m√©todo: <br><br><pre> <code class="hljs objectivec"><span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span> SetBitVectorValue ( <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> bitVector, <span class="hljs-comment"><span class="hljs-comment">//  BOOL state //   );</span></span></code> </pre><br>  Se o valor do par√¢metro <b>state</b> for <i>TRUE</i> , o sinalizador <b>bitVector ser√° ativado</b> , caso contr√°rio, ser√° redefinido. <br>  Se for bem-sucedido, o m√©todo <b>SetBitVectorValue</b> retornar√° <i>TRUE</i> e, em caso de erro, <i>FALSE</i> . <br>  Os <b>m√©todos GetBitVectorValue</b> e <b>SetBitVectorValue</b> permitem trabalhar com a propriedade <b>bitvector</b> sem acess√°-la diretamente. <br><br><h2>  <font color="#00B2FF">Limita√ß√£o de caracteres especiais</font> </h2><br>  Dois sinalizadores s√£o projetados para controlar caracteres especiais.  Eles est√£o listados na tabela abaixo. <br><br><img src="https://habrastorage.org/webt/i0/d1/gi/i0d1gimygumrgjotsp1o6fksiyg.png"><br><br>  O sinalizador <b>SPECIAL_SYMBOL</b> que j√° consideramos quando descrevemos a interface <b>ksTextItemParam</b> .  √â necess√°rio para indicar - um caractere especial √© exibido.  O mesmo sinalizador √© duplicado na propriedade <b>bitVector da</b> interface <b>ksTextItemFont</b> (como mostram minhas experi√™ncias, essa duplica√ß√£o √© opcional). <br><br>  O segundo sinalizador ( <b>SPECIAL_SYMBOL_END</b> ) faz sentido apenas para caracteres especiais que incluem uma string.  Cancela a a√ß√£o do caractere especial.  As linhas exibidas ap√≥s esse sinalizador n√£o s√£o inclu√≠das no caractere especial. <br><br>  A a√ß√£o combinada de ambas as bandeiras cancela a a√ß√£o do caractere especial.  Nesse caso, o caractere especial n√£o ser√° exibido no documento. <br><br><h2>  <font color="#00B2FF">Exemplo</font> </h2><br>  Abaixo est√° o c√≥digo fonte do programa modificado.  Usando os sinalizadores descritos acima, ele implementa a sa√≠da correta dos componentes. <br><br><pre> <code class="hljs erlang-repl">//     TextItemParamPtr TextItemParam; TextItemParam=(TextItemParamPtr)kompas-&gt;GetParamStruct(ko_TextItemParam); //     DynamicArrayPtr DynamicArray; DynamicArray=(DynamicArrayPtr)kompas-&gt;GetDynamicArray(TEXT_ITEM_ARR); //   TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">98</span></span>); BSTR str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"1 "</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //   TextItemFontPtr TextItemFont; TextItemParam-&gt;Init(); TextItemFont=(TextItemFontPtr)TextItemParam-&gt;GetItemFont(); TextItemFont-&gt;set_bitVector(SPECIAL_SYMBOL_END); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); TextItemFont-&gt;Init(); TextItemFont.Unbind(); //   TextItemParam-&gt;Init(); TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">169</span></span>); str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"2 "</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //      TextItemParam-&gt;Init(); TextItemFont=(TextItemFontPtr)TextItemParam-&gt;GetItemFont(); TextItemFont-&gt;set_bitVector(SPECIAL_SYMBOL_END); TextItemParam-&gt;set_type(<span class="hljs-number"><span class="hljs-number">0</span></span>); str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"  3"</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); TextItemFont.Unbind(); //   ksTextLineParam TextLineParamPtr TextLineParam; TextLineParam=(TextLineParamPtr)kompas-&gt;GetParamStruct(ko_TextLineParam); TextLineParam-&gt;SetTextItemArr(DynamicArray); //    StampPtr Stamp; Stamp=(StampPtr)Document2D-&gt;GetStamp(); //     Stamp-&gt;ksOpenStamp(); Stamp-&gt;ksColumnNumber(<span class="hljs-number"><span class="hljs-number">1</span></span>); Stamp-&gt;ksTextLine(TextLineParam); //     Stamp-&gt;ksCloseStamp(); Stamp.Unbind(); TextItemParam.Unbind(); TextLineParam.Unbind(); DynamicArray-&gt;ksDeleteArray(); DynamicArray.Unbind(); Document2D.Unbind(); //   kompas-&gt;Visible = true; kompas.Unbind();</code> </pre><br>  A √∫nica diferen√ßa entre este exemplo e o anterior √© que, ap√≥s cada caractere especial, um componente √© exibido para o qual o sinalizador <b>SPECIAL_SYMBOL_END</b> √© definido na interface <b>ksTextItemFont</b> .  Seu √∫nico objetivo √© cancelar a a√ß√£o do personagem especial.  No primeiro caso, ele n√£o cont√©m nenhum dado (exceto a bandeira, √© claro).  E no segundo caso, cont√©m a string <i>"P√°gina 3"</i> . <br><br>  Voc√™ n√£o pode combinar o sinalizador <b>SPECIAL_SYMBOL_END</b> com a sa√≠da do segundo caractere especial.  Como nesse caso, esse sinalizador cancelar√° a a√ß√£o dos dois caracteres especiais.  A linha <i>"P√°gina 2"</i> ser√° exibida sem rasuras. <br><br>  A figura abaixo mostra a linha exibida pelo programa no bloco de t√≠tulo. <br><br><img src="https://habrastorage.org/webt/hj/cd/tn/hjcdtneeonrdvngvleec6uaxuic.png"><br><br>  Como voc√™ pode ver, agora a a√ß√£o de caracteres especiais se aplica apenas ao componente "your". <br><br><h2>  <font color="#00B2FF">S√≠mbolos especiais aninhados</font> </h2><br>  O primeiro exemplo da li√ß√£o de hoje mostra claramente - caracteres especiais podem ser incorporados um no outro.  O sinalizador <b>SPECIAL_SYMBOL_END</b> cancela a a√ß√£o de um (√∫ltimo) caractere especial.  Isso permite criar linhas complexas com caracteres especiais incorporados. <br><br>  Abaixo est√° o c√≥digo fonte do exemplo modificado, no qual a subcadeia <i>‚ÄúP√°gina 2‚Äù</i> tamb√©m <i>√©</i> inclu√≠da na express√£o sob o sinal de raiz quadrada. <br><br><pre> <code class="hljs erlang-repl">//     TextItemParamPtr TextItemParam; TextItemParam=(TextItemParamPtr)kompas-&gt;GetParamStruct(ko_TextItemParam); //     DynamicArrayPtr DynamicArray; DynamicArray=(DynamicArrayPtr)kompas-&gt;GetDynamicArray(TEXT_ITEM_ARR); //   TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">98</span></span>); BSTR str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"1 "</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //   TextItemParam-&gt;Init(); TextItemParam-&gt;set_type(SPECIAL_SYMBOL); TextItemParam-&gt;set_iSNumb(<span class="hljs-number"><span class="hljs-number">169</span></span>); str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"2 "</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //   TextItemFontPtr TextItemFont; TextItemParam-&gt;Init(); TextItemFont=(TextItemFontPtr)TextItemParam-&gt;GetItemFont(); TextItemFont-&gt;set_bitVector(SPECIAL_SYMBOL_END); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); //      TextItemParam-&gt;set_type(<span class="hljs-number"><span class="hljs-number">0</span></span>); str = SysAllocString(L<span class="hljs-string"><span class="hljs-string">"  3"</span></span>); TextItemParam-&gt;set_s(str); SysFreeString(str); DynamicArray-&gt;ksAddArrayItem(-<span class="hljs-number"><span class="hljs-number">1</span></span>, TextItemParam); TextItemFont.Unbind(); //   ksTextLineParam TextLineParamPtr TextLineParam; TextLineParam=(TextLineParamPtr)kompas-&gt;GetParamStruct(ko_TextLineParam); TextLineParam-&gt;SetTextItemArr(DynamicArray); //    StampPtr Stamp; Stamp=(StampPtr)Document2D-&gt;GetStamp(); //     Stamp-&gt;ksOpenStamp(); Stamp-&gt;ksColumnNumber(<span class="hljs-number"><span class="hljs-number">1</span></span>); Stamp-&gt;ksTextLine(TextLineParam); //     Stamp-&gt;ksCloseStamp(); Stamp.Unbind(); TextItemParam.Unbind(); TextLineParam.Unbind(); DynamicArray-&gt;ksDeleteArray(); DynamicArray.Unbind(); Document2D.Unbind(); //   kompas-&gt;Visible = true; kompas.Unbind();</code> </pre><br>  Observe que, ap√≥s a substitui√ß√£o da string <i>"P√°gina 2",</i> produzimos duas vezes o componente com o sinalizador <b>SPECIAL_SYMBOL_END</b> (a primeira vez - como parte de um componente vazio, o segundo - junto com a string <i>"P√°gina 3"</i> ).  Isso √© necess√°rio para cancelar a a√ß√£o de caracteres especiais.  A primeira vez que cancelamos o caractere especial <i>169</i> (tachado), a segunda vez - <i>98</i> (raiz quadrada).  Se <b>exibirmos</b> apenas um componente com o sinalizador <b>SPECIAL_SYMBOL_END</b> , isso cancelar√° apenas o caractere especial <i>169</i> , mas n√£o <i>98</i> .  Nesse caso, a linha <i>‚ÄúP√°gina 3‚Äù</i> n√£o seria riscada, mas seria inclu√≠da na express√£o sob o sinal de raiz. <br>  A figura abaixo mostra o resultado deste programa. <br><br><img src="https://habrastorage.org/webt/fs/x5/gc/fsx5gc3eq24wn7m1k1mbbgfah_m.png"><br><br>  <b>Conclus√£o</b> <br><br>  Como parte desta li√ß√£o, encontramos caracteres especiais que incluem uma sequ√™ncia.  Como voc√™ viu, eles s√£o significativamente diferentes dos caracteres especiais simples (por exemplo, letras do alfabeto grego).  Embora tenhamos mostrado a eles no exemplo da inscri√ß√£o principal, isso n√£o deve confundi-lo.  Esses caracteres podem ser usados ‚Äã‚Äãem outros m√©todos de sa√≠da de texto.  Vamos considerar um desses m√©todos na pr√≥xima li√ß√£o. <br><br>  <b>Para continuar, acompanhe as not√≠cias do blog.</b> <br><br> <a href=""><img src="https://habrastorage.org/web/595/eee/f27/595eeef271b24830b3578751fcb52716.png"></a>  Sergey Norseev, Ph.D., autor do livro "Application Development for COMPAS in Delphi". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt414701/">https://habr.com/ru/post/pt414701/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt414689/index.html">Li√ß√£o aberta "Aplicativos da Web e microsservi√ßos no Spring Boot 2.0"</a></li>
<li><a href="../pt414691/index.html">Background. YouTube Music e YouTube Premium: o que √© e como eles diferem</a></li>
<li><a href="../pt414693/index.html">Fujitsu fi-4750C no Windows 10 via Adaptec 78xx SCSI</a></li>
<li><a href="../pt414695/index.html">NanoIntrodu√ß√£o √† Internet das Nano-Coisas. Parte 2</a></li>
<li><a href="../pt414699/index.html">Ladrilhos irregulares na superf√≠cie de planetas gerados proceduralmente</a></li>
<li><a href="../pt414703/index.html">(Quase) seis meses depois - um corte de opini√µes sobre os projetores residenciais econ√¥micos Epson EH-TW610 e Epson EH-TW650. E outra enquete</a></li>
<li><a href="../pt414705/index.html">Obras-primas da constru√ß√£o do alto-falante global: monitore o caminho inovador da Audio, de tecido a materiais met√°licos e compostos</a></li>
<li><a href="../pt414707/index.html">An√°lise de blockchain, ou por que o mixer quebrou?</a></li>
<li><a href="../pt414709/index.html">Le√µes do deserto e introspec√ß√£o</a></li>
<li><a href="../pt414711/index.html">O aplicativo de futebol espanhol La Liga transformou seus usu√°rios em golpistas involunt√°rios</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>